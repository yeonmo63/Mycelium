function lJ(a,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in a)){const i=Object.getOwnPropertyDescriptor(r,n);i&&Object.defineProperty(a,n,i.get?i:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var kg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function MA(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var kS={exports:{}},Pm={};var WI;function cJ(){if(WI)return Pm;WI=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,n,i){var o=null;if(i!==void 0&&(o=""+i),n.key!==void 0&&(o=""+n.key),"key"in n){i={};for(var l in n)l!=="key"&&(i[l]=n[l])}else i=n;return n=i.ref,{$$typeof:a,type:r,key:o,ref:n!==void 0?n:null,props:i}}return Pm.Fragment=e,Pm.jsx=t,Pm.jsxs=t,Pm}var $I;function dJ(){return $I||($I=1,kS.exports=cJ()),kS.exports}var s=dJ(),CS={exports:{}},Wa={};var YI;function uJ(){if(YI)return Wa;YI=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),f=Symbol.iterator;function p(Z){return Z===null||typeof Z!="object"?null:(Z=f&&Z[f]||Z["@@iterator"],typeof Z=="function"?Z:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function _(Z,ie,de){this.props=Z,this.context=ie,this.refs=w,this.updater=de||g}_.prototype.isReactComponent={},_.prototype.setState=function(Z,ie){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,ie,"setState")},_.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function k(){}k.prototype=_.prototype;function T(Z,ie,de){this.props=Z,this.context=ie,this.refs=w,this.updater=de||g}var D=T.prototype=new k;D.constructor=T,b(D,_.prototype),D.isPureReactComponent=!0;var I=Array.isArray;function O(){}var P={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function G(Z,ie,de){var fe=de.ref;return{$$typeof:a,type:Z,key:ie,ref:fe!==void 0?fe:null,props:de}}function Q(Z,ie){return G(Z.type,ie,Z.props)}function $(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===a}function ae(Z){var ie={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(de){return ie[de]})}var J=/\/+/g;function U(Z,ie){return typeof Z=="object"&&Z!==null&&Z.key!=null?ae(""+Z.key):ie.toString(36)}function F(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(O,O):(Z.status="pending",Z.then(function(ie){Z.status==="pending"&&(Z.status="fulfilled",Z.value=ie)},function(ie){Z.status==="pending"&&(Z.status="rejected",Z.reason=ie)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function W(Z,ie,de,fe,he){var ve=typeof Z;(ve==="undefined"||ve==="boolean")&&(Z=null);var Oe=!1;if(Z===null)Oe=!0;else switch(ve){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(Z.$$typeof){case a:case e:Oe=!0;break;case u:return Oe=Z._init,W(Oe(Z._payload),ie,de,fe,he)}}if(Oe)return he=he(Z),Oe=fe===""?"."+U(Z,0):fe,I(he)?(de="",Oe!=null&&(de=Oe.replace(J,"$&/")+"/"),W(he,ie,de,"",function(we){return we})):he!=null&&($(he)&&(he=Q(he,de+(he.key==null||Z&&Z.key===he.key?"":(""+he.key).replace(J,"$&/")+"/")+Oe)),ie.push(he)),1;Oe=0;var Se=fe===""?".":fe+":";if(I(Z))for(var Ce=0;Ce<Z.length;Ce++)fe=Z[Ce],ve=Se+U(fe,Ce),Oe+=W(fe,ie,de,ve,he);else if(Ce=p(Z),typeof Ce=="function")for(Z=Ce.call(Z),Ce=0;!(fe=Z.next()).done;)fe=fe.value,ve=Se+U(fe,Ce++),Oe+=W(fe,ie,de,ve,he);else if(ve==="object"){if(typeof Z.then=="function")return W(F(Z),ie,de,fe,he);throw ie=String(Z),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function K(Z,ie,de){if(Z==null)return Z;var fe=[],he=0;return W(Z,fe,"","",function(ve){return ie.call(de,ve,he++)}),fe}function ee(Z){if(Z._status===-1){var ie=Z._result;ie=ie(),ie.then(function(de){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=de)},function(de){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=de)}),Z._status===-1&&(Z._status=0,Z._result=ie)}if(Z._status===1)return Z._result.default;throw Z._result}var ne=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)},re={map:K,forEach:function(Z,ie,de){K(Z,function(){ie.apply(this,arguments)},de)},count:function(Z){var ie=0;return K(Z,function(){ie++}),ie},toArray:function(Z){return K(Z,function(ie){return ie})||[]},only:function(Z){if(!$(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}};return Wa.Activity=h,Wa.Children=re,Wa.Component=_,Wa.Fragment=t,Wa.Profiler=n,Wa.PureComponent=T,Wa.StrictMode=r,Wa.Suspense=c,Wa.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Wa.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return P.H.useMemoCache(Z)}},Wa.cache=function(Z){return function(){return Z.apply(null,arguments)}},Wa.cacheSignal=function(){return null},Wa.cloneElement=function(Z,ie,de){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var fe=b({},Z.props),he=Z.key;if(ie!=null)for(ve in ie.key!==void 0&&(he=""+ie.key),ie)!V.call(ie,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&ie.ref===void 0||(fe[ve]=ie[ve]);var ve=arguments.length-2;if(ve===1)fe.children=de;else if(1<ve){for(var Oe=Array(ve),Se=0;Se<ve;Se++)Oe[Se]=arguments[Se+2];fe.children=Oe}return G(Z.type,he,fe)},Wa.createContext=function(Z){return Z={$$typeof:o,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:i,_context:Z},Z},Wa.createElement=function(Z,ie,de){var fe,he={},ve=null;if(ie!=null)for(fe in ie.key!==void 0&&(ve=""+ie.key),ie)V.call(ie,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(he[fe]=ie[fe]);var Oe=arguments.length-2;if(Oe===1)he.children=de;else if(1<Oe){for(var Se=Array(Oe),Ce=0;Ce<Oe;Ce++)Se[Ce]=arguments[Ce+2];he.children=Se}if(Z&&Z.defaultProps)for(fe in Oe=Z.defaultProps,Oe)he[fe]===void 0&&(he[fe]=Oe[fe]);return G(Z,ve,he)},Wa.createRef=function(){return{current:null}},Wa.forwardRef=function(Z){return{$$typeof:l,render:Z}},Wa.isValidElement=$,Wa.lazy=function(Z){return{$$typeof:u,_payload:{_status:-1,_result:Z},_init:ee}},Wa.memo=function(Z,ie){return{$$typeof:d,type:Z,compare:ie===void 0?null:ie}},Wa.startTransition=function(Z){var ie=P.T,de={};P.T=de;try{var fe=Z(),he=P.S;he!==null&&he(de,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(O,ne)}catch(ve){ne(ve)}finally{ie!==null&&de.types!==null&&(ie.types=de.types),P.T=ie}},Wa.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Wa.use=function(Z){return P.H.use(Z)},Wa.useActionState=function(Z,ie,de){return P.H.useActionState(Z,ie,de)},Wa.useCallback=function(Z,ie){return P.H.useCallback(Z,ie)},Wa.useContext=function(Z){return P.H.useContext(Z)},Wa.useDebugValue=function(){},Wa.useDeferredValue=function(Z,ie){return P.H.useDeferredValue(Z,ie)},Wa.useEffect=function(Z,ie){return P.H.useEffect(Z,ie)},Wa.useEffectEvent=function(Z){return P.H.useEffectEvent(Z)},Wa.useId=function(){return P.H.useId()},Wa.useImperativeHandle=function(Z,ie,de){return P.H.useImperativeHandle(Z,ie,de)},Wa.useInsertionEffect=function(Z,ie){return P.H.useInsertionEffect(Z,ie)},Wa.useLayoutEffect=function(Z,ie){return P.H.useLayoutEffect(Z,ie)},Wa.useMemo=function(Z,ie){return P.H.useMemo(Z,ie)},Wa.useOptimistic=function(Z,ie){return P.H.useOptimistic(Z,ie)},Wa.useReducer=function(Z,ie,de){return P.H.useReducer(Z,ie,de)},Wa.useRef=function(Z){return P.H.useRef(Z)},Wa.useState=function(Z){return P.H.useState(Z)},Wa.useSyncExternalStore=function(Z,ie,de){return P.H.useSyncExternalStore(Z,ie,de)},Wa.useTransition=function(){return P.H.useTransition()},Wa.version="19.2.3",Wa}var qI;function EA(){return qI||(qI=1,CS.exports=uJ()),CS.exports}var H=EA();const vr=MA(H),hJ=lJ({__proto__:null,default:vr},[H]);var AS={exports:{}},Bm={},TS={exports:{}},MS={};var XI;function fJ(){return XI||(XI=1,(function(a){function e(W,K){var ee=W.length;W.push(K);e:for(;0<ee;){var ne=ee-1>>>1,re=W[ne];if(0<n(re,K))W[ne]=K,W[ee]=re,ee=ne;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var K=W[0],ee=W.pop();if(ee!==K){W[0]=ee;e:for(var ne=0,re=W.length,Z=re>>>1;ne<Z;){var ie=2*(ne+1)-1,de=W[ie],fe=ie+1,he=W[fe];if(0>n(de,ee))fe<re&&0>n(he,de)?(W[ne]=he,W[fe]=ee,ne=fe):(W[ne]=de,W[ie]=ee,ne=ie);else if(fe<re&&0>n(he,ee))W[ne]=he,W[fe]=ee,ne=fe;else break e}}return K}function n(W,K){var ee=W.sortIndex-K.sortIndex;return ee!==0?ee:W.id-K.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;a.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();a.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,p=!1,g=!1,b=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function D(W){for(var K=t(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=W)r(d),K.sortIndex=K.expirationTime,e(c,K);else break;K=t(d)}}function I(W){if(b=!1,D(W),!g)if(t(c)!==null)g=!0,O||(O=!0,ae());else{var K=t(d);K!==null&&F(I,K.startTime-W)}}var O=!1,P=-1,V=5,G=-1;function Q(){return w?!0:!(a.unstable_now()-G<V)}function $(){if(w=!1,O){var W=a.unstable_now();G=W;var K=!0;try{e:{g=!1,b&&(b=!1,k(P),P=-1),p=!0;var ee=f;try{t:{for(D(W),h=t(c);h!==null&&!(h.expirationTime>W&&Q());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,f=h.priorityLevel;var re=ne(h.expirationTime<=W);if(W=a.unstable_now(),typeof re=="function"){h.callback=re,D(W),K=!0;break t}h===t(c)&&r(c),D(W)}else r(c);h=t(c)}if(h!==null)K=!0;else{var Z=t(d);Z!==null&&F(I,Z.startTime-W),K=!1}}break e}finally{h=null,f=ee,p=!1}K=void 0}}finally{K?ae():O=!1}}}var ae;if(typeof T=="function")ae=function(){T($)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,U=J.port2;J.port1.onmessage=$,ae=function(){U.postMessage(null)}}else ae=function(){_($,0)};function F(W,K){P=_(function(){W(a.unstable_now())},K)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(W){W.callback=null},a.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<W?Math.floor(1e3/W):5},a.unstable_getCurrentPriorityLevel=function(){return f},a.unstable_next=function(W){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var ee=f;f=K;try{return W()}finally{f=ee}},a.unstable_requestPaint=function(){w=!0},a.unstable_runWithPriority=function(W,K){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ee=f;f=W;try{return K()}finally{f=ee}},a.unstable_scheduleCallback=function(W,K,ee){var ne=a.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ne+ee:ne):ee=ne,W){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=ee+re,W={id:u++,callback:K,priorityLevel:W,startTime:ee,expirationTime:re,sortIndex:-1},ee>ne?(W.sortIndex=ee,e(d,W),t(c)===null&&W===t(d)&&(b?(k(P),P=-1):b=!0,F(I,ee-ne))):(W.sortIndex=re,e(c,W),g||p||(g=!0,O||(O=!0,ae()))),W},a.unstable_shouldYield=Q,a.unstable_wrapCallback=function(W){var K=f;return function(){var ee=f;f=K;try{return W.apply(this,arguments)}finally{f=ee}}}})(MS)),MS}var ZI;function pJ(){return ZI||(ZI=1,TS.exports=fJ()),TS.exports}var ES={exports:{}},Qi={};var KI;function xJ(){if(KI)return Qi;KI=1;var a=EA();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(c,d,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:h==null?null:""+h,children:c,containerInfo:d,implementation:u}}var o=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Qi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qi.createPortal=function(c,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return i(c,d,null,u)},Qi.flushSync=function(c){var d=o.T,u=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=d,r.p=u,r.d.f()}},Qi.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(c,d))},Qi.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Qi.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var u=d.as,h=l(u,d.crossOrigin),f=typeof d.integrity=="string"?d.integrity:void 0,p=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?r.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:h,integrity:f,fetchPriority:p}):u==="script"&&r.d.X(c,{crossOrigin:h,integrity:f,fetchPriority:p,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Qi.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=l(d.as,d.crossOrigin);r.d.M(c,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(c)},Qi.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,h=l(u,d.crossOrigin);r.d.L(c,u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Qi.preloadModule=function(c,d){if(typeof c=="string")if(d){var u=l(d.as,d.crossOrigin);r.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(c)},Qi.requestFormReset=function(c){r.d.r(c)},Qi.unstable_batchedUpdates=function(c,d){return c(d)},Qi.useFormState=function(c,d,u){return o.H.useFormState(c,d,u)},Qi.useFormStatus=function(){return o.H.useHostTransitionStatus()},Qi.version="19.2.3",Qi}var QI;function UV(){if(QI)return ES.exports;QI=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),ES.exports=xJ(),ES.exports}var JI;function mJ(){if(JI)return Bm;JI=1;var a=pJ(),e=EA(),t=UV();function r(x){var v="https://react.dev/errors/"+x;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)v+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+x+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(x){return!(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)}function i(x){var v=x,S=x;if(x.alternate)for(;v.return;)v=v.return;else{x=v;do v=x,(v.flags&4098)!==0&&(S=v.return),x=v.return;while(x)}return v.tag===3?S:null}function o(x){if(x.tag===13){var v=x.memoizedState;if(v===null&&(x=x.alternate,x!==null&&(v=x.memoizedState)),v!==null)return v.dehydrated}return null}function l(x){if(x.tag===31){var v=x.memoizedState;if(v===null&&(x=x.alternate,x!==null&&(v=x.memoizedState)),v!==null)return v.dehydrated}return null}function c(x){if(i(x)!==x)throw Error(r(188))}function d(x){var v=x.alternate;if(!v){if(v=i(x),v===null)throw Error(r(188));return v!==x?null:x}for(var S=x,E=v;;){var z=S.return;if(z===null)break;var q=z.alternate;if(q===null){if(E=z.return,E!==null){S=E;continue}break}if(z.child===q.child){for(q=z.child;q;){if(q===S)return c(z),x;if(q===E)return c(z),v;q=q.sibling}throw Error(r(188))}if(S.return!==E.return)S=z,E=q;else{for(var le=!1,me=z.child;me;){if(me===S){le=!0,S=z,E=q;break}if(me===E){le=!0,E=z,S=q;break}me=me.sibling}if(!le){for(me=q.child;me;){if(me===S){le=!0,S=q,E=z;break}if(me===E){le=!0,E=q,S=z;break}me=me.sibling}if(!le)throw Error(r(189))}}if(S.alternate!==E)throw Error(r(190))}if(S.tag!==3)throw Error(r(188));return S.stateNode.current===S?x:v}function u(x){var v=x.tag;if(v===5||v===26||v===27||v===6)return x;for(x=x.child;x!==null;){if(v=u(x),v!==null)return v;x=x.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),T=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function ae(x){return x===null||typeof x!="object"?null:(x=$&&x[$]||x["@@iterator"],typeof x=="function"?x:null)}var J=Symbol.for("react.client.reference");function U(x){if(x==null)return null;if(typeof x=="function")return x.$$typeof===J?null:x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case b:return"Fragment";case _:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case O:return"SuspenseList";case G:return"Activity"}if(typeof x=="object")switch(x.$$typeof){case g:return"Portal";case T:return x.displayName||"Context";case k:return(x._context.displayName||"Context")+".Consumer";case D:var v=x.render;return x=x.displayName,x||(x=v.displayName||v.name||"",x=x!==""?"ForwardRef("+x+")":"ForwardRef"),x;case P:return v=x.displayName||null,v!==null?v:U(x.type)||"Memo";case V:v=x._payload,x=x._init;try{return U(x(v))}catch{}}return null}var F=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ne=[],re=-1;function Z(x){return{current:x}}function ie(x){0>re||(x.current=ne[re],ne[re]=null,re--)}function de(x,v){re++,ne[re]=x.current,x.current=v}var fe=Z(null),he=Z(null),ve=Z(null),Oe=Z(null);function Se(x,v){switch(de(ve,v),de(he,x),de(fe,null),v.nodeType){case 9:case 11:x=(x=v.documentElement)&&(x=x.namespaceURI)?pI(x):0;break;default:if(x=v.tagName,v=v.namespaceURI)v=pI(v),x=xI(v,x);else switch(x){case"svg":x=1;break;case"math":x=2;break;default:x=0}}ie(fe),de(fe,x)}function Ce(){ie(fe),ie(he),ie(ve)}function we(x){x.memoizedState!==null&&de(Oe,x);var v=fe.current,S=xI(v,x.type);v!==S&&(de(he,x),de(fe,S))}function xe(x){he.current===x&&(ie(fe),ie(he)),Oe.current===x&&(ie(Oe),Im._currentValue=ee)}var be,Ee;function ze(x){if(be===void 0)try{throw Error()}catch(S){var v=S.stack.trim().match(/\n( *(at )?)/);be=v&&v[1]||"",Ee=-1<S.stack.indexOf(`
    at`)?" (<anonymous>)":-1<S.stack.indexOf("@")?"@unknown:0:0":""}return`
`+be+x+Ee}var Ze=!1;function Re(x,v){if(!x||Ze)return"";Ze=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(v){var mt=function(){throw Error()};if(Object.defineProperty(mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(mt,[])}catch(nt){var tt=nt}Reflect.construct(x,[],mt)}else{try{mt.call()}catch(nt){tt=nt}x.call(mt.prototype)}}else{try{throw Error()}catch(nt){tt=nt}(mt=x())&&typeof mt.catch=="function"&&mt.catch(function(){})}}catch(nt){if(nt&&tt&&typeof nt.stack=="string")return[nt.stack,tt.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var z=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");z&&z.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var q=E.DetermineComponentFrameRoot(),le=q[0],me=q[1];if(le&&me){var De=le.split(`
`),Qe=me.split(`
`);for(z=E=0;E<De.length&&!De[E].includes("DetermineComponentFrameRoot");)E++;for(;z<Qe.length&&!Qe[z].includes("DetermineComponentFrameRoot");)z++;if(E===De.length||z===Qe.length)for(E=De.length-1,z=Qe.length-1;1<=E&&0<=z&&De[E]!==Qe[z];)z--;for(;1<=E&&0<=z;E--,z--)if(De[E]!==Qe[z]){if(E!==1||z!==1)do if(E--,z--,0>z||De[E]!==Qe[z]){var ct=`
`+De[E].replace(" at new "," at ");return x.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",x.displayName)),ct}while(1<=E&&0<=z);break}}}finally{Ze=!1,Error.prepareStackTrace=S}return(S=x?x.displayName||x.name:"")?ze(S):""}function ut(x,v){switch(x.tag){case 26:case 27:case 5:return ze(x.type);case 16:return ze("Lazy");case 13:return x.child!==v&&v!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return Re(x.type,!1);case 11:return Re(x.type.render,!1);case 1:return Re(x.type,!0);case 31:return ze("Activity");default:return""}}function vt(x){try{var v="",S=null;do v+=ut(x,S),S=x,x=x.return;while(x);return v}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}var yt=Object.prototype.hasOwnProperty,Ue=a.unstable_scheduleCallback,Ye=a.unstable_cancelCallback,Ht=a.unstable_shouldYield,ta=a.unstable_requestPaint,Bt=a.unstable_now,Da=a.unstable_getCurrentPriorityLevel,zt=a.unstable_ImmediatePriority,Lr=a.unstable_UserBlockingPriority,ka=a.unstable_NormalPriority,Ca=a.unstable_LowPriority,Sn=a.unstable_IdlePriority,Ie=a.log,st=a.unstable_setDisableYieldValue,Tt=null,lt=null;function oa(x){if(typeof Ie=="function"&&st(x),lt&&typeof lt.setStrictMode=="function")try{lt.setStrictMode(Tt,x)}catch{}}var xt=Math.clz32?Math.clz32:hs,la=Math.log,Vr=Math.LN2;function hs(x){return x>>>=0,x===0?32:31-(la(x)/Vr|0)|0}var It=256,Ya=262144,xi=4194304;function Yi(x){var v=x&42;if(v!==0)return v;switch(x&-x){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return x&261888;case 262144:case 524288:case 1048576:case 2097152:return x&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return x&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return x}}function Ks(x,v,S){var E=x.pendingLanes;if(E===0)return 0;var z=0,q=x.suspendedLanes,le=x.pingedLanes;x=x.warmLanes;var me=E&134217727;return me!==0?(E=me&~q,E!==0?z=Yi(E):(le&=me,le!==0?z=Yi(le):S||(S=me&~x,S!==0&&(z=Yi(S))))):(me=E&~q,me!==0?z=Yi(me):le!==0?z=Yi(le):S||(S=E&~x,S!==0&&(z=Yi(S)))),z===0?0:v!==0&&v!==z&&(v&q)===0&&(q=z&-z,S=v&-v,q>=S||q===32&&(S&4194048)!==0)?v:z}function _n(x,v){return(x.pendingLanes&~(x.suspendedLanes&~x.pingedLanes)&v)===0}function Ol(x,v){switch(x){case 1:case 2:case 4:case 8:case 64:return v+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cn(){var x=xi;return xi<<=1,(xi&62914560)===0&&(xi=4194304),x}function kn(x){for(var v=[],S=0;31>S;S++)v.push(x);return v}function ai(x,v){x.pendingLanes|=v,v!==268435456&&(x.suspendedLanes=0,x.pingedLanes=0,x.warmLanes=0)}function Si(x,v,S,E,z,q){var le=x.pendingLanes;x.pendingLanes=S,x.suspendedLanes=0,x.pingedLanes=0,x.warmLanes=0,x.expiredLanes&=S,x.entangledLanes&=S,x.errorRecoveryDisabledLanes&=S,x.shellSuspendCounter=0;var me=x.entanglements,De=x.expirationTimes,Qe=x.hiddenUpdates;for(S=le&~S;0<S;){var ct=31-xt(S),mt=1<<ct;me[ct]=0,De[ct]=-1;var tt=Qe[ct];if(tt!==null)for(Qe[ct]=null,ct=0;ct<tt.length;ct++){var nt=tt[ct];nt!==null&&(nt.lane&=-536870913)}S&=~mt}E!==0&&sl(x,E,0),q!==0&&z===0&&x.tag!==0&&(x.suspendedLanes|=q&~(le&~v))}function sl(x,v,S){x.pendingLanes|=v,x.suspendedLanes&=~v;var E=31-xt(v);x.entangledLanes|=v,x.entanglements[E]=x.entanglements[E]|1073741824|S&261930}function Ae(x,v){var S=x.entangledLanes|=v;for(x=x.entanglements;S;){var E=31-xt(S),z=1<<E;z&v|x[E]&v&&(x[E]|=v),S&=~z}}function Be(x,v){var S=v&-v;return S=(S&42)!==0?1:Xe(S),(S&(x.suspendedLanes|v))!==0?0:S}function Xe(x){switch(x){case 2:x=1;break;case 8:x=4;break;case 32:x=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:x=128;break;case 268435456:x=134217728;break;default:x=0}return x}function gt(x){return x&=-x,2<x?8<x?(x&134217727)!==0?32:268435456:8:2}function wt(){var x=K.p;return x!==0?x:(x=window.event,x===void 0?32:BI(x.type))}function ot(x,v){var S=K.p;try{return K.p=x,v()}finally{K.p=S}}var Lt=Math.random().toString(36).slice(2),Et="__reactFiber$"+Lt,At="__reactProps$"+Lt,Vt="__reactContainer$"+Lt,ca="__reactEvents$"+Lt,sa="__reactListeners$"+Lt,ja="__reactHandles$"+Lt,nr="__reactResources$"+Lt,Nr="__reactMarker$"+Lt;function pr(x){delete x[Et],delete x[At],delete x[ca],delete x[sa],delete x[ja]}function Za(x){var v=x[Et];if(v)return v;for(var S=x.parentNode;S;){if(v=S[Vt]||S[Et]){if(S=v.alternate,v.child!==null||S!==null&&S.child!==null)for(x=_I(x);x!==null;){if(S=x[Et])return S;x=_I(x)}return v}x=S,S=x.parentNode}return null}function Ot(x){if(x=x[Et]||x[Vt]){var v=x.tag;if(v===5||v===6||v===13||v===31||v===26||v===27||v===3)return x}return null}function Hr(x){var v=x.tag;if(v===5||v===26||v===27||v===6)return x.stateNode;throw Error(r(33))}function jr(x){var v=x[nr];return v||(v=x[nr]={hoistableStyles:new Map,hoistableScripts:new Map}),v}function Er(x){x[Nr]=!0}var dt=new Set,ri={};function sr(x,v){Nn(x,v),Nn(x+"Capture",v)}function Nn(x,v){for(ri[x]=v,x=0;x<v.length;x++)dt.add(v[x])}var mi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),er={},Ha={};function Wt(x){return yt.call(Ha,x)?!0:yt.call(er,x)?!1:mi.test(x)?Ha[x]=!0:(er[x]=!0,!1)}function ua(x,v,S){if(Wt(v))if(S===null)x.removeAttribute(v);else{switch(typeof S){case"undefined":case"function":case"symbol":x.removeAttribute(v);return;case"boolean":var E=v.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){x.removeAttribute(v);return}}x.setAttribute(v,""+S)}}function ki(x,v,S){if(S===null)x.removeAttribute(v);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":x.removeAttribute(v);return}x.setAttribute(v,""+S)}}function mn(x,v,S,E){if(E===null)x.removeAttribute(S);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":x.removeAttribute(S);return}x.setAttributeNS(v,S,""+E)}}function fa(x){switch(typeof x){case"bigint":case"boolean":case"number":case"string":case"undefined":return x;case"object":return x;default:return""}}function Cn(x){var v=x.type;return(x=x.nodeName)&&x.toLowerCase()==="input"&&(v==="checkbox"||v==="radio")}function Pc(x,v,S){var E=Object.getOwnPropertyDescriptor(x.constructor.prototype,v);if(!x.hasOwnProperty(v)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var z=E.get,q=E.set;return Object.defineProperty(x,v,{configurable:!0,get:function(){return z.call(this)},set:function(le){S=""+le,q.call(this,le)}}),Object.defineProperty(x,v,{enumerable:E.enumerable}),{getValue:function(){return S},setValue:function(le){S=""+le},stopTracking:function(){x._valueTracker=null,delete x[v]}}}}function Or(x){if(!x._valueTracker){var v=Cn(x)?"checked":"value";x._valueTracker=Pc(x,v,""+x[v])}}function Ts(x){if(!x)return!1;var v=x._valueTracker;if(!v)return!0;var S=v.getValue(),E="";return x&&(E=Cn(x)?x.checked?"true":"false":x.value),x=E,x!==S?(v.setValue(x),!0):!1}function Sr(x){if(x=x||(typeof document<"u"?document:void 0),typeof x>"u")return null;try{return x.activeElement||x.body}catch{return x.body}}var Ms=/[\n"\\]/g;function Fa(x){return x.replace(Ms,function(v){return"\\"+v.charCodeAt(0).toString(16)+" "})}function an(x,v,S,E,z,q,le,me){x.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?x.type=le:x.removeAttribute("type"),v!=null?le==="number"?(v===0&&x.value===""||x.value!=v)&&(x.value=""+fa(v)):x.value!==""+fa(v)&&(x.value=""+fa(v)):le!=="submit"&&le!=="reset"||x.removeAttribute("value"),v!=null?je(x,le,fa(v)):S!=null?je(x,le,fa(S)):E!=null&&x.removeAttribute("value"),z==null&&q!=null&&(x.defaultChecked=!!q),z!=null&&(x.checked=z&&typeof z!="function"&&typeof z!="symbol"),me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"?x.name=""+fa(me):x.removeAttribute("name")}function $e(x,v,S,E,z,q,le,me){if(q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(x.type=q),v!=null||S!=null){if(!(q!=="submit"&&q!=="reset"||v!=null)){Or(x);return}S=S!=null?""+fa(S):"",v=v!=null?""+fa(v):S,me||v===x.value||(x.value=v),x.defaultValue=v}E=E??z,E=typeof E!="function"&&typeof E!="symbol"&&!!E,x.checked=me?x.checked:!!E,x.defaultChecked=!!E,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(x.name=le),Or(x)}function je(x,v,S){v==="number"&&Sr(x.ownerDocument)===x||x.defaultValue===""+S||(x.defaultValue=""+S)}function aa(x,v,S,E){if(x=x.options,v){v={};for(var z=0;z<S.length;z++)v["$"+S[z]]=!0;for(S=0;S<x.length;S++)z=v.hasOwnProperty("$"+x[S].value),x[S].selected!==z&&(x[S].selected=z),z&&E&&(x[S].defaultSelected=!0)}else{for(S=""+fa(S),v=null,z=0;z<x.length;z++){if(x[z].value===S){x[z].selected=!0,E&&(x[z].defaultSelected=!0);return}v!==null||x[z].disabled||(v=x[z])}v!==null&&(v.selected=!0)}}function gn(x,v,S){if(v!=null&&(v=""+fa(v),v!==x.value&&(x.value=v),S==null)){x.defaultValue!==v&&(x.defaultValue=v);return}x.defaultValue=S!=null?""+fa(S):""}function ni(x,v,S,E){if(v==null){if(E!=null){if(S!=null)throw Error(r(92));if(F(E)){if(1<E.length)throw Error(r(93));E=E[0]}S=E}S==null&&(S=""),v=S}S=fa(v),x.defaultValue=S,E=x.textContent,E===S&&E!==""&&E!==null&&(x.value=E),Or(x)}function ol(x,v){if(v){var S=x.firstChild;if(S&&S===x.lastChild&&S.nodeType===3){S.nodeValue=v;return}}x.textContent=v}var Eh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ra(x,v,S){var E=v.indexOf("--")===0;S==null||typeof S=="boolean"||S===""?E?x.setProperty(v,""):v==="float"?x.cssFloat="":x[v]="":E?x.setProperty(v,S):typeof S!="number"||S===0||Eh.has(v)?v==="float"?x.cssFloat=S:x[v]=(""+S).trim():x[v]=S+"px"}function pa(x,v,S){if(v!=null&&typeof v!="object")throw Error(r(62));if(x=x.style,S!=null){for(var E in S)!S.hasOwnProperty(E)||v!=null&&v.hasOwnProperty(E)||(E.indexOf("--")===0?x.setProperty(E,""):E==="float"?x.cssFloat="":x[E]="");for(var z in v)E=v[z],v.hasOwnProperty(z)&&S[z]!==E&&Ra(x,z,E)}else for(var q in v)v.hasOwnProperty(q)&&Ra(x,q,v[q])}function Ur(x){if(x.indexOf("-")===-1)return!1;switch(x){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var B0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Oi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fs(x){return Oi.test(""+x)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":x}function gi(){}var qi=null;function $d(x){return x=x.target||x.srcElement||window,x.correspondingUseElement&&(x=x.correspondingUseElement),x.nodeType===3?x.parentNode:x}var Xr=null,Dr=null;function An(x){var v=Ot(x);if(v&&(x=v.stateNode)){var S=x[At]||null;e:switch(x=v.stateNode,v.type){case"input":if(an(x,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name),v=S.name,S.type==="radio"&&v!=null){for(S=x;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll('input[name="'+Fa(""+v)+'"][type="radio"]'),v=0;v<S.length;v++){var E=S[v];if(E!==x&&E.form===x.form){var z=E[At]||null;if(!z)throw Error(r(90));an(E,z.value,z.defaultValue,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name)}}for(v=0;v<S.length;v++)E=S[v],E.form===x.form&&Ts(E)}break e;case"textarea":gn(x,S.value,S.defaultValue);break e;case"select":v=S.value,v!=null&&aa(x,!!S.multiple,v,!1)}}}var xa=!1;function Pl(x,v,S){if(xa)return x(v,S);xa=!0;try{var E=x(v);return E}finally{if(xa=!1,(Xr!==null||Dr!==null)&&(w1(),Xr&&(v=Xr,x=Dr,Dr=Xr=null,An(v),x)))for(v=0;v<x.length;v++)An(x[v])}}function Ma(x,v){var S=x.stateNode;if(S===null)return null;var E=S[At]||null;if(E===null)return null;S=E[v];e:switch(v){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(x=x.type,E=!(x==="button"||x==="input"||x==="select"||x==="textarea")),x=!E;break e;default:x=!1}if(x)return null;if(S&&typeof S!="function")throw Error(r(231,v,typeof S));return S}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dh=!1;if(xr)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){Dh=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{Dh=!1}var ps=null,Es=null,Bl=null;function Ds(){if(Bl)return Bl;var x,v=Es,S=v.length,E,z="value"in ps?ps.value:ps.textContent,q=z.length;for(x=0;x<S&&v[x]===z[x];x++);var le=S-x;for(E=1;E<=le&&v[S-E]===z[q-E];E++);return Bl=z.slice(x,1<E?1-E:void 0)}function Is(x){var v=x.keyCode;return"charCode"in x?(x=x.charCode,x===0&&v===13&&(x=13)):x=v,x===10&&(x=13),32<=x||x===13?x:0}function Qs(){return!0}function Ih(){return!1}function dn(x){function v(S,E,z,q,le){this._reactName=S,this._targetInst=z,this.type=E,this.nativeEvent=q,this.target=le,this.currentTarget=null;for(var me in x)x.hasOwnProperty(me)&&(S=x[me],this[me]=S?S(q):q[me]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?Qs:Ih,this.isPropagationStopped=Ih,this}return h(v.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=Qs)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=Qs)},persist:function(){},isPersistent:Qs}),v}var xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(x){return x.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vn=dn(xs),Js=h({},xs,{view:0,detail:0}),Bc=dn(Js),zl,Rh,zc,Yd=h({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:to,button:0,buttons:0,relatedTarget:function(x){return x.relatedTarget===void 0?x.fromElement===x.srcElement?x.toElement:x.fromElement:x.relatedTarget},movementX:function(x){return"movementX"in x?x.movementX:(x!==zc&&(zc&&x.type==="mousemove"?(zl=x.screenX-zc.screenX,Rh=x.screenY-zc.screenY):Rh=zl=0,zc=x),zl)},movementY:function(x){return"movementY"in x?x.movementY:Rh}}),yr=dn(Yd),qd=h({},Yd,{dataTransfer:0}),Fc=dn(qd),ms=h({},Js,{relatedTarget:0}),Fl=dn(ms),at=h({},xs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ua=dn(at),Hn=h({},xs,{clipboardData:function(x){return"clipboardData"in x?x.clipboardData:window.clipboardData}}),eo=dn(Hn),Xd=h({},xs,{data:0}),Zd=dn(Xd),Lh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rn(x){var v=this.nativeEvent;return v.getModifierState?v.getModifierState(x):(x=Tn[x])?!!v[x]:!1}function to(){return rn}var nn=h({},Js,{key:function(x){if(x.key){var v=Lh[x.key]||x.key;if(v!=="Unidentified")return v}return x.type==="keypress"?(x=Is(x),x===13?"Enter":String.fromCharCode(x)):x.type==="keydown"||x.type==="keyup"?Oh[x.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:to,charCode:function(x){return x.type==="keypress"?Is(x):0},keyCode:function(x){return x.type==="keydown"||x.type==="keyup"?x.keyCode:0},which:function(x){return x.type==="keypress"?Is(x):x.type==="keydown"||x.type==="keyup"?x.keyCode:0}}),ll=dn(nn),Mo=h({},Yd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kr=dn(Mo),ma=h({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:to}),Ph=dn(ma),wr=h({},xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),ao=dn(wr),Eo=h({},Yd,{deltaX:function(x){return"deltaX"in x?x.deltaX:"wheelDeltaX"in x?-x.wheelDeltaX:0},deltaY:function(x){return"deltaY"in x?x.deltaY:"wheelDeltaY"in x?-x.wheelDeltaY:"wheelDelta"in x?-x.wheelDelta:0},deltaZ:0,deltaMode:0}),Kd=dn(Eo),Xi=h({},xs,{newState:0,oldState:0}),Qd=dn(Xi),z0=[9,13,27,32],cl=xr&&"CompositionEvent"in window,ro=null;xr&&"documentMode"in document&&(ro=document.documentMode);var F0=xr&&"TextEvent"in window&&!ro,Jd=xr&&(!cl||ro&&8<ro&&11>=ro),no=" ",eu=!1;function Bh(x,v){switch(x){case"keyup":return z0.indexOf(v.keyCode)!==-1;case"keydown":return v.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vl(x){return x=x.detail,typeof x=="object"&&"data"in x?x.data:null}var dl=!1;function io(x,v){switch(x){case"compositionend":return Vl(v);case"keypress":return v.which!==32?null:(eu=!0,no);case"textInput":return x=v.data,x===no&&eu?null:x;default:return null}}function tu(x,v){if(dl)return x==="compositionend"||!cl&&Bh(x,v)?(x=Ds(),Bl=Es=ps=null,dl=!1,x):null;switch(x){case"paste":return null;case"keypress":if(!(v.ctrlKey||v.altKey||v.metaKey)||v.ctrlKey&&v.altKey){if(v.char&&1<v.char.length)return v.char;if(v.which)return String.fromCharCode(v.which)}return null;case"compositionend":return Jd&&v.locale!=="ko"?null:v.data;default:return null}}var Pi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vc(x){var v=x&&x.nodeName&&x.nodeName.toLowerCase();return v==="input"?!!Pi[x.type]:v==="textarea"}function Zi(x,v,S,E){Xr?Dr?Dr.push(E):Dr=[E]:Xr=E,v=A1(v,"onChange"),0<v.length&&(S=new Vn("onChange","change",null,S,E),x.push({event:S,listeners:v}))}var Hl=null,ul=null;function nm(x){lI(x,0)}function Hc(x){var v=Hr(x);if(Ts(v))return x}function Ci(x,v){if(x==="change")return v}var Rs=!1;if(xr){var Gr;if(xr){var Ls="oninput"in document;if(!Ls){var qa=document.createElement("div");qa.setAttribute("oninput","return;"),Ls=typeof qa.oninput=="function"}Gr=Ls}else Gr=!1;Rs=Gr&&(!document.documentMode||9<document.documentMode)}function Uc(){Hl&&(Hl.detachEvent("onpropertychange",ue),ul=Hl=null)}function ue(x){if(x.propertyName==="value"&&Hc(ul)){var v=[];Zi(v,ul,x,$d(x)),Pl(nm,v)}}function m(x,v,S){x==="focusin"?(Uc(),Hl=v,ul=S,Hl.attachEvent("onpropertychange",ue)):x==="focusout"&&Uc()}function y(x){if(x==="selectionchange"||x==="keyup"||x==="keydown")return Hc(ul)}function j(x,v){if(x==="click")return Hc(v)}function C(x,v){if(x==="input"||x==="change")return Hc(v)}function M(x,v){return x===v&&(x!==0||1/x===1/v)||x!==x&&v!==v}var R=typeof Object.is=="function"?Object.is:M;function N(x,v){if(R(x,v))return!0;if(typeof x!="object"||x===null||typeof v!="object"||v===null)return!1;var S=Object.keys(x),E=Object.keys(v);if(S.length!==E.length)return!1;for(E=0;E<S.length;E++){var z=S[E];if(!yt.call(v,z)||!R(x[z],v[z]))return!1}return!0}function A(x){for(;x&&x.firstChild;)x=x.firstChild;return x}function L(x,v){var S=A(x);x=0;for(var E;S;){if(S.nodeType===3){if(E=x+S.textContent.length,x<=v&&E>=v)return{node:S,offset:v-x};x=E}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=A(S)}}function B(x,v){return x&&v?x===v?!0:x&&x.nodeType===3?!1:v&&v.nodeType===3?B(x,v.parentNode):"contains"in x?x.contains(v):x.compareDocumentPosition?!!(x.compareDocumentPosition(v)&16):!1:!1}function Y(x){x=x!=null&&x.ownerDocument!=null&&x.ownerDocument.defaultView!=null?x.ownerDocument.defaultView:window;for(var v=Sr(x.document);v instanceof x.HTMLIFrameElement;){try{var S=typeof v.contentWindow.location.href=="string"}catch{S=!1}if(S)x=v.contentWindow;else break;v=Sr(x.document)}return v}function te(x){var v=x&&x.nodeName&&x.nodeName.toLowerCase();return v&&(v==="input"&&(x.type==="text"||x.type==="search"||x.type==="tel"||x.type==="url"||x.type==="password")||v==="textarea"||x.contentEditable==="true")}var se=xr&&"documentMode"in document&&11>=document.documentMode,ce=null,pe=null,ye=null,ge=!1;function _e(x,v,S){var E=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;ge||ce==null||ce!==Sr(E)||(E=ce,"selectionStart"in E&&te(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),ye&&N(ye,E)||(ye=E,E=A1(pe,"onSelect"),0<E.length&&(v=new Vn("onSelect","select",null,v,S),x.push({event:v,listeners:E}),v.target=ce)))}function ke(x,v){var S={};return S[x.toLowerCase()]=v.toLowerCase(),S["Webkit"+x]="webkit"+v,S["Moz"+x]="moz"+v,S}var Ne={animationend:ke("Animation","AnimationEnd"),animationiteration:ke("Animation","AnimationIteration"),animationstart:ke("Animation","AnimationStart"),transitionrun:ke("Transition","TransitionRun"),transitionstart:ke("Transition","TransitionStart"),transitioncancel:ke("Transition","TransitionCancel"),transitionend:ke("Transition","TransitionEnd")},Me={},Te={};xr&&(Te=document.createElement("div").style,"AnimationEvent"in window||(delete Ne.animationend.animation,delete Ne.animationiteration.animation,delete Ne.animationstart.animation),"TransitionEvent"in window||delete Ne.transitionend.transition);function Ge(x){if(Me[x])return Me[x];if(!Ne[x])return x;var v=Ne[x],S;for(S in v)if(v.hasOwnProperty(S)&&S in Te)return Me[x]=v[S];return x}var qe=Ge("animationend"),He=Ge("animationiteration"),et=Ge("animationstart"),ht=Ge("transitionrun"),kt=Ge("transitionstart"),Mt=Ge("transitioncancel"),bt=Ge("transitionend"),Yt=new Map,Ft="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ft.push("scrollEnd");function Nt(x,v){Yt.set(x,v),sr(v,[x])}var Zt=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var v=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(v))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},La=[],ir=0,ba=0;function Ga(){for(var x=ir,v=ba=ir=0;v<x;){var S=La[v];La[v++]=null;var E=La[v];La[v++]=null;var z=La[v];La[v++]=null;var q=La[v];if(La[v++]=null,E!==null&&z!==null){var le=E.pending;le===null?z.next=z:(z.next=le.next,le.next=z),E.pending=z}q!==0&&Ul(S,z,q)}}function Zr(x,v,S,E){La[ir++]=x,La[ir++]=v,La[ir++]=S,La[ir++]=E,ba|=E,x.lanes|=E,x=x.alternate,x!==null&&(x.lanes|=E)}function Ki(x,v,S,E){return Zr(x,v,S,E),au(x)}function Pr(x,v){return Zr(x,null,null,v),au(x)}function Ul(x,v,S){x.lanes|=S;var E=x.alternate;E!==null&&(E.lanes|=S);for(var z=!1,q=x.return;q!==null;)q.childLanes|=S,E=q.alternate,E!==null&&(E.childLanes|=S),q.tag===22&&(x=q.stateNode,x===null||x._visibility&1||(z=!0)),x=q,q=q.return;return x.tag===3?(q=x.stateNode,z&&v!==null&&(z=31-xt(S),x=q.hiddenUpdates,E=x[z],E===null?x[z]=[v]:E.push(v),v.lane=S|536870912),q):null}function au(x){if(50<km)throw km=0,Zj=null,Error(r(185));for(var v=x.return;v!==null;)x=v,v=x.return;return x.tag===3?x.stateNode:null}var V0={};function WK(x,v,S,E){this.tag=x,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function so(x,v,S,E){return new WK(x,v,S,E)}function HN(x){return x=x.prototype,!(!x||!x.isReactComponent)}function Gc(x,v){var S=x.alternate;return S===null?(S=so(x.tag,v,x.key,x.mode),S.elementType=x.elementType,S.type=x.type,S.stateNode=x.stateNode,S.alternate=x,x.alternate=S):(S.pendingProps=v,S.type=x.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=x.flags&65011712,S.childLanes=x.childLanes,S.lanes=x.lanes,S.child=x.child,S.memoizedProps=x.memoizedProps,S.memoizedState=x.memoizedState,S.updateQueue=x.updateQueue,v=x.dependencies,S.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},S.sibling=x.sibling,S.index=x.index,S.ref=x.ref,S.refCleanup=x.refCleanup,S}function GE(x,v){x.flags&=65011714;var S=x.alternate;return S===null?(x.childLanes=0,x.lanes=v,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=S.childLanes,x.lanes=S.lanes,x.child=S.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=S.memoizedProps,x.memoizedState=S.memoizedState,x.updateQueue=S.updateQueue,x.type=S.type,v=S.dependencies,x.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),x}function Wb(x,v,S,E,z,q){var le=0;if(E=x,typeof x=="function")HN(x)&&(le=1);else if(typeof x=="string")le=ZQ(x,S,fe.current)?26:x==="html"||x==="head"||x==="body"?27:5;else e:switch(x){case G:return x=so(31,S,v,z),x.elementType=G,x.lanes=q,x;case b:return zh(S.children,z,q,v);case w:le=8,z|=24;break;case _:return x=so(12,S,v,z|2),x.elementType=_,x.lanes=q,x;case I:return x=so(13,S,v,z),x.elementType=I,x.lanes=q,x;case O:return x=so(19,S,v,z),x.elementType=O,x.lanes=q,x;default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case T:le=10;break e;case k:le=9;break e;case D:le=11;break e;case P:le=14;break e;case V:le=16,E=null;break e}le=29,S=Error(r(130,x===null?"null":typeof x,"")),E=null}return v=so(le,S,v,z),v.elementType=x,v.type=E,v.lanes=q,v}function zh(x,v,S,E){return x=so(7,x,E,v),x.lanes=S,x}function UN(x,v,S){return x=so(6,x,null,v),x.lanes=S,x}function WE(x){var v=so(18,null,null,0);return v.stateNode=x,v}function GN(x,v,S){return v=so(4,x.children!==null?x.children:[],x.key,v),v.lanes=S,v.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},v}var $E=new WeakMap;function Do(x,v){if(typeof x=="object"&&x!==null){var S=$E.get(x);return S!==void 0?S:(v={value:x,source:v,stack:vt(v)},$E.set(x,v),v)}return{value:x,source:v,stack:vt(v)}}var H0=[],U0=0,$b=null,im=0,Io=[],Ro=0,ru=null,Gl=1,Wl="";function Wc(x,v){H0[U0++]=im,H0[U0++]=$b,$b=x,im=v}function YE(x,v,S){Io[Ro++]=Gl,Io[Ro++]=Wl,Io[Ro++]=ru,ru=x;var E=Gl;x=Wl;var z=32-xt(E)-1;E&=~(1<<z),S+=1;var q=32-xt(v)+z;if(30<q){var le=z-z%5;q=(E&(1<<le)-1).toString(32),E>>=le,z-=le,Gl=1<<32-xt(v)+z|S<<z|E,Wl=q+x}else Gl=1<<q|S<<z|E,Wl=x}function WN(x){x.return!==null&&(Wc(x,1),YE(x,1,0))}function $N(x){for(;x===$b;)$b=H0[--U0],H0[U0]=null,im=H0[--U0],H0[U0]=null;for(;x===ru;)ru=Io[--Ro],Io[Ro]=null,Wl=Io[--Ro],Io[Ro]=null,Gl=Io[--Ro],Io[Ro]=null}function qE(x,v){Io[Ro++]=Gl,Io[Ro++]=Wl,Io[Ro++]=ru,Gl=v.id,Wl=v.overflow,ru=x}var Bi=null,fn=null,_r=!1,nu=null,Lo=!1,YN=Error(r(519));function iu(x){var v=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw sm(Do(v,x)),YN}function XE(x){var v=x.stateNode,S=x.type,E=x.memoizedProps;switch(v[Et]=x,v[At]=E,S){case"dialog":cr("cancel",v),cr("close",v);break;case"iframe":case"object":case"embed":cr("load",v);break;case"video":case"audio":for(S=0;S<Am.length;S++)cr(Am[S],v);break;case"source":cr("error",v);break;case"img":case"image":case"link":cr("error",v),cr("load",v);break;case"details":cr("toggle",v);break;case"input":cr("invalid",v),$e(v,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0);break;case"select":cr("invalid",v);break;case"textarea":cr("invalid",v),ni(v,E.value,E.defaultValue,E.children)}S=E.children,typeof S!="string"&&typeof S!="number"&&typeof S!="bigint"||v.textContent===""+S||E.suppressHydrationWarning===!0||hI(v.textContent,S)?(E.popover!=null&&(cr("beforetoggle",v),cr("toggle",v)),E.onScroll!=null&&cr("scroll",v),E.onScrollEnd!=null&&cr("scrollend",v),E.onClick!=null&&(v.onclick=gi),v=!0):v=!1,v||iu(x,!0)}function ZE(x){for(Bi=x.return;Bi;)switch(Bi.tag){case 5:case 31:case 13:Lo=!1;return;case 27:case 3:Lo=!0;return;default:Bi=Bi.return}}function G0(x){if(x!==Bi)return!1;if(!_r)return ZE(x),_r=!0,!1;var v=x.tag,S;if((S=v!==3&&v!==27)&&((S=v===5)&&(S=x.type,S=!(S!=="form"&&S!=="button")||uS(x.type,x.memoizedProps)),S=!S),S&&fn&&iu(x),ZE(x),v===13){if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));fn=wI(x)}else if(v===31){if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));fn=wI(x)}else v===27?(v=fn,bu(x.type)?(x=mS,mS=null,fn=x):fn=v):fn=Bi?Po(x.stateNode.nextSibling):null;return!0}function Fh(){fn=Bi=null,_r=!1}function qN(){var x=nu;return x!==null&&(zs===null?zs=x:zs.push.apply(zs,x),nu=null),x}function sm(x){nu===null?nu=[x]:nu.push(x)}var XN=Z(null),Vh=null,$c=null;function su(x,v,S){de(XN,v._currentValue),v._currentValue=S}function Yc(x){x._currentValue=XN.current,ie(XN)}function ZN(x,v,S){for(;x!==null;){var E=x.alternate;if((x.childLanes&v)!==v?(x.childLanes|=v,E!==null&&(E.childLanes|=v)):E!==null&&(E.childLanes&v)!==v&&(E.childLanes|=v),x===S)break;x=x.return}}function KN(x,v,S,E){var z=x.child;for(z!==null&&(z.return=x);z!==null;){var q=z.dependencies;if(q!==null){var le=z.child;q=q.firstContext;e:for(;q!==null;){var me=q;q=z;for(var De=0;De<v.length;De++)if(me.context===v[De]){q.lanes|=S,me=q.alternate,me!==null&&(me.lanes|=S),ZN(q.return,S,x),E||(le=null);break e}q=me.next}}else if(z.tag===18){if(le=z.return,le===null)throw Error(r(341));le.lanes|=S,q=le.alternate,q!==null&&(q.lanes|=S),ZN(le,S,x),le=null}else le=z.child;if(le!==null)le.return=z;else for(le=z;le!==null;){if(le===x){le=null;break}if(z=le.sibling,z!==null){z.return=le.return,le=z;break}le=le.return}z=le}}function W0(x,v,S,E){x=null;for(var z=v,q=!1;z!==null;){if(!q){if((z.flags&524288)!==0)q=!0;else if((z.flags&262144)!==0)break}if(z.tag===10){var le=z.alternate;if(le===null)throw Error(r(387));if(le=le.memoizedProps,le!==null){var me=z.type;R(z.pendingProps.value,le.value)||(x!==null?x.push(me):x=[me])}}else if(z===Oe.current){if(le=z.alternate,le===null)throw Error(r(387));le.memoizedState.memoizedState!==z.memoizedState.memoizedState&&(x!==null?x.push(Im):x=[Im])}z=z.return}x!==null&&KN(v,x,S,E),v.flags|=262144}function Yb(x){for(x=x.firstContext;x!==null;){if(!R(x.context._currentValue,x.memoizedValue))return!0;x=x.next}return!1}function Hh(x){Vh=x,$c=null,x=x.dependencies,x!==null&&(x.firstContext=null)}function zi(x){return KE(Vh,x)}function qb(x,v){return Vh===null&&Hh(x),KE(x,v)}function KE(x,v){var S=v._currentValue;if(v={context:v,memoizedValue:S,next:null},$c===null){if(x===null)throw Error(r(308));$c=v,x.dependencies={lanes:0,firstContext:v},x.flags|=524288}else $c=$c.next=v;return S}var $K=typeof AbortController<"u"?AbortController:function(){var x=[],v=this.signal={aborted:!1,addEventListener:function(S,E){x.push(E)}};this.abort=function(){v.aborted=!0,x.forEach(function(S){return S()})}},YK=a.unstable_scheduleCallback,qK=a.unstable_NormalPriority,si={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function QN(){return{controller:new $K,data:new Map,refCount:0}}function om(x){x.refCount--,x.refCount===0&&YK(qK,function(){x.controller.abort()})}var lm=null,JN=0,$0=0,Y0=null;function XK(x,v){if(lm===null){var S=lm=[];JN=0,$0=aS(),Y0={status:"pending",value:void 0,then:function(E){S.push(E)}}}return JN++,v.then(QE,QE),v}function QE(){if(--JN===0&&lm!==null){Y0!==null&&(Y0.status="fulfilled");var x=lm;lm=null,$0=0,Y0=null;for(var v=0;v<x.length;v++)(0,x[v])()}}function ZK(x,v){var S=[],E={status:"pending",value:null,reason:null,then:function(z){S.push(z)}};return x.then(function(){E.status="fulfilled",E.value=v;for(var z=0;z<S.length;z++)(0,S[z])(v)},function(z){for(E.status="rejected",E.reason=z,z=0;z<S.length;z++)(0,S[z])(void 0)}),E}var JE=W.S;W.S=function(x,v){OD=Bt(),typeof v=="object"&&v!==null&&typeof v.then=="function"&&XK(x,v),JE!==null&&JE(x,v)};var Uh=Z(null);function ej(){var x=Uh.current;return x!==null?x:sn.pooledCache}function Xb(x,v){v===null?de(Uh,Uh.current):de(Uh,v.pool)}function e6(){var x=ej();return x===null?null:{parent:si._currentValue,pool:x}}var q0=Error(r(460)),tj=Error(r(474)),Zb=Error(r(542)),Kb={then:function(){}};function t6(x){return x=x.status,x==="fulfilled"||x==="rejected"}function a6(x,v,S){switch(S=x[S],S===void 0?x.push(v):S!==v&&(v.then(gi,gi),v=S),v.status){case"fulfilled":return v.value;case"rejected":throw x=v.reason,n6(x),x;default:if(typeof v.status=="string")v.then(gi,gi);else{if(x=sn,x!==null&&100<x.shellSuspendCounter)throw Error(r(482));x=v,x.status="pending",x.then(function(E){if(v.status==="pending"){var z=v;z.status="fulfilled",z.value=E}},function(E){if(v.status==="pending"){var z=v;z.status="rejected",z.reason=E}})}switch(v.status){case"fulfilled":return v.value;case"rejected":throw x=v.reason,n6(x),x}throw Wh=v,q0}}function Gh(x){try{var v=x._init;return v(x._payload)}catch(S){throw S!==null&&typeof S=="object"&&typeof S.then=="function"?(Wh=S,q0):S}}var Wh=null;function r6(){if(Wh===null)throw Error(r(459));var x=Wh;return Wh=null,x}function n6(x){if(x===q0||x===Zb)throw Error(r(483))}var X0=null,cm=0;function Qb(x){var v=cm;return cm+=1,X0===null&&(X0=[]),a6(X0,x,v)}function dm(x,v){v=v.props.ref,x.ref=v!==void 0?v:null}function Jb(x,v){throw v.$$typeof===f?Error(r(525)):(x=Object.prototype.toString.call(v),Error(r(31,x==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":x)))}function i6(x){function v(We,Pe){if(x){var Ke=We.deletions;Ke===null?(We.deletions=[Pe],We.flags|=16):Ke.push(Pe)}}function S(We,Pe){if(!x)return null;for(;Pe!==null;)v(We,Pe),Pe=Pe.sibling;return null}function E(We){for(var Pe=new Map;We!==null;)We.key!==null?Pe.set(We.key,We):Pe.set(We.index,We),We=We.sibling;return Pe}function z(We,Pe){return We=Gc(We,Pe),We.index=0,We.sibling=null,We}function q(We,Pe,Ke){return We.index=Ke,x?(Ke=We.alternate,Ke!==null?(Ke=Ke.index,Ke<Pe?(We.flags|=67108866,Pe):Ke):(We.flags|=67108866,Pe)):(We.flags|=1048576,Pe)}function le(We){return x&&We.alternate===null&&(We.flags|=67108866),We}function me(We,Pe,Ke,ft){return Pe===null||Pe.tag!==6?(Pe=UN(Ke,We.mode,ft),Pe.return=We,Pe):(Pe=z(Pe,Ke),Pe.return=We,Pe)}function De(We,Pe,Ke,ft){var wa=Ke.type;return wa===b?ct(We,Pe,Ke.props.children,ft,Ke.key):Pe!==null&&(Pe.elementType===wa||typeof wa=="object"&&wa!==null&&wa.$$typeof===V&&Gh(wa)===Pe.type)?(Pe=z(Pe,Ke.props),dm(Pe,Ke),Pe.return=We,Pe):(Pe=Wb(Ke.type,Ke.key,Ke.props,null,We.mode,ft),dm(Pe,Ke),Pe.return=We,Pe)}function Qe(We,Pe,Ke,ft){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==Ke.containerInfo||Pe.stateNode.implementation!==Ke.implementation?(Pe=GN(Ke,We.mode,ft),Pe.return=We,Pe):(Pe=z(Pe,Ke.children||[]),Pe.return=We,Pe)}function ct(We,Pe,Ke,ft,wa){return Pe===null||Pe.tag!==7?(Pe=zh(Ke,We.mode,ft,wa),Pe.return=We,Pe):(Pe=z(Pe,Ke),Pe.return=We,Pe)}function mt(We,Pe,Ke){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=UN(""+Pe,We.mode,Ke),Pe.return=We,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case p:return Ke=Wb(Pe.type,Pe.key,Pe.props,null,We.mode,Ke),dm(Ke,Pe),Ke.return=We,Ke;case g:return Pe=GN(Pe,We.mode,Ke),Pe.return=We,Pe;case V:return Pe=Gh(Pe),mt(We,Pe,Ke)}if(F(Pe)||ae(Pe))return Pe=zh(Pe,We.mode,Ke,null),Pe.return=We,Pe;if(typeof Pe.then=="function")return mt(We,Qb(Pe),Ke);if(Pe.$$typeof===T)return mt(We,qb(We,Pe),Ke);Jb(We,Pe)}return null}function tt(We,Pe,Ke,ft){var wa=Pe!==null?Pe.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return wa!==null?null:me(We,Pe,""+Ke,ft);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case p:return Ke.key===wa?De(We,Pe,Ke,ft):null;case g:return Ke.key===wa?Qe(We,Pe,Ke,ft):null;case V:return Ke=Gh(Ke),tt(We,Pe,Ke,ft)}if(F(Ke)||ae(Ke))return wa!==null?null:ct(We,Pe,Ke,ft,null);if(typeof Ke.then=="function")return tt(We,Pe,Qb(Ke),ft);if(Ke.$$typeof===T)return tt(We,Pe,qb(We,Ke),ft);Jb(We,Ke)}return null}function nt(We,Pe,Ke,ft,wa){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return We=We.get(Ke)||null,me(Pe,We,""+ft,wa);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case p:return We=We.get(ft.key===null?Ke:ft.key)||null,De(Pe,We,ft,wa);case g:return We=We.get(ft.key===null?Ke:ft.key)||null,Qe(Pe,We,ft,wa);case V:return ft=Gh(ft),nt(We,Pe,Ke,ft,wa)}if(F(ft)||ae(ft))return We=We.get(Ke)||null,ct(Pe,We,ft,wa,null);if(typeof ft.then=="function")return nt(We,Pe,Ke,Qb(ft),wa);if(ft.$$typeof===T)return nt(We,Pe,Ke,qb(Pe,ft),wa);Jb(Pe,ft)}return null}function ia(We,Pe,Ke,ft){for(var wa=null,Cr=null,ha=Pe,tr=Pe=0,gr=null;ha!==null&&tr<Ke.length;tr++){ha.index>tr?(gr=ha,ha=null):gr=ha.sibling;var Ar=tt(We,ha,Ke[tr],ft);if(Ar===null){ha===null&&(ha=gr);break}x&&ha&&Ar.alternate===null&&v(We,ha),Pe=q(Ar,Pe,tr),Cr===null?wa=Ar:Cr.sibling=Ar,Cr=Ar,ha=gr}if(tr===Ke.length)return S(We,ha),_r&&Wc(We,tr),wa;if(ha===null){for(;tr<Ke.length;tr++)ha=mt(We,Ke[tr],ft),ha!==null&&(Pe=q(ha,Pe,tr),Cr===null?wa=ha:Cr.sibling=ha,Cr=ha);return _r&&Wc(We,tr),wa}for(ha=E(ha);tr<Ke.length;tr++)gr=nt(ha,We,tr,Ke[tr],ft),gr!==null&&(x&&gr.alternate!==null&&ha.delete(gr.key===null?tr:gr.key),Pe=q(gr,Pe,tr),Cr===null?wa=gr:Cr.sibling=gr,Cr=gr);return x&&ha.forEach(function(ju){return v(We,ju)}),_r&&Wc(We,tr),wa}function Aa(We,Pe,Ke,ft){if(Ke==null)throw Error(r(151));for(var wa=null,Cr=null,ha=Pe,tr=Pe=0,gr=null,Ar=Ke.next();ha!==null&&!Ar.done;tr++,Ar=Ke.next()){ha.index>tr?(gr=ha,ha=null):gr=ha.sibling;var ju=tt(We,ha,Ar.value,ft);if(ju===null){ha===null&&(ha=gr);break}x&&ha&&ju.alternate===null&&v(We,ha),Pe=q(ju,Pe,tr),Cr===null?wa=ju:Cr.sibling=ju,Cr=ju,ha=gr}if(Ar.done)return S(We,ha),_r&&Wc(We,tr),wa;if(ha===null){for(;!Ar.done;tr++,Ar=Ke.next())Ar=mt(We,Ar.value,ft),Ar!==null&&(Pe=q(Ar,Pe,tr),Cr===null?wa=Ar:Cr.sibling=Ar,Cr=Ar);return _r&&Wc(We,tr),wa}for(ha=E(ha);!Ar.done;tr++,Ar=Ke.next())Ar=nt(ha,We,tr,Ar.value,ft),Ar!==null&&(x&&Ar.alternate!==null&&ha.delete(Ar.key===null?tr:Ar.key),Pe=q(Ar,Pe,tr),Cr===null?wa=Ar:Cr.sibling=Ar,Cr=Ar);return x&&ha.forEach(function(oJ){return v(We,oJ)}),_r&&Wc(We,tr),wa}function Jr(We,Pe,Ke,ft){if(typeof Ke=="object"&&Ke!==null&&Ke.type===b&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case p:e:{for(var wa=Ke.key;Pe!==null;){if(Pe.key===wa){if(wa=Ke.type,wa===b){if(Pe.tag===7){S(We,Pe.sibling),ft=z(Pe,Ke.props.children),ft.return=We,We=ft;break e}}else if(Pe.elementType===wa||typeof wa=="object"&&wa!==null&&wa.$$typeof===V&&Gh(wa)===Pe.type){S(We,Pe.sibling),ft=z(Pe,Ke.props),dm(ft,Ke),ft.return=We,We=ft;break e}S(We,Pe);break}else v(We,Pe);Pe=Pe.sibling}Ke.type===b?(ft=zh(Ke.props.children,We.mode,ft,Ke.key),ft.return=We,We=ft):(ft=Wb(Ke.type,Ke.key,Ke.props,null,We.mode,ft),dm(ft,Ke),ft.return=We,We=ft)}return le(We);case g:e:{for(wa=Ke.key;Pe!==null;){if(Pe.key===wa)if(Pe.tag===4&&Pe.stateNode.containerInfo===Ke.containerInfo&&Pe.stateNode.implementation===Ke.implementation){S(We,Pe.sibling),ft=z(Pe,Ke.children||[]),ft.return=We,We=ft;break e}else{S(We,Pe);break}else v(We,Pe);Pe=Pe.sibling}ft=GN(Ke,We.mode,ft),ft.return=We,We=ft}return le(We);case V:return Ke=Gh(Ke),Jr(We,Pe,Ke,ft)}if(F(Ke))return ia(We,Pe,Ke,ft);if(ae(Ke)){if(wa=ae(Ke),typeof wa!="function")throw Error(r(150));return Ke=wa.call(Ke),Aa(We,Pe,Ke,ft)}if(typeof Ke.then=="function")return Jr(We,Pe,Qb(Ke),ft);if(Ke.$$typeof===T)return Jr(We,Pe,qb(We,Ke),ft);Jb(We,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint"?(Ke=""+Ke,Pe!==null&&Pe.tag===6?(S(We,Pe.sibling),ft=z(Pe,Ke),ft.return=We,We=ft):(S(We,Pe),ft=UN(Ke,We.mode,ft),ft.return=We,We=ft),le(We)):S(We,Pe)}return function(We,Pe,Ke,ft){try{cm=0;var wa=Jr(We,Pe,Ke,ft);return X0=null,wa}catch(ha){if(ha===q0||ha===Zb)throw ha;var Cr=so(29,ha,null,We.mode);return Cr.lanes=ft,Cr.return=We,Cr}}}var $h=i6(!0),s6=i6(!1),ou=!1;function aj(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rj(x,v){x=x.updateQueue,v.updateQueue===x&&(v.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,callbacks:null})}function lu(x){return{lane:x,tag:0,payload:null,callback:null,next:null}}function cu(x,v,S){var E=x.updateQueue;if(E===null)return null;if(E=E.shared,(Ir&2)!==0){var z=E.pending;return z===null?v.next=v:(v.next=z.next,z.next=v),E.pending=v,v=au(x),Ul(x,null,S),v}return Zr(x,E,v,S),au(x)}function um(x,v,S){if(v=v.updateQueue,v!==null&&(v=v.shared,(S&4194048)!==0)){var E=v.lanes;E&=x.pendingLanes,S|=E,v.lanes=S,Ae(x,S)}}function nj(x,v){var S=x.updateQueue,E=x.alternate;if(E!==null&&(E=E.updateQueue,S===E)){var z=null,q=null;if(S=S.firstBaseUpdate,S!==null){do{var le={lane:S.lane,tag:S.tag,payload:S.payload,callback:null,next:null};q===null?z=q=le:q=q.next=le,S=S.next}while(S!==null);q===null?z=q=v:q=q.next=v}else z=q=v;S={baseState:E.baseState,firstBaseUpdate:z,lastBaseUpdate:q,shared:E.shared,callbacks:E.callbacks},x.updateQueue=S;return}x=S.lastBaseUpdate,x===null?S.firstBaseUpdate=v:x.next=v,S.lastBaseUpdate=v}var ij=!1;function hm(){if(ij){var x=Y0;if(x!==null)throw x}}function fm(x,v,S,E){ij=!1;var z=x.updateQueue;ou=!1;var q=z.firstBaseUpdate,le=z.lastBaseUpdate,me=z.shared.pending;if(me!==null){z.shared.pending=null;var De=me,Qe=De.next;De.next=null,le===null?q=Qe:le.next=Qe,le=De;var ct=x.alternate;ct!==null&&(ct=ct.updateQueue,me=ct.lastBaseUpdate,me!==le&&(me===null?ct.firstBaseUpdate=Qe:me.next=Qe,ct.lastBaseUpdate=De))}if(q!==null){var mt=z.baseState;le=0,ct=Qe=De=null,me=q;do{var tt=me.lane&-536870913,nt=tt!==me.lane;if(nt?(mr&tt)===tt:(E&tt)===tt){tt!==0&&tt===$0&&(ij=!0),ct!==null&&(ct=ct.next={lane:0,tag:me.tag,payload:me.payload,callback:null,next:null});e:{var ia=x,Aa=me;tt=v;var Jr=S;switch(Aa.tag){case 1:if(ia=Aa.payload,typeof ia=="function"){mt=ia.call(Jr,mt,tt);break e}mt=ia;break e;case 3:ia.flags=ia.flags&-65537|128;case 0:if(ia=Aa.payload,tt=typeof ia=="function"?ia.call(Jr,mt,tt):ia,tt==null)break e;mt=h({},mt,tt);break e;case 2:ou=!0}}tt=me.callback,tt!==null&&(x.flags|=64,nt&&(x.flags|=8192),nt=z.callbacks,nt===null?z.callbacks=[tt]:nt.push(tt))}else nt={lane:tt,tag:me.tag,payload:me.payload,callback:me.callback,next:null},ct===null?(Qe=ct=nt,De=mt):ct=ct.next=nt,le|=tt;if(me=me.next,me===null){if(me=z.shared.pending,me===null)break;nt=me,me=nt.next,nt.next=null,z.lastBaseUpdate=nt,z.shared.pending=null}}while(!0);ct===null&&(De=mt),z.baseState=De,z.firstBaseUpdate=Qe,z.lastBaseUpdate=ct,q===null&&(z.shared.lanes=0),pu|=le,x.lanes=le,x.memoizedState=mt}}function o6(x,v){if(typeof x!="function")throw Error(r(191,x));x.call(v)}function l6(x,v){var S=x.callbacks;if(S!==null)for(x.callbacks=null,x=0;x<S.length;x++)o6(S[x],v)}var Z0=Z(null),e1=Z(0);function c6(x,v){x=ad,de(e1,x),de(Z0,v),ad=x|v.baseLanes}function sj(){de(e1,ad),de(Z0,Z0.current)}function oj(){ad=e1.current,ie(Z0),ie(e1)}var oo=Z(null),Oo=null;function du(x){var v=x.alternate;de(Un,Un.current&1),de(oo,x),Oo===null&&(v===null||Z0.current!==null||v.memoizedState!==null)&&(Oo=x)}function lj(x){de(Un,Un.current),de(oo,x),Oo===null&&(Oo=x)}function d6(x){x.tag===22?(de(Un,Un.current),de(oo,x),Oo===null&&(Oo=x)):uu()}function uu(){de(Un,Un.current),de(oo,oo.current)}function lo(x){ie(oo),Oo===x&&(Oo=null),ie(Un)}var Un=Z(0);function t1(x){for(var v=x;v!==null;){if(v.tag===13){var S=v.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||pS(S)||xS(S)))return v}else if(v.tag===19&&(v.memoizedProps.revealOrder==="forwards"||v.memoizedProps.revealOrder==="backwards"||v.memoizedProps.revealOrder==="unstable_legacy-backwards"||v.memoizedProps.revealOrder==="together")){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===x)break;for(;v.sibling===null;){if(v.return===null||v.return===x)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var qc=0,Ka=null,Kr=null,oi=null,a1=!1,K0=!1,Yh=!1,r1=0,pm=0,Q0=null,KK=0;function Mn(){throw Error(r(321))}function cj(x,v){if(v===null)return!1;for(var S=0;S<v.length&&S<x.length;S++)if(!R(x[S],v[S]))return!1;return!0}function dj(x,v,S,E,z,q){return qc=q,Ka=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,W.H=x===null||x.memoizedState===null?Y6:Sj,Yh=!1,q=S(E,z),Yh=!1,K0&&(q=h6(v,S,E,z)),u6(x),q}function u6(x){W.H=gm;var v=Kr!==null&&Kr.next!==null;if(qc=0,oi=Kr=Ka=null,a1=!1,pm=0,Q0=null,v)throw Error(r(300));x===null||li||(x=x.dependencies,x!==null&&Yb(x)&&(li=!0))}function h6(x,v,S,E){Ka=x;var z=0;do{if(K0&&(Q0=null),pm=0,K0=!1,25<=z)throw Error(r(301));if(z+=1,oi=Kr=null,x.updateQueue!=null){var q=x.updateQueue;q.lastEffect=null,q.events=null,q.stores=null,q.memoCache!=null&&(q.memoCache.index=0)}W.H=q6,q=v(S,E)}while(K0);return q}function QK(){var x=W.H,v=x.useState()[0];return v=typeof v.then=="function"?xm(v):v,x=x.useState()[0],(Kr!==null?Kr.memoizedState:null)!==x&&(Ka.flags|=1024),v}function uj(){var x=r1!==0;return r1=0,x}function hj(x,v,S){v.updateQueue=x.updateQueue,v.flags&=-2053,x.lanes&=~S}function fj(x){if(a1){for(x=x.memoizedState;x!==null;){var v=x.queue;v!==null&&(v.pending=null),x=x.next}a1=!1}qc=0,oi=Kr=Ka=null,K0=!1,pm=r1=0,Q0=null}function gs(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oi===null?Ka.memoizedState=oi=x:oi=oi.next=x,oi}function Gn(){if(Kr===null){var x=Ka.alternate;x=x!==null?x.memoizedState:null}else x=Kr.next;var v=oi===null?Ka.memoizedState:oi.next;if(v!==null)oi=v,Kr=x;else{if(x===null)throw Ka.alternate===null?Error(r(467)):Error(r(310));Kr=x,x={memoizedState:Kr.memoizedState,baseState:Kr.baseState,baseQueue:Kr.baseQueue,queue:Kr.queue,next:null},oi===null?Ka.memoizedState=oi=x:oi=oi.next=x}return oi}function n1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xm(x){var v=pm;return pm+=1,Q0===null&&(Q0=[]),x=a6(Q0,x,v),v=Ka,(oi===null?v.memoizedState:oi.next)===null&&(v=v.alternate,W.H=v===null||v.memoizedState===null?Y6:Sj),x}function i1(x){if(x!==null&&typeof x=="object"){if(typeof x.then=="function")return xm(x);if(x.$$typeof===T)return zi(x)}throw Error(r(438,String(x)))}function pj(x){var v=null,S=Ka.updateQueue;if(S!==null&&(v=S.memoCache),v==null){var E=Ka.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(v={data:E.data.map(function(z){return z.slice()}),index:0})))}if(v==null&&(v={data:[],index:0}),S===null&&(S=n1(),Ka.updateQueue=S),S.memoCache=v,S=v.data[v.index],S===void 0)for(S=v.data[v.index]=Array(x),E=0;E<x;E++)S[E]=Q;return v.index++,S}function Xc(x,v){return typeof v=="function"?v(x):v}function s1(x){var v=Gn();return xj(v,Kr,x)}function xj(x,v,S){var E=x.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=S;var z=x.baseQueue,q=E.pending;if(q!==null){if(z!==null){var le=z.next;z.next=q.next,q.next=le}v.baseQueue=z=q,E.pending=null}if(q=x.baseState,z===null)x.memoizedState=q;else{v=z.next;var me=le=null,De=null,Qe=v,ct=!1;do{var mt=Qe.lane&-536870913;if(mt!==Qe.lane?(mr&mt)===mt:(qc&mt)===mt){var tt=Qe.revertLane;if(tt===0)De!==null&&(De=De.next={lane:0,revertLane:0,gesture:null,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null}),mt===$0&&(ct=!0);else if((qc&tt)===tt){Qe=Qe.next,tt===$0&&(ct=!0);continue}else mt={lane:0,revertLane:Qe.revertLane,gesture:null,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null},De===null?(me=De=mt,le=q):De=De.next=mt,Ka.lanes|=tt,pu|=tt;mt=Qe.action,Yh&&S(q,mt),q=Qe.hasEagerState?Qe.eagerState:S(q,mt)}else tt={lane:mt,revertLane:Qe.revertLane,gesture:Qe.gesture,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null},De===null?(me=De=tt,le=q):De=De.next=tt,Ka.lanes|=mt,pu|=mt;Qe=Qe.next}while(Qe!==null&&Qe!==v);if(De===null?le=q:De.next=me,!R(q,x.memoizedState)&&(li=!0,ct&&(S=Y0,S!==null)))throw S;x.memoizedState=q,x.baseState=le,x.baseQueue=De,E.lastRenderedState=q}return z===null&&(E.lanes=0),[x.memoizedState,E.dispatch]}function mj(x){var v=Gn(),S=v.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=x;var E=S.dispatch,z=S.pending,q=v.memoizedState;if(z!==null){S.pending=null;var le=z=z.next;do q=x(q,le.action),le=le.next;while(le!==z);R(q,v.memoizedState)||(li=!0),v.memoizedState=q,v.baseQueue===null&&(v.baseState=q),S.lastRenderedState=q}return[q,E]}function f6(x,v,S){var E=Ka,z=Gn(),q=_r;if(q){if(S===void 0)throw Error(r(407));S=S()}else S=v();var le=!R((Kr||z).memoizedState,S);if(le&&(z.memoizedState=S,li=!0),z=z.queue,bj(m6.bind(null,E,z,x),[x]),z.getSnapshot!==v||le||oi!==null&&oi.memoizedState.tag&1){if(E.flags|=2048,J0(9,{destroy:void 0},x6.bind(null,E,z,S,v),null),sn===null)throw Error(r(349));q||(qc&127)!==0||p6(E,v,S)}return S}function p6(x,v,S){x.flags|=16384,x={getSnapshot:v,value:S},v=Ka.updateQueue,v===null?(v=n1(),Ka.updateQueue=v,v.stores=[x]):(S=v.stores,S===null?v.stores=[x]:S.push(x))}function x6(x,v,S,E){v.value=S,v.getSnapshot=E,g6(v)&&v6(x)}function m6(x,v,S){return S(function(){g6(v)&&v6(x)})}function g6(x){var v=x.getSnapshot;x=x.value;try{var S=v();return!R(x,S)}catch{return!0}}function v6(x){var v=Pr(x,2);v!==null&&Fs(v,x,2)}function gj(x){var v=gs();if(typeof x=="function"){var S=x;if(x=S(),Yh){oa(!0);try{S()}finally{oa(!1)}}}return v.memoizedState=v.baseState=x,v.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:x},v}function b6(x,v,S,E){return x.baseState=S,xj(x,Kr,typeof E=="function"?E:Xc)}function JK(x,v,S,E,z){if(c1(x))throw Error(r(485));if(x=v.action,x!==null){var q={payload:z,action:x,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){q.listeners.push(le)}};W.T!==null?S(!0):q.isTransition=!1,E(q),S=v.pending,S===null?(q.next=v.pending=q,y6(v,q)):(q.next=S.next,v.pending=S.next=q)}}function y6(x,v){var S=v.action,E=v.payload,z=x.state;if(v.isTransition){var q=W.T,le={};W.T=le;try{var me=S(z,E),De=W.S;De!==null&&De(le,me),w6(x,v,me)}catch(Qe){vj(x,v,Qe)}finally{q!==null&&le.types!==null&&(q.types=le.types),W.T=q}}else try{q=S(z,E),w6(x,v,q)}catch(Qe){vj(x,v,Qe)}}function w6(x,v,S){S!==null&&typeof S=="object"&&typeof S.then=="function"?S.then(function(E){_6(x,v,E)},function(E){return vj(x,v,E)}):_6(x,v,S)}function _6(x,v,S){v.status="fulfilled",v.value=S,N6(v),x.state=S,v=x.pending,v!==null&&(S=v.next,S===v?x.pending=null:(S=S.next,v.next=S,y6(x,S)))}function vj(x,v,S){var E=x.pending;if(x.pending=null,E!==null){E=E.next;do v.status="rejected",v.reason=S,N6(v),v=v.next;while(v!==E)}x.action=null}function N6(x){x=x.listeners;for(var v=0;v<x.length;v++)(0,x[v])()}function j6(x,v){return v}function S6(x,v){if(_r){var S=sn.formState;if(S!==null){e:{var E=Ka;if(_r){if(fn){t:{for(var z=fn,q=Lo;z.nodeType!==8;){if(!q){z=null;break t}if(z=Po(z.nextSibling),z===null){z=null;break t}}q=z.data,z=q==="F!"||q==="F"?z:null}if(z){fn=Po(z.nextSibling),E=z.data==="F!";break e}}iu(E)}E=!1}E&&(v=S[0])}}return S=gs(),S.memoizedState=S.baseState=v,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:j6,lastRenderedState:v},S.queue=E,S=G6.bind(null,Ka,E),E.dispatch=S,E=gj(!1),q=jj.bind(null,Ka,!1,E.queue),E=gs(),z={state:v,dispatch:null,action:x,pending:null},E.queue=z,S=JK.bind(null,Ka,z,q,S),z.dispatch=S,E.memoizedState=x,[v,S,!1]}function k6(x){var v=Gn();return C6(v,Kr,x)}function C6(x,v,S){if(v=xj(x,v,j6)[0],x=s1(Xc)[0],typeof v=="object"&&v!==null&&typeof v.then=="function")try{var E=xm(v)}catch(le){throw le===q0?Zb:le}else E=v;v=Gn();var z=v.queue,q=z.dispatch;return S!==v.memoizedState&&(Ka.flags|=2048,J0(9,{destroy:void 0},eQ.bind(null,z,S),null)),[E,q,x]}function eQ(x,v){x.action=v}function A6(x){var v=Gn(),S=Kr;if(S!==null)return C6(v,S,x);Gn(),v=v.memoizedState,S=Gn();var E=S.queue.dispatch;return S.memoizedState=x,[v,E,!1]}function J0(x,v,S,E){return x={tag:x,create:S,deps:E,inst:v,next:null},v=Ka.updateQueue,v===null&&(v=n1(),Ka.updateQueue=v),S=v.lastEffect,S===null?v.lastEffect=x.next=x:(E=S.next,S.next=x,x.next=E,v.lastEffect=x),x}function T6(){return Gn().memoizedState}function o1(x,v,S,E){var z=gs();Ka.flags|=x,z.memoizedState=J0(1|v,{destroy:void 0},S,E===void 0?null:E)}function l1(x,v,S,E){var z=Gn();E=E===void 0?null:E;var q=z.memoizedState.inst;Kr!==null&&E!==null&&cj(E,Kr.memoizedState.deps)?z.memoizedState=J0(v,q,S,E):(Ka.flags|=x,z.memoizedState=J0(1|v,q,S,E))}function M6(x,v){o1(8390656,8,x,v)}function bj(x,v){l1(2048,8,x,v)}function tQ(x){Ka.flags|=4;var v=Ka.updateQueue;if(v===null)v=n1(),Ka.updateQueue=v,v.events=[x];else{var S=v.events;S===null?v.events=[x]:S.push(x)}}function E6(x){var v=Gn().memoizedState;return tQ({ref:v,nextImpl:x}),function(){if((Ir&2)!==0)throw Error(r(440));return v.impl.apply(void 0,arguments)}}function D6(x,v){return l1(4,2,x,v)}function I6(x,v){return l1(4,4,x,v)}function R6(x,v){if(typeof v=="function"){x=x();var S=v(x);return function(){typeof S=="function"?S():v(null)}}if(v!=null)return x=x(),v.current=x,function(){v.current=null}}function L6(x,v,S){S=S!=null?S.concat([x]):null,l1(4,4,R6.bind(null,v,x),S)}function yj(){}function O6(x,v){var S=Gn();v=v===void 0?null:v;var E=S.memoizedState;return v!==null&&cj(v,E[1])?E[0]:(S.memoizedState=[x,v],x)}function P6(x,v){var S=Gn();v=v===void 0?null:v;var E=S.memoizedState;if(v!==null&&cj(v,E[1]))return E[0];if(E=x(),Yh){oa(!0);try{x()}finally{oa(!1)}}return S.memoizedState=[E,v],E}function wj(x,v,S){return S===void 0||(qc&1073741824)!==0&&(mr&261930)===0?x.memoizedState=v:(x.memoizedState=S,x=BD(),Ka.lanes|=x,pu|=x,S)}function B6(x,v,S,E){return R(S,v)?S:Z0.current!==null?(x=wj(x,S,E),R(x,v)||(li=!0),x):(qc&42)===0||(qc&1073741824)!==0&&(mr&261930)===0?(li=!0,x.memoizedState=S):(x=BD(),Ka.lanes|=x,pu|=x,v)}function z6(x,v,S,E,z){var q=K.p;K.p=q!==0&&8>q?q:8;var le=W.T,me={};W.T=me,jj(x,!1,v,S);try{var De=z(),Qe=W.S;if(Qe!==null&&Qe(me,De),De!==null&&typeof De=="object"&&typeof De.then=="function"){var ct=ZK(De,E);mm(x,v,ct,ho(x))}else mm(x,v,E,ho(x))}catch(mt){mm(x,v,{then:function(){},status:"rejected",reason:mt},ho())}finally{K.p=q,le!==null&&me.types!==null&&(le.types=me.types),W.T=le}}function aQ(){}function _j(x,v,S,E){if(x.tag!==5)throw Error(r(476));var z=F6(x).queue;z6(x,z,v,ee,S===null?aQ:function(){return V6(x),S(E)})}function F6(x){var v=x.memoizedState;if(v!==null)return v;v={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:ee},next:null};var S={};return v.next={memoizedState:S,baseState:S,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:S},next:null},x.memoizedState=v,x=x.alternate,x!==null&&(x.memoizedState=v),v}function V6(x){var v=F6(x);v.next===null&&(v=x.alternate.memoizedState),mm(x,v.next.queue,{},ho())}function Nj(){return zi(Im)}function H6(){return Gn().memoizedState}function U6(){return Gn().memoizedState}function rQ(x){for(var v=x.return;v!==null;){switch(v.tag){case 24:case 3:var S=ho();x=lu(S);var E=cu(v,x,S);E!==null&&(Fs(E,v,S),um(E,v,S)),v={cache:QN()},x.payload=v;return}v=v.return}}function nQ(x,v,S){var E=ho();S={lane:E,revertLane:0,gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},c1(x)?W6(v,S):(S=Ki(x,v,S,E),S!==null&&(Fs(S,x,E),$6(S,v,E)))}function G6(x,v,S){var E=ho();mm(x,v,S,E)}function mm(x,v,S,E){var z={lane:E,revertLane:0,gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null};if(c1(x))W6(v,z);else{var q=x.alternate;if(x.lanes===0&&(q===null||q.lanes===0)&&(q=v.lastRenderedReducer,q!==null))try{var le=v.lastRenderedState,me=q(le,S);if(z.hasEagerState=!0,z.eagerState=me,R(me,le))return Zr(x,v,z,0),sn===null&&Ga(),!1}catch{}if(S=Ki(x,v,z,E),S!==null)return Fs(S,x,E),$6(S,v,E),!0}return!1}function jj(x,v,S,E){if(E={lane:2,revertLane:aS(),gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},c1(x)){if(v)throw Error(r(479))}else v=Ki(x,S,E,2),v!==null&&Fs(v,x,2)}function c1(x){var v=x.alternate;return x===Ka||v!==null&&v===Ka}function W6(x,v){K0=a1=!0;var S=x.pending;S===null?v.next=v:(v.next=S.next,S.next=v),x.pending=v}function $6(x,v,S){if((S&4194048)!==0){var E=v.lanes;E&=x.pendingLanes,S|=E,v.lanes=S,Ae(x,S)}}var gm={readContext:zi,use:i1,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useLayoutEffect:Mn,useInsertionEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useSyncExternalStore:Mn,useId:Mn,useHostTransitionStatus:Mn,useFormState:Mn,useActionState:Mn,useOptimistic:Mn,useMemoCache:Mn,useCacheRefresh:Mn};gm.useEffectEvent=Mn;var Y6={readContext:zi,use:i1,useCallback:function(x,v){return gs().memoizedState=[x,v===void 0?null:v],x},useContext:zi,useEffect:M6,useImperativeHandle:function(x,v,S){S=S!=null?S.concat([x]):null,o1(4194308,4,R6.bind(null,v,x),S)},useLayoutEffect:function(x,v){return o1(4194308,4,x,v)},useInsertionEffect:function(x,v){o1(4,2,x,v)},useMemo:function(x,v){var S=gs();v=v===void 0?null:v;var E=x();if(Yh){oa(!0);try{x()}finally{oa(!1)}}return S.memoizedState=[E,v],E},useReducer:function(x,v,S){var E=gs();if(S!==void 0){var z=S(v);if(Yh){oa(!0);try{S(v)}finally{oa(!1)}}}else z=v;return E.memoizedState=E.baseState=z,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:z},E.queue=x,x=x.dispatch=nQ.bind(null,Ka,x),[E.memoizedState,x]},useRef:function(x){var v=gs();return x={current:x},v.memoizedState=x},useState:function(x){x=gj(x);var v=x.queue,S=G6.bind(null,Ka,v);return v.dispatch=S,[x.memoizedState,S]},useDebugValue:yj,useDeferredValue:function(x,v){var S=gs();return wj(S,x,v)},useTransition:function(){var x=gj(!1);return x=z6.bind(null,Ka,x.queue,!0,!1),gs().memoizedState=x,[!1,x]},useSyncExternalStore:function(x,v,S){var E=Ka,z=gs();if(_r){if(S===void 0)throw Error(r(407));S=S()}else{if(S=v(),sn===null)throw Error(r(349));(mr&127)!==0||p6(E,v,S)}z.memoizedState=S;var q={value:S,getSnapshot:v};return z.queue=q,M6(m6.bind(null,E,q,x),[x]),E.flags|=2048,J0(9,{destroy:void 0},x6.bind(null,E,q,S,v),null),S},useId:function(){var x=gs(),v=sn.identifierPrefix;if(_r){var S=Wl,E=Gl;S=(E&~(1<<32-xt(E)-1)).toString(32)+S,v="_"+v+"R_"+S,S=r1++,0<S&&(v+="H"+S.toString(32)),v+="_"}else S=KK++,v="_"+v+"r_"+S.toString(32)+"_";return x.memoizedState=v},useHostTransitionStatus:Nj,useFormState:S6,useActionState:S6,useOptimistic:function(x){var v=gs();v.memoizedState=v.baseState=x;var S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return v.queue=S,v=jj.bind(null,Ka,!0,S),S.dispatch=v,[x,v]},useMemoCache:pj,useCacheRefresh:function(){return gs().memoizedState=rQ.bind(null,Ka)},useEffectEvent:function(x){var v=gs(),S={impl:x};return v.memoizedState=S,function(){if((Ir&2)!==0)throw Error(r(440));return S.impl.apply(void 0,arguments)}}},Sj={readContext:zi,use:i1,useCallback:O6,useContext:zi,useEffect:bj,useImperativeHandle:L6,useInsertionEffect:D6,useLayoutEffect:I6,useMemo:P6,useReducer:s1,useRef:T6,useState:function(){return s1(Xc)},useDebugValue:yj,useDeferredValue:function(x,v){var S=Gn();return B6(S,Kr.memoizedState,x,v)},useTransition:function(){var x=s1(Xc)[0],v=Gn().memoizedState;return[typeof x=="boolean"?x:xm(x),v]},useSyncExternalStore:f6,useId:H6,useHostTransitionStatus:Nj,useFormState:k6,useActionState:k6,useOptimistic:function(x,v){var S=Gn();return b6(S,Kr,x,v)},useMemoCache:pj,useCacheRefresh:U6};Sj.useEffectEvent=E6;var q6={readContext:zi,use:i1,useCallback:O6,useContext:zi,useEffect:bj,useImperativeHandle:L6,useInsertionEffect:D6,useLayoutEffect:I6,useMemo:P6,useReducer:mj,useRef:T6,useState:function(){return mj(Xc)},useDebugValue:yj,useDeferredValue:function(x,v){var S=Gn();return Kr===null?wj(S,x,v):B6(S,Kr.memoizedState,x,v)},useTransition:function(){var x=mj(Xc)[0],v=Gn().memoizedState;return[typeof x=="boolean"?x:xm(x),v]},useSyncExternalStore:f6,useId:H6,useHostTransitionStatus:Nj,useFormState:A6,useActionState:A6,useOptimistic:function(x,v){var S=Gn();return Kr!==null?b6(S,Kr,x,v):(S.baseState=x,[x,S.queue.dispatch])},useMemoCache:pj,useCacheRefresh:U6};q6.useEffectEvent=E6;function kj(x,v,S,E){v=x.memoizedState,S=S(E,v),S=S==null?v:h({},v,S),x.memoizedState=S,x.lanes===0&&(x.updateQueue.baseState=S)}var Cj={enqueueSetState:function(x,v,S){x=x._reactInternals;var E=ho(),z=lu(E);z.payload=v,S!=null&&(z.callback=S),v=cu(x,z,E),v!==null&&(Fs(v,x,E),um(v,x,E))},enqueueReplaceState:function(x,v,S){x=x._reactInternals;var E=ho(),z=lu(E);z.tag=1,z.payload=v,S!=null&&(z.callback=S),v=cu(x,z,E),v!==null&&(Fs(v,x,E),um(v,x,E))},enqueueForceUpdate:function(x,v){x=x._reactInternals;var S=ho(),E=lu(S);E.tag=2,v!=null&&(E.callback=v),v=cu(x,E,S),v!==null&&(Fs(v,x,S),um(v,x,S))}};function X6(x,v,S,E,z,q,le){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate(E,q,le):v.prototype&&v.prototype.isPureReactComponent?!N(S,E)||!N(z,q):!0}function Z6(x,v,S,E){x=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(S,E),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(S,E),v.state!==x&&Cj.enqueueReplaceState(v,v.state,null)}function qh(x,v){var S=v;if("ref"in v){S={};for(var E in v)E!=="ref"&&(S[E]=v[E])}if(x=x.defaultProps){S===v&&(S=h({},S));for(var z in x)S[z]===void 0&&(S[z]=x[z])}return S}function K6(x){Zt(x)}function Q6(x){console.error(x)}function J6(x){Zt(x)}function d1(x,v){try{var S=x.onUncaughtError;S(v.value,{componentStack:v.stack})}catch(E){setTimeout(function(){throw E})}}function eD(x,v,S){try{var E=x.onCaughtError;E(S.value,{componentStack:S.stack,errorBoundary:v.tag===1?v.stateNode:null})}catch(z){setTimeout(function(){throw z})}}function Aj(x,v,S){return S=lu(S),S.tag=3,S.payload={element:null},S.callback=function(){d1(x,v)},S}function tD(x){return x=lu(x),x.tag=3,x}function aD(x,v,S,E){var z=S.type.getDerivedStateFromError;if(typeof z=="function"){var q=E.value;x.payload=function(){return z(q)},x.callback=function(){eD(v,S,E)}}var le=S.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(x.callback=function(){eD(v,S,E),typeof z!="function"&&(xu===null?xu=new Set([this]):xu.add(this));var me=E.stack;this.componentDidCatch(E.value,{componentStack:me!==null?me:""})})}function iQ(x,v,S,E,z){if(S.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(v=S.alternate,v!==null&&W0(v,S,z,!0),S=oo.current,S!==null){switch(S.tag){case 31:case 13:return Oo===null?_1():S.alternate===null&&En===0&&(En=3),S.flags&=-257,S.flags|=65536,S.lanes=z,E===Kb?S.flags|=16384:(v=S.updateQueue,v===null?S.updateQueue=new Set([E]):v.add(E),Jj(x,E,z)),!1;case 22:return S.flags|=65536,E===Kb?S.flags|=16384:(v=S.updateQueue,v===null?(v={transitions:null,markerInstances:null,retryQueue:new Set([E])},S.updateQueue=v):(S=v.retryQueue,S===null?v.retryQueue=new Set([E]):S.add(E)),Jj(x,E,z)),!1}throw Error(r(435,S.tag))}return Jj(x,E,z),_1(),!1}if(_r)return v=oo.current,v!==null?((v.flags&65536)===0&&(v.flags|=256),v.flags|=65536,v.lanes=z,E!==YN&&(x=Error(r(422),{cause:E}),sm(Do(x,S)))):(E!==YN&&(v=Error(r(423),{cause:E}),sm(Do(v,S))),x=x.current.alternate,x.flags|=65536,z&=-z,x.lanes|=z,E=Do(E,S),z=Aj(x.stateNode,E,z),nj(x,z),En!==4&&(En=2)),!1;var q=Error(r(520),{cause:E});if(q=Do(q,S),Sm===null?Sm=[q]:Sm.push(q),En!==4&&(En=2),v===null)return!0;E=Do(E,S),S=v;do{switch(S.tag){case 3:return S.flags|=65536,x=z&-z,S.lanes|=x,x=Aj(S.stateNode,E,x),nj(S,x),!1;case 1:if(v=S.type,q=S.stateNode,(S.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(xu===null||!xu.has(q))))return S.flags|=65536,z&=-z,S.lanes|=z,z=tD(z),aD(z,x,S,E),nj(S,z),!1}S=S.return}while(S!==null);return!1}var Tj=Error(r(461)),li=!1;function Fi(x,v,S,E){v.child=x===null?s6(v,null,S,E):$h(v,x.child,S,E)}function rD(x,v,S,E,z){S=S.render;var q=v.ref;if("ref"in E){var le={};for(var me in E)me!=="ref"&&(le[me]=E[me])}else le=E;return Hh(v),E=dj(x,v,S,le,q,z),me=uj(),x!==null&&!li?(hj(x,v,z),Zc(x,v,z)):(_r&&me&&WN(v),v.flags|=1,Fi(x,v,E,z),v.child)}function nD(x,v,S,E,z){if(x===null){var q=S.type;return typeof q=="function"&&!HN(q)&&q.defaultProps===void 0&&S.compare===null?(v.tag=15,v.type=q,iD(x,v,q,E,z)):(x=Wb(S.type,null,E,v,v.mode,z),x.ref=v.ref,x.return=v,v.child=x)}if(q=x.child,!Pj(x,z)){var le=q.memoizedProps;if(S=S.compare,S=S!==null?S:N,S(le,E)&&x.ref===v.ref)return Zc(x,v,z)}return v.flags|=1,x=Gc(q,E),x.ref=v.ref,x.return=v,v.child=x}function iD(x,v,S,E,z){if(x!==null){var q=x.memoizedProps;if(N(q,E)&&x.ref===v.ref)if(li=!1,v.pendingProps=E=q,Pj(x,z))(x.flags&131072)!==0&&(li=!0);else return v.lanes=x.lanes,Zc(x,v,z)}return Mj(x,v,S,E,z)}function sD(x,v,S,E){var z=E.children,q=x!==null?x.memoizedState:null;if(x===null&&v.stateNode===null&&(v.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.mode==="hidden"){if((v.flags&128)!==0){if(q=q!==null?q.baseLanes|S:S,x!==null){for(E=v.child=x.child,z=0;E!==null;)z=z|E.lanes|E.childLanes,E=E.sibling;E=z&~q}else E=0,v.child=null;return oD(x,v,q,S,E)}if((S&536870912)!==0)v.memoizedState={baseLanes:0,cachePool:null},x!==null&&Xb(v,q!==null?q.cachePool:null),q!==null?c6(v,q):sj(),d6(v);else return E=v.lanes=536870912,oD(x,v,q!==null?q.baseLanes|S:S,S,E)}else q!==null?(Xb(v,q.cachePool),c6(v,q),uu(),v.memoizedState=null):(x!==null&&Xb(v,null),sj(),uu());return Fi(x,v,z,S),v.child}function vm(x,v){return x!==null&&x.tag===22||v.stateNode!==null||(v.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.sibling}function oD(x,v,S,E,z){var q=ej();return q=q===null?null:{parent:si._currentValue,pool:q},v.memoizedState={baseLanes:S,cachePool:q},x!==null&&Xb(v,null),sj(),d6(v),x!==null&&W0(x,v,E,!0),v.childLanes=z,null}function u1(x,v){return v=f1({mode:v.mode,children:v.children},x.mode),v.ref=x.ref,x.child=v,v.return=x,v}function lD(x,v,S){return $h(v,x.child,null,S),x=u1(v,v.pendingProps),x.flags|=2,lo(v),v.memoizedState=null,x}function sQ(x,v,S){var E=v.pendingProps,z=(v.flags&128)!==0;if(v.flags&=-129,x===null){if(_r){if(E.mode==="hidden")return x=u1(v,E),v.lanes=536870912,vm(null,x);if(lj(v),(x=fn)?(x=yI(x,Lo),x=x!==null&&x.data==="&"?x:null,x!==null&&(v.memoizedState={dehydrated:x,treeContext:ru!==null?{id:Gl,overflow:Wl}:null,retryLane:536870912,hydrationErrors:null},S=WE(x),S.return=v,v.child=S,Bi=v,fn=null)):x=null,x===null)throw iu(v);return v.lanes=536870912,null}return u1(v,E)}var q=x.memoizedState;if(q!==null){var le=q.dehydrated;if(lj(v),z)if(v.flags&256)v.flags&=-257,v=lD(x,v,S);else if(v.memoizedState!==null)v.child=x.child,v.flags|=128,v=null;else throw Error(r(558));else if(li||W0(x,v,S,!1),z=(S&x.childLanes)!==0,li||z){if(E=sn,E!==null&&(le=Be(E,S),le!==0&&le!==q.retryLane))throw q.retryLane=le,Pr(x,le),Fs(E,x,le),Tj;_1(),v=lD(x,v,S)}else x=q.treeContext,fn=Po(le.nextSibling),Bi=v,_r=!0,nu=null,Lo=!1,x!==null&&qE(v,x),v=u1(v,E),v.flags|=4096;return v}return x=Gc(x.child,{mode:E.mode,children:E.children}),x.ref=v.ref,v.child=x,x.return=v,x}function h1(x,v){var S=v.ref;if(S===null)x!==null&&x.ref!==null&&(v.flags|=4194816);else{if(typeof S!="function"&&typeof S!="object")throw Error(r(284));(x===null||x.ref!==S)&&(v.flags|=4194816)}}function Mj(x,v,S,E,z){return Hh(v),S=dj(x,v,S,E,void 0,z),E=uj(),x!==null&&!li?(hj(x,v,z),Zc(x,v,z)):(_r&&E&&WN(v),v.flags|=1,Fi(x,v,S,z),v.child)}function cD(x,v,S,E,z,q){return Hh(v),v.updateQueue=null,S=h6(v,E,S,z),u6(x),E=uj(),x!==null&&!li?(hj(x,v,q),Zc(x,v,q)):(_r&&E&&WN(v),v.flags|=1,Fi(x,v,S,q),v.child)}function dD(x,v,S,E,z){if(Hh(v),v.stateNode===null){var q=V0,le=S.contextType;typeof le=="object"&&le!==null&&(q=zi(le)),q=new S(E,q),v.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,q.updater=Cj,v.stateNode=q,q._reactInternals=v,q=v.stateNode,q.props=E,q.state=v.memoizedState,q.refs={},aj(v),le=S.contextType,q.context=typeof le=="object"&&le!==null?zi(le):V0,q.state=v.memoizedState,le=S.getDerivedStateFromProps,typeof le=="function"&&(kj(v,S,le,E),q.state=v.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(le=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),le!==q.state&&Cj.enqueueReplaceState(q,q.state,null),fm(v,E,q,z),hm(),q.state=v.memoizedState),typeof q.componentDidMount=="function"&&(v.flags|=4194308),E=!0}else if(x===null){q=v.stateNode;var me=v.memoizedProps,De=qh(S,me);q.props=De;var Qe=q.context,ct=S.contextType;le=V0,typeof ct=="object"&&ct!==null&&(le=zi(ct));var mt=S.getDerivedStateFromProps;ct=typeof mt=="function"||typeof q.getSnapshotBeforeUpdate=="function",me=v.pendingProps!==me,ct||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(me||Qe!==le)&&Z6(v,q,E,le),ou=!1;var tt=v.memoizedState;q.state=tt,fm(v,E,q,z),hm(),Qe=v.memoizedState,me||tt!==Qe||ou?(typeof mt=="function"&&(kj(v,S,mt,E),Qe=v.memoizedState),(De=ou||X6(v,S,De,E,tt,Qe,le))?(ct||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(v.flags|=4194308)):(typeof q.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=E,v.memoizedState=Qe),q.props=E,q.state=Qe,q.context=le,E=De):(typeof q.componentDidMount=="function"&&(v.flags|=4194308),E=!1)}else{q=v.stateNode,rj(x,v),le=v.memoizedProps,ct=qh(S,le),q.props=ct,mt=v.pendingProps,tt=q.context,Qe=S.contextType,De=V0,typeof Qe=="object"&&Qe!==null&&(De=zi(Qe)),me=S.getDerivedStateFromProps,(Qe=typeof me=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(le!==mt||tt!==De)&&Z6(v,q,E,De),ou=!1,tt=v.memoizedState,q.state=tt,fm(v,E,q,z),hm();var nt=v.memoizedState;le!==mt||tt!==nt||ou||x!==null&&x.dependencies!==null&&Yb(x.dependencies)?(typeof me=="function"&&(kj(v,S,me,E),nt=v.memoizedState),(ct=ou||X6(v,S,ct,E,tt,nt,De)||x!==null&&x.dependencies!==null&&Yb(x.dependencies))?(Qe||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(E,nt,De),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(E,nt,De)),typeof q.componentDidUpdate=="function"&&(v.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof q.componentDidUpdate!="function"||le===x.memoizedProps&&tt===x.memoizedState||(v.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||le===x.memoizedProps&&tt===x.memoizedState||(v.flags|=1024),v.memoizedProps=E,v.memoizedState=nt),q.props=E,q.state=nt,q.context=De,E=ct):(typeof q.componentDidUpdate!="function"||le===x.memoizedProps&&tt===x.memoizedState||(v.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||le===x.memoizedProps&&tt===x.memoizedState||(v.flags|=1024),E=!1)}return q=E,h1(x,v),E=(v.flags&128)!==0,q||E?(q=v.stateNode,S=E&&typeof S.getDerivedStateFromError!="function"?null:q.render(),v.flags|=1,x!==null&&E?(v.child=$h(v,x.child,null,z),v.child=$h(v,null,S,z)):Fi(x,v,S,z),v.memoizedState=q.state,x=v.child):x=Zc(x,v,z),x}function uD(x,v,S,E){return Fh(),v.flags|=256,Fi(x,v,S,E),v.child}var Ej={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dj(x){return{baseLanes:x,cachePool:e6()}}function Ij(x,v,S){return x=x!==null?x.childLanes&~S:0,v&&(x|=uo),x}function hD(x,v,S){var E=v.pendingProps,z=!1,q=(v.flags&128)!==0,le;if((le=q)||(le=x!==null&&x.memoizedState===null?!1:(Un.current&2)!==0),le&&(z=!0,v.flags&=-129),le=(v.flags&32)!==0,v.flags&=-33,x===null){if(_r){if(z?du(v):uu(),(x=fn)?(x=yI(x,Lo),x=x!==null&&x.data!=="&"?x:null,x!==null&&(v.memoizedState={dehydrated:x,treeContext:ru!==null?{id:Gl,overflow:Wl}:null,retryLane:536870912,hydrationErrors:null},S=WE(x),S.return=v,v.child=S,Bi=v,fn=null)):x=null,x===null)throw iu(v);return xS(x)?v.lanes=32:v.lanes=536870912,null}var me=E.children;return E=E.fallback,z?(uu(),z=v.mode,me=f1({mode:"hidden",children:me},z),E=zh(E,z,S,null),me.return=v,E.return=v,me.sibling=E,v.child=me,E=v.child,E.memoizedState=Dj(S),E.childLanes=Ij(x,le,S),v.memoizedState=Ej,vm(null,E)):(du(v),Rj(v,me))}var De=x.memoizedState;if(De!==null&&(me=De.dehydrated,me!==null)){if(q)v.flags&256?(du(v),v.flags&=-257,v=Lj(x,v,S)):v.memoizedState!==null?(uu(),v.child=x.child,v.flags|=128,v=null):(uu(),me=E.fallback,z=v.mode,E=f1({mode:"visible",children:E.children},z),me=zh(me,z,S,null),me.flags|=2,E.return=v,me.return=v,E.sibling=me,v.child=E,$h(v,x.child,null,S),E=v.child,E.memoizedState=Dj(S),E.childLanes=Ij(x,le,S),v.memoizedState=Ej,v=vm(null,E));else if(du(v),xS(me)){if(le=me.nextSibling&&me.nextSibling.dataset,le)var Qe=le.dgst;le=Qe,E=Error(r(419)),E.stack="",E.digest=le,sm({value:E,source:null,stack:null}),v=Lj(x,v,S)}else if(li||W0(x,v,S,!1),le=(S&x.childLanes)!==0,li||le){if(le=sn,le!==null&&(E=Be(le,S),E!==0&&E!==De.retryLane))throw De.retryLane=E,Pr(x,E),Fs(le,x,E),Tj;pS(me)||_1(),v=Lj(x,v,S)}else pS(me)?(v.flags|=192,v.child=x.child,v=null):(x=De.treeContext,fn=Po(me.nextSibling),Bi=v,_r=!0,nu=null,Lo=!1,x!==null&&qE(v,x),v=Rj(v,E.children),v.flags|=4096);return v}return z?(uu(),me=E.fallback,z=v.mode,De=x.child,Qe=De.sibling,E=Gc(De,{mode:"hidden",children:E.children}),E.subtreeFlags=De.subtreeFlags&65011712,Qe!==null?me=Gc(Qe,me):(me=zh(me,z,S,null),me.flags|=2),me.return=v,E.return=v,E.sibling=me,v.child=E,vm(null,E),E=v.child,me=x.child.memoizedState,me===null?me=Dj(S):(z=me.cachePool,z!==null?(De=si._currentValue,z=z.parent!==De?{parent:De,pool:De}:z):z=e6(),me={baseLanes:me.baseLanes|S,cachePool:z}),E.memoizedState=me,E.childLanes=Ij(x,le,S),v.memoizedState=Ej,vm(x.child,E)):(du(v),S=x.child,x=S.sibling,S=Gc(S,{mode:"visible",children:E.children}),S.return=v,S.sibling=null,x!==null&&(le=v.deletions,le===null?(v.deletions=[x],v.flags|=16):le.push(x)),v.child=S,v.memoizedState=null,S)}function Rj(x,v){return v=f1({mode:"visible",children:v},x.mode),v.return=x,x.child=v}function f1(x,v){return x=so(22,x,null,v),x.lanes=0,x}function Lj(x,v,S){return $h(v,x.child,null,S),x=Rj(v,v.pendingProps.children),x.flags|=2,v.memoizedState=null,x}function fD(x,v,S){x.lanes|=v;var E=x.alternate;E!==null&&(E.lanes|=v),ZN(x.return,v,S)}function Oj(x,v,S,E,z,q){var le=x.memoizedState;le===null?x.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:E,tail:S,tailMode:z,treeForkCount:q}:(le.isBackwards=v,le.rendering=null,le.renderingStartTime=0,le.last=E,le.tail=S,le.tailMode=z,le.treeForkCount=q)}function pD(x,v,S){var E=v.pendingProps,z=E.revealOrder,q=E.tail;E=E.children;var le=Un.current,me=(le&2)!==0;if(me?(le=le&1|2,v.flags|=128):le&=1,de(Un,le),Fi(x,v,E,S),E=_r?im:0,!me&&x!==null&&(x.flags&128)!==0)e:for(x=v.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&fD(x,S,v);else if(x.tag===19)fD(x,S,v);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===v)break e;for(;x.sibling===null;){if(x.return===null||x.return===v)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}switch(z){case"forwards":for(S=v.child,z=null;S!==null;)x=S.alternate,x!==null&&t1(x)===null&&(z=S),S=S.sibling;S=z,S===null?(z=v.child,v.child=null):(z=S.sibling,S.sibling=null),Oj(v,!1,z,S,q,E);break;case"backwards":case"unstable_legacy-backwards":for(S=null,z=v.child,v.child=null;z!==null;){if(x=z.alternate,x!==null&&t1(x)===null){v.child=z;break}x=z.sibling,z.sibling=S,S=z,z=x}Oj(v,!0,S,null,q,E);break;case"together":Oj(v,!1,null,null,void 0,E);break;default:v.memoizedState=null}return v.child}function Zc(x,v,S){if(x!==null&&(v.dependencies=x.dependencies),pu|=v.lanes,(S&v.childLanes)===0)if(x!==null){if(W0(x,v,S,!1),(S&v.childLanes)===0)return null}else return null;if(x!==null&&v.child!==x.child)throw Error(r(153));if(v.child!==null){for(x=v.child,S=Gc(x,x.pendingProps),v.child=S,S.return=v;x.sibling!==null;)x=x.sibling,S=S.sibling=Gc(x,x.pendingProps),S.return=v;S.sibling=null}return v.child}function Pj(x,v){return(x.lanes&v)!==0?!0:(x=x.dependencies,!!(x!==null&&Yb(x)))}function oQ(x,v,S){switch(v.tag){case 3:Se(v,v.stateNode.containerInfo),su(v,si,x.memoizedState.cache),Fh();break;case 27:case 5:we(v);break;case 4:Se(v,v.stateNode.containerInfo);break;case 10:su(v,v.type,v.memoizedProps.value);break;case 31:if(v.memoizedState!==null)return v.flags|=128,lj(v),null;break;case 13:var E=v.memoizedState;if(E!==null)return E.dehydrated!==null?(du(v),v.flags|=128,null):(S&v.child.childLanes)!==0?hD(x,v,S):(du(v),x=Zc(x,v,S),x!==null?x.sibling:null);du(v);break;case 19:var z=(x.flags&128)!==0;if(E=(S&v.childLanes)!==0,E||(W0(x,v,S,!1),E=(S&v.childLanes)!==0),z){if(E)return pD(x,v,S);v.flags|=128}if(z=v.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),de(Un,Un.current),E)break;return null;case 22:return v.lanes=0,sD(x,v,S,v.pendingProps);case 24:su(v,si,x.memoizedState.cache)}return Zc(x,v,S)}function xD(x,v,S){if(x!==null)if(x.memoizedProps!==v.pendingProps)li=!0;else{if(!Pj(x,S)&&(v.flags&128)===0)return li=!1,oQ(x,v,S);li=(x.flags&131072)!==0}else li=!1,_r&&(v.flags&1048576)!==0&&YE(v,im,v.index);switch(v.lanes=0,v.tag){case 16:e:{var E=v.pendingProps;if(x=Gh(v.elementType),v.type=x,typeof x=="function")HN(x)?(E=qh(x,E),v.tag=1,v=dD(null,v,x,E,S)):(v.tag=0,v=Mj(null,v,x,E,S));else{if(x!=null){var z=x.$$typeof;if(z===D){v.tag=11,v=rD(null,v,x,E,S);break e}else if(z===P){v.tag=14,v=nD(null,v,x,E,S);break e}}throw v=U(x)||x,Error(r(306,v,""))}}return v;case 0:return Mj(x,v,v.type,v.pendingProps,S);case 1:return E=v.type,z=qh(E,v.pendingProps),dD(x,v,E,z,S);case 3:e:{if(Se(v,v.stateNode.containerInfo),x===null)throw Error(r(387));E=v.pendingProps;var q=v.memoizedState;z=q.element,rj(x,v),fm(v,E,null,S);var le=v.memoizedState;if(E=le.cache,su(v,si,E),E!==q.cache&&KN(v,[si],S,!0),hm(),E=le.element,q.isDehydrated)if(q={element:E,isDehydrated:!1,cache:le.cache},v.updateQueue.baseState=q,v.memoizedState=q,v.flags&256){v=uD(x,v,E,S);break e}else if(E!==z){z=Do(Error(r(424)),v),sm(z),v=uD(x,v,E,S);break e}else for(x=v.stateNode.containerInfo,x.nodeType===9?x=x.body:x=x.nodeName==="HTML"?x.ownerDocument.body:x,fn=Po(x.firstChild),Bi=v,_r=!0,nu=null,Lo=!0,S=s6(v,null,E,S),v.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(Fh(),E===z){v=Zc(x,v,S);break e}Fi(x,v,E,S)}v=v.child}return v;case 26:return h1(x,v),x===null?(S=kI(v.type,null,v.pendingProps,null))?v.memoizedState=S:_r||(S=v.type,x=v.pendingProps,E=T1(ve.current).createElement(S),E[Et]=v,E[At]=x,Vi(E,S,x),Er(E),v.stateNode=E):v.memoizedState=kI(v.type,x.memoizedProps,v.pendingProps,x.memoizedState),null;case 27:return we(v),x===null&&_r&&(E=v.stateNode=NI(v.type,v.pendingProps,ve.current),Bi=v,Lo=!0,z=fn,bu(v.type)?(mS=z,fn=Po(E.firstChild)):fn=z),Fi(x,v,v.pendingProps.children,S),h1(x,v),x===null&&(v.flags|=4194304),v.child;case 5:return x===null&&_r&&((z=E=fn)&&(E=PQ(E,v.type,v.pendingProps,Lo),E!==null?(v.stateNode=E,Bi=v,fn=Po(E.firstChild),Lo=!1,z=!0):z=!1),z||iu(v)),we(v),z=v.type,q=v.pendingProps,le=x!==null?x.memoizedProps:null,E=q.children,uS(z,q)?E=null:le!==null&&uS(z,le)&&(v.flags|=32),v.memoizedState!==null&&(z=dj(x,v,QK,null,null,S),Im._currentValue=z),h1(x,v),Fi(x,v,E,S),v.child;case 6:return x===null&&_r&&((x=S=fn)&&(S=BQ(S,v.pendingProps,Lo),S!==null?(v.stateNode=S,Bi=v,fn=null,x=!0):x=!1),x||iu(v)),null;case 13:return hD(x,v,S);case 4:return Se(v,v.stateNode.containerInfo),E=v.pendingProps,x===null?v.child=$h(v,null,E,S):Fi(x,v,E,S),v.child;case 11:return rD(x,v,v.type,v.pendingProps,S);case 7:return Fi(x,v,v.pendingProps,S),v.child;case 8:return Fi(x,v,v.pendingProps.children,S),v.child;case 12:return Fi(x,v,v.pendingProps.children,S),v.child;case 10:return E=v.pendingProps,su(v,v.type,E.value),Fi(x,v,E.children,S),v.child;case 9:return z=v.type._context,E=v.pendingProps.children,Hh(v),z=zi(z),E=E(z),v.flags|=1,Fi(x,v,E,S),v.child;case 14:return nD(x,v,v.type,v.pendingProps,S);case 15:return iD(x,v,v.type,v.pendingProps,S);case 19:return pD(x,v,S);case 31:return sQ(x,v,S);case 22:return sD(x,v,S,v.pendingProps);case 24:return Hh(v),E=zi(si),x===null?(z=ej(),z===null&&(z=sn,q=QN(),z.pooledCache=q,q.refCount++,q!==null&&(z.pooledCacheLanes|=S),z=q),v.memoizedState={parent:E,cache:z},aj(v),su(v,si,z)):((x.lanes&S)!==0&&(rj(x,v),fm(v,null,null,S),hm()),z=x.memoizedState,q=v.memoizedState,z.parent!==E?(z={parent:E,cache:E},v.memoizedState=z,v.lanes===0&&(v.memoizedState=v.updateQueue.baseState=z),su(v,si,E)):(E=q.cache,su(v,si,E),E!==z.cache&&KN(v,[si],S,!0))),Fi(x,v,v.pendingProps.children,S),v.child;case 29:throw v.pendingProps}throw Error(r(156,v.tag))}function Kc(x){x.flags|=4}function Bj(x,v,S,E,z){if((v=(x.mode&32)!==0)&&(v=!1),v){if(x.flags|=16777216,(z&335544128)===z)if(x.stateNode.complete)x.flags|=8192;else if(HD())x.flags|=8192;else throw Wh=Kb,tj}else x.flags&=-16777217}function mD(x,v){if(v.type!=="stylesheet"||(v.state.loading&4)!==0)x.flags&=-16777217;else if(x.flags|=16777216,!EI(v))if(HD())x.flags|=8192;else throw Wh=Kb,tj}function p1(x,v){v!==null&&(x.flags|=4),x.flags&16384&&(v=x.tag!==22?cn():536870912,x.lanes|=v,rp|=v)}function bm(x,v){if(!_r)switch(x.tailMode){case"hidden":v=x.tail;for(var S=null;v!==null;)v.alternate!==null&&(S=v),v=v.sibling;S===null?x.tail=null:S.sibling=null;break;case"collapsed":S=x.tail;for(var E=null;S!==null;)S.alternate!==null&&(E=S),S=S.sibling;E===null?v||x.tail===null?x.tail=null:x.tail.sibling=null:E.sibling=null}}function pn(x){var v=x.alternate!==null&&x.alternate.child===x.child,S=0,E=0;if(v)for(var z=x.child;z!==null;)S|=z.lanes|z.childLanes,E|=z.subtreeFlags&65011712,E|=z.flags&65011712,z.return=x,z=z.sibling;else for(z=x.child;z!==null;)S|=z.lanes|z.childLanes,E|=z.subtreeFlags,E|=z.flags,z.return=x,z=z.sibling;return x.subtreeFlags|=E,x.childLanes=S,v}function lQ(x,v,S){var E=v.pendingProps;switch($N(v),v.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(v),null;case 1:return pn(v),null;case 3:return S=v.stateNode,E=null,x!==null&&(E=x.memoizedState.cache),v.memoizedState.cache!==E&&(v.flags|=2048),Yc(si),Ce(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(x===null||x.child===null)&&(G0(v)?Kc(v):x===null||x.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,qN())),pn(v),null;case 26:var z=v.type,q=v.memoizedState;return x===null?(Kc(v),q!==null?(pn(v),mD(v,q)):(pn(v),Bj(v,z,null,E,S))):q?q!==x.memoizedState?(Kc(v),pn(v),mD(v,q)):(pn(v),v.flags&=-16777217):(x=x.memoizedProps,x!==E&&Kc(v),pn(v),Bj(v,z,x,E,S)),null;case 27:if(xe(v),S=ve.current,z=v.type,x!==null&&v.stateNode!=null)x.memoizedProps!==E&&Kc(v);else{if(!E){if(v.stateNode===null)throw Error(r(166));return pn(v),null}x=fe.current,G0(v)?XE(v):(x=NI(z,E,S),v.stateNode=x,Kc(v))}return pn(v),null;case 5:if(xe(v),z=v.type,x!==null&&v.stateNode!=null)x.memoizedProps!==E&&Kc(v);else{if(!E){if(v.stateNode===null)throw Error(r(166));return pn(v),null}if(q=fe.current,G0(v))XE(v);else{var le=T1(ve.current);switch(q){case 1:q=le.createElementNS("http://www.w3.org/2000/svg",z);break;case 2:q=le.createElementNS("http://www.w3.org/1998/Math/MathML",z);break;default:switch(z){case"svg":q=le.createElementNS("http://www.w3.org/2000/svg",z);break;case"math":q=le.createElementNS("http://www.w3.org/1998/Math/MathML",z);break;case"script":q=le.createElement("div"),q.innerHTML="<script><\/script>",q=q.removeChild(q.firstChild);break;case"select":q=typeof E.is=="string"?le.createElement("select",{is:E.is}):le.createElement("select"),E.multiple?q.multiple=!0:E.size&&(q.size=E.size);break;default:q=typeof E.is=="string"?le.createElement(z,{is:E.is}):le.createElement(z)}}q[Et]=v,q[At]=E;e:for(le=v.child;le!==null;){if(le.tag===5||le.tag===6)q.appendChild(le.stateNode);else if(le.tag!==4&&le.tag!==27&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===v)break e;for(;le.sibling===null;){if(le.return===null||le.return===v)break e;le=le.return}le.sibling.return=le.return,le=le.sibling}v.stateNode=q;e:switch(Vi(q,z,E),z){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}E&&Kc(v)}}return pn(v),Bj(v,v.type,x===null?null:x.memoizedProps,v.pendingProps,S),null;case 6:if(x&&v.stateNode!=null)x.memoizedProps!==E&&Kc(v);else{if(typeof E!="string"&&v.stateNode===null)throw Error(r(166));if(x=ve.current,G0(v)){if(x=v.stateNode,S=v.memoizedProps,E=null,z=Bi,z!==null)switch(z.tag){case 27:case 5:E=z.memoizedProps}x[Et]=v,x=!!(x.nodeValue===S||E!==null&&E.suppressHydrationWarning===!0||hI(x.nodeValue,S)),x||iu(v,!0)}else x=T1(x).createTextNode(E),x[Et]=v,v.stateNode=x}return pn(v),null;case 31:if(S=v.memoizedState,x===null||x.memoizedState!==null){if(E=G0(v),S!==null){if(x===null){if(!E)throw Error(r(318));if(x=v.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(557));x[Et]=v}else Fh(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;pn(v),x=!1}else S=qN(),x!==null&&x.memoizedState!==null&&(x.memoizedState.hydrationErrors=S),x=!0;if(!x)return v.flags&256?(lo(v),v):(lo(v),null);if((v.flags&128)!==0)throw Error(r(558))}return pn(v),null;case 13:if(E=v.memoizedState,x===null||x.memoizedState!==null&&x.memoizedState.dehydrated!==null){if(z=G0(v),E!==null&&E.dehydrated!==null){if(x===null){if(!z)throw Error(r(318));if(z=v.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(r(317));z[Et]=v}else Fh(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;pn(v),z=!1}else z=qN(),x!==null&&x.memoizedState!==null&&(x.memoizedState.hydrationErrors=z),z=!0;if(!z)return v.flags&256?(lo(v),v):(lo(v),null)}return lo(v),(v.flags&128)!==0?(v.lanes=S,v):(S=E!==null,x=x!==null&&x.memoizedState!==null,S&&(E=v.child,z=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(z=E.alternate.memoizedState.cachePool.pool),q=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(q=E.memoizedState.cachePool.pool),q!==z&&(E.flags|=2048)),S!==x&&S&&(v.child.flags|=8192),p1(v,v.updateQueue),pn(v),null);case 4:return Ce(),x===null&&sS(v.stateNode.containerInfo),pn(v),null;case 10:return Yc(v.type),pn(v),null;case 19:if(ie(Un),E=v.memoizedState,E===null)return pn(v),null;if(z=(v.flags&128)!==0,q=E.rendering,q===null)if(z)bm(E,!1);else{if(En!==0||x!==null&&(x.flags&128)!==0)for(x=v.child;x!==null;){if(q=t1(x),q!==null){for(v.flags|=128,bm(E,!1),x=q.updateQueue,v.updateQueue=x,p1(v,x),v.subtreeFlags=0,x=S,S=v.child;S!==null;)GE(S,x),S=S.sibling;return de(Un,Un.current&1|2),_r&&Wc(v,E.treeForkCount),v.child}x=x.sibling}E.tail!==null&&Bt()>b1&&(v.flags|=128,z=!0,bm(E,!1),v.lanes=4194304)}else{if(!z)if(x=t1(q),x!==null){if(v.flags|=128,z=!0,x=x.updateQueue,v.updateQueue=x,p1(v,x),bm(E,!0),E.tail===null&&E.tailMode==="hidden"&&!q.alternate&&!_r)return pn(v),null}else 2*Bt()-E.renderingStartTime>b1&&S!==536870912&&(v.flags|=128,z=!0,bm(E,!1),v.lanes=4194304);E.isBackwards?(q.sibling=v.child,v.child=q):(x=E.last,x!==null?x.sibling=q:v.child=q,E.last=q)}return E.tail!==null?(x=E.tail,E.rendering=x,E.tail=x.sibling,E.renderingStartTime=Bt(),x.sibling=null,S=Un.current,de(Un,z?S&1|2:S&1),_r&&Wc(v,E.treeForkCount),x):(pn(v),null);case 22:case 23:return lo(v),oj(),E=v.memoizedState!==null,x!==null?x.memoizedState!==null!==E&&(v.flags|=8192):E&&(v.flags|=8192),E?(S&536870912)!==0&&(v.flags&128)===0&&(pn(v),v.subtreeFlags&6&&(v.flags|=8192)):pn(v),S=v.updateQueue,S!==null&&p1(v,S.retryQueue),S=null,x!==null&&x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(S=x.memoizedState.cachePool.pool),E=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(E=v.memoizedState.cachePool.pool),E!==S&&(v.flags|=2048),x!==null&&ie(Uh),null;case 24:return S=null,x!==null&&(S=x.memoizedState.cache),v.memoizedState.cache!==S&&(v.flags|=2048),Yc(si),pn(v),null;case 25:return null;case 30:return null}throw Error(r(156,v.tag))}function cQ(x,v){switch($N(v),v.tag){case 1:return x=v.flags,x&65536?(v.flags=x&-65537|128,v):null;case 3:return Yc(si),Ce(),x=v.flags,(x&65536)!==0&&(x&128)===0?(v.flags=x&-65537|128,v):null;case 26:case 27:case 5:return xe(v),null;case 31:if(v.memoizedState!==null){if(lo(v),v.alternate===null)throw Error(r(340));Fh()}return x=v.flags,x&65536?(v.flags=x&-65537|128,v):null;case 13:if(lo(v),x=v.memoizedState,x!==null&&x.dehydrated!==null){if(v.alternate===null)throw Error(r(340));Fh()}return x=v.flags,x&65536?(v.flags=x&-65537|128,v):null;case 19:return ie(Un),null;case 4:return Ce(),null;case 10:return Yc(v.type),null;case 22:case 23:return lo(v),oj(),x!==null&&ie(Uh),x=v.flags,x&65536?(v.flags=x&-65537|128,v):null;case 24:return Yc(si),null;case 25:return null;default:return null}}function gD(x,v){switch($N(v),v.tag){case 3:Yc(si),Ce();break;case 26:case 27:case 5:xe(v);break;case 4:Ce();break;case 31:v.memoizedState!==null&&lo(v);break;case 13:lo(v);break;case 19:ie(Un);break;case 10:Yc(v.type);break;case 22:case 23:lo(v),oj(),x!==null&&ie(Uh);break;case 24:Yc(si)}}function ym(x,v){try{var S=v.updateQueue,E=S!==null?S.lastEffect:null;if(E!==null){var z=E.next;S=z;do{if((S.tag&x)===x){E=void 0;var q=S.create,le=S.inst;E=q(),le.destroy=E}S=S.next}while(S!==z)}}catch(me){$r(v,v.return,me)}}function hu(x,v,S){try{var E=v.updateQueue,z=E!==null?E.lastEffect:null;if(z!==null){var q=z.next;E=q;do{if((E.tag&x)===x){var le=E.inst,me=le.destroy;if(me!==void 0){le.destroy=void 0,z=v;var De=S,Qe=me;try{Qe()}catch(ct){$r(z,De,ct)}}}E=E.next}while(E!==q)}}catch(ct){$r(v,v.return,ct)}}function vD(x){var v=x.updateQueue;if(v!==null){var S=x.stateNode;try{l6(v,S)}catch(E){$r(x,x.return,E)}}}function bD(x,v,S){S.props=qh(x.type,x.memoizedProps),S.state=x.memoizedState;try{S.componentWillUnmount()}catch(E){$r(x,v,E)}}function wm(x,v){try{var S=x.ref;if(S!==null){switch(x.tag){case 26:case 27:case 5:var E=x.stateNode;break;case 30:E=x.stateNode;break;default:E=x.stateNode}typeof S=="function"?x.refCleanup=S(E):S.current=E}}catch(z){$r(x,v,z)}}function $l(x,v){var S=x.ref,E=x.refCleanup;if(S!==null)if(typeof E=="function")try{E()}catch(z){$r(x,v,z)}finally{x.refCleanup=null,x=x.alternate,x!=null&&(x.refCleanup=null)}else if(typeof S=="function")try{S(null)}catch(z){$r(x,v,z)}else S.current=null}function yD(x){var v=x.type,S=x.memoizedProps,E=x.stateNode;try{e:switch(v){case"button":case"input":case"select":case"textarea":S.autoFocus&&E.focus();break e;case"img":S.src?E.src=S.src:S.srcSet&&(E.srcset=S.srcSet)}}catch(z){$r(x,x.return,z)}}function zj(x,v,S){try{var E=x.stateNode;EQ(E,x.type,S,v),E[At]=v}catch(z){$r(x,x.return,z)}}function wD(x){return x.tag===5||x.tag===3||x.tag===26||x.tag===27&&bu(x.type)||x.tag===4}function Fj(x){e:for(;;){for(;x.sibling===null;){if(x.return===null||wD(x.return))return null;x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.tag===27&&bu(x.type)||x.flags&2||x.child===null||x.tag===4)continue e;x.child.return=x,x=x.child}if(!(x.flags&2))return x.stateNode}}function Vj(x,v,S){var E=x.tag;if(E===5||E===6)x=x.stateNode,v?(S.nodeType===9?S.body:S.nodeName==="HTML"?S.ownerDocument.body:S).insertBefore(x,v):(v=S.nodeType===9?S.body:S.nodeName==="HTML"?S.ownerDocument.body:S,v.appendChild(x),S=S._reactRootContainer,S!=null||v.onclick!==null||(v.onclick=gi));else if(E!==4&&(E===27&&bu(x.type)&&(S=x.stateNode,v=null),x=x.child,x!==null))for(Vj(x,v,S),x=x.sibling;x!==null;)Vj(x,v,S),x=x.sibling}function x1(x,v,S){var E=x.tag;if(E===5||E===6)x=x.stateNode,v?S.insertBefore(x,v):S.appendChild(x);else if(E!==4&&(E===27&&bu(x.type)&&(S=x.stateNode),x=x.child,x!==null))for(x1(x,v,S),x=x.sibling;x!==null;)x1(x,v,S),x=x.sibling}function _D(x){var v=x.stateNode,S=x.memoizedProps;try{for(var E=x.type,z=v.attributes;z.length;)v.removeAttributeNode(z[0]);Vi(v,E,S),v[Et]=x,v[At]=S}catch(q){$r(x,x.return,q)}}var Qc=!1,ci=!1,Hj=!1,ND=typeof WeakSet=="function"?WeakSet:Set,Ai=null;function dQ(x,v){if(x=x.containerInfo,cS=O1,x=Y(x),te(x)){if("selectionStart"in x)var S={start:x.selectionStart,end:x.selectionEnd};else e:{S=(S=x.ownerDocument)&&S.defaultView||window;var E=S.getSelection&&S.getSelection();if(E&&E.rangeCount!==0){S=E.anchorNode;var z=E.anchorOffset,q=E.focusNode;E=E.focusOffset;try{S.nodeType,q.nodeType}catch{S=null;break e}var le=0,me=-1,De=-1,Qe=0,ct=0,mt=x,tt=null;t:for(;;){for(var nt;mt!==S||z!==0&&mt.nodeType!==3||(me=le+z),mt!==q||E!==0&&mt.nodeType!==3||(De=le+E),mt.nodeType===3&&(le+=mt.nodeValue.length),(nt=mt.firstChild)!==null;)tt=mt,mt=nt;for(;;){if(mt===x)break t;if(tt===S&&++Qe===z&&(me=le),tt===q&&++ct===E&&(De=le),(nt=mt.nextSibling)!==null)break;mt=tt,tt=mt.parentNode}mt=nt}S=me===-1||De===-1?null:{start:me,end:De}}else S=null}S=S||{start:0,end:0}}else S=null;for(dS={focusedElem:x,selectionRange:S},O1=!1,Ai=v;Ai!==null;)if(v=Ai,x=v.child,(v.subtreeFlags&1028)!==0&&x!==null)x.return=v,Ai=x;else for(;Ai!==null;){switch(v=Ai,q=v.alternate,x=v.flags,v.tag){case 0:if((x&4)!==0&&(x=v.updateQueue,x=x!==null?x.events:null,x!==null))for(S=0;S<x.length;S++)z=x[S],z.ref.impl=z.nextImpl;break;case 11:case 15:break;case 1:if((x&1024)!==0&&q!==null){x=void 0,S=v,z=q.memoizedProps,q=q.memoizedState,E=S.stateNode;try{var ia=qh(S.type,z);x=E.getSnapshotBeforeUpdate(ia,q),E.__reactInternalSnapshotBeforeUpdate=x}catch(Aa){$r(S,S.return,Aa)}}break;case 3:if((x&1024)!==0){if(x=v.stateNode.containerInfo,S=x.nodeType,S===9)fS(x);else if(S===1)switch(x.nodeName){case"HEAD":case"HTML":case"BODY":fS(x);break;default:x.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((x&1024)!==0)throw Error(r(163))}if(x=v.sibling,x!==null){x.return=v.return,Ai=x;break}Ai=v.return}}function jD(x,v,S){var E=S.flags;switch(S.tag){case 0:case 11:case 15:ed(x,S),E&4&&ym(5,S);break;case 1:if(ed(x,S),E&4)if(x=S.stateNode,v===null)try{x.componentDidMount()}catch(le){$r(S,S.return,le)}else{var z=qh(S.type,v.memoizedProps);v=v.memoizedState;try{x.componentDidUpdate(z,v,x.__reactInternalSnapshotBeforeUpdate)}catch(le){$r(S,S.return,le)}}E&64&&vD(S),E&512&&wm(S,S.return);break;case 3:if(ed(x,S),E&64&&(x=S.updateQueue,x!==null)){if(v=null,S.child!==null)switch(S.child.tag){case 27:case 5:v=S.child.stateNode;break;case 1:v=S.child.stateNode}try{l6(x,v)}catch(le){$r(S,S.return,le)}}break;case 27:v===null&&E&4&&_D(S);case 26:case 5:ed(x,S),v===null&&E&4&&yD(S),E&512&&wm(S,S.return);break;case 12:ed(x,S);break;case 31:ed(x,S),E&4&&CD(x,S);break;case 13:ed(x,S),E&4&&AD(x,S),E&64&&(x=S.memoizedState,x!==null&&(x=x.dehydrated,x!==null&&(S=bQ.bind(null,S),zQ(x,S))));break;case 22:if(E=S.memoizedState!==null||Qc,!E){v=v!==null&&v.memoizedState!==null||ci,z=Qc;var q=ci;Qc=E,(ci=v)&&!q?td(x,S,(S.subtreeFlags&8772)!==0):ed(x,S),Qc=z,ci=q}break;case 30:break;default:ed(x,S)}}function SD(x){var v=x.alternate;v!==null&&(x.alternate=null,SD(v)),x.child=null,x.deletions=null,x.sibling=null,x.tag===5&&(v=x.stateNode,v!==null&&pr(v)),x.stateNode=null,x.return=null,x.dependencies=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.stateNode=null,x.updateQueue=null}var vn=null,Os=!1;function Jc(x,v,S){for(S=S.child;S!==null;)kD(x,v,S),S=S.sibling}function kD(x,v,S){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(Tt,S)}catch{}switch(S.tag){case 26:ci||$l(S,v),Jc(x,v,S),S.memoizedState?S.memoizedState.count--:S.stateNode&&(S=S.stateNode,S.parentNode.removeChild(S));break;case 27:ci||$l(S,v);var E=vn,z=Os;bu(S.type)&&(vn=S.stateNode,Os=!1),Jc(x,v,S),Mm(S.stateNode),vn=E,Os=z;break;case 5:ci||$l(S,v);case 6:if(E=vn,z=Os,vn=null,Jc(x,v,S),vn=E,Os=z,vn!==null)if(Os)try{(vn.nodeType===9?vn.body:vn.nodeName==="HTML"?vn.ownerDocument.body:vn).removeChild(S.stateNode)}catch(q){$r(S,v,q)}else try{vn.removeChild(S.stateNode)}catch(q){$r(S,v,q)}break;case 18:vn!==null&&(Os?(x=vn,vI(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,S.stateNode),up(x)):vI(vn,S.stateNode));break;case 4:E=vn,z=Os,vn=S.stateNode.containerInfo,Os=!0,Jc(x,v,S),vn=E,Os=z;break;case 0:case 11:case 14:case 15:hu(2,S,v),ci||hu(4,S,v),Jc(x,v,S);break;case 1:ci||($l(S,v),E=S.stateNode,typeof E.componentWillUnmount=="function"&&bD(S,v,E)),Jc(x,v,S);break;case 21:Jc(x,v,S);break;case 22:ci=(E=ci)||S.memoizedState!==null,Jc(x,v,S),ci=E;break;default:Jc(x,v,S)}}function CD(x,v){if(v.memoizedState===null&&(x=v.alternate,x!==null&&(x=x.memoizedState,x!==null))){x=x.dehydrated;try{up(x)}catch(S){$r(v,v.return,S)}}}function AD(x,v){if(v.memoizedState===null&&(x=v.alternate,x!==null&&(x=x.memoizedState,x!==null&&(x=x.dehydrated,x!==null))))try{up(x)}catch(S){$r(v,v.return,S)}}function uQ(x){switch(x.tag){case 31:case 13:case 19:var v=x.stateNode;return v===null&&(v=x.stateNode=new ND),v;case 22:return x=x.stateNode,v=x._retryCache,v===null&&(v=x._retryCache=new ND),v;default:throw Error(r(435,x.tag))}}function m1(x,v){var S=uQ(x);v.forEach(function(E){if(!S.has(E)){S.add(E);var z=yQ.bind(null,x,E);E.then(z,z)}})}function Ps(x,v){var S=v.deletions;if(S!==null)for(var E=0;E<S.length;E++){var z=S[E],q=x,le=v,me=le;e:for(;me!==null;){switch(me.tag){case 27:if(bu(me.type)){vn=me.stateNode,Os=!1;break e}break;case 5:vn=me.stateNode,Os=!1;break e;case 3:case 4:vn=me.stateNode.containerInfo,Os=!0;break e}me=me.return}if(vn===null)throw Error(r(160));kD(q,le,z),vn=null,Os=!1,q=z.alternate,q!==null&&(q.return=null),z.return=null}if(v.subtreeFlags&13886)for(v=v.child;v!==null;)TD(v,x),v=v.sibling}var hl=null;function TD(x,v){var S=x.alternate,E=x.flags;switch(x.tag){case 0:case 11:case 14:case 15:Ps(v,x),Bs(x),E&4&&(hu(3,x,x.return),ym(3,x),hu(5,x,x.return));break;case 1:Ps(v,x),Bs(x),E&512&&(ci||S===null||$l(S,S.return)),E&64&&Qc&&(x=x.updateQueue,x!==null&&(E=x.callbacks,E!==null&&(S=x.shared.hiddenCallbacks,x.shared.hiddenCallbacks=S===null?E:S.concat(E))));break;case 26:var z=hl;if(Ps(v,x),Bs(x),E&512&&(ci||S===null||$l(S,S.return)),E&4){var q=S!==null?S.memoizedState:null;if(E=x.memoizedState,S===null)if(E===null)if(x.stateNode===null){e:{E=x.type,S=x.memoizedProps,z=z.ownerDocument||z;t:switch(E){case"title":q=z.getElementsByTagName("title")[0],(!q||q[Nr]||q[Et]||q.namespaceURI==="http://www.w3.org/2000/svg"||q.hasAttribute("itemprop"))&&(q=z.createElement(E),z.head.insertBefore(q,z.querySelector("head > title"))),Vi(q,E,S),q[Et]=x,Er(q),E=q;break e;case"link":var le=TI("link","href",z).get(E+(S.href||""));if(le){for(var me=0;me<le.length;me++)if(q=le[me],q.getAttribute("href")===(S.href==null||S.href===""?null:S.href)&&q.getAttribute("rel")===(S.rel==null?null:S.rel)&&q.getAttribute("title")===(S.title==null?null:S.title)&&q.getAttribute("crossorigin")===(S.crossOrigin==null?null:S.crossOrigin)){le.splice(me,1);break t}}q=z.createElement(E),Vi(q,E,S),z.head.appendChild(q);break;case"meta":if(le=TI("meta","content",z).get(E+(S.content||""))){for(me=0;me<le.length;me++)if(q=le[me],q.getAttribute("content")===(S.content==null?null:""+S.content)&&q.getAttribute("name")===(S.name==null?null:S.name)&&q.getAttribute("property")===(S.property==null?null:S.property)&&q.getAttribute("http-equiv")===(S.httpEquiv==null?null:S.httpEquiv)&&q.getAttribute("charset")===(S.charSet==null?null:S.charSet)){le.splice(me,1);break t}}q=z.createElement(E),Vi(q,E,S),z.head.appendChild(q);break;default:throw Error(r(468,E))}q[Et]=x,Er(q),E=q}x.stateNode=E}else MI(z,x.type,x.stateNode);else x.stateNode=AI(z,E,x.memoizedProps);else q!==E?(q===null?S.stateNode!==null&&(S=S.stateNode,S.parentNode.removeChild(S)):q.count--,E===null?MI(z,x.type,x.stateNode):AI(z,E,x.memoizedProps)):E===null&&x.stateNode!==null&&zj(x,x.memoizedProps,S.memoizedProps)}break;case 27:Ps(v,x),Bs(x),E&512&&(ci||S===null||$l(S,S.return)),S!==null&&E&4&&zj(x,x.memoizedProps,S.memoizedProps);break;case 5:if(Ps(v,x),Bs(x),E&512&&(ci||S===null||$l(S,S.return)),x.flags&32){z=x.stateNode;try{ol(z,"")}catch(ia){$r(x,x.return,ia)}}E&4&&x.stateNode!=null&&(z=x.memoizedProps,zj(x,z,S!==null?S.memoizedProps:z)),E&1024&&(Hj=!0);break;case 6:if(Ps(v,x),Bs(x),E&4){if(x.stateNode===null)throw Error(r(162));E=x.memoizedProps,S=x.stateNode;try{S.nodeValue=E}catch(ia){$r(x,x.return,ia)}}break;case 3:if(D1=null,z=hl,hl=M1(v.containerInfo),Ps(v,x),hl=z,Bs(x),E&4&&S!==null&&S.memoizedState.isDehydrated)try{up(v.containerInfo)}catch(ia){$r(x,x.return,ia)}Hj&&(Hj=!1,MD(x));break;case 4:E=hl,hl=M1(x.stateNode.containerInfo),Ps(v,x),Bs(x),hl=E;break;case 12:Ps(v,x),Bs(x);break;case 31:Ps(v,x),Bs(x),E&4&&(E=x.updateQueue,E!==null&&(x.updateQueue=null,m1(x,E)));break;case 13:Ps(v,x),Bs(x),x.child.flags&8192&&x.memoizedState!==null!=(S!==null&&S.memoizedState!==null)&&(v1=Bt()),E&4&&(E=x.updateQueue,E!==null&&(x.updateQueue=null,m1(x,E)));break;case 22:z=x.memoizedState!==null;var De=S!==null&&S.memoizedState!==null,Qe=Qc,ct=ci;if(Qc=Qe||z,ci=ct||De,Ps(v,x),ci=ct,Qc=Qe,Bs(x),E&8192)e:for(v=x.stateNode,v._visibility=z?v._visibility&-2:v._visibility|1,z&&(S===null||De||Qc||ci||Xh(x)),S=null,v=x;;){if(v.tag===5||v.tag===26){if(S===null){De=S=v;try{if(q=De.stateNode,z)le=q.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{me=De.stateNode;var mt=De.memoizedProps.style,tt=mt!=null&&mt.hasOwnProperty("display")?mt.display:null;me.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(ia){$r(De,De.return,ia)}}}else if(v.tag===6){if(S===null){De=v;try{De.stateNode.nodeValue=z?"":De.memoizedProps}catch(ia){$r(De,De.return,ia)}}}else if(v.tag===18){if(S===null){De=v;try{var nt=De.stateNode;z?bI(nt,!0):bI(De.stateNode,!1)}catch(ia){$r(De,De.return,ia)}}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===x)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===x)break e;for(;v.sibling===null;){if(v.return===null||v.return===x)break e;S===v&&(S=null),v=v.return}S===v&&(S=null),v.sibling.return=v.return,v=v.sibling}E&4&&(E=x.updateQueue,E!==null&&(S=E.retryQueue,S!==null&&(E.retryQueue=null,m1(x,S))));break;case 19:Ps(v,x),Bs(x),E&4&&(E=x.updateQueue,E!==null&&(x.updateQueue=null,m1(x,E)));break;case 30:break;case 21:break;default:Ps(v,x),Bs(x)}}function Bs(x){var v=x.flags;if(v&2){try{for(var S,E=x.return;E!==null;){if(wD(E)){S=E;break}E=E.return}if(S==null)throw Error(r(160));switch(S.tag){case 27:var z=S.stateNode,q=Fj(x);x1(x,q,z);break;case 5:var le=S.stateNode;S.flags&32&&(ol(le,""),S.flags&=-33);var me=Fj(x);x1(x,me,le);break;case 3:case 4:var De=S.stateNode.containerInfo,Qe=Fj(x);Vj(x,Qe,De);break;default:throw Error(r(161))}}catch(ct){$r(x,x.return,ct)}x.flags&=-3}v&4096&&(x.flags&=-4097)}function MD(x){if(x.subtreeFlags&1024)for(x=x.child;x!==null;){var v=x;MD(v),v.tag===5&&v.flags&1024&&v.stateNode.reset(),x=x.sibling}}function ed(x,v){if(v.subtreeFlags&8772)for(v=v.child;v!==null;)jD(x,v.alternate,v),v=v.sibling}function Xh(x){for(x=x.child;x!==null;){var v=x;switch(v.tag){case 0:case 11:case 14:case 15:hu(4,v,v.return),Xh(v);break;case 1:$l(v,v.return);var S=v.stateNode;typeof S.componentWillUnmount=="function"&&bD(v,v.return,S),Xh(v);break;case 27:Mm(v.stateNode);case 26:case 5:$l(v,v.return),Xh(v);break;case 22:v.memoizedState===null&&Xh(v);break;case 30:Xh(v);break;default:Xh(v)}x=x.sibling}}function td(x,v,S){for(S=S&&(v.subtreeFlags&8772)!==0,v=v.child;v!==null;){var E=v.alternate,z=x,q=v,le=q.flags;switch(q.tag){case 0:case 11:case 15:td(z,q,S),ym(4,q);break;case 1:if(td(z,q,S),E=q,z=E.stateNode,typeof z.componentDidMount=="function")try{z.componentDidMount()}catch(Qe){$r(E,E.return,Qe)}if(E=q,z=E.updateQueue,z!==null){var me=E.stateNode;try{var De=z.shared.hiddenCallbacks;if(De!==null)for(z.shared.hiddenCallbacks=null,z=0;z<De.length;z++)o6(De[z],me)}catch(Qe){$r(E,E.return,Qe)}}S&&le&64&&vD(q),wm(q,q.return);break;case 27:_D(q);case 26:case 5:td(z,q,S),S&&E===null&&le&4&&yD(q),wm(q,q.return);break;case 12:td(z,q,S);break;case 31:td(z,q,S),S&&le&4&&CD(z,q);break;case 13:td(z,q,S),S&&le&4&&AD(z,q);break;case 22:q.memoizedState===null&&td(z,q,S),wm(q,q.return);break;case 30:break;default:td(z,q,S)}v=v.sibling}}function Uj(x,v){var S=null;x!==null&&x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(S=x.memoizedState.cachePool.pool),x=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(x=v.memoizedState.cachePool.pool),x!==S&&(x!=null&&x.refCount++,S!=null&&om(S))}function Gj(x,v){x=null,v.alternate!==null&&(x=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==x&&(v.refCount++,x!=null&&om(x))}function fl(x,v,S,E){if(v.subtreeFlags&10256)for(v=v.child;v!==null;)ED(x,v,S,E),v=v.sibling}function ED(x,v,S,E){var z=v.flags;switch(v.tag){case 0:case 11:case 15:fl(x,v,S,E),z&2048&&ym(9,v);break;case 1:fl(x,v,S,E);break;case 3:fl(x,v,S,E),z&2048&&(x=null,v.alternate!==null&&(x=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==x&&(v.refCount++,x!=null&&om(x)));break;case 12:if(z&2048){fl(x,v,S,E),x=v.stateNode;try{var q=v.memoizedProps,le=q.id,me=q.onPostCommit;typeof me=="function"&&me(le,v.alternate===null?"mount":"update",x.passiveEffectDuration,-0)}catch(De){$r(v,v.return,De)}}else fl(x,v,S,E);break;case 31:fl(x,v,S,E);break;case 13:fl(x,v,S,E);break;case 23:break;case 22:q=v.stateNode,le=v.alternate,v.memoizedState!==null?q._visibility&2?fl(x,v,S,E):_m(x,v):q._visibility&2?fl(x,v,S,E):(q._visibility|=2,ep(x,v,S,E,(v.subtreeFlags&10256)!==0||!1)),z&2048&&Uj(le,v);break;case 24:fl(x,v,S,E),z&2048&&Gj(v.alternate,v);break;default:fl(x,v,S,E)}}function ep(x,v,S,E,z){for(z=z&&((v.subtreeFlags&10256)!==0||!1),v=v.child;v!==null;){var q=x,le=v,me=S,De=E,Qe=le.flags;switch(le.tag){case 0:case 11:case 15:ep(q,le,me,De,z),ym(8,le);break;case 23:break;case 22:var ct=le.stateNode;le.memoizedState!==null?ct._visibility&2?ep(q,le,me,De,z):_m(q,le):(ct._visibility|=2,ep(q,le,me,De,z)),z&&Qe&2048&&Uj(le.alternate,le);break;case 24:ep(q,le,me,De,z),z&&Qe&2048&&Gj(le.alternate,le);break;default:ep(q,le,me,De,z)}v=v.sibling}}function _m(x,v){if(v.subtreeFlags&10256)for(v=v.child;v!==null;){var S=x,E=v,z=E.flags;switch(E.tag){case 22:_m(S,E),z&2048&&Uj(E.alternate,E);break;case 24:_m(S,E),z&2048&&Gj(E.alternate,E);break;default:_m(S,E)}v=v.sibling}}var Nm=8192;function tp(x,v,S){if(x.subtreeFlags&Nm)for(x=x.child;x!==null;)DD(x,v,S),x=x.sibling}function DD(x,v,S){switch(x.tag){case 26:tp(x,v,S),x.flags&Nm&&x.memoizedState!==null&&KQ(S,hl,x.memoizedState,x.memoizedProps);break;case 5:tp(x,v,S);break;case 3:case 4:var E=hl;hl=M1(x.stateNode.containerInfo),tp(x,v,S),hl=E;break;case 22:x.memoizedState===null&&(E=x.alternate,E!==null&&E.memoizedState!==null?(E=Nm,Nm=16777216,tp(x,v,S),Nm=E):tp(x,v,S));break;default:tp(x,v,S)}}function ID(x){var v=x.alternate;if(v!==null&&(x=v.child,x!==null)){v.child=null;do v=x.sibling,x.sibling=null,x=v;while(x!==null)}}function jm(x){var v=x.deletions;if((x.flags&16)!==0){if(v!==null)for(var S=0;S<v.length;S++){var E=v[S];Ai=E,LD(E,x)}ID(x)}if(x.subtreeFlags&10256)for(x=x.child;x!==null;)RD(x),x=x.sibling}function RD(x){switch(x.tag){case 0:case 11:case 15:jm(x),x.flags&2048&&hu(9,x,x.return);break;case 3:jm(x);break;case 12:jm(x);break;case 22:var v=x.stateNode;x.memoizedState!==null&&v._visibility&2&&(x.return===null||x.return.tag!==13)?(v._visibility&=-3,g1(x)):jm(x);break;default:jm(x)}}function g1(x){var v=x.deletions;if((x.flags&16)!==0){if(v!==null)for(var S=0;S<v.length;S++){var E=v[S];Ai=E,LD(E,x)}ID(x)}for(x=x.child;x!==null;){switch(v=x,v.tag){case 0:case 11:case 15:hu(8,v,v.return),g1(v);break;case 22:S=v.stateNode,S._visibility&2&&(S._visibility&=-3,g1(v));break;default:g1(v)}x=x.sibling}}function LD(x,v){for(;Ai!==null;){var S=Ai;switch(S.tag){case 0:case 11:case 15:hu(8,S,v);break;case 23:case 22:if(S.memoizedState!==null&&S.memoizedState.cachePool!==null){var E=S.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:om(S.memoizedState.cache)}if(E=S.child,E!==null)E.return=S,Ai=E;else e:for(S=x;Ai!==null;){E=Ai;var z=E.sibling,q=E.return;if(SD(E),E===S){Ai=null;break e}if(z!==null){z.return=q,Ai=z;break e}Ai=q}}}var hQ={getCacheForType:function(x){var v=zi(si),S=v.data.get(x);return S===void 0&&(S=x(),v.data.set(x,S)),S},cacheSignal:function(){return zi(si).controller.signal}},fQ=typeof WeakMap=="function"?WeakMap:Map,Ir=0,sn=null,lr=null,mr=0,Wr=0,co=null,fu=!1,ap=!1,Wj=!1,ad=0,En=0,pu=0,Zh=0,$j=0,uo=0,rp=0,Sm=null,zs=null,Yj=!1,v1=0,OD=0,b1=1/0,y1=null,xu=null,vi=0,mu=null,np=null,rd=0,qj=0,Xj=null,PD=null,km=0,Zj=null;function ho(){return(Ir&2)!==0&&mr!==0?mr&-mr:W.T!==null?aS():wt()}function BD(){if(uo===0)if((mr&536870912)===0||_r){var x=Ya;Ya<<=1,(Ya&3932160)===0&&(Ya=262144),uo=x}else uo=536870912;return x=oo.current,x!==null&&(x.flags|=32),uo}function Fs(x,v,S){(x===sn&&(Wr===2||Wr===9)||x.cancelPendingCommit!==null)&&(ip(x,0),gu(x,mr,uo,!1)),ai(x,S),((Ir&2)===0||x!==sn)&&(x===sn&&((Ir&2)===0&&(Zh|=S),En===4&&gu(x,mr,uo,!1)),Yl(x))}function zD(x,v,S){if((Ir&6)!==0)throw Error(r(327));var E=!S&&(v&127)===0&&(v&x.expiredLanes)===0||_n(x,v),z=E?mQ(x,v):Qj(x,v,!0),q=E;do{if(z===0){ap&&!E&&gu(x,v,0,!1);break}else{if(S=x.current.alternate,q&&!pQ(S)){z=Qj(x,v,!1),q=!1;continue}if(z===2){if(q=v,x.errorRecoveryDisabledLanes&q)var le=0;else le=x.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){v=le;e:{var me=x;z=Sm;var De=me.current.memoizedState.isDehydrated;if(De&&(ip(me,le).flags|=256),le=Qj(me,le,!1),le!==2){if(Wj&&!De){me.errorRecoveryDisabledLanes|=q,Zh|=q,z=4;break e}q=zs,zs=z,q!==null&&(zs===null?zs=q:zs.push.apply(zs,q))}z=le}if(q=!1,z!==2)continue}}if(z===1){ip(x,0),gu(x,v,0,!0);break}e:{switch(E=x,q=z,q){case 0:case 1:throw Error(r(345));case 4:if((v&4194048)!==v)break;case 6:gu(E,v,uo,!fu);break e;case 2:zs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((v&62914560)===v&&(z=v1+300-Bt(),10<z)){if(gu(E,v,uo,!fu),Ks(E,0,!0)!==0)break e;rd=v,E.timeoutHandle=mI(FD.bind(null,E,S,zs,y1,Yj,v,uo,Zh,rp,fu,q,"Throttled",-0,0),z);break e}FD(E,S,zs,y1,Yj,v,uo,Zh,rp,fu,q,null,-0,0)}}break}while(!0);Yl(x)}function FD(x,v,S,E,z,q,le,me,De,Qe,ct,mt,tt,nt){if(x.timeoutHandle=-1,mt=v.subtreeFlags,mt&8192||(mt&16785408)===16785408){mt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gi},DD(v,q,mt);var ia=(q&62914560)===q?v1-Bt():(q&4194048)===q?OD-Bt():0;if(ia=QQ(mt,ia),ia!==null){rd=q,x.cancelPendingCommit=ia(qD.bind(null,x,v,q,S,E,z,le,me,De,ct,mt,null,tt,nt)),gu(x,q,le,!Qe);return}}qD(x,v,q,S,E,z,le,me,De)}function pQ(x){for(var v=x;;){var S=v.tag;if((S===0||S===11||S===15)&&v.flags&16384&&(S=v.updateQueue,S!==null&&(S=S.stores,S!==null)))for(var E=0;E<S.length;E++){var z=S[E],q=z.getSnapshot;z=z.value;try{if(!R(q(),z))return!1}catch{return!1}}if(S=v.child,v.subtreeFlags&16384&&S!==null)S.return=v,v=S;else{if(v===x)break;for(;v.sibling===null;){if(v.return===null||v.return===x)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function gu(x,v,S,E){v&=~$j,v&=~Zh,x.suspendedLanes|=v,x.pingedLanes&=~v,E&&(x.warmLanes|=v),E=x.expirationTimes;for(var z=v;0<z;){var q=31-xt(z),le=1<<q;E[q]=-1,z&=~le}S!==0&&sl(x,S,v)}function w1(){return(Ir&6)===0?(Cm(0),!1):!0}function Kj(){if(lr!==null){if(Wr===0)var x=lr.return;else x=lr,$c=Vh=null,fj(x),X0=null,cm=0,x=lr;for(;x!==null;)gD(x.alternate,x),x=x.return;lr=null}}function ip(x,v){var S=x.timeoutHandle;S!==-1&&(x.timeoutHandle=-1,RQ(S)),S=x.cancelPendingCommit,S!==null&&(x.cancelPendingCommit=null,S()),rd=0,Kj(),sn=x,lr=S=Gc(x.current,null),mr=v,Wr=0,co=null,fu=!1,ap=_n(x,v),Wj=!1,rp=uo=$j=Zh=pu=En=0,zs=Sm=null,Yj=!1,(v&8)!==0&&(v|=v&32);var E=x.entangledLanes;if(E!==0)for(x=x.entanglements,E&=v;0<E;){var z=31-xt(E),q=1<<z;v|=x[z],E&=~q}return ad=v,Ga(),S}function VD(x,v){Ka=null,W.H=gm,v===q0||v===Zb?(v=r6(),Wr=3):v===tj?(v=r6(),Wr=4):Wr=v===Tj?8:v!==null&&typeof v=="object"&&typeof v.then=="function"?6:1,co=v,lr===null&&(En=1,d1(x,Do(v,x.current)))}function HD(){var x=oo.current;return x===null?!0:(mr&4194048)===mr?Oo===null:(mr&62914560)===mr||(mr&536870912)!==0?x===Oo:!1}function UD(){var x=W.H;return W.H=gm,x===null?gm:x}function GD(){var x=W.A;return W.A=hQ,x}function _1(){En=4,fu||(mr&4194048)!==mr&&oo.current!==null||(ap=!0),(pu&134217727)===0&&(Zh&134217727)===0||sn===null||gu(sn,mr,uo,!1)}function Qj(x,v,S){var E=Ir;Ir|=2;var z=UD(),q=GD();(sn!==x||mr!==v)&&(y1=null,ip(x,v)),v=!1;var le=En;e:do try{if(Wr!==0&&lr!==null){var me=lr,De=co;switch(Wr){case 8:Kj(),le=6;break e;case 3:case 2:case 9:case 6:oo.current===null&&(v=!0);var Qe=Wr;if(Wr=0,co=null,sp(x,me,De,Qe),S&&ap){le=0;break e}break;default:Qe=Wr,Wr=0,co=null,sp(x,me,De,Qe)}}xQ(),le=En;break}catch(ct){VD(x,ct)}while(!0);return v&&x.shellSuspendCounter++,$c=Vh=null,Ir=E,W.H=z,W.A=q,lr===null&&(sn=null,mr=0,Ga()),le}function xQ(){for(;lr!==null;)WD(lr)}function mQ(x,v){var S=Ir;Ir|=2;var E=UD(),z=GD();sn!==x||mr!==v?(y1=null,b1=Bt()+500,ip(x,v)):ap=_n(x,v);e:do try{if(Wr!==0&&lr!==null){v=lr;var q=co;t:switch(Wr){case 1:Wr=0,co=null,sp(x,v,q,1);break;case 2:case 9:if(t6(q)){Wr=0,co=null,$D(v);break}v=function(){Wr!==2&&Wr!==9||sn!==x||(Wr=7),Yl(x)},q.then(v,v);break e;case 3:Wr=7;break e;case 4:Wr=5;break e;case 7:t6(q)?(Wr=0,co=null,$D(v)):(Wr=0,co=null,sp(x,v,q,7));break;case 5:var le=null;switch(lr.tag){case 26:le=lr.memoizedState;case 5:case 27:var me=lr;if(le?EI(le):me.stateNode.complete){Wr=0,co=null;var De=me.sibling;if(De!==null)lr=De;else{var Qe=me.return;Qe!==null?(lr=Qe,N1(Qe)):lr=null}break t}}Wr=0,co=null,sp(x,v,q,5);break;case 6:Wr=0,co=null,sp(x,v,q,6);break;case 8:Kj(),En=6;break e;default:throw Error(r(462))}}gQ();break}catch(ct){VD(x,ct)}while(!0);return $c=Vh=null,W.H=E,W.A=z,Ir=S,lr!==null?0:(sn=null,mr=0,Ga(),En)}function gQ(){for(;lr!==null&&!Ht();)WD(lr)}function WD(x){var v=xD(x.alternate,x,ad);x.memoizedProps=x.pendingProps,v===null?N1(x):lr=v}function $D(x){var v=x,S=v.alternate;switch(v.tag){case 15:case 0:v=cD(S,v,v.pendingProps,v.type,void 0,mr);break;case 11:v=cD(S,v,v.pendingProps,v.type.render,v.ref,mr);break;case 5:fj(v);default:gD(S,v),v=lr=GE(v,ad),v=xD(S,v,ad)}x.memoizedProps=x.pendingProps,v===null?N1(x):lr=v}function sp(x,v,S,E){$c=Vh=null,fj(v),X0=null,cm=0;var z=v.return;try{if(iQ(x,z,v,S,mr)){En=1,d1(x,Do(S,x.current)),lr=null;return}}catch(q){if(z!==null)throw lr=z,q;En=1,d1(x,Do(S,x.current)),lr=null;return}v.flags&32768?(_r||E===1?x=!0:ap||(mr&536870912)!==0?x=!1:(fu=x=!0,(E===2||E===9||E===3||E===6)&&(E=oo.current,E!==null&&E.tag===13&&(E.flags|=16384))),YD(v,x)):N1(v)}function N1(x){var v=x;do{if((v.flags&32768)!==0){YD(v,fu);return}x=v.return;var S=lQ(v.alternate,v,ad);if(S!==null){lr=S;return}if(v=v.sibling,v!==null){lr=v;return}lr=v=x}while(v!==null);En===0&&(En=5)}function YD(x,v){do{var S=cQ(x.alternate,x);if(S!==null){S.flags&=32767,lr=S;return}if(S=x.return,S!==null&&(S.flags|=32768,S.subtreeFlags=0,S.deletions=null),!v&&(x=x.sibling,x!==null)){lr=x;return}lr=x=S}while(x!==null);En=6,lr=null}function qD(x,v,S,E,z,q,le,me,De){x.cancelPendingCommit=null;do j1();while(vi!==0);if((Ir&6)!==0)throw Error(r(327));if(v!==null){if(v===x.current)throw Error(r(177));if(q=v.lanes|v.childLanes,q|=ba,Si(x,S,q,le,me,De),x===sn&&(lr=sn=null,mr=0),np=v,mu=x,rd=S,qj=q,Xj=z,PD=E,(v.subtreeFlags&10256)!==0||(v.flags&10256)!==0?(x.callbackNode=null,x.callbackPriority=0,wQ(ka,function(){return JD(),null})):(x.callbackNode=null,x.callbackPriority=0),E=(v.flags&13878)!==0,(v.subtreeFlags&13878)!==0||E){E=W.T,W.T=null,z=K.p,K.p=2,le=Ir,Ir|=4;try{dQ(x,v,S)}finally{Ir=le,K.p=z,W.T=E}}vi=1,XD(),ZD(),KD()}}function XD(){if(vi===1){vi=0;var x=mu,v=np,S=(v.flags&13878)!==0;if((v.subtreeFlags&13878)!==0||S){S=W.T,W.T=null;var E=K.p;K.p=2;var z=Ir;Ir|=4;try{TD(v,x);var q=dS,le=Y(x.containerInfo),me=q.focusedElem,De=q.selectionRange;if(le!==me&&me&&me.ownerDocument&&B(me.ownerDocument.documentElement,me)){if(De!==null&&te(me)){var Qe=De.start,ct=De.end;if(ct===void 0&&(ct=Qe),"selectionStart"in me)me.selectionStart=Qe,me.selectionEnd=Math.min(ct,me.value.length);else{var mt=me.ownerDocument||document,tt=mt&&mt.defaultView||window;if(tt.getSelection){var nt=tt.getSelection(),ia=me.textContent.length,Aa=Math.min(De.start,ia),Jr=De.end===void 0?Aa:Math.min(De.end,ia);!nt.extend&&Aa>Jr&&(le=Jr,Jr=Aa,Aa=le);var We=L(me,Aa),Pe=L(me,Jr);if(We&&Pe&&(nt.rangeCount!==1||nt.anchorNode!==We.node||nt.anchorOffset!==We.offset||nt.focusNode!==Pe.node||nt.focusOffset!==Pe.offset)){var Ke=mt.createRange();Ke.setStart(We.node,We.offset),nt.removeAllRanges(),Aa>Jr?(nt.addRange(Ke),nt.extend(Pe.node,Pe.offset)):(Ke.setEnd(Pe.node,Pe.offset),nt.addRange(Ke))}}}}for(mt=[],nt=me;nt=nt.parentNode;)nt.nodeType===1&&mt.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof me.focus=="function"&&me.focus(),me=0;me<mt.length;me++){var ft=mt[me];ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}O1=!!cS,dS=cS=null}finally{Ir=z,K.p=E,W.T=S}}x.current=v,vi=2}}function ZD(){if(vi===2){vi=0;var x=mu,v=np,S=(v.flags&8772)!==0;if((v.subtreeFlags&8772)!==0||S){S=W.T,W.T=null;var E=K.p;K.p=2;var z=Ir;Ir|=4;try{jD(x,v.alternate,v)}finally{Ir=z,K.p=E,W.T=S}}vi=3}}function KD(){if(vi===4||vi===3){vi=0,ta();var x=mu,v=np,S=rd,E=PD;(v.subtreeFlags&10256)!==0||(v.flags&10256)!==0?vi=5:(vi=0,np=mu=null,QD(x,x.pendingLanes));var z=x.pendingLanes;if(z===0&&(xu=null),gt(S),v=v.stateNode,lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(Tt,v,void 0,(v.current.flags&128)===128)}catch{}if(E!==null){v=W.T,z=K.p,K.p=2,W.T=null;try{for(var q=x.onRecoverableError,le=0;le<E.length;le++){var me=E[le];q(me.value,{componentStack:me.stack})}}finally{W.T=v,K.p=z}}(rd&3)!==0&&j1(),Yl(x),z=x.pendingLanes,(S&261930)!==0&&(z&42)!==0?x===Zj?km++:(km=0,Zj=x):km=0,Cm(0)}}function QD(x,v){(x.pooledCacheLanes&=v)===0&&(v=x.pooledCache,v!=null&&(x.pooledCache=null,om(v)))}function j1(){return XD(),ZD(),KD(),JD()}function JD(){if(vi!==5)return!1;var x=mu,v=qj;qj=0;var S=gt(rd),E=W.T,z=K.p;try{K.p=32>S?32:S,W.T=null,S=Xj,Xj=null;var q=mu,le=rd;if(vi=0,np=mu=null,rd=0,(Ir&6)!==0)throw Error(r(331));var me=Ir;if(Ir|=4,RD(q.current),ED(q,q.current,le,S),Ir=me,Cm(0,!1),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(Tt,q)}catch{}return!0}finally{K.p=z,W.T=E,QD(x,v)}}function eI(x,v,S){v=Do(S,v),v=Aj(x.stateNode,v,2),x=cu(x,v,2),x!==null&&(ai(x,2),Yl(x))}function $r(x,v,S){if(x.tag===3)eI(x,x,S);else for(;v!==null;){if(v.tag===3){eI(v,x,S);break}else if(v.tag===1){var E=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(xu===null||!xu.has(E))){x=Do(S,x),S=tD(2),E=cu(v,S,2),E!==null&&(aD(S,E,v,x),ai(E,2),Yl(E));break}}v=v.return}}function Jj(x,v,S){var E=x.pingCache;if(E===null){E=x.pingCache=new fQ;var z=new Set;E.set(v,z)}else z=E.get(v),z===void 0&&(z=new Set,E.set(v,z));z.has(S)||(Wj=!0,z.add(S),x=vQ.bind(null,x,v,S),v.then(x,x))}function vQ(x,v,S){var E=x.pingCache;E!==null&&E.delete(v),x.pingedLanes|=x.suspendedLanes&S,x.warmLanes&=~S,sn===x&&(mr&S)===S&&(En===4||En===3&&(mr&62914560)===mr&&300>Bt()-v1?(Ir&2)===0&&ip(x,0):$j|=S,rp===mr&&(rp=0)),Yl(x)}function tI(x,v){v===0&&(v=cn()),x=Pr(x,v),x!==null&&(ai(x,v),Yl(x))}function bQ(x){var v=x.memoizedState,S=0;v!==null&&(S=v.retryLane),tI(x,S)}function yQ(x,v){var S=0;switch(x.tag){case 31:case 13:var E=x.stateNode,z=x.memoizedState;z!==null&&(S=z.retryLane);break;case 19:E=x.stateNode;break;case 22:E=x.stateNode._retryCache;break;default:throw Error(r(314))}E!==null&&E.delete(v),tI(x,S)}function wQ(x,v){return Ue(x,v)}var S1=null,op=null,eS=!1,k1=!1,tS=!1,vu=0;function Yl(x){x!==op&&x.next===null&&(op===null?S1=op=x:op=op.next=x),k1=!0,eS||(eS=!0,NQ())}function Cm(x,v){if(!tS&&k1){tS=!0;do for(var S=!1,E=S1;E!==null;){if(x!==0){var z=E.pendingLanes;if(z===0)var q=0;else{var le=E.suspendedLanes,me=E.pingedLanes;q=(1<<31-xt(42|x)+1)-1,q&=z&~(le&~me),q=q&201326741?q&201326741|1:q?q|2:0}q!==0&&(S=!0,iI(E,q))}else q=mr,q=Ks(E,E===sn?q:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(q&3)===0||_n(E,q)||(S=!0,iI(E,q));E=E.next}while(S);tS=!1}}function _Q(){aI()}function aI(){k1=eS=!1;var x=0;vu!==0&&IQ()&&(x=vu);for(var v=Bt(),S=null,E=S1;E!==null;){var z=E.next,q=rI(E,v);q===0?(E.next=null,S===null?S1=z:S.next=z,z===null&&(op=S)):(S=E,(x!==0||(q&3)!==0)&&(k1=!0)),E=z}vi!==0&&vi!==5||Cm(x),vu!==0&&(vu=0)}function rI(x,v){for(var S=x.suspendedLanes,E=x.pingedLanes,z=x.expirationTimes,q=x.pendingLanes&-62914561;0<q;){var le=31-xt(q),me=1<<le,De=z[le];De===-1?((me&S)===0||(me&E)!==0)&&(z[le]=Ol(me,v)):De<=v&&(x.expiredLanes|=me),q&=~me}if(v=sn,S=mr,S=Ks(x,x===v?S:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),E=x.callbackNode,S===0||x===v&&(Wr===2||Wr===9)||x.cancelPendingCommit!==null)return E!==null&&E!==null&&Ye(E),x.callbackNode=null,x.callbackPriority=0;if((S&3)===0||_n(x,S)){if(v=S&-S,v===x.callbackPriority)return v;switch(E!==null&&Ye(E),gt(S)){case 2:case 8:S=Lr;break;case 32:S=ka;break;case 268435456:S=Sn;break;default:S=ka}return E=nI.bind(null,x),S=Ue(S,E),x.callbackPriority=v,x.callbackNode=S,v}return E!==null&&E!==null&&Ye(E),x.callbackPriority=2,x.callbackNode=null,2}function nI(x,v){if(vi!==0&&vi!==5)return x.callbackNode=null,x.callbackPriority=0,null;var S=x.callbackNode;if(j1()&&x.callbackNode!==S)return null;var E=mr;return E=Ks(x,x===sn?E:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),E===0?null:(zD(x,E,v),rI(x,Bt()),x.callbackNode!=null&&x.callbackNode===S?nI.bind(null,x):null)}function iI(x,v){if(j1())return null;zD(x,v,!0)}function NQ(){LQ(function(){(Ir&6)!==0?Ue(zt,_Q):aI()})}function aS(){if(vu===0){var x=$0;x===0&&(x=It,It<<=1,(It&261888)===0&&(It=256)),vu=x}return vu}function sI(x){return x==null||typeof x=="symbol"||typeof x=="boolean"?null:typeof x=="function"?x:fs(""+x)}function oI(x,v){var S=v.ownerDocument.createElement("input");return S.name=v.name,S.value=v.value,x.id&&S.setAttribute("form",x.id),v.parentNode.insertBefore(S,v),x=new FormData(x),S.parentNode.removeChild(S),x}function jQ(x,v,S,E,z){if(v==="submit"&&S&&S.stateNode===z){var q=sI((z[At]||null).action),le=E.submitter;le&&(v=(v=le[At]||null)?sI(v.formAction):le.getAttribute("formAction"),v!==null&&(q=v,le=null));var me=new Vn("action","action",null,E,z);x.push({event:me,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(vu!==0){var De=le?oI(z,le):new FormData(z);_j(S,{pending:!0,data:De,method:z.method,action:q},null,De)}}else typeof q=="function"&&(me.preventDefault(),De=le?oI(z,le):new FormData(z),_j(S,{pending:!0,data:De,method:z.method,action:q},q,De))},currentTarget:z}]})}}for(var rS=0;rS<Ft.length;rS++){var nS=Ft[rS],SQ=nS.toLowerCase(),kQ=nS[0].toUpperCase()+nS.slice(1);Nt(SQ,"on"+kQ)}Nt(qe,"onAnimationEnd"),Nt(He,"onAnimationIteration"),Nt(et,"onAnimationStart"),Nt("dblclick","onDoubleClick"),Nt("focusin","onFocus"),Nt("focusout","onBlur"),Nt(ht,"onTransitionRun"),Nt(kt,"onTransitionStart"),Nt(Mt,"onTransitionCancel"),Nt(bt,"onTransitionEnd"),Nn("onMouseEnter",["mouseout","mouseover"]),Nn("onMouseLeave",["mouseout","mouseover"]),Nn("onPointerEnter",["pointerout","pointerover"]),Nn("onPointerLeave",["pointerout","pointerover"]),sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Am="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CQ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Am));function lI(x,v){v=(v&4)!==0;for(var S=0;S<x.length;S++){var E=x[S],z=E.event;E=E.listeners;e:{var q=void 0;if(v)for(var le=E.length-1;0<=le;le--){var me=E[le],De=me.instance,Qe=me.currentTarget;if(me=me.listener,De!==q&&z.isPropagationStopped())break e;q=me,z.currentTarget=Qe;try{q(z)}catch(ct){Zt(ct)}z.currentTarget=null,q=De}else for(le=0;le<E.length;le++){if(me=E[le],De=me.instance,Qe=me.currentTarget,me=me.listener,De!==q&&z.isPropagationStopped())break e;q=me,z.currentTarget=Qe;try{q(z)}catch(ct){Zt(ct)}z.currentTarget=null,q=De}}}}function cr(x,v){var S=v[ca];S===void 0&&(S=v[ca]=new Set);var E=x+"__bubble";S.has(E)||(cI(v,x,2,!1),S.add(E))}function iS(x,v,S){var E=0;v&&(E|=4),cI(S,x,E,v)}var C1="_reactListening"+Math.random().toString(36).slice(2);function sS(x){if(!x[C1]){x[C1]=!0,dt.forEach(function(S){S!=="selectionchange"&&(CQ.has(S)||iS(S,!1,x),iS(S,!0,x))});var v=x.nodeType===9?x:x.ownerDocument;v===null||v[C1]||(v[C1]=!0,iS("selectionchange",!1,v))}}function cI(x,v,S,E){switch(BI(v)){case 2:var z=tJ;break;case 8:z=aJ;break;default:z=wS}S=z.bind(null,v,S,x),z=void 0,!Dh||v!=="touchstart"&&v!=="touchmove"&&v!=="wheel"||(z=!0),E?z!==void 0?x.addEventListener(v,S,{capture:!0,passive:z}):x.addEventListener(v,S,!0):z!==void 0?x.addEventListener(v,S,{passive:z}):x.addEventListener(v,S,!1)}function oS(x,v,S,E,z){var q=E;if((v&1)===0&&(v&2)===0&&E!==null)e:for(;;){if(E===null)return;var le=E.tag;if(le===3||le===4){var me=E.stateNode.containerInfo;if(me===z)break;if(le===4)for(le=E.return;le!==null;){var De=le.tag;if((De===3||De===4)&&le.stateNode.containerInfo===z)return;le=le.return}for(;me!==null;){if(le=Za(me),le===null)return;if(De=le.tag,De===5||De===6||De===26||De===27){E=q=le;continue e}me=me.parentNode}}E=E.return}Pl(function(){var Qe=q,ct=$d(S),mt=[];e:{var tt=Yt.get(x);if(tt!==void 0){var nt=Vn,ia=x;switch(x){case"keypress":if(Is(S)===0)break e;case"keydown":case"keyup":nt=ll;break;case"focusin":ia="focus",nt=Fl;break;case"focusout":ia="blur",nt=Fl;break;case"beforeblur":case"afterblur":nt=Fl;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=yr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=Fc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=Ph;break;case qe:case He:case et:nt=Ua;break;case bt:nt=ao;break;case"scroll":case"scrollend":nt=Bc;break;case"wheel":nt=Kd;break;case"copy":case"cut":case"paste":nt=eo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=kr;break;case"toggle":case"beforetoggle":nt=Qd}var Aa=(v&4)!==0,Jr=!Aa&&(x==="scroll"||x==="scrollend"),We=Aa?tt!==null?tt+"Capture":null:tt;Aa=[];for(var Pe=Qe,Ke;Pe!==null;){var ft=Pe;if(Ke=ft.stateNode,ft=ft.tag,ft!==5&&ft!==26&&ft!==27||Ke===null||We===null||(ft=Ma(Pe,We),ft!=null&&Aa.push(Tm(Pe,ft,Ke))),Jr)break;Pe=Pe.return}0<Aa.length&&(tt=new nt(tt,ia,null,S,ct),mt.push({event:tt,listeners:Aa}))}}if((v&7)===0){e:{if(tt=x==="mouseover"||x==="pointerover",nt=x==="mouseout"||x==="pointerout",tt&&S!==qi&&(ia=S.relatedTarget||S.fromElement)&&(Za(ia)||ia[Vt]))break e;if((nt||tt)&&(tt=ct.window===ct?ct:(tt=ct.ownerDocument)?tt.defaultView||tt.parentWindow:window,nt?(ia=S.relatedTarget||S.toElement,nt=Qe,ia=ia?Za(ia):null,ia!==null&&(Jr=i(ia),Aa=ia.tag,ia!==Jr||Aa!==5&&Aa!==27&&Aa!==6)&&(ia=null)):(nt=null,ia=Qe),nt!==ia)){if(Aa=yr,ft="onMouseLeave",We="onMouseEnter",Pe="mouse",(x==="pointerout"||x==="pointerover")&&(Aa=kr,ft="onPointerLeave",We="onPointerEnter",Pe="pointer"),Jr=nt==null?tt:Hr(nt),Ke=ia==null?tt:Hr(ia),tt=new Aa(ft,Pe+"leave",nt,S,ct),tt.target=Jr,tt.relatedTarget=Ke,ft=null,Za(ct)===Qe&&(Aa=new Aa(We,Pe+"enter",ia,S,ct),Aa.target=Ke,Aa.relatedTarget=Jr,ft=Aa),Jr=ft,nt&&ia)t:{for(Aa=AQ,We=nt,Pe=ia,Ke=0,ft=We;ft;ft=Aa(ft))Ke++;ft=0;for(var wa=Pe;wa;wa=Aa(wa))ft++;for(;0<Ke-ft;)We=Aa(We),Ke--;for(;0<ft-Ke;)Pe=Aa(Pe),ft--;for(;Ke--;){if(We===Pe||Pe!==null&&We===Pe.alternate){Aa=We;break t}We=Aa(We),Pe=Aa(Pe)}Aa=null}else Aa=null;nt!==null&&dI(mt,tt,nt,Aa,!1),ia!==null&&Jr!==null&&dI(mt,Jr,ia,Aa,!0)}}e:{if(tt=Qe?Hr(Qe):window,nt=tt.nodeName&&tt.nodeName.toLowerCase(),nt==="select"||nt==="input"&&tt.type==="file")var Cr=Ci;else if(Vc(tt))if(Rs)Cr=C;else{Cr=y;var ha=m}else nt=tt.nodeName,!nt||nt.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Qe&&Ur(Qe.elementType)&&(Cr=Ci):Cr=j;if(Cr&&(Cr=Cr(x,Qe))){Zi(mt,Cr,S,ct);break e}ha&&ha(x,tt,Qe),x==="focusout"&&Qe&&tt.type==="number"&&Qe.memoizedProps.value!=null&&je(tt,"number",tt.value)}switch(ha=Qe?Hr(Qe):window,x){case"focusin":(Vc(ha)||ha.contentEditable==="true")&&(ce=ha,pe=Qe,ye=null);break;case"focusout":ye=pe=ce=null;break;case"mousedown":ge=!0;break;case"contextmenu":case"mouseup":case"dragend":ge=!1,_e(mt,S,ct);break;case"selectionchange":if(se)break;case"keydown":case"keyup":_e(mt,S,ct)}var tr;if(cl)e:{switch(x){case"compositionstart":var gr="onCompositionStart";break e;case"compositionend":gr="onCompositionEnd";break e;case"compositionupdate":gr="onCompositionUpdate";break e}gr=void 0}else dl?Bh(x,S)&&(gr="onCompositionEnd"):x==="keydown"&&S.keyCode===229&&(gr="onCompositionStart");gr&&(Jd&&S.locale!=="ko"&&(dl||gr!=="onCompositionStart"?gr==="onCompositionEnd"&&dl&&(tr=Ds()):(ps=ct,Es="value"in ps?ps.value:ps.textContent,dl=!0)),ha=A1(Qe,gr),0<ha.length&&(gr=new Zd(gr,x,null,S,ct),mt.push({event:gr,listeners:ha}),tr?gr.data=tr:(tr=Vl(S),tr!==null&&(gr.data=tr)))),(tr=F0?io(x,S):tu(x,S))&&(gr=A1(Qe,"onBeforeInput"),0<gr.length&&(ha=new Zd("onBeforeInput","beforeinput",null,S,ct),mt.push({event:ha,listeners:gr}),ha.data=tr)),jQ(mt,x,Qe,S,ct)}lI(mt,v)})}function Tm(x,v,S){return{instance:x,listener:v,currentTarget:S}}function A1(x,v){for(var S=v+"Capture",E=[];x!==null;){var z=x,q=z.stateNode;if(z=z.tag,z!==5&&z!==26&&z!==27||q===null||(z=Ma(x,S),z!=null&&E.unshift(Tm(x,z,q)),z=Ma(x,v),z!=null&&E.push(Tm(x,z,q))),x.tag===3)return E;x=x.return}return[]}function AQ(x){if(x===null)return null;do x=x.return;while(x&&x.tag!==5&&x.tag!==27);return x||null}function dI(x,v,S,E,z){for(var q=v._reactName,le=[];S!==null&&S!==E;){var me=S,De=me.alternate,Qe=me.stateNode;if(me=me.tag,De!==null&&De===E)break;me!==5&&me!==26&&me!==27||Qe===null||(De=Qe,z?(Qe=Ma(S,q),Qe!=null&&le.unshift(Tm(S,Qe,De))):z||(Qe=Ma(S,q),Qe!=null&&le.push(Tm(S,Qe,De)))),S=S.return}le.length!==0&&x.push({event:v,listeners:le})}var TQ=/\r\n?/g,MQ=/\u0000|\uFFFD/g;function uI(x){return(typeof x=="string"?x:""+x).replace(TQ,`
`).replace(MQ,"")}function hI(x,v){return v=uI(v),uI(x)===v}function Qr(x,v,S,E,z,q){switch(S){case"children":typeof E=="string"?v==="body"||v==="textarea"&&E===""||ol(x,E):(typeof E=="number"||typeof E=="bigint")&&v!=="body"&&ol(x,""+E);break;case"className":ki(x,"class",E);break;case"tabIndex":ki(x,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":ki(x,S,E);break;case"style":pa(x,E,q);break;case"data":if(v!=="object"){ki(x,"data",E);break}case"src":case"href":if(E===""&&(v!=="a"||S!=="href")){x.removeAttribute(S);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){x.removeAttribute(S);break}E=fs(""+E),x.setAttribute(S,E);break;case"action":case"formAction":if(typeof E=="function"){x.setAttribute(S,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof q=="function"&&(S==="formAction"?(v!=="input"&&Qr(x,v,"name",z.name,z,null),Qr(x,v,"formEncType",z.formEncType,z,null),Qr(x,v,"formMethod",z.formMethod,z,null),Qr(x,v,"formTarget",z.formTarget,z,null)):(Qr(x,v,"encType",z.encType,z,null),Qr(x,v,"method",z.method,z,null),Qr(x,v,"target",z.target,z,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){x.removeAttribute(S);break}E=fs(""+E),x.setAttribute(S,E);break;case"onClick":E!=null&&(x.onclick=gi);break;case"onScroll":E!=null&&cr("scroll",x);break;case"onScrollEnd":E!=null&&cr("scrollend",x);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(S=E.__html,S!=null){if(z.children!=null)throw Error(r(60));x.innerHTML=S}}break;case"multiple":x.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":x.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){x.removeAttribute("xlink:href");break}S=fs(""+E),x.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",S);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?x.setAttribute(S,""+E):x.removeAttribute(S);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?x.setAttribute(S,""):x.removeAttribute(S);break;case"capture":case"download":E===!0?x.setAttribute(S,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?x.setAttribute(S,E):x.removeAttribute(S);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?x.setAttribute(S,E):x.removeAttribute(S);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?x.removeAttribute(S):x.setAttribute(S,E);break;case"popover":cr("beforetoggle",x),cr("toggle",x),ua(x,"popover",E);break;case"xlinkActuate":mn(x,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":mn(x,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":mn(x,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":mn(x,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":mn(x,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":mn(x,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":mn(x,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":mn(x,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":mn(x,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":ua(x,"is",E);break;case"innerText":case"textContent":break;default:(!(2<S.length)||S[0]!=="o"&&S[0]!=="O"||S[1]!=="n"&&S[1]!=="N")&&(S=B0.get(S)||S,ua(x,S,E))}}function lS(x,v,S,E,z,q){switch(S){case"style":pa(x,E,q);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(S=E.__html,S!=null){if(z.children!=null)throw Error(r(60));x.innerHTML=S}}break;case"children":typeof E=="string"?ol(x,E):(typeof E=="number"||typeof E=="bigint")&&ol(x,""+E);break;case"onScroll":E!=null&&cr("scroll",x);break;case"onScrollEnd":E!=null&&cr("scrollend",x);break;case"onClick":E!=null&&(x.onclick=gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ri.hasOwnProperty(S))e:{if(S[0]==="o"&&S[1]==="n"&&(z=S.endsWith("Capture"),v=S.slice(2,z?S.length-7:void 0),q=x[At]||null,q=q!=null?q[S]:null,typeof q=="function"&&x.removeEventListener(v,q,z),typeof E=="function")){typeof q!="function"&&q!==null&&(S in x?x[S]=null:x.hasAttribute(S)&&x.removeAttribute(S)),x.addEventListener(v,E,z);break e}S in x?x[S]=E:E===!0?x.setAttribute(S,""):ua(x,S,E)}}}function Vi(x,v,S){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":cr("error",x),cr("load",x);var E=!1,z=!1,q;for(q in S)if(S.hasOwnProperty(q)){var le=S[q];if(le!=null)switch(q){case"src":E=!0;break;case"srcSet":z=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,v));default:Qr(x,v,q,le,S,null)}}z&&Qr(x,v,"srcSet",S.srcSet,S,null),E&&Qr(x,v,"src",S.src,S,null);return;case"input":cr("invalid",x);var me=q=le=z=null,De=null,Qe=null;for(E in S)if(S.hasOwnProperty(E)){var ct=S[E];if(ct!=null)switch(E){case"name":z=ct;break;case"type":le=ct;break;case"checked":De=ct;break;case"defaultChecked":Qe=ct;break;case"value":q=ct;break;case"defaultValue":me=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(r(137,v));break;default:Qr(x,v,E,ct,S,null)}}$e(x,q,me,De,Qe,le,z,!1);return;case"select":cr("invalid",x),E=le=q=null;for(z in S)if(S.hasOwnProperty(z)&&(me=S[z],me!=null))switch(z){case"value":q=me;break;case"defaultValue":le=me;break;case"multiple":E=me;default:Qr(x,v,z,me,S,null)}v=q,S=le,x.multiple=!!E,v!=null?aa(x,!!E,v,!1):S!=null&&aa(x,!!E,S,!0);return;case"textarea":cr("invalid",x),q=z=E=null;for(le in S)if(S.hasOwnProperty(le)&&(me=S[le],me!=null))switch(le){case"value":E=me;break;case"defaultValue":z=me;break;case"children":q=me;break;case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(91));break;default:Qr(x,v,le,me,S,null)}ni(x,E,z,q);return;case"option":for(De in S)S.hasOwnProperty(De)&&(E=S[De],E!=null)&&(De==="selected"?x.selected=E&&typeof E!="function"&&typeof E!="symbol":Qr(x,v,De,E,S,null));return;case"dialog":cr("beforetoggle",x),cr("toggle",x),cr("cancel",x),cr("close",x);break;case"iframe":case"object":cr("load",x);break;case"video":case"audio":for(E=0;E<Am.length;E++)cr(Am[E],x);break;case"image":cr("error",x),cr("load",x);break;case"details":cr("toggle",x);break;case"embed":case"source":case"link":cr("error",x),cr("load",x);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Qe in S)if(S.hasOwnProperty(Qe)&&(E=S[Qe],E!=null))switch(Qe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,v));default:Qr(x,v,Qe,E,S,null)}return;default:if(Ur(v)){for(ct in S)S.hasOwnProperty(ct)&&(E=S[ct],E!==void 0&&lS(x,v,ct,E,S,void 0));return}}for(me in S)S.hasOwnProperty(me)&&(E=S[me],E!=null&&Qr(x,v,me,E,S,null))}function EQ(x,v,S,E){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var z=null,q=null,le=null,me=null,De=null,Qe=null,ct=null;for(nt in S){var mt=S[nt];if(S.hasOwnProperty(nt)&&mt!=null)switch(nt){case"checked":break;case"value":break;case"defaultValue":De=mt;default:E.hasOwnProperty(nt)||Qr(x,v,nt,null,E,mt)}}for(var tt in E){var nt=E[tt];if(mt=S[tt],E.hasOwnProperty(tt)&&(nt!=null||mt!=null))switch(tt){case"type":q=nt;break;case"name":z=nt;break;case"checked":Qe=nt;break;case"defaultChecked":ct=nt;break;case"value":le=nt;break;case"defaultValue":me=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(r(137,v));break;default:nt!==mt&&Qr(x,v,tt,nt,E,mt)}}an(x,le,me,De,Qe,ct,q,z);return;case"select":nt=le=me=tt=null;for(q in S)if(De=S[q],S.hasOwnProperty(q)&&De!=null)switch(q){case"value":break;case"multiple":nt=De;default:E.hasOwnProperty(q)||Qr(x,v,q,null,E,De)}for(z in E)if(q=E[z],De=S[z],E.hasOwnProperty(z)&&(q!=null||De!=null))switch(z){case"value":tt=q;break;case"defaultValue":me=q;break;case"multiple":le=q;default:q!==De&&Qr(x,v,z,q,E,De)}v=me,S=le,E=nt,tt!=null?aa(x,!!S,tt,!1):!!E!=!!S&&(v!=null?aa(x,!!S,v,!0):aa(x,!!S,S?[]:"",!1));return;case"textarea":nt=tt=null;for(me in S)if(z=S[me],S.hasOwnProperty(me)&&z!=null&&!E.hasOwnProperty(me))switch(me){case"value":break;case"children":break;default:Qr(x,v,me,null,E,z)}for(le in E)if(z=E[le],q=S[le],E.hasOwnProperty(le)&&(z!=null||q!=null))switch(le){case"value":tt=z;break;case"defaultValue":nt=z;break;case"children":break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:z!==q&&Qr(x,v,le,z,E,q)}gn(x,tt,nt);return;case"option":for(var ia in S)tt=S[ia],S.hasOwnProperty(ia)&&tt!=null&&!E.hasOwnProperty(ia)&&(ia==="selected"?x.selected=!1:Qr(x,v,ia,null,E,tt));for(De in E)tt=E[De],nt=S[De],E.hasOwnProperty(De)&&tt!==nt&&(tt!=null||nt!=null)&&(De==="selected"?x.selected=tt&&typeof tt!="function"&&typeof tt!="symbol":Qr(x,v,De,tt,E,nt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Aa in S)tt=S[Aa],S.hasOwnProperty(Aa)&&tt!=null&&!E.hasOwnProperty(Aa)&&Qr(x,v,Aa,null,E,tt);for(Qe in E)if(tt=E[Qe],nt=S[Qe],E.hasOwnProperty(Qe)&&tt!==nt&&(tt!=null||nt!=null))switch(Qe){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(r(137,v));break;default:Qr(x,v,Qe,tt,E,nt)}return;default:if(Ur(v)){for(var Jr in S)tt=S[Jr],S.hasOwnProperty(Jr)&&tt!==void 0&&!E.hasOwnProperty(Jr)&&lS(x,v,Jr,void 0,E,tt);for(ct in E)tt=E[ct],nt=S[ct],!E.hasOwnProperty(ct)||tt===nt||tt===void 0&&nt===void 0||lS(x,v,ct,tt,E,nt);return}}for(var We in S)tt=S[We],S.hasOwnProperty(We)&&tt!=null&&!E.hasOwnProperty(We)&&Qr(x,v,We,null,E,tt);for(mt in E)tt=E[mt],nt=S[mt],!E.hasOwnProperty(mt)||tt===nt||tt==null&&nt==null||Qr(x,v,mt,tt,E,nt)}function fI(x){switch(x){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DQ(){if(typeof performance.getEntriesByType=="function"){for(var x=0,v=0,S=performance.getEntriesByType("resource"),E=0;E<S.length;E++){var z=S[E],q=z.transferSize,le=z.initiatorType,me=z.duration;if(q&&me&&fI(le)){for(le=0,me=z.responseEnd,E+=1;E<S.length;E++){var De=S[E],Qe=De.startTime;if(Qe>me)break;var ct=De.transferSize,mt=De.initiatorType;ct&&fI(mt)&&(De=De.responseEnd,le+=ct*(De<me?1:(me-Qe)/(De-Qe)))}if(--E,v+=8*(q+le)/(z.duration/1e3),x++,10<x)break}}if(0<x)return v/x/1e6}return navigator.connection&&(x=navigator.connection.downlink,typeof x=="number")?x:5}var cS=null,dS=null;function T1(x){return x.nodeType===9?x:x.ownerDocument}function pI(x){switch(x){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xI(x,v){if(x===0)switch(v){case"svg":return 1;case"math":return 2;default:return 0}return x===1&&v==="foreignObject"?0:x}function uS(x,v){return x==="textarea"||x==="noscript"||typeof v.children=="string"||typeof v.children=="number"||typeof v.children=="bigint"||typeof v.dangerouslySetInnerHTML=="object"&&v.dangerouslySetInnerHTML!==null&&v.dangerouslySetInnerHTML.__html!=null}var hS=null;function IQ(){var x=window.event;return x&&x.type==="popstate"?x===hS?!1:(hS=x,!0):(hS=null,!1)}var mI=typeof setTimeout=="function"?setTimeout:void 0,RQ=typeof clearTimeout=="function"?clearTimeout:void 0,gI=typeof Promise=="function"?Promise:void 0,LQ=typeof queueMicrotask=="function"?queueMicrotask:typeof gI<"u"?function(x){return gI.resolve(null).then(x).catch(OQ)}:mI;function OQ(x){setTimeout(function(){throw x})}function bu(x){return x==="head"}function vI(x,v){var S=v,E=0;do{var z=S.nextSibling;if(x.removeChild(S),z&&z.nodeType===8)if(S=z.data,S==="/$"||S==="/&"){if(E===0){x.removeChild(z),up(v);return}E--}else if(S==="$"||S==="$?"||S==="$~"||S==="$!"||S==="&")E++;else if(S==="html")Mm(x.ownerDocument.documentElement);else if(S==="head"){S=x.ownerDocument.head,Mm(S);for(var q=S.firstChild;q;){var le=q.nextSibling,me=q.nodeName;q[Nr]||me==="SCRIPT"||me==="STYLE"||me==="LINK"&&q.rel.toLowerCase()==="stylesheet"||S.removeChild(q),q=le}}else S==="body"&&Mm(x.ownerDocument.body);S=z}while(S);up(v)}function bI(x,v){var S=x;x=0;do{var E=S.nextSibling;if(S.nodeType===1?v?(S._stashedDisplay=S.style.display,S.style.display="none"):(S.style.display=S._stashedDisplay||"",S.getAttribute("style")===""&&S.removeAttribute("style")):S.nodeType===3&&(v?(S._stashedText=S.nodeValue,S.nodeValue=""):S.nodeValue=S._stashedText||""),E&&E.nodeType===8)if(S=E.data,S==="/$"){if(x===0)break;x--}else S!=="$"&&S!=="$?"&&S!=="$~"&&S!=="$!"||x++;S=E}while(S)}function fS(x){var v=x.firstChild;for(v&&v.nodeType===10&&(v=v.nextSibling);v;){var S=v;switch(v=v.nextSibling,S.nodeName){case"HTML":case"HEAD":case"BODY":fS(S),pr(S);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(S.rel.toLowerCase()==="stylesheet")continue}x.removeChild(S)}}function PQ(x,v,S,E){for(;x.nodeType===1;){var z=S;if(x.nodeName.toLowerCase()!==v.toLowerCase()){if(!E&&(x.nodeName!=="INPUT"||x.type!=="hidden"))break}else if(E){if(!x[Nr])switch(v){case"meta":if(!x.hasAttribute("itemprop"))break;return x;case"link":if(q=x.getAttribute("rel"),q==="stylesheet"&&x.hasAttribute("data-precedence"))break;if(q!==z.rel||x.getAttribute("href")!==(z.href==null||z.href===""?null:z.href)||x.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin)||x.getAttribute("title")!==(z.title==null?null:z.title))break;return x;case"style":if(x.hasAttribute("data-precedence"))break;return x;case"script":if(q=x.getAttribute("src"),(q!==(z.src==null?null:z.src)||x.getAttribute("type")!==(z.type==null?null:z.type)||x.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin))&&q&&x.hasAttribute("async")&&!x.hasAttribute("itemprop"))break;return x;default:return x}}else if(v==="input"&&x.type==="hidden"){var q=z.name==null?null:""+z.name;if(z.type==="hidden"&&x.getAttribute("name")===q)return x}else return x;if(x=Po(x.nextSibling),x===null)break}return null}function BQ(x,v,S){if(v==="")return null;for(;x.nodeType!==3;)if((x.nodeType!==1||x.nodeName!=="INPUT"||x.type!=="hidden")&&!S||(x=Po(x.nextSibling),x===null))return null;return x}function yI(x,v){for(;x.nodeType!==8;)if((x.nodeType!==1||x.nodeName!=="INPUT"||x.type!=="hidden")&&!v||(x=Po(x.nextSibling),x===null))return null;return x}function pS(x){return x.data==="$?"||x.data==="$~"}function xS(x){return x.data==="$!"||x.data==="$?"&&x.ownerDocument.readyState!=="loading"}function zQ(x,v){var S=x.ownerDocument;if(x.data==="$~")x._reactRetry=v;else if(x.data!=="$?"||S.readyState!=="loading")v();else{var E=function(){v(),S.removeEventListener("DOMContentLoaded",E)};S.addEventListener("DOMContentLoaded",E),x._reactRetry=E}}function Po(x){for(;x!=null;x=x.nextSibling){var v=x.nodeType;if(v===1||v===3)break;if(v===8){if(v=x.data,v==="$"||v==="$!"||v==="$?"||v==="$~"||v==="&"||v==="F!"||v==="F")break;if(v==="/$"||v==="/&")return null}}return x}var mS=null;function wI(x){x=x.nextSibling;for(var v=0;x;){if(x.nodeType===8){var S=x.data;if(S==="/$"||S==="/&"){if(v===0)return Po(x.nextSibling);v--}else S!=="$"&&S!=="$!"&&S!=="$?"&&S!=="$~"&&S!=="&"||v++}x=x.nextSibling}return null}function _I(x){x=x.previousSibling;for(var v=0;x;){if(x.nodeType===8){var S=x.data;if(S==="$"||S==="$!"||S==="$?"||S==="$~"||S==="&"){if(v===0)return x;v--}else S!=="/$"&&S!=="/&"||v++}x=x.previousSibling}return null}function NI(x,v,S){switch(v=T1(S),x){case"html":if(x=v.documentElement,!x)throw Error(r(452));return x;case"head":if(x=v.head,!x)throw Error(r(453));return x;case"body":if(x=v.body,!x)throw Error(r(454));return x;default:throw Error(r(451))}}function Mm(x){for(var v=x.attributes;v.length;)x.removeAttributeNode(v[0]);pr(x)}var Bo=new Map,jI=new Set;function M1(x){return typeof x.getRootNode=="function"?x.getRootNode():x.nodeType===9?x:x.ownerDocument}var nd=K.d;K.d={f:FQ,r:VQ,D:HQ,C:UQ,L:GQ,m:WQ,X:YQ,S:$Q,M:qQ};function FQ(){var x=nd.f(),v=w1();return x||v}function VQ(x){var v=Ot(x);v!==null&&v.tag===5&&v.type==="form"?V6(v):nd.r(x)}var lp=typeof document>"u"?null:document;function SI(x,v,S){var E=lp;if(E&&typeof v=="string"&&v){var z=Fa(v);z='link[rel="'+x+'"][href="'+z+'"]',typeof S=="string"&&(z+='[crossorigin="'+S+'"]'),jI.has(z)||(jI.add(z),x={rel:x,crossOrigin:S,href:v},E.querySelector(z)===null&&(v=E.createElement("link"),Vi(v,"link",x),Er(v),E.head.appendChild(v)))}}function HQ(x){nd.D(x),SI("dns-prefetch",x,null)}function UQ(x,v){nd.C(x,v),SI("preconnect",x,v)}function GQ(x,v,S){nd.L(x,v,S);var E=lp;if(E&&x&&v){var z='link[rel="preload"][as="'+Fa(v)+'"]';v==="image"&&S&&S.imageSrcSet?(z+='[imagesrcset="'+Fa(S.imageSrcSet)+'"]',typeof S.imageSizes=="string"&&(z+='[imagesizes="'+Fa(S.imageSizes)+'"]')):z+='[href="'+Fa(x)+'"]';var q=z;switch(v){case"style":q=cp(x);break;case"script":q=dp(x)}Bo.has(q)||(x=h({rel:"preload",href:v==="image"&&S&&S.imageSrcSet?void 0:x,as:v},S),Bo.set(q,x),E.querySelector(z)!==null||v==="style"&&E.querySelector(Em(q))||v==="script"&&E.querySelector(Dm(q))||(v=E.createElement("link"),Vi(v,"link",x),Er(v),E.head.appendChild(v)))}}function WQ(x,v){nd.m(x,v);var S=lp;if(S&&x){var E=v&&typeof v.as=="string"?v.as:"script",z='link[rel="modulepreload"][as="'+Fa(E)+'"][href="'+Fa(x)+'"]',q=z;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":q=dp(x)}if(!Bo.has(q)&&(x=h({rel:"modulepreload",href:x},v),Bo.set(q,x),S.querySelector(z)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(S.querySelector(Dm(q)))return}E=S.createElement("link"),Vi(E,"link",x),Er(E),S.head.appendChild(E)}}}function $Q(x,v,S){nd.S(x,v,S);var E=lp;if(E&&x){var z=jr(E).hoistableStyles,q=cp(x);v=v||"default";var le=z.get(q);if(!le){var me={loading:0,preload:null};if(le=E.querySelector(Em(q)))me.loading=5;else{x=h({rel:"stylesheet",href:x,"data-precedence":v},S),(S=Bo.get(q))&&gS(x,S);var De=le=E.createElement("link");Er(De),Vi(De,"link",x),De._p=new Promise(function(Qe,ct){De.onload=Qe,De.onerror=ct}),De.addEventListener("load",function(){me.loading|=1}),De.addEventListener("error",function(){me.loading|=2}),me.loading|=4,E1(le,v,E)}le={type:"stylesheet",instance:le,count:1,state:me},z.set(q,le)}}}function YQ(x,v){nd.X(x,v);var S=lp;if(S&&x){var E=jr(S).hoistableScripts,z=dp(x),q=E.get(z);q||(q=S.querySelector(Dm(z)),q||(x=h({src:x,async:!0},v),(v=Bo.get(z))&&vS(x,v),q=S.createElement("script"),Er(q),Vi(q,"link",x),S.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},E.set(z,q))}}function qQ(x,v){nd.M(x,v);var S=lp;if(S&&x){var E=jr(S).hoistableScripts,z=dp(x),q=E.get(z);q||(q=S.querySelector(Dm(z)),q||(x=h({src:x,async:!0,type:"module"},v),(v=Bo.get(z))&&vS(x,v),q=S.createElement("script"),Er(q),Vi(q,"link",x),S.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},E.set(z,q))}}function kI(x,v,S,E){var z=(z=ve.current)?M1(z):null;if(!z)throw Error(r(446));switch(x){case"meta":case"title":return null;case"style":return typeof S.precedence=="string"&&typeof S.href=="string"?(v=cp(S.href),S=jr(z).hoistableStyles,E=S.get(v),E||(E={type:"style",instance:null,count:0,state:null},S.set(v,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(S.rel==="stylesheet"&&typeof S.href=="string"&&typeof S.precedence=="string"){x=cp(S.href);var q=jr(z).hoistableStyles,le=q.get(x);if(le||(z=z.ownerDocument||z,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},q.set(x,le),(q=z.querySelector(Em(x)))&&!q._p&&(le.instance=q,le.state.loading=5),Bo.has(x)||(S={rel:"preload",as:"style",href:S.href,crossOrigin:S.crossOrigin,integrity:S.integrity,media:S.media,hrefLang:S.hrefLang,referrerPolicy:S.referrerPolicy},Bo.set(x,S),q||XQ(z,x,S,le.state))),v&&E===null)throw Error(r(528,""));return le}if(v&&E!==null)throw Error(r(529,""));return null;case"script":return v=S.async,S=S.src,typeof S=="string"&&v&&typeof v!="function"&&typeof v!="symbol"?(v=dp(S),S=jr(z).hoistableScripts,E=S.get(v),E||(E={type:"script",instance:null,count:0,state:null},S.set(v,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,x))}}function cp(x){return'href="'+Fa(x)+'"'}function Em(x){return'link[rel="stylesheet"]['+x+"]"}function CI(x){return h({},x,{"data-precedence":x.precedence,precedence:null})}function XQ(x,v,S,E){x.querySelector('link[rel="preload"][as="style"]['+v+"]")?E.loading=1:(v=x.createElement("link"),E.preload=v,v.addEventListener("load",function(){return E.loading|=1}),v.addEventListener("error",function(){return E.loading|=2}),Vi(v,"link",S),Er(v),x.head.appendChild(v))}function dp(x){return'[src="'+Fa(x)+'"]'}function Dm(x){return"script[async]"+x}function AI(x,v,S){if(v.count++,v.instance===null)switch(v.type){case"style":var E=x.querySelector('style[data-href~="'+Fa(S.href)+'"]');if(E)return v.instance=E,Er(E),E;var z=h({},S,{"data-href":S.href,"data-precedence":S.precedence,href:null,precedence:null});return E=(x.ownerDocument||x).createElement("style"),Er(E),Vi(E,"style",z),E1(E,S.precedence,x),v.instance=E;case"stylesheet":z=cp(S.href);var q=x.querySelector(Em(z));if(q)return v.state.loading|=4,v.instance=q,Er(q),q;E=CI(S),(z=Bo.get(z))&&gS(E,z),q=(x.ownerDocument||x).createElement("link"),Er(q);var le=q;return le._p=new Promise(function(me,De){le.onload=me,le.onerror=De}),Vi(q,"link",E),v.state.loading|=4,E1(q,S.precedence,x),v.instance=q;case"script":return q=dp(S.src),(z=x.querySelector(Dm(q)))?(v.instance=z,Er(z),z):(E=S,(z=Bo.get(q))&&(E=h({},S),vS(E,z)),x=x.ownerDocument||x,z=x.createElement("script"),Er(z),Vi(z,"link",E),x.head.appendChild(z),v.instance=z);case"void":return null;default:throw Error(r(443,v.type))}else v.type==="stylesheet"&&(v.state.loading&4)===0&&(E=v.instance,v.state.loading|=4,E1(E,S.precedence,x));return v.instance}function E1(x,v,S){for(var E=S.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),z=E.length?E[E.length-1]:null,q=z,le=0;le<E.length;le++){var me=E[le];if(me.dataset.precedence===v)q=me;else if(q!==z)break}q?q.parentNode.insertBefore(x,q.nextSibling):(v=S.nodeType===9?S.head:S,v.insertBefore(x,v.firstChild))}function gS(x,v){x.crossOrigin==null&&(x.crossOrigin=v.crossOrigin),x.referrerPolicy==null&&(x.referrerPolicy=v.referrerPolicy),x.title==null&&(x.title=v.title)}function vS(x,v){x.crossOrigin==null&&(x.crossOrigin=v.crossOrigin),x.referrerPolicy==null&&(x.referrerPolicy=v.referrerPolicy),x.integrity==null&&(x.integrity=v.integrity)}var D1=null;function TI(x,v,S){if(D1===null){var E=new Map,z=D1=new Map;z.set(S,E)}else z=D1,E=z.get(S),E||(E=new Map,z.set(S,E));if(E.has(x))return E;for(E.set(x,null),S=S.getElementsByTagName(x),z=0;z<S.length;z++){var q=S[z];if(!(q[Nr]||q[Et]||x==="link"&&q.getAttribute("rel")==="stylesheet")&&q.namespaceURI!=="http://www.w3.org/2000/svg"){var le=q.getAttribute(v)||"";le=x+le;var me=E.get(le);me?me.push(q):E.set(le,[q])}}return E}function MI(x,v,S){x=x.ownerDocument||x,x.head.insertBefore(S,v==="title"?x.querySelector("head > title"):null)}function ZQ(x,v,S){if(S===1||v.itemProp!=null)return!1;switch(x){case"meta":case"title":return!0;case"style":if(typeof v.precedence!="string"||typeof v.href!="string"||v.href==="")break;return!0;case"link":if(typeof v.rel!="string"||typeof v.href!="string"||v.href===""||v.onLoad||v.onError)break;return v.rel==="stylesheet"?(x=v.disabled,typeof v.precedence=="string"&&x==null):!0;case"script":if(v.async&&typeof v.async!="function"&&typeof v.async!="symbol"&&!v.onLoad&&!v.onError&&v.src&&typeof v.src=="string")return!0}return!1}function EI(x){return!(x.type==="stylesheet"&&(x.state.loading&3)===0)}function KQ(x,v,S,E){if(S.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(S.state.loading&4)===0){if(S.instance===null){var z=cp(E.href),q=v.querySelector(Em(z));if(q){v=q._p,v!==null&&typeof v=="object"&&typeof v.then=="function"&&(x.count++,x=I1.bind(x),v.then(x,x)),S.state.loading|=4,S.instance=q,Er(q);return}q=v.ownerDocument||v,E=CI(E),(z=Bo.get(z))&&gS(E,z),q=q.createElement("link"),Er(q);var le=q;le._p=new Promise(function(me,De){le.onload=me,le.onerror=De}),Vi(q,"link",E),S.instance=q}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(S,v),(v=S.state.preload)&&(S.state.loading&3)===0&&(x.count++,S=I1.bind(x),v.addEventListener("load",S),v.addEventListener("error",S))}}var bS=0;function QQ(x,v){return x.stylesheets&&x.count===0&&L1(x,x.stylesheets),0<x.count||0<x.imgCount?function(S){var E=setTimeout(function(){if(x.stylesheets&&L1(x,x.stylesheets),x.unsuspend){var q=x.unsuspend;x.unsuspend=null,q()}},6e4+v);0<x.imgBytes&&bS===0&&(bS=62500*DQ());var z=setTimeout(function(){if(x.waitingForImages=!1,x.count===0&&(x.stylesheets&&L1(x,x.stylesheets),x.unsuspend)){var q=x.unsuspend;x.unsuspend=null,q()}},(x.imgBytes>bS?50:800)+v);return x.unsuspend=S,function(){x.unsuspend=null,clearTimeout(E),clearTimeout(z)}}:null}function I1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)L1(this,this.stylesheets);else if(this.unsuspend){var x=this.unsuspend;this.unsuspend=null,x()}}}var R1=null;function L1(x,v){x.stylesheets=null,x.unsuspend!==null&&(x.count++,R1=new Map,v.forEach(JQ,x),R1=null,I1.call(x))}function JQ(x,v){if(!(v.state.loading&4)){var S=R1.get(x);if(S)var E=S.get(null);else{S=new Map,R1.set(x,S);for(var z=x.querySelectorAll("link[data-precedence],style[data-precedence]"),q=0;q<z.length;q++){var le=z[q];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(S.set(le.dataset.precedence,le),E=le)}E&&S.set(null,E)}z=v.instance,le=z.getAttribute("data-precedence"),q=S.get(le)||E,q===E&&S.set(null,z),S.set(le,z),this.count++,E=I1.bind(this),z.addEventListener("load",E),z.addEventListener("error",E),q?q.parentNode.insertBefore(z,q.nextSibling):(x=x.nodeType===9?x.head:x,x.insertBefore(z,x.firstChild)),v.state.loading|=4}}var Im={$$typeof:T,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function eJ(x,v,S,E,z,q,le,me,De){this.tag=1,this.containerInfo=x,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kn(0),this.hiddenUpdates=kn(null),this.identifierPrefix=E,this.onUncaughtError=z,this.onCaughtError=q,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=De,this.incompleteTransitions=new Map}function DI(x,v,S,E,z,q,le,me,De,Qe,ct,mt){return x=new eJ(x,v,S,le,De,Qe,ct,mt,me),v=1,q===!0&&(v|=24),q=so(3,null,null,v),x.current=q,q.stateNode=x,v=QN(),v.refCount++,x.pooledCache=v,v.refCount++,q.memoizedState={element:E,isDehydrated:S,cache:v},aj(q),x}function II(x){return x?(x=V0,x):V0}function RI(x,v,S,E,z,q){z=II(z),E.context===null?E.context=z:E.pendingContext=z,E=lu(v),E.payload={element:S},q=q===void 0?null:q,q!==null&&(E.callback=q),S=cu(x,E,v),S!==null&&(Fs(S,x,v),um(S,x,v))}function LI(x,v){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var S=x.retryLane;x.retryLane=S!==0&&S<v?S:v}}function yS(x,v){LI(x,v),(x=x.alternate)&&LI(x,v)}function OI(x){if(x.tag===13||x.tag===31){var v=Pr(x,67108864);v!==null&&Fs(v,x,67108864),yS(x,67108864)}}function PI(x){if(x.tag===13||x.tag===31){var v=ho();v=Xe(v);var S=Pr(x,v);S!==null&&Fs(S,x,v),yS(x,v)}}var O1=!0;function tJ(x,v,S,E){var z=W.T;W.T=null;var q=K.p;try{K.p=2,wS(x,v,S,E)}finally{K.p=q,W.T=z}}function aJ(x,v,S,E){var z=W.T;W.T=null;var q=K.p;try{K.p=8,wS(x,v,S,E)}finally{K.p=q,W.T=z}}function wS(x,v,S,E){if(O1){var z=_S(E);if(z===null)oS(x,v,E,P1,S),zI(x,E);else if(nJ(z,x,v,S,E))E.stopPropagation();else if(zI(x,E),v&4&&-1<rJ.indexOf(x)){for(;z!==null;){var q=Ot(z);if(q!==null)switch(q.tag){case 3:if(q=q.stateNode,q.current.memoizedState.isDehydrated){var le=Yi(q.pendingLanes);if(le!==0){var me=q;for(me.pendingLanes|=2,me.entangledLanes|=2;le;){var De=1<<31-xt(le);me.entanglements[1]|=De,le&=~De}Yl(q),(Ir&6)===0&&(b1=Bt()+500,Cm(0))}}break;case 31:case 13:me=Pr(q,2),me!==null&&Fs(me,q,2),w1(),yS(q,2)}if(q=_S(E),q===null&&oS(x,v,E,P1,S),q===z)break;z=q}z!==null&&E.stopPropagation()}else oS(x,v,E,null,S)}}function _S(x){return x=$d(x),NS(x)}var P1=null;function NS(x){if(P1=null,x=Za(x),x!==null){var v=i(x);if(v===null)x=null;else{var S=v.tag;if(S===13){if(x=o(v),x!==null)return x;x=null}else if(S===31){if(x=l(v),x!==null)return x;x=null}else if(S===3){if(v.stateNode.current.memoizedState.isDehydrated)return v.tag===3?v.stateNode.containerInfo:null;x=null}else v!==x&&(x=null)}}return P1=x,null}function BI(x){switch(x){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Da()){case zt:return 2;case Lr:return 8;case ka:case Ca:return 32;case Sn:return 268435456;default:return 32}default:return 32}}var jS=!1,yu=null,wu=null,_u=null,Rm=new Map,Lm=new Map,Nu=[],rJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zI(x,v){switch(x){case"focusin":case"focusout":yu=null;break;case"dragenter":case"dragleave":wu=null;break;case"mouseover":case"mouseout":_u=null;break;case"pointerover":case"pointerout":Rm.delete(v.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lm.delete(v.pointerId)}}function Om(x,v,S,E,z,q){return x===null||x.nativeEvent!==q?(x={blockedOn:v,domEventName:S,eventSystemFlags:E,nativeEvent:q,targetContainers:[z]},v!==null&&(v=Ot(v),v!==null&&OI(v)),x):(x.eventSystemFlags|=E,v=x.targetContainers,z!==null&&v.indexOf(z)===-1&&v.push(z),x)}function nJ(x,v,S,E,z){switch(v){case"focusin":return yu=Om(yu,x,v,S,E,z),!0;case"dragenter":return wu=Om(wu,x,v,S,E,z),!0;case"mouseover":return _u=Om(_u,x,v,S,E,z),!0;case"pointerover":var q=z.pointerId;return Rm.set(q,Om(Rm.get(q)||null,x,v,S,E,z)),!0;case"gotpointercapture":return q=z.pointerId,Lm.set(q,Om(Lm.get(q)||null,x,v,S,E,z)),!0}return!1}function FI(x){var v=Za(x.target);if(v!==null){var S=i(v);if(S!==null){if(v=S.tag,v===13){if(v=o(S),v!==null){x.blockedOn=v,ot(x.priority,function(){PI(S)});return}}else if(v===31){if(v=l(S),v!==null){x.blockedOn=v,ot(x.priority,function(){PI(S)});return}}else if(v===3&&S.stateNode.current.memoizedState.isDehydrated){x.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}x.blockedOn=null}function B1(x){if(x.blockedOn!==null)return!1;for(var v=x.targetContainers;0<v.length;){var S=_S(x.nativeEvent);if(S===null){S=x.nativeEvent;var E=new S.constructor(S.type,S);qi=E,S.target.dispatchEvent(E),qi=null}else return v=Ot(S),v!==null&&OI(v),x.blockedOn=S,!1;v.shift()}return!0}function VI(x,v,S){B1(x)&&S.delete(v)}function iJ(){jS=!1,yu!==null&&B1(yu)&&(yu=null),wu!==null&&B1(wu)&&(wu=null),_u!==null&&B1(_u)&&(_u=null),Rm.forEach(VI),Lm.forEach(VI)}function z1(x,v){x.blockedOn===v&&(x.blockedOn=null,jS||(jS=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,iJ)))}var F1=null;function HI(x){F1!==x&&(F1=x,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){F1===x&&(F1=null);for(var v=0;v<x.length;v+=3){var S=x[v],E=x[v+1],z=x[v+2];if(typeof E!="function"){if(NS(E||S)===null)continue;break}var q=Ot(S);q!==null&&(x.splice(v,3),v-=3,_j(q,{pending:!0,data:z,method:S.method,action:E},E,z))}}))}function up(x){function v(De){return z1(De,x)}yu!==null&&z1(yu,x),wu!==null&&z1(wu,x),_u!==null&&z1(_u,x),Rm.forEach(v),Lm.forEach(v);for(var S=0;S<Nu.length;S++){var E=Nu[S];E.blockedOn===x&&(E.blockedOn=null)}for(;0<Nu.length&&(S=Nu[0],S.blockedOn===null);)FI(S),S.blockedOn===null&&Nu.shift();if(S=(x.ownerDocument||x).$$reactFormReplay,S!=null)for(E=0;E<S.length;E+=3){var z=S[E],q=S[E+1],le=z[At]||null;if(typeof q=="function")le||HI(S);else if(le){var me=null;if(q&&q.hasAttribute("formAction")){if(z=q,le=q[At]||null)me=le.formAction;else if(NS(z)!==null)continue}else me=le.action;typeof me=="function"?S[E+1]=me:(S.splice(E,3),E-=3),HI(S)}}}function UI(){function x(q){q.canIntercept&&q.info==="react-transition"&&q.intercept({handler:function(){return new Promise(function(le){return z=le})},focusReset:"manual",scroll:"manual"})}function v(){z!==null&&(z(),z=null),E||setTimeout(S,20)}function S(){if(!E&&!navigation.transition){var q=navigation.currentEntry;q&&q.url!=null&&navigation.navigate(q.url,{state:q.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var E=!1,z=null;return navigation.addEventListener("navigate",x),navigation.addEventListener("navigatesuccess",v),navigation.addEventListener("navigateerror",v),setTimeout(S,100),function(){E=!0,navigation.removeEventListener("navigate",x),navigation.removeEventListener("navigatesuccess",v),navigation.removeEventListener("navigateerror",v),z!==null&&(z(),z=null)}}}function SS(x){this._internalRoot=x}V1.prototype.render=SS.prototype.render=function(x){var v=this._internalRoot;if(v===null)throw Error(r(409));var S=v.current,E=ho();RI(S,E,x,v,null,null)},V1.prototype.unmount=SS.prototype.unmount=function(){var x=this._internalRoot;if(x!==null){this._internalRoot=null;var v=x.containerInfo;RI(x.current,2,null,x,null,null),w1(),v[Vt]=null}};function V1(x){this._internalRoot=x}V1.prototype.unstable_scheduleHydration=function(x){if(x){var v=wt();x={blockedOn:null,target:x,priority:v};for(var S=0;S<Nu.length&&v!==0&&v<Nu[S].priority;S++);Nu.splice(S,0,x),S===0&&FI(x)}};var GI=e.version;if(GI!=="19.2.3")throw Error(r(527,GI,"19.2.3"));K.findDOMNode=function(x){var v=x._reactInternals;if(v===void 0)throw typeof x.render=="function"?Error(r(188)):(x=Object.keys(x).join(","),Error(r(268,x)));return x=d(v),x=x!==null?u(x):null,x=x===null?null:x.stateNode,x};var sJ={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var H1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!H1.isDisabled&&H1.supportsFiber)try{Tt=H1.inject(sJ),lt=H1}catch{}}return Bm.createRoot=function(x,v){if(!n(x))throw Error(r(299));var S=!1,E="",z=K6,q=Q6,le=J6;return v!=null&&(v.unstable_strictMode===!0&&(S=!0),v.identifierPrefix!==void 0&&(E=v.identifierPrefix),v.onUncaughtError!==void 0&&(z=v.onUncaughtError),v.onCaughtError!==void 0&&(q=v.onCaughtError),v.onRecoverableError!==void 0&&(le=v.onRecoverableError)),v=DI(x,1,!1,null,null,S,E,null,z,q,le,UI),x[Vt]=v.current,sS(x),new SS(v)},Bm.hydrateRoot=function(x,v,S){if(!n(x))throw Error(r(299));var E=!1,z="",q=K6,le=Q6,me=J6,De=null;return S!=null&&(S.unstable_strictMode===!0&&(E=!0),S.identifierPrefix!==void 0&&(z=S.identifierPrefix),S.onUncaughtError!==void 0&&(q=S.onUncaughtError),S.onCaughtError!==void 0&&(le=S.onCaughtError),S.onRecoverableError!==void 0&&(me=S.onRecoverableError),S.formState!==void 0&&(De=S.formState)),v=DI(x,1,!0,v,S??null,E,z,De,q,le,me,UI),v.context=II(null),S=v.current,E=ho(),E=Xe(E),z=lu(E),z.callback=null,cu(S,z,E),S=E,v.current.lanes=S,ai(v,S),Yl(v),x[Vt]=v.current,sS(x),new V1(v)},Bm.version="19.2.3",Bm}var e8;function gJ(){if(e8)return AS.exports;e8=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),AS.exports=mJ(),AS.exports}var vJ=gJ();var GV=a=>{throw TypeError(a)},bJ=(a,e,t)=>e.has(a)||GV("Cannot "+t),DS=(a,e,t)=>(bJ(a,e,"read from private field"),t?t.call(a):e.get(a)),yJ=(a,e,t)=>e.has(a)?GV("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),t8="popstate";function wJ(a={}){function e(r,n){let{pathname:i,search:o,hash:l}=r.location;return vv("",{pathname:i,search:o,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function t(r,n){return typeof n=="string"?n:Nc(n)}return NJ(e,t,null,a)}function Qa(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function Zn(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _J(){return Math.random().toString(36).substring(2,10)}function a8(a,e){return{usr:a.state,key:a.key,idx:e}}function vv(a,e,t=null,r){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof e=="string"?jh(e):e,state:t,key:e&&e.key||r||_J()}}function Nc({pathname:a="/",search:e="",hash:t=""}){return e&&e!=="?"&&(a+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(a+=t.charAt(0)==="#"?t:"#"+t),a}function jh(a){let e={};if(a){let t=a.indexOf("#");t>=0&&(e.hash=a.substring(t),a=a.substring(0,t));let r=a.indexOf("?");r>=0&&(e.search=a.substring(r),a=a.substring(0,r)),a&&(e.pathname=a)}return e}function NJ(a,e,t,r={}){let{window:n=document.defaultView,v5Compat:i=!1}=r,o=n.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let w=u(),_=w==null?null:w-d;d=w,c&&c({action:l,location:b.location,delta:_})}function f(w,_){l="PUSH";let k=vv(b.location,w,_);d=u()+1;let T=a8(k,d),D=b.createHref(k);try{o.pushState(T,"",D)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;n.location.assign(D)}i&&c&&c({action:l,location:b.location,delta:1})}function p(w,_){l="REPLACE";let k=vv(b.location,w,_);d=u();let T=a8(k,d),D=b.createHref(k);o.replaceState(T,"",D),i&&c&&c({action:l,location:b.location,delta:0})}function g(w){return WV(w)}let b={get action(){return l},get location(){return a(n,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(t8,h),c=w,()=>{n.removeEventListener(t8,h),c=null}},createHref(w){return e(n,w)},createURL:g,encodeLocation(w){let _=g(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:p,go(w){return o.go(w)}};return b}function WV(a,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Qa(t,"No window.location.(origin|href) available to create URL");let r=typeof a=="string"?a:Nc(a);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}var Cg,r8=class{constructor(a){if(yJ(this,Cg,new Map),a)for(let[e,t]of a)this.set(e,t)}get(a){if(DS(this,Cg).has(a))return DS(this,Cg).get(a);if(a.defaultValue!==void 0)return a.defaultValue;throw new Error("No value found for context")}set(a,e){DS(this,Cg).set(a,e)}};Cg=new WeakMap;var jJ=new Set(["lazy","caseSensitive","path","id","index","children"]);function SJ(a){return jJ.has(a)}var kJ=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function CJ(a){return kJ.has(a)}function AJ(a){return a.index===!0}function bv(a,e,t=[],r={},n=!1){return a.map((i,o)=>{let l=[...t,String(o)],c=typeof i.id=="string"?i.id:l.join("-");if(Qa(i.index!==!0||!i.children,"Cannot specify children on an index route"),Qa(n||!r[c],`Found a route id collision on id "${c}".  Route id's must be globally unique within Data Router usages`),AJ(i)){let d={...i,id:c};return r[c]=n8(d,e(d)),d}else{let d={...i,id:c,children:void 0};return r[c]=n8(d,e(d)),i.children&&(d.children=bv(i.children,e,l,r,n)),d}})}function n8(a,e){return Object.assign(a,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...a.lazy,...e.lazy}}:{}})}function Fu(a,e,t="/"){return Ag(a,e,t,!1)}function Ag(a,e,t,r){let n=typeof e=="string"?jh(e):e,i=Xs(n.pathname||"/",t);if(i==null)return null;let o=$V(a);MJ(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=VJ(i);l=zJ(o[c],d,r)}return l}function TJ(a,e){let{route:t,pathname:r,params:n}=a;return{id:t.id,pathname:r,params:n,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function $V(a,e=[],t=[],r="",n=!1){let i=(o,l,c=n,d)=>{let u={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&c)return;Qa(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length)}let h=xc([r,u.relativePath]),f=t.concat(u);o.children&&o.children.length>0&&(Qa(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),$V(o.children,e,f,h,c)),!(o.path==null&&!o.index)&&e.push({path:h,score:PJ(h,o.index),routesMeta:f})};return a.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))i(o,l);else for(let c of YV(o.path))i(o,l,!0,c)}),e}function YV(a){let e=a.split("/");if(e.length===0)return[];let[t,...r]=e,n=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return n?[i,""]:[i];let o=YV(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),n&&l.push(...o),l.map(c=>a.startsWith("/")&&c===""?"/":c)}function MJ(a){a.sort((e,t)=>e.score!==t.score?t.score-e.score:BJ(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var EJ=/^:[\w-]+$/,DJ=3,IJ=2,RJ=1,LJ=10,OJ=-2,i8=a=>a==="*";function PJ(a,e){let t=a.split("/"),r=t.length;return t.some(i8)&&(r+=OJ),e&&(r+=IJ),t.filter(n=>!i8(n)).reduce((n,i)=>n+(EJ.test(i)?DJ:i===""?RJ:LJ),r)}function BJ(a,e){return a.length===e.length&&a.slice(0,-1).every((r,n)=>r===e[n])?a[a.length-1]-e[e.length-1]:0}function zJ(a,e,t=!1){let{routesMeta:r}=a,n={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=a2({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h&&d&&t&&!r[r.length-1].route.index&&(h=a2({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(n,h.params),o.push({params:n,pathname:xc([i,h.pathname]),pathnameBase:GJ(xc([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=xc([i,h.pathnameBase]))}return o}function a2(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[t,r]=FJ(a.path,a.caseSensitive,a.end),n=e.match(t);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:r.reduce((d,{paramName:u,isOptional:h},f)=>{if(u==="*"){let g=l[f]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=l[f];return h&&!p?d[u]=void 0:d[u]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:a}}function FJ(a,e=!1,t=!0){Zn(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let r=[],n="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(r.push({paramName:"*"}),n+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":a!==""&&a!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),r]}function VJ(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zn(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),a}}function Xs(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=a.charAt(t);return r&&r!=="/"?null:a.slice(t)||"/"}function HJ({basename:a,pathname:e}){return e==="/"?a:xc([a,e])}var qV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DA=a=>qV.test(a);function UJ(a,e="/"){let{pathname:t,search:r="",hash:n=""}=typeof a=="string"?jh(a):a,i;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?i=s8(t.substring(1),"/"):i=s8(t,e)):i=e,{pathname:i,search:WJ(r),hash:$J(n)}}function s8(a,e){let t=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function IS(a,e,t,r){return`Cannot include a '${a}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function XV(a){return a.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function D_(a){let e=XV(a);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function I_(a,e,t,r=!1){let n;typeof a=="string"?n=jh(a):(n={...a},Qa(!n.pathname||!n.pathname.includes("?"),IS("?","pathname","search",n)),Qa(!n.pathname||!n.pathname.includes("#"),IS("#","pathname","hash",n)),Qa(!n.search||!n.search.includes("#"),IS("#","search","hash",n)));let i=a===""||n.pathname==="",o=i?"/":n.pathname,l;if(o==null)l=t;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;n.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=UJ(n,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var xc=a=>a.join("/").replace(/\/\/+/g,"/"),GJ=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),WJ=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,$J=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a,pb=class{constructor(a,e,t,r=!1){this.status=a,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function yv(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}function xb(a){return a.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ZV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function KV(a,e){let t=a;if(typeof t!="string"||!qV.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,n=!1;if(ZV)try{let i=new URL(window.location.href),o=t.startsWith("//")?new URL(i.protocol+t):new URL(t),l=Xs(o.pathname,e);o.origin===i.origin&&l!=null?t=l+o.search+o.hash:n=!0}catch{Zn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:n,to:t}}var Hu=Symbol("Uninstrumented");function YJ(a,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};a.forEach(n=>n({id:e.id,index:e.index,path:e.path,instrument(i){let o=Object.keys(t);for(let l of o)i[l]&&t[l].push(i[l])}}));let r={};if(typeof e.lazy=="function"&&t.lazy.length>0){let n=$p(t.lazy,e.lazy,()=>{});n&&(r.lazy=n)}if(typeof e.lazy=="object"){let n=e.lazy;["middleware","loader","action"].forEach(i=>{let o=n[i],l=t[`lazy.${i}`];if(typeof o=="function"&&l.length>0){let c=$p(l,o,()=>{});c&&(r.lazy=Object.assign(r.lazy||{},{[i]:c}))}})}return["loader","action"].forEach(n=>{let i=e[n];if(typeof i=="function"&&t[n].length>0){let o=i[Hu]??i,l=$p(t[n],o,(...c)=>o8(c[0]));l&&(n==="loader"&&o.hydrate===!0&&(l.hydrate=!0),l[Hu]=o,r[n]=l)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(r.middleware=e.middleware.map(n=>{let i=n[Hu]??n,o=$p(t.middleware,i,(...l)=>o8(l[0]));return o?(o[Hu]=i,o):n})),r}function qJ(a,e){let t={navigate:[],fetch:[]};if(e.forEach(r=>r({instrument(n){let i=Object.keys(n);for(let o of i)n[o]&&t[o].push(n[o])}})),t.navigate.length>0){let r=a.navigate[Hu]??a.navigate,n=$p(t.navigate,r,(...i)=>{let[o,l]=i;return{to:typeof o=="number"||typeof o=="string"?o:o?Nc(o):".",...l8(a,l??{})}});n&&(n[Hu]=r,a.navigate=n)}if(t.fetch.length>0){let r=a.fetch[Hu]??a.fetch,n=$p(t.fetch,r,(...i)=>{let[o,,l,c]=i;return{href:l??".",fetcherKey:o,...l8(a,c??{})}});n&&(n[Hu]=r,a.fetch=n)}return a}function $p(a,e,t){return a.length===0?null:async(...r)=>{let n=await QV(a,t(...r),()=>e(...r),a.length-1);if(n.type==="error")throw n.value;return n.value}}async function QV(a,e,t,r){let n=a[r],i;if(n){let o,l=async()=>(o?console.error("You cannot call instrumented handlers more than once"):o=QV(a,e,t,r-1),i=await o,Qa(i,"Expected a result"),i.type==="error"&&i.value instanceof Error?{status:"error",error:i.value}:{status:"success",error:void 0});try{await n(l,e)}catch(c){console.error("An instrumentation function threw an error:",c)}o||await l(),await o}else try{i={type:"success",value:await t()}}catch(o){i={type:"error",value:o}}return i||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function o8(a){let{request:e,context:t,params:r,unstable_pattern:n}=a;return{request:XJ(e),params:{...r},unstable_pattern:n,context:ZJ(t)}}function l8(a,e){return{currentUrl:Nc(a.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function XJ(a){return{method:a.method,url:a.url,headers:{get:(...e)=>a.headers.get(...e)}}}function ZJ(a){if(QJ(a)){let e={...a};return Object.freeze(e),e}else return{get:e=>a.get(e)}}var KJ=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function QJ(a){if(a===null||typeof a!="object")return!1;const e=Object.getPrototypeOf(a);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===KJ}var JV=["POST","PUT","PATCH","DELETE"],JJ=new Set(JV),eee=["GET",...JV],tee=new Set(eee),eH=new Set([301,302,303,307,308]),aee=new Set([307,308]),RS={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ree={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Fp={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},nee=a=>({hasErrorBoundary:!!a.hasErrorBoundary}),tH="remix-router-transitions",aH=Symbol("ResetLoaderData");function iee(a){const e=a.window?a.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Qa(a.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=a.hydrationRouteProperties||[],n=a.mapRouteProperties||nee,i=n;if(a.unstable_instrumentations){let Ae=a.unstable_instrumentations;i=Be=>({...n(Be),...YJ(Ae.map(Xe=>Xe.route).filter(Boolean),Be)})}let o={},l=bv(a.routes,i,void 0,o),c,d=a.basename||"/";d.startsWith("/")||(d=`/${d}`);let u=a.dataStrategy||dee,h={...a.future},f=null,p=new Set,g=null,b=null,w=null,_=a.hydrationData!=null,k=Fu(l,a.history.location,d),T=!1,D=null,I;if(k==null&&!a.patchRoutesOnNavigation){let Ae=$o(404,{pathname:a.history.location.pathname}),{matches:Be,route:Xe}=U1(l);I=!0,k=Be,D={[Xe.id]:Ae}}else if(k&&!a.hydrationData&&cn(k,l,a.history.location.pathname).active&&(k=null),k)if(k.some(Ae=>Ae.route.lazy))I=!1;else if(!k.some(Ae=>IA(Ae.route)))I=!0;else{let Ae=a.hydrationData?a.hydrationData.loaderData:null,Be=a.hydrationData?a.hydrationData.errors:null;if(Be){let Xe=k.findIndex(gt=>Be[gt.route.id]!==void 0);I=k.slice(0,Xe+1).every(gt=>!LC(gt.route,Ae,Be))}else I=k.every(Xe=>!LC(Xe.route,Ae,Be))}else{I=!1,k=[];let Ae=cn(null,l,a.history.location.pathname);Ae.active&&Ae.matches&&(T=!0,k=Ae.matches)}let O,P={historyAction:a.history.action,location:a.history.location,matches:k,initialized:I,navigation:RS,restoreScrollPosition:a.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:a.hydrationData&&a.hydrationData.loaderData||{},actionData:a.hydrationData&&a.hydrationData.actionData||null,errors:a.hydrationData&&a.hydrationData.errors||D,fetchers:new Map,blockers:new Map},V="POP",G=null,Q=!1,$,ae=!1,J=new Map,U=null,F=!1,W=!1,K=new Set,ee=new Map,ne=0,re=-1,Z=new Map,ie=new Set,de=new Map,fe=new Map,he=new Set,ve=new Map,Oe,Se=null;function Ce(){if(f=a.history.listen(({action:Ae,location:Be,delta:Xe})=>{if(Oe){Oe(),Oe=void 0;return}Zn(ve.size===0||Xe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let gt=Ya({currentLocation:P.location,nextLocation:Be,historyAction:Ae});if(gt&&Xe!=null){let wt=new Promise(ot=>{Oe=ot});a.history.go(Xe*-1),It(gt,{state:"blocked",location:Be,proceed(){It(gt,{state:"proceeding",proceed:void 0,reset:void 0,location:Be}),wt.then(()=>a.history.go(Xe))},reset(){let ot=new Map(P.blockers);ot.set(gt,Fp),be({blockers:ot})}}),G?.resolve(),G=null;return}return Re(Ae,Be)}),t){Aee(e,J);let Ae=()=>Tee(e,J);e.addEventListener("pagehide",Ae),U=()=>e.removeEventListener("pagehide",Ae)}return P.initialized||Re("POP",P.location,{initialHydration:!0}),O}function we(){f&&f(),U&&U(),p.clear(),$&&$.abort(),P.fetchers.forEach((Ae,Be)=>st(Be)),P.blockers.forEach((Ae,Be)=>hs(Be))}function xe(Ae){return p.add(Ae),()=>p.delete(Ae)}function be(Ae,Be={}){Ae.matches&&(Ae.matches=Ae.matches.map(wt=>{let ot=o[wt.route.id],Lt=wt.route;return Lt.element!==ot.element||Lt.errorElement!==ot.errorElement||Lt.hydrateFallbackElement!==ot.hydrateFallbackElement?{...wt,route:ot}:wt})),P={...P,...Ae};let Xe=[],gt=[];P.fetchers.forEach((wt,ot)=>{wt.state==="idle"&&(he.has(ot)?Xe.push(ot):gt.push(ot))}),he.forEach(wt=>{!P.fetchers.has(wt)&&!ee.has(wt)&&Xe.push(wt)}),[...p].forEach(wt=>wt(P,{deletedFetchers:Xe,newErrors:Ae.errors??null,viewTransitionOpts:Be.viewTransitionOpts,flushSync:Be.flushSync===!0})),Xe.forEach(wt=>st(wt)),gt.forEach(wt=>P.fetchers.delete(wt))}function Ee(Ae,Be,{flushSync:Xe}={}){let gt=P.actionData!=null&&P.navigation.formMethod!=null&&ts(P.navigation.formMethod)&&P.navigation.state==="loading"&&Ae.state?._isRedirect!==!0,wt;Be.actionData?Object.keys(Be.actionData).length>0?wt=Be.actionData:wt=null:gt?wt=P.actionData:wt=null;let ot=Be.loaderData?v8(P.loaderData,Be.loaderData,Be.matches||[],Be.errors):P.loaderData,Lt=P.blockers;Lt.size>0&&(Lt=new Map(Lt),Lt.forEach((ca,sa)=>Lt.set(sa,Fp)));let Et=F?!1:Ol(Ae,Be.matches||P.matches),At=Q===!0||P.navigation.formMethod!=null&&ts(P.navigation.formMethod)&&Ae.state?._isRedirect!==!0;c&&(l=c,c=void 0),F||V==="POP"||(V==="PUSH"?a.history.push(Ae,Ae.state):V==="REPLACE"&&a.history.replace(Ae,Ae.state));let Vt;if(V==="POP"){let ca=J.get(P.location.pathname);ca&&ca.has(Ae.pathname)?Vt={currentLocation:P.location,nextLocation:Ae}:J.has(Ae.pathname)&&(Vt={currentLocation:Ae,nextLocation:P.location})}else if(ae){let ca=J.get(P.location.pathname);ca?ca.add(Ae.pathname):(ca=new Set([Ae.pathname]),J.set(P.location.pathname,ca)),Vt={currentLocation:P.location,nextLocation:Ae}}be({...Be,actionData:wt,loaderData:ot,historyAction:V,location:Ae,initialized:!0,navigation:RS,revalidation:"idle",restoreScrollPosition:Et,preventScrollReset:At,blockers:Lt},{viewTransitionOpts:Vt,flushSync:Xe===!0}),V="POP",Q=!1,ae=!1,F=!1,W=!1,G?.resolve(),G=null,Se?.resolve(),Se=null}async function ze(Ae,Be){if(G?.resolve(),G=null,typeof Ae=="number"){G||(G=_8());let nr=G.promise;return a.history.go(Ae),nr}let Xe=RC(P.location,P.matches,d,Ae,Be?.fromRouteId,Be?.relative),{path:gt,submission:wt,error:ot}=c8(!1,Xe,Be),Lt=P.location,Et=vv(P.location,gt,Be&&Be.state);Et={...Et,...a.history.encodeLocation(Et)};let At=Be&&Be.replace!=null?Be.replace:void 0,Vt="PUSH";At===!0?Vt="REPLACE":At===!1||wt!=null&&ts(wt.formMethod)&&wt.formAction===P.location.pathname+P.location.search&&(Vt="REPLACE");let ca=Be&&"preventScrollReset"in Be?Be.preventScrollReset===!0:void 0,sa=(Be&&Be.flushSync)===!0,ja=Ya({currentLocation:Lt,nextLocation:Et,historyAction:Vt});if(ja){It(ja,{state:"blocked",location:Et,proceed(){It(ja,{state:"proceeding",proceed:void 0,reset:void 0,location:Et}),ze(Ae,Be)},reset(){let nr=new Map(P.blockers);nr.set(ja,Fp),be({blockers:nr})}});return}await Re(Vt,Et,{submission:wt,pendingError:ot,preventScrollReset:ca,replace:Be&&Be.replace,enableViewTransition:Be&&Be.viewTransition,flushSync:sa,callSiteDefaultShouldRevalidate:Be&&Be.unstable_defaultShouldRevalidate})}function Ze(){Se||(Se=_8()),Lr(),be({revalidation:"loading"});let Ae=Se.promise;return P.navigation.state==="submitting"?Ae:P.navigation.state==="idle"?(Re(P.historyAction,P.location,{startUninterruptedRevalidation:!0}),Ae):(Re(V||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation,enableViewTransition:ae===!0}),Ae)}async function Re(Ae,Be,Xe){$&&$.abort(),$=null,V=Ae,F=(Xe&&Xe.startUninterruptedRevalidation)===!0,_n(P.location,P.matches),Q=(Xe&&Xe.preventScrollReset)===!0,ae=(Xe&&Xe.enableViewTransition)===!0;let gt=c||l,wt=Xe&&Xe.overrideNavigation,ot=Xe?.initialHydration&&P.matches&&P.matches.length>0&&!T?P.matches:Fu(gt,Be,d),Lt=(Xe&&Xe.flushSync)===!0;if(ot&&P.initialized&&!W&&vee(P.location,Be)&&!(Xe&&Xe.submission&&ts(Xe.submission.formMethod))){Ee(Be,{matches:ot},{flushSync:Lt});return}let Et=cn(ot,gt,Be.pathname);if(Et.active&&Et.matches&&(ot=Et.matches),!ot){let{error:pr,notFoundMatches:Za,route:Ot}=xi(Be.pathname);Ee(Be,{matches:Za,loaderData:{},errors:{[Ot.id]:pr}},{flushSync:Lt});return}$=new AbortController;let At=Vp(a.history,Be,$.signal,Xe&&Xe.submission),Vt=a.getContext?await a.getContext():new r8,ca;if(Xe&&Xe.pendingError)ca=[Vu(ot).route.id,{type:"error",error:Xe.pendingError}];else if(Xe&&Xe.submission&&ts(Xe.submission.formMethod)){let pr=await ut(At,Be,Xe.submission,ot,Vt,Et.active,Xe&&Xe.initialHydration===!0,{replace:Xe.replace,flushSync:Lt});if(pr.shortCircuited)return;if(pr.pendingActionResult){let[Za,Ot]=pr.pendingActionResult;if(vo(Ot)&&yv(Ot.error)&&Ot.error.status===404){$=null,Ee(Be,{matches:pr.matches,loaderData:{},errors:{[Za]:Ot.error}});return}}ot=pr.matches||ot,ca=pr.pendingActionResult,wt=LS(Be,Xe.submission),Lt=!1,Et.active=!1,At=Vp(a.history,At.url,At.signal)}let{shortCircuited:sa,matches:ja,loaderData:nr,errors:Nr}=await vt(At,Be,ot,Vt,Et.active,wt,Xe&&Xe.submission,Xe&&Xe.fetcherSubmission,Xe&&Xe.replace,Xe&&Xe.initialHydration===!0,Lt,ca,Xe&&Xe.callSiteDefaultShouldRevalidate);sa||($=null,Ee(Be,{matches:ja||ot,...b8(ca),loaderData:nr,errors:Nr}))}async function ut(Ae,Be,Xe,gt,wt,ot,Lt,Et={}){Lr();let At=kee(Be,Xe);if(be({navigation:At},{flushSync:Et.flushSync===!0}),ot){let sa=await kn(gt,Be.pathname,Ae.signal);if(sa.type==="aborted")return{shortCircuited:!0};if(sa.type==="error"){if(sa.partialMatches.length===0){let{matches:nr,route:Nr}=U1(l);return{matches:nr,pendingActionResult:[Nr.id,{type:"error",error:sa.error}]}}let ja=Vu(sa.partialMatches).route.id;return{matches:sa.partialMatches,pendingActionResult:[ja,{type:"error",error:sa.error}]}}else if(sa.matches)gt=sa.matches;else{let{notFoundMatches:ja,error:nr,route:Nr}=xi(Be.pathname);return{matches:ja,pendingActionResult:[Nr.id,{type:"error",error:nr}]}}}let Vt,ca=Nw(gt,Be);if(!ca.route.action&&!ca.route.lazy)Vt={type:"error",error:$o(405,{method:Ae.method,pathname:Be.pathname,routeId:ca.route.id})};else{let sa=ax(i,o,Ae,gt,ca,Lt?[]:r,wt),ja=await Da(Ae,sa,wt,null);if(Vt=ja[ca.route.id],!Vt){for(let nr of gt)if(ja[nr.route.id]){Vt=ja[nr.route.id];break}}if(Ae.signal.aborted)return{shortCircuited:!0}}if(Hf(Vt)){let sa;return Et&&Et.replace!=null?sa=Et.replace:sa=x8(Vt.response.headers.get("Location"),new URL(Ae.url),d,a.history)===P.location.pathname+P.location.search,await Bt(Ae,Vt,!0,{submission:Xe,replace:sa}),{shortCircuited:!0}}if(vo(Vt)){let sa=Vu(gt,ca.route.id);return(Et&&Et.replace)!==!0&&(V="PUSH"),{matches:gt,pendingActionResult:[sa.route.id,Vt,ca.route.id]}}return{matches:gt,pendingActionResult:[ca.route.id,Vt]}}async function vt(Ae,Be,Xe,gt,wt,ot,Lt,Et,At,Vt,ca,sa,ja){let nr=ot||LS(Be,Lt),Nr=Lt||Et||w8(nr),pr=!F&&!Vt;if(wt){if(pr){let ua=yt(sa);be({navigation:nr,...ua!==void 0?{actionData:ua}:{}},{flushSync:ca})}let Wt=await kn(Xe,Be.pathname,Ae.signal);if(Wt.type==="aborted")return{shortCircuited:!0};if(Wt.type==="error"){if(Wt.partialMatches.length===0){let{matches:ki,route:mn}=U1(l);return{matches:ki,loaderData:{},errors:{[mn.id]:Wt.error}}}let ua=Vu(Wt.partialMatches).route.id;return{matches:Wt.partialMatches,loaderData:{},errors:{[ua]:Wt.error}}}else if(Wt.matches)Xe=Wt.matches;else{let{error:ua,notFoundMatches:ki,route:mn}=xi(Be.pathname);return{matches:ki,loaderData:{},errors:{[mn.id]:ua}}}}let Za=c||l,{dsMatches:Ot,revalidatingFetchers:Hr}=d8(Ae,gt,i,o,a.history,P,Xe,Nr,Be,Vt?[]:r,Vt===!0,W,K,he,de,ie,Za,d,a.patchRoutesOnNavigation!=null,sa,ja);if(re=++ne,!a.dataStrategy&&!Ot.some(Wt=>Wt.shouldLoad)&&!Ot.some(Wt=>Wt.route.middleware&&Wt.route.middleware.length>0)&&Hr.length===0){let Wt=xt();return Ee(Be,{matches:Xe,loaderData:{},errors:sa&&vo(sa[1])?{[sa[0]]:sa[1].error}:null,...b8(sa),...Wt?{fetchers:new Map(P.fetchers)}:{}},{flushSync:ca}),{shortCircuited:!0}}if(pr){let Wt={};if(!wt){Wt.navigation=nr;let ua=yt(sa);ua!==void 0&&(Wt.actionData=ua)}Hr.length>0&&(Wt.fetchers=Ue(Hr)),be(Wt,{flushSync:ca})}Hr.forEach(Wt=>{lt(Wt.key),Wt.controller&&ee.set(Wt.key,Wt.controller)});let jr=()=>Hr.forEach(Wt=>lt(Wt.key));$&&$.signal.addEventListener("abort",jr);let{loaderResults:Er,fetcherResults:dt}=await zt(Ot,Hr,Ae,gt);if(Ae.signal.aborted)return{shortCircuited:!0};$&&$.signal.removeEventListener("abort",jr),Hr.forEach(Wt=>ee.delete(Wt.key));let ri=G1(Er);if(ri)return await Bt(Ae,ri.result,!0,{replace:At}),{shortCircuited:!0};if(ri=G1(dt),ri)return ie.add(ri.key),await Bt(Ae,ri.result,!0,{replace:At}),{shortCircuited:!0};let{loaderData:sr,errors:Nn}=g8(P,Xe,Er,sa,Hr,dt);Vt&&P.errors&&(Nn={...P.errors,...Nn});let mi=xt(),er=la(re),Ha=mi||er||Hr.length>0;return{matches:Xe,loaderData:sr,errors:Nn,...Ha?{fetchers:new Map(P.fetchers)}:{}}}function yt(Ae){if(Ae&&!vo(Ae[1]))return{[Ae[0]]:Ae[1].data};if(P.actionData)return Object.keys(P.actionData).length===0?null:P.actionData}function Ue(Ae){return Ae.forEach(Be=>{let Xe=P.fetchers.get(Be.key),gt=zm(void 0,Xe?Xe.data:void 0);P.fetchers.set(Be.key,gt)}),new Map(P.fetchers)}async function Ye(Ae,Be,Xe,gt){lt(Ae);let wt=(gt&&gt.flushSync)===!0,ot=c||l,Lt=RC(P.location,P.matches,d,Xe,Be,gt?.relative),Et=Fu(ot,Lt,d),At=cn(Et,ot,Lt);if(At.active&&At.matches&&(Et=At.matches),!Et){Ca(Ae,Be,$o(404,{pathname:Lt}),{flushSync:wt});return}let{path:Vt,submission:ca,error:sa}=c8(!0,Lt,gt);if(sa){Ca(Ae,Be,sa,{flushSync:wt});return}let ja=a.getContext?await a.getContext():new r8,nr=(gt&&gt.preventScrollReset)===!0;if(ca&&ts(ca.formMethod)){await Ht(Ae,Be,Vt,Et,ja,At.active,wt,nr,ca,gt&&gt.unstable_defaultShouldRevalidate);return}de.set(Ae,{routeId:Be,path:Vt}),await ta(Ae,Be,Vt,Et,ja,At.active,wt,nr,ca)}async function Ht(Ae,Be,Xe,gt,wt,ot,Lt,Et,At,Vt){Lr(),de.delete(Ae);let ca=P.fetchers.get(Ae);ka(Ae,Cee(At,ca),{flushSync:Lt});let sa=new AbortController,ja=Vp(a.history,Xe,sa.signal,At);if(ot){let fa=await kn(gt,new URL(ja.url).pathname,ja.signal,Ae);if(fa.type==="aborted")return;if(fa.type==="error"){Ca(Ae,Be,fa.error,{flushSync:Lt});return}else if(fa.matches)gt=fa.matches;else{Ca(Ae,Be,$o(404,{pathname:Xe}),{flushSync:Lt});return}}let nr=Nw(gt,Xe);if(!nr.route.action&&!nr.route.lazy){let fa=$o(405,{method:At.formMethod,pathname:Xe,routeId:Be});Ca(Ae,Be,fa,{flushSync:Lt});return}ee.set(Ae,sa);let Nr=ne,pr=ax(i,o,ja,gt,nr,r,wt),Za=await Da(ja,pr,wt,Ae),Ot=Za[nr.route.id];if(!Ot){for(let fa of pr)if(Za[fa.route.id]){Ot=Za[fa.route.id];break}}if(ja.signal.aborted){ee.get(Ae)===sa&&ee.delete(Ae);return}if(he.has(Ae)){if(Hf(Ot)||vo(Ot)){ka(Ae,hd(void 0));return}}else{if(Hf(Ot))if(ee.delete(Ae),re>Nr){ka(Ae,hd(void 0));return}else return ie.add(Ae),ka(Ae,zm(At)),Bt(ja,Ot,!1,{fetcherSubmission:At,preventScrollReset:Et});if(vo(Ot)){Ca(Ae,Be,Ot.error);return}}let Hr=P.navigation.location||P.location,jr=Vp(a.history,Hr,sa.signal),Er=c||l,dt=P.navigation.state!=="idle"?Fu(Er,P.navigation.location,d):P.matches;Qa(dt,"Didn't find any matches after fetcher action");let ri=++ne;Z.set(Ae,ri);let sr=zm(At,Ot.data);P.fetchers.set(Ae,sr);let{dsMatches:Nn,revalidatingFetchers:mi}=d8(jr,wt,i,o,a.history,P,dt,At,Hr,r,!1,W,K,he,de,ie,Er,d,a.patchRoutesOnNavigation!=null,[nr.route.id,Ot],Vt);mi.filter(fa=>fa.key!==Ae).forEach(fa=>{let Cn=fa.key,Pc=P.fetchers.get(Cn),Or=zm(void 0,Pc?Pc.data:void 0);P.fetchers.set(Cn,Or),lt(Cn),fa.controller&&ee.set(Cn,fa.controller)}),be({fetchers:new Map(P.fetchers)});let er=()=>mi.forEach(fa=>lt(fa.key));sa.signal.addEventListener("abort",er);let{loaderResults:Ha,fetcherResults:Wt}=await zt(Nn,mi,jr,wt);if(sa.signal.aborted)return;if(sa.signal.removeEventListener("abort",er),Z.delete(Ae),ee.delete(Ae),mi.forEach(fa=>ee.delete(fa.key)),P.fetchers.has(Ae)){let fa=hd(Ot.data);P.fetchers.set(Ae,fa)}let ua=G1(Ha);if(ua)return Bt(jr,ua.result,!1,{preventScrollReset:Et});if(ua=G1(Wt),ua)return ie.add(ua.key),Bt(jr,ua.result,!1,{preventScrollReset:Et});let{loaderData:ki,errors:mn}=g8(P,dt,Ha,void 0,mi,Wt);la(ri),P.navigation.state==="loading"&&ri>re?(Qa(V,"Expected pending action"),$&&$.abort(),Ee(P.navigation.location,{matches:dt,loaderData:ki,errors:mn,fetchers:new Map(P.fetchers)})):(be({errors:mn,loaderData:v8(P.loaderData,ki,dt,mn),fetchers:new Map(P.fetchers)}),W=!1)}async function ta(Ae,Be,Xe,gt,wt,ot,Lt,Et,At){let Vt=P.fetchers.get(Ae);ka(Ae,zm(At,Vt?Vt.data:void 0),{flushSync:Lt});let ca=new AbortController,sa=Vp(a.history,Xe,ca.signal);if(ot){let Ot=await kn(gt,new URL(sa.url).pathname,sa.signal,Ae);if(Ot.type==="aborted")return;if(Ot.type==="error"){Ca(Ae,Be,Ot.error,{flushSync:Lt});return}else if(Ot.matches)gt=Ot.matches;else{Ca(Ae,Be,$o(404,{pathname:Xe}),{flushSync:Lt});return}}let ja=Nw(gt,Xe);ee.set(Ae,ca);let nr=ne,Nr=ax(i,o,sa,gt,ja,r,wt),Za=(await Da(sa,Nr,wt,Ae))[ja.route.id];if(ee.get(Ae)===ca&&ee.delete(Ae),!sa.signal.aborted){if(he.has(Ae)){ka(Ae,hd(void 0));return}if(Hf(Za))if(re>nr){ka(Ae,hd(void 0));return}else{ie.add(Ae),await Bt(sa,Za,!1,{preventScrollReset:Et});return}if(vo(Za)){Ca(Ae,Be,Za.error);return}ka(Ae,hd(Za.data))}}async function Bt(Ae,Be,Xe,{submission:gt,fetcherSubmission:wt,preventScrollReset:ot,replace:Lt}={}){Xe||(G?.resolve(),G=null),Be.response.headers.has("X-Remix-Revalidate")&&(W=!0);let Et=Be.response.headers.get("Location");Qa(Et,"Expected a Location header on the redirect Response"),Et=x8(Et,new URL(Ae.url),d,a.history);let At=vv(P.location,Et,{_isRedirect:!0});if(t){let Nr=!1;if(Be.response.headers.has("X-Remix-Reload-Document"))Nr=!0;else if(DA(Et)){const pr=WV(Et,!0);Nr=pr.origin!==e.location.origin||Xs(pr.pathname,d)==null}if(Nr){Lt?e.location.replace(Et):e.location.assign(Et);return}}$=null;let Vt=Lt===!0||Be.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ca,formAction:sa,formEncType:ja}=P.navigation;!gt&&!wt&&ca&&sa&&ja&&(gt=w8(P.navigation));let nr=gt||wt;if(aee.has(Be.response.status)&&nr&&ts(nr.formMethod))await Re(Vt,At,{submission:{...nr,formAction:Et},preventScrollReset:ot||Q,enableViewTransition:Xe?ae:void 0});else{let Nr=LS(At,gt);await Re(Vt,At,{overrideNavigation:Nr,fetcherSubmission:wt,preventScrollReset:ot||Q,enableViewTransition:Xe?ae:void 0})}}async function Da(Ae,Be,Xe,gt){let wt,ot={};try{wt=await hee(u,Ae,Be,gt,Xe,!1)}catch(Lt){return Be.filter(Et=>Et.shouldLoad).forEach(Et=>{ot[Et.route.id]={type:"error",error:Lt}}),ot}if(Ae.signal.aborted)return ot;if(!ts(Ae.method))for(let Lt of Be){if(wt[Lt.route.id]?.type==="error")break;!wt.hasOwnProperty(Lt.route.id)&&!P.loaderData.hasOwnProperty(Lt.route.id)&&(!P.errors||!P.errors.hasOwnProperty(Lt.route.id))&&Lt.shouldCallHandler()&&(wt[Lt.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${Lt.route.id}`)})}for(let[Lt,Et]of Object.entries(wt))if(_ee(Et)){let At=Et.result;ot[Lt]={type:"redirect",response:mee(At,Ae,Lt,Be,d)}}else ot[Lt]=await xee(Et);return ot}async function zt(Ae,Be,Xe,gt){let wt=Da(Xe,Ae,gt,null),ot=Promise.all(Be.map(async At=>{if(At.matches&&At.match&&At.request&&At.controller){let ca=(await Da(At.request,At.matches,gt,At.key))[At.match.route.id];return{[At.key]:ca}}else return Promise.resolve({[At.key]:{type:"error",error:$o(404,{pathname:At.path})}})})),Lt=await wt,Et=(await ot).reduce((At,Vt)=>Object.assign(At,Vt),{});return{loaderResults:Lt,fetcherResults:Et}}function Lr(){W=!0,de.forEach((Ae,Be)=>{ee.has(Be)&&K.add(Be),lt(Be)})}function ka(Ae,Be,Xe={}){P.fetchers.set(Ae,Be),be({fetchers:new Map(P.fetchers)},{flushSync:(Xe&&Xe.flushSync)===!0})}function Ca(Ae,Be,Xe,gt={}){let wt=Vu(P.matches,Be);st(Ae),be({errors:{[wt.route.id]:Xe},fetchers:new Map(P.fetchers)},{flushSync:(gt&&gt.flushSync)===!0})}function Sn(Ae){return fe.set(Ae,(fe.get(Ae)||0)+1),he.has(Ae)&&he.delete(Ae),P.fetchers.get(Ae)||ree}function Ie(Ae,Be){lt(Ae,Be?.reason),ka(Ae,hd(null))}function st(Ae){let Be=P.fetchers.get(Ae);ee.has(Ae)&&!(Be&&Be.state==="loading"&&Z.has(Ae))&&lt(Ae),de.delete(Ae),Z.delete(Ae),ie.delete(Ae),he.delete(Ae),K.delete(Ae),P.fetchers.delete(Ae)}function Tt(Ae){let Be=(fe.get(Ae)||0)-1;Be<=0?(fe.delete(Ae),he.add(Ae)):fe.set(Ae,Be),be({fetchers:new Map(P.fetchers)})}function lt(Ae,Be){let Xe=ee.get(Ae);Xe&&(Xe.abort(Be),ee.delete(Ae))}function oa(Ae){for(let Be of Ae){let Xe=Sn(Be),gt=hd(Xe.data);P.fetchers.set(Be,gt)}}function xt(){let Ae=[],Be=!1;for(let Xe of ie){let gt=P.fetchers.get(Xe);Qa(gt,`Expected fetcher: ${Xe}`),gt.state==="loading"&&(ie.delete(Xe),Ae.push(Xe),Be=!0)}return oa(Ae),Be}function la(Ae){let Be=[];for(let[Xe,gt]of Z)if(gt<Ae){let wt=P.fetchers.get(Xe);Qa(wt,`Expected fetcher: ${Xe}`),wt.state==="loading"&&(lt(Xe),Z.delete(Xe),Be.push(Xe))}return oa(Be),Be.length>0}function Vr(Ae,Be){let Xe=P.blockers.get(Ae)||Fp;return ve.get(Ae)!==Be&&ve.set(Ae,Be),Xe}function hs(Ae){P.blockers.delete(Ae),ve.delete(Ae)}function It(Ae,Be){let Xe=P.blockers.get(Ae)||Fp;Qa(Xe.state==="unblocked"&&Be.state==="blocked"||Xe.state==="blocked"&&Be.state==="blocked"||Xe.state==="blocked"&&Be.state==="proceeding"||Xe.state==="blocked"&&Be.state==="unblocked"||Xe.state==="proceeding"&&Be.state==="unblocked",`Invalid blocker state transition: ${Xe.state} -> ${Be.state}`);let gt=new Map(P.blockers);gt.set(Ae,Be),be({blockers:gt})}function Ya({currentLocation:Ae,nextLocation:Be,historyAction:Xe}){if(ve.size===0)return;ve.size>1&&Zn(!1,"A router only supports one blocker at a time");let gt=Array.from(ve.entries()),[wt,ot]=gt[gt.length-1],Lt=P.blockers.get(wt);if(!(Lt&&Lt.state==="proceeding")&&ot({currentLocation:Ae,nextLocation:Be,historyAction:Xe}))return wt}function xi(Ae){let Be=$o(404,{pathname:Ae}),Xe=c||l,{matches:gt,route:wt}=U1(Xe);return{notFoundMatches:gt,route:wt,error:Be}}function Yi(Ae,Be,Xe){if(g=Ae,w=Be,b=Xe||null,!_&&P.navigation===RS){_=!0;let gt=Ol(P.location,P.matches);gt!=null&&be({restoreScrollPosition:gt})}return()=>{g=null,w=null,b=null}}function Ks(Ae,Be){return b&&b(Ae,Be.map(gt=>TJ(gt,P.loaderData)))||Ae.key}function _n(Ae,Be){if(g&&w){let Xe=Ks(Ae,Be);g[Xe]=w()}}function Ol(Ae,Be){if(g){let Xe=Ks(Ae,Be),gt=g[Xe];if(typeof gt=="number")return gt}return null}function cn(Ae,Be,Xe){if(a.patchRoutesOnNavigation)if(Ae){if(Object.keys(Ae[0].params).length>0)return{active:!0,matches:Ag(Be,Xe,d,!0)}}else return{active:!0,matches:Ag(Be,Xe,d,!0)||[]};return{active:!1,matches:null}}async function kn(Ae,Be,Xe,gt){if(!a.patchRoutesOnNavigation)return{type:"success",matches:Ae};let wt=Ae;for(;;){let ot=c==null,Lt=c||l,Et=o;try{await a.patchRoutesOnNavigation({signal:Xe,path:Be,matches:wt,fetcherKey:gt,patch:(ca,sa)=>{Xe.aborted||u8(ca,sa,Lt,Et,i,!1)}})}catch(ca){return{type:"error",error:ca,partialMatches:wt}}finally{ot&&!Xe.aborted&&(l=[...l])}if(Xe.aborted)return{type:"aborted"};let At=Fu(Lt,Be,d),Vt=null;if(At){if(Object.keys(At[0].params).length===0)return{type:"success",matches:At};if(Vt=Ag(Lt,Be,d,!0),!(Vt&&wt.length<Vt.length&&ai(wt,Vt.slice(0,wt.length))))return{type:"success",matches:At}}if(Vt||(Vt=Ag(Lt,Be,d,!0)),!Vt||ai(wt,Vt))return{type:"success",matches:null};wt=Vt}}function ai(Ae,Be){return Ae.length===Be.length&&Ae.every((Xe,gt)=>Xe.route.id===Be[gt].route.id)}function Si(Ae){o={},c=bv(Ae,i,void 0,o)}function sl(Ae,Be,Xe=!1){let gt=c==null;u8(Ae,Be,c||l,o,i,Xe),gt&&(l=[...l],be({}))}return O={get basename(){return d},get future(){return h},get state(){return P},get routes(){return l},get window(){return e},initialize:Ce,subscribe:xe,enableScrollRestoration:Yi,navigate:ze,fetch:Ye,revalidate:Ze,createHref:Ae=>a.history.createHref(Ae),encodeLocation:Ae=>a.history.encodeLocation(Ae),getFetcher:Sn,resetFetcher:Ie,deleteFetcher:Tt,dispose:we,getBlocker:Vr,deleteBlocker:hs,patchRoutes:sl,_internalFetchControllers:ee,_internalSetRoutes:Si,_internalSetStateDoNotUseOrYouWillBreakYourApp(Ae){be(Ae)}},a.unstable_instrumentations&&(O=qJ(O,a.unstable_instrumentations.map(Ae=>Ae.router).filter(Boolean))),O}function see(a){return a!=null&&("formData"in a&&a.formData!=null||"body"in a&&a.body!==void 0)}function RC(a,e,t,r,n,i){let o,l;if(n){o=[];for(let d of e)if(o.push(d),d.route.id===n){l=d;break}}else o=e,l=e[e.length-1];let c=I_(r||".",D_(o),Xs(a.pathname,t)||a.pathname,i==="path");if(r==null&&(c.search=a.search,c.hash=a.hash),(r==null||r===""||r===".")&&l){let d=LA(c.search);if(l.route.index&&!d)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!l.route.index&&d){let u=new URLSearchParams(c.search),h=u.getAll("index");u.delete("index"),h.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();c.search=f?`?${f}`:""}}return t!=="/"&&(c.pathname=HJ({basename:t,pathname:c.pathname})),Nc(c)}function c8(a,e,t){if(!t||!see(t))return{path:e};if(t.formMethod&&!See(t.formMethod))return{path:e,error:$o(405,{method:t.formMethod})};let r=()=>({path:e,error:$o(400,{type:"invalid-body"})}),i=(t.formMethod||"get").toUpperCase(),o=lH(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!ts(i))return r();let h=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((f,[p,g])=>`${f}${p}=${g}
`,""):String(t.body);return{path:e,submission:{formMethod:i,formAction:o,formEncType:t.formEncType,formData:void 0,json:void 0,text:h}}}else if(t.formEncType==="application/json"){if(!ts(i))return r();try{let h=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:i,formAction:o,formEncType:t.formEncType,formData:void 0,json:h,text:void 0}}}catch{return r()}}}Qa(typeof FormData=="function","FormData is not available in this environment");let l,c;if(t.formData)l=PC(t.formData),c=t.formData;else if(t.body instanceof FormData)l=PC(t.body),c=t.body;else if(t.body instanceof URLSearchParams)l=t.body,c=m8(l);else if(t.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(t.body),c=m8(l)}catch{return r()}let d={formMethod:i,formAction:o,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(ts(d.formMethod))return{path:e,submission:d};let u=jh(e);return a&&u.search&&LA(u.search)&&l.append("index",""),u.search=`?${l}`,{path:Nc(u),submission:d}}function d8(a,e,t,r,n,i,o,l,c,d,u,h,f,p,g,b,w,_,k,T,D){let I=T?vo(T[1])?T[1].error:T[1].data:void 0,O=n.createURL(i.location),P=n.createURL(c),V;if(u&&i.errors){let F=Object.keys(i.errors)[0];V=o.findIndex(W=>W.route.id===F)}else if(T&&vo(T[1])){let F=T[0];V=o.findIndex(W=>W.route.id===F)-1}let G=T?T[1].statusCode:void 0,Q=G&&G>=400,$={currentUrl:O,currentParams:i.matches[0]?.params||{},nextUrl:P,nextParams:o[0].params,...l,actionResult:I,actionStatus:G},ae=xb(o),J=o.map((F,W)=>{let{route:K}=F,ee=null;if(V!=null&&W>V?ee=!1:K.lazy?ee=!0:IA(K)?u?ee=LC(K,i.loaderData,i.errors):oee(i.loaderData,i.matches[W],F)&&(ee=!0):ee=!1,ee!==null)return OC(t,r,a,ae,F,d,e,ee);let ne=!1;typeof D=="boolean"?ne=D:Q?ne=!1:(h||O.pathname+O.search===P.pathname+P.search||O.search!==P.search||lee(i.matches[W],F))&&(ne=!0);let re={...$,defaultShouldRevalidate:ne},Z=Jg(F,re);return OC(t,r,a,ae,F,d,e,Z,re,D)}),U=[];return g.forEach((F,W)=>{if(u||!o.some(fe=>fe.route.id===F.routeId)||p.has(W))return;let K=i.fetchers.get(W),ee=K&&K.state!=="idle"&&K.data===void 0,ne=Fu(w,F.path,_);if(!ne){if(k&&ee)return;U.push({key:W,routeId:F.routeId,path:F.path,matches:null,match:null,request:null,controller:null});return}if(b.has(W))return;let re=Nw(ne,F.path),Z=new AbortController,ie=Vp(n,F.path,Z.signal),de=null;if(f.has(W))f.delete(W),de=ax(t,r,ie,ne,re,d,e);else if(ee)h&&(de=ax(t,r,ie,ne,re,d,e));else{let fe;typeof D=="boolean"?fe=D:Q?fe=!1:fe=h;let he={...$,defaultShouldRevalidate:fe};Jg(re,he)&&(de=ax(t,r,ie,ne,re,d,e,he))}de&&U.push({key:W,routeId:F.routeId,path:F.path,matches:de,match:re,request:ie,controller:Z})}),{dsMatches:J,revalidatingFetchers:U}}function IA(a){return a.loader!=null||a.middleware!=null&&a.middleware.length>0}function LC(a,e,t){if(a.lazy)return!0;if(!IA(a))return!1;let r=e!=null&&a.id in e,n=t!=null&&t[a.id]!==void 0;return!r&&n?!1:typeof a.loader=="function"&&a.loader.hydrate===!0?!0:!r&&!n}function oee(a,e,t){let r=!e||t.route.id!==e.route.id,n=!a.hasOwnProperty(t.route.id);return r||n}function lee(a,e){let t=a.route.path;return a.pathname!==e.pathname||t!=null&&t.endsWith("*")&&a.params["*"]!==e.params["*"]}function Jg(a,e){if(a.route.shouldRevalidate){let t=a.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function u8(a,e,t,r,n,i){let o;if(a){let d=r[a];Qa(d,`No route found to patch children into: routeId = ${a}`),d.children||(d.children=[]),o=d.children}else o=t;let l=[],c=[];if(e.forEach(d=>{let u=o.find(h=>rH(d,h));u?c.push({existingRoute:u,newRoute:d}):l.push(d)}),l.length>0){let d=bv(l,n,[a||"_","patch",String(o?.length||"0")],r);o.push(...d)}if(i&&c.length>0)for(let d=0;d<c.length;d++){let{existingRoute:u,newRoute:h}=c[d],f=u,[p]=bv([h],n,[],{},!0);Object.assign(f,{element:p.element?p.element:f.element,errorElement:p.errorElement?p.errorElement:f.errorElement,hydrateFallbackElement:p.hydrateFallbackElement?p.hydrateFallbackElement:f.hydrateFallbackElement})}}function rH(a,e){return"id"in a&&"id"in e&&a.id===e.id?!0:a.index===e.index&&a.path===e.path&&a.caseSensitive===e.caseSensitive?(!a.children||a.children.length===0)&&(!e.children||e.children.length===0)?!0:a.children.every((t,r)=>e.children?.some(n=>rH(t,n))):!1}var h8=new WeakMap,nH=({key:a,route:e,manifest:t,mapRouteProperties:r})=>{let n=t[e.id];if(Qa(n,"No route found in manifest"),!n.lazy||typeof n.lazy!="object")return;let i=n.lazy[a];if(!i)return;let o=h8.get(n);o||(o={},h8.set(n,o));let l=o[a];if(l)return l;let c=(async()=>{let d=SJ(a),h=n[a]!==void 0&&a!=="hasErrorBoundary";if(d)Zn(!d,"Route property "+a+" is not a supported lazy route property. This property will be ignored."),o[a]=Promise.resolve();else if(h)Zn(!1,`Route "${n.id}" has a static property "${a}" defined. The lazy property will be ignored.`);else{let f=await i();f!=null&&(Object.assign(n,{[a]:f}),Object.assign(n,r(n)))}typeof n.lazy=="object"&&(n.lazy[a]=void 0,Object.values(n.lazy).every(f=>f===void 0)&&(n.lazy=void 0))})();return o[a]=c,c},f8=new WeakMap;function cee(a,e,t,r,n){let i=t[a.id];if(Qa(i,"No route found in manifest"),!a.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof a.lazy=="function"){let u=f8.get(i);if(u)return{lazyRoutePromise:u,lazyHandlerPromise:u};let h=(async()=>{Qa(typeof a.lazy=="function","No lazy route function found");let f=await a.lazy(),p={};for(let g in f){let b=f[g];if(b===void 0)continue;let w=CJ(g),k=i[g]!==void 0&&g!=="hasErrorBoundary";w?Zn(!w,"Route property "+g+" is not a supported property to be returned from a lazy route function. This property will be ignored."):k?Zn(!k,`Route "${i.id}" has a static property "${g}" defined but its lazy function is also returning a value for this property. The lazy route property "${g}" will be ignored.`):p[g]=b}Object.assign(i,p),Object.assign(i,{...r(i),lazy:void 0})})();return f8.set(i,h),h.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:h}}let o=Object.keys(a.lazy),l=[],c;for(let u of o){if(n&&n.includes(u))continue;let h=nH({key:u,route:a,manifest:t,mapRouteProperties:r});h&&(l.push(h),u===e&&(c=h))}let d=l.length>0?Promise.all(l).then(()=>{}):void 0;return d?.catch(()=>{}),c?.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:c}}async function p8(a){let e=a.matches.filter(n=>n.shouldLoad),t={};return(await Promise.all(e.map(n=>n.resolve()))).forEach((n,i)=>{t[e[i].route.id]=n}),t}async function dee(a){return a.matches.some(e=>e.route.middleware)?iH(a,()=>p8(a)):p8(a)}function iH(a,e){return uee(a,e,r=>{if(jee(r))throw r;return r},yee,t);function t(r,n,i){if(i)return Promise.resolve(Object.assign(i.value,{[n]:{type:"error",result:r}}));{let{matches:o}=a,l=Math.min(Math.max(o.findIndex(d=>d.route.id===n),0),Math.max(o.findIndex(d=>d.shouldCallHandler()),0)),c=Vu(o,o[l].route.id).route.id;return Promise.resolve({[c]:{type:"error",result:r}})}}}async function uee(a,e,t,r,n){let{matches:i,request:o,params:l,context:c,unstable_pattern:d}=a,u=i.flatMap(f=>f.route.middleware?f.route.middleware.map(p=>[f.route.id,p]):[]);return await sH({request:o,params:l,context:c,unstable_pattern:d},u,e,t,r,n)}async function sH(a,e,t,r,n,i,o=0){let{request:l}=a;if(l.signal.aborted)throw l.signal.reason??new Error(`Request aborted: ${l.method} ${l.url}`);let c=e[o];if(!c)return await t();let[d,u]=c,h,f=async()=>{if(h)throw new Error("You may only call `next()` once per middleware");try{return h={value:await sH(a,e,t,r,n,i,o+1)},h.value}catch(p){return h={value:await i(p,d,h)},h.value}};try{let p=await u(a,f),g=p!=null?r(p):void 0;return n(g)?g:h?g??h.value:(h={value:await f()},h.value)}catch(p){return await i(p,d,h)}}function oH(a,e,t,r,n){let i=nH({key:"middleware",route:r.route,manifest:e,mapRouteProperties:a}),o=cee(r.route,ts(t.method)?"action":"loader",e,a,n);return{middleware:i,route:o.lazyRoutePromise,handler:o.lazyHandlerPromise}}function OC(a,e,t,r,n,i,o,l,c=null,d){let u=!1,h=oH(a,e,t,n,i);return{...n,_lazyPromises:h,shouldLoad:l,shouldRevalidateArgs:c,shouldCallHandler(f){return u=!0,c?typeof d=="boolean"?Jg(n,{...c,defaultShouldRevalidate:d}):typeof f=="boolean"?Jg(n,{...c,defaultShouldRevalidate:f}):Jg(n,c):l},resolve(f){let{lazy:p,loader:g,middleware:b}=n.route,w=u||l||f&&!ts(t.method)&&(p||g),_=b&&b.length>0&&!g&&!p;return w&&(ts(t.method)||!_)?fee({request:t,unstable_pattern:r,match:n,lazyHandlerPromise:h?.handler,lazyRoutePromise:h?.route,handlerOverride:f,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}}}function ax(a,e,t,r,n,i,o,l=null){return r.map(c=>c.route.id!==n.route.id?{...c,shouldLoad:!1,shouldRevalidateArgs:l,shouldCallHandler:()=>!1,_lazyPromises:oH(a,e,t,c,i),resolve:()=>Promise.resolve({type:"data",result:void 0})}:OC(a,e,t,xb(r),c,i,o,!0,l))}async function hee(a,e,t,r,n,i){t.some(d=>d._lazyPromises?.middleware)&&await Promise.all(t.map(d=>d._lazyPromises?.middleware));let o={request:e,unstable_pattern:xb(t),params:t[0].params,context:n,matches:t},c=await a({...o,fetcherKey:r,runClientMiddleware:d=>{let u=o;return iH(u,()=>d({...u,fetcherKey:r,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(d=>[d._lazyPromises?.handler,d._lazyPromises?.route]))}catch{}return c}async function fee({request:a,unstable_pattern:e,match:t,lazyHandlerPromise:r,lazyRoutePromise:n,handlerOverride:i,scopedContext:o}){let l,c,d=ts(a.method),u=d?"action":"loader",h=f=>{let p,g=new Promise((_,k)=>p=k);c=()=>p(),a.signal.addEventListener("abort",c);let b=_=>typeof f!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${u}" [routeId: ${t.route.id}]`)):f({request:a,unstable_pattern:e,params:t.params,context:o},..._!==void 0?[_]:[]),w=(async()=>{try{return{type:"data",result:await(i?i(k=>b(k)):b())}}catch(_){return{type:"error",result:_}}})();return Promise.race([w,g])};try{let f=d?t.route.action:t.route.loader;if(r||n)if(f){let p,[g]=await Promise.all([h(f).catch(b=>{p=b}),r,n]);if(p!==void 0)throw p;l=g}else{await r;let p=d?t.route.action:t.route.loader;if(p)[l]=await Promise.all([h(p),n]);else if(u==="action"){let g=new URL(a.url),b=g.pathname+g.search;throw $o(405,{method:a.method,pathname:b,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(f)l=await h(f);else{let p=new URL(a.url),g=p.pathname+p.search;throw $o(404,{pathname:g})}}catch(f){return{type:"error",result:f}}finally{c&&a.signal.removeEventListener("abort",c)}return l}async function pee(a){let e=a.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?a.body==null?null:a.json():a.text()}async function xee(a){let{result:e,type:t}=a;if(RA(e)){let r;try{r=await pee(e)}catch(n){return{type:"error",error:n}}return t==="error"?{type:"error",error:new pb(e.status,e.statusText,r),statusCode:e.status,headers:e.headers}:{type:"data",data:r,statusCode:e.status,headers:e.headers}}return t==="error"?y8(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:bee(e),statusCode:yv(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:yv(e)?e.status:void 0}:y8(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function mee(a,e,t,r,n){let i=a.headers.get("Location");if(Qa(i,"Redirects returned/thrown from loaders/actions must have a Location header"),!DA(i)){let o=r.slice(0,r.findIndex(l=>l.route.id===t)+1);i=RC(new URL(e.url),o,n,i),a.headers.set("Location",i)}return a}function x8(a,e,t,r){let n=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(DA(a)){let i=a,o=i.startsWith("//")?new URL(e.protocol+i):new URL(i);if(n.includes(o.protocol))throw new Error("Invalid redirect location");let l=Xs(o.pathname,t)!=null;if(o.origin===e.origin&&l)return o.pathname+o.search+o.hash}try{let i=r.createURL(a);if(n.includes(i.protocol))throw new Error("Invalid redirect location")}catch{}return a}function Vp(a,e,t,r){let n=a.createURL(lH(e)).toString(),i={signal:t};if(r&&ts(r.formMethod)){let{formMethod:o,formEncType:l}=r;i.method=o.toUpperCase(),l==="application/json"?(i.headers=new Headers({"Content-Type":l}),i.body=JSON.stringify(r.json)):l==="text/plain"?i.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?i.body=PC(r.formData):i.body=r.formData}return new Request(n,i)}function PC(a){let e=new URLSearchParams;for(let[t,r]of a.entries())e.append(t,typeof r=="string"?r:r.name);return e}function m8(a){let e=new FormData;for(let[t,r]of a.entries())e.append(t,r);return e}function gee(a,e,t,r=!1,n=!1){let i={},o=null,l,c=!1,d={},u=t&&vo(t[1])?t[1].error:void 0;return a.forEach(h=>{if(!(h.route.id in e))return;let f=h.route.id,p=e[f];if(Qa(!Hf(p),"Cannot handle redirect results in processLoaderData"),vo(p)){let g=p.error;if(u!==void 0&&(g=u,u=void 0),o=o||{},n)o[f]=g;else{let b=Vu(a,f);o[b.route.id]==null&&(o[b.route.id]=g)}r||(i[f]=aH),c||(c=!0,l=yv(p.error)?p.error.status:500),p.headers&&(d[f]=p.headers)}else i[f]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(d[f]=p.headers)}),u!==void 0&&t&&(o={[t[0]]:u},t[2]&&(i[t[2]]=void 0)),{loaderData:i,errors:o,statusCode:l||200,loaderHeaders:d}}function g8(a,e,t,r,n,i){let{loaderData:o,errors:l}=gee(e,t,r);return n.filter(c=>!c.matches||c.matches.some(d=>d.shouldLoad)).forEach(c=>{let{key:d,match:u,controller:h}=c;if(h&&h.signal.aborted)return;let f=i[d];if(Qa(f,"Did not find corresponding fetcher result"),vo(f)){let p=Vu(a.matches,u?.route.id);l&&l[p.route.id]||(l={...l,[p.route.id]:f.error}),a.fetchers.delete(d)}else if(Hf(f))Qa(!1,"Unhandled fetcher revalidation redirect");else{let p=hd(f.data);a.fetchers.set(d,p)}}),{loaderData:o,errors:l}}function v8(a,e,t,r){let n=Object.entries(e).filter(([,i])=>i!==aH).reduce((i,[o,l])=>(i[o]=l,i),{});for(let i of t){let o=i.route.id;if(!e.hasOwnProperty(o)&&a.hasOwnProperty(o)&&i.route.loader&&(n[o]=a[o]),r&&r.hasOwnProperty(o))break}return n}function b8(a){return a?vo(a[1])?{actionData:{}}:{actionData:{[a[0]]:a[1].data}}:{}}function Vu(a,e){return(e?a.slice(0,a.findIndex(r=>r.route.id===e)+1):[...a]).reverse().find(r=>r.route.hasErrorBoundary===!0)||a[0]}function U1(a){let e=a.length===1?a[0]:a.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function $o(a,{pathname:e,routeId:t,method:r,type:n,message:i}={}){let o="Unknown Server Error",l="Unknown @remix-run/router error";return a===400?(o="Bad Request",r&&e&&t?l=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:n==="invalid-body"&&(l="Unable to encode submission body")):a===403?(o="Forbidden",l=`Route "${t}" does not match URL "${e}"`):a===404?(o="Not Found",l=`No route matches URL "${e}"`):a===405&&(o="Method Not Allowed",r&&e&&t?l=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(l=`Invalid request method "${r.toUpperCase()}"`)),new pb(a||500,o,new Error(l),!0)}function G1(a){let e=Object.entries(a);for(let t=e.length-1;t>=0;t--){let[r,n]=e[t];if(Hf(n))return{key:r,result:n}}}function lH(a){let e=typeof a=="string"?jh(a):a;return Nc({...e,hash:""})}function vee(a,e){return a.pathname!==e.pathname||a.search!==e.search?!1:a.hash===""?e.hash!=="":a.hash===e.hash?!0:e.hash!==""}function bee(a){return new pb(a.init?.status??500,a.init?.statusText??"Internal Server Error",a.data)}function yee(a){return a!=null&&typeof a=="object"&&Object.entries(a).every(([e,t])=>typeof e=="string"&&wee(t))}function wee(a){return a!=null&&typeof a=="object"&&"type"in a&&"result"in a&&(a.type==="data"||a.type==="error")}function _ee(a){return RA(a.result)&&eH.has(a.result.status)}function vo(a){return a.type==="error"}function Hf(a){return(a&&a.type)==="redirect"}function y8(a){return typeof a=="object"&&a!=null&&"type"in a&&"data"in a&&"init"in a&&a.type==="DataWithResponseInit"}function RA(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.headers=="object"&&typeof a.body<"u"}function Nee(a){return eH.has(a)}function jee(a){return RA(a)&&Nee(a.status)&&a.headers.has("Location")}function See(a){return tee.has(a.toUpperCase())}function ts(a){return JJ.has(a.toUpperCase())}function LA(a){return new URLSearchParams(a).getAll("index").some(e=>e==="")}function Nw(a,e){let t=typeof e=="string"?jh(e).search:e.search;if(a[a.length-1].route.index&&LA(t||""))return a[a.length-1];let r=XV(a);return r[r.length-1]}function w8(a){let{formMethod:e,formAction:t,formEncType:r,text:n,formData:i,json:o}=a;if(!(!e||!t||!r)){if(n!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:n};if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:o,text:void 0}}}function LS(a,e){return e?{state:"loading",location:a,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:a,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function kee(a,e){return{state:"submitting",location:a,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function zm(a,e){return a?{state:"loading",formMethod:a.formMethod,formAction:a.formAction,formEncType:a.formEncType,formData:a.formData,json:a.json,text:a.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Cee(a,e){return{state:"submitting",formMethod:a.formMethod,formAction:a.formAction,formEncType:a.formEncType,formData:a.formData,json:a.json,text:a.text,data:e?e.data:void 0}}function hd(a){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:a}}function Aee(a,e){try{let t=a.sessionStorage.getItem(tH);if(t){let r=JSON.parse(t);for(let[n,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(n,new Set(i||[]))}}catch{}}function Tee(a,e){if(e.size>0){let t={};for(let[r,n]of e)t[r]=[...n];try{a.sessionStorage.setItem(tH,JSON.stringify(t))}catch(r){Zn(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function _8(){let a,e,t=new Promise((r,n)=>{a=async i=>{r(i);try{await t}catch{}},e=async i=>{n(i);try{await t}catch{}}});return{promise:t,resolve:a,reject:e}}var k0=H.createContext(null);k0.displayName="DataRouter";var mb=H.createContext(null);mb.displayName="DataRouterState";var cH=H.createContext(!1);function Mee(){return H.useContext(cH)}var OA=H.createContext({isTransitioning:!1});OA.displayName="ViewTransition";var dH=H.createContext(new Map);dH.displayName="Fetchers";var Eee=H.createContext(null);Eee.displayName="Await";var Co=H.createContext(null);Co.displayName="Navigation";var R_=H.createContext(null);R_.displayName="Location";var Ml=H.createContext({outlet:null,matches:[],isDataRoute:!1});Ml.displayName="Route";var PA=H.createContext(null);PA.displayName="RouteError";var uH="REACT_ROUTER_ERROR",Dee="REDIRECT",Iee="ROUTE_ERROR_RESPONSE";function Ree(a){if(a.startsWith(`${uH}:${Dee}:{`))try{let e=JSON.parse(a.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Lee(a){if(a.startsWith(`${uH}:${Iee}:{`))try{let e=JSON.parse(a.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new pb(e.status,e.statusText,e.data)}catch{}}function Oee(a,{relative:e}={}){Qa(zx(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=H.useContext(Co),{hash:n,pathname:i,search:o}=gb(a,{relative:e}),l=i;return t!=="/"&&(l=i==="/"?t:xc([t,i])),r.createHref({pathname:l,search:o,hash:n})}function zx(){return H.useContext(R_)!=null}function Ic(){return Qa(zx(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(R_).location}var hH="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fH(a){H.useContext(Co).static||H.useLayoutEffect(a)}function Fn(){let{isDataRoute:a}=H.useContext(Ml);return a?Kee():Pee()}function Pee(){Qa(zx(),"useNavigate() may be used only in the context of a <Router> component.");let a=H.useContext(k0),{basename:e,navigator:t}=H.useContext(Co),{matches:r}=H.useContext(Ml),{pathname:n}=Ic(),i=JSON.stringify(D_(r)),o=H.useRef(!1);return fH(()=>{o.current=!0}),H.useCallback((c,d={})=>{if(Zn(o.current,hH),!o.current)return;if(typeof c=="number"){t.go(c);return}let u=I_(c,JSON.parse(i),n,d.relative==="path");a==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:xc([e,u.pathname])),(d.replace?t.replace:t.push)(u,d.state,d)},[e,t,i,n,a])}var Bee=H.createContext(null);function zee(a){let e=H.useContext(Ml).outlet;return H.useMemo(()=>e&&H.createElement(Bee.Provider,{value:a},e),[e,a])}function gb(a,{relative:e}={}){let{matches:t}=H.useContext(Ml),{pathname:r}=Ic(),n=JSON.stringify(D_(t));return H.useMemo(()=>I_(a,JSON.parse(n),r,e==="path"),[a,n,r,e])}function Fee(a,e,t,r,n){Qa(zx(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=H.useContext(Co),{matches:o}=H.useContext(Ml),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",u=l?l.pathnameBase:"/",h=l&&l.route;{let k=h&&h.path||"";gH(d,!h||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let f=Ic(),p;p=f;let g=p.pathname||"/",b=g;if(u!=="/"){let k=u.replace(/^\//,"").split("/");b="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let w=Fu(a,{pathname:b});return Zn(h||w!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Zn(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Wee(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:xc([u,i.encodeLocation?i.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:xc([u,i.encodeLocation?i.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),o,t,r,n)}function Vee(){let a=qee(),e=yv(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),t=a instanceof Error?a.stack:null,r="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",a),o=H.createElement(H.Fragment,null,H.createElement("p",null," Hey developer "),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:i},"ErrorBoundary")," or"," ",H.createElement("code",{style:i},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:n},t):null,o)}var Hee=H.createElement(Vee,null),pH=class extends H.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,e){return e.location!==a.location||e.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:e.error,location:e.location,revalidation:a.revalidation||e.revalidation}}componentDidCatch(a,e){this.props.onError?this.props.onError(a,e):console.error("React Router caught the following error during render",a)}render(){let a=this.state.error;if(this.context&&typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){const t=Lee(a.digest);t&&(a=t)}let e=a!==void 0?H.createElement(Ml.Provider,{value:this.props.routeContext},H.createElement(PA.Provider,{value:a,children:this.props.component})):this.props.children;return this.context?H.createElement(Uee,{error:a},e):e}};pH.contextType=cH;var OS=new WeakMap;function Uee({children:a,error:e}){let{basename:t}=H.useContext(Co);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=Ree(e.digest);if(r){let n=OS.get(e);if(n)throw n;let i=KV(r.location,t);if(ZV&&!OS.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw OS.set(e,o),o}return H.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return a}function Gee({routeContext:a,match:e,children:t}){let r=H.useContext(k0);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(Ml.Provider,{value:a},t)}function Wee(a,e=[],t=null,r=null,n=null){if(a==null){if(!t)return null;if(t.errors)a=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)a=t.matches;else return null}let i=a,o=t?.errors;if(o!=null){let u=i.findIndex(h=>h.route.id&&o?.[h.route.id]!==void 0);Qa(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,c=-1;if(t)for(let u=0;u<i.length;u++){let h=i[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:p}=t,g=h.route.loader&&!f.hasOwnProperty(h.route.id)&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=t&&r?(u,h)=>{r(u,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:xb(t.matches),errorInfo:h})}:void 0;return i.reduceRight((u,h,f)=>{let p,g=!1,b=null,w=null;t&&(p=o&&h.route.id?o[h.route.id]:void 0,b=h.route.errorElement||Hee,l&&(c<0&&f===0?(gH("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,w=null):c===f&&(g=!0,w=h.route.hydrateFallbackElement||null)));let _=e.concat(i.slice(0,f+1)),k=()=>{let T;return p?T=b:g?T=w:h.route.Component?T=H.createElement(h.route.Component,null):h.route.element?T=h.route.element:T=u,H.createElement(Gee,{match:h,routeContext:{outlet:u,matches:_,isDataRoute:t!=null},children:T})};return t&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?H.createElement(pH,{location:t.location,revalidation:t.revalidation,component:b,error:p,children:k(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:d}):k()},null)}function BA(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xH(a){let e=H.useContext(k0);return Qa(e,BA(a)),e}function mH(a){let e=H.useContext(mb);return Qa(e,BA(a)),e}function $ee(a){let e=H.useContext(Ml);return Qa(e,BA(a)),e}function zA(a){let e=$ee(a),t=e.matches[e.matches.length-1];return Qa(t.route.id,`${a} can only be used on routes that contain a unique "id"`),t.route.id}function Yee(){return zA("useRouteId")}function qee(){let a=H.useContext(PA),e=mH("useRouteError"),t=zA("useRouteError");return a!==void 0?a:e.errors?.[t]}var Xee=0;function Zee(a){let{router:e,basename:t}=xH("useBlocker"),r=mH("useBlocker"),[n,i]=H.useState(""),o=H.useCallback(l=>{if(typeof a!="function")return!!a;if(t==="/")return a(l);let{currentLocation:c,nextLocation:d,historyAction:u}=l;return a({currentLocation:{...c,pathname:Xs(c.pathname,t)||c.pathname},nextLocation:{...d,pathname:Xs(d.pathname,t)||d.pathname},historyAction:u})},[t,a]);return H.useEffect(()=>{let l=String(++Xee);return i(l),()=>e.deleteBlocker(l)},[e]),H.useEffect(()=>{n!==""&&e.getBlocker(n,o)},[e,n,o]),n&&r.blockers.has(n)?r.blockers.get(n):Fp}function Kee(){let{router:a}=xH("useNavigate"),e=zA("useNavigate"),t=H.useRef(!1);return fH(()=>{t.current=!0}),H.useCallback(async(n,i={})=>{Zn(t.current,hH),t.current&&(typeof n=="number"?await a.navigate(n):await a.navigate(n,{fromRouteId:e,...i}))},[a,e])}var N8={};function gH(a,e,t){!e&&!N8[a]&&(N8[a]=!0,Zn(!1,t))}var j8={};function S8(a,e){!a&&!j8[e]&&(j8[e]=!0,console.warn(e))}var Qee="useOptimistic",k8=hJ[Qee],Jee=()=>{};function ete(a){return k8?k8(a):[a,Jee]}function tte(a){let e={hasErrorBoundary:a.hasErrorBoundary||a.ErrorBoundary!=null||a.errorElement!=null};return a.Component&&(a.element&&Zn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:H.createElement(a.Component),Component:void 0})),a.HydrateFallback&&(a.hydrateFallbackElement&&Zn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:H.createElement(a.HydrateFallback),HydrateFallback:void 0})),a.ErrorBoundary&&(a.errorElement&&Zn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:H.createElement(a.ErrorBoundary),ErrorBoundary:void 0})),e}var ate=["HydrateFallback","hydrateFallbackElement"],rte=class{constructor(){this.status="pending",this.promise=new Promise((a,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",a(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function nte({router:a,flushSync:e,onError:t,unstable_useTransitions:r}){r=Mee()||r;let[i,o]=H.useState(a.state),[l,c]=ete(i),[d,u]=H.useState(),[h,f]=H.useState({isTransitioning:!1}),[p,g]=H.useState(),[b,w]=H.useState(),[_,k]=H.useState(),T=H.useRef(new Map),D=H.useCallback((V,{deletedFetchers:G,newErrors:Q,flushSync:$,viewTransitionOpts:ae})=>{Q&&t&&Object.values(Q).forEach(U=>t(U,{location:V.location,params:V.matches[0]?.params??{},unstable_pattern:xb(V.matches)})),V.fetchers.forEach((U,F)=>{U.data!==void 0&&T.current.set(F,U.data)}),G.forEach(U=>T.current.delete(U)),S8($===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let J=a.window!=null&&a.window.document!=null&&typeof a.window.document.startViewTransition=="function";if(S8(ae==null||J,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!ae||!J){e&&$?e(()=>o(V)):r===!1?o(V):H.startTransition(()=>{r===!0&&c(U=>C8(U,V)),o(V)});return}if(e&&$){e(()=>{b&&(p?.resolve(),b.skipTransition()),f({isTransitioning:!0,flushSync:!0,currentLocation:ae.currentLocation,nextLocation:ae.nextLocation})});let U=a.window.document.startViewTransition(()=>{e(()=>o(V))});U.finished.finally(()=>{e(()=>{g(void 0),w(void 0),u(void 0),f({isTransitioning:!1})})}),e(()=>w(U));return}b?(p?.resolve(),b.skipTransition(),k({state:V,currentLocation:ae.currentLocation,nextLocation:ae.nextLocation})):(u(V),f({isTransitioning:!0,flushSync:!1,currentLocation:ae.currentLocation,nextLocation:ae.nextLocation}))},[a.window,e,b,p,r,c,t]);H.useLayoutEffect(()=>a.subscribe(D),[a,D]),H.useEffect(()=>{h.isTransitioning&&!h.flushSync&&g(new rte)},[h]),H.useEffect(()=>{if(p&&d&&a.window){let V=d,G=p.promise,Q=a.window.document.startViewTransition(async()=>{r===!1?o(V):H.startTransition(()=>{r===!0&&c($=>C8($,V)),o(V)}),await G});Q.finished.finally(()=>{g(void 0),w(void 0),u(void 0),f({isTransitioning:!1})}),w(Q)}},[d,p,a.window,r,c]),H.useEffect(()=>{p&&d&&l.location.key===d.location.key&&p.resolve()},[p,b,l.location,d]),H.useEffect(()=>{!h.isTransitioning&&_&&(u(_.state),f({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}),k(void 0))},[h.isTransitioning,_]);let I=H.useMemo(()=>({createHref:a.createHref,encodeLocation:a.encodeLocation,go:V=>a.navigate(V),push:(V,G,Q)=>a.navigate(V,{state:G,preventScrollReset:Q?.preventScrollReset}),replace:(V,G,Q)=>a.navigate(V,{replace:!0,state:G,preventScrollReset:Q?.preventScrollReset})}),[a]),O=a.basename||"/",P=H.useMemo(()=>({router:a,navigator:I,static:!1,basename:O,onError:t}),[a,I,O,t]);return H.createElement(H.Fragment,null,H.createElement(k0.Provider,{value:P},H.createElement(mb.Provider,{value:l},H.createElement(dH.Provider,{value:T.current},H.createElement(OA.Provider,{value:h},H.createElement(ote,{basename:O,location:l.location,navigationType:l.historyAction,navigator:I,unstable_useTransitions:r},H.createElement(ite,{routes:a.routes,future:a.future,state:l,onError:t})))))),null)}function C8(a,e){return{...a,navigation:e.navigation.state!=="idle"?e.navigation:a.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:a.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:a.actionData,fetchers:e.fetchers}}var ite=H.memo(ste);function ste({routes:a,future:e,state:t,onError:r}){return Fee(a,void 0,t,r,e)}function Tg({to:a,replace:e,state:t,relative:r}){Qa(zx(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=H.useContext(Co);Zn(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=H.useContext(Ml),{pathname:o}=Ic(),l=Fn(),c=I_(a,D_(i),o,r==="path"),d=JSON.stringify(c);return H.useEffect(()=>{l(JSON.parse(d),{replace:e,state:t,relative:r})},[l,d,r,e,t]),null}function hx(a){return zee(a.context)}function ga(a){Qa(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ote({basename:a="/",children:e=null,location:t,navigationType:r="POP",navigator:n,static:i=!1,unstable_useTransitions:o}){Qa(!zx(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=a.replace(/^\/*/,"/"),c=H.useMemo(()=>({basename:l,navigator:n,static:i,unstable_useTransitions:o,future:{}}),[l,n,i,o]);typeof t=="string"&&(t=jh(t));let{pathname:d="/",search:u="",hash:h="",state:f=null,key:p="default"}=t,g=H.useMemo(()=>{let b=Xs(d,l);return b==null?null:{location:{pathname:b,search:u,hash:h,state:f,key:p},navigationType:r}},[l,d,u,h,f,p,r]);return Zn(g!=null,`<Router basename="${l}"> is not able to match the URL "${d}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:H.createElement(Co.Provider,{value:c},H.createElement(R_.Provider,{children:e,value:g}))}function BC(a,e=[]){let t=[];return H.Children.forEach(a,(r,n)=>{if(!H.isValidElement(r))return;let i=[...e,n];if(r.type===H.Fragment){t.push.apply(t,BC(r.props.children,i));return}Qa(r.type===ga,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qa(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=BC(r.props.children,i)),t.push(o)}),t}var lte=BC,jw="get",Sw="application/x-www-form-urlencoded";function L_(a){return typeof HTMLElement<"u"&&a instanceof HTMLElement}function cte(a){return L_(a)&&a.tagName.toLowerCase()==="button"}function dte(a){return L_(a)&&a.tagName.toLowerCase()==="form"}function ute(a){return L_(a)&&a.tagName.toLowerCase()==="input"}function hte(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function fte(a,e){return a.button===0&&(!e||e==="_self")&&!hte(a)}var W1=null;function pte(){if(W1===null)try{new FormData(document.createElement("form"),0),W1=!1}catch{W1=!0}return W1}var xte=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function PS(a){return a!=null&&!xte.has(a)?(Zn(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sw}"`),null):a}function mte(a,e){let t,r,n,i,o;if(dte(a)){let l=a.getAttribute("action");r=l?Xs(l,e):null,t=a.getAttribute("method")||jw,n=PS(a.getAttribute("enctype"))||Sw,i=new FormData(a)}else if(cte(a)||ute(a)&&(a.type==="submit"||a.type==="image")){let l=a.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=a.getAttribute("formaction")||l.getAttribute("action");if(r=c?Xs(c,e):null,t=a.getAttribute("formmethod")||l.getAttribute("method")||jw,n=PS(a.getAttribute("formenctype"))||PS(l.getAttribute("enctype"))||Sw,i=new FormData(l,a),!pte()){let{name:d,type:u,value:h}=a;if(u==="image"){let f=d?`${d}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else d&&i.append(d,h)}}else{if(L_(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=jw,r=null,n=Sw,o=a}return i&&n==="text/plain"&&(o=i,i=void 0),{action:r,method:t.toLowerCase(),encType:n,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function FA(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function gte(a,e,t,r){let n=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return t?n.pathname.endsWith("/")?n.pathname=`${n.pathname}_.${r}`:n.pathname=`${n.pathname}.${r}`:n.pathname==="/"?n.pathname=`_root.${r}`:e&&Xs(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function vte(a,e){if(a.id in e)return e[a.id];try{let t=await import(a.module);return e[a.id]=t,t}catch(t){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bte(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function yte(a,e,t){let r=await Promise.all(a.map(async n=>{let i=e.routes[n.route.id];if(i){let o=await vte(i,t);return o.links?o.links():[]}return[]}));return jte(r.flat(1).filter(bte).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function A8(a,e,t,r,n,i){let o=(c,d)=>t[d]?c.route.id!==t[d].route.id:!0,l=(c,d)=>t[d].pathname!==c.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==c.params["*"];return i==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?e.filter((c,d)=>{let u=r.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function wte(a,e,{includeHydrateFallback:t}={}){return _te(a.map(r=>{let n=e.routes[r.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),t&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function _te(a){return[...new Set(a)]}function Nte(a){let e={},t=Object.keys(a).sort();for(let r of t)e[r]=a[r];return e}function jte(a,e){let t=new Set;return new Set(e),a.reduce((r,n)=>{let i=JSON.stringify(Nte(n));return t.has(i)||(t.add(i),r.push({key:i,link:n})),r},[])}function vH(){let a=H.useContext(k0);return FA(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function Ste(){let a=H.useContext(mb);return FA(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var VA=H.createContext(void 0);VA.displayName="FrameworkContext";function bH(){let a=H.useContext(VA);return FA(a,"You must render this element inside a <HydratedRouter> element"),a}function kte(a,e){let t=H.useContext(VA),[r,n]=H.useState(!1),[i,o]=H.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=e,f=H.useRef(null);H.useEffect(()=>{if(a==="render"&&o(!0),a==="viewport"){let b=_=>{_.forEach(k=>{o(k.isIntersecting)})},w=new IntersectionObserver(b,{threshold:.5});return f.current&&w.observe(f.current),()=>{w.disconnect()}}},[a]),H.useEffect(()=>{if(r){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[r]);let p=()=>{n(!0)},g=()=>{n(!1),o(!1)};return t?a!=="intent"?[i,f,{}]:[i,f,{onFocus:Fm(l,p),onBlur:Fm(c,g),onMouseEnter:Fm(d,p),onMouseLeave:Fm(u,g),onTouchStart:Fm(h,p)}]:[!1,f,{}]}function Fm(a,e){return t=>{a&&a(t),t.defaultPrevented||e(t)}}function Cte({page:a,...e}){let{router:t}=vH(),r=H.useMemo(()=>Fu(t.routes,a,t.basename),[t.routes,a,t.basename]);return r?H.createElement(Tte,{page:a,matches:r,...e}):null}function Ate(a){let{manifest:e,routeModules:t}=bH(),[r,n]=H.useState([]);return H.useEffect(()=>{let i=!1;return yte(a,e,t).then(o=>{i||n(o)}),()=>{i=!0}},[a,e,t]),r}function Tte({page:a,matches:e,...t}){let r=Ic(),{future:n,manifest:i,routeModules:o}=bH(),{basename:l}=vH(),{loaderData:c,matches:d}=Ste(),u=H.useMemo(()=>A8(a,e,d,i,r,"data"),[a,e,d,i,r]),h=H.useMemo(()=>A8(a,e,d,i,r,"assets"),[a,e,d,i,r]),f=H.useMemo(()=>{if(a===r.pathname+r.search+r.hash)return[];let b=new Set,w=!1;if(e.forEach(k=>{let T=i.routes[k.route.id];!T||!T.hasLoader||(!u.some(D=>D.route.id===k.route.id)&&k.route.id in c&&o[k.route.id]?.shouldRevalidate||T.hasClientLoader?w=!0:b.add(k.route.id))}),b.size===0)return[];let _=gte(a,l,n.unstable_trailingSlashAwareDataRequests,"data");return w&&b.size>0&&_.searchParams.set("_routes",e.filter(k=>b.has(k.route.id)).map(k=>k.route.id).join(",")),[_.pathname+_.search]},[l,n.unstable_trailingSlashAwareDataRequests,c,r,i,u,e,a,o]),p=H.useMemo(()=>wte(h,i),[h,i]),g=Ate(h);return H.createElement(H.Fragment,null,f.map(b=>H.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...t})),p.map(b=>H.createElement("link",{key:b,rel:"modulepreload",href:b,...t})),g.map(({key:b,link:w})=>H.createElement("link",{key:b,nonce:t.nonce,...w,crossOrigin:w.crossOrigin??t.crossOrigin})))}function Mte(...a){return e=>{a.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Ete=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ete&&(window.__reactRouterVersion="7.13.0")}catch{}function Dte(a,e){return iee({basename:e?.basename,getContext:e?.getContext,future:e?.future,history:wJ({window:e?.window}),hydrationData:Ite(),routes:a,mapRouteProperties:tte,hydrationRouteProperties:ate,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window,unstable_instrumentations:e?.unstable_instrumentations}).initialize()}function Ite(){let a=window?.__staticRouterHydrationData;return a&&a.errors&&(a={...a,errors:Rte(a.errors)}),a}function Rte(a){if(!a)return null;let e=Object.entries(a),t={};for(let[r,n]of e)if(n&&n.__type==="RouteErrorResponse")t[r]=new pb(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let i=window[n.__subType];if(typeof i=="function")try{let o=new i(n.message);o.stack="",t[r]=o}catch{}}if(t[r]==null){let i=new Error(n.message);i.stack="",t[r]=i}}else t[r]=n;return t}var yH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wH=H.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:n,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:f,...p},g){let{basename:b,unstable_useTransitions:w}=H.useContext(Co),_=typeof d=="string"&&yH.test(d),k=KV(d,b);d=k.to;let T=Oee(d,{relative:n}),[D,I,O]=kte(r,p),P=Pte(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:n,viewTransition:h,unstable_defaultShouldRevalidate:f,unstable_useTransitions:w});function V(Q){e&&e(Q),Q.defaultPrevented||P(Q)}let G=H.createElement("a",{...p,...O,href:k.absoluteURL||T,onClick:k.isExternal||i?e:V,ref:Mte(g,I),target:c,"data-discover":!_&&t==="render"?"true":void 0});return D&&!_?H.createElement(H.Fragment,null,G,H.createElement(Cte,{page:T})):G});wH.displayName="Link";var HA=H.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:n=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let h=gb(o,{relative:d.relative}),f=Ic(),p=H.useContext(mb),{navigator:g,basename:b}=H.useContext(Co),w=p!=null&&Hte(h)&&l===!0,_=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,k=f.pathname,T=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(k=k.toLowerCase(),T=T?T.toLowerCase():null,_=_.toLowerCase()),T&&b&&(T=Xs(T,b)||T);const D=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let I=k===_||!n&&k.startsWith(_)&&k.charAt(D)==="/",O=T!=null&&(T===_||!n&&T.startsWith(_)&&T.charAt(_.length)==="/"),P={isActive:I,isPending:O,isTransitioning:w},V=I?e:void 0,G;typeof r=="function"?G=r(P):G=[r,I?"active":null,O?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let Q=typeof i=="function"?i(P):i;return H.createElement(wH,{...d,"aria-current":V,className:G,ref:u,style:Q,to:o,viewTransition:l},typeof c=="function"?c(P):c)});HA.displayName="NavLink";var Lte=H.forwardRef(({discover:a="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:n,state:i,method:o=jw,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:f,...p},g)=>{let{unstable_useTransitions:b}=H.useContext(Co),w=Fte(),_=Vte(l,{relative:d}),k=o.toLowerCase()==="get"?"get":"post",T=typeof l=="string"&&yH.test(l),D=I=>{if(c&&c(I),I.defaultPrevented)return;I.preventDefault();let O=I.nativeEvent.submitter,P=O?.getAttribute("formmethod")||o,V=()=>w(O||I.currentTarget,{fetcherKey:e,method:P,navigate:t,replace:n,state:i,relative:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:f});b&&t!==!1?H.startTransition(()=>V()):V()};return H.createElement("form",{ref:g,method:k,action:_,onSubmit:r?c:D,...p,"data-discover":!T&&a==="render"?"true":void 0})});Lte.displayName="Form";function Ote(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _H(a){let e=H.useContext(k0);return Qa(e,Ote(a)),e}function Pte(a,{target:e,replace:t,state:r,preventScrollReset:n,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let d=Fn(),u=Ic(),h=gb(a,{relative:i});return H.useCallback(f=>{if(fte(f,e)){f.preventDefault();let p=t!==void 0?t:Nc(u)===Nc(h),g=()=>d(a,{replace:p,state:r,preventScrollReset:n,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?H.startTransition(()=>g()):g()}},[u,d,h,t,r,e,a,n,i,o,l,c])}var Bte=0,zte=()=>`__${String(++Bte)}__`;function Fte(){let{router:a}=_H("useSubmit"),{basename:e}=H.useContext(Co),t=Yee(),r=a.fetch,n=a.navigate;return H.useCallback(async(i,o={})=>{let{action:l,method:c,encType:d,formData:u,body:h}=mte(i,e);if(o.navigate===!1){let f=o.fetcherKey||zte();await r(f,t,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:h,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await n(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:h,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,n,e,t])}function Vte(a,{relative:e}={}){let{basename:t}=H.useContext(Co),r=H.useContext(Ml);Qa(r,"useFormAction must be used inside a RouteContext");let[n]=r.matches.slice(-1),i={...gb(a||".",{relative:e})},o=Ic();if(a==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();i.search=u?`?${u}`:""}}return(!a||a===".")&&n.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:xc([t,i.pathname])),Nc(i)}function Hte(a,{relative:e}={}){let t=H.useContext(OA);Qa(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=_H("useViewTransitionState"),n=gb(a,{relative:e});if(!t.isTransitioning)return!1;let i=Xs(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Xs(t.nextLocation.pathname,r)||t.nextLocation.pathname;return a2(n.pathname,o)!=null||a2(n.pathname,i)!=null}var UA=UV();function Ute(a){return H.createElement(nte,{flushSync:UA.flushSync,...a})}const NH=H.createContext(),Na=()=>H.useContext(NH),Gte=({children:a})=>{const[e,t]=H.useState([]),r=H.useCallback(f=>{t(p=>p.filter(g=>g.id!==f))},[]),[n,i]=H.useState(null),o=H.useCallback(()=>{const f=document.querySelectorAll("#local-modal-root");return f.length>0?f[f.length-1]:document.body},[]),l=H.useCallback((f,p)=>new Promise(g=>{const b=Date.now()+Math.random();i(o()),t(w=>[...w,{id:b,type:"alert",title:f,message:p,onConfirm:()=>{g(!0),r(b)}}])}),[r,o]),c=H.useCallback((f,p)=>new Promise(g=>{const b=Date.now()+Math.random();i(o()),t(w=>[...w,{id:b,type:"confirm",title:f,message:p,onConfirm:()=>{g(!0),r(b)},onCancel:()=>{g(!1),r(b)}}])}),[r,o]),d=H.useCallback((f,p,g=[])=>new Promise(b=>{const w=Date.now()+Math.random();i(o()),t(_=>[..._,{id:w,type:"choice",title:f,message:p,options:g,onSelect:k=>{b(k),r(w)}}])}),[r,o]),u=H.useCallback(()=>new Promise(f=>{const p=Date.now()+Math.random();i(o()),t(g=>[...g,{id:p,type:"password",title:" ",message:"  .",onConfirm:b=>{f(b),r(p)},onCancel:()=>{f(null),r(p)}}])}),[r,o]);H.useEffect(()=>{i(o())},[o]);const h=vr.useMemo(()=>({showConfirm:c,showChoice:d,showAlert:l,promptAdminPassword:u}),[c,d,l,u]);return s.jsxs(NH.Provider,{value:h,children:[a,n&&UA.createPortal(s.jsx("div",{id:"modal-root",children:e.map((f,p)=>s.jsx(Wte,{modal:f,index:p},f.id))}),n)]})},Wte=({modal:a,index:e})=>{const[t,r]=H.useState(""),n=vr.useRef(null);H.useEffect(()=>{const o=l=>{if(l.key!=="Tab")return;const c=n.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),d=c[0],u=c[c.length-1];l.shiftKey?document.activeElement===d&&(u.focus(),l.preventDefault()):document.activeElement===u&&(d.focus(),l.preventDefault())};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[]);const i=()=>{a.type==="password"?a.onConfirm(t):a.onConfirm()};return s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-auto",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/70 backdrop-blur-sm animate-in fade-in duration-200",style:{zIndex:9999+e}}),s.jsxs("div",{ref:n,className:"bg-slate-900 border border-slate-700 rounded-3xl p-8 max-w-md w-full shadow-2xl relative animate-in zoom-in-95 duration-200 slide-in-from-bottom-4",style:{zIndex:1e4+e},children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 blur-[40px] rounded-full pointer-events-none"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2 relative z-10",children:a.title}),s.jsx("p",{className:"text-slate-300 mb-6 leading-relaxed relative z-10 whitespace-pre-line break-all",children:a.message}),a.type==="password"&&s.jsx("div",{className:"mb-8 relative z-10",children:s.jsx("input",{type:"password",autoFocus:!0,value:t,onChange:o=>r(o.target.value),onKeyDown:o=>{o.key==="Enter"&&i(),o.key==="Escape"&&a.onCancel()},className:"w-full h-12 bg-slate-950 border border-slate-700 rounded-xl px-4 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all font-mono tracking-widest",placeholder:"Password"})}),s.jsx("div",{className:"flex gap-3 justify-end relative z-10",children:a.type==="choice"?s.jsx("div",{className:"flex flex-wrap gap-2 justify-end w-full",children:a.options.map((o,l)=>s.jsx("button",{onClick:()=>a.onSelect(o.value),className:`px-5 py-2.5 rounded-xl font-bold transition-all active:scale-[0.98] ${o.primary?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg shadow-indigo-500/20 hover:brightness-110":o.danger?"bg-rose-600/20 text-rose-500 border border-rose-500/50 hover:bg-rose-600 hover:text-white":"bg-slate-800 text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:o.label},l))}):s.jsxs(s.Fragment,{children:[(a.type==="confirm"||a.type==="password")&&s.jsx("button",{onClick:a.onCancel,className:"px-5 py-2.5 rounded-xl text-slate-400 font-bold hover:bg-slate-800 hover:text-white transition-colors",children:""}),s.jsx("button",{onClick:i,className:"px-6 py-2.5 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold shadow-lg shadow-indigo-500/20 hover:brightness-110 active:scale-[0.98] transition-all",children:""})]})})]})]})};var kw={exports:{}},$te=kw.exports,T8;function Yte(){return T8||(T8=1,(function(a,e){((t,r)=>{a.exports=r()})($te,function(){var t=function(N,A){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(L,B){L.__proto__=B}:function(L,B){for(var Y in B)Object.prototype.hasOwnProperty.call(B,Y)&&(L[Y]=B[Y])}))(N,A)},r=function(){return(r=Object.assign||function(N){for(var A,L=1,B=arguments.length;L<B;L++)for(var Y in A=arguments[L])Object.prototype.hasOwnProperty.call(A,Y)&&(N[Y]=A[Y]);return N}).apply(this,arguments)};function n(N,A,L){for(var B,Y=0,te=A.length;Y<te;Y++)!B&&Y in A||((B=B||Array.prototype.slice.call(A,0,Y))[Y]=A[Y]);return N.concat(B||Array.prototype.slice.call(A))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:kg,o=Object.keys,l=Array.isArray;function c(N,A){return typeof A=="object"&&o(A).forEach(function(L){N[L]=A[L]}),N}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var d=Object.getPrototypeOf,u={}.hasOwnProperty;function h(N,A){return u.call(N,A)}function f(N,A){typeof A=="function"&&(A=A(d(N))),(typeof Reflect>"u"?o:Reflect.ownKeys)(A).forEach(function(L){g(N,L,A[L])})}var p=Object.defineProperty;function g(N,A,L,B){p(N,A,c(L&&h(L,"get")&&typeof L.get=="function"?{get:L.get,set:L.set,configurable:!0}:{value:L,configurable:!0,writable:!0},B))}function b(N){return{from:function(A){return N.prototype=Object.create(A.prototype),g(N.prototype,"constructor",N),{extend:f.bind(null,N.prototype)}}}}var w=Object.getOwnPropertyDescriptor,_=[].slice;function k(N,A,L){return _.call(N,A,L)}function T(N,A){return A(N)}function D(N){if(!N)throw new Error("Assertion Failed")}function I(N){i.setImmediate?setImmediate(N):setTimeout(N,0)}function O(N,A){if(typeof A=="string"&&h(N,A))return N[A];if(!A)return N;if(typeof A!="string"){for(var L=[],B=0,Y=A.length;B<Y;++B){var te=O(N,A[B]);L.push(te)}return L}var se,ce=A.indexOf(".");return ce===-1||(se=N[A.substr(0,ce)])==null?void 0:O(se,A.substr(ce+1))}function P(N,A,L){if(N&&A!==void 0&&!("isFrozen"in Object&&Object.isFrozen(N)))if(typeof A!="string"&&"length"in A){D(typeof L!="string"&&"length"in L);for(var B=0,Y=A.length;B<Y;++B)P(N,A[B],L[B])}else{var te,se,ce=A.indexOf(".");ce!==-1?(te=A.substr(0,ce),(ce=A.substr(ce+1))===""?L===void 0?l(N)&&!isNaN(parseInt(te))?N.splice(te,1):delete N[te]:N[te]=L:P(se=(se=N[te])&&h(N,te)?se:N[te]={},ce,L)):L===void 0?l(N)&&!isNaN(parseInt(A))?N.splice(A,1):delete N[A]:N[A]=L}}function V(N){var A,L={};for(A in N)h(N,A)&&(L[A]=N[A]);return L}var G=[].concat;function Q(N){return G.apply([],N)}var ie="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Q([8,16,32,64].map(function(N){return["Int","Uint","Float"].map(function(A){return A+N+"Array"})}))).filter(function(N){return i[N]}),$=new Set(ie.map(function(N){return i[N]})),ae=null;function J(N){return ae=new WeakMap,N=(function A(L){if(!L||typeof L!="object")return L;var B=ae.get(L);if(B)return B;if(l(L)){B=[],ae.set(L,B);for(var Y=0,te=L.length;Y<te;++Y)B.push(A(L[Y]))}else if($.has(L.constructor))B=L;else{var se,ce=d(L);for(se in B=ce===Object.prototype?{}:Object.create(ce),ae.set(L,B),L)h(L,se)&&(B[se]=A(L[se]))}return B})(N),ae=null,N}var U={}.toString;function F(N){return U.call(N).slice(8,-1)}var W=typeof Symbol<"u"?Symbol.iterator:"@@iterator",K=typeof W=="symbol"?function(N){var A;return N!=null&&(A=N[W])&&A.apply(N)}:function(){return null};function ee(N,A){A=N.indexOf(A),0<=A&&N.splice(A,1)}var ne={};function re(N){var A,L,B,Y;if(arguments.length===1){if(l(N))return N.slice();if(this===ne&&typeof N=="string")return[N];if(Y=K(N))for(L=[];!(B=Y.next()).done;)L.push(B.value);else{if(N==null)return[N];if(typeof(A=N.length)!="number")return[N];for(L=new Array(A);A--;)L[A]=N[A]}}else for(A=arguments.length,L=new Array(A);A--;)L[A]=arguments[A];return L}var Z=typeof Symbol<"u"?function(N){return N[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ie=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],zt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ie),de={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function fe(N,A){this.name=N,this.message=A}function he(N,A){return N+". Errors: "+Object.keys(A).map(function(L){return A[L].toString()}).filter(function(L,B,Y){return Y.indexOf(L)===B}).join(`
`)}function ve(N,A,L,B){this.failures=A,this.failedKeys=B,this.successCount=L,this.message=he(N,A)}function Oe(N,A){this.name="BulkError",this.failures=Object.keys(A).map(function(L){return A[L]}),this.failuresByPos=A,this.message=he(N,this.failures)}b(fe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(ve).from(fe),b(Oe).from(fe);var Se=zt.reduce(function(N,A){return N[A]=A+"Error",N},{}),Ce=fe,we=zt.reduce(function(N,A){var L=A+"Error";function B(Y,te){this.name=L,Y?typeof Y=="string"?(this.message="".concat(Y).concat(te?`
 `+te:""),this.inner=te||null):typeof Y=="object"&&(this.message="".concat(Y.name," ").concat(Y.message),this.inner=Y):(this.message=de[A]||L,this.inner=null)}return b(B).from(Ce),N[A]=B,N},{}),xe=(we.Syntax=SyntaxError,we.Type=TypeError,we.Range=RangeError,ie.reduce(function(N,A){return N[A+"Error"]=we[A],N},{}));ie=zt.reduce(function(N,A){return["Syntax","Type","Range"].indexOf(A)===-1&&(N[A+"Error"]=we[A]),N},{});function be(){}function Ee(N){return N}function ze(N,A){return N==null||N===Ee?A:function(L){return A(N(L))}}function Ze(N,A){return function(){N.apply(this,arguments),A.apply(this,arguments)}}function Re(N,A){return N===be?A:function(){var L=N.apply(this,arguments),B=(L!==void 0&&(arguments[0]=L),this.onsuccess),Y=this.onerror,te=(this.onsuccess=null,this.onerror=null,A.apply(this,arguments));return B&&(this.onsuccess=this.onsuccess?Ze(B,this.onsuccess):B),Y&&(this.onerror=this.onerror?Ze(Y,this.onerror):Y),te!==void 0?te:L}}function ut(N,A){return N===be?A:function(){N.apply(this,arguments);var L=this.onsuccess,B=this.onerror;this.onsuccess=this.onerror=null,A.apply(this,arguments),L&&(this.onsuccess=this.onsuccess?Ze(L,this.onsuccess):L),B&&(this.onerror=this.onerror?Ze(B,this.onerror):B)}}function vt(N,A){return N===be?A:function(Y){var B=N.apply(this,arguments),Y=(c(Y,B),this.onsuccess),te=this.onerror,se=(this.onsuccess=null,this.onerror=null,A.apply(this,arguments));return Y&&(this.onsuccess=this.onsuccess?Ze(Y,this.onsuccess):Y),te&&(this.onerror=this.onerror?Ze(te,this.onerror):te),B===void 0?se===void 0?void 0:se:c(B,se)}}function yt(N,A){return N===be?A:function(){return A.apply(this,arguments)!==!1&&N.apply(this,arguments)}}function Ue(N,A){return N===be?A:function(){var L=N.apply(this,arguments);if(L&&typeof L.then=="function"){for(var B=this,Y=arguments.length,te=new Array(Y);Y--;)te[Y]=arguments[Y];return L.then(function(){return A.apply(B,te)})}return A.apply(this,arguments)}}ie.ModifyError=ve,ie.DexieError=fe,ie.BulkError=Oe;var Ye=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ht(N){Ye=N}var ta={},Bt=100,Da=typeof Promise>"u"?[]:(zt=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[Da=crypto.subtle.digest("SHA-512",new Uint8Array([0])),d(Da),zt]:[zt,d(zt),zt]),zt=Da[0],qa=Da[1],qa=qa&&qa.then,Lr=zt&&zt.constructor,ka=!!Da[2],Ca=function(N,A){la.push([N,A]),Ie&&(queueMicrotask(cn),Ie=!1)},Sn=!0,Ie=!0,st=[],Tt=[],lt=Ee,oa={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:be,pgp:!1,env:{},finalize:be},xt=oa,la=[],Vr=0,hs=[];function It(N){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var A=this._PSD=xt;if(typeof N!="function"){if(N!==ta)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Yi(this,this._value)}else this._state=null,this._value=null,++A.ref,(function L(B,Y){try{Y(function(te){if(B._state===null){if(te===B)throw new TypeError("A promise cannot be resolved with itself.");var se=B._lib&&kn();te&&typeof te.then=="function"?L(B,function(ce,pe){te instanceof It?te._then(ce,pe):te.then(ce,pe)}):(B._state=!0,B._value=te,Ks(B)),se&&ai()}},Yi.bind(null,B))}catch(te){Yi(B,te)}})(this,N)}var Ya={get:function(){var N=xt,A=ot;function L(B,Y){var te=this,se=!N.global&&(N!==xt||A!==ot),ce=se&&!Vt(),pe=new It(function(ye,ge){_n(te,new xi(pr(B,N,se,ce),pr(Y,N,se,ce),ye,ge,N))});return this._consoleTask&&(pe._consoleTask=this._consoleTask),pe}return L.prototype=ta,L},set:function(N){g(this,"then",N&&N.prototype===ta?Ya:{get:function(){return N},set:Ya.set})}};function xi(N,A,L,B,Y){this.onFulfilled=typeof N=="function"?N:null,this.onRejected=typeof A=="function"?A:null,this.resolve=L,this.reject=B,this.psd=Y}function Yi(N,A){var L,B;Tt.push(A),N._state===null&&(L=N._lib&&kn(),A=lt(A),N._state=!1,N._value=A,B=N,st.some(function(Y){return Y._value===B._value})||st.push(B),Ks(N),L)&&ai()}function Ks(N){var A=N._listeners;N._listeners=[];for(var L=0,B=A.length;L<B;++L)_n(N,A[L]);var Y=N._PSD;--Y.ref||Y.finalize(),Vr===0&&(++Vr,Ca(function(){--Vr==0&&Si()},[]))}function _n(N,A){if(N._state===null)N._listeners.push(A);else{var L=N._state?A.onFulfilled:A.onRejected;if(L===null)return(N._state?A.resolve:A.reject)(N._value);++A.psd.ref,++Vr,Ca(Ol,[L,N,A])}}function Ol(N,A,L){try{var B,Y=A._value;!A._state&&Tt.length&&(Tt=[]),B=Ye&&A._consoleTask?A._consoleTask.run(function(){return N(Y)}):N(Y),A._state||Tt.indexOf(Y)!==-1||(te=>{for(var se=st.length;se;)if(st[--se]._value===te._value)return st.splice(se,1)})(A),L.resolve(B)}catch(te){L.reject(te)}finally{--Vr==0&&Si(),--L.psd.ref||L.psd.finalize()}}function cn(){Nr(oa,function(){kn()&&ai()})}function kn(){var N=Sn;return Ie=Sn=!1,N}function ai(){var N,A,L;do for(;0<la.length;)for(N=la,la=[],L=N.length,A=0;A<L;++A){var B=N[A];B[0].apply(null,B[1])}while(0<la.length);Ie=Sn=!0}function Si(){for(var N=st,A=(st=[],N.forEach(function(B){B._PSD.onunhandled.call(null,B._value,B)}),hs.slice(0)),L=A.length;L;)A[--L]()}function sl(N){return new It(ta,!1,N)}function Ae(N,A){var L=xt;return function(){var B=kn(),Y=xt;try{return ja(L,!0),N.apply(this,arguments)}catch(te){A&&A(te)}finally{ja(Y,!1),B&&ai()}}}f(It.prototype,{then:Ya,_then:function(N,A){_n(this,new xi(null,null,N,A,xt))},catch:function(N){var A,L;return arguments.length===1?this.then(null,N):(A=N,L=arguments[1],typeof A=="function"?this.then(null,function(B){return(B instanceof A?L:sl)(B)}):this.then(null,function(B){return(B&&B.name===A?L:sl)(B)}))},finally:function(N){return this.then(function(A){return It.resolve(N()).then(function(){return A})},function(A){return It.resolve(N()).then(function(){return sl(A)})})},timeout:function(N,A){var L=this;return N<1/0?new It(function(B,Y){var te=setTimeout(function(){return Y(new we.Timeout(A))},N);L.then(B,Y).finally(clearTimeout.bind(null,te))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&g(It.prototype,Symbol.toStringTag,"Dexie.Promise"),oa.env=nr(),f(It,{all:function(){var N=re.apply(null,arguments).map(ca);return new It(function(A,L){N.length===0&&A([]);var B=N.length;N.forEach(function(Y,te){return It.resolve(Y).then(function(se){N[te]=se,--B||A(N)},L)})})},resolve:function(N){return N instanceof It?N:N&&typeof N.then=="function"?new It(function(A,L){N.then(A,L)}):new It(ta,!0,N)},reject:sl,race:function(){var N=re.apply(null,arguments).map(ca);return new It(function(A,L){N.map(function(B){return It.resolve(B).then(A,L)})})},PSD:{get:function(){return xt},set:function(N){return xt=N}},totalEchoes:{get:function(){return ot}},newPSD:Et,usePSD:Nr,scheduler:{get:function(){return Ca},set:function(N){Ca=N}},rejectionMapper:{get:function(){return lt},set:function(N){lt=N}},follow:function(N,A){return new It(function(L,B){return Et(function(Y,te){var se=xt;se.unhandleds=[],se.onunhandled=te,se.finalize=Ze(function(){var ce,pe=this;ce=function(){pe.unhandleds.length===0?Y():te(pe.unhandleds[0])},hs.push(function ye(){ce(),hs.splice(hs.indexOf(ye),1)}),++Vr,Ca(function(){--Vr==0&&Si()},[])},se.finalize),N()},A,L,B)})}}),Lr&&(Lr.allSettled&&g(It,"allSettled",function(){var N=re.apply(null,arguments).map(ca);return new It(function(A){N.length===0&&A([]);var L=N.length,B=new Array(L);N.forEach(function(Y,te){return It.resolve(Y).then(function(se){return B[te]={status:"fulfilled",value:se}},function(se){return B[te]={status:"rejected",reason:se}}).then(function(){return--L||A(B)})})})}),Lr.any&&typeof AggregateError<"u"&&g(It,"any",function(){var N=re.apply(null,arguments).map(ca);return new It(function(A,L){N.length===0&&L(new AggregateError([]));var B=N.length,Y=new Array(B);N.forEach(function(te,se){return It.resolve(te).then(function(ce){return A(ce)},function(ce){Y[se]=ce,--B||L(new AggregateError(Y))})})})}),Lr.withResolvers)&&(It.withResolvers=Lr.withResolvers);var Be={awaits:0,echoes:0,id:0},Xe=0,gt=[],wt=0,ot=0,Lt=0;function Et(N,se,L,B){var Y=xt,te=Object.create(Y),se=(te.parent=Y,te.ref=0,te.global=!1,te.id=++Lt,oa.env,te.env=ka?{Promise:It,PromiseProp:{value:It,configurable:!0,writable:!0},all:It.all,race:It.race,allSettled:It.allSettled,any:It.any,resolve:It.resolve,reject:It.reject}:{},se&&c(te,se),++Y.ref,te.finalize=function(){--this.parent.ref||this.parent.finalize()},Nr(te,N,L,B));return te.ref===0&&te.finalize(),se}function At(){return Be.id||(Be.id=++Xe),++Be.awaits,Be.echoes+=Bt,Be.id}function Vt(){return!!Be.awaits&&(--Be.awaits==0&&(Be.id=0),Be.echoes=Be.awaits*Bt,!0)}function ca(N){return Be.echoes&&N&&N.constructor===Lr?(At(),N.then(function(A){return Vt(),A},function(A){return Vt(),Ot(A)})):N}function sa(){var N=gt[gt.length-1];gt.pop(),ja(N,!1)}function ja(N,A){var L,B,Y=xt;(A?!Be.echoes||wt++&&N===xt:!wt||--wt&&N===xt)||queueMicrotask(A?(function(te){++ot,Be.echoes&&--Be.echoes!=0||(Be.echoes=Be.awaits=Be.id=0),gt.push(xt),ja(te,!0)}).bind(null,N):sa),N!==xt&&(xt=N,Y===oa&&(oa.env=nr()),ka)&&(L=oa.env.Promise,B=N.env,Y.global||N.global)&&(Object.defineProperty(i,"Promise",B.PromiseProp),L.all=B.all,L.race=B.race,L.resolve=B.resolve,L.reject=B.reject,B.allSettled&&(L.allSettled=B.allSettled),B.any)&&(L.any=B.any)}function nr(){var N=i.Promise;return ka?{Promise:N,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:N.all,race:N.race,allSettled:N.allSettled,any:N.any,resolve:N.resolve,reject:N.reject}:{}}function Nr(N,A,L,B,Y){var te=xt;try{return ja(N,!0),A(L,B,Y)}finally{ja(te,!1)}}function pr(N,A,L,B){return typeof N!="function"?N:function(){var Y=xt;L&&At(),ja(A,!0);try{return N.apply(this,arguments)}finally{ja(Y,!1),B&&queueMicrotask(Vt)}}}function Za(N){Promise===Lr&&Be.echoes===0?wt===0?N():enqueueNativeMicroTask(N):setTimeout(N,0)}(""+qa).indexOf("[native code]")===-1&&(At=Vt=be);var Ot=It.reject,Hr="",jr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Er="String expected.",dt=[],ri="__dbnames",sr="readonly",Nn="readwrite";function mi(N,A){return N?A?function(){return N.apply(this,arguments)&&A.apply(this,arguments)}:N:A}var er={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ha(N){return typeof N!="string"||/\./.test(N)?function(A){return A}:function(A){return A[N]===void 0&&N in A&&delete(A=J(A))[N],A}}function Wt(){throw we.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ua(N,A){try{var L=ki(N),B=ki(A);if(L!==B)return L==="Array"?1:B==="Array"?-1:L==="binary"?1:B==="binary"?-1:L==="string"?1:B==="string"?-1:L==="Date"?1:B!=="Date"?NaN:-1;switch(L){case"number":case"Date":case"string":return A<N?1:N<A?-1:0;case"binary":for(var Y=mn(N),te=mn(A),se=Y.length,ce=te.length,pe=se<ce?se:ce,ye=0;ye<pe;++ye)if(Y[ye]!==te[ye])return Y[ye]<te[ye]?-1:1;return se===ce?0:se<ce?-1:1;case"Array":for(var ge=N,_e=A,ke=ge.length,Ne=_e.length,Me=ke<Ne?ke:Ne,Te=0;Te<Me;++Te){var Ge=ua(ge[Te],_e[Te]);if(Ge!==0)return Ge}return ke===Ne?0:ke<Ne?-1:1}}catch{}return NaN}function ki(N){var A=typeof N;return A=="object"&&(ArrayBuffer.isView(N)||(A=F(N))==="ArrayBuffer")?"binary":A}function mn(N){return N instanceof Uint8Array?N:ArrayBuffer.isView(N)?new Uint8Array(N.buffer,N.byteOffset,N.byteLength):new Uint8Array(N)}function fa(N,A,L){var B=N.schema.yProps;return B?(A&&0<L.numFailures&&(A=A.filter(function(Y,te){return!L.failures[te]})),Promise.all(B.map(function(Y){return Y=Y.updatesTable,A?N.db.table(Y).where("k").anyOf(A).delete():N.db.table(Y).clear()})).then(function(){return L})):L}Pc.prototype.execute=function(N){var A=this["@@propmod"];if(A.add!==void 0){var L=A.add;if(l(L))return n(n([],l(N)?N:[],!0),L).sort();if(typeof L=="number")return(Number(N)||0)+L;if(typeof L=="bigint")try{return BigInt(N)+L}catch{return BigInt(0)+L}throw new TypeError("Invalid term ".concat(L))}if(A.remove!==void 0){var B=A.remove;if(l(B))return l(N)?N.filter(function(Y){return!B.includes(Y)}).sort():[];if(typeof B=="number")return Number(N)-B;if(typeof B=="bigint")try{return BigInt(N)-B}catch{return BigInt(0)-B}throw new TypeError("Invalid subtrahend ".concat(B))}return L=(L=A.replacePrefix)==null?void 0:L[0],L&&typeof N=="string"&&N.startsWith(L)?A.replacePrefix[1]+N.substring(L.length):N};var Cn=Pc;function Pc(N){this["@@propmod"]=N}function Or(N,A){for(var L=o(A),B=L.length,Y=!1,te=0;te<B;++te){var se=L[te],ce=A[se],pe=O(N,se);ce instanceof Cn?(P(N,se,ce.execute(pe)),Y=!0):pe!==ce&&(P(N,se,ce),Y=!0)}return Y}Sr.prototype._trans=function(N,A,L){var B=this._tx||xt.trans,Y=this.name,te=Ye&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(N==="readonly"?"read":"write"," ").concat(this.name));function se(ye,ge,_e){if(_e.schema[Y])return A(_e.idbtrans,_e);throw new we.NotFound("Table "+Y+" not part of transaction")}var ce=kn();try{var pe=B&&B.db._novip===this.db._novip?B===xt.trans?B._promise(N,se,L):Et(function(){return B._promise(N,se,L)},{trans:B,transless:xt.transless||xt}):(function ye(ge,_e,ke,Ne){if(ge.idbdb&&(ge._state.openComplete||xt.letThrough||ge._vip)){var Me=ge._createTransaction(_e,ke,ge._dbSchema);try{Me.create(),ge._state.PR1398_maxLoop=3}catch(Te){return Te.name===Se.InvalidState&&ge.isOpen()&&0<--ge._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ge.close({disableAutoOpen:!1}),ge.open().then(function(){return ye(ge,_e,ke,Ne)})):Ot(Te)}return Me._promise(_e,function(Te,Ge){return Et(function(){return xt.trans=Me,Ne(Te,Ge,Me)})}).then(function(Te){if(_e==="readwrite")try{Me.idbtrans.commit()}catch{}return _e==="readonly"?Te:Me._completion.then(function(){return Te})})}if(ge._state.openComplete)return Ot(new we.DatabaseClosed(ge._state.dbOpenError));if(!ge._state.isBeingOpened){if(!ge._state.autoOpen)return Ot(new we.DatabaseClosed);ge.open().catch(be)}return ge._state.dbReadyPromise.then(function(){return ye(ge,_e,ke,Ne)})})(this.db,N,[this.name],se);return te&&(pe._consoleTask=te,pe=pe.catch(function(ye){return console.trace(ye),Ot(ye)})),pe}finally{ce&&ai()}},Sr.prototype.get=function(N,A){var L=this;return N&&N.constructor===Object?this.where(N).first(A):N==null?Ot(new we.Type("Invalid argument to Table.get()")):this._trans("readonly",function(B){return L.core.get({trans:B,key:N}).then(function(Y){return L.hook.reading.fire(Y)})}).then(A)},Sr.prototype.where=function(N){if(typeof N=="string")return new this.db.WhereClause(this,N);if(l(N))return new this.db.WhereClause(this,"[".concat(N.join("+"),"]"));var A=o(N);if(A.length===1)return this.where(A[0]).equals(N[A[0]]);var L=this.schema.indexes.concat(this.schema.primKey).filter(function(ce){if(ce.compound&&A.every(function(ye){return 0<=ce.keyPath.indexOf(ye)})){for(var pe=0;pe<A.length;++pe)if(A.indexOf(ce.keyPath[pe])===-1)return!1;return!0}return!1}).sort(function(ce,pe){return ce.keyPath.length-pe.keyPath.length})[0];if(L&&this.db._maxKey!==Hr)return se=L.keyPath.slice(0,A.length),this.where(se).equals(se.map(function(ce){return N[ce]}));!L&&Ye&&console.warn("The query ".concat(JSON.stringify(N)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(A.join("+"),"]"));var B=this.schema.idxByName;function Y(ce,pe){return ua(ce,pe)===0}var se=A.reduce(function(ge,pe){var ye=ge[0],ge=ge[1],_e=B[pe],ke=N[pe];return[ye||_e,ye||!_e?mi(ge,_e&&_e.multi?function(Ne){return Ne=O(Ne,pe),l(Ne)&&Ne.some(function(Me){return Y(ke,Me)})}:function(Ne){return Y(ke,O(Ne,pe))}):ge]},[null,null]),te=se[0],se=se[1];return te?this.where(te.name).equals(N[te.keyPath]).filter(se):L?this.filter(se):this.where(A).equals("")},Sr.prototype.filter=function(N){return this.toCollection().and(N)},Sr.prototype.count=function(N){return this.toCollection().count(N)},Sr.prototype.offset=function(N){return this.toCollection().offset(N)},Sr.prototype.limit=function(N){return this.toCollection().limit(N)},Sr.prototype.each=function(N){return this.toCollection().each(N)},Sr.prototype.toArray=function(N){return this.toCollection().toArray(N)},Sr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Sr.prototype.orderBy=function(N){return new this.db.Collection(new this.db.WhereClause(this,l(N)?"[".concat(N.join("+"),"]"):N))},Sr.prototype.reverse=function(){return this.toCollection().reverse()},Sr.prototype.mapToClass=function(N){for(var A=this.db,L=this.name,B=((this.schema.mappedClass=N).prototype instanceof Wt&&(N=(se=>{var ce=ge,pe=se;if(typeof pe!="function"&&pe!==null)throw new TypeError("Class extends value "+String(pe)+" is not a constructor or null");function ye(){this.constructor=ce}function ge(){return se!==null&&se.apply(this,arguments)||this}return t(ce,pe),ce.prototype=pe===null?Object.create(pe):(ye.prototype=pe.prototype,new ye),Object.defineProperty(ge.prototype,"db",{get:function(){return A},enumerable:!1,configurable:!0}),ge.prototype.table=function(){return L},ge})(N)),new Set),Y=N.prototype;Y;Y=d(Y))Object.getOwnPropertyNames(Y).forEach(function(se){return B.add(se)});function te(se){if(!se)return se;var ce,pe=Object.create(N.prototype);for(ce in se)if(!B.has(ce))try{pe[ce]=se[ce]}catch{}return pe}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=te,this.hook("reading",te),N},Sr.prototype.defineClass=function(){return this.mapToClass(function(N){c(this,N)})},Sr.prototype.add=function(N,A){var L=this,B=this.schema.primKey,Y=B.auto,te=B.keyPath,se=N;return te&&Y&&(se=Ha(te)(N)),this._trans("readwrite",function(ce){return L.core.mutate({trans:ce,type:"add",keys:A!=null?[A]:null,values:[se]})}).then(function(ce){return ce.numFailures?It.reject(ce.failures[0]):ce.lastResult}).then(function(ce){if(te)try{P(N,te,ce)}catch{}return ce})},Sr.prototype.upsert=function(N,A){var L=this,B=this.schema.primKey.keyPath;return this._trans("readwrite",function(Y){return L.core.get({trans:Y,key:N}).then(function(te){var se=te??{};return Or(se,A),B&&P(se,B,N),L.core.mutate({trans:Y,type:"put",values:[se],keys:[N],upsert:!0,updates:{keys:[N],changeSpecs:[A]}}).then(function(ce){return ce.numFailures?It.reject(ce.failures[0]):!!te})})})},Sr.prototype.update=function(N,A){return typeof N!="object"||l(N)?this.where(":id").equals(N).modify(A):(N=O(N,this.schema.primKey.keyPath))===void 0?Ot(new we.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(N).modify(A)},Sr.prototype.put=function(N,A){var L=this,B=this.schema.primKey,Y=B.auto,te=B.keyPath,se=N;return te&&Y&&(se=Ha(te)(N)),this._trans("readwrite",function(ce){return L.core.mutate({trans:ce,type:"put",values:[se],keys:A!=null?[A]:null})}).then(function(ce){return ce.numFailures?It.reject(ce.failures[0]):ce.lastResult}).then(function(ce){if(te)try{P(N,te,ce)}catch{}return ce})},Sr.prototype.delete=function(N){var A=this;return this._trans("readwrite",function(L){return A.core.mutate({trans:L,type:"delete",keys:[N]}).then(function(B){return fa(A,[N],B)}).then(function(B){return B.numFailures?It.reject(B.failures[0]):void 0})})},Sr.prototype.clear=function(){var N=this;return this._trans("readwrite",function(A){return N.core.mutate({trans:A,type:"deleteRange",range:er}).then(function(L){return fa(N,null,L)})}).then(function(A){return A.numFailures?It.reject(A.failures[0]):void 0})},Sr.prototype.bulkGet=function(N){var A=this;return this._trans("readonly",function(L){return A.core.getMany({keys:N,trans:L}).then(function(B){return B.map(function(Y){return A.hook.reading.fire(Y)})})})},Sr.prototype.bulkAdd=function(N,A,L){var B=this,Y=Array.isArray(A)?A:void 0,te=(L=L||(Y?void 0:A))?L.allKeys:void 0;return this._trans("readwrite",function(se){var ce=B.schema.primKey,ye=ce.auto,ce=ce.keyPath;if(ce&&Y)throw new we.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(Y&&Y.length!==N.length)throw new we.InvalidArgument("Arguments objects and keys must have the same length");var pe=N.length,ye=ce&&ye?N.map(Ha(ce)):N;return B.core.mutate({trans:se,type:"add",keys:Y,values:ye,wantResults:te}).then(function(ge){var _e=ge.numFailures,ke=ge.failures;if(_e===0)return te?ge.results:ge.lastResult;throw new Oe("".concat(B.name,".bulkAdd(): ").concat(_e," of ").concat(pe," operations failed"),ke)})})},Sr.prototype.bulkPut=function(N,A,L){var B=this,Y=Array.isArray(A)?A:void 0,te=(L=L||(Y?void 0:A))?L.allKeys:void 0;return this._trans("readwrite",function(se){var ce=B.schema.primKey,ye=ce.auto,ce=ce.keyPath;if(ce&&Y)throw new we.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(Y&&Y.length!==N.length)throw new we.InvalidArgument("Arguments objects and keys must have the same length");var pe=N.length,ye=ce&&ye?N.map(Ha(ce)):N;return B.core.mutate({trans:se,type:"put",keys:Y,values:ye,wantResults:te}).then(function(ge){var _e=ge.numFailures,ke=ge.failures;if(_e===0)return te?ge.results:ge.lastResult;throw new Oe("".concat(B.name,".bulkPut(): ").concat(_e," of ").concat(pe," operations failed"),ke)})})},Sr.prototype.bulkUpdate=function(N){var A=this,L=this.core,B=N.map(function(se){return se.key}),Y=N.map(function(se){return se.changes}),te=[];return this._trans("readwrite",function(se){return L.getMany({trans:se,keys:B,cache:"clone"}).then(function(ce){var pe=[],ye=[],ge=(N.forEach(function(_e,ke){var Ne=_e.key,Me=_e.changes,Te=ce[ke];if(Te){for(var Ge=0,qe=Object.keys(Me);Ge<qe.length;Ge++){var He=qe[Ge],et=Me[He];if(He===A.schema.primKey.keyPath){if(ua(et,Ne)!==0)throw new we.Constraint("Cannot update primary key in bulkUpdate()")}else P(Te,He,et)}te.push(ke),pe.push(Ne),ye.push(Te)}}),pe.length);return L.mutate({trans:se,type:"put",keys:pe,values:ye,updates:{keys:B,changeSpecs:Y}}).then(function(_e){var ke=_e.numFailures,Ne=_e.failures;if(ke===0)return ge;for(var Me=0,Te=Object.keys(Ne);Me<Te.length;Me++){var Ge,qe=Te[Me],He=te[Number(qe)];He!=null&&(Ge=Ne[qe],delete Ne[qe],Ne[He]=Ge)}throw new Oe("".concat(A.name,".bulkUpdate(): ").concat(ke," of ").concat(ge," operations failed"),Ne)})})})},Sr.prototype.bulkDelete=function(N){var A=this,L=N.length;return this._trans("readwrite",function(B){return A.core.mutate({trans:B,type:"delete",keys:N}).then(function(Y){return fa(A,N,Y)})}).then(function(B){var Y=B.numFailures,te=B.failures;if(Y===0)return B.lastResult;throw new Oe("".concat(A.name,".bulkDelete(): ").concat(Y," of ").concat(L," operations failed"),te)})};var Ts=Sr;function Sr(){}function Ms(N){function A(se,ce){if(ce){for(var pe=arguments.length,ye=new Array(pe-1);--pe;)ye[pe-1]=arguments[pe];return L[se].subscribe.apply(null,ye),N}if(typeof se=="string")return L[se]}var L={};A.addEventType=te;for(var B=1,Y=arguments.length;B<Y;++B)te(arguments[B]);return A;function te(se,ce,pe){var ye,ge;if(typeof se!="object")return ce=ce||yt,ge={subscribers:[],fire:pe=pe||be,subscribe:function(_e){ge.subscribers.indexOf(_e)===-1&&(ge.subscribers.push(_e),ge.fire=ce(ge.fire,_e))},unsubscribe:function(_e){ge.subscribers=ge.subscribers.filter(function(ke){return ke!==_e}),ge.fire=ge.subscribers.reduce(ce,pe)}},L[se]=A[se]=ge;o(ye=se).forEach(function(_e){var ke=ye[_e];if(l(ke))te(_e,ye[_e][0],ye[_e][1]);else{if(ke!=="asap")throw new we.InvalidArgument("Invalid event config");var Ne=te(_e,Ee,function(){for(var Me=arguments.length,Te=new Array(Me);Me--;)Te[Me]=arguments[Me];Ne.subscribers.forEach(function(Ge){I(function(){Ge.apply(null,Te)})})})}})}}function Fa(N,A){return b(A).from({prototype:N}),A}function an(N,A){return!(N.filter||N.algorithm||N.or)&&(A?N.justLimit:!N.replayFilter)}function $e(N,A){N.filter=mi(N.filter,A)}function je(N,A,L){var B=N.replayFilter;N.replayFilter=B?function(){return mi(B(),A())}:A,N.justLimit=L&&!B}function aa(N,A){if(N.isPrimKey)return A.primaryKey;var L=A.getIndexByKeyPath(N.index);if(L)return L;throw new we.Schema("KeyPath "+N.index+" on object store "+A.name+" is not indexed")}function gn(N,A,L){var B=aa(N,A.schema);return A.openCursor({trans:L,values:!N.keysOnly,reverse:N.dir==="prev",unique:!!N.unique,query:{index:B,range:N.range}})}function ni(N,A,L,B){var Y,te,se=N.replayFilter?mi(N.filter,N.replayFilter()):N.filter;return N.or?(Y={},te=function(ce,pe,ye){var ge,_e;se&&!se(pe,ye,function(ke){return pe.stop(ke)},function(ke){return pe.fail(ke)})||((_e=""+(ge=pe.primaryKey))=="[object ArrayBuffer]"&&(_e=""+new Uint8Array(ge)),h(Y,_e))||(Y[_e]=!0,A(ce,pe,ye))},Promise.all([N.or._iterate(te,L),ol(gn(N,B,L),N.algorithm,te,!N.keysOnly&&N.valueMapper)])):ol(gn(N,B,L),mi(N.algorithm,se),A,!N.keysOnly&&N.valueMapper)}function ol(N,A,L,B){var Y=Ae(B?function(te,se,ce){return L(B(te),se,ce)}:L);return N.then(function(te){if(te)return te.start(function(){var se=function(){return te.continue()};A&&!A(te,function(ce){return se=ce},function(ce){te.stop(ce),se=be},function(ce){te.fail(ce),se=be})||Y(te.value,te,function(ce){return se=ce}),se()})})}Ra.prototype._read=function(N,A){var L=this._ctx;return L.error?L.table._trans(null,Ot.bind(null,L.error)):L.table._trans("readonly",N).then(A)},Ra.prototype._write=function(N){var A=this._ctx;return A.error?A.table._trans(null,Ot.bind(null,A.error)):A.table._trans("readwrite",N,"locked")},Ra.prototype._addAlgorithm=function(N){var A=this._ctx;A.algorithm=mi(A.algorithm,N)},Ra.prototype._iterate=function(N,A){return ni(this._ctx,N,A,this._ctx.table.core)},Ra.prototype.clone=function(N){var A=Object.create(this.constructor.prototype),L=Object.create(this._ctx);return N&&c(L,N),A._ctx=L,A},Ra.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ra.prototype.each=function(N){var A=this._ctx;return this._read(function(L){return ni(A,N,L,A.table.core)})},Ra.prototype.count=function(N){var A=this;return this._read(function(L){var B,Y=A._ctx,te=Y.table.core;return an(Y,!0)?te.count({trans:L,query:{index:aa(Y,te.schema),range:Y.range}}).then(function(se){return Math.min(se,Y.limit)}):(B=0,ni(Y,function(){return++B,!1},L,te).then(function(){return B}))}).then(N)},Ra.prototype.sortBy=function(N,A){var L=N.split(".").reverse(),B=L[0],Y=L.length-1;function te(pe,ye){return ye?te(pe[L[ye]],ye-1):pe[B]}var se=this._ctx.dir==="next"?1:-1;function ce(pe,ye){return ua(te(pe,Y),te(ye,Y))*se}return this.toArray(function(pe){return pe.sort(ce)}).then(A)},Ra.prototype.toArray=function(N){var A=this;return this._read(function(L){var B,Y,te,se=A._ctx;return se.dir==="next"&&an(se,!0)&&0<se.limit?(B=se.valueMapper,Y=aa(se,se.table.core.schema),se.table.core.query({trans:L,limit:se.limit,values:!0,query:{index:Y,range:se.range}}).then(function(ce){return ce=ce.result,B?ce.map(B):ce})):(te=[],ni(se,function(ce){return te.push(ce)},L,se.table.core).then(function(){return te}))},N)},Ra.prototype.offset=function(N){var A=this._ctx;return N<=0||(A.offset+=N,an(A)?je(A,function(){var L=N;return function(B,Y){return L===0||(L===1?--L:Y(function(){B.advance(L),L=0}),!1)}}):je(A,function(){var L=N;return function(){return--L<0}})),this},Ra.prototype.limit=function(N){return this._ctx.limit=Math.min(this._ctx.limit,N),je(this._ctx,function(){var A=N;return function(L,B,Y){return--A<=0&&B(Y),0<=A}},!0),this},Ra.prototype.until=function(N,A){return $e(this._ctx,function(L,B,Y){return!N(L.value)||(B(Y),A)}),this},Ra.prototype.first=function(N){return this.limit(1).toArray(function(A){return A[0]}).then(N)},Ra.prototype.last=function(N){return this.reverse().first(N)},Ra.prototype.filter=function(N){var A;return $e(this._ctx,function(L){return N(L.value)}),(A=this._ctx).isMatch=mi(A.isMatch,N),this},Ra.prototype.and=function(N){return this.filter(N)},Ra.prototype.or=function(N){return new this.db.WhereClause(this._ctx.table,N,this)},Ra.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ra.prototype.desc=function(){return this.reverse()},Ra.prototype.eachKey=function(N){var A=this._ctx;return A.keysOnly=!A.isMatch,this.each(function(L,B){N(B.key,B)})},Ra.prototype.eachUniqueKey=function(N){return this._ctx.unique="unique",this.eachKey(N)},Ra.prototype.eachPrimaryKey=function(N){var A=this._ctx;return A.keysOnly=!A.isMatch,this.each(function(L,B){N(B.primaryKey,B)})},Ra.prototype.keys=function(N){var A=this._ctx,L=(A.keysOnly=!A.isMatch,[]);return this.each(function(B,Y){L.push(Y.key)}).then(function(){return L}).then(N)},Ra.prototype.primaryKeys=function(N){var A=this._ctx;if(A.dir==="next"&&an(A,!0)&&0<A.limit)return this._read(function(B){var Y=aa(A,A.table.core.schema);return A.table.core.query({trans:B,values:!1,limit:A.limit,query:{index:Y,range:A.range}})}).then(function(B){return B.result}).then(N);A.keysOnly=!A.isMatch;var L=[];return this.each(function(B,Y){L.push(Y.primaryKey)}).then(function(){return L}).then(N)},Ra.prototype.uniqueKeys=function(N){return this._ctx.unique="unique",this.keys(N)},Ra.prototype.firstKey=function(N){return this.limit(1).keys(function(A){return A[0]}).then(N)},Ra.prototype.lastKey=function(N){return this.reverse().firstKey(N)},Ra.prototype.distinct=function(){var N,A=this._ctx,A=A.index&&A.table.schema.idxByName[A.index];return A&&A.multi&&(N={},$e(this._ctx,function(B){var B=B.primaryKey.toString(),Y=h(N,B);return N[B]=!0,!Y})),this},Ra.prototype.modify=function(N){var A=this,L=this._ctx;return this._write(function(B){function Y(Te,Ge){var qe=Ge.failures;ke+=Te-Ge.numFailures;for(var He=0,et=o(qe);He<et.length;He++){var ht=et[He];_e.push(qe[ht])}}var te=typeof N=="function"?N:function(Te){return Or(Te,N)},se=L.table.core,ge=se.schema.primaryKey,ce=ge.outbound,pe=ge.extractKey,ye=200,ge=A.db._options.modifyChunkSize,_e=(ge&&(ye=typeof ge=="object"?ge[se.name]||ge["*"]||200:ge),[]),ke=0,Ne=[],Me=N===pa;return A.clone().primaryKeys().then(function(Te){function Ge(He){var et=Math.min(ye,Te.length-He),ht=Te.slice(He,He+et);return(Me?Promise.resolve([]):se.getMany({trans:B,keys:ht,cache:"immutable"})).then(function(kt){var Mt=[],bt=[],Yt=ce?[]:null,Ft=Me?ht:[];if(!Me)for(var Nt=0;Nt<et;++Nt){var Zt=kt[Nt],La={value:J(Zt),primKey:Te[He+Nt]};te.call(La,La.value,La)!==!1&&(La.value==null?Ft.push(Te[He+Nt]):ce||ua(pe(Zt),pe(La.value))===0?(bt.push(La.value),ce&&Yt.push(Te[He+Nt])):(Ft.push(Te[He+Nt]),Mt.push(La.value)))}return Promise.resolve(0<Mt.length&&se.mutate({trans:B,type:"add",values:Mt}).then(function(ir){for(var ba in ir.failures)Ft.splice(parseInt(ba),1);Y(Mt.length,ir)})).then(function(){return(0<bt.length||qe&&typeof N=="object")&&se.mutate({trans:B,type:"put",keys:Yt,values:bt,criteria:qe,changeSpec:typeof N!="function"&&N,isAdditionalChunk:0<He}).then(function(ir){return Y(bt.length,ir)})}).then(function(){return(0<Ft.length||qe&&Me)&&se.mutate({trans:B,type:"delete",keys:Ft,criteria:qe,isAdditionalChunk:0<He}).then(function(ir){return fa(L.table,Ft,ir)}).then(function(ir){return Y(Ft.length,ir)})}).then(function(){return Te.length>He+et&&Ge(He+ye)})})}var qe=an(L)&&L.limit===1/0&&(typeof N!="function"||Me)&&{index:L.index,range:L.range};return Ge(0).then(function(){if(0<_e.length)throw new ve("Error modifying one or more objects",_e,ke,Ne);return Te.length})})})},Ra.prototype.delete=function(){var N=this._ctx,A=N.range;return!an(N)||N.table.schema.yProps||!N.isPrimKey&&A.type!==3?this.modify(pa):this._write(function(L){var B=N.table.core.schema.primaryKey,Y=A;return N.table.core.count({trans:L,query:{index:B,range:Y}}).then(function(te){return N.table.core.mutate({trans:L,type:"deleteRange",range:Y}).then(function(pe){var ce=pe.failures,pe=pe.numFailures;if(pe)throw new ve("Could not delete some values",Object.keys(ce).map(function(ye){return ce[ye]}),te-pe);return te-pe})})})};var Eh=Ra;function Ra(){}var pa=function(N,A){return A.value=null};function Ur(N,A){return N<A?-1:N===A?0:1}function B0(N,A){return A<N?-1:N===A?0:1}function Oi(N,A,L){return N=N instanceof Xr?new N.Collection(N):N,N._ctx.error=new(L||TypeError)(A),N}function fs(N){return new N.Collection(N,function(){return $d("")}).limit(0)}function gi(Ne,A,L,B){var Y,te,se,ce,pe,ye,ge,_e=L.length;if(!L.every(function(Te){return typeof Te=="string"}))return Oi(Ne,Er);function ke(Te){Y=Te==="next"?function(qe){return qe.toUpperCase()}:function(qe){return qe.toLowerCase()},te=Te==="next"?function(qe){return qe.toLowerCase()}:function(qe){return qe.toUpperCase()},se=Te==="next"?Ur:B0;var Ge=L.map(function(qe){return{lower:te(qe),upper:Y(qe)}}).sort(function(qe,He){return se(qe.lower,He.lower)});ce=Ge.map(function(qe){return qe.upper}),pe=Ge.map(function(qe){return qe.lower}),ge=(ye=Te)==="next"?"":B}ke("next");var Ne=new Ne.Collection(Ne,function(){return qi(ce[0],pe[_e-1]+B)}),Me=(Ne._ondirectionchange=function(Te){ke(Te)},0);return Ne._addAlgorithm(function(Te,Ge,qe){var He=Te.key;if(typeof He=="string"){var et=te(He);if(A(et,pe,Me))return!0;for(var ht=null,kt=Me;kt<_e;++kt){var Mt=((bt,Yt,Ft,Nt,Zt,La)=>{for(var ir=Math.min(bt.length,Nt.length),ba=-1,Ga=0;Ga<ir;++Ga){var Zr=Yt[Ga];if(Zr!==Nt[Ga])return Zt(bt[Ga],Ft[Ga])<0?bt.substr(0,Ga)+Ft[Ga]+Ft.substr(Ga+1):Zt(bt[Ga],Nt[Ga])<0?bt.substr(0,Ga)+Nt[Ga]+Ft.substr(Ga+1):0<=ba?bt.substr(0,ba)+Yt[ba]+Ft.substr(ba+1):null;Zt(bt[Ga],Zr)<0&&(ba=Ga)}return ir<Nt.length&&La==="next"?bt+Ft.substr(bt.length):ir<bt.length&&La==="prev"?bt.substr(0,Ft.length):ba<0?null:bt.substr(0,ba)+Nt[ba]+Ft.substr(ba+1)})(He,et,ce[kt],pe[kt],se,ye);Mt===null&&ht===null?Me=kt+1:(ht===null||0<se(ht,Mt))&&(ht=Mt)}Ge(ht!==null?function(){Te.continue(ht+ge)}:qe)}return!1}),Ne}function qi(N,A,L,B){return{type:2,lower:N,upper:A,lowerOpen:L,upperOpen:B}}function $d(N){return{type:1,lower:N,upper:N}}Object.defineProperty(Dr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Dr.prototype.between=function(N,A,L,B){L=L!==!1,B=B===!0;try{return 0<this._cmp(N,A)||this._cmp(N,A)===0&&(L||B)&&(!L||!B)?fs(this):new this.Collection(this,function(){return qi(N,A,!L,!B)})}catch{return Oi(this,jr)}},Dr.prototype.equals=function(N){return N==null?Oi(this,jr):new this.Collection(this,function(){return $d(N)})},Dr.prototype.above=function(N){return N==null?Oi(this,jr):new this.Collection(this,function(){return qi(N,void 0,!0)})},Dr.prototype.aboveOrEqual=function(N){return N==null?Oi(this,jr):new this.Collection(this,function(){return qi(N,void 0,!1)})},Dr.prototype.below=function(N){return N==null?Oi(this,jr):new this.Collection(this,function(){return qi(void 0,N,!1,!0)})},Dr.prototype.belowOrEqual=function(N){return N==null?Oi(this,jr):new this.Collection(this,function(){return qi(void 0,N)})},Dr.prototype.startsWith=function(N){return typeof N!="string"?Oi(this,Er):this.between(N,N+Hr,!0,!0)},Dr.prototype.startsWithIgnoreCase=function(N){return N===""?this.startsWith(N):gi(this,function(A,L){return A.indexOf(L[0])===0},[N],Hr)},Dr.prototype.equalsIgnoreCase=function(N){return gi(this,function(A,L){return A===L[0]},[N],"")},Dr.prototype.anyOfIgnoreCase=function(){var N=re.apply(ne,arguments);return N.length===0?fs(this):gi(this,function(A,L){return L.indexOf(A)!==-1},N,"")},Dr.prototype.startsWithAnyOfIgnoreCase=function(){var N=re.apply(ne,arguments);return N.length===0?fs(this):gi(this,function(A,L){return L.some(function(B){return A.indexOf(B)===0})},N,Hr)},Dr.prototype.anyOf=function(){var N,A,L=this,B=re.apply(ne,arguments),Y=this._cmp;try{B.sort(Y)}catch{return Oi(this,jr)}return B.length===0?fs(this):((N=new this.Collection(this,function(){return qi(B[0],B[B.length-1])}))._ondirectionchange=function(te){Y=te==="next"?L._ascending:L._descending,B.sort(Y)},A=0,N._addAlgorithm(function(te,se,ce){for(var pe=te.key;0<Y(pe,B[A]);)if(++A===B.length)return se(ce),!1;return Y(pe,B[A])===0||(se(function(){te.continue(B[A])}),!1)}),N)},Dr.prototype.notEqual=function(N){return this.inAnyRange([[-1/0,N],[N,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Dr.prototype.noneOf=function(){var N=re.apply(ne,arguments);if(N.length===0)return new this.Collection(this);try{N.sort(this._ascending)}catch{return Oi(this,jr)}var A=N.reduce(function(L,B){return L?L.concat([[L[L.length-1][1],B]]):[[-1/0,B]]},null);return A.push([N[N.length-1],this.db._maxKey]),this.inAnyRange(A,{includeLowers:!1,includeUppers:!1})},Dr.prototype.inAnyRange=function(N,qe){var L=this,B=this._cmp,Y=this._ascending,te=this._descending,se=this._min,ce=this._max;if(N.length===0)return fs(this);if(!N.every(function(He){return He[0]!==void 0&&He[1]!==void 0&&Y(He[0],He[1])<=0}))return Oi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",we.InvalidArgument);var pe=!qe||qe.includeLowers!==!1,ye=qe&&qe.includeUppers===!0,ge,_e=Y;function ke(He,et){return _e(He[0],et[0])}try{(ge=N.reduce(function(He,et){for(var ht=0,kt=He.length;ht<kt;++ht){var Mt=He[ht];if(B(et[0],Mt[1])<0&&0<B(et[1],Mt[0])){Mt[0]=se(Mt[0],et[0]),Mt[1]=ce(Mt[1],et[1]);break}}return ht===kt&&He.push(et),He},[])).sort(ke)}catch{return Oi(this,jr)}var Ne=0,Me=ye?function(He){return 0<Y(He,ge[Ne][1])}:function(He){return 0<=Y(He,ge[Ne][1])},Te=pe?function(He){return 0<te(He,ge[Ne][0])}:function(He){return 0<=te(He,ge[Ne][0])},Ge=Me,qe=new this.Collection(this,function(){return qi(ge[0][0],ge[ge.length-1][1],!pe,!ye)});return qe._ondirectionchange=function(He){_e=He==="next"?(Ge=Me,Y):(Ge=Te,te),ge.sort(ke)},qe._addAlgorithm(function(He,et,ht){for(var kt,Mt=He.key;Ge(Mt);)if(++Ne===ge.length)return et(ht),!1;return!Me(kt=Mt)&&!Te(kt)||(L._cmp(Mt,ge[Ne][1])===0||L._cmp(Mt,ge[Ne][0])===0||et(function(){_e===Y?He.continue(ge[Ne][0]):He.continue(ge[Ne][1])}),!1)}),qe},Dr.prototype.startsWithAnyOf=function(){var N=re.apply(ne,arguments);return N.every(function(A){return typeof A=="string"})?N.length===0?fs(this):this.inAnyRange(N.map(function(A){return[A,A+Hr]})):Oi(this,"startsWithAnyOf() only works with strings")};var Xr=Dr;function Dr(){}function An(N){return Ae(function(A){return xa(A),N(A.target.error),!1})}function xa(N){N.stopPropagation&&N.stopPropagation(),N.preventDefault&&N.preventDefault()}var Pl="storagemutated",Ma="x-storagemutated-1",xr=Ms(null,Pl),Dh=(ii.prototype._lock=function(){return D(!xt.global),++this._reculock,this._reculock!==1||xt.global||(xt.lockOwnerFor=this),this},ii.prototype._unlock=function(){if(D(!xt.global),--this._reculock==0)for(xt.global||(xt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var N=this._blockedFuncs.shift();try{Nr(N[1],N[0])}catch{}}return this},ii.prototype._locked=function(){return this._reculock&&xt.lockOwnerFor!==this},ii.prototype.create=function(N){var A=this;if(this.mode){var L=this.db.idbdb,B=this.db._state.dbOpenError;if(D(!this.idbtrans),!N&&!L)switch(B&&B.name){case"DatabaseClosedError":throw new we.DatabaseClosed(B);case"MissingAPIError":throw new we.MissingAPI(B.message,B);default:throw new we.OpenFailed(B)}if(!this.active)throw new we.TransactionInactive;D(this._completion._state===null),(N=this.idbtrans=N||(this.db.core||L).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ae(function(Y){xa(Y),A._reject(N.error)}),N.onabort=Ae(function(Y){xa(Y),A.active&&A._reject(new we.Abort(N.error)),A.active=!1,A.on("abort").fire(Y)}),N.oncomplete=Ae(function(){A.active=!1,A._resolve(),"mutatedParts"in N&&xr.storagemutated.fire(N.mutatedParts)})}return this},ii.prototype._promise=function(N,A,L){var B,Y=this;return N==="readwrite"&&this.mode!=="readwrite"?Ot(new we.ReadOnly("Transaction is readonly")):this.active?this._locked()?new It(function(te,se){Y._blockedFuncs.push([function(){Y._promise(N,A,L).then(te,se)},xt])}):L?Et(function(){var te=new It(function(se,ce){Y._lock();var pe=A(se,ce,Y);pe&&pe.then&&pe.then(se,ce)});return te.finally(function(){return Y._unlock()}),te._lib=!0,te}):((B=new It(function(te,se){var ce=A(te,se,Y);ce&&ce.then&&ce.then(te,se)}))._lib=!0,B):Ot(new we.TransactionInactive)},ii.prototype._root=function(){return this.parent?this.parent._root():this},ii.prototype.waitFor=function(N){var A,L=this._root(),B=It.resolve(N),Y=(L._waitingFor?L._waitingFor=L._waitingFor.then(function(){return B}):(L._waitingFor=B,L._waitingQueue=[],A=L.idbtrans.objectStore(L.storeNames[0]),(function te(){for(++L._spinCount;L._waitingQueue.length;)L._waitingQueue.shift()();L._waitingFor&&(A.get(-1/0).onsuccess=te)})()),L._waitingFor);return new It(function(te,se){B.then(function(ce){return L._waitingQueue.push(Ae(te.bind(null,ce)))},function(ce){return L._waitingQueue.push(Ae(se.bind(null,ce)))}).finally(function(){L._waitingFor===Y&&(L._waitingFor=null)})})},ii.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new we.Abort))},ii.prototype.table=function(N){var A=this._memoizedTables||(this._memoizedTables={});if(h(A,N))return A[N];var L=this.schema[N];if(L)return(L=new this.db.Table(N,L,this)).core=this.db.core.table(N),A[N]=L;throw new we.NotFound("Table "+N+" not part of transaction")},ii);function ii(){}function ps(N,A,L,B,Y,te,se,ce){return{name:N,keyPath:A,unique:L,multi:B,auto:Y,compound:te,src:(L&&!se?"&":"")+(B?"*":"")+(Y?"++":"")+Es(A),type:ce}}function Es(N){return typeof N=="string"?N:N?"["+[].join.call(N,"+")+"]":""}function Bl(N,A,L){return{name:N,primKey:A,indexes:L,mappedClass:null,idxByName:(B=function(Y){return[Y.name,Y]},L.reduce(function(Y,te,se){return te=B(te,se),te&&(Y[te[0]]=te[1]),Y},{}))};var B}var Ds=function(N){try{return N.only([[]]),Ds=function(){return[[]]},[[]]}catch{return Ds=function(){return Hr},Hr}};function Is(N){return N==null?function(){}:typeof N=="string"?(A=N).split(".").length===1?function(L){return L[A]}:function(L){return O(L,A)}:function(L){return O(L,N)};var A}function Qs(N){return[].slice.call(N)}var Ih=0;function dn(N){return N==null?":id":typeof N=="string"?N:"[".concat(N.join("+"),"]")}function xs(N,A,pe){function B(Me){if(Me.type===3)return null;if(Me.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var _e=Me.lower,ke=Me.upper,Ne=Me.lowerOpen,Me=Me.upperOpen;return _e===void 0?ke===void 0?null:A.upperBound(ke,!!Me):ke===void 0?A.lowerBound(_e,!!Ne):A.bound(_e,ke,!!Ne,!!Me)}function Y(ge){var _e,ke=ge.name;return{name:ke,schema:ge,mutate:function(Ne){var Me=Ne.trans,Te=Ne.type,Ge=Ne.keys,qe=Ne.values,He=Ne.range;return new Promise(function(et,ht){et=Ae(et);var kt=Me.objectStore(ke),Mt=kt.keyPath==null,bt=Te==="put"||Te==="add";if(!bt&&Te!=="delete"&&Te!=="deleteRange")throw new Error("Invalid operation type: "+Te);var Yt,Ft=(Ge||qe||{length:1}).length;if(Ge&&qe&&Ge.length!==qe.length)throw new Error("Given keys array must have same length as given values array.");if(Ft===0)return et({numFailures:0,failures:{},results:[],lastResult:void 0});function Nt(Pr){++ir,xa(Pr)}var Zt=[],La=[],ir=0;if(Te==="deleteRange"){if(He.type===4)return et({numFailures:ir,failures:La,results:[],lastResult:void 0});He.type===3?Zt.push(Yt=kt.clear()):Zt.push(Yt=kt.delete(B(He)))}else{var Mt=bt?Mt?[qe,Ge]:[qe,null]:[Ge,null],ba=Mt[0],Ga=Mt[1];if(bt)for(var Zr=0;Zr<Ft;++Zr)Zt.push(Yt=Ga&&Ga[Zr]!==void 0?kt[Te](ba[Zr],Ga[Zr]):kt[Te](ba[Zr])),Yt.onerror=Nt;else for(Zr=0;Zr<Ft;++Zr)Zt.push(Yt=kt[Te](ba[Zr])),Yt.onerror=Nt}function Ki(Pr){Pr=Pr.target.result,Zt.forEach(function(Ul,au){return Ul.error!=null&&(La[au]=Ul.error)}),et({numFailures:ir,failures:La,results:Te==="delete"?Ge:Zt.map(function(Ul){return Ul.result}),lastResult:Pr})}Yt.onerror=function(Pr){Nt(Pr),Ki(Pr)},Yt.onsuccess=Ki})},getMany:function(Ne){var Me=Ne.trans,Te=Ne.keys;return new Promise(function(Ge,qe){Ge=Ae(Ge);for(var He,et=Me.objectStore(ke),ht=Te.length,kt=new Array(ht),Mt=0,bt=0,Yt=function(Zt){Zt=Zt.target,kt[Zt._pos]=Zt.result,++bt===Mt&&Ge(kt)},Ft=An(qe),Nt=0;Nt<ht;++Nt)Te[Nt]!=null&&((He=et.get(Te[Nt]))._pos=Nt,He.onsuccess=Yt,He.onerror=Ft,++Mt);Mt===0&&Ge(kt)})},get:function(Ne){var Me=Ne.trans,Te=Ne.key;return new Promise(function(Ge,qe){Ge=Ae(Ge);var He=Me.objectStore(ke).get(Te);He.onsuccess=function(et){return Ge(et.target.result)},He.onerror=An(qe)})},query:(_e=ce,function(Ne){return new Promise(function(Me,Te){Me=Ae(Me);var Ge,qe,He,bt=Ne.trans,et=Ne.values,ht=Ne.limit,Mt=Ne.query,kt=ht===1/0?void 0:ht,Yt=Mt.index,Mt=Mt.range,bt=bt.objectStore(ke),bt=Yt.isPrimaryKey?bt:bt.index(Yt.name),Yt=B(Mt);if(ht===0)return Me({result:[]});_e?((Mt=et?bt.getAll(Yt,kt):bt.getAllKeys(Yt,kt)).onsuccess=function(Ft){return Me({result:Ft.target.result})},Mt.onerror=An(Te)):(Ge=0,qe=!et&&"openKeyCursor"in bt?bt.openKeyCursor(Yt):bt.openCursor(Yt),He=[],qe.onsuccess=function(Ft){var Nt=qe.result;return!Nt||(He.push(et?Nt.value:Nt.primaryKey),++Ge===ht)?Me({result:He}):void Nt.continue()},qe.onerror=An(Te))})}),openCursor:function(Ne){var Me=Ne.trans,Te=Ne.values,Ge=Ne.query,qe=Ne.reverse,He=Ne.unique;return new Promise(function(et,ht){et=Ae(et);var bt=Ge.index,kt=Ge.range,Mt=Me.objectStore(ke),Mt=bt.isPrimaryKey?Mt:Mt.index(bt.name),bt=qe?He?"prevunique":"prev":He?"nextunique":"next",Yt=!Te&&"openKeyCursor"in Mt?Mt.openKeyCursor(B(kt),bt):Mt.openCursor(B(kt),bt);Yt.onerror=An(ht),Yt.onsuccess=Ae(function(Ft){var Nt,Zt,La,ir,ba=Yt.result;ba?(ba.___id=++Ih,ba.done=!1,Nt=ba.continue.bind(ba),Zt=(Zt=ba.continuePrimaryKey)&&Zt.bind(ba),La=ba.advance.bind(ba),ir=function(){throw new Error("Cursor not stopped")},ba.trans=Me,ba.stop=ba.continue=ba.continuePrimaryKey=ba.advance=function(){throw new Error("Cursor not started")},ba.fail=Ae(ht),ba.next=function(){var Ga=this,Zr=1;return this.start(function(){return Zr--?Ga.continue():Ga.stop()}).then(function(){return Ga})},ba.start=function(Ga){function Zr(){if(Yt.result)try{Ga()}catch(Pr){ba.fail(Pr)}else ba.done=!0,ba.start=function(){throw new Error("Cursor behind last entry")},ba.stop()}var Ki=new Promise(function(Pr,Ul){Pr=Ae(Pr),Yt.onerror=An(Ul),ba.fail=Ul,ba.stop=function(au){ba.stop=ba.continue=ba.continuePrimaryKey=ba.advance=ir,Pr(au)}});return Yt.onsuccess=Ae(function(Pr){Yt.onsuccess=Zr,Zr()}),ba.continue=Nt,ba.continuePrimaryKey=Zt,ba.advance=La,Zr(),Ki},et(ba)):et(null)},ht)})},count:function(Ne){var Me=Ne.query,Te=Ne.trans,Ge=Me.index,qe=Me.range;return new Promise(function(He,et){var ht=Te.objectStore(ke),ht=Ge.isPrimaryKey?ht:ht.index(Ge.name),kt=B(qe),kt=kt?ht.count(kt):ht.count();kt.onsuccess=Ae(function(Mt){return He(Mt.target.result)}),kt.onerror=An(et)})}}}te=pe,se=Qs((pe=N).objectStoreNames);var te,pe={schema:{name:pe.name,tables:se.map(function(ge){return te.objectStore(ge)}).map(function(ge){var _e=ge.keyPath,ke=ge.autoIncrement,Me=l(_e),Ne={},Me={name:ge.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_e==null,compound:Me,keyPath:_e,autoIncrement:ke,unique:!0,extractKey:Is(_e)},indexes:Qs(ge.indexNames).map(function(Te){return ge.index(Te)}).map(function(He){var et=He.name,Ge=He.unique,qe=He.multiEntry,He=He.keyPath,et={name:et,compound:l(He),keyPath:He,unique:Ge,multiEntry:qe,extractKey:Is(He)};return Ne[dn(He)]=et}),getIndexByKeyPath:function(Te){return Ne[dn(Te)]}};return Ne[":id"]=Me.primaryKey,_e!=null&&(Ne[dn(_e)]=Me.primaryKey),Me})},hasGetAll:0<se.length&&"getAll"in te.objectStore(se[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},se=pe.schema,ce=pe.hasGetAll,pe=se.tables.map(Y),ye={};return pe.forEach(function(ge){return ye[ge.name]=ge}),{stack:"dbcore",transaction:N.transaction.bind(N),table:function(ge){if(ye[ge])return ye[ge];throw new Error("Table '".concat(ge,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Ds(A),schema:se}}function Vn(N,A,L,B){return L=L.IDBKeyRange,A=xs(A,L,B),{dbcore:N.dbcore.reduce(function(Y,te){return te=te.create,r(r({},Y),te(Y))},A)}}function Js(N,A){var L=A.db,L=Vn(N._middlewares,L,N._deps,A);N.core=L.dbcore,N.tables.forEach(function(B){var Y=B.name;N.core.schema.tables.some(function(te){return te.name===Y})&&(B.core=N.core.table(Y),N[Y]instanceof N.Table)&&(N[Y].core=B.core)})}function Bc(N,A,L,B){L.forEach(function(Y){var te=B[Y];A.forEach(function(se){var ce=(function pe(ye,ge){return w(ye,ge)||(ye=d(ye))&&pe(ye,ge)})(se,Y);(!ce||"value"in ce&&ce.value===void 0)&&(se===N.Transaction.prototype||se instanceof N.Transaction?g(se,Y,{get:function(){return this.table(Y)},set:function(pe){p(this,Y,{value:pe,writable:!0,configurable:!0,enumerable:!0})}}):se[Y]=new N.Table(Y,te))})})}function zl(N,A){A.forEach(function(L){for(var B in L)L[B]instanceof N.Table&&delete L[B]})}function Rh(N,A){return N._cfg.version-A._cfg.version}function zc(N,A,L,B){var Y=N._dbSchema,te=(L.objectStoreNames.contains("$meta")&&!Y.$meta&&(Y.$meta=Bl("$meta",Ua("")[0],[]),N._storeNames.push("$meta")),N._createTransaction("readwrite",N._storeNames,Y)),se=(te.create(L),te._completion.catch(B),te._reject.bind(te)),ce=xt.transless||xt;Et(function(){if(xt.trans=te,xt.transless=ce,A!==0)return Js(N,L),ye=A,((pe=te).storeNames.includes("$meta")?pe.table("$meta").get("version").then(function(ge){return ge??ye}):It.resolve(ye)).then(function(Ge){var _e=N,ke=Ge,Ne=te,Me=L,Te=[],Ge=_e._versions,qe=_e._dbSchema=Fl(0,_e.idbdb,Me);return(Ge=Ge.filter(function(He){return He._cfg.version>=ke})).length===0?It.resolve():(Ge.forEach(function(He){Te.push(function(){var et,ht,kt,Mt=qe,bt=He._cfg.dbschema,Yt=(at(_e,Mt,Me),at(_e,bt,Me),qe=_e._dbSchema=bt,yr(Mt,bt)),Ft=(Yt.add.forEach(function(Nt){qd(Me,Nt[0],Nt[1].primKey,Nt[1].indexes)}),Yt.change.forEach(function(Nt){if(Nt.recreate)throw new we.Upgrade("Not yet support for changing primary key");var Zt=Me.objectStore(Nt.name);Nt.add.forEach(function(La){return ms(Zt,La)}),Nt.change.forEach(function(La){Zt.deleteIndex(La.name),ms(Zt,La)}),Nt.del.forEach(function(La){return Zt.deleteIndex(La)})}),He._cfg.contentUpgrade);if(Ft&&He._cfg.version>ke)return Js(_e,Me),Ne._memoizedTables={},et=V(bt),Yt.del.forEach(function(Nt){et[Nt]=Mt[Nt]}),zl(_e,[_e.Transaction.prototype]),Bc(_e,[_e.Transaction.prototype],o(et),et),Ne.schema=et,(ht=Z(Ft))&&At(),bt=It.follow(function(){var Nt;(kt=Ft(Ne))&&ht&&(Nt=Vt.bind(null,null),kt.then(Nt,Nt))}),kt&&typeof kt.then=="function"?It.resolve(kt):bt.then(function(){return kt})}),Te.push(function(et){var ht,kt,Mt=He._cfg.dbschema;ht=Mt,kt=et,[].slice.call(kt.db.objectStoreNames).forEach(function(bt){return ht[bt]==null&&kt.db.deleteObjectStore(bt)}),zl(_e,[_e.Transaction.prototype]),Bc(_e,[_e.Transaction.prototype],_e._storeNames,_e._dbSchema),Ne.schema=_e._dbSchema}),Te.push(function(et){_e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(_e.idbdb.version/10)===He._cfg.version?(_e.idbdb.deleteObjectStore("$meta"),delete _e._dbSchema.$meta,_e._storeNames=_e._storeNames.filter(function(ht){return ht!=="$meta"})):et.objectStore("$meta").put(He._cfg.version,"version"))})}),(function He(){return Te.length?It.resolve(Te.shift()(Ne.idbtrans)).then(He):It.resolve()})().then(function(){Fc(qe,Me)}))}).catch(se);var pe,ye;o(Y).forEach(function(ge){qd(L,ge,Y[ge].primKey,Y[ge].indexes)}),Js(N,L),It.follow(function(){return N.on.populate.fire(te)}).catch(se)})}function Yd(N,A){Fc(N._dbSchema,A),A.db.version%10!=0||A.objectStoreNames.contains("$meta")||A.db.createObjectStore("$meta").add(Math.ceil(A.db.version/10-1),"version");var L=Fl(0,N.idbdb,A);at(N,N._dbSchema,A);for(var B=0,Y=yr(L,N._dbSchema).change;B<Y.length;B++){var te=(se=>{if(se.change.length||se.recreate)return console.warn("Unable to patch indexes of table ".concat(se.name," because it has changes on the type of index or primary key.")),{value:void 0};var ce=A.objectStore(se.name);se.add.forEach(function(pe){Ye&&console.debug("Dexie upgrade patch: Creating missing index ".concat(se.name,".").concat(pe.src)),ms(ce,pe)})})(Y[B]);if(typeof te=="object")return te.value}}function yr(N,A){var L,B={del:[],add:[],change:[]};for(L in N)A[L]||B.del.push(L);for(L in A){var Y=N[L],te=A[L];if(Y){var se={name:L,def:te,recreate:!1,del:[],add:[],change:[]};if(""+(Y.primKey.keyPath||"")!=""+(te.primKey.keyPath||"")||Y.primKey.auto!==te.primKey.auto)se.recreate=!0,B.change.push(se);else{var ce=Y.idxByName,pe=te.idxByName,ye=void 0;for(ye in ce)pe[ye]||se.del.push(ye);for(ye in pe){var ge=ce[ye],_e=pe[ye];ge?ge.src!==_e.src&&se.change.push(_e):se.add.push(_e)}(0<se.del.length||0<se.add.length||0<se.change.length)&&B.change.push(se)}}else B.add.push([L,te])}return B}function qd(N,A,L,B){var Y=N.db.createObjectStore(A,L.keyPath?{keyPath:L.keyPath,autoIncrement:L.auto}:{autoIncrement:L.auto});B.forEach(function(te){return ms(Y,te)})}function Fc(N,A){o(N).forEach(function(L){A.db.objectStoreNames.contains(L)||(Ye&&console.debug("Dexie: Creating missing table",L),qd(A,L,N[L].primKey,N[L].indexes))})}function ms(N,A){N.createIndex(A.name,A.keyPath,{unique:A.unique,multiEntry:A.multi})}function Fl(N,A,L){var B={};return k(A.objectStoreNames,0).forEach(function(Y){for(var te=L.objectStore(Y),se=ps(Es(ye=te.keyPath),ye||"",!0,!1,!!te.autoIncrement,ye&&typeof ye!="string",!0),ce=[],pe=0;pe<te.indexNames.length;++pe){var ge=te.index(te.indexNames[pe]),ye=ge.keyPath,ge=ps(ge.name,ye,!!ge.unique,!!ge.multiEntry,!1,ye&&typeof ye!="string",!1);ce.push(ge)}B[Y]=Bl(Y,se,ce)}),B}function at(N,A,L){for(var B=L.db.objectStoreNames,Y=0;Y<B.length;++Y){var te=B[Y],se=L.objectStore(te);N._hasGetAll="getAll"in se;for(var ce=0;ce<se.indexNames.length;++ce){var pe,ye=se.indexNames[ce],ge=se.index(ye).keyPath,ge=typeof ge=="string"?ge:"["+k(ge).join("+")+"]";A[te]&&(pe=A[te].idxByName[ge])&&(pe.name=ye,delete A[te].idxByName[ge],A[te].idxByName[ye]=pe)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(N._hasGetAll=!1)}function Ua(N){return N.split(",").map(function(A,L){var Y=A.split(":"),B=(B=Y[1])==null?void 0:B.trim(),Y=(A=Y[0].trim()).replace(/([&*]|\+\+)/g,""),te=/^\[/.test(Y)?Y.match(/^\[(.*)\]$/)[1].split("+"):Y;return ps(Y,te||null,/\&/.test(A),/\*/.test(A),/\+\+/.test(A),l(te),L===0,B)})}eo.prototype._createTableSchema=Bl,eo.prototype._parseIndexSyntax=Ua,eo.prototype._parseStoresSpec=function(N,A){var L=this;o(N).forEach(function(B){if(N[B]!==null){var Y=L._parseIndexSyntax(N[B]),te=Y.shift();if(!te)throw new we.Schema("Invalid schema for table "+B+": "+N[B]);if(te.unique=!0,te.multi)throw new we.Schema("Primary key cannot be multiEntry*");Y.forEach(function(se){if(se.auto)throw new we.Schema("Only primary key can be marked as autoIncrement (++)");if(!se.keyPath)throw new we.Schema("Index must have a name and cannot be an empty string")}),te=L._createTableSchema(B,te,Y),A[B]=te}})},eo.prototype.stores=function(L){var A=this.db,L=(this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,L):L,A._versions),B={},Y={};return L.forEach(function(te){c(B,te._cfg.storesSource),Y=te._cfg.dbschema={},te._parseStoresSpec(B,Y)}),A._dbSchema=Y,zl(A,[A._allTables,A,A.Transaction.prototype]),Bc(A,[A._allTables,A,A.Transaction.prototype,this._cfg.tables],o(Y),Y),A._storeNames=o(Y),this},eo.prototype.upgrade=function(N){return this._cfg.contentUpgrade=Ue(this._cfg.contentUpgrade||be,N),this};var Hn=eo;function eo(){}function Xd(N,A){var L=N._dbNamesDB;return L||(L=N._dbNamesDB=new Rs(ri,{addons:[],indexedDB:N,IDBKeyRange:A})).version(1).stores({dbnames:"name"}),L.table("dbnames")}function Zd(N){return N&&typeof N.databases=="function"}function Lh(N){return Et(function(){return xt.letThrough=!0,N()})}function Oh(N){return!("from"in N)}var Tn=function(N,A){var L;if(!this)return L=new Tn,N&&"d"in N&&c(L,N),L;c(this,arguments.length?{d:1,from:N,to:1<arguments.length?A:N}:{d:0})};function rn(N,A,L){var B=ua(A,L);if(!isNaN(B)){if(0<B)throw RangeError();if(Oh(N))return c(N,{from:A,to:L,d:1});var B=N.l,Y=N.r;if(ua(L,N.from)<0)return B?rn(B,A,L):N.l={from:A,to:L,d:1,l:null,r:null},Mo(N);if(0<ua(A,N.to))return Y?rn(Y,A,L):N.r={from:A,to:L,d:1,l:null,r:null},Mo(N);ua(A,N.from)<0&&(N.from=A,N.l=null,N.d=Y?Y.d+1:1),0<ua(L,N.to)&&(N.to=L,N.r=null,N.d=N.l?N.l.d+1:1),A=!N.r,B&&!N.l&&to(N,B),Y&&A&&to(N,Y)}}function to(N,A){Oh(A)||(function L(B,Y){var te=Y.from,se=Y.l,ce=Y.r;rn(B,te,Y.to),se&&L(B,se),ce&&L(B,ce)})(N,A)}function nn(N,A){var L=ll(A),B=L.next();if(!B.done)for(var Y=B.value,te=ll(N),se=te.next(Y.from),ce=se.value;!B.done&&!se.done;){if(ua(ce.from,Y.to)<=0&&0<=ua(ce.to,Y.from))return!0;ua(Y.from,ce.from)<0?Y=(B=L.next(ce.from)).value:ce=(se=te.next(Y.from)).value}return!1}function ll(N){var A=Oh(N)?null:{s:0,n:N};return{next:function(L){for(var B=0<arguments.length;A;)switch(A.s){case 0:if(A.s=1,B)for(;A.n.l&&ua(L,A.n.from)<0;)A={up:A,n:A.n.l,s:1};else for(;A.n.l;)A={up:A,n:A.n.l,s:1};case 1:if(A.s=2,!B||ua(L,A.n.to)<=0)return{value:A.n,done:!1};case 2:if(A.n.r){A.s=3,A={up:A,n:A.n.r,s:0};continue}case 3:A=A.up}return{done:!0}}}}function Mo(N){var A,L,B,Y=(((Y=N.r)==null?void 0:Y.d)||0)-(((Y=N.l)==null?void 0:Y.d)||0),Y=1<Y?"r":Y<-1?"l":"";Y&&(A=Y=="r"?"l":"r",L=r({},N),B=N[Y],N.from=B.from,N.to=B.to,N[Y]=B[Y],L[Y]=B[A],(N[A]=L).d=kr(L)),N.d=kr(N)}function kr(L){var A=L.r,L=L.l;return(A?L?Math.max(A.d,L.d):A.d:L?L.d:0)+1}function ma(N,A){return o(A).forEach(function(L){N[L]?to(N[L],A[L]):N[L]=(function B(Y){var te,se,ce={};for(te in Y)h(Y,te)&&(se=Y[te],ce[te]=!se||typeof se!="object"||$.has(se.constructor)?se:B(se));return ce})(A[L])}),N}function Ph(N,A){return N.all||A.all||Object.keys(N).some(function(L){return A[L]&&nn(A[L],N[L])})}f(Tn.prototype,((zt={add:function(N){return to(this,N),this},addKey:function(N){return rn(this,N,N),this},addKeys:function(N){var A=this;return N.forEach(function(L){return rn(A,L,L)}),this},hasKey:function(N){var A=ll(this).next(N).value;return A&&ua(A.from,N)<=0&&0<=ua(A.to,N)}})[W]=function(){return ll(this)},zt));var wr={},ao={},Eo=!1;function Kd(N){ma(ao,N),Eo||(Eo=!0,setTimeout(function(){Eo=!1,Xi(ao,!(ao={}))},0))}function Xi(N,A){A===void 0&&(A=!1);var L=new Set;if(N.all)for(var B=0,Y=Object.values(wr);B<Y.length;B++)Qd(ce=Y[B],N,L,A);else for(var te in N){var se,ce,te=/^idb\:\/\/(.*)\/(.*)\//.exec(te);te&&(se=te[1],te=te[2],ce=wr["idb://".concat(se,"/").concat(te)])&&Qd(ce,N,L,A)}L.forEach(function(pe){return pe()})}function Qd(N,A,L,B){for(var Y=[],te=0,se=Object.entries(N.queries.query);te<se.length;te++){for(var ce=se[te],pe=ce[0],ye=[],ge=0,_e=ce[1];ge<_e.length;ge++){var ke=_e[ge];Ph(A,ke.obsSet)?ke.subscribers.forEach(function(Ge){return L.add(Ge)}):B&&ye.push(ke)}B&&Y.push([pe,ye])}if(B)for(var Ne=0,Me=Y;Ne<Me.length;Ne++){var Te=Me[Ne],pe=Te[0],ye=Te[1];N.queries.query[pe]=ye}}function z0(N){var A=N._state,L=N._deps.indexedDB;if(A.isBeingOpened||N.idbdb)return A.dbReadyPromise.then(function(){return A.dbOpenError?Ot(A.dbOpenError):N});A.isBeingOpened=!0,A.dbOpenError=null,A.openComplete=!1;var B=A.openCanceller,Y=Math.round(10*N.verno),te=!1;function se(){if(A.openCanceller!==B)throw new we.DatabaseClosed("db.open() was cancelled")}function ce(){return new It(function(ke,Ne){if(se(),!L)throw new we.MissingAPI;var Me=N.name,Te=A.autoSchema||!Y?L.open(Me):L.open(Me,Y);if(!Te)throw new we.MissingAPI;Te.onerror=An(Ne),Te.onblocked=Ae(N._fireOnBlocked),Te.onupgradeneeded=Ae(function(Ge){var qe;ge=Te.transaction,A.autoSchema&&!N._options.allowEmptyDB?(Te.onerror=xa,ge.abort(),Te.result.close(),(qe=L.deleteDatabase(Me)).onsuccess=qe.onerror=Ae(function(){Ne(new we.NoSuchDatabase("Database ".concat(Me," doesnt exist")))})):(ge.onerror=An(Ne),qe=Ge.oldVersion>Math.pow(2,62)?0:Ge.oldVersion,_e=qe<1,N.idbdb=Te.result,te&&Yd(N,ge),zc(N,qe/10,ge,Ne))},Ne),Te.onsuccess=Ae(function(){ge=null;var Ge,qe,He,et,ht,kt,Mt=N.idbdb=Te.result,bt=k(Mt.objectStoreNames);if(0<bt.length)try{var Yt=Mt.transaction((ht=bt).length===1?ht[0]:ht,"readonly");if(A.autoSchema)kt=Mt,et=Yt,(He=N).verno=kt.version/10,et=He._dbSchema=Fl(0,kt,et),He._storeNames=k(kt.objectStoreNames,0),Bc(He,[He._allTables],o(et),et);else if(at(N,N._dbSchema,Yt),qe=Yt,((qe=yr(Fl(0,(Ge=N).idbdb,qe),Ge._dbSchema)).add.length||qe.change.some(function(Ft){return Ft.add.length||Ft.change.length}))&&!te)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Mt.close(),Y=Mt.version+1,te=!0,ke(ce());Js(N,Yt)}catch{}dt.push(N),Mt.onversionchange=Ae(function(Ft){A.vcFired=!0,N.on("versionchange").fire(Ft)}),Mt.onclose=Ae(function(){N.close({disableAutoOpen:!1})}),_e&&(bt=N._deps,ht=Me,Zd(kt=bt.indexedDB)||ht===ri||Xd(kt,bt.IDBKeyRange).put({name:ht}).catch(be)),ke()},Ne)}).catch(function(ke){switch(ke?.name){case"UnknownError":if(0<A.PR1398_maxLoop)return A.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),ce();break;case"VersionError":if(0<Y)return Y=0,ce()}return It.reject(ke)})}var pe,ye=A.dbReadyResolve,ge=null,_e=!1;return It.race([B,(typeof navigator>"u"?It.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ke){function Ne(){return indexedDB.databases().finally(ke)}pe=setInterval(Ne,100),Ne()}).finally(function(){return clearInterval(pe)}):Promise.resolve()).then(ce)]).then(function(){return se(),A.onReadyBeingFired=[],It.resolve(Lh(function(){return N.on.ready.fire(N.vip)})).then(function ke(){var Ne;if(0<A.onReadyBeingFired.length)return Ne=A.onReadyBeingFired.reduce(Ue,be),A.onReadyBeingFired=[],It.resolve(Lh(function(){return Ne(N.vip)})).then(ke)})}).finally(function(){A.openCanceller===B&&(A.onReadyBeingFired=null,A.isBeingOpened=!1)}).catch(function(ke){A.dbOpenError=ke;try{ge&&ge.abort()}catch{}return B===A.openCanceller&&N._close(),Ot(ke)}).finally(function(){A.openComplete=!0,ye()}).then(function(){var ke;return _e&&(ke={},N.tables.forEach(function(Ne){Ne.schema.indexes.forEach(function(Me){Me.name&&(ke["idb://".concat(N.name,"/").concat(Ne.name,"/").concat(Me.name)]=new Tn(-1/0,[[[]]]))}),ke["idb://".concat(N.name,"/").concat(Ne.name,"/")]=ke["idb://".concat(N.name,"/").concat(Ne.name,"/:dels")]=new Tn(-1/0,[[[]]])}),xr(Pl).fire(ke),Xi(ke,!0)),N})}function cl(N){function A(te){return N.next(te)}var L=Y(A),B=Y(function(te){return N.throw(te)});function Y(te){return function(ce){var ce=te(ce),pe=ce.value;return ce.done?pe:pe&&typeof pe.then=="function"?pe.then(L,B):l(pe)?Promise.all(pe).then(L,B):L(pe)}}return Y(A)()}function ro(N,A,L){for(var B=l(N)?N.slice():[N],Y=0;Y<L;++Y)B.push(A);return B}var F0={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(N){return r(r({},N),{table:function(B){var L=N.table(B),B=L.schema,Y={},te=[];function se(ke,Ne,Me){var He=dn(ke),Te=Y[He]=Y[He]||[],Ge=ke==null?0:typeof ke=="string"?1:ke.length,qe=0<Ne,He=r(r({},Me),{name:qe?"".concat(He,"(virtual-from:").concat(Me.name,")"):Me.name,lowLevelIndex:Me,isVirtual:qe,keyTail:Ne,keyLength:Ge,extractKey:Is(ke),unique:!qe&&Me.unique});return Te.push(He),He.isPrimaryKey||te.push(He),1<Ge&&se(Ge===2?ke[0]:ke.slice(0,Ge-1),Ne+1,Me),Te.sort(function(et,ht){return et.keyTail-ht.keyTail}),He}var ce=se(B.primaryKey.keyPath,0,B.primaryKey);Y[":id"]=[ce];for(var pe=0,ye=B.indexes;pe<ye.length;pe++){var ge=ye[pe];se(ge.keyPath,0,ge)}function _e(ke){var Ne,Me=ke.query.index;return Me.isVirtual?r(r({},ke),{query:{index:Me.lowLevelIndex,range:(Ne=ke.query.range,Me=Me.keyTail,{type:Ne.type===1?2:Ne.type,lower:ro(Ne.lower,Ne.lowerOpen?N.MAX_KEY:N.MIN_KEY,Me),lowerOpen:!0,upper:ro(Ne.upper,Ne.upperOpen?N.MIN_KEY:N.MAX_KEY,Me),upperOpen:!0})}}):ke}return r(r({},L),{schema:r(r({},B),{primaryKey:ce,indexes:te,getIndexByKeyPath:function(ke){return(ke=Y[dn(ke)])&&ke[0]}}),count:function(ke){return L.count(_e(ke))},query:function(ke){return L.query(_e(ke))},openCursor:function(ke){var Ne=ke.query.index,Me=Ne.keyTail,Te=Ne.keyLength;return Ne.isVirtual?L.openCursor(_e(ke)).then(function(qe){return qe&&Ge(qe)}):L.openCursor(ke);function Ge(qe){return Object.create(qe,{continue:{value:function(He){He!=null?qe.continue(ro(He,ke.reverse?N.MAX_KEY:N.MIN_KEY,Me)):ke.unique?qe.continue(qe.key.slice(0,Te).concat(ke.reverse?N.MIN_KEY:N.MAX_KEY,Me)):qe.continue()}},continuePrimaryKey:{value:function(He,et){qe.continuePrimaryKey(ro(He,N.MAX_KEY,Me),et)}},primaryKey:{get:function(){return qe.primaryKey}},key:{get:function(){var He=qe.key;return Te===1?He[0]:He.slice(0,Te)}},value:{get:function(){return qe.value}}})}}})}})}};function Jd(N,A,L,B){return L=L||{},B=B||"",o(N).forEach(function(Y){var te,se,ce;h(A,Y)?(te=N[Y],se=A[Y],typeof te=="object"&&typeof se=="object"&&te&&se?(ce=F(te))!==F(se)?L[B+Y]=A[Y]:ce==="Object"?Jd(te,se,L,B+Y+"."):te!==se&&(L[B+Y]=A[Y]):te!==se&&(L[B+Y]=A[Y])):L[B+Y]=void 0}),o(A).forEach(function(Y){h(N,Y)||(L[B+Y]=A[Y])}),L}function no(N,A){return A.type==="delete"?A.keys:A.keys||A.values.map(N.extractKey)}var eu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(N){return r(r({},N),{table:function(A){var L=N.table(A),B=L.schema.primaryKey;return r(r({},L),{mutate:function(Y){var te=xt.trans,se=te.table(A).hook,ce=se.deleting,pe=se.creating,ye=se.updating;switch(Y.type){case"add":if(pe.fire===be)break;return te._promise("readwrite",function(){return ge(Y)},!0);case"put":if(pe.fire===be&&ye.fire===be)break;return te._promise("readwrite",function(){return ge(Y)},!0);case"delete":if(ce.fire===be)break;return te._promise("readwrite",function(){return ge(Y)},!0);case"deleteRange":if(ce.fire===be)break;return te._promise("readwrite",function(){return(function _e(ke,Ne,Me){return L.query({trans:ke,values:!1,query:{index:B,range:Ne},limit:Me}).then(function(Te){var Ge=Te.result;return ge({type:"delete",keys:Ge,trans:ke}).then(function(qe){return 0<qe.numFailures?Promise.reject(qe.failures[0]):Ge.length<Me?{failures:[],numFailures:0,lastResult:void 0}:_e(ke,r(r({},Ne),{lower:Ge[Ge.length-1],lowerOpen:!0}),Me)})})})(Y.trans,Y.range,1e4)},!0)}return L.mutate(Y);function ge(_e){var ke,Ne,Me,Te=xt.trans,Ge=_e.keys||no(B,_e);if(Ge)return(_e=_e.type==="add"||_e.type==="put"?r(r({},_e),{keys:Ge}):r({},_e)).type!=="delete"&&(_e.values=n([],_e.values)),_e.keys&&(_e.keys=n([],_e.keys)),ke=L,Me=Ge,((Ne=_e).type==="add"?Promise.resolve([]):ke.getMany({trans:Ne.trans,keys:Me,cache:"immutable"})).then(function(qe){var He=Ge.map(function(et,ht){var kt,Mt,bt,Yt=qe[ht],Ft={onerror:null,onsuccess:null};return _e.type==="delete"?ce.fire.call(Ft,et,Yt,Te):_e.type==="add"||Yt===void 0?(kt=pe.fire.call(Ft,et,_e.values[ht],Te),et==null&&kt!=null&&(_e.keys[ht]=et=kt,B.outbound||P(_e.values[ht],B.keyPath,et))):(kt=Jd(Yt,_e.values[ht]),(Mt=ye.fire.call(Ft,kt,et,Yt,Te))&&(bt=_e.values[ht],Object.keys(Mt).forEach(function(Nt){h(bt,Nt)?bt[Nt]=Mt[Nt]:P(bt,Nt,Mt[Nt])}))),Ft});return L.mutate(_e).then(function(et){for(var ht=et.failures,kt=et.results,Mt=et.numFailures,et=et.lastResult,bt=0;bt<Ge.length;++bt){var Yt=(kt||Ge)[bt],Ft=He[bt];Yt==null?Ft.onerror&&Ft.onerror(ht[bt]):Ft.onsuccess&&Ft.onsuccess(_e.type==="put"&&qe[bt]?_e.values[bt]:Yt)}return{failures:ht,results:kt,numFailures:Mt,lastResult:et}}).catch(function(et){return He.forEach(function(ht){return ht.onerror&&ht.onerror(et)}),Promise.reject(et)})});throw new Error("Keys missing")}}})}})}};function Bh(N,A,L){try{if(!A||A.keys.length<N.length)return null;for(var B=[],Y=0,te=0;Y<A.keys.length&&te<N.length;++Y)ua(A.keys[Y],N[te])===0&&(B.push(L?J(A.values[Y]):A.values[Y]),++te);return B.length===N.length?B:null}catch{return null}}var Vl={stack:"dbcore",level:-1,create:function(N){return{table:function(A){var L=N.table(A);return r(r({},L),{getMany:function(B){var Y;return B.cache?(Y=Bh(B.keys,B.trans._cache,B.cache==="clone"))?It.resolve(Y):L.getMany(B).then(function(te){return B.trans._cache={keys:B.keys,values:B.cache==="clone"?J(te):te},te}):L.getMany(B)},mutate:function(B){return B.type!=="add"&&(B.trans._cache=null),L.mutate(B)}})}}}};function dl(N,A){return N.trans.mode==="readonly"&&!!N.subscr&&!N.trans.explicit&&N.trans.db._options.cache!=="disabled"&&!A.schema.primaryKey.outbound}function io(N,A){switch(N){case"query":return A.values&&!A.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var tu={stack:"dbcore",level:0,name:"Observability",create:function(N){var A=N.schema.name,L=new Tn(N.MIN_KEY,N.MAX_KEY);return r(r({},N),{transaction:function(B,Y,te){if(xt.subscr&&Y!=="readonly")throw new we.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(xt.querier));return N.transaction(B,Y,te)},table:function(B){function Y(Ge){var Te,Ge=Ge.query;return[Te=Ge.index,new Tn((Te=(Ge=Ge.range).lower)!=null?Te:N.MIN_KEY,(Te=Ge.upper)!=null?Te:N.MAX_KEY)]}var te=N.table(B),se=te.schema,ce=se.primaryKey,pe=se.indexes,ye=ce.extractKey,ge=ce.outbound,_e=ce.autoIncrement&&pe.filter(function(Me){return Me.compound&&Me.keyPath.includes(ce.keyPath)}),ke=r(r({},te),{mutate:function(Me){function Te(Zt){return Zt="idb://".concat(A,"/").concat(B,"/").concat(Zt),ht[Zt]||(ht[Zt]=new Tn)}var Ge,qe,He,et=Me.trans,ht=Me.mutatedParts||(Me.mutatedParts={}),kt=Te(""),Mt=Te(":dels"),bt=Me.type,Ft=Me.type==="deleteRange"?[Me.range]:Me.type==="delete"?[Me.keys]:Me.values.length<50?[no(ce,Me).filter(function(Zt){return Zt}),Me.values]:[],Yt=Ft[0],Ft=Ft[1],Nt=Me.trans._cache;return l(Yt)?(kt.addKeys(Yt),(bt=bt==="delete"||Yt.length===Ft.length?Bh(Yt,Nt):null)||Mt.addKeys(Yt),(bt||Ft)&&(Ge=Te,qe=bt,He=Ft,se.indexes.forEach(function(Zt){var La=Ge(Zt.name||"");function ir(Ga){return Ga!=null?Zt.extractKey(Ga):null}function ba(Ga){Zt.multiEntry&&l(Ga)?Ga.forEach(function(Zr){return La.addKey(Zr)}):La.addKey(Ga)}(qe||He).forEach(function(Ga,Pr){var Ki=qe&&ir(qe[Pr]),Pr=He&&ir(He[Pr]);ua(Ki,Pr)!==0&&(Ki!=null&&ba(Ki),Pr!=null)&&ba(Pr)})}))):Yt?(Ft={from:(Nt=Yt.lower)!=null?Nt:N.MIN_KEY,to:(bt=Yt.upper)!=null?bt:N.MAX_KEY},Mt.add(Ft),kt.add(Ft)):(kt.add(L),Mt.add(L),se.indexes.forEach(function(Zt){return Te(Zt.name).add(L)})),te.mutate(Me).then(function(Zt){return!Yt||Me.type!=="add"&&Me.type!=="put"||(kt.addKeys(Zt.results),_e&&_e.forEach(function(La){for(var ir=Me.values.map(function(Ki){return La.extractKey(Ki)}),ba=La.keyPath.findIndex(function(Ki){return Ki===ce.keyPath}),Ga=0,Zr=Zt.results.length;Ga<Zr;++Ga)ir[Ga][ba]=Zt.results[Ga];Te(La.name).addKeys(ir)})),et.mutatedParts=ma(et.mutatedParts||{},ht),Zt})}}),Ne={get:function(Me){return[ce,new Tn(Me.key)]},getMany:function(Me){return[ce,new Tn().addKeys(Me.keys)]},count:Y,query:Y,openCursor:Y};return o(Ne).forEach(function(Me){ke[Me]=function(Te){var Ge=xt.subscr,qe=!!Ge,He=dl(xt,te)&&io(Me,Te)?Te.obsSet={}:Ge;if(qe){var et,Ge=function(Ft){return Ft="idb://".concat(A,"/").concat(B,"/").concat(Ft),He[Ft]||(He[Ft]=new Tn)},ht=Ge(""),kt=Ge(":dels"),qe=Ne[Me](Te),Mt=qe[0],qe=qe[1];if((Me==="query"&&Mt.isPrimaryKey&&!Te.values?kt:Ge(Mt.name||"")).add(qe),!Mt.isPrimaryKey){if(Me!=="count")return et=Me==="query"&&ge&&Te.values&&te.query(r(r({},Te),{values:!1})),te[Me].apply(this,arguments).then(function(Ft){if(Me==="query"){if(ge&&Te.values)return et.then(function(ir){return ir=ir.result,ht.addKeys(ir),Ft});var Nt=Te.values?Ft.result.map(ye):Ft.result;(Te.values?ht:kt).addKeys(Nt)}else{var Zt,La;if(Me==="openCursor")return La=Te.values,(Zt=Ft)&&Object.create(Zt,{key:{get:function(){return kt.addKey(Zt.primaryKey),Zt.key}},primaryKey:{get:function(){var ir=Zt.primaryKey;return kt.addKey(ir),ir}},value:{get:function(){return La&&ht.addKey(Zt.primaryKey),Zt.value}}})}return Ft});kt.add(L)}}return te[Me].apply(this,arguments)}}),ke}})}};function Pi(N,A,L){var B;return L.numFailures===0?A:A.type==="deleteRange"||(B=A.keys?A.keys.length:"values"in A&&A.values?A.values.length:1,L.numFailures===B)?null:(B=r({},A),l(B.keys)&&(B.keys=B.keys.filter(function(Y,te){return!(te in L.failures)})),"values"in B&&l(B.values)&&(B.values=B.values.filter(function(Y,te){return!(te in L.failures)})),B)}function Vc(N,A){return L=N,((B=A).lower===void 0||(B.lowerOpen?0<ua(L,B.lower):0<=ua(L,B.lower)))&&(L=N,(B=A).upper===void 0||(B.upperOpen?ua(L,B.upper)<0:ua(L,B.upper)<=0));var L,B}function Zi(N,A,L,B,Y,te){var se,ce,pe,ye,ge,_e;return!L||L.length===0||(se=A.query.index,ce=se.multiEntry,pe=A.query.range,ye=B.schema.primaryKey.extractKey,ge=se.extractKey,_e=(se.lowLevelIndex||se).extractKey,(B=L.reduce(function(ke,Ne){var Me=ke,Te=[];if(Ne.type==="add"||Ne.type==="put")for(var Ge=new Tn,qe=Ne.values.length-1;0<=qe;--qe){var He,et=Ne.values[qe],ht=ye(et);!Ge.hasKey(ht)&&(He=ge(et),ce&&l(He)?He.some(function(Ft){return Vc(Ft,pe)}):Vc(He,pe))&&(Ge.addKey(ht),Te.push(et))}switch(Ne.type){case"add":var kt=new Tn().addKeys(A.values?ke.map(function(Nt){return ye(Nt)}):ke),Me=ke.concat(A.values?Te.filter(function(Nt){return Nt=ye(Nt),!kt.hasKey(Nt)&&(kt.addKey(Nt),!0)}):Te.map(function(Nt){return ye(Nt)}).filter(function(Nt){return!kt.hasKey(Nt)&&(kt.addKey(Nt),!0)}));break;case"put":var Mt=new Tn().addKeys(Ne.values.map(function(Nt){return ye(Nt)}));Me=ke.filter(function(Nt){return!Mt.hasKey(A.values?ye(Nt):Nt)}).concat(A.values?Te:Te.map(function(Nt){return ye(Nt)}));break;case"delete":var bt=new Tn().addKeys(Ne.keys);Me=ke.filter(function(Nt){return!bt.hasKey(A.values?ye(Nt):Nt)});break;case"deleteRange":var Yt=Ne.range;Me=ke.filter(function(Nt){return!Vc(ye(Nt),Yt)})}return Me},N))===N)?N:(B.sort(function(ke,Ne){return ua(_e(ke),_e(Ne))||ua(ye(ke),ye(Ne))}),A.limit&&A.limit<1/0&&(B.length>A.limit?B.length=A.limit:N.length===A.limit&&B.length<A.limit&&(Y.dirty=!0)),te?Object.freeze(B):B)}function Hl(N,A){return ua(N.lower,A.lower)===0&&ua(N.upper,A.upper)===0&&!!N.lowerOpen==!!A.lowerOpen&&!!N.upperOpen==!!A.upperOpen}function ul(N,A){return((L,B,Y,te)=>{if(L===void 0)return B!==void 0?-1:0;if(B===void 0)return 1;if((L=ua(L,B))===0){if(Y&&te)return 0;if(Y)return 1;if(te)return-1}return L})(N.lower,A.lower,N.lowerOpen,A.lowerOpen)<=0&&0<=((L,B,Y,te)=>{if(L===void 0)return B!==void 0?1:0;if(B===void 0)return-1;if((L=ua(L,B))===0){if(Y&&te)return 0;if(Y)return-1;if(te)return 1}return L})(N.upper,A.upper,N.upperOpen,A.upperOpen)}function nm(N,A,L,B){N.subscribers.add(L),B.addEventListener("abort",function(){var Y,te;N.subscribers.delete(L),N.subscribers.size===0&&(Y=N,te=A,setTimeout(function(){Y.subscribers.size===0&&ee(te,Y)},3e3))})}var Hc={stack:"dbcore",level:0,name:"Cache",create:function(N){var A=N.schema.name;return r(r({},N),{transaction:function(L,B,Y){var te,se,ce=N.transaction(L,B,Y);return B==="readwrite"&&(Y=(te=new AbortController).signal,ce.addEventListener("abort",(se=function(pe){return function(){if(te.abort(),B==="readwrite"){for(var ye=new Set,ge=0,_e=L;ge<_e.length;ge++){var ke=_e[ge],Ne=wr["idb://".concat(A,"/").concat(ke)];if(Ne){var Me=N.table(ke),Te=Ne.optimisticOps.filter(function(Zt){return Zt.trans===ce});if(ce._explicit&&pe&&ce.mutatedParts)for(var Ge=0,qe=Object.values(Ne.queries.query);Ge<qe.length;Ge++)for(var He=0,et=(Mt=qe[Ge]).slice();He<et.length;He++)Ph((bt=et[He]).obsSet,ce.mutatedParts)&&(ee(Mt,bt),bt.subscribers.forEach(function(Zt){return ye.add(Zt)}));else if(0<Te.length){Ne.optimisticOps=Ne.optimisticOps.filter(function(Zt){return Zt.trans!==ce});for(var ht=0,kt=Object.values(Ne.queries.query);ht<kt.length;ht++)for(var Mt,bt,Yt,Ft=0,Nt=(Mt=kt[ht]).slice();Ft<Nt.length;Ft++)(bt=Nt[Ft]).res!=null&&ce.mutatedParts&&(pe&&!bt.dirty?(Yt=Object.isFrozen(bt.res),Yt=Zi(bt.res,bt.req,Te,Me,bt,Yt),bt.dirty?(ee(Mt,bt),bt.subscribers.forEach(function(Zt){return ye.add(Zt)})):Yt!==bt.res&&(bt.res=Yt,bt.promise=It.resolve({result:Yt}))):(bt.dirty&&ee(Mt,bt),bt.subscribers.forEach(function(Zt){return ye.add(Zt)})))}}}ye.forEach(function(Zt){return Zt()})}}})(!1),{signal:Y}),ce.addEventListener("error",se(!1),{signal:Y}),ce.addEventListener("complete",se(!0),{signal:Y})),ce},table:function(L){var B=N.table(L),Y=B.schema.primaryKey;return r(r({},B),{mutate:function(te){var se,ce=xt.trans;return!Y.outbound&&ce.db._options.cache!=="disabled"&&!ce.explicit&&ce.idbtrans.mode==="readwrite"&&(se=wr["idb://".concat(A,"/").concat(L)])?(ce=B.mutate(te),te.type!=="add"&&te.type!=="put"||!(50<=te.values.length||no(Y,te).some(function(pe){return pe==null}))?(se.optimisticOps.push(te),te.mutatedParts&&Kd(te.mutatedParts),ce.then(function(pe){0<pe.numFailures&&(ee(se.optimisticOps,te),(pe=Pi(0,te,pe))&&se.optimisticOps.push(pe),te.mutatedParts)&&Kd(te.mutatedParts)}),ce.catch(function(){ee(se.optimisticOps,te),te.mutatedParts&&Kd(te.mutatedParts)})):ce.then(function(pe){var ye=Pi(0,r(r({},te),{values:te.values.map(function(ge,_e){var ke;return pe.failures[_e]?ge:(P(ke=(ke=Y.keyPath)!=null&&ke.includes(".")?J(ge):r({},ge),Y.keyPath,pe.results[_e]),ke)})}),pe);se.optimisticOps.push(ye),queueMicrotask(function(){return te.mutatedParts&&Kd(te.mutatedParts)})}),ce):B.mutate(te)},query:function(te){var se,ce,pe,ye,ge,_e,ke;return dl(xt,B)&&io("query",te)?(se=((pe=xt.trans)==null?void 0:pe.db._options.cache)==="immutable",ce=(pe=xt).requery,pe=pe.signal,_e=((Ne,Me,Te,Ge)=>{var qe=wr["idb://".concat(Ne,"/").concat(Me)];if(!qe)return[];if(!(Ne=qe.queries[Te]))return[null,!1,qe,null];var He=Ne[(Ge.query?Ge.query.index.name:null)||""];if(!He)return[null,!1,qe,null];switch(Te){case"query":var et=He.find(function(ht){return ht.req.limit===Ge.limit&&ht.req.values===Ge.values&&Hl(ht.req.query.range,Ge.query.range)});return et?[et,!0,qe,He]:[He.find(function(ht){return("limit"in ht.req?ht.req.limit:1/0)>=Ge.limit&&(!Ge.values||ht.req.values)&&ul(ht.req.query.range,Ge.query.range)}),!1,qe,He];case"count":return et=He.find(function(ht){return Hl(ht.req.query.range,Ge.query.range)}),[et,!!et,qe,He]}})(A,L,"query",te),ke=_e[0],ye=_e[2],ge=_e[3],ke&&_e[1]?ke.obsSet=te.obsSet:(_e=B.query(te).then(function(Ne){var Me=Ne.result;if(ke&&(ke.res=Me),se){for(var Te=0,Ge=Me.length;Te<Ge;++Te)Object.freeze(Me[Te]);Object.freeze(Me)}else Ne.result=J(Me);return Ne}).catch(function(Ne){return ge&&ke&&ee(ge,ke),Promise.reject(Ne)}),ke={obsSet:te.obsSet,promise:_e,subscribers:new Set,type:"query",req:te,dirty:!1},ge?ge.push(ke):(ge=[ke],(ye=ye||(wr["idb://".concat(A,"/").concat(L)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[te.query.index.name||""]=ge)),nm(ke,ge,ce,pe),ke.promise.then(function(Ne){return{result:Zi(Ne.result,te,ye?.optimisticOps,B,ke,se)}})):B.query(te)}})}})}};function Ci(N,A){return new Proxy(N,{get:function(L,B,Y){return B==="db"?A:Reflect.get(L,B,Y)}})}Gr.prototype.version=function(N){if(isNaN(N)||N<.1)throw new we.Type("Given version is not a positive number");if(N=Math.round(10*N)/10,this.idbdb||this._state.isBeingOpened)throw new we.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,N);var A=this._versions,L=A.filter(function(B){return B._cfg.version===N})[0];return L||(L=new this.Version(N),A.push(L),A.sort(Rh),L.stores({}),this._state.autoSchema=!1),L},Gr.prototype._whenReady=function(N){var A=this;return this.idbdb&&(this._state.openComplete||xt.letThrough||this._vip)?N():new It(function(L,B){if(A._state.openComplete)return B(new we.DatabaseClosed(A._state.dbOpenError));if(!A._state.isBeingOpened){if(!A._state.autoOpen)return void B(new we.DatabaseClosed);A.open().catch(be)}A._state.dbReadyPromise.then(L,B)}).then(N)},Gr.prototype.use=function(Y){var A=Y.stack,L=Y.create,B=Y.level,Y=Y.name,te=(Y&&this.unuse({stack:A,name:Y}),this._middlewares[A]||(this._middlewares[A]=[]));return te.push({stack:A,create:L,level:B??10,name:Y}),te.sort(function(se,ce){return se.level-ce.level}),this},Gr.prototype.unuse=function(N){var A=N.stack,L=N.name,B=N.create;return A&&this._middlewares[A]&&(this._middlewares[A]=this._middlewares[A].filter(function(Y){return B?Y.create!==B:!!L&&Y.name!==L})),this},Gr.prototype.open=function(){var N=this;return Nr(oa,function(){return z0(N)})},Gr.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var N=this._state,A=dt.indexOf(this);if(0<=A&&dt.splice(A,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}N.isBeingOpened||(N.dbReadyPromise=new It(function(L){N.dbReadyResolve=L}),N.openCanceller=new It(function(L,B){N.cancelOpen=B}))},Gr.prototype.close=function(A){var A=(A===void 0?{disableAutoOpen:!0}:A).disableAutoOpen,L=this._state;A?(L.isBeingOpened&&L.cancelOpen(new we.DatabaseClosed),this._close(),L.autoOpen=!1,L.dbOpenError=new we.DatabaseClosed):(this._close(),L.autoOpen=this._options.autoOpen||L.isBeingOpened,L.openComplete=!1,L.dbOpenError=null)},Gr.prototype.delete=function(N){var A=this,L=(N===void 0&&(N={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),B=this._state;return new It(function(Y,te){function se(){A.close(N);var ce=A._deps.indexedDB.deleteDatabase(A.name);ce.onsuccess=Ae(function(){var pe,ye,ge;pe=A._deps,ye=A.name,Zd(ge=pe.indexedDB)||ye===ri||Xd(ge,pe.IDBKeyRange).delete(ye).catch(be),Y()}),ce.onerror=An(te),ce.onblocked=A._fireOnBlocked}if(L)throw new we.InvalidArgument("Invalid closeOptions argument to db.delete()");B.isBeingOpened?B.dbReadyPromise.then(se):se()})},Gr.prototype.backendDB=function(){return this.idbdb},Gr.prototype.isOpen=function(){return this.idbdb!==null},Gr.prototype.hasBeenClosed=function(){var N=this._state.dbOpenError;return N&&N.name==="DatabaseClosed"},Gr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Gr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Gr.prototype,"tables",{get:function(){var N=this;return o(this._allTables).map(function(A){return N._allTables[A]})},enumerable:!1,configurable:!0}),Gr.prototype.transaction=function(){var N=(function(A,L,B){var Y=arguments.length;if(Y<2)throw new we.InvalidArgument("Too few arguments");for(var te=new Array(Y-1);--Y;)te[Y-1]=arguments[Y];return B=te.pop(),[A,Q(te),B]}).apply(this,arguments);return this._transaction.apply(this,N)},Gr.prototype._transaction=function(N,A,L){var B,Y,te=this,se=xt.trans,ce=(se&&se.db===this&&N.indexOf("!")===-1||(se=null),N.indexOf("?")!==-1);N=N.replace("!","").replace("?","");try{if(Y=A.map(function(ye){if(ye=ye instanceof te.Table?ye.name:ye,typeof ye!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ye}),N=="r"||N===sr)B=sr;else{if(N!="rw"&&N!=Nn)throw new we.InvalidArgument("Invalid transaction mode: "+N);B=Nn}if(se){if(se.mode===sr&&B===Nn){if(!ce)throw new we.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");se=null}se&&Y.forEach(function(ye){if(se&&se.storeNames.indexOf(ye)===-1){if(!ce)throw new we.SubTransaction("Table "+ye+" not included in parent transaction.");se=null}}),ce&&se&&!se.active&&(se=null)}}catch(ye){return se?se._promise(null,function(ge,_e){_e(ye)}):Ot(ye)}var pe=(function ye(ge,_e,ke,Ne,Me){return It.resolve().then(function(){var He=xt.transless||xt,Te=ge._createTransaction(_e,ke,ge._dbSchema,Ne),He=(Te.explicit=!0,{trans:Te,transless:He});if(Ne)Te.idbtrans=Ne.idbtrans;else try{Te.create(),Te.idbtrans._explicit=!0,ge._state.PR1398_maxLoop=3}catch(et){return et.name===Se.InvalidState&&ge.isOpen()&&0<--ge._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ge.close({disableAutoOpen:!1}),ge.open().then(function(){return ye(ge,_e,ke,null,Me)})):Ot(et)}var Ge,qe=Z(Me),He=(qe&&At(),It.follow(function(){var et;(Ge=Me.call(Te,Te))&&(qe?(et=Vt.bind(null,null),Ge.then(et,et)):typeof Ge.next=="function"&&typeof Ge.throw=="function"&&(Ge=cl(Ge)))},He));return(Ge&&typeof Ge.then=="function"?It.resolve(Ge).then(function(et){return Te.active?et:Ot(new we.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):He.then(function(){return Ge})).then(function(et){return Ne&&Te._resolve(),Te._completion.then(function(){return et})}).catch(function(et){return Te._reject(et),Ot(et)})})}).bind(null,this,B,Y,se,L);return se?se._promise(B,pe,"lock"):xt.trans?Nr(xt.transless,function(){return te._whenReady(pe)}):this._whenReady(pe)},Gr.prototype.table=function(N){if(h(this._allTables,N))return this._allTables[N];throw new we.InvalidTable("Table ".concat(N," does not exist"))};var Rs=Gr;function Gr(N,A){var L,B,Y,te,se,ce=this,pe=(this._middlewares={},this.verno=0,Gr.dependencies),pe=(this._options=A=r({addons:Gr.addons,autoOpen:!0,indexedDB:pe.indexedDB,IDBKeyRange:pe.IDBKeyRange,cache:"cloned"},A),this._deps={indexedDB:A.indexedDB,IDBKeyRange:A.IDBKeyRange},A.addons),ye=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:be,dbReadyPromise:null,cancelOpen:be,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:A.autoOpen}),ge=(ye.dbReadyPromise=new It(function(_e){ye.dbReadyResolve=_e}),ye.openCanceller=new It(function(_e,ke){ye.cancelOpen=ke}),this._state=ye,this.name=N,this.on=Ms(this,"populate","blocked","versionchange","close",{ready:[Ue,be]}),this.once=function(_e,ke){var Ne=function(){for(var Me=[],Te=0;Te<arguments.length;Te++)Me[Te]=arguments[Te];ce.on(_e).unsubscribe(Ne),ke.apply(ce,Me)};return ce.on(_e,Ne)},this.on.ready.subscribe=T(this.on.ready.subscribe,function(_e){return function(ke,Ne){Gr.vip(function(){var Me,Te=ce._state;Te.openComplete?(Te.dbOpenError||It.resolve().then(ke),Ne&&_e(ke)):Te.onReadyBeingFired?(Te.onReadyBeingFired.push(ke),Ne&&_e(ke)):(_e(ke),Me=ce,Ne||_e(function Ge(){Me.on.ready.unsubscribe(ke),Me.on.ready.unsubscribe(Ge)}))})}}),this.Collection=(L=this,Fa(Eh.prototype,function(Ge,Te){this.db=L;var Ne=er,Me=null;if(Te)try{Ne=Te()}catch(He){Me=He}var Te=Ge._ctx,Ge=Te.table,qe=Ge.hook.reading.fire;this._ctx={table:Ge,index:Te.index,isPrimKey:!Te.index||Ge.schema.primKey.keyPath&&Te.index===Ge.schema.primKey.name,range:Ne,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Me,or:Te.or,valueMapper:qe!==Ee?qe:null}})),this.Table=(B=this,Fa(Ts.prototype,function(_e,ke,Ne){this.db=B,this._tx=Ne,this.name=_e,this.schema=ke,this.hook=B._allTables[_e]?B._allTables[_e].hook:Ms(null,{creating:[Re,be],reading:[ze,Ee],updating:[vt,be],deleting:[ut,be]})})),this.Transaction=(Y=this,Fa(Dh.prototype,function(_e,ke,Ne,Me,Te){var Ge=this;_e!=="readonly"&&ke.forEach(function(qe){qe=(qe=Ne[qe])==null?void 0:qe.yProps,qe&&(ke=ke.concat(qe.map(function(He){return He.updatesTable})))}),this.db=Y,this.mode=_e,this.storeNames=ke,this.schema=Ne,this.chromeTransactionDurability=Me,this.idbtrans=null,this.on=Ms(this,"complete","error","abort"),this.parent=Te||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new It(function(qe,He){Ge._resolve=qe,Ge._reject=He}),this._completion.then(function(){Ge.active=!1,Ge.on.complete.fire()},function(qe){var He=Ge.active;return Ge.active=!1,Ge.on.error.fire(qe),Ge.parent?Ge.parent._reject(qe):He&&Ge.idbtrans&&Ge.idbtrans.abort(),Ot(qe)})})),this.Version=(te=this,Fa(Hn.prototype,function(_e){this.db=te,this._cfg={version:_e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(se=this,Fa(Xr.prototype,function(_e,ke,Ne){if(this.db=se,this._ctx={table:_e,index:ke===":id"?null:ke,or:Ne},this._cmp=this._ascending=ua,this._descending=function(Me,Te){return ua(Te,Me)},this._max=function(Me,Te){return 0<ua(Me,Te)?Me:Te},this._min=function(Me,Te){return ua(Me,Te)<0?Me:Te},this._IDBKeyRange=se._deps.IDBKeyRange,!this._IDBKeyRange)throw new we.MissingAPI})),this.on("versionchange",function(_e){0<_e.newVersion?console.warn("Another connection wants to upgrade database '".concat(ce.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(ce.name,"'. Closing db now to resume the delete request.")),ce.close({disableAutoOpen:!1})}),this.on("blocked",function(_e){!_e.newVersion||_e.newVersion<_e.oldVersion?console.warn("Dexie.delete('".concat(ce.name,"') was blocked")):console.warn("Upgrade '".concat(ce.name,"' blocked by other connection holding version ").concat(_e.oldVersion/10))}),this._maxKey=Ds(A.IDBKeyRange),this._createTransaction=function(_e,ke,Ne,Me){return new ce.Transaction(_e,ke,Ne,ce._options.chromeTransactionDurability,Me)},this._fireOnBlocked=function(_e){ce.on("blocked").fire(_e),dt.filter(function(ke){return ke.name===ce.name&&ke!==ce&&!ke._state.vcFired}).map(function(ke){return ke.on("versionchange").fire(_e)})},this.use(Vl),this.use(Hc),this.use(tu),this.use(F0),this.use(eu),new Proxy(this,{get:function(_e,ke,Ne){var Me;return ke==="_vip"||(ke==="table"?function(Te){return Ci(ce.table(Te),ge)}:(Me=Reflect.get(_e,ke,Ne))instanceof Ts?Ci(Me,ge):ke==="tables"?Me.map(function(Te){return Ci(Te,ge)}):ke==="_createTransaction"?function(){return Ci(Me.apply(this,arguments),ge)}:Me)}}));this.vip=ge,pe.forEach(function(_e){return _e(ce)})}var Ls,qa=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Uc=(ue.prototype.subscribe=function(N,A,L){return this._subscribe(N&&typeof N!="function"?N:{next:N,error:A,complete:L})},ue.prototype[qa]=function(){return this},ue);function ue(N){this._subscribe=N}try{Ls={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Ls={indexedDB:null,IDBKeyRange:null}}function m(N){var A,L=!1,B=new Uc(function(Y){var te=Z(N),se,ce=!1,pe={},ye={},ge={get closed(){return ce},unsubscribe:function(){ce||(ce=!0,se&&se.abort(),_e&&xr.storagemutated.unsubscribe(Ne))}},_e=(Y.start&&Y.start(ge),!1),ke=function(){return Za(Me)},Ne=function(Te){ma(pe,Te),Ph(ye,pe)&&ke()},Me=function(){var Te,Ge,qe;!ce&&Ls.indexedDB&&(pe={},Te={},se&&se.abort(),se=new AbortController,qe=(He=>{var et=kn();try{te&&At();var ht=Et(N,He);return ht=te?ht.finally(Vt):ht}finally{et&&ai()}})(Ge={subscr:Te,signal:se.signal,requery:ke,querier:N,trans:null}),Promise.resolve(qe).then(function(He){L=!0,A=He,ce||Ge.signal.aborted||(pe={},(et=>{for(var ht in et)if(h(et,ht))return;return 1})(ye=Te)||_e||(xr(Pl,Ne),_e=!0),Za(function(){return!ce&&Y.next&&Y.next(He)}))},function(He){L=!1,["DatabaseClosedError","AbortError"].includes(He?.name)||ce||Za(function(){ce||Y.error&&Y.error(He)})}))};return setTimeout(ke,0),ge});return B.hasValue=function(){return L},B.getValue=function(){return A},B}var y=Rs;function j(N){var A=M;try{M=!0,xr.storagemutated.fire(N),Xi(N,!0)}finally{M=A}}f(y,r(r({},ie),{delete:function(N){return new y(N,{addons:[]}).delete()},exists:function(N){return new y(N,{addons:[]}).open().then(function(A){return A.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(N){try{return A=y.dependencies,L=A.indexedDB,A=A.IDBKeyRange,(Zd(L)?Promise.resolve(L.databases()).then(function(B){return B.map(function(Y){return Y.name}).filter(function(Y){return Y!==ri})}):Xd(L,A).toCollection().primaryKeys()).then(N)}catch{return Ot(new we.MissingAPI)}var A,L},defineClass:function(){return function(N){c(this,N)}},ignoreTransaction:function(N){return xt.trans?Nr(xt.transless,N):N()},vip:Lh,async:function(N){return function(){try{var A=cl(N.apply(this,arguments));return A&&typeof A.then=="function"?A:It.resolve(A)}catch(L){return Ot(L)}}},spawn:function(N,A,L){try{var B=cl(N.apply(L,A||[]));return B&&typeof B.then=="function"?B:It.resolve(B)}catch(Y){return Ot(Y)}},currentTransaction:{get:function(){return xt.trans||null}},waitFor:function(N,A){return N=It.resolve(typeof N=="function"?y.ignoreTransaction(N):N).timeout(A||6e4),xt.trans?xt.trans.waitFor(N):N},Promise:It,debug:{get:function(){return Ye},set:function(N){Ht(N)}},derive:b,extend:c,props:f,override:T,Events:Ms,on:xr,liveQuery:m,extendObservabilitySet:ma,getByKeyPath:O,setByKeyPath:P,delByKeyPath:function(N,A){typeof A=="string"?P(N,A,void 0):"length"in A&&[].map.call(A,function(L){P(N,L,void 0)})},shallowClone:V,deepClone:J,getObjectDiff:Jd,cmp:ua,asap:I,minKey:-1/0,addons:[],connections:dt,errnames:Se,dependencies:Ls,cache:wr,semVer:"4.3.0",version:"4.3.0".split(".").map(function(N){return parseInt(N)}).reduce(function(N,A,L){return N+A/Math.pow(10,2*L)})})),y.maxKey=Ds(y.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(xr(Pl,function(N){M||(N=new CustomEvent(Ma,{detail:N}),M=!0,dispatchEvent(N),M=!1)}),addEventListener(Ma,function(N){N=N.detail,M||j(N)}));var C,M=!1,R=function(){};return typeof BroadcastChannel<"u"&&((R=function(){(C=new BroadcastChannel(Ma)).onmessage=function(N){return N.data&&j(N.data)}})(),typeof C.unref=="function"&&C.unref(),xr(Pl,function(N){M||C.postMessage(N)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(N){if(!Rs.disableBfCache&&N.persisted){Ye&&console.debug("Dexie: handling persisted pagehide"),C?.close();for(var A=0,L=dt;A<L.length;A++)L[A].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(N){!Rs.disableBfCache&&N.persisted&&(Ye&&console.debug("Dexie: handling persisted pageshow"),R(),j({all:new Tn(-1/0,[[]])}))})),It.rejectionMapper=function(N,A){return!N||N instanceof fe||N instanceof TypeError||N instanceof SyntaxError||!N.name||!xe[N.name]?N:(A=new xe[N.name](A||N.message,N),"stack"in N&&g(A,"stack",{get:function(){return this.inner.stack}}),A)},Ht(Ye),r(Rs,Object.freeze({__proto__:null,Dexie:Rs,Entity:Wt,PropModification:Cn,RangeSet:Tn,add:function(N){return new Cn({add:N})},cmp:ua,default:Rs,liveQuery:m,mergeRanges:to,rangesOverlap:nn,remove:function(N){return new Cn({remove:N})},replacePrefix:function(N,A){return new Cn({replacePrefix:[N,A]})}}),{default:Rs}),Rs})})(kw)),kw.exports}var qte=Yte();const zC=MA(qte),M8=Symbol.for("Dexie"),r2=globalThis[M8]||(globalThis[M8]=zC);if(zC.semVer!==r2.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${zC.semVer} and ${r2.semVer}`);const{liveQuery:VIe,mergeRanges:HIe,rangesOverlap:UIe,RangeSet:GIe,cmp:WIe,Entity:$Ie,PropModification:YIe,replacePrefix:qIe,add:XIe,remove:ZIe,DexieYProvider:KIe}=r2,Fx=new r2("MyceliumOfflineDB");Fx.version(1).stores({offlineQueue:"++id, commandName, timestamp, status"});async function Xte(a,e){return await Fx.offlineQueue.add({commandName:a,args:e,timestamp:Date.now(),status:"pending"})}async function E8(){return await Fx.offlineQueue.where("status").equals("pending").toArray()}async function Zte(a){return await Fx.offlineQueue.update(a,{status:"syncing"})}async function D8(a){return await Fx.offlineQueue.update(a,{status:"failed"})}async function Kte(a){return await Fx.offlineQueue.delete(a)}async function pt(a,e={}){const r={get_dashboard_stats:"/api/dashboard/stats",get_dashboard_priority_stats:"/api/dashboard/priority-stats",get_dashboard_secondary_stats:"/api/dashboard/secondary-stats",get_dashboard_schedule_stats:"/api/dashboard/schedule-stats",get_weekly_sales_data:"/api/dashboard/weekly-sales",get_recent_sales:"/api/dashboard/recent-sales",get_top3_products_by_qty:"/api/dashboard/top-qty",get_top_profit_products:"/api/dashboard/top-profitable",get_business_report_data:"/api/dashboard/report",get_ten_year_sales_stats:"/api/dashboard/ten-year-stats",get_monthly_sales_by_cohort:"/api/dashboard/cohort-stats",get_daily_sales_stats_by_month:"/api/dashboard/daily-stats",get_production_spaces:"/api/production/spaces",get_production_batches:"/api/production/batches",save_farming_log:"/api/farming/save-log",save_harvest_record:"/api/production/save-harvest",get_all_users:"/api/auth/users",create_user:"/api/auth/users/create",update_user:"/api/auth/users/update",delete_user:"/api/auth/users/delete",verify_admin_password:"/api/auth/verify-admin",get_company_info:"/api/auth/company",save_company_info:"/api/auth/company/save",get_auth_status:"/api/auth/status",verify_mobile_pin:"/api/auth/verify",get_all_events:"/api/event/all",get_product_list:"/api/product/list",get_product_history:"/api/product/history",get_product_bom:"/api/product/bom",save_product_bom:"/api/product/bom/save",create_product:"/api/product/create",update_product:"/api/product/update",delete_product:"/api/product/delete",discontinue_product:"/api/product/discontinue",apply_preset:"/api/preset/apply",get_preset_data:"/api/preset/data",save_current_as_preset:"/api/preset/save-current",get_custom_presets:"/api/preset/custom-list",delete_custom_preset:"/api/preset/delete-custom",reset_database:"/api/maintenance/reset-db",get_experience_programs:"/api/experience/programs",create_experience_program:"/api/experience/programs/create",update_experience_program:"/api/experience/programs/update",delete_experience_program:"/api/experience/programs/delete",get_all_integrations_config:"/api/settings/integrations",save_gemini_api_key:"/api/settings/integrations/gemini",save_sms_config:"/api/settings/integrations/sms",save_naver_keys:"/api/settings/integrations/naver",save_mall_keys:"/api/settings/integrations/mall",save_courier_config:"/api/settings/integrations/courier",save_tax_filing_config:"/api/settings/integrations/tax",save_tax_filing_config:"/api/settings/integrations/tax",get_sensors:"/api/iot/sensors",save_sensor:"/api/iot/sensors/save",delete_sensor:"/api/iot/sensors/delete",get_latest_readings:"/api/iot/latest",push_sensor_data:"/api/iot/push",get_upcoming_anniversaries:"/api/schedule/anniversary",get_repurchase_candidates:"/api/crm/repurchase",get_inventory_forecast_alerts:"/api/product/forecast-alerts",get_product_freshness:"/api/product/freshness",get_weather_marketing_advice:"/api/ai/weather-advice",get_message_templates:"/api/settings/templates",save_message_templates:"/api/settings/templates/save",reset_message_templates:"/api/settings/templates/reset",get_mobile_config:"/api/mobile/config",save_mobile_config:"/api/mobile/config/save",get_local_ip_command:"/api/mobile/local-ip",save_general_sales_batch:"/api/sales/batch-save",get_auto_backups:"/api/backup/auto",run_daily_custom_backup:"/api/backup/run",restore_database:"/api/backup/restore",run_db_maintenance:"/api/backup/maintenance",cleanup_old_logs:"/api/backup/cleanup",get_internal_backup_path:"/api/backup/path/internal",get_external_backup_path:"/api/backup/path/external",save_external_backup_path:"/api/backup/path/external",get_backup_status:"/api/backup/status",cancel_backup_restore:"/api/backup/cancel",get_custom_presets:"/api/preset/list",apply_preset:"/api/preset/apply",save_current_as_preset:"/api/preset/save",delete_custom_preset:"/api/preset/delete",get_preset_data:"/api/preset/data",reset_database:"/api/preset/reset",save_general_sales_batch:"/api/sales/batch-save",search_customers_by_name:"/api/customer/search/name",search_customers_by_mobile:"/api/customer/search/mobile",get_customer_addresses:"/api/customers/addresses",get_customer_sales_on_date:"/api/sales/query/date",create_customer:"/api/customer/create",get_shipments_by_status:"/api/sales/shipments",update_sale_status:"/api/sales/update-status",complete_shipment:"/api/sales/complete-shipment",batch_sync_courier_statuses:"/api/sales/sync-courier",get_sales_claims:"/api/sales/claims",create_sales_claim:"/api/sales/claims/create",process_sales_claim:"/api/sales/claims/process",update_sales_claim:"/api/sales/claims/update",delete_sales_claim:"/api/sales/claims/delete",get_sale_detail:"/api/sales/detail",search_sales_by_any:"/api/sales/search",create_consultation:"/api/crm/consultations/create",search_events_by_name:"/api/events/search",get_sales_by_event_id_and_date_range:"/api/sales/special/list",save_special_sales_batch:"/api/sales/special/batch",call_gemini_ai:"/api/ai/gemini",get_ai_demand_forecast:"/api/ai/forecast",get_customer:"/api/customer/get",get_product_sales_stats:"/api/finance/analysis/product-stats",get_product_monthly_analysis:"/api/finance/analysis/product-monthly",get_product_10yr_sales_stats:"/api/finance/analysis/product-trend",get_sales_by_region_analysis:"/api/finance/analysis/region-stats",get_profit_margin_analysis:"/api/finance/analysis/profit-margin",get_rfm_analysis:"/api/crm/rfm-analysis",get_membership_sales_analysis:"/api/finance/membership-sales",update_customer_level:"/api/crm/update-level",get_ai_behavior_strategy:"/api/ai/behavior",get_ai_repurchase_analysis:"/api/ai/repurchase",update_customer_memo_batch:"/api/crm/update-memo-batch",get_product_associations:"/api/crm/product-associations",get_ai_marketing_proposal:"/api/ai/marketing-proposal",get_ai_detailed_plan:"/api/ai/detailed-plan",fetch_naver_search:"/api/ai/naver-search",analyze_online_sentiment:"/api/ai/online-sentiment",get_claim_targets:"/api/crm/claim-targets",send_sms_simulation:"/api/crm/sms/send",get_company_info:"/api/auth/company",create_experience_reservation:"/api/experience/reservations/create",get_experience_reservations:"/api/experience/reservations",update_experience_reservation:"/api/experience/reservations/update",delete_experience_reservation:"/api/experience/reservations/delete",update_experience_status:"/api/experience/reservations/status",update_experience_payment_status:"/api/experience/reservations/payment",get_schedules:"/api/schedule/list",create_schedule:"/api/schedule/create",update_schedule:"/api/schedule/update",delete_schedule:"/api/schedule/delete",login:"/api/auth/login"}[a];if(!r)return console.warn(`Bridge: No HTTP route defined for command "${a}". Falling back to mock/empty.`),null;const i=["save_farming_log","save_harvest_record","save_general_sales_batch","get_business_report_data","get_monthly_sales_by_cohort","get_daily_sales_stats_by_month","create_user","update_user","delete_user","verify_admin_password","save_company_info","create_product","update_product","delete_product","discontinue_product","apply_preset","save_current_as_preset","delete_custom_preset","reset_database","create_experience_program","update_experience_program","delete_experience_program","create_experience_reservation","update_experience_reservation","delete_experience_reservation","update_experience_status","update_experience_payment_status","create_schedule","update_schedule","delete_schedule","save_sensor","save_sensor","delete_sensor","reset_message_templates","run_daily_custom_backup","restore_database","run_db_maintenance","cleanup_old_logs","save_external_backup_path","cancel_backup_restore","update_sale_status","complete_shipment","batch_sync_courier_statuses","create_sales_claim","process_sales_claim","update_sales_claim","delete_sales_claim","create_consultation","call_gemini_ai","get_ai_demand_forecast","update_customer_level","update_customer_memo_batch","get_ai_marketing_proposal","get_ai_detailed_plan","fetch_naver_search","analyze_online_sentiment","send_sms_simulation","push_sensor_data","login","verify_mobile_pin"].includes(a)||a.startsWith("save_");try{let o=localStorage.getItem("API_BASE_URL")||"";o.endsWith("/")&&(o=o.slice(0,-1));let l=o+r;if(!i){const h=new URLSearchParams({...e,_t:Date.now()});l=`${l}?${h.toString()}`}const c=await fetch(l,{method:i?"POST":"GET",headers:{Accept:"application/json",...i?{"Content-Type":"application/json"}:{}},...i?{body:JSON.stringify(e)}:{}});if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const d=c.headers.get("content-type");if(!d||!d.includes("application/json")){const h=await c.text();return console.warn(`Bridge: Received non-json response from ${r}. ${d}`,h.substring(0,50)),null}const u=await c.json();if(u&&typeof u=="object"&&u.success===!1&&u.error)throw new Error(u.error);return u}catch(o){console.error(`Bridge: Failed to fetch ${r}:`,o);const l=o instanceof TypeError||o.message.includes("fetch");if(i&&l){console.log(`Bridge: Offline detected. Queuing command "${a}" for later sync.`);try{return await Xte(a,e),{success:!0,offline:!0,message:" :    ."}}catch(c){console.error("Bridge: Failed to add to offline queue:",c)}}throw o}}const Pa=pt,BS=({to:a,icon:e,label:t,end:r=!1})=>s.jsx("li",{children:s.jsxs(HA,{to:a,end:r,className:({isActive:n})=>`
                flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all duration-200 font-medium text-[0.95rem]
                ${n?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg shadow-indigo-500/30":"text-slate-400 hover:bg-white/5 hover:text-white"}
            `,children:[s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:e}),s.jsx("span",{children:t})]})}),ar=({to:a,icon:e,label:t})=>s.jsx("li",{children:s.jsxs(HA,{to:a,className:({isActive:r})=>`
                flex items-center gap-3 px-4 py-2 rounded-lg transition-all duration-200 text-sm
                ${r?"text-indigo-400 bg-indigo-500/10 font-bold":"text-slate-500 hover:text-slate-300 hover:bg-white/5"}
            `,children:[s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:e}),s.jsx("span",{children:t})]})}),Kh=({id:a,icon:e,label:t,children:r,activePrefix:n,expanded:i,onToggle:o,currentPath:l})=>{const c=n?l.startsWith(n):l.startsWith("/"+a);return s.jsxs("li",{children:[s.jsxs("button",{onClick:()=>o(a),className:`
                    w-full flex items-center justify-between px-4 py-2.5 rounded-xl transition-all duration-200 font-medium text-[0.95rem] group
                    ${c&&!i?"text-indigo-400 bg-indigo-500/10":"text-slate-400 hover:bg-white/5 hover:text-white"}
                `,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:`material-symbols-rounded text-[20px] transition-colors ${c?"text-indigo-400":"text-slate-500 group-hover:text-slate-300"}`,children:e}),s.jsx("span",{children:t})]}),s.jsx("span",{className:`material-symbols-rounded text-[18px] transition-transform duration-300 ${i?"rotate-180":""}`,children:"expand_more"})]}),s.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${i?"max-h-[500px] opacity-100 mt-1":"max-h-0 opacity-0"}`,children:s.jsx("ul",{className:"pl-4 border-l border-slate-800 ml-6 space-y-1",children:r})})]})},Qte=()=>{const[a,e]=H.useState({}),[t,r]=H.useState(""),n=Ic(),o=(sessionStorage.getItem("uiMode")||"pro")==="lite";H.useEffect(()=>{const d=async()=>{try{const h=await Pa("get_company_info");h&&h.company_name&&r(h.company_name)}catch(h){console.error("Failed to load company name:",h)}};d();const u=()=>d();return window.addEventListener("company-info-changed",u),()=>window.removeEventListener("company-info-changed",u)},[]);const l=d=>{e(u=>u[d]?{...u,[d]:!1}:{[d]:!0})},c=d=>!!a[d];return s.jsxs("nav",{className:"w-72 h-screen bg-slate-950 border-r border-white/5 flex flex-col shrink-0 relative z-50",children:[s.jsx("div",{className:"p-8 pb-6",children:s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-white flex items-center justify-center shadow-lg shadow-indigo-500/10 overflow-hidden",children:s.jsx("img",{src:"/app-icon.png",alt:"Logo",className:"w-8 h-8 object-contain",onError:d=>{d.target.onerror=null,d.target.src="https://cdn-icons-png.flaticon.com/512/591/591745.png"}})}),s.jsx("h2",{className:"text-xl font-black tracking-tight text-white truncate",title:t,children:t})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-6 custom-scrollbar",children:s.jsxs("ul",{className:"space-y-1",children:[s.jsx(BS,{to:"/",icon:"dashboard",label:"",end:!0}),s.jsxs(Kh,{id:"sales",icon:"shopping_cart",label:" ",expanded:c("sales"),onToggle:l,currentPath:n.pathname,children:[s.jsx(ar,{to:"/sales/reception",icon:"receipt_long",label:" "}),s.jsx(ar,{to:"/sales/shipping",icon:"local_shipping",label:" "}),!o&&s.jsxs(s.Fragment,{children:[s.jsx(ar,{to:"/sales/claims",icon:"assignment_return",label:"//"}),s.jsx(ar,{to:"/sales/special",icon:"event_seat",label:"  "}),s.jsx(ar,{to:"/sales/online-sync",icon:"sync_alt",label:"  "}),s.jsx(ar,{to:"/sales/daily-receipts",icon:"history_edu",label:"  "}),s.jsx(ar,{to:"/sales/daily",icon:"person_search",label:"  "})]}),s.jsx(ar,{to:"/customer/event-mgmt",icon:"fmd_good",label:"() "})]}),s.jsxs(Kh,{id:"customer",icon:"group",label:" ",expanded:c("customer"),onToggle:l,currentPath:n.pathname,children:[s.jsx(ar,{to:"/customer/register",icon:"person_add",label:" "}),s.jsx(ar,{to:"/customer/edit",icon:"manage_accounts",label:"// "}),s.jsx(ar,{to:"/sales/ledger",icon:"account_balance_wallet",label:"  "}),!o&&s.jsxs(s.Fragment,{children:[s.jsx(ar,{to:"/customer/batch",icon:"domain",label:"  "}),s.jsx(ar,{to:"/customer/consultation",icon:"support_agent",label:" (CRM)"}),s.jsx(ar,{to:"/customer/best",icon:"grade",label:"  "}),s.jsx(ar,{to:"/customer/special-care",icon:"priority_high",label:"  "})]})]}),s.jsxs(Kh,{id:"inventory_prod",icon:"potted_plant",label:"//",expanded:c("inventory_prod"),onToggle:l,currentPath:n.pathname,children:[s.jsx(ar,{to:"/sales/stock",icon:"inventory_2",label:"/ "}),s.jsx(ar,{to:"/production",icon:"verified",label:"GAP/HACCP "})]}),!o&&s.jsxs(s.Fragment,{children:[s.jsxs(Kh,{id:"finance",icon:"account_balance",label:"/ ",expanded:c("finance"),onToggle:l,currentPath:n.pathname,children:[s.jsx(ar,{to:"/finance/purchase",icon:"shopping_bag",label:" /"}),s.jsx(ar,{to:"/finance/expense",icon:"payments",label:"  "}),s.jsx(ar,{to:"/finance/tax-report",icon:"request_quote",label:"/ "}),s.jsx(ar,{to:"/finance/vendor",icon:"factory",label:"/ "}),s.jsx(ar,{to:"/finance/analysis",icon:"analytics",label:"/ "})]}),s.jsxs(Kh,{id:"intel",icon:"insights",label:" ",expanded:c("intel"),onToggle:l,currentPath:n.pathname,children:[s.jsx(ar,{to:"/intel/sales",icon:"analytics",label:"  "}),s.jsx(ar,{to:"/intel/customer",icon:"psychology",label:"AI   "}),s.jsx(ar,{to:"/marketing/association",icon:"hub",label:"  "}),s.jsx(ar,{to:"/marketing/orm",icon:"public",label:" AI  "}),s.jsx(ar,{to:"/intel/region-analysis",icon:"map",label:"AI   "}),s.jsx(ar,{to:"/product/sales",icon:"bar_chart",label:"   "}),s.jsx(ar,{to:"/customer/sms",icon:"sms",label:"  "})]})]}),s.jsxs(Kh,{id:"experience",icon:"calendar_today",label:" ",activePrefix:"/exp",expanded:c("experience"),onToggle:l,currentPath:n.pathname,children:[s.jsx(ar,{to:"/exp/reservation-entry",icon:"book_online",label:"  "}),s.jsx(ar,{to:"/exp/reservation-status",icon:"event_note",label:"  "})]}),s.jsx(BS,{to:"/schedule",icon:"calendar_month",label:" "}),sessionStorage.getItem("userRole")==="admin"&&s.jsxs(Kh,{id:"settings",icon:"settings",label:"  ",expanded:c("settings"),onToggle:l,currentPath:n.pathname,children:[s.jsx(ar,{to:"/settings/user-list",icon:"manage_accounts",label:" "}),s.jsx(ar,{to:"/settings/company-info",icon:"business",label:"  "}),s.jsx(ar,{to:"/settings/product-list",icon:"inventory_2",label:"/ "}),s.jsx(ar,{to:"/exp/program-mgmt",icon:"settings_applications",label:"  "}),!o&&s.jsxs(s.Fragment,{children:[s.jsx(ar,{to:"/settings/api-keys",icon:"api",label:"  "}),s.jsx(ar,{to:"/settings/iot",icon:"router",label:"IoT  "}),s.jsx(ar,{to:"/settings/template-mgmt",icon:"chat_bubble",label:" "}),s.jsx(ar,{to:"/settings/mobile-sync",icon:"smartphone",label:"  "}),s.jsx(ar,{to:"/settings/db-backup-restore",icon:"backup",label:"  "}),s.jsx(ar,{to:"/settings/db-reset",icon:"delete_forever",label:" /"})]})]}),s.jsx(BS,{to:"/manual",icon:"help",label:" "})]})})]})};var Jte=Object.defineProperty,n2=Object.getOwnPropertySymbols,jH=Object.prototype.hasOwnProperty,SH=Object.prototype.propertyIsEnumerable,I8=(a,e,t)=>e in a?Jte(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,FC=(a,e)=>{for(var t in e||(e={}))jH.call(e,t)&&I8(a,t,e[t]);if(n2)for(var t of n2(e))SH.call(e,t)&&I8(a,t,e[t]);return a},VC=(a,e)=>{var t={};for(var r in a)jH.call(a,r)&&e.indexOf(r)<0&&(t[r]=a[r]);if(a!=null&&n2)for(var r of n2(a))e.indexOf(r)<0&&SH.call(a,r)&&(t[r]=a[r]);return t};var u0;(a=>{const e=class dr{constructor(c,d,u,h){if(this.version=c,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],c<dr.MIN_VERSION||c>dr.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let f=[];for(let g=0;g<this.size;g++)f.push(!1);for(let g=0;g<this.size;g++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(u);if(this.drawCodewords(p),h==-1){let g=1e9;for(let b=0;b<8;b++){this.applyMask(b),this.drawFormatBits(b);const w=this.getPenaltyScore();w<g&&(h=b,g=w),this.applyMask(b)}}n(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(c,d){const u=a.QrSegment.makeSegments(c);return dr.encodeSegments(u,d)}static encodeBinary(c,d){const u=a.QrSegment.makeBytes(c);return dr.encodeSegments([u],d)}static encodeSegments(c,d,u=1,h=40,f=-1,p=!0){if(!(dr.MIN_VERSION<=u&&u<=h&&h<=dr.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let g,b;for(g=u;;g++){const T=dr.getNumDataCodewords(g,d)*8,D=o.getTotalBits(c,g);if(D<=T){b=D;break}if(g>=h)throw new RangeError("Data too long")}for(const T of[dr.Ecc.MEDIUM,dr.Ecc.QUARTILE,dr.Ecc.HIGH])p&&b<=dr.getNumDataCodewords(g,T)*8&&(d=T);let w=[];for(const T of c){t(T.mode.modeBits,4,w),t(T.numChars,T.mode.numCharCountBits(g),w);for(const D of T.getData())w.push(D)}n(w.length==b);const _=dr.getNumDataCodewords(g,d)*8;n(w.length<=_),t(0,Math.min(4,_-w.length),w),t(0,(8-w.length%8)%8,w),n(w.length%8==0);for(let T=236;w.length<_;T^=253)t(T,8,w);let k=[];for(;k.length*8<w.length;)k.push(0);return w.forEach((T,D)=>k[D>>>3]|=T<<7-(D&7)),new dr(g,d,k,f)}getModule(c,d){return 0<=c&&c<this.size&&0<=d&&d<this.size&&this.modules[d][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),d=c.length;for(let u=0;u<d;u++)for(let h=0;h<d;h++)u==0&&h==0||u==0&&h==d-1||u==d-1&&h==0||this.drawAlignmentPattern(c[u],c[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const d=this.errorCorrectionLevel.formatBits<<3|c;let u=d;for(let f=0;f<10;f++)u=u<<1^(u>>>9)*1335;const h=(d<<10|u)^21522;n(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,r(h,f));this.setFunctionModule(8,7,r(h,6)),this.setFunctionModule(8,8,r(h,7)),this.setFunctionModule(7,8,r(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,r(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,r(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,r(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let u=0;u<12;u++)c=c<<1^(c>>>11)*7973;const d=this.version<<12|c;n(d>>>18==0);for(let u=0;u<18;u++){const h=r(d,u),f=this.size-11+u%3,p=Math.floor(u/3);this.setFunctionModule(f,p,h),this.setFunctionModule(p,f,h)}}drawFinderPattern(c,d){for(let u=-4;u<=4;u++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(u)),p=c+h,g=d+u;0<=p&&p<this.size&&0<=g&&g<this.size&&this.setFunctionModule(p,g,f!=2&&f!=4)}}drawAlignmentPattern(c,d){for(let u=-2;u<=2;u++)for(let h=-2;h<=2;h++)this.setFunctionModule(c+h,d+u,Math.max(Math.abs(h),Math.abs(u))!=1)}setFunctionModule(c,d,u){this.modules[d][c]=u,this.isFunction[d][c]=!0}addEccAndInterleave(c){const d=this.version,u=this.errorCorrectionLevel;if(c.length!=dr.getNumDataCodewords(d,u))throw new RangeError("Invalid argument");const h=dr.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][d],f=dr.ECC_CODEWORDS_PER_BLOCK[u.ordinal][d],p=Math.floor(dr.getNumRawDataModules(d)/8),g=h-p%h,b=Math.floor(p/h);let w=[];const _=dr.reedSolomonComputeDivisor(f);for(let T=0,D=0;T<h;T++){let I=c.slice(D,D+b-f+(T<g?0:1));D+=I.length;const O=dr.reedSolomonComputeRemainder(I,_);T<g&&I.push(0),w.push(I.concat(O))}let k=[];for(let T=0;T<w[0].length;T++)w.forEach((D,I)=>{(T!=b-f||I>=g)&&k.push(D[T])});return n(k.length==p),k}drawCodewords(c){if(c.length!=Math.floor(dr.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const p=u-f,b=(u+1&2)==0?this.size-1-h:h;!this.isFunction[b][p]&&d<c.length*8&&(this.modules[b][p]=r(c[d>>>3],7-(d&7)),d++)}}n(d==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let u=0;u<this.size;u++){let h;switch(c){case 0:h=(u+d)%2==0;break;case 1:h=d%2==0;break;case 2:h=u%3==0;break;case 3:h=(u+d)%3==0;break;case 4:h=(Math.floor(u/3)+Math.floor(d/2))%2==0;break;case 5:h=u*d%2+u*d%3==0;break;case 6:h=(u*d%2+u*d%3)%2==0;break;case 7:h=((u+d)%2+u*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][u]&&h&&(this.modules[d][u]=!this.modules[d][u])}}getPenaltyScore(){let c=0;for(let f=0;f<this.size;f++){let p=!1,g=0,b=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[f][w]==p?(g++,g==5?c+=dr.PENALTY_N1:g>5&&c++):(this.finderPenaltyAddHistory(g,b),p||(c+=this.finderPenaltyCountPatterns(b)*dr.PENALTY_N3),p=this.modules[f][w],g=1);c+=this.finderPenaltyTerminateAndCount(p,g,b)*dr.PENALTY_N3}for(let f=0;f<this.size;f++){let p=!1,g=0,b=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[w][f]==p?(g++,g==5?c+=dr.PENALTY_N1:g>5&&c++):(this.finderPenaltyAddHistory(g,b),p||(c+=this.finderPenaltyCountPatterns(b)*dr.PENALTY_N3),p=this.modules[w][f],g=1);c+=this.finderPenaltyTerminateAndCount(p,g,b)*dr.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let p=0;p<this.size-1;p++){const g=this.modules[f][p];g==this.modules[f][p+1]&&g==this.modules[f+1][p]&&g==this.modules[f+1][p+1]&&(c+=dr.PENALTY_N2)}let d=0;for(const f of this.modules)d=f.reduce((p,g)=>p+(g?1:0),d);const u=this.size*this.size,h=Math.ceil(Math.abs(d*20-u*10)/u)-1;return n(0<=h&&h<=9),c+=h*dr.PENALTY_N4,n(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let u=[6];for(let h=this.size-7;u.length<c;h-=d)u.splice(1,0,h);return u}}static getNumRawDataModules(c){if(c<dr.MIN_VERSION||c>dr.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*c+128)*c+64;if(c>=2){const u=Math.floor(c/7)+2;d-=(25*u-10)*u-55,c>=7&&(d-=36)}return n(208<=d&&d<=29648),d}static getNumDataCodewords(c,d){return Math.floor(dr.getNumRawDataModules(c)/8)-dr.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c]*dr.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let d=[];for(let h=0;h<c-1;h++)d.push(0);d.push(1);let u=1;for(let h=0;h<c;h++){for(let f=0;f<d.length;f++)d[f]=dr.reedSolomonMultiply(d[f],u),f+1<d.length&&(d[f]^=d[f+1]);u=dr.reedSolomonMultiply(u,2)}return d}static reedSolomonComputeRemainder(c,d){let u=d.map(h=>0);for(const h of c){const f=h^u.shift();u.push(0),d.forEach((p,g)=>u[g]^=dr.reedSolomonMultiply(p,f))}return u}static reedSolomonMultiply(c,d){if(c>>>8||d>>>8)throw new RangeError("Byte out of range");let u=0;for(let h=7;h>=0;h--)u=u<<1^(u>>>7)*285,u^=(d>>>h&1)*c;return n(u>>>8==0),u}finderPenaltyCountPatterns(c){const d=c[1];n(d<=this.size*3);const u=d>0&&c[2]==d&&c[3]==d*3&&c[4]==d&&c[5]==d;return(u&&c[0]>=d*4&&c[6]>=d?1:0)+(u&&c[6]>=d*4&&c[0]>=d?1:0)}finderPenaltyTerminateAndCount(c,d,u){return c&&(this.finderPenaltyAddHistory(d,u),d=0),d+=this.size,this.finderPenaltyAddHistory(d,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(c,d){d[0]==0&&(c+=this.size),d.pop(),d.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a.QrCode=e;function t(l,c,d){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let u=c-1;u>=0;u--)d.push(l>>>u&1)}function r(l,c){return(l>>>c&1)!=0}function n(l){if(!l)throw new Error("Assertion error")}const i=class Dn{constructor(c,d,u){if(this.mode=c,this.numChars=d,this.bitData=u,d<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(c){let d=[];for(const u of c)t(u,8,d);return new Dn(Dn.Mode.BYTE,c.length,d)}static makeNumeric(c){if(!Dn.isNumeric(c))throw new RangeError("String contains non-numeric characters");let d=[];for(let u=0;u<c.length;){const h=Math.min(c.length-u,3);t(parseInt(c.substring(u,u+h),10),h*3+1,d),u+=h}return new Dn(Dn.Mode.NUMERIC,c.length,d)}static makeAlphanumeric(c){if(!Dn.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],u;for(u=0;u+2<=c.length;u+=2){let h=Dn.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u))*45;h+=Dn.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u+1)),t(h,11,d)}return u<c.length&&t(Dn.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u)),6,d),new Dn(Dn.Mode.ALPHANUMERIC,c.length,d)}static makeSegments(c){return c==""?[]:Dn.isNumeric(c)?[Dn.makeNumeric(c)]:Dn.isAlphanumeric(c)?[Dn.makeAlphanumeric(c)]:[Dn.makeBytes(Dn.toUtf8ByteArray(c))]}static makeEci(c){let d=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)t(c,8,d);else if(c<16384)t(2,2,d),t(c,14,d);else if(c<1e6)t(6,3,d),t(c,21,d);else throw new RangeError("ECI assignment value out of range");return new Dn(Dn.Mode.ECI,0,d)}static isNumeric(c){return Dn.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return Dn.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,d){let u=0;for(const h of c){const f=h.mode.numCharCountBits(d);if(h.numChars>=1<<f)return 1/0;u+=4+f+h.bitData.length}return u}static toUtf8ByteArray(c){c=encodeURI(c);let d=[];for(let u=0;u<c.length;u++)c.charAt(u)!="%"?d.push(c.charCodeAt(u)):(d.push(parseInt(c.substring(u+1,u+3),16)),u+=2);return d}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=i;a.QrSegment=i})(u0||(u0={}));(a=>{(e=>{const t=class{constructor(n,i){this.ordinal=n,this.formatBits=i}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(a.QrCode||(a.QrCode={}))})(u0||(u0={}));(a=>{(e=>{const t=class{constructor(n,i){this.modeBits=n,this.numBitsCharCount=i}numCharCountBits(n){return this.numBitsCharCount[Math.floor((n+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(a.QrSegment||(a.QrSegment={}))})(u0||(u0={}));var Yp=u0;var eae={L:Yp.QrCode.Ecc.LOW,M:Yp.QrCode.Ecc.MEDIUM,Q:Yp.QrCode.Ecc.QUARTILE,H:Yp.QrCode.Ecc.HIGH},kH=128,CH="L",AH="#FFFFFF",TH="#000000",MH=!1,EH=1,tae=4,aae=0,rae=.1;function DH(a,e=0){const t=[];return a.forEach(function(r,n){let i=null;r.forEach(function(o,l){if(!o&&i!==null){t.push(`M${i+e} ${n+e}h${l-i}v1H${i+e}z`),i=null;return}if(l===r.length-1){if(!o)return;i===null?t.push(`M${l+e},${n+e} h1v1H${l+e}z`):t.push(`M${i+e},${n+e} h${l+1-i}v1H${i+e}z`);return}o&&i===null&&(i=l)})}),t.join("")}function IH(a,e){return a.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((n,i)=>i<e.x||i>=e.x+e.w?n:!1))}function nae(a,e,t,r){if(r==null)return null;const n=a.length+t*2,i=Math.floor(e*rae),o=n/e,l=(r.width||i)*o,c=(r.height||i)*o,d=r.x==null?a.length/2-l/2:r.x*o,u=r.y==null?a.length/2-c/2:r.y*o,h=r.opacity==null?1:r.opacity;let f=null;if(r.excavate){let g=Math.floor(d),b=Math.floor(u),w=Math.ceil(l+d-g),_=Math.ceil(c+u-b);f={x:g,y:b,w,h:_}}const p=r.crossOrigin;return{x:d,y:u,h:c,w:l,excavation:f,opacity:h,crossOrigin:p}}function iae(a,e){return e!=null?Math.max(Math.floor(e),0):a?tae:aae}function RH({value:a,level:e,minVersion:t,includeMargin:r,marginSize:n,imageSettings:i,size:o,boostLevel:l}){let c=vr.useMemo(()=>{const g=(Array.isArray(a)?a:[a]).reduce((b,w)=>(b.push(...Yp.QrSegment.makeSegments(w)),b),[]);return Yp.QrCode.encodeSegments(g,eae[e],t,void 0,void 0,l)},[a,e,t,l]);const{cells:d,margin:u,numCells:h,calculatedImageSettings:f}=vr.useMemo(()=>{let p=c.getModules();const g=iae(r,n),b=p.length+g*2,w=nae(p,o,g,i);return{cells:p,margin:g,numCells:b,calculatedImageSettings:w}},[c,o,i,r,n]);return{qrcode:c,margin:u,cells:d,numCells:h,calculatedImageSettings:f}}var sae=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),oae=vr.forwardRef(function(e,t){const r=e,{value:n,size:i=kH,level:o=CH,bgColor:l=AH,fgColor:c=TH,includeMargin:d=MH,minVersion:u=EH,boostLevel:h,marginSize:f,imageSettings:p}=r,b=VC(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:w}=b,_=VC(b,["style"]),k=p?.src,T=vr.useRef(null),D=vr.useRef(null),I=vr.useCallback(U=>{T.current=U,typeof t=="function"?t(U):t&&(t.current=U)},[t]),[O,P]=vr.useState(!1),{margin:V,cells:G,numCells:Q,calculatedImageSettings:$}=RH({value:n,level:o,minVersion:u,boostLevel:h,includeMargin:d,marginSize:f,imageSettings:p,size:i});vr.useEffect(()=>{if(T.current!=null){const U=T.current,F=U.getContext("2d");if(!F)return;let W=G;const K=D.current,ee=$!=null&&K!==null&&K.complete&&K.naturalHeight!==0&&K.naturalWidth!==0;ee&&$.excavation!=null&&(W=IH(G,$.excavation));const ne=window.devicePixelRatio||1;U.height=U.width=i*ne;const re=i/Q*ne;F.scale(re,re),F.fillStyle=l,F.fillRect(0,0,Q,Q),F.fillStyle=c,sae?F.fill(new Path2D(DH(W,V))):G.forEach(function(Z,ie){Z.forEach(function(de,fe){de&&F.fillRect(fe+V,ie+V,1,1)})}),$&&(F.globalAlpha=$.opacity),ee&&F.drawImage(K,$.x+V,$.y+V,$.w,$.h)}}),vr.useEffect(()=>{P(!1)},[k]);const ae=FC({height:i,width:i},w);let J=null;return k!=null&&(J=vr.createElement("img",{src:k,key:k,style:{display:"none"},onLoad:()=>{P(!0)},ref:D,crossOrigin:$?.crossOrigin})),vr.createElement(vr.Fragment,null,vr.createElement("canvas",FC({style:ae,height:i,width:i,ref:I,role:"img"},_)),J)});oae.displayName="QRCodeCanvas";var vb=vr.forwardRef(function(e,t){const r=e,{value:n,size:i=kH,level:o=CH,bgColor:l=AH,fgColor:c=TH,includeMargin:d=MH,minVersion:u=EH,boostLevel:h,title:f,marginSize:p,imageSettings:g}=r,b=VC(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:w,cells:_,numCells:k,calculatedImageSettings:T}=RH({value:n,level:o,minVersion:u,boostLevel:h,includeMargin:d,marginSize:p,imageSettings:g,size:i});let D=_,I=null;g!=null&&T!=null&&(T.excavation!=null&&(D=IH(_,T.excavation)),I=vr.createElement("image",{href:g.src,height:T.h,width:T.w,x:T.x+w,y:T.y+w,preserveAspectRatio:"none",opacity:T.opacity,crossOrigin:T.crossOrigin}));const O=DH(D,w);return vr.createElement("svg",FC({height:i,width:i,viewBox:`0 0 ${k} ${k}`,ref:t,role:"img"},b),!!f&&vr.createElement("title",null,f),vr.createElement("path",{fill:l,d:`M0,0 h${k}v${k}H0z`,shapeRendering:"crispEdges"}),vr.createElement("path",{fill:c,d:O,shapeRendering:"crispEdges"}),I)});vb.displayName="QRCodeSVG";var Cw={exports:{}},lae=Cw.exports,R8;function LH(){return R8||(R8=1,(function(a,e){(function(t,r){a.exports=r()})(lae,(function(){var t=1e3,r=6e4,n=36e5,i="millisecond",o="second",l="minute",c="hour",d="day",u="week",h="month",f="quarter",p="year",g="date",b="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,k={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(U){var F=["th","st","nd","rd"],W=U%100;return"["+U+(F[(W-20)%10]||F[W]||F[0])+"]"}},T=function(U,F,W){var K=String(U);return!K||K.length>=F?U:""+Array(F+1-K.length).join(W)+U},D={s:T,z:function(U){var F=-U.utcOffset(),W=Math.abs(F),K=Math.floor(W/60),ee=W%60;return(F<=0?"+":"-")+T(K,2,"0")+":"+T(ee,2,"0")},m:function U(F,W){if(F.date()<W.date())return-U(W,F);var K=12*(W.year()-F.year())+(W.month()-F.month()),ee=F.clone().add(K,h),ne=W-ee<0,re=F.clone().add(K+(ne?-1:1),h);return+(-(K+(W-ee)/(ne?ee-re:re-ee))||0)},a:function(U){return U<0?Math.ceil(U)||0:Math.floor(U)},p:function(U){return{M:h,y:p,w:u,d,D:g,h:c,m:l,s:o,ms:i,Q:f}[U]||String(U||"").toLowerCase().replace(/s$/,"")},u:function(U){return U===void 0}},I="en",O={};O[I]=k;var P="$isDayjsObject",V=function(U){return U instanceof ae||!(!U||!U[P])},G=function U(F,W,K){var ee;if(!F)return I;if(typeof F=="string"){var ne=F.toLowerCase();O[ne]&&(ee=ne),W&&(O[ne]=W,ee=ne);var re=F.split("-");if(!ee&&re.length>1)return U(re[0])}else{var Z=F.name;O[Z]=F,ee=Z}return!K&&ee&&(I=ee),ee||!K&&I},Q=function(U,F){if(V(U))return U.clone();var W=typeof F=="object"?F:{};return W.date=U,W.args=arguments,new ae(W)},$=D;$.l=G,$.i=V,$.w=function(U,F){return Q(U,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var ae=(function(){function U(W){this.$L=G(W.locale,null,!0),this.parse(W),this.$x=this.$x||W.x||{},this[P]=!0}var F=U.prototype;return F.parse=function(W){this.$d=(function(K){var ee=K.date,ne=K.utc;if(ee===null)return new Date(NaN);if($.u(ee))return new Date;if(ee instanceof Date)return new Date(ee);if(typeof ee=="string"&&!/Z$/i.test(ee)){var re=ee.match(w);if(re){var Z=re[2]-1||0,ie=(re[7]||"0").substring(0,3);return ne?new Date(Date.UTC(re[1],Z,re[3]||1,re[4]||0,re[5]||0,re[6]||0,ie)):new Date(re[1],Z,re[3]||1,re[4]||0,re[5]||0,re[6]||0,ie)}}return new Date(ee)})(W),this.init()},F.init=function(){var W=this.$d;this.$y=W.getFullYear(),this.$M=W.getMonth(),this.$D=W.getDate(),this.$W=W.getDay(),this.$H=W.getHours(),this.$m=W.getMinutes(),this.$s=W.getSeconds(),this.$ms=W.getMilliseconds()},F.$utils=function(){return $},F.isValid=function(){return this.$d.toString()!==b},F.isSame=function(W,K){var ee=Q(W);return this.startOf(K)<=ee&&ee<=this.endOf(K)},F.isAfter=function(W,K){return Q(W)<this.startOf(K)},F.isBefore=function(W,K){return this.endOf(K)<Q(W)},F.$g=function(W,K,ee){return $.u(W)?this[K]:this.set(ee,W)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(W,K){var ee=this,ne=!!$.u(K)||K,re=$.p(W),Z=function(Ce,we){var xe=$.w(ee.$u?Date.UTC(ee.$y,we,Ce):new Date(ee.$y,we,Ce),ee);return ne?xe:xe.endOf(d)},ie=function(Ce,we){return $.w(ee.toDate()[Ce].apply(ee.toDate("s"),(ne?[0,0,0,0]:[23,59,59,999]).slice(we)),ee)},de=this.$W,fe=this.$M,he=this.$D,ve="set"+(this.$u?"UTC":"");switch(re){case p:return ne?Z(1,0):Z(31,11);case h:return ne?Z(1,fe):Z(0,fe+1);case u:var Oe=this.$locale().weekStart||0,Se=(de<Oe?de+7:de)-Oe;return Z(ne?he-Se:he+(6-Se),fe);case d:case g:return ie(ve+"Hours",0);case c:return ie(ve+"Minutes",1);case l:return ie(ve+"Seconds",2);case o:return ie(ve+"Milliseconds",3);default:return this.clone()}},F.endOf=function(W){return this.startOf(W,!1)},F.$set=function(W,K){var ee,ne=$.p(W),re="set"+(this.$u?"UTC":""),Z=(ee={},ee[d]=re+"Date",ee[g]=re+"Date",ee[h]=re+"Month",ee[p]=re+"FullYear",ee[c]=re+"Hours",ee[l]=re+"Minutes",ee[o]=re+"Seconds",ee[i]=re+"Milliseconds",ee)[ne],ie=ne===d?this.$D+(K-this.$W):K;if(ne===h||ne===p){var de=this.clone().set(g,1);de.$d[Z](ie),de.init(),this.$d=de.set(g,Math.min(this.$D,de.daysInMonth())).$d}else Z&&this.$d[Z](ie);return this.init(),this},F.set=function(W,K){return this.clone().$set(W,K)},F.get=function(W){return this[$.p(W)]()},F.add=function(W,K){var ee,ne=this;W=Number(W);var re=$.p(K),Z=function(fe){var he=Q(ne);return $.w(he.date(he.date()+Math.round(fe*W)),ne)};if(re===h)return this.set(h,this.$M+W);if(re===p)return this.set(p,this.$y+W);if(re===d)return Z(1);if(re===u)return Z(7);var ie=(ee={},ee[l]=r,ee[c]=n,ee[o]=t,ee)[re]||1,de=this.$d.getTime()+W*ie;return $.w(de,this)},F.subtract=function(W,K){return this.add(-1*W,K)},F.format=function(W){var K=this,ee=this.$locale();if(!this.isValid())return ee.invalidDate||b;var ne=W||"YYYY-MM-DDTHH:mm:ssZ",re=$.z(this),Z=this.$H,ie=this.$m,de=this.$M,fe=ee.weekdays,he=ee.months,ve=ee.meridiem,Oe=function(we,xe,be,Ee){return we&&(we[xe]||we(K,ne))||be[xe].slice(0,Ee)},Se=function(we){return $.s(Z%12||12,we,"0")},Ce=ve||function(we,xe,be){var Ee=we<12?"AM":"PM";return be?Ee.toLowerCase():Ee};return ne.replace(_,(function(we,xe){return xe||(function(be){switch(be){case"YY":return String(K.$y).slice(-2);case"YYYY":return $.s(K.$y,4,"0");case"M":return de+1;case"MM":return $.s(de+1,2,"0");case"MMM":return Oe(ee.monthsShort,de,he,3);case"MMMM":return Oe(he,de);case"D":return K.$D;case"DD":return $.s(K.$D,2,"0");case"d":return String(K.$W);case"dd":return Oe(ee.weekdaysMin,K.$W,fe,2);case"ddd":return Oe(ee.weekdaysShort,K.$W,fe,3);case"dddd":return fe[K.$W];case"H":return String(Z);case"HH":return $.s(Z,2,"0");case"h":return Se(1);case"hh":return Se(2);case"a":return Ce(Z,ie,!0);case"A":return Ce(Z,ie,!1);case"m":return String(ie);case"mm":return $.s(ie,2,"0");case"s":return String(K.$s);case"ss":return $.s(K.$s,2,"0");case"SSS":return $.s(K.$ms,3,"0");case"Z":return re}return null})(we)||re.replace(":","")}))},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(W,K,ee){var ne,re=this,Z=$.p(K),ie=Q(W),de=(ie.utcOffset()-this.utcOffset())*r,fe=this-ie,he=function(){return $.m(re,ie)};switch(Z){case p:ne=he()/12;break;case h:ne=he();break;case f:ne=he()/3;break;case u:ne=(fe-de)/6048e5;break;case d:ne=(fe-de)/864e5;break;case c:ne=fe/n;break;case l:ne=fe/r;break;case o:ne=fe/t;break;default:ne=fe}return ee?ne:$.a(ne)},F.daysInMonth=function(){return this.endOf(h).$D},F.$locale=function(){return O[this.$L]},F.locale=function(W,K){if(!W)return this.$L;var ee=this.clone(),ne=G(W,K,!0);return ne&&(ee.$L=ne),ee},F.clone=function(){return $.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},U})(),J=ae.prototype;return Q.prototype=J,[["$ms",i],["$s",o],["$m",l],["$H",c],["$W",d],["$M",h],["$y",p],["$D",g]].forEach((function(U){J[U[1]]=function(F){return this.$g(F,U[0],U[1])}})),Q.extend=function(U,F){return U.$i||(U(F,ae,Q),U.$i=!0),Q},Q.locale=G,Q.isDayjs=V,Q.unix=function(U){return Q(1e3*U)},Q.en=O[I],Q.Ls=O,Q.p={},Q}))})(Cw)),Cw.exports}var cae=LH();const ea=MA(cae),El=(a,e=3e3)=>{const t=document.getElementById("print-mount-point");if(!t){console.error(" Print mount point not found."),window.print();return}const r=document.documentElement,n=window.__MYCELIUM_MOBILE__,i=r.style.backgroundColor,o=r.style.colorScheme,l=document.querySelector('meta[name="color-scheme"]'),c=document.createElement("style");c.id="print-enforcer",c.textContent=`
        @media print {
            html, body { background: white !important; margin: 0; padding: 0; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
            #root, #app-root, .tauri-drag-region, .no-print { display: none !important; }
            #print-mount-point { 
                display: block !important; 
                position: absolute !important; 
                top: 0 !important; 
                left: 0 !important; 
                width: 100% !important; 
                min-height: 100vh !important;
                z-index: 99999 !important; 
                background: white !important;
                visibility: visible !important;
            }
            #print-mount-point * { visibility: visible !important; }
        }
    `,document.head.appendChild(c),t.innerHTML=a;const d=u=>{u.style&&u.style.display==="none"&&(u.style.display=""),u.children&&Array.from(u.children).forEach(d)};d(t),r.classList.add("printing-active"),t.classList.remove("hidden"),setTimeout(()=>{window.print(),setTimeout(()=>{c.parentNode&&c.parentNode.removeChild(c),t.innerHTML="",t.classList.add("hidden"),r.classList.remove("printing-active"),r.style.backgroundColor=i,r.style.colorScheme=o,l&&(l.content=n?"light":"dark")},1e3)},1e3)},OH=(a,e)=>{let t=e;typeof e=="string"&&e.includes("===")&&(t=e.split("===").map((n,i)=>`
            <div class="report-section ${i===0?"first":""}">
                ${n.trim().replace(/\n/g,"<br/>")}
            </div>
        `).join(""));const r=`
        <div class="print-container" style="background: white !important; color: #1e293b !important; padding: 20px;">
            <style>
                @page { size: A4; margin: 15mm; }
                .print-container { font-family: 'Pretendard', 'Inter', sans-serif; line-height: 1.6; }
                .print-header { text-align: center; margin-bottom: 40px; border-bottom: 2px solid #334155; padding-bottom: 20px; }
                .print-header h1 { margin: 0; font-size: 28px; font-weight: 800; color: #0f172a !important; }
                .print-header .date { font-size: 11px; color: #64748b !important; margin-top: 8px; font-weight: bold; }
                .content { font-size: 14px; white-space: pre-wrap; font-weight: 500; color: #1e293b !important; }
                .report-section { margin-bottom: 25px; padding: 15px; background: #f8fafc !important; border-radius: 12px; border: 1px solid #e2e8f0 !important; }
                .report-section.first { border-left: 5px solid #6366f1 !important; }
                .footer { margin-top: 50px; text-align: center; font-size: 10px; color: #94a3b8 !important; border-top: 1px solid #f1f5f9 !important; padding-top: 20px; }
                
                @media print {
                    @page { margin: 15mm; }
                    html, body { 
                        background: white !important; 
                        color: #1e293b !important;
                        color-scheme: light !important;
                        -webkit-print-color-adjust: exact;
                        print-color-adjust: exact;
                    }
                    #root, #app-root { display: none !important; }
                    .print-container { background: white !important; width: 100% !important; margin: 0 !important; }
                    .report-section { background: #f8fafc !important; -webkit-print-color-adjust: exact; }
                }
            </style>
            <div class="print-header">
                <h1>${a}</h1>
                <div class="date">REPORTED ON ${ea().format("YYYY. MM. DD. HH:mm")}</div>
            </div>
            <div class="content">${t}</div>
            <div class="footer">  Mycelium Intelligence System    .</div>
        </div>
    `;El(r)},HC="mycelium-trigger-print",O_=(a,e)=>{console.log("[Jenny-Printer]  Isolated print requested:",a),window.dispatchEvent(new CustomEvent(HC,{detail:{type:a,data:e}}))};window.__MYCELIUM_PRINT__=(a,e)=>{O_(a,e)};const L8=()=>{const[a,e]=H.useState(null),t=H.useRef(null);H.useEffect(()=>{const n=i=>{const{type:o,data:l}=i.detail;e({type:o,data:l})};return window.addEventListener(HC,n),console.log("[Jenny-Printer]  Isolated Sandbox Printer Mounted"),()=>window.removeEventListener(HC,n)},[]),H.useEffect(()=>{if(a){const n=setTimeout(()=>{try{r(a)}catch(i){console.error("[Jenny-Printer]  Print Failed:",i)}finally{e(null)}},300);return()=>clearTimeout(n)}},[a]);const r=n=>{const i=t.current?.innerHTML||"";console.log("[Jenny-Printer]  Building Isolated Print Sandbox...");const o=`
                <style>
                    @page {
                        size: 40mm 30mm;
                        margin: 0;
                    }
                    .label-print-wrapper {
                        margin: 0;
                        padding: 0;
                        width: 40mm;
                        height: 30mm;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        overflow: hidden;
                        font-family: 'Inter', system-ui, sans-serif;
                    }
                    .label-container {
                        width: 38mm;
                        height: 28mm;
                        display: flex;
                        align-items: center;
                        gap: 2mm;
                        padding: 1mm;
                        box-sizing: border-box;
                    }
                    .qr-section {
                        width: 16mm;
                        height: 16mm;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    }
                    .qr-section svg {
                        width: 100% !important;
                        height: 100% !important;
                    }
                    .data-section {
                        flex: 1;
                        display: flex;
                        flex-direction: column;
                        justify-content: center;
                        height: 100%;
                        padding-left: 1mm;
                    }
                    .data-row {
                        display: flex;
                        align-items: center;
                        padding: 3px 0;
                        font-size: 11px;
                        font-weight: 800;
                        color: #000;
                        line-height: 1.1;
                    }
                    .data-label {
                        white-space: nowrap;
                        margin-right: 4px;
                        color: #000;
                    }
                    .data-value {
                        word-break: break-all;
                        overflow: hidden;
                        display: -webkit-box;
                        -webkit-line-clamp: 2;
                        -webkit-box-orient: vertical;
                        color: #000;
                    }
                </style>
                <div class="label-print-wrapper">
                    <div class="label-container">
                        <div class="qr-section">
                            ${i}
                        </div>
                        <div class="data-section">
                            <div class="data-row">
                                <span class="data-label">&nbsp;&nbsp;&nbsp;:</span>
                                <span class="data-value">${n.data.title||"-"}</span>
                            </div>
                            ${n.type==="product"?`
                            <div class="data-row">
                                <span class="data-label">&nbsp;&nbsp;&nbsp;:</span>
                                <span class="data-value">${n.data.spec||"-"}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">&nbsp;&nbsp;&nbsp;:</span>
                                <span class="data-value">${(n.data.price||0).toLocaleString()}</span>
                            </div>
                            `:`
                            <div class="data-row">
                                <span class="data-label">&nbsp;&nbsp;&nbsp;:</span>
                                <span class="data-value">${n.data.date||"-"}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">&nbsp;&nbsp;&nbsp;:</span>
                                <span class="data-value">${n.data.weight||"-"}kg</span>
                            </div>
                            `}
                        </div>
                    </div>
                </div>
        `;El(o)};return s.jsx("div",{id:"isolated-qr-factory",style:{position:"fixed",left:"-9999px",top:"-9999px",visibility:"hidden",pointerEvents:"none"},children:s.jsx("div",{ref:t,children:a&&s.jsx(vb,{value:a.data.qrValue||"N/A",size:128,level:"H",includeMargin:!1})})})},dae=({isMobile:a})=>a?s.jsxs("div",{className:"fixed inset-0 bg-slate-50 flex flex-col overflow-hidden",children:[s.jsx("main",{className:"flex-1 w-full relative overflow-y-auto",children:s.jsx(hx,{})}),s.jsx(L8,{})]}):s.jsxs("div",{className:"flex h-screen w-screen overflow-hidden bg-slate-950",children:[s.jsx(Qte,{}),s.jsx("main",{className:"flex-1 relative overflow-hidden flex flex-col bg-slate-50",children:s.jsx("div",{className:"flex-1 relative min-h-0 h-full",children:s.jsx(hx,{})})}),s.jsx(L8,{})]}),O8=({onComplete:a})=>{const{showAlert:e}=Na(),[t,r]=H.useState("postgres"),[n,i]=H.useState(""),[o,l]=H.useState("localhost"),[c,d]=H.useState("5432"),[u,h]=H.useState("mycelium"),[f,p]=H.useState(""),[g,b]=H.useState(!1),[w,_]=H.useState(1),k=async T=>{T.preventDefault(),b(!0);try{const D=await fetch("/api/setup/system",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dbUser:t,dbPass:n,dbHost:o,dbPort:c,dbName:u,geminiKey:f||null})});if(!D.ok){const I=await D.json();throw new Error(I.error||I.message||"Setup failed")}await e(" ","  .      ."),a?a():window.location.reload()}catch(D){console.error(D),await e(" ",D.message||"    .")}finally{b(!1)}};return s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 animate-in fade-in duration-500",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-md"}),s.jsxs("div",{className:"w-full max-w-2xl bg-slate-900/90 backdrop-blur-3xl border border-slate-700/50 rounded-[48px] p-12 shadow-2xl relative z-10 animate-in zoom-in-95 duration-500 slide-in-from-bottom-4",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[400px] h-[400px] bg-indigo-500/20 blur-[100px] rounded-full pointer-events-none"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[400px] h-[400px] bg-purple-500/20 blur-[100px] rounded-full pointer-events-none"}),s.jsx("button",{onClick:async()=>{window.confirm("   ?")&&window.close()},className:"absolute top-8 right-8 w-10 h-10 rounded-xl bg-slate-800/50 border border-slate-700 text-slate-500 hover:text-rose-500 hover:bg-rose-500/10 hover:border-rose-500/20 transition-all flex items-center justify-center z-20",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"close"})}),s.jsxs("div",{className:"text-center mb-12 relative z-10",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-indigo-500/20 rotate-3 ring-4 ring-slate-900/50",children:s.jsx("span",{className:"material-symbols-rounded text-white text-4xl",children:"auto_fix_high"})}),s.jsx("h1",{className:"text-4xl font-black text-white mb-3 tracking-tight",children:"System Setup"}),s.jsx("p",{className:"text-slate-400 font-medium",children:"     ."})]}),s.jsx("div",{className:"flex gap-4 mb-10 justify-center relative z-10",children:[1,2].map(T=>s.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${w>=T?"w-12 bg-indigo-500":"w-6 bg-slate-800"}`},T))}),s.jsx("form",{onSubmit:k,className:"relative z-10",children:w===1?s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-300",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:" "}),s.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"PostgreSQL    ."}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:" (Host)"}),s.jsx("input",{type:"text",value:o,onChange:T=>l(T.target.value),className:"w-full rounded-2xl px-5 py-3.5 outline-none focus:border-indigo-500 transition-all",style:{backgroundColor:"#020617",color:"#ffffff",border:"1px solid #334155"}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:" (Port)"}),s.jsx("input",{type:"text",value:c,onChange:T=>d(T.target.value),className:"w-full rounded-2xl px-5 py-3.5 outline-none focus:border-indigo-500 transition-all",style:{backgroundColor:"#020617",color:"#ffffff",border:"1px solid #334155"}})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:"  (DB Name)"}),s.jsx("input",{type:"text",value:u,onChange:T=>h(T.target.value),className:"w-full rounded-2xl px-5 py-3.5 outline-none focus:border-indigo-500 transition-all",style:{backgroundColor:"#020617",color:"#ffffff",border:"1px solid #334155"},placeholder:": mycelium"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:" ID"}),s.jsx("input",{type:"text",value:t,onChange:T=>r(T.target.value),className:"w-full rounded-2xl px-5 py-3.5 outline-none focus:border-indigo-500 transition-all",style:{backgroundColor:"#020617",color:"#ffffff",border:"1px solid #334155"}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:""}),s.jsx("input",{type:"password",value:n,onChange:T=>i(T.target.value),className:"w-full rounded-2xl px-5 py-3.5 outline-none focus:border-indigo-500 transition-all",style:{backgroundColor:"#020617",color:"#ffffff",border:"1px solid #334155"},placeholder:""})]})]})]}),s.jsxs("button",{type:"button",onClick:()=>_(2),className:"w-full bg-white text-slate-950 font-black py-4 rounded-2xl hover:bg-slate-200 transition-all shadow-xl shadow-white/5 flex items-center justify-center gap-2 group",children:["  ",s.jsx("span",{className:"material-symbols-rounded group-hover:translate-x-1 transition-transform",children:"arrow_forward"})]})]}):s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-300",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"  ()"}),s.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Gemini API   AI   ."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:"Gemini API Key"}),s.jsx("input",{type:"text",value:f,onChange:T=>p(T.target.value),className:"w-full rounded-2xl px-5 py-3.5 outline-none focus:border-indigo-500 transition-all",style:{backgroundColor:"#020617",color:"#ffffff",border:"1px solid #334155"},placeholder:" (  )"}),s.jsx("style",{children:`
                                        input:-webkit-autofill,
                                        input:-webkit-autofill:hover, 
                                        input:-webkit-autofill:focus, 
                                        input:-webkit-autofill:active {
                                            -webkit-box-shadow: 0 0 0 30px #020617 inset !important;
                                            -webkit-text-fill-color: white !important;
                                            caret-color: white !important;
                                        }
                                    `})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{type:"button",onClick:()=>_(1),className:"flex-1 bg-slate-800 text-white font-bold py-4 rounded-2xl hover:bg-slate-700 transition-all",children:""}),s.jsx("button",{type:"submit",disabled:g,className:"flex-[2] bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-black py-4 rounded-2xl hover:brightness-110 active:scale-[0.98] transition-all shadow-xl shadow-indigo-500/20 flex items-center justify-center gap-2",children:g?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"material-symbols-rounded animate-spin",children:"sync"}),"  ..."]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"material-symbols-rounded",children:"rocket_launch"}),"  "]})})]})]})}),s.jsx("div",{className:"mt-12 pt-8 border-t border-slate-800/50 text-center relative z-10",children:s.jsx("p",{className:"text-[11px] text-slate-600 font-bold uppercase tracking-widest",children:" 2024 Mycelium  Enterprise Edition"})})]})]})},P8=({onLoginSuccess:a})=>{const[e,t]=H.useState(""),[r,n]=H.useState(""),[i,o]=H.useState(!1),[l,c]=H.useState(""),[d,u]=H.useState("");H.useEffect(()=>{sessionStorage.clear(),(async()=>{try{const p=await Pa("get_company_info");p&&p.company_name&&u(p.company_name)}catch(p){console.error("Failed to load company name:",p)}})()},[]);const h=async f=>{if(f.preventDefault(),c(""),!e||!r){c("   .");return}o(!0);try{if(window.location.pathname.startsWith("/mobile-")){console.log("Mobile browser detected. Entering Preview Mode."),sessionStorage.setItem("isLoggedIn","true"),sessionStorage.setItem("userId","999"),sessionStorage.setItem("username","MobilePreview"),sessionStorage.setItem("userRole","admin"),a?a():window.location.reload();return}const p=await Pa("login",{username:e.trim(),password:r.trim()});p.success?(sessionStorage.setItem("isLoggedIn","true"),sessionStorage.setItem("userId",p.user_id.toString()),sessionStorage.setItem("username",p.username),sessionStorage.setItem("userRole",p.role),sessionStorage.setItem("uiMode",p.ui_mode||"pro"),a?a():window.location.reload()):c(p.message||" .")}catch(p){console.error("Login error:",p),c("    .")}finally{o(!1)}};return s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 animate-in fade-in duration-500",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-md"}),s.jsx("div",{style:{width:"100%",maxWidth:"440px",zIndex:10,position:"relative"},className:"animate-in zoom-in-95 duration-500 slide-in-from-bottom-4",children:s.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.7)",backdropFilter:"blur(24px)",WebkitBackdropFilter:"blur(24px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"40px",padding:"56px 48px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",display:"flex",flexDirection:"column",position:"relative"},children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/20 blur-[50px] rounded-full pointer-events-none"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-purple-500/20 blur-[50px] rounded-full pointer-events-none"}),s.jsx("button",{type:"button",onClick:async()=>{window.confirm(" ( )?")&&window.close()},style:{position:"absolute",top:"24px",right:"24px",background:"#fff",border:"1px solid #e2e8f0",width:"40px",height:"40px",borderRadius:"12px",color:"#6366f1",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s",zIndex:200,boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},className:"hover:scale-110 active:scale-95",title:" ",children:s.jsx("span",{className:"material-symbols-rounded",style:{fontSize:"20px",fontWeight:"bold"},children:"close"})}),s.jsxs("div",{style:{textAlign:"center",marginBottom:"48px",position:"relative",zIndex:10},children:[s.jsx("div",{style:{width:"88px",height:"88px",background:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)",borderRadius:"28px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 28px",boxShadow:"0 20px 40px rgba(99, 102, 241, 0.3)",transform:"rotate(-5deg)"},children:s.jsx("span",{className:"material-symbols-rounded",style:{fontSize:"48px",color:"#fff"},children:"space_dashboard"})}),s.jsx("h1",{style:{fontSize:"32px",fontWeight:"900",color:"#fff",marginBottom:"12px",letterSpacing:"-0.02em"},children:d}),s.jsx("p",{style:{color:"#94a3b8",fontSize:"15px",fontWeight:"500"},children:"   "})]}),s.jsxs("form",{onSubmit:h,style:{display:"flex",flexDirection:"column",gap:"20px",position:"relative",zIndex:10},children:[s.jsxs("div",{style:{position:"relative"},children:[s.jsx("span",{className:"material-symbols-rounded",style:{position:"absolute",left:"20px",top:"50%",transform:"translateY(-50%)",color:"#64748b",fontSize:"22px"},children:"person"}),s.jsx("input",{type:"text",placeholder:"",value:e,onChange:f=>t(f.target.value),style:{width:"100%",padding:"18px 20px 18px 60px",background:"#020617",border:"1px solid #334155",borderRadius:"20px",color:"#ffffff",fontSize:"16px",fontWeight:"500",outline:"none",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxSizing:"border-box"},className:"focus:border-indigo-500 transition-colors"})]}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("span",{className:"material-symbols-rounded",style:{position:"absolute",left:"20px",top:"50%",transform:"translateY(-50%)",color:"#64748b",fontSize:"22px"},children:"lock"}),s.jsx("input",{type:"password",placeholder:"",value:r,onChange:f=>n(f.target.value),style:{width:"100%",padding:"18px 20px 18px 60px",background:"#020617",border:"1px solid #334155",borderRadius:"20px",color:"#ffffff",fontSize:"16px",fontWeight:"500",outline:"none",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxSizing:"border-box"},className:"focus:border-indigo-500 transition-colors"}),s.jsx("style",{children:`
                                input:-webkit-autofill,
                                input:-webkit-autofill:hover, 
                                input:-webkit-autofill:focus, 
                                input:-webkit-autofill:active {
                                    -webkit-box-shadow: 0 0 0 30px #020617 inset !important;
                                    -webkit-text-fill-color: white !important;
                                    caret-color: white !important;
                                }
                            `})]}),l&&s.jsx("div",{style:{padding:"14px 20px",background:"rgba(239, 68, 68, 0.12)",color:"#f87171",borderRadius:"16px",fontSize:"14px",fontWeight:"500",textAlign:"center",border:"1px solid rgba(239, 68, 68, 0.2)"},className:"animate-pulse",children:l}),s.jsx("button",{type:"submit",disabled:i,style:{padding:"18px",background:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)",border:"none",borderRadius:"20px",color:"#fff",fontWeight:"800",fontSize:"17px",cursor:"pointer",marginTop:"16px",boxShadow:"0 12px 24px rgba(99, 102, 241, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},className:"hover:translate-y-[-2px] hover:shadow-indigo-500/50 active:translate-y-[0px] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:i?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"material-symbols-rounded animate-spin text-xl",children:"sync"}),s.jsx("span",{children:"  ..."})]}):s.jsx("span",{children:" "})})]}),s.jsxs("div",{style:{marginTop:"48px",textAlign:"center",fontSize:"14px",color:"#64748b",fontWeight:"500"},children:[s.jsx("p",{style:{opacity:.8},children:"   "}),s.jsxs("p",{style:{marginTop:"12px",opacity:.5,fontSize:"12px",letterSpacing:"0.05em"},children:[" 2024 ",d.toUpperCase(),"."]})]})]})})]})};const PH=(...a)=>a.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();const uae=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const hae=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());const B8=a=>{const e=hae(a);return e.charAt(0).toUpperCase()+e.slice(1)};var fae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const pae=a=>{for(const e in a)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const xae=H.forwardRef(({color:a="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:n="",children:i,iconNode:o,...l},c)=>H.createElement("svg",{ref:c,...fae,width:e,height:e,stroke:a,strokeWidth:r?Number(t)*24/Number(e):t,className:PH("lucide",n),...!i&&!pae(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>H.createElement(d,u)),...Array.isArray(i)?i:[i]]));const Ct=(a,e)=>{const t=H.forwardRef(({className:r,...n},i)=>H.createElement(xae,{ref:i,iconNode:e,className:PH(`lucide-${uae(B8(a))}`,`lucide-${a}`,r),...n}));return t.displayName=B8(a),t};const mae=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],fx=Ct("activity",mae);const gae=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],GA=Ct("arrow-left",gae);const vae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],WA=Ct("arrow-right",vae);const bae=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],z8=Ct("arrow-up-right",bae);const yae=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],zS=Ct("book-open",yae);const wae=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],BH=Ct("box",wae);const _ae=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],wv=Ct("boxes",_ae);const Nae=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],F8=Ct("brain-circuit",Nae);const jae=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Sae=Ct("building-2",jae);const kae=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],V8=Ct("calculator",kae);const Cae=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],zH=Ct("calendar-days",Cae);const Aae=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],jc=Ct("calendar",Aae);const Tae=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],UC=Ct("camera",Tae);const Mae=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],Eae=Ct("chef-hat",Mae);const Dae=[["path",{d:"M2 17a5 5 0 0 0 10 0c0-2.76-2.5-5-5-3-2.5-2-5 .24-5 3Z",key:"cvxqlc"}],["path",{d:"M12 17a5 5 0 0 0 10 0c0-2.76-2.5-5-5-3-2.5-2-5 .24-5 3Z",key:"1ostrc"}],["path",{d:"M7 14c3.22-2.91 4.29-8.75 5-12 1.66 2.38 4.94 9 5 12",key:"hqx58h"}],["path",{d:"M22 9c-4.29 0-7.14-2.33-10-7 5.71 0 10 4.67 10 7Z",key:"eykp1o"}]],H8=Ct("cherry",Dae);const Iae=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],i2=Ct("chevron-down",Iae);const Rae=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Lae=Ct("chevron-left",Rae);const Oae=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],s2=Ct("chevron-right",Oae);const Pae=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Bae=Ct("chevron-up",Pae);const zae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$A=Ct("circle-alert",zae);const Fae=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],FH=Ct("circle-check-big",Fae);const Vae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yi=Ct("circle-check",Vae);const Hae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Uae=Ct("circle-plus",Hae);const Gae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],U8=Ct("circle-question-mark",Gae);const Wae=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],$ae=Ct("clipboard-check",Wae);const Yae=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],hh=Ct("clipboard-list",Yae);const qae=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_v=Ct("clock",qae);const Xae=[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]],Zae=Ct("cloud-sun",Xae);const Kae=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],GC=Ct("cpu",Kae);const Qae=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],WC=Ct("credit-card",Qae);const Jae=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ere=Ct("database",Jae);const tre=[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]],are=Ct("delete",tre);const rre=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],VH=Ct("download",rre);const nre=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],ire=Ct("droplet",nre);const sre=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],h0=Ct("droplets",sre);const ore=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Tf=Ct("external-link",ore);const lre=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Su=Ct("eye-off",lre);const cre=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fd=Ct("eye",cre);const dre=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],YA=Ct("file-text",dre);const ure=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],P_=Ct("flask-conical",ure);const hre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Mg=Ct("globe",hre);const fre=[["path",{d:"M22 5V2l-5.89 5.89",key:"1eenpo"}],["circle",{cx:"16.6",cy:"15.89",r:"3",key:"xjtalx"}],["circle",{cx:"8.11",cy:"7.4",r:"3",key:"u2fv6i"}],["circle",{cx:"12.35",cy:"11.65",r:"3",key:"i6i8g7"}],["circle",{cx:"13.91",cy:"5.85",r:"3",key:"6ye0dv"}],["circle",{cx:"18.15",cy:"10.09",r:"3",key:"snx9no"}],["circle",{cx:"6.56",cy:"13.2",r:"3",key:"17x4xg"}],["circle",{cx:"10.8",cy:"17.44",r:"3",key:"1hogw9"}],["circle",{cx:"5",cy:"19",r:"3",key:"1sn6vo"}]],G8=Ct("grape",fre);const pre=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Vx=Ct("history",pre);const xre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],bb=Ct("info",xre);const mre=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],W8=Ct("layers",mre);const gre=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],o2=Ct("layout-dashboard",gre);const vre=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Nv=Ct("loader-circle",vre);const bre=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Sc=Ct("lock",bre);const yre=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],B_=Ct("map-pin",yre);const wre=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],_re=Ct("maximize-2",wre);const Nre=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],jre=Ct("megaphone",Nre);const Sre=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],jv=Ct("message-square",Sre);const kre=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],mc=Ct("package",kre);const Cre=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],z_=Ct("pen",Cre);const Are=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],HH=Ct("percent",Are);const Tre=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Mre=Ct("phone",Tre);const Ere=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Dre=Ct("play",Ere);const Ire=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],So=Ct("plus",Ire);const Rre=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],UH=Ct("printer",Rre);const Lre=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],f0=Ct("qr-code",Lre);const Ore=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ed=Ct("refresh-cw",Ore);const Pre=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Bre=Ct("rocket",Pre);const zre=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Fre=Ct("rotate-ccw",zre);const Vre=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],rs=Ct("save",Vre);const Hre=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],GH=Ct("scale",Hre);const Ure=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Sv=Ct("search",Ure);const Gre=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Wre=Ct("settings-2",Gre);const $re=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rx=Ct("settings",$re);const Yre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],qre=Ct("shield-alert",Yre);const Xre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$C=Ct("shield-check",Xre);const Zre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],qA=Ct("shield",Zre);const Kre=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],WH=Ct("shopping-bag",Kre);const Qre=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],px=Ct("shopping-cart",Qre);const Jre=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],YC=Ct("sparkles",Jre);const ene=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],$H=Ct("sprout",ene);const tne=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],$8=Ct("star",tne);const ane=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],YH=Ct("store",ane);const rne=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],qH=Ct("tag",rne);const nne=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],yb=Ct("thermometer",nne);const ine=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],al=Ct("trash-2",ine);const sne=[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]],one=Ct("trees",sne);const lne=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],cne=Ct("trending-down",lne);const dne=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Eg=Ct("trending-up",dne);const une=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],XA=Ct("triangle-alert",une);const hne=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],fne=Ct("truck",hne);const pne=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],xne=Ct("type",pne);const mne=[["circle",{cx:"10",cy:"7",r:"1",key:"dypaad"}],["circle",{cx:"4",cy:"20",r:"1",key:"22iqad"}],["path",{d:"M4.7 19.3 19 5",key:"1enqfc"}],["path",{d:"m21 3-3 1 2 2Z",key:"d3ov82"}],["path",{d:"M9.26 7.68 5 12l2 5",key:"1esawj"}],["path",{d:"m10 14 5 2 3.5-3.5",key:"v8oal5"}],["path",{d:"m18 12 1-1 1 1-1 1Z",key:"1bh22v"}]],Y8=Ct("usb",mne);const gne=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],vne=Ct("user-plus",gne);const bne=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],XH=Ct("user",bne);const yne=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],xx=Ct("users",yne);const wne=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],_ne=Ct("wallet",wne);const Nne=[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]],l2=Ct("warehouse",Nne);const jne=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Sne=Ct("wifi-off",jne);const kne=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],kv=Ct("wifi",kne);const Cne=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],ZH=Ct("wind",Cne);const Ane=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],js=Ct("x",Ane);const Tne=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],KH=Ct("zap",Tne),Mne=({onLoginSuccess:a})=>{const[e,t]=H.useState(""),[r,n]=H.useState(!1),[i,o]=H.useState("");H.useEffect(()=>{e.length===6&&!r&&d(e)},[e]);const l=b=>{e.length<6&&!r&&(t(w=>w+b),o(""))},c=()=>{r||(t(e.slice(0,-1)),o(""))},d=async b=>{n(!0),o("");try{let w=localStorage.getItem("API_BASE_URL")||"";w.endsWith("/")&&(w=w.slice(0,-1));const _=await fetch(`${w}/api/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pin:b})});if(!_.ok){const T=await _.text();throw new Error(`Server returned ${_.status}: ${T}`)}const k=await _.json();k.success?(sessionStorage.setItem("username",k.username),sessionStorage.setItem("userRole",k.role),sessionStorage.setItem("isLoggedIn","true"),sessionStorage.setItem("pin_verified","true"),a()):(o(k.error||"PIN   ."),window.navigator.vibrate&&window.navigator.vibrate(200),t(""))}catch(w){console.error("Login Error:",w);const _=`${baseUrl}/api/auth/verify`;o(`${w.name}: ${w.message} (Target: ${_})`)}finally{n(!1)}},[u,h]=H.useState(!1),[f,p]=H.useState(localStorage.getItem("API_BASE_URL")||""),g=()=>{let b=f.trim();b&&!b.startsWith("http")&&(b="https://"+b),localStorage.setItem("API_BASE_URL",b),h(!1),o("  ."),setTimeout(()=>o(""),2e3)};return s.jsxs("div",{className:"fixed inset-0 bg-slate-50 flex flex-col items-center justify-between p-4 sm:p-8 font-sans z-[1000] animate-in fade-in duration-500 overflow-hidden touch-none select-none",children:[s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center space-y-4 sm:space-y-8 w-full min-h-0",children:[s.jsx("div",{className:`w-16 h-16 sm:w-24 sm:h-24 rounded-2xl sm:rounded-[2.5rem] flex items-center justify-center shadow-xl sm:shadow-2xl transition-all duration-500 ${i?"bg-rose-500 shadow-rose-200":"bg-indigo-600 shadow-indigo-200 animate-bounce-slow"}`,children:r?s.jsx(Ed,{size:32,className:"text-white animate-spin sm:w-[44px] sm:h-[44px]"}):s.jsx(qA,{size:32,className:"text-white sm:w-[44px] sm:h-[44px]"})}),s.jsxs("div",{className:"space-y-1 sm:space-y-3",children:[s.jsx("h1",{className:"text-xl sm:text-2xl font-black text-slate-800 tracking-tight",children:"  "}),s.jsx("p",{className:"text-slate-400 font-bold text-[10px] sm:text-sm",children:"6  PIN ."})]}),s.jsx("div",{className:"flex gap-3 sm:gap-4 mt-4 sm:mt-8",children:[...Array(6)].map((b,w)=>{const _=w<e.length;return s.jsx("div",{className:`w-4 h-4 sm:w-5 sm:h-5 rounded-full transition-all duration-200 ${_?"bg-indigo-600 scale-125 shadow-lg shadow-indigo-200":"bg-slate-200 scale-100"} ${i?"bg-rose-500 shadow-rose-100":""}`},w)})}),s.jsx("div",{className:"h-4",children:i&&s.jsx("p",{className:"text-rose-500 text-[10px] sm:text-xs font-black animate-shake",children:i})})]}),s.jsxs("div",{className:"w-full max-w-sm grid grid-cols-3 gap-2 sm:gap-3 mb-2 sm:mb-4",children:[[1,2,3,4,5,6,7,8,9].map(b=>s.jsx("button",{type:"button",onClick:()=>l(b),className:"h-14 sm:h-18 bg-white rounded-2xl flex items-center justify-center text-2xl font-black text-slate-700 shadow-[0_3px_0_0_rgba(226,232,240,1)] active:shadow-none active:translate-y-1 active:bg-indigo-50 transition-all",children:b},b)),s.jsx("button",{type:"button",onClick:c,className:"h-14 flex items-center justify-center text-slate-400 active:text-rose-500",children:s.jsx(are,{size:24})}),s.jsx("button",{type:"button",onClick:()=>l(0),className:"h-14 bg-white rounded-2xl flex items-center justify-center text-2xl font-black text-slate-700 shadow-[0_3px_0_0_rgba(226,232,240,1)] active:shadow-none active:translate-y-1 active:bg-indigo-50 transition-all",children:"0"}),s.jsxs("button",{type:"button",onClick:()=>h(!0),className:"h-14 flex flex-col items-center justify-center text-slate-400 active:text-indigo-600 transition-colors",children:[s.jsx(Ed,{size:18,className:"mb-1"}),s.jsx("span",{className:"text-[10px] font-black",children:""})]})]}),u&&s.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[1100] flex items-end sm:items-center justify-center p-0 sm:p-4",children:s.jsxs("div",{className:"bg-white w-full max-w-md rounded-t-[2.5rem] sm:rounded-[2.5rem] p-8 space-y-6 shadow-2xl animate-in slide-in-from-bottom duration-300",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-black text-slate-800",children:"  "}),s.jsx("button",{onClick:()=>h(!1),className:"p-2 bg-slate-100 rounded-full text-slate-400",children:s.jsx(js,{size:20})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-wider pl-1",children:"  (IP  )"}),s.jsx("input",{type:"text",className:"w-full h-14 bg-slate-50 border-2 border-transparent focus:border-indigo-500 focus:bg-white rounded-2xl px-6 font-bold text-slate-700 outline-none transition-all",placeholder:"http://100.x.x.x:3000",value:f,onChange:b=>p(b.target.value)})]}),s.jsx("button",{onClick:g,className:"w-full h-14 bg-indigo-600 text-white rounded-2xl font-black text-sm shadow-lg shadow-indigo-100 active:scale-[0.98] transition-all",children:"   "}),s.jsxs("p",{className:"text-[10px] text-slate-400 font-bold text-center leading-relaxed",children:["*  IP  3000  .",s.jsx("br",{}),"(: http://100.78.11.10:3000)"]})]})]})}),s.jsx("style",{children:`
                @keyframes bounce-slow {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-12px); }
                }
                .animate-bounce-slow {
                    animation: bounce-slow 4s ease-in-out infinite;
                }
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    20% { transform: translateX(-8px); }
                    40% { transform: translateX(8px); }
                    60% { transform: translateX(-8px); }
                    80% { transform: translateX(8px); }
                }
                .animate-shake {
                    animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
                }
                button {
                    -webkit-tap-highlight-color: transparent;
                }
            `})]})};function Ve(a){if(a==null)return"0";if(a==="")return"";if(a==="-")return"-";const e=typeof a=="number"?a:Number(String(a).replace(/[^0-9.-]/g,""));return isNaN(e)?"0":new Intl.NumberFormat("ko-KR").format(e)}function Uu(a){return a&&parseInt(String(a).replace(/,/g,""),10)||0}function QH(a){if(!a)return"";const e=typeof a=="string"&&!a.includes("Z")&&!a.includes("+")?`${a.replace(" ","T")}Z`:a,t=new Date(e);if(isNaN(t.getTime()))return String(a);const r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0");return`${r}-${n} ${i}:${o}`}function ev(a){if(!a)return"";const e=new Date(a),t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}function Kn(a){return a?(a=a.replace(/[^0-9]/g,""),a.length<4?a:a.length<7?a.substr(0,3)+"-"+a.substr(3):a.length<11?a.substr(0,3)+"-"+a.substr(3,3)+"-"+a.substr(6):a.substr(0,3)+"-"+a.substr(3,4)+"-"+a.substr(7)):""}async function Ene(a){try{return await navigator.clipboard.writeText(a),console.log("Copied to clipboard:",a),!0}catch(e){return console.error("Failed to copy:",e),!1}}async function _l(a,e,t){try{return await pt(e,t)}catch(r){const n=typeof r=="string"?r:r.message||String(r);if(n.includes("AI_QUOTA_EXCEEDED")){const i=n.replace("AI_QUOTA_EXCEEDED: ","");throw await a(" AI   ",i),new Error("AI_QUOTA_EXCEEDED")}throw r}}const Dne=({searchQuery:a,setSearchQuery:e,isSearchFocused:t,setIsSearchFocused:r,searchRef:n,setShowLogoutModal:i})=>{const o=Fn(),l=H.useMemo(()=>[{id:"reception",label:"  ",sub:"/  ",path:"/sales/reception",icon:"add_shopping_cart"},{id:"stock",label:"   ",sub:"     ",path:"/sales/stock",icon:"inventory_2"},{id:"customer",label:" ",sub:"/  ",path:"/customer/edit",icon:"group"},{id:"consult",label:"  ",sub:"    ",path:"/customer/consultation",icon:"forum"},{id:"ledger",label:"  ",sub:"/   ",path:"/sales/ledger",icon:"menu_book"},{id:"purchase",label:"/ ",sub:"    ",path:"/finance/purchase",icon:"receipt_long"},{id:"exp_status",label:"  ",sub:"    ",path:"/exp/reservation-status",icon:"event_available"},{id:"settings",label:" ",sub:"   DB ",path:"/settings/company-info",icon:"settings"}],[]),c=H.useMemo(()=>{if(!a)return l.slice(0,5);const u=a.toLowerCase();return l.filter(h=>h.label.toLowerCase().includes(u)||h.sub.toLowerCase().includes(u))},[a,l]),d=u=>{r(!1),e(""),o(u)};return s.jsxs("div",{className:"flex items-center justify-between mb-4 gap-8 animate-in fade-in slide-in-from-top-4 duration-500 shrink-0 relative",children:[s.jsxs("div",{className:"flex-1 max-w-2xl min-[2000px]:max-w-4xl relative group",ref:n,children:[s.jsxs("div",{className:`relative flex items-center bg-white/80 backdrop-blur-xl border border-white shadow-[0_8px_30px_rgb(0,0,0,0.04)] ${t?"border-indigo-400 ring-4 ring-indigo-500/5":""} rounded-[24px] px-6 py-4 transition-all duration-300`,children:[s.jsx("span",{className:`material-symbols-rounded ${t?"text-indigo-500":"text-slate-400"} transition-colors text-2xl`,children:"search"}),s.jsx("input",{type:"text",value:a,onChange:u=>e(u.target.value),onFocus:()=>r(!0),placeholder:"    (: '', '')",className:"flex-1 bg-transparent border-none outline-none px-4 text-[15px] font-medium tracking-tight text-slate-700 placeholder:text-slate-300",onKeyDown:u=>{u.key==="Enter"&&c.length>0&&d(c[0].path)}}),s.jsxs("div",{className:"flex items-center gap-2",children:[a&&s.jsx("button",{onClick:()=>e(""),className:"p-1.5 hover:bg-slate-100 rounded-full text-slate-400",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"close"})}),s.jsx("span",{className:"w-px h-4 bg-slate-200 mx-2"}),s.jsx("div",{className:"bg-slate-100 px-2 py-1 rounded-md text-[10px] font-black text-slate-400 border border-slate-200",children:"ALT + K"})]})]}),t&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute inset-0 bg-transparent z-[99] fixed w-screen h-screen top-0 left-0",onClick:()=>r(!1)}),s.jsxs("div",{className:"absolute top-[calc(100%+12px)] left-0 w-full bg-white rounded-[24px] shadow-[0_20px_60px_rgba(0,0,0,0.15)] border border-slate-200 overflow-hidden z-[100] animate-in fade-in slide-in-from-top-4 duration-300",children:[s.jsxs("div",{className:"px-5 py-3 bg-slate-50/50 border-b border-slate-100 flex items-center justify-between",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"   "}),s.jsxs("span",{className:"text-[10px] text-slate-400 font-bold",children:[c.length,"  "]})]}),s.jsx("div",{className:"p-2 max-h-[400px] overflow-auto stylish-scrollbar",children:c.length>0?c.map(u=>s.jsxs("button",{onClick:()=>d(u.path),className:"w-full flex items-center gap-4 p-4 hover:bg-indigo-50/50 rounded-2xl transition-all group text-left",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-100 group-hover:bg-white text-slate-400 group-hover:text-indigo-600 flex items-center justify-center transition-all shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:u.icon})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-black text-slate-700 group-hover:text-indigo-900 leading-tight",children:u.label}),s.jsx("div",{className:"text-[11px] text-slate-400 group-hover:text-indigo-400 font-medium mt-1 uppercase tracking-tight",children:u.sub})]}),s.jsx("span",{className:"material-symbols-rounded text-slate-200 group-hover:text-indigo-300 text-lg opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all",children:"arrow_forward"})]},u.id)):s.jsxs("div",{className:"py-12 text-center text-slate-400 font-bold italic",children:['  : "',a,'"']})}),s.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5 grayscale opacity-50",children:[s.jsx("span",{className:"bg-white px-1.5 py-0.5 rounded border border-slate-300 text-[9px] font-bold",children:""}),s.jsx("span",{className:"text-[10px] font-bold",children:""})]}),s.jsxs("div",{className:"flex items-center gap-1.5 grayscale opacity-50",children:[s.jsx("span",{className:"bg-white px-1.5 py-0.5 rounded border border-slate-300 text-[9px] font-bold",children:"ESC"}),s.jsx("span",{className:"text-[10px] font-bold",children:""})]})]}),s.jsx("div",{className:"text-[10px] font-black text-indigo-500 bg-indigo-50 px-3 py-1.5 rounded-full border border-indigo-100",children:" AI"})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 bg-white p-2.5 pr-6 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{className:"w-10 h-10 rounded-xl bg-slate-900 border border-slate-700 flex items-center justify-center text-white shadow-lg overflow-hidden relative group",children:[s.jsx("span",{className:"material-symbols-rounded text-xl group-hover:scale-110 transition-transform",children:"person"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-emerald-500 border-2 border-slate-900 rounded-full"})]}),s.jsxs("div",{className:"flex flex-col mr-6",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.1em] leading-none mb-1",children:""}),s.jsxs("span",{className:"text-sm font-black text-slate-800 tracking-tight",children:[sessionStorage.getItem("username")||"",""]})]}),s.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-slate-50 hover:bg-rose-50 text-slate-500 hover:text-rose-600 font-black text-[11px] transition-all active:scale-95 border border-slate-100 uppercase tracking-widest",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"logout"}),""]})]})]})},Ine=({weatherAdvice:a,isWeatherLoading:e})=>{const[t,r]=H.useState(!1),n=o=>o?o.includes("")?"ac_unit":o.includes("")?"umbrella":o.includes("")?"wb_sunny":o.includes("")||o.includes("")?"filter_drama":"cloud":"cloud",i=a?.intel_summary?a.intel_summary.split(`
`).filter(o=>o.trim()):[];return s.jsxs("div",{className:"col-span-full h-[180px] min-[2000px]:h-[220px] bg-gradient-to-br from-[#1e293b] via-[#0f172a] to-black rounded-[32px] p-8 min-[2000px]:p-10 shadow-2xl relative overflow-hidden flex items-center group transition-all duration-700 hover:shadow-indigo-500/20",children:[s.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-indigo-500/10 to-transparent pointer-events-none"}),s.jsx("div",{className:"absolute bottom-[-50%] left-[-10%] w-64 h-64 bg-emerald-500/10 blur-[80px] rounded-full pointer-events-none"}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-6 md:gap-8 min-[2000px]:gap-12 w-full h-full",children:[s.jsx("div",{className:"w-20 h-20 min-[2000px]:w-28 min-[2000px]:h-28 rounded-[28px] bg-white/10 backdrop-blur-2xl border border-white/20 flex items-center justify-center shrink-0 shadow-2xl group-hover:rotate-3 transition-transform duration-500",children:s.jsx("span",{className:"material-symbols-rounded text-amber-400 text-5xl min-[2000px]:text-7xl drop-shadow-[0_0_15px_rgba(251,191,36,0.5)]",children:n(a?.weather_desc)})}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{className:"flex flex-nowrap md:flex-wrap items-center gap-4 h-10",children:[s.jsx("h3",{className:"text-white text-[1.4rem] font-black tracking-tight drop-shadow-sm whitespace-nowrap",children:"  "}),!e&&s.jsxs("div",{className:"bg-white/10 backdrop-blur-md px-4 py-1.5 rounded-full text-white/90 text-[0.8rem] font-bold border border-white/10 flex items-center gap-2 whitespace-nowrap",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),a?.location_name||""," ",a?.temperature?.toFixed(1),"C  ",a?.weather_desc]}),i.length>0&&s.jsx("button",{onClick:()=>r(!t),className:`px-4 py-1.5 rounded-full text-[0.8rem] font-black border transition-all whitespace-nowrap ${t?"bg-indigo-600 border-indigo-500 text-white":"bg-white/5 border-white/10 text-indigo-400 hover:bg-white/10"}`,children:t?" ":"  "})]}),s.jsxs("div",{className:"relative min-h-[60px]",children:[s.jsx("p",{className:`text-slate-300 text-[1.05rem] font-bold leading-relaxed max-w-[950px] transition-all duration-500 ${t?"opacity-10 blur-md scale-95 pointer-events-none":"opacity-100 blur-0 scale-100"}`,children:e?"       ...":a?.marketing_advice||"    ."}),t&&s.jsx("div",{className:"absolute top-0 left-0 right-0 mt-0.5 animate-in fade-in slide-in-from-top-4 duration-500",children:s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-1.5",children:i.map((o,l)=>s.jsx("div",{className:"bg-indigo-500/15 border border-indigo-500/30 p-2 rounded-2xl shadow-lg backdrop-blur-md",children:s.jsx("p",{className:"text-indigo-100 text-[0.75rem] font-black tracking-wide leading-tight",children:o})},l))})})]}),s.jsxs("div",{className:`flex items-center gap-2 text-[10px] font-bold uppercase tracking-tight transition-all duration-500 ${!e&&!t?"text-slate-500 opacity-100 translate-y-0":"text-transparent opacity-0 translate-y-1 pointer-events-none"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-xs",children:"auto_awesome"}),"   ,  ,  2         ."]})]}),s.jsx("div",{className:"hidden 2xl:block pr-8 shrink-0",children:s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-slate-600 text-[0.7rem] font-black uppercase tracking-[0.3em] mb-1",children:" "}),s.jsx("div",{className:"text-white font-mono text-lg font-bold",children:"ACTIVE"})]})})]})]})},mo=({icon:a,iconColor:e,iconBg:t,label:r,value:n,trend:i,isLoading:o,badge:l,onClick:c,className:d="",secondaryValue:u})=>s.jsxs("div",{onClick:c,className:`bg-white rounded-[28px] py-5 px-6 border border-slate-100 shadow-[0_4px_20px_rgb(0,0,0,0.03)] relative overflow-hidden group hover:shadow-[0_20px_40px_rgba(0,0,0,0.05)] transition-all duration-500 h-full min-h-[140px] flex flex-col justify-between cursor-pointer ${d}`,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("span",{className:`material-symbols-rounded ${e} ${t} p-2.5 rounded-[16px] text-[20px] shadow-sm`,children:a}),i&&!o&&s.jsxs("div",{className:`flex items-center gap-1 px-2.5 py-1 rounded-full text-[11px] font-black ${i.isUp?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"} shadow-sm`,children:[s.jsx("span",{className:"material-symbols-rounded text-[14px]",children:i.isUp?"arrow_upward":"arrow_downward"}),i.label||`${i.pct}%`]}),l&&s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest bg-slate-50 px-2 py-1 rounded-md",children:l})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-slate-500 text-[0.8rem] font-bold uppercase tracking-wider mb-1",children:r}),s.jsx("div",{className:`text-[1.4rem] font-black tracking-tighter leading-none ${o?"text-slate-200 animate-pulse":"text-slate-800"}`,children:o?"...":n}),u&&!o&&s.jsx("div",{className:"text-[10px] font-black text-slate-400 mt-1.5 flex items-center gap-2",children:u})]})]}),Rne=({type:a,onClose:e,forecastAlerts:t,freshnessAlerts:r,anniversaries:n,repurchaseCandidates:i,generateAIDraft:o,navigate:l})=>a?s.jsx("div",{id:"alert-expansion-area",className:"mb-6 animate-in slide-in-from-top-4 duration-500",children:s.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-2xl overflow-hidden ring-1 ring-black/5",children:[s.jsxs("div",{className:`p-6 flex items-center justify-between text-white ${a==="inventory"?"bg-gradient-to-r from-rose-500 to-rose-600":a==="anniversary"?"bg-gradient-to-r from-pink-500 to-pink-600":"bg-gradient-to-r from-indigo-500 to-indigo-600"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-2xl",children:a==="inventory"?"inventory_2":a==="anniversary"?"cake":"notifications_active"}),s.jsx("h3",{className:"text-xl font-black tracking-tight",children:a==="inventory"?"  ":a==="anniversary"?"  ":"  "})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest bg-white/20 px-3 py-1 rounded-full border border-white/20",children:" "}),s.jsx("button",{onClick:e,className:"w-8 h-8 rounded-full bg-black/10 hover:bg-black/20 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"close"})})]})]}),s.jsx("div",{className:"p-8 max-h-[600px] overflow-auto stylish-scrollbar",children:a==="inventory"?s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-black text-rose-600 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"trending_down"}),"    (Forecast)"]}),s.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-100",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-left",children:""}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100",children:[t.map((c,d)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"font-bold text-slate-800",children:c.product_name}),s.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-tight",children:c.item_type==="material"?" ":" "})]}),s.jsxs("td",{className:"p-4 text-center font-bold text-slate-700",children:[c.stock_quantity.toLocaleString(),""]}),s.jsxs("td",{className:"p-4 text-center text-slate-500",children:[c.daily_avg_consumption.toFixed(1),"/"]}),s.jsx("td",{className:`p-4 text-center font-black ${c.days_remaining<=3?"text-rose-500":"text-amber-500"}`,children:c.days_remaining>=900?" ":`${c.days_remaining} `}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("button",{onClick:()=>l(c.item_type==="material"?"/finance/purchase":"/sales/stock"),className:"bg-slate-900 text-white px-4 py-2 rounded-xl font-bold text-xs hover:bg-slate-800 transition-all",children:""})})]},d)),t.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"p-12 text-center text-slate-400 font-bold italic underline border-t border-slate-100",children:"   ."})})]})]})})]}),s.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[s.jsxs("h4",{className:"text-lg font-black text-amber-600 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"timer"}),"    (Freshness)"]}),s.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-100",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-left",children:""}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:" "}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map((c,d)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"p-4 font-bold text-slate-800",children:c.product_name}),s.jsxs("td",{className:"p-4 text-center font-bold text-slate-700",children:[c.stock_quantity.toLocaleString(),""]}),s.jsx("td",{className:"p-4 text-center text-slate-500",children:c.last_in_date?c.last_in_date.substring(0,10):"-"}),s.jsxs("td",{className:"p-4 text-center font-black text-rose-500",children:["+",c.diffDays,""]}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("button",{onClick:()=>l("/sales/stock"),className:"bg-slate-900 text-white px-4 py-2 rounded-xl font-bold text-xs hover:bg-slate-800 transition-all",children:""})})]},d))})]})})]})]}):a==="anniversary"?s.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-100",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-left",children:""}),s.jsx("th",{className:"p-4 text-left",children:""}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100",children:[n.map((c,d)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"p-4 font-black text-slate-800",children:c.customer_name}),s.jsx("td",{className:"p-4 text-slate-500 font-bold",children:c.anniversary_type}),s.jsx("td",{className:"p-4 text-center text-slate-500 font-mono",children:c.anniversary_date}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("button",{onClick:()=>l("/customer/sms"),className:"bg-pink-100 text-pink-600 px-4 py-2 rounded-xl font-bold text-xs hover:bg-pink-200 transition-all border border-pink-200 shadow-sm",children:""})})]},d)),n.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"4",className:"p-12 text-center text-slate-400 font-bold italic",children:"  ."})})]})]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4 p-4 bg-indigo-50 rounded-2xl border border-indigo-100 mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500 flex items-center justify-center text-white shrink-0 shadow-lg",children:s.jsx("span",{className:"material-symbols-rounded",children:"psychology"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-indigo-800 text-[13px] font-bold leading-relaxed line-clamp-2",children:"        .     ."}),s.jsxs("div",{className:"text-[10px] text-indigo-400 font-bold mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-[12px]",children:"verified"})," 2    SKU    "]})]})]}),s.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-100",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-left",children:""}),s.jsx("th",{className:"p-4 text-left",children:""}),s.jsx("th",{className:"p-4 text-center",children:" "}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100",children:[i.map((c,d)=>{const u=parseInt(c.predicted_days_remaining),h=u===0?"":u>0?`${u} `:`${Math.abs(u)} `,f=u===0?"text-rose-500":u>0?"text-emerald-500":"text-amber-500";return s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"p-4 font-black text-slate-800",children:c.customer_name}),s.jsx("td",{className:"p-4 text-slate-500 font-mono text-xs",children:c.mobile_number}),s.jsx("td",{className:"p-4 text-center text-slate-500",children:c.last_order_date}),s.jsxs("td",{className:"p-4 text-center font-black text-slate-700",children:[c.avg_interval_days,""]}),s.jsx("td",{className:`p-4 text-center font-black ${f}`,children:h}),s.jsx("td",{className:"p-4 text-center",children:s.jsxs("button",{onClick:()=>o(c),className:"bg-indigo-600 text-white px-4 py-2 rounded-xl font-bold text-xs hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-100 italic flex items-center gap-1.5 mx-auto",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"auto_fix_high"}),"  "]})})]},d)}),i.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"p-12 text-center text-slate-400 font-bold italic",children:"   ."})})]})]})})]})}),s.jsxs("div",{className:"px-8 py-5 bg-slate-50 border-t border-slate-100 flex justify-between items-center text-[11px] font-black text-slate-400 uppercase tracking-widest",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),"  "]}),s.jsx("span",{className:"w-px h-3 bg-slate-200"}),s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"material-symbols-rounded text-xs",children:"history"}),"  ",ea().format("HH:mm")]})]}),s.jsxs("button",{onClick:e,className:"text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["  ",s.jsx("span",{className:"material-symbols-rounded text-xs",children:"expand_less"})]})]})]})}):null;function wb(a){return a+.5|0}const Gu=(a,e,t)=>Math.max(Math.min(a,t),e);function Dg(a){return Gu(wb(a*2.55),0,255)}function nh(a){return Gu(wb(a*255),0,255)}function bd(a){return Gu(wb(a/2.55)/100,0,1)}function q8(a){return Gu(wb(a*100),0,100)}const zo={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},qC=[..."0123456789ABCDEF"],Lne=a=>qC[a&15],One=a=>qC[(a&240)>>4]+qC[a&15],$1=a=>(a&240)>>4===(a&15),Pne=a=>$1(a.r)&&$1(a.g)&&$1(a.b)&&$1(a.a);function Bne(a){var e=a.length,t;return a[0]==="#"&&(e===4||e===5?t={r:255&zo[a[1]]*17,g:255&zo[a[2]]*17,b:255&zo[a[3]]*17,a:e===5?zo[a[4]]*17:255}:(e===7||e===9)&&(t={r:zo[a[1]]<<4|zo[a[2]],g:zo[a[3]]<<4|zo[a[4]],b:zo[a[5]]<<4|zo[a[6]],a:e===9?zo[a[7]]<<4|zo[a[8]]:255})),t}const zne=(a,e)=>a<255?e(a):"";function Fne(a){var e=Pne(a)?Lne:One;return a?"#"+e(a.r)+e(a.g)+e(a.b)+zne(a.a,e):void 0}const Vne=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function JH(a,e,t){const r=e*Math.min(t,1-t),n=(i,o=(i+a/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function Hne(a,e,t){const r=(n,i=(n+a/60)%6)=>t-t*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function Une(a,e,t){const r=JH(a,1,.5);let n;for(e+t>1&&(n=1/(e+t),e*=n,t*=n),n=0;n<3;n++)r[n]*=1-e-t,r[n]+=e;return r}function Gne(a,e,t,r,n){return a===n?(e-t)/r+(e<t?6:0):e===n?(t-a)/r+2:(a-e)/r+4}function ZA(a){const t=a.r/255,r=a.g/255,n=a.b/255,i=Math.max(t,r,n),o=Math.min(t,r,n),l=(i+o)/2;let c,d,u;return i!==o&&(u=i-o,d=l>.5?u/(2-i-o):u/(i+o),c=Gne(t,r,n,u,i),c=c*60+.5),[c|0,d||0,l]}function KA(a,e,t,r){return(Array.isArray(e)?a(e[0],e[1],e[2]):a(e,t,r)).map(nh)}function QA(a,e,t){return KA(JH,a,e,t)}function Wne(a,e,t){return KA(Une,a,e,t)}function $ne(a,e,t){return KA(Hne,a,e,t)}function eU(a){return(a%360+360)%360}function Yne(a){const e=Vne.exec(a);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Dg(+e[5]):nh(+e[5]));const n=eU(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Wne(n,i,o):e[1]==="hsv"?r=$ne(n,i,o):r=QA(n,i,o),{r:r[0],g:r[1],b:r[2],a:t}}function qne(a,e){var t=ZA(a);t[0]=eU(t[0]+e),t=QA(t),a.r=t[0],a.g=t[1],a.b=t[2]}function Xne(a){if(!a)return;const e=ZA(a),t=e[0],r=q8(e[1]),n=q8(e[2]);return a.a<255?`hsla(${t}, ${r}%, ${n}%, ${bd(a.a)})`:`hsl(${t}, ${r}%, ${n}%)`}const X8={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Z8={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Zne(){const a={},e=Object.keys(Z8),t=Object.keys(X8);let r,n,i,o,l;for(r=0;r<e.length;r++){for(o=l=e[r],n=0;n<t.length;n++)i=t[n],l=l.replace(i,X8[i]);i=parseInt(Z8[o],16),a[l]=[i>>16&255,i>>8&255,i&255]}return a}let Y1;function Kne(a){Y1||(Y1=Zne(),Y1.transparent=[0,0,0,0]);const e=Y1[a.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Qne=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Jne(a){const e=Qne.exec(a);let t=255,r,n,i;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?Dg(o):Gu(o*255,0,255)}return r=+e[1],n=+e[3],i=+e[5],r=255&(e[2]?Dg(r):Gu(r,0,255)),n=255&(e[4]?Dg(n):Gu(n,0,255)),i=255&(e[6]?Dg(i):Gu(i,0,255)),{r,g:n,b:i,a:t}}}function eie(a){return a&&(a.a<255?`rgba(${a.r}, ${a.g}, ${a.b}, ${bd(a.a)})`:`rgb(${a.r}, ${a.g}, ${a.b})`)}const FS=a=>a<=.0031308?a*12.92:Math.pow(a,1/2.4)*1.055-.055,hp=a=>a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4);function tie(a,e,t){const r=hp(bd(a.r)),n=hp(bd(a.g)),i=hp(bd(a.b));return{r:nh(FS(r+t*(hp(bd(e.r))-r))),g:nh(FS(n+t*(hp(bd(e.g))-n))),b:nh(FS(i+t*(hp(bd(e.b))-i))),a:a.a+t*(e.a-a.a)}}function q1(a,e,t){if(a){let r=ZA(a);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=QA(r),a.r=r[0],a.g=r[1],a.b=r[2]}}function tU(a,e){return a&&Object.assign(e||{},a)}function K8(a){var e={r:0,g:0,b:0,a:255};return Array.isArray(a)?a.length>=3&&(e={r:a[0],g:a[1],b:a[2],a:255},a.length>3&&(e.a=nh(a[3]))):(e=tU(a,{r:0,g:0,b:0,a:1}),e.a=nh(e.a)),e}function aie(a){return a.charAt(0)==="r"?Jne(a):Yne(a)}let aU=class XC{constructor(e){if(e instanceof XC)return e;const t=typeof e;let r;t==="object"?r=K8(e):t==="string"&&(r=Bne(e)||Kne(e)||aie(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=tU(this._rgb);return e&&(e.a=bd(e.a)),e}set rgb(e){this._rgb=K8(e)}rgbString(){return this._valid?eie(this._rgb):void 0}hexString(){return this._valid?Fne(this._rgb):void 0}hslString(){return this._valid?Xne(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,n=e.rgb;let i;const o=t===i?.5:t,l=2*o-1,c=r.a-n.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,r.r=255&d*r.r+i*n.r+.5,r.g=255&d*r.g+i*n.g+.5,r.b=255&d*r.b+i*n.b+.5,r.a=o*r.a+(1-o)*n.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=tie(this._rgb,e._rgb,t)),this}clone(){return new XC(this.rgb)}alpha(e){return this._rgb.a=nh(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=wb(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return q1(this._rgb,2,e),this}darken(e){return q1(this._rgb,2,-e),this}saturate(e){return q1(this._rgb,1,e),this}desaturate(e){return q1(this._rgb,1,-e),this}rotate(e){return qne(this._rgb,e),this}};function id(){}const rie=(()=>{let a=0;return()=>a++})();function fr(a){return a==null}function bn(a){if(Array.isArray&&Array.isArray(a))return!0;const e=Object.prototype.toString.call(a);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function br(a){return a!==null&&Object.prototype.toString.call(a)==="[object Object]"}function On(a){return(typeof a=="number"||a instanceof Number)&&isFinite(+a)}function xo(a,e){return On(a)?a:e}function $a(a,e){return typeof a>"u"?e:a}const nie=(a,e)=>typeof a=="string"&&a.endsWith("%")?parseFloat(a)/100:+a/e,rU=(a,e)=>typeof a=="string"&&a.endsWith("%")?parseFloat(a)/100*e:+a;function hn(a,e,t){if(a&&typeof a.call=="function")return a.apply(t,e)}function Yr(a,e,t,r){let n,i,o;if(bn(a))for(i=a.length,n=0;n<i;n++)e.call(t,a[n],n);else if(br(a))for(o=Object.keys(a),i=o.length,n=0;n<i;n++)e.call(t,a[o[n]],o[n])}function c2(a,e){let t,r,n,i;if(!a||!e||a.length!==e.length)return!1;for(t=0,r=a.length;t<r;++t)if(n=a[t],i=e[t],n.datasetIndex!==i.datasetIndex||n.index!==i.index)return!1;return!0}function d2(a){if(bn(a))return a.map(d2);if(br(a)){const e=Object.create(null),t=Object.keys(a),r=t.length;let n=0;for(;n<r;++n)e[t[n]]=d2(a[t[n]]);return e}return a}function nU(a){return["__proto__","prototype","constructor"].indexOf(a)===-1}function iie(a,e,t,r){if(!nU(a))return;const n=e[a],i=t[a];br(n)&&br(i)?Cv(n,i,r):e[a]=d2(i)}function Cv(a,e,t){const r=bn(e)?e:[e],n=r.length;if(!br(a))return a;t=t||{};const i=t.merger||iie;let o;for(let l=0;l<n;++l){if(o=r[l],!br(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)i(c[d],a,o,t)}return a}function tv(a,e){return Cv(a,e,{merger:sie})}function sie(a,e,t){if(!nU(a))return;const r=e[a],n=t[a];br(r)&&br(n)?tv(r,n):Object.prototype.hasOwnProperty.call(e,a)||(e[a]=d2(n))}const Q8={"":a=>a,x:a=>a.x,y:a=>a.y};function oie(a){const e=a.split("."),t=[];let r="";for(const n of e)r+=n,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function lie(a){const e=oie(a);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function fh(a,e){return(Q8[e]||(Q8[e]=lie(e)))(a)}function JA(a){return a.charAt(0).toUpperCase()+a.slice(1)}const Av=a=>typeof a<"u",ph=a=>typeof a=="function",J8=(a,e)=>{if(a.size!==e.size)return!1;for(const t of a)if(!e.has(t))return!1;return!0};function cie(a){return a.type==="mouseup"||a.type==="click"||a.type==="contextmenu"}const Tr=Math.PI,xn=2*Tr,die=xn+Tr,u2=Number.POSITIVE_INFINITY,uie=Tr/180,$n=Tr/2,Qh=Tr/4,eR=Tr*2/3,Wu=Math.log10,gc=Math.sign;function av(a,e,t){return Math.abs(a-e)<t}function tR(a){const e=Math.round(a);a=av(a,e,a/1e3)?e:a;const t=Math.pow(10,Math.floor(Wu(a))),r=a/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function hie(a){const e=[],t=Math.sqrt(a);let r;for(r=1;r<t;r++)a%r===0&&(e.push(r),e.push(a/r));return t===(t|0)&&e.push(t),e.sort((n,i)=>n-i).pop(),e}function fie(a){return typeof a=="symbol"||typeof a=="object"&&a!==null&&!(Symbol.toPrimitive in a||"toString"in a||"valueOf"in a)}function mx(a){return!fie(a)&&!isNaN(parseFloat(a))&&isFinite(a)}function pie(a,e){const t=Math.round(a);return t-e<=a&&t+e>=a}function iU(a,e,t){let r,n,i;for(r=0,n=a.length;r<n;r++)i=a[r][t],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function yl(a){return a*(Tr/180)}function eT(a){return a*(180/Tr)}function aR(a){if(!On(a))return;let e=1,t=0;for(;Math.round(a*e)/e!==a;)e*=10,t++;return t}function sU(a,e){const t=e.x-a.x,r=e.y-a.y,n=Math.sqrt(t*t+r*r);let i=Math.atan2(r,t);return i<-.5*Tr&&(i+=xn),{angle:i,distance:n}}function ZC(a,e){return Math.sqrt(Math.pow(e.x-a.x,2)+Math.pow(e.y-a.y,2))}function xie(a,e){return(a-e+die)%xn-Tr}function ns(a){return(a%xn+xn)%xn}function Tv(a,e,t,r){const n=ns(a),i=ns(e),o=ns(t),l=ns(i-n),c=ns(o-n),d=ns(n-i),u=ns(n-o);return n===i||n===o||r&&i===o||l>c&&d<u}function Di(a,e,t){return Math.max(e,Math.min(t,a))}function mie(a){return Di(a,-32768,32767)}function wd(a,e,t,r=1e-6){return a>=Math.min(e,t)-r&&a<=Math.max(e,t)+r}function tT(a,e,t){t=t||(o=>a[o]<e);let r=a.length-1,n=0,i;for(;r-n>1;)i=n+r>>1,t(i)?n=i:r=i;return{lo:n,hi:r}}const _d=(a,e,t,r)=>tT(a,t,r?n=>{const i=a[n][e];return i<t||i===t&&a[n+1][e]===t}:n=>a[n][e]<t),gie=(a,e,t)=>tT(a,t,r=>a[r][e]>=t);function vie(a,e,t){let r=0,n=a.length;for(;r<n&&a[r]<e;)r++;for(;n>r&&a[n-1]>t;)n--;return r>0||n<a.length?a.slice(r,n):a}const oU=["push","pop","shift","splice","unshift"];function bie(a,e){if(a._chartjs){a._chartjs.listeners.push(e);return}Object.defineProperty(a,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),oU.forEach(t=>{const r="_onData"+JA(t),n=a[t];Object.defineProperty(a,t,{configurable:!0,enumerable:!1,value(...i){const o=n.apply(this,i);return a._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...i)}),o}})})}function rR(a,e){const t=a._chartjs;if(!t)return;const r=t.listeners,n=r.indexOf(e);n!==-1&&r.splice(n,1),!(r.length>0)&&(oU.forEach(i=>{delete a[i]}),delete a._chartjs)}function lU(a){const e=new Set(a);return e.size===a.length?a:Array.from(e)}const cU=(function(){return typeof window>"u"?function(a){return a()}:window.requestAnimationFrame})();function dU(a,e){let t=[],r=!1;return function(...n){t=n,r||(r=!0,cU.call(window,()=>{r=!1,a.apply(e,t)}))}}function yie(a,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(a,e,r)):a.apply(this,r),e}}const aT=a=>a==="start"?"left":a==="end"?"right":"center",es=(a,e,t)=>a==="start"?e:a==="end"?t:(e+t)/2,wie=(a,e,t,r)=>a===(r?"left":"right")?t:a==="center"?(e+t)/2:e;function uU(a,e,t){const r=e.length;let n=0,i=r;if(a._sorted){const{iScale:o,vScale:l,_parsed:c}=a,d=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null,u=o.axis,{min:h,max:f,minDefined:p,maxDefined:g}=o.getUserBounds();if(p){if(n=Math.min(_d(c,u,h).lo,t?r:_d(e,u,o.getPixelForValue(h)).lo),d){const b=c.slice(0,n+1).reverse().findIndex(w=>!fr(w[l.axis]));n-=Math.max(0,b)}n=Di(n,0,r-1)}if(g){let b=Math.max(_d(c,o.axis,f,!0).hi+1,t?0:_d(e,u,o.getPixelForValue(f),!0).hi+1);if(d){const w=c.slice(b-1).findIndex(_=>!fr(_[l.axis]));b+=Math.max(0,w)}i=Di(b,n,r)-n}else i=r-n}return{start:n,count:i}}function hU(a){const{xScale:e,yScale:t,_scaleRanges:r}=a,n={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return a._scaleRanges=n,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,n),i}const X1=a=>a===0||a===1,nR=(a,e,t)=>-(Math.pow(2,10*(a-=1))*Math.sin((a-e)*xn/t)),iR=(a,e,t)=>Math.pow(2,-10*a)*Math.sin((a-e)*xn/t)+1,rv={linear:a=>a,easeInQuad:a=>a*a,easeOutQuad:a=>-a*(a-2),easeInOutQuad:a=>(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1),easeInCubic:a=>a*a*a,easeOutCubic:a=>(a-=1)*a*a+1,easeInOutCubic:a=>(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2),easeInQuart:a=>a*a*a*a,easeOutQuart:a=>-((a-=1)*a*a*a-1),easeInOutQuart:a=>(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2),easeInQuint:a=>a*a*a*a*a,easeOutQuint:a=>(a-=1)*a*a*a*a+1,easeInOutQuint:a=>(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2),easeInSine:a=>-Math.cos(a*$n)+1,easeOutSine:a=>Math.sin(a*$n),easeInOutSine:a=>-.5*(Math.cos(Tr*a)-1),easeInExpo:a=>a===0?0:Math.pow(2,10*(a-1)),easeOutExpo:a=>a===1?1:-Math.pow(2,-10*a)+1,easeInOutExpo:a=>X1(a)?a:a<.5?.5*Math.pow(2,10*(a*2-1)):.5*(-Math.pow(2,-10*(a*2-1))+2),easeInCirc:a=>a>=1?a:-(Math.sqrt(1-a*a)-1),easeOutCirc:a=>Math.sqrt(1-(a-=1)*a),easeInOutCirc:a=>(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1),easeInElastic:a=>X1(a)?a:nR(a,.075,.3),easeOutElastic:a=>X1(a)?a:iR(a,.075,.3),easeInOutElastic(a){return X1(a)?a:a<.5?.5*nR(a*2,.1125,.45):.5+.5*iR(a*2-1,.1125,.45)},easeInBack(a){return a*a*((1.70158+1)*a-1.70158)},easeOutBack(a){return(a-=1)*a*((1.70158+1)*a+1.70158)+1},easeInOutBack(a){let e=1.70158;return(a/=.5)<1?.5*(a*a*(((e*=1.525)+1)*a-e)):.5*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)},easeInBounce:a=>1-rv.easeOutBounce(1-a),easeOutBounce(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeInOutBounce:a=>a<.5?rv.easeInBounce(a*2)*.5:rv.easeOutBounce(a*2-1)*.5+.5};function rT(a){if(a&&typeof a=="object"){const e=a.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function sR(a){return rT(a)?a:new aU(a)}function VS(a){return rT(a)?a:new aU(a).saturate(.5).darken(.1).hexString()}const _ie=["x","y","borderWidth","radius","tension"],Nie=["color","borderColor","backgroundColor"];function jie(a){a.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),a.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),a.set("animations",{colors:{type:"color",properties:Nie},numbers:{type:"number",properties:_ie}}),a.describe("animations",{_fallback:"animation"}),a.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Sie(a){a.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const oR=new Map;function kie(a,e){e=e||{};const t=a+JSON.stringify(e);let r=oR.get(t);return r||(r=new Intl.NumberFormat(a,e),oR.set(t,r)),r}function _b(a,e,t){return kie(e,t).format(a)}const fU={values(a){return bn(a)?a:""+a},numeric(a,e,t){if(a===0)return"0";const r=this.chart.options.locale;let n,i=a;if(t.length>1){const d=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(d<1e-4||d>1e15)&&(n="scientific"),i=Cie(a,t)}const o=Wu(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:n,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),_b(a,r,c)},logarithmic(a,e,t){if(a===0)return"0";const r=t[e].significand||a/Math.pow(10,Math.floor(Wu(a)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?fU.numeric.call(this,a,e,t):""}};function Cie(a,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&a!==Math.floor(a)&&(t=a-Math.floor(a)),t}var F_={formatters:fU};function Aie(a){a.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:F_.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),a.route("scale.ticks","color","","color"),a.route("scale.grid","color","","borderColor"),a.route("scale.border","color","","borderColor"),a.route("scale.title","color","","color"),a.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),a.describe("scales",{_fallback:"scale"}),a.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const p0=Object.create(null),KC=Object.create(null);function nv(a,e){if(!e)return a;const t=e.split(".");for(let r=0,n=t.length;r<n;++r){const i=t[r];a=a[i]||(a[i]=Object.create(null))}return a}function HS(a,e,t){return typeof e=="string"?Cv(nv(a,e),t):Cv(nv(a,""),e)}class Tie{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,n)=>VS(n.backgroundColor),this.hoverBorderColor=(r,n)=>VS(n.borderColor),this.hoverColor=(r,n)=>VS(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return HS(this,e,t)}get(e){return nv(this,e)}describe(e,t){return HS(KC,e,t)}override(e,t){return HS(p0,e,t)}route(e,t,r,n){const i=nv(this,e),o=nv(this,r),l="_"+t;Object.defineProperties(i,{[l]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[l],d=o[n];return br(c)?Object.assign({},d,c):$a(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(t=>t(this))}}var wn=new Tie({_scriptable:a=>!a.startsWith("on"),_indexable:a=>a!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[jie,Sie,Aie]);function Mie(a){return!a||fr(a.size)||fr(a.family)?null:(a.style?a.style+" ":"")+(a.weight?a.weight+" ":"")+a.size+"px "+a.family}function h2(a,e,t,r,n){let i=e[n];return i||(i=e[n]=a.measureText(n).width,t.push(n)),i>r&&(r=i),r}function Eie(a,e,t,r){r=r||{};let n=r.data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(n=r.data={},i=r.garbageCollect=[],r.font=e),a.save(),a.font=e;let o=0;const l=t.length;let c,d,u,h,f;for(c=0;c<l;c++)if(h=t[c],h!=null&&!bn(h))o=h2(a,n,i,o,h);else if(bn(h))for(d=0,u=h.length;d<u;d++)f=h[d],f!=null&&!bn(f)&&(o=h2(a,n,i,o,f));a.restore();const p=i.length/2;if(p>t.length){for(c=0;c<p;c++)delete n[i[c]];i.splice(0,p)}return o}function Jh(a,e,t){const r=a.currentDevicePixelRatio,n=t!==0?Math.max(t/2,.5):0;return Math.round((e-n)*r)/r+n}function lR(a,e){!e&&!a||(e=e||a.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,a.width,a.height),e.restore())}function QC(a,e,t,r){pU(a,e,t,r,null)}function pU(a,e,t,r,n){let i,o,l,c,d,u,h,f;const p=e.pointStyle,g=e.rotation,b=e.radius;let w=(g||0)*uie;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){a.save(),a.translate(t,r),a.rotate(w),a.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),a.restore();return}if(!(isNaN(b)||b<=0)){switch(a.beginPath(),p){default:n?a.ellipse(t,r,n/2,b,0,0,xn):a.arc(t,r,b,0,xn),a.closePath();break;case"triangle":u=n?n/2:b,a.moveTo(t+Math.sin(w)*u,r-Math.cos(w)*b),w+=eR,a.lineTo(t+Math.sin(w)*u,r-Math.cos(w)*b),w+=eR,a.lineTo(t+Math.sin(w)*u,r-Math.cos(w)*b),a.closePath();break;case"rectRounded":d=b*.516,c=b-d,o=Math.cos(w+Qh)*c,h=Math.cos(w+Qh)*(n?n/2-d:c),l=Math.sin(w+Qh)*c,f=Math.sin(w+Qh)*(n?n/2-d:c),a.arc(t-h,r-l,d,w-Tr,w-$n),a.arc(t+f,r-o,d,w-$n,w),a.arc(t+h,r+l,d,w,w+$n),a.arc(t-f,r+o,d,w+$n,w+Tr),a.closePath();break;case"rect":if(!g){c=Math.SQRT1_2*b,u=n?n/2:c,a.rect(t-u,r-c,2*u,2*c);break}w+=Qh;case"rectRot":h=Math.cos(w)*(n?n/2:b),o=Math.cos(w)*b,l=Math.sin(w)*b,f=Math.sin(w)*(n?n/2:b),a.moveTo(t-h,r-l),a.lineTo(t+f,r-o),a.lineTo(t+h,r+l),a.lineTo(t-f,r+o),a.closePath();break;case"crossRot":w+=Qh;case"cross":h=Math.cos(w)*(n?n/2:b),o=Math.cos(w)*b,l=Math.sin(w)*b,f=Math.sin(w)*(n?n/2:b),a.moveTo(t-h,r-l),a.lineTo(t+h,r+l),a.moveTo(t+f,r-o),a.lineTo(t-f,r+o);break;case"star":h=Math.cos(w)*(n?n/2:b),o=Math.cos(w)*b,l=Math.sin(w)*b,f=Math.sin(w)*(n?n/2:b),a.moveTo(t-h,r-l),a.lineTo(t+h,r+l),a.moveTo(t+f,r-o),a.lineTo(t-f,r+o),w+=Qh,h=Math.cos(w)*(n?n/2:b),o=Math.cos(w)*b,l=Math.sin(w)*b,f=Math.sin(w)*(n?n/2:b),a.moveTo(t-h,r-l),a.lineTo(t+h,r+l),a.moveTo(t+f,r-o),a.lineTo(t-f,r+o);break;case"line":o=n?n/2:Math.cos(w)*b,l=Math.sin(w)*b,a.moveTo(t-o,r-l),a.lineTo(t+o,r+l);break;case"dash":a.moveTo(t,r),a.lineTo(t+Math.cos(w)*(n?n/2:b),r+Math.sin(w)*b);break;case!1:a.closePath();break}a.fill(),e.borderWidth>0&&a.stroke()}}function Nd(a,e,t){return t=t||.5,!e||a&&a.x>e.left-t&&a.x<e.right+t&&a.y>e.top-t&&a.y<e.bottom+t}function V_(a,e){a.save(),a.beginPath(),a.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),a.clip()}function H_(a){a.restore()}function Die(a,e,t,r,n){if(!e)return a.lineTo(t.x,t.y);if(n==="middle"){const i=(e.x+t.x)/2;a.lineTo(i,e.y),a.lineTo(i,t.y)}else n==="after"!=!!r?a.lineTo(e.x,t.y):a.lineTo(t.x,e.y);a.lineTo(t.x,t.y)}function Iie(a,e,t,r){if(!e)return a.lineTo(t.x,t.y);a.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function Rie(a,e){e.translation&&a.translate(e.translation[0],e.translation[1]),fr(e.rotation)||a.rotate(e.rotation),e.color&&(a.fillStyle=e.color),e.textAlign&&(a.textAlign=e.textAlign),e.textBaseline&&(a.textBaseline=e.textBaseline)}function Lie(a,e,t,r,n){if(n.strikethrough||n.underline){const i=a.measureText(r),o=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=t-i.actualBoundingBoxAscent,d=t+i.actualBoundingBoxDescent,u=n.strikethrough?(c+d)/2:d;a.strokeStyle=a.fillStyle,a.beginPath(),a.lineWidth=n.decorationWidth||2,a.moveTo(o,u),a.lineTo(l,u),a.stroke()}}function Oie(a,e){const t=a.fillStyle;a.fillStyle=e.color,a.fillRect(e.left,e.top,e.width,e.height),a.fillStyle=t}function x0(a,e,t,r,n,i={}){const o=bn(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(a.save(),a.font=n.string,Rie(a,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&Oie(a,i.backdrop),l&&(i.strokeColor&&(a.strokeStyle=i.strokeColor),fr(i.strokeWidth)||(a.lineWidth=i.strokeWidth),a.strokeText(d,t,r,i.maxWidth)),a.fillText(d,t,r,i.maxWidth),Lie(a,t,r,d,i),r+=Number(n.lineHeight);a.restore()}function Mv(a,e){const{x:t,y:r,w:n,h:i,radius:o}=e;a.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*Tr,Tr,!0),a.lineTo(t,r+i-o.bottomLeft),a.arc(t+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Tr,$n,!0),a.lineTo(t+n-o.bottomRight,r+i),a.arc(t+n-o.bottomRight,r+i-o.bottomRight,o.bottomRight,$n,0,!0),a.lineTo(t+n,r+o.topRight),a.arc(t+n-o.topRight,r+o.topRight,o.topRight,0,-$n,!0),a.lineTo(t+o.topLeft,r)}const Pie=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Bie=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function zie(a,e){const t=(""+a).match(Pie);if(!t||t[1]==="normal")return e*1.2;switch(a=+t[2],t[3]){case"px":return a;case"%":a/=100;break}return e*a}const Fie=a=>+a||0;function nT(a,e){const t={},r=br(e),n=r?Object.keys(e):e,i=br(a)?r?o=>$a(a[o],a[e[o]]):o=>a[o]:()=>a;for(const o of n)t[o]=Fie(i(o));return t}function xU(a){return nT(a,{top:"y",right:"x",bottom:"y",left:"x"})}function Kf(a){return nT(a,["topLeft","topRight","bottomLeft","bottomRight"])}function os(a){const e=xU(a);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function wi(a,e){a=a||{},e=e||wn.font;let t=$a(a.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=$a(a.style,e.style);r&&!(""+r).match(Bie)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const n={family:$a(a.family,e.family),lineHeight:zie($a(a.lineHeight,e.lineHeight),t),size:t,style:r,weight:$a(a.weight,e.weight),string:""};return n.string=Mie(n),n}function Ig(a,e,t,r){let n,i,o;for(n=0,i=a.length;n<i;++n)if(o=a[n],o!==void 0&&o!==void 0)return o}function Vie(a,e,t){const{min:r,max:n}=a,i=rU(e,(n-r)/2),o=(l,c)=>t&&l===0?0:l+c;return{min:o(r,-Math.abs(i)),max:o(n,i)}}function Sh(a,e){return Object.assign(Object.create(a),e)}function iT(a,e=[""],t,r,n=()=>a[0]){const i=t||a;typeof r>"u"&&(r=bU("_fallback",a));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:a,_rootScopes:i,_fallback:r,_getTarget:n,override:l=>iT([l,...a],e,i,r)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete a[0][c],!0},get(l,c){return gU(l,c,()=>Xie(c,e,a,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(a[0])},has(l,c){return dR(l).includes(c)},ownKeys(l){return dR(l)},set(l,c,d){const u=l._storage||(l._storage=n());return l[c]=u[c]=d,delete l._keys,!0}})}function gx(a,e,t,r){const n={_cacheable:!1,_proxy:a,_context:e,_subProxy:t,_stack:new Set,_descriptors:mU(a,r),setContext:i=>gx(a,i,t,r),override:i=>gx(a.override(i),e,t,r)};return new Proxy(n,{deleteProperty(i,o){return delete i[o],delete a[o],!0},get(i,o,l){return gU(i,o,()=>Uie(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(a,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(a,o)},getPrototypeOf(){return Reflect.getPrototypeOf(a)},has(i,o){return Reflect.has(a,o)},ownKeys(){return Reflect.ownKeys(a)},set(i,o,l){return a[o]=l,delete i[o],!0}})}function mU(a,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:n=e.allKeys}=a;return{allKeys:n,scriptable:t,indexable:r,isScriptable:ph(t)?t:()=>t,isIndexable:ph(r)?r:()=>r}}const Hie=(a,e)=>a?a+JA(e):e,sT=(a,e)=>br(e)&&a!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function gU(a,e,t){if(Object.prototype.hasOwnProperty.call(a,e)||e==="constructor")return a[e];const r=t();return a[e]=r,r}function Uie(a,e,t){const{_proxy:r,_context:n,_subProxy:i,_descriptors:o}=a;let l=r[e];return ph(l)&&o.isScriptable(e)&&(l=Gie(e,l,a,t)),bn(l)&&l.length&&(l=Wie(e,l,a,o.isIndexable)),sT(e,l)&&(l=gx(l,n,i&&i[e],o)),l}function Gie(a,e,t,r){const{_proxy:n,_context:i,_subProxy:o,_stack:l}=t;if(l.has(a))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+a);l.add(a);let c=e(i,o||r);return l.delete(a),sT(a,c)&&(c=oT(n._scopes,n,a,c)),c}function Wie(a,e,t,r){const{_proxy:n,_context:i,_subProxy:o,_descriptors:l}=t;if(typeof i.index<"u"&&r(a))return e[i.index%e.length];if(br(e[0])){const c=e,d=n._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=oT(d,n,a,u);e.push(gx(h,i,o&&o[a],l))}}return e}function vU(a,e,t){return ph(a)?a(e,t):a}const $ie=(a,e)=>a===!0?e:typeof a=="string"?fh(e,a):void 0;function Yie(a,e,t,r,n){for(const i of e){const o=$ie(t,i);if(o){a.add(o);const l=vU(o._fallback,t,n);if(typeof l<"u"&&l!==t&&l!==r)return l}else if(o===!1&&typeof r<"u"&&t!==r)return null}return!1}function oT(a,e,t,r){const n=e._rootScopes,i=vU(e._fallback,t,r),o=[...a,...n],l=new Set;l.add(r);let c=cR(l,o,t,i||t,r);return c===null||typeof i<"u"&&i!==t&&(c=cR(l,o,i,c,r),c===null)?!1:iT(Array.from(l),[""],n,i,()=>qie(e,t,r))}function cR(a,e,t,r,n){for(;t;)t=Yie(a,e,t,r,n);return t}function qie(a,e,t){const r=a._getTarget();e in r||(r[e]={});const n=r[e];return bn(n)&&br(t)?t:n||{}}function Xie(a,e,t,r){let n;for(const i of e)if(n=bU(Hie(i,a),t),typeof n<"u")return sT(a,n)?oT(t,r,a,n):n}function bU(a,e){for(const t of e){if(!t)continue;const r=t[a];if(typeof r<"u")return r}}function dR(a){let e=a._keys;return e||(e=a._keys=Zie(a._scopes)),e}function Zie(a){const e=new Set;for(const t of a)for(const r of Object.keys(t).filter(n=>!n.startsWith("_")))e.add(r);return Array.from(e)}function yU(a,e,t,r){const{iScale:n}=a,{key:i="r"}=this._parsing,o=new Array(r);let l,c,d,u;for(l=0,c=r;l<c;++l)d=l+t,u=e[d],o[l]={r:n.parse(fh(u,i),d)};return o}const Kie=Number.EPSILON||1e-14,vx=(a,e)=>e<a.length&&!a[e].skip&&a[e],wU=a=>a==="x"?"y":"x";function Qie(a,e,t,r){const n=a.skip?e:a,i=e,o=t.skip?e:t,l=ZC(i,n),c=ZC(o,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=r*d,f=r*u;return{previous:{x:i.x-h*(o.x-n.x),y:i.y-h*(o.y-n.y)},next:{x:i.x+f*(o.x-n.x),y:i.y+f*(o.y-n.y)}}}function Jie(a,e,t){const r=a.length;let n,i,o,l,c,d=vx(a,0);for(let u=0;u<r-1;++u)if(c=d,d=vx(a,u+1),!(!c||!d)){if(av(e[u],0,Kie)){t[u]=t[u+1]=0;continue}n=t[u]/e[u],i=t[u+1]/e[u],l=Math.pow(n,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),t[u]=n*o*e[u],t[u+1]=i*o*e[u])}}function ese(a,e,t="x"){const r=wU(t),n=a.length;let i,o,l,c=vx(a,0);for(let d=0;d<n;++d){if(o=l,l=c,c=vx(a,d+1),!l)continue;const u=l[t],h=l[r];o&&(i=(u-o[t])/3,l[`cp1${t}`]=u-i,l[`cp1${r}`]=h-i*e[d]),c&&(i=(c[t]-u)/3,l[`cp2${t}`]=u+i,l[`cp2${r}`]=h+i*e[d])}}function tse(a,e="x"){const t=wU(e),r=a.length,n=Array(r).fill(0),i=Array(r);let o,l,c,d=vx(a,0);for(o=0;o<r;++o)if(l=c,c=d,d=vx(a,o+1),!!c){if(d){const u=d[e]-c[e];n[o]=u!==0?(d[t]-c[t])/u:0}i[o]=l?d?gc(n[o-1])!==gc(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}Jie(a,n,i),ese(a,i,e)}function Z1(a,e,t){return Math.max(Math.min(a,t),e)}function ase(a,e){let t,r,n,i,o,l=Nd(a[0],e);for(t=0,r=a.length;t<r;++t)o=i,i=l,l=t<r-1&&Nd(a[t+1],e),i&&(n=a[t],o&&(n.cp1x=Z1(n.cp1x,e.left,e.right),n.cp1y=Z1(n.cp1y,e.top,e.bottom)),l&&(n.cp2x=Z1(n.cp2x,e.left,e.right),n.cp2y=Z1(n.cp2y,e.top,e.bottom)))}function rse(a,e,t,r,n){let i,o,l,c;if(e.spanGaps&&(a=a.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")tse(a,n);else{let d=r?a[a.length-1]:a[0];for(i=0,o=a.length;i<o;++i)l=a[i],c=Qie(d,l,a[Math.min(i+1,o-(r?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&ase(a,t)}function lT(){return typeof window<"u"&&typeof document<"u"}function cT(a){let e=a.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function f2(a,e,t){let r;return typeof a=="string"?(r=parseInt(a,10),a.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=a,r}const U_=a=>a.ownerDocument.defaultView.getComputedStyle(a,null);function nse(a,e){return U_(a).getPropertyValue(e)}const ise=["top","right","bottom","left"];function Qf(a,e,t){const r={};t=t?"-"+t:"";for(let n=0;n<4;n++){const i=ise[n];r[i]=parseFloat(a[e+"-"+i+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const sse=(a,e,t)=>(a>0||e>0)&&(!t||!t.shadowRoot);function ose(a,e){const t=a.touches,r=t&&t.length?t[0]:a,{offsetX:n,offsetY:i}=r;let o=!1,l,c;if(sse(n,i,a.target))l=n,c=i;else{const d=e.getBoundingClientRect();l=r.clientX-d.left,c=r.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function Mf(a,e){if("native"in a)return a;const{canvas:t,currentDevicePixelRatio:r}=e,n=U_(t),i=n.boxSizing==="border-box",o=Qf(n,"padding"),l=Qf(n,"border","width"),{x:c,y:d,box:u}=ose(a,t),h=o.left+(u&&l.left),f=o.top+(u&&l.top);let{width:p,height:g}=e;return i&&(p-=o.width+l.width,g-=o.height+l.height),{x:Math.round((c-h)/p*t.width/r),y:Math.round((d-f)/g*t.height/r)}}function lse(a,e,t){let r,n;if(e===void 0||t===void 0){const i=a&&cT(a);if(!i)e=a.clientWidth,t=a.clientHeight;else{const o=i.getBoundingClientRect(),l=U_(i),c=Qf(l,"border","width"),d=Qf(l,"padding");e=o.width-d.width-c.width,t=o.height-d.height-c.height,r=f2(l.maxWidth,i,"clientWidth"),n=f2(l.maxHeight,i,"clientHeight")}}return{width:e,height:t,maxWidth:r||u2,maxHeight:n||u2}}const $u=a=>Math.round(a*10)/10;function cse(a,e,t,r){const n=U_(a),i=Qf(n,"margin"),o=f2(n.maxWidth,a,"clientWidth")||u2,l=f2(n.maxHeight,a,"clientHeight")||u2,c=lse(a,e,t);let{width:d,height:u}=c;if(n.boxSizing==="content-box"){const f=Qf(n,"border","width"),p=Qf(n,"padding");d-=p.width+f.width,u-=p.height+f.height}return d=Math.max(0,d-i.width),u=Math.max(0,r?d/r:u-i.height),d=$u(Math.min(d,o,c.maxWidth)),u=$u(Math.min(u,l,c.maxHeight)),d&&!u&&(u=$u(d/2)),(e!==void 0||t!==void 0)&&r&&c.height&&u>c.height&&(u=c.height,d=$u(Math.floor(u*r))),{width:d,height:u}}function uR(a,e,t){const r=e||1,n=$u(a.height*r),i=$u(a.width*r);a.height=$u(a.height),a.width=$u(a.width);const o=a.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${a.height}px`,o.style.width=`${a.width}px`),a.currentDevicePixelRatio!==r||o.height!==n||o.width!==i?(a.currentDevicePixelRatio=r,o.height=n,o.width=i,a.ctx.setTransform(r,0,0,r,0,0),!0):!1}const dse=(function(){let a=!1;try{const e={get passive(){return a=!0,!1}};lT()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return a})();function hR(a,e){const t=nse(a,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ef(a,e,t,r){return{x:a.x+t*(e.x-a.x),y:a.y+t*(e.y-a.y)}}function use(a,e,t,r){return{x:a.x+t*(e.x-a.x),y:r==="middle"?t<.5?a.y:e.y:r==="after"?t<1?a.y:e.y:t>0?e.y:a.y}}function hse(a,e,t,r){const n={x:a.cp2x,y:a.cp2y},i={x:e.cp1x,y:e.cp1y},o=Ef(a,n,t),l=Ef(n,i,t),c=Ef(i,e,t),d=Ef(o,l,t),u=Ef(l,c,t);return Ef(d,u,t)}const fse=function(a,e){return{x(t){return a+a+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},pse=function(){return{x(a){return a},setWidth(a){},textAlign(a){return a},xPlus(a,e){return a+e},leftForLtr(a,e){return a}}};function nx(a,e,t){return a?fse(e,t):pse()}function _U(a,e){let t,r;(e==="ltr"||e==="rtl")&&(t=a.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),a.prevTextDirection=r)}function NU(a,e){e!==void 0&&(delete a.prevTextDirection,a.canvas.style.setProperty("direction",e[0],e[1]))}function jU(a){return a==="angle"?{between:Tv,compare:xie,normalize:ns}:{between:wd,compare:(e,t)=>e-t,normalize:e=>e}}function fR({start:a,end:e,count:t,loop:r,style:n}){return{start:a%t,end:e%t,loop:r&&(e-a+1)%t===0,style:n}}function xse(a,e,t){const{property:r,start:n,end:i}=t,{between:o,normalize:l}=jU(r),c=e.length;let{start:d,end:u,loop:h}=a,f,p;if(h){for(d+=c,u+=c,f=0,p=c;f<p&&o(l(e[d%c][r]),n,i);++f)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:a.style}}function SU(a,e,t){if(!t)return[a];const{property:r,start:n,end:i}=t,o=e.length,{compare:l,between:c,normalize:d}=jU(r),{start:u,end:h,loop:f,style:p}=xse(a,e,t),g=[];let b=!1,w=null,_,k,T;const D=()=>c(n,T,_)&&l(n,T)!==0,I=()=>l(i,_)===0||c(i,T,_),O=()=>b||D(),P=()=>!b||I();for(let V=u,G=u;V<=h;++V)k=e[V%o],!k.skip&&(_=d(k[r]),_!==T&&(b=c(_,n,i),w===null&&O()&&(w=l(_,n)===0?V:G),w!==null&&P()&&(g.push(fR({start:w,end:V,loop:f,count:o,style:p})),w=null),G=V,T=_));return w!==null&&g.push(fR({start:w,end:h,loop:f,count:o,style:p})),g}function kU(a,e){const t=[],r=a.segments;for(let n=0;n<r.length;n++){const i=SU(r[n],a.points,e);i.length&&t.push(...i)}return t}function mse(a,e,t,r){let n=0,i=e-1;if(t&&!r)for(;n<e&&!a[n].skip;)n++;for(;n<e&&a[n].skip;)n++;for(n%=e,t&&(i+=n);i>n&&a[i%e].skip;)i--;return i%=e,{start:n,end:i}}function gse(a,e,t,r){const n=a.length,i=[];let o=e,l=a[e],c;for(c=e+1;c<=t;++c){const d=a[c%n];d.skip||d.stop?l.skip||(r=!1,i.push({start:e%n,end:(c-1)%n,loop:r}),e=o=d.stop?c:null):(o=c,l.skip&&(e=c)),l=d}return o!==null&&i.push({start:e%n,end:o%n,loop:r}),i}function vse(a,e){const t=a.points,r=a.options.spanGaps,n=t.length;if(!n)return[];const i=!!a._loop,{start:o,end:l}=mse(t,n,i,r);if(r===!0)return pR(a,[{start:o,end:l,loop:i}],t,e);const c=l<o?l+n:l,d=!!a._fullLoop&&o===0&&l===n-1;return pR(a,gse(t,o,c,d),t,e)}function pR(a,e,t,r){return!r||!r.setContext||!t?e:bse(a,e,t,r)}function bse(a,e,t,r){const n=a._chart.getContext(),i=xR(a.options),{_datasetIndex:o,options:{spanGaps:l}}=a,c=t.length,d=[];let u=i,h=e[0].start,f=h;function p(g,b,w,_){const k=l?-1:1;if(g!==b){for(g+=c;t[g%c].skip;)g-=k;for(;t[b%c].skip;)b+=k;g%c!==b%c&&(d.push({start:g%c,end:b%c,loop:w,style:_}),u=_,h=b%c)}}for(const g of e){h=l?h:g.start;let b=t[h%c],w;for(f=h+1;f<=g.end;f++){const _=t[f%c];w=xR(r.setContext(Sh(n,{type:"segment",p0:b,p1:_,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),yse(w,u)&&p(h,f-1,g.loop,u),b=_,u=w}h<f-1&&p(h,f-1,g.loop,u)}return d}function xR(a){return{backgroundColor:a.backgroundColor,borderCapStyle:a.borderCapStyle,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderJoinStyle:a.borderJoinStyle,borderWidth:a.borderWidth,borderColor:a.borderColor}}function yse(a,e){if(!e)return!1;const t=[],r=function(n,i){return rT(i)?(t.includes(i)||t.push(i),t.indexOf(i)):i};return JSON.stringify(a,r)!==JSON.stringify(e,r)}function K1(a,e,t){return a.options.clip?a[t]:e[t]}function wse(a,e){const{xScale:t,yScale:r}=a;return t&&r?{left:K1(t,e,"left"),right:K1(t,e,"right"),top:K1(r,e,"top"),bottom:K1(r,e,"bottom")}:e}function CU(a,e){const t=e._clip;if(t.disabled)return!1;const r=wse(e,a.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?a.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?a.height:r.bottom+(t.bottom===!0?0:t.bottom)}}let _se=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,n){const i=t.listeners[n],o=t.duration;i.forEach(l=>l({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=cU.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,n)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),l=!0):(i[o]=i[i.length-1],i.pop());l&&(n.draw(),this._notify(n,r,e,"progress")),i.length||(r.running=!1,this._notify(n,r,e,"complete"),r.initial=!1),t+=i.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,n)=>Math.max(r,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let n=r.length-1;for(;n>=0;--n)r[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};var pd=new _se;const mR="transparent",Nse={boolean(a,e,t){return t>.5?e:a},color(a,e,t){const r=sR(a||mR),n=r.valid&&sR(e||mR);return n&&n.valid?n.mix(r,t).hexString():e},number(a,e,t){return a+(e-a)*t}};let jse=class{constructor(e,t,r,n){const i=t[r];n=Ig([e.to,n,i,e.from]);const o=Ig([e.from,i,n]);this._active=!0,this._fn=e.fn||Nse[e.type||typeof o],this._easing=rv[e.easing]||rv.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const n=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Ig([e.to,t,n,e.from]),this._from=Ig([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,n=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||t<r),!this._active){this._target[n]=l,this._notify(!0);return}if(t<0){this._target[n]=i;return}c=t/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[n]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let n=0;n<r.length;n++)r[n][t]()}};class AU{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!br(e))return;const t=Object.keys(wn.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const i=e[n];if(!br(i))return;const o={};for(const l of t)o[l]=i[l];(bn(i.properties)&&i.properties||[n]).forEach(l=>{(l===n||!r.has(l))&&r.set(l,o)})})}_animateOptions(e,t){const r=t.options,n=kse(e,r);if(!n)return[];const i=this._createAnimations(n,r);return r.$shared&&Sse(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,t){const r=this._properties,n=[],i=e.$animations||(e.$animations={}),o=Object.keys(t),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){n.push(...this._animateOptions(e,t));continue}const u=t[d];let h=i[d];const f=r.get(d);if(h)if(f&&h.active()){h.update(f,u,l);continue}else h.cancel();if(!f||!f.duration){e[d]=u;continue}i[d]=h=new jse(f,e,d,u),n.push(h)}return n}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return pd.add(this._chart,r),!0}}function Sse(a,e){const t=[],r=Object.keys(e);for(let n=0;n<r.length;n++){const i=a[r[n]];i&&i.active()&&t.push(i.wait())}return Promise.all(t)}function kse(a,e){if(!e)return;let t=a.options;if(!t){a.options=e;return}return t.$shared&&(a.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function gR(a,e){const t=a&&a.options||{},r=t.reverse,n=t.min===void 0?e:0,i=t.max===void 0?e:0;return{start:r?i:n,end:r?n:i}}function Cse(a,e,t){if(t===!1)return!1;const r=gR(a,t),n=gR(e,t);return{top:n.end,right:r.end,bottom:n.start,left:r.start}}function Ase(a){let e,t,r,n;return br(a)?(e=a.top,t=a.right,r=a.bottom,n=a.left):e=t=r=n=a,{top:e,right:t,bottom:r,left:n,disabled:a===!1}}function TU(a,e){const t=[],r=a._getSortedDatasetMetas(e);let n,i;for(n=0,i=r.length;n<i;++n)t.push(r[n].index);return t}function vR(a,e,t,r={}){const n=a.keys,i=r.mode==="single";let o,l,c,d;if(e===null)return;let u=!1;for(o=0,l=n.length;o<l;++o){if(c=+n[o],c===t){if(u=!0,r.all)continue;break}d=a.values[c],On(d)&&(i||e===0||gc(e)===gc(d))&&(e+=d)}return!u&&!r.all?0:e}function Tse(a,e){const{iScale:t,vScale:r}=e,n=t.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(a),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[n]:u,[i]:a[u]};return l}function US(a,e){const t=a&&a.options.stacked;return t||t===void 0&&e.stack!==void 0}function Mse(a,e,t){return`${a.id}.${e.id}.${t.stack||t.type}`}function Ese(a){const{min:e,max:t,minDefined:r,maxDefined:n}=a.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:n?t:Number.POSITIVE_INFINITY}}function Dse(a,e,t){const r=a[e]||(a[e]={});return r[t]||(r[t]={})}function bR(a,e,t,r){for(const n of e.getMatchingVisibleMetas(r).reverse()){const i=a[n.index];if(t&&i>0||!t&&i<0)return n.index}return null}function yR(a,e){const{chart:t,_cachedMeta:r}=a,n=t._stacks||(t._stacks={}),{iScale:i,vScale:o,index:l}=r,c=i.axis,d=o.axis,u=Mse(i,o,r),h=e.length;let f;for(let p=0;p<h;++p){const g=e[p],{[c]:b,[d]:w}=g,_=g._stacks||(g._stacks={});f=_[d]=Dse(n,u,b),f[l]=w,f._top=bR(f,o,!0,r.type),f._bottom=bR(f,o,!1,r.type);const k=f._visualValues||(f._visualValues={});k[l]=w}}function GS(a,e){const t=a.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function Ise(a,e){return Sh(a,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Rse(a,e,t){return Sh(a,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Vm(a,e){const t=a.controller.index,r=a.vScale&&a.vScale.axis;if(r){e=e||a._parsed;for(const n of e){const i=n._stacks;if(!i||i[r]===void 0||i[r][t]===void 0)return;delete i[r][t],i[r]._visualValues!==void 0&&i[r]._visualValues[t]!==void 0&&delete i[r]._visualValues[t]}}}const WS=a=>a==="reset"||a==="none",wR=(a,e)=>e?a:Object.assign({},a),Lse=(a,e,t)=>a&&!e.hidden&&e._stacked&&{keys:TU(t,!0),values:null};class kh{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=US(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Vm(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),n=(h,f,p,g)=>h==="x"?f:h==="r"?g:p,i=t.xAxisID=$a(r.xAxisID,GS(e,"x")),o=t.yAxisID=$a(r.yAxisID,GS(e,"y")),l=t.rAxisID=$a(r.rAxisID,GS(e,"r")),c=t.indexAxis,d=t.iAxisID=n(c,i,o,l),u=t.vAxisID=n(c,o,i,l);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(l),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&rR(this._data,this),e._stacked&&Vm(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(br(t)){const n=this._cachedMeta;this._data=Tse(t,n)}else if(r!==t){if(r){rR(r,this);const n=this._cachedMeta;Vm(n),n._parsed=[]}t&&Object.isExtensible(t)&&bie(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let n=!1;this._dataCheck();const i=t._stacked;t._stacked=US(t.vScale,t),t.stack!==r.stack&&(n=!0,Vm(t),t.stack=r.stack),this._resyncElements(e),(n||i!==t._stacked)&&(yR(this,t._parsed),t._stacked=US(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:n}=this,{iScale:i,_stacked:o}=r,l=i.axis;let c=e===0&&t===n.length?!0:r._sorted,d=e>0&&r._parsed[e-1],u,h,f;if(this._parsing===!1)r._parsed=n,r._sorted=!0,f=n;else{bn(n[e])?f=this.parseArrayData(r,n,e,t):br(n[e])?f=this.parseObjectData(r,n,e,t):f=this.parsePrimitiveData(r,n,e,t);const p=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<t;++u)r._parsed[u+e]=h=f[u],c&&(p()&&(c=!1),d=h);r._sorted=c}o&&yR(this,f)}parsePrimitiveData(e,t,r,n){const{iScale:i,vScale:o}=e,l=i.axis,c=o.axis,d=i.getLabels(),u=i===o,h=new Array(n);let f,p,g;for(f=0,p=n;f<p;++f)g=f+r,h[f]={[l]:u||i.parse(d[g],g),[c]:o.parse(t[g],g)};return h}parseArrayData(e,t,r,n){const{xScale:i,yScale:o}=e,l=new Array(n);let c,d,u,h;for(c=0,d=n;c<d;++c)u=c+r,h=t[u],l[c]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return l}parseObjectData(e,t,r,n){const{xScale:i,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(n);let u,h,f,p;for(u=0,h=n;u<h;++u)f=u+r,p=t[f],d[u]={x:i.parse(fh(p,l),f),y:o.parse(fh(p,c),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const n=this.chart,i=this._cachedMeta,o=t[e.axis],l={keys:TU(n,!0),values:t._stacks[e.axis]._visualValues};return vR(l,o,i.index,{mode:r})}updateRangeFromParsed(e,t,r,n){const i=r[t.axis];let o=i===null?NaN:i;const l=n&&r._stacks[t.axis];n&&l&&(n.values=l,o=vR(n,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const r=this._cachedMeta,n=r._parsed,i=r._sorted&&e===r.iScale,o=n.length,l=this._getOtherScale(e),c=Lse(t,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Ese(l);let f,p;function g(){p=n[f];const b=p[l.axis];return!On(p[e.axis])||u>b||h<b}for(f=0;f<o&&!(!g()&&(this.updateRangeFromParsed(d,e,p,c),i));++f);if(i){for(f=o-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(d,e,p,c);break}}return d}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let n,i,o;for(n=0,i=t.length;n<i;++n)o=t[n][e.axis],On(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,n=t.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=Ase($a(this.options.clip,Cse(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,n=r.data||[],i=t.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||n.length-l,d=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,l,c),u=l;u<l+c;++u){const h=n[u];h.hidden||(h.active&&d?o.push(h):h.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const n=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=Rse(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=n.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Ise(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const n=t==="active",i=this._cachedDataOpts,o=e+"-"+t,l=i[o],c=this.enableOptionSharing&&Av(r);if(l)return wR(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=n?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),u),p=Object.keys(wn.elements[e]),g=()=>this.getContext(r,n,t),b=d.resolveNamedOptions(f,p,g,h);return b.$shared&&(b.$shared=c,i[o]=Object.freeze(wR(b,c))),b}_resolveAnimations(e,t,r){const n=this.chart,i=this._cachedDataOpts,o=`animation-${t}`,l=i[o];if(l)return l;let c;if(n.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,t),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(e,r,t))}const d=new AU(n,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||WS(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),n=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(t,i)||i!==n;return this.updateSharedOptions(i,t,r),{sharedOptions:i,includeOptions:o}}updateElement(e,t,r,n){WS(n)?Object.assign(e,r):this._resolveAnimations(t,n).update(e,r)}updateSharedOptions(e,t,r){e&&!WS(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,n){e.active=n;const i=this.getStyle(t,n);this._resolveAnimations(t,r,n).update(e,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const n=r.length,i=t.length,o=Math.min(i,n);o&&this.parse(0,o),i>n?this._insertElements(n,i-n,e):i<n&&this._removeElements(i,n-i)}_insertElements(e,t,r=!0){const n=this._cachedMeta,i=n.data,o=e+t;let l;const c=d=>{for(d.length+=t,l=d.length-1;l>=o;l--)d[l]=d[l-t]};for(c(i),l=e;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(n._parsed),this.parse(e,t),r&&this.updateElements(i,e,t,"reset")}updateElements(e,t,r,n){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const n=r._parsed.splice(e,t);r._stacked&&Vm(r,n)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,n]=e;this[t](r,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Ose(a,e){if(!a._cache.$bar){const t=a.getMatchingVisibleMetas(e);let r=[];for(let n=0,i=t.length;n<i;n++)r=r.concat(t[n].controller.getAllParsedValues(a));a._cache.$bar=lU(r.sort((n,i)=>n-i))}return a._cache.$bar}function Pse(a){const e=a.iScale,t=Ose(e,a.type);let r=e._length,n,i,o,l;const c=()=>{o===32767||o===-32768||(Av(l)&&(r=Math.min(r,Math.abs(o-l)||r)),l=o)};for(n=0,i=t.length;n<i;++n)o=e.getPixelForValue(t[n]),c();for(l=void 0,n=0,i=e.ticks.length;n<i;++n)o=e.getPixelForTick(n),c();return r}function Bse(a,e,t,r){const n=t.barThickness;let i,o;return fr(n)?(i=e.min*t.categoryPercentage,o=t.barPercentage):(i=n*r,o=1),{chunk:i/r,ratio:o,start:e.pixels[a]-i/2}}function zse(a,e,t,r){const n=e.pixels,i=n[a];let o=a>0?n[a-1]:null,l=a<n.length-1?n[a+1]:null;const c=t.categoryPercentage;o===null&&(o=i-(l===null?e.end-e.start:l-i)),l===null&&(l=i+i-o);const d=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/r,ratio:t.barPercentage,start:d}}function Fse(a,e,t,r){const n=t.parse(a[0],r),i=t.parse(a[1],r),o=Math.min(n,i),l=Math.max(n,i);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),e[t.axis]=d,e._custom={barStart:c,barEnd:d,start:n,end:i,min:o,max:l}}function MU(a,e,t,r){return bn(a)?Fse(a,e,t,r):e[t.axis]=t.parse(a,r),e}function _R(a,e,t,r){const n=a.iScale,i=a.vScale,o=n.getLabels(),l=n===i,c=[];let d,u,h,f;for(d=t,u=t+r;d<u;++d)f=e[d],h={},h[n.axis]=l||n.parse(o[d],d),c.push(MU(f,h,i,d));return c}function $S(a){return a&&a.barStart!==void 0&&a.barEnd!==void 0}function Vse(a,e,t){return a!==0?gc(a):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function Hse(a){let e,t,r,n,i;return a.horizontal?(e=a.base>a.x,t="left",r="right"):(e=a.base<a.y,t="bottom",r="top"),e?(n="end",i="start"):(n="start",i="end"),{start:t,end:r,reverse:e,top:n,bottom:i}}function Use(a,e,t,r){let n=e.borderSkipped;const i={};if(!n){a.borderSkipped=i;return}if(n===!0){a.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:u}=Hse(a);n==="middle"&&t&&(a.enableBorderRadius=!0,(t._top||0)===r?n=d:(t._bottom||0)===r?n=u:(i[NR(u,o,l,c)]=!0,n=d)),i[NR(n,o,l,c)]=!0,a.borderSkipped=i}function NR(a,e,t,r){return r?(a=Gse(a,e,t),a=jR(a,t,e)):a=jR(a,e,t),a}function Gse(a,e,t){return a===e?t:a===t?e:a}function jR(a,e,t){return a==="start"?e:a==="end"?t:a}function Wse(a,{inflateAmount:e},t){a.inflateAmount=e==="auto"?t===1?.33:0:e}class $se extends kh{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,r,n){return _R(e,t,r,n)}parseArrayData(e,t,r,n){return _R(e,t,r,n)}parseObjectData(e,t,r,n){const{iScale:i,vScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,u=o.axis==="x"?l:c,h=[];let f,p,g,b;for(f=r,p=r+n;f<p;++f)b=t[f],g={},g[i.axis]=i.parse(fh(b,d),f),h.push(MU(fh(b,u),g,o,f));return h}updateRangeFromParsed(e,t,r,n){super.updateRangeFromParsed(e,t,r,n);const i=r._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:n}=t,i=this.getParsed(e),o=i._custom,l=$S(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(i[n.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,n){const i=n==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(t,n);for(let p=t;p<t+r;p++){const g=this.getParsed(p),b=i||fr(g[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),w=this._calculateBarIndexPixels(p,u),_=(g._stacks||{})[l.axis],k={horizontal:d,base:b.base,enableBorderRadius:!_||$S(g._custom)||o===_._top||o===_._bottom,x:d?b.head:w.center,y:d?w.center:b.head,height:d?w.size:Math.abs(b.size),width:d?Math.abs(b.size):w.size};f&&(k.options=h||this.resolveDataElementOptions(p,e[p].active?"active":n));const T=k.options||e[p].options;Use(k,T,_,o),Wse(k,T,u.ratio),this.updateElement(e[p],p,k,n)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,n=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=r.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(t),c=l&&l[r.axis],d=u=>{const h=u._parsed.find(p=>p[r.axis]===c),f=h&&h[u.vScale.axis];if(fr(f)||isNaN(f))return!0};for(const u of n)if(!(t!==void 0&&d(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[$a(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,r){const n=this._getStacks(e,r),i=t!==void 0?n.indexOf(t):-1;return i===-1?n.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,n=[];let i,o;for(i=0,o=t.data.length;i<o;++i)n.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const l=e.barThickness;return{min:l||Pse(t),pixels:n,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:n},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(e),d=c._custom,u=$S(d);let h=c[t.axis],f=0,p=r?this.applyStack(t,c,r):h,g,b;p!==h&&(f=p-h,p=h),u&&(h=d.barStart,p=d.barEnd-d.barStart,h!==0&&gc(h)!==gc(d.barEnd)&&(f=0),f+=h);const w=!fr(i)&&!u?i:f;let _=t.getPixelForValue(w);if(this.chart.getDataVisibility(e)?g=t.getPixelForValue(f+p):g=_,b=g-_,Math.abs(b)<o){b=Vse(b,t,l)*o,h===l&&(_-=b/2);const k=t.getPixelForDecimal(0),T=t.getPixelForDecimal(1),D=Math.min(k,T),I=Math.max(k,T);_=Math.max(Math.min(_,I),D),g=_+b,r&&!u&&(c._stacks[t.axis]._visualValues[n]=t.getValueForPixel(g)-t.getValueForPixel(_))}if(_===t.getPixelForValue(l)){const k=gc(b)*t.getLineWidthForValue(l)/2;_+=k,b-=k}return{size:b,base:_,head:g,center:g+b/2}}_calculateBarIndexPixels(e,t){const r=t.scale,n=this.options,i=n.skipNull,o=$a(n.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(t.grouped){const u=i?this._getStackCount(e):t.stackCount,h=n.barThickness==="flex"?zse(e,t,n,u*d):Bse(e,t,n,u*d),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf($a(f,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+p;l=h.start+h.chunk*g+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=r.getPixelForValue(this.getParsed(e)[r.axis],e),c=Math.min(o,t.min*t.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,n=r.length;let i=0;for(;i<n;++i)this.getParsed(i)[t.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}class Yse extends kh{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,n){const i=super.parsePrimitiveData(e,t,r,n);for(let o=0;o<i.length;o++)i[o]._custom=this.resolveDataElementOptions(o+r).radius;return i}parseArrayData(e,t,r,n){const i=super.parseArrayData(e,t,r,n);for(let o=0;o<i.length;o++){const l=t[r+o];i[o]._custom=$a(l[2],this.resolveDataElementOptions(o+r).radius)}return i}parseObjectData(e,t,r,n){const i=super.parseObjectData(e,t,r,n);for(let o=0;o<i.length;o++){const l=t[r+o];i[o]._custom=$a(l&&l.r&&+l.r,this.resolveDataElementOptions(o+r).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:i}=t,o=this.getParsed(e),l=n.getLabelForValue(o.x),c=i.getLabelForValue(o.y),d=o._custom;return{label:r[e]||"",value:"("+l+", "+c+(d?", "+d:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,n){const i=n==="reset",{iScale:o,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,n),u=o.axis,h=l.axis;for(let f=t;f<t+r;f++){const p=e[f],g=!i&&this.getParsed(f),b={},w=b[u]=i?o.getPixelForDecimal(.5):o.getPixelForValue(g[u]),_=b[h]=i?l.getBasePixel():l.getPixelForValue(g[h]);b.skip=isNaN(w)||isNaN(_),d&&(b.options=c||this.resolveDataElementOptions(f,p.active?"active":n),i&&(b.options.radius=0)),this.updateElement(p,f,b,n)}}resolveDataElementOptions(e,t){const r=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const i=n.radius;return t!=="active"&&(n.radius=0),n.radius+=$a(r&&r._custom,i),n}}function qse(a,e,t){let r=1,n=1,i=0,o=0;if(e<xn){const l=a,c=l+e,d=Math.cos(l),u=Math.sin(l),h=Math.cos(c),f=Math.sin(c),p=(T,D,I)=>Tv(T,l,c,!0)?1:Math.max(D,D*t,I,I*t),g=(T,D,I)=>Tv(T,l,c,!0)?-1:Math.min(D,D*t,I,I*t),b=p(0,d,h),w=p($n,u,f),_=g(Tr,d,h),k=g(Tr+$n,u,f);r=(b-_)/2,n=(w-k)/2,i=-(b+_)/2,o=-(w+k)/2}return{ratioX:r,ratioY:n,offsetX:i,offsetY:o}}class dT extends kh{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:r,textAlign:n,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((c,d)=>{const h=e.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:h.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(d),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:n,pointStyle:r,borderRadius:o&&(l||h.borderRadius),index:d}}):[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=r;else{let i=c=>+r[c];if(br(r[e])){const{key:c="value"}=this._parsing;i=d=>+fh(r[d],c)}let o,l;for(o=e,l=e+t;o<l;++o)n._parsed[o]=i(o)}}_getRotation(){return yl(this.options.rotation-90)}_getCircumference(){return yl(this.options.circumference)}_getRotationExtents(){let e=xn,t=-xn;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const n=this.chart.getDatasetMeta(r).controller,i=n._getRotation(),o=n._getCircumference();e=Math.min(e,i),t=Math.max(t,i+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,n=this._cachedMeta,i=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-o)/2,0),c=Math.min(nie(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:b}=qse(h,u,c),w=(r.width-o)/f,_=(r.height-o)/p,k=Math.max(Math.min(w,_)/2,0),T=rU(this.options.radius,k),D=Math.max(T*c,0),I=(T-D)/this._getVisibleDatasetWeightTotal();this.offsetX=g*T,this.offsetY=b*T,n.total=this.calculateTotal(),this.outerRadius=T-I*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-I*d,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const r=this.options,n=this._cachedMeta,i=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*i/xn)}updateElements(e,t,r,n){const i=n==="reset",o=this.chart,l=o.chartArea,d=o.options.animation,u=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=i&&d.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:b,includeOptions:w}=this._getSharedOptions(t,n);let _=this._getRotation(),k;for(k=0;k<t;++k)_+=this._circumference(k,i);for(k=t;k<t+r;++k){const T=this._circumference(k,i),D=e[k],I={x:u+this.offsetX,y:h+this.offsetY,startAngle:_,endAngle:_+T,circumference:T,outerRadius:g,innerRadius:p};w&&(I.options=b||this.resolveDataElementOptions(k,D.active?"active":n)),_+=T,this.updateElement(D,k,I,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r=0,n;for(n=0;n<t.length;n++){const i=e._parsed[n];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(n)&&!t[n].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?xn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],i=_b(t._parsed[e],r.options.locale);return{label:n[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const r=this.chart;let n,i,o,l,c;if(!e){for(n=0,i=r.data.datasets.length;n<i;++n)if(r.isDatasetVisible(n)){o=r.getDatasetMeta(n),e=o.data,l=o.controller;break}}if(!e)return 0;for(n=0,i=e.length;n<i;++n)c=l.resolveDataElementOptions(n),c.borderAlign!=="inner"&&(t=Math.max(t,c.borderWidth||0,c.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,n=e.length;r<n;++r){const i=this.resolveDataElementOptions(r);t=Math.max(t,i.offset||0,i.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max($a(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Xse extends kh{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:n=[],_dataset:i}=t,o=this.chart._animationsDisabled;let{start:l,count:c}=uU(t,n,o);this._drawStart=l,this._drawCount=c,hU(t)&&(l=0,c=n.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=n;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:d},e),this.updateElements(n,l,c,e)}updateElements(e,t,r,n){const i=n==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,n),f=o.axis,p=l.axis,{spanGaps:g,segment:b}=this.options,w=mx(g)?g:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||i||n==="none",k=t+r,T=e.length;let D=t>0&&this.getParsed(t-1);for(let I=0;I<T;++I){const O=e[I],P=_?O:{};if(I<t||I>=k){P.skip=!0;continue}const V=this.getParsed(I),G=fr(V[p]),Q=P[f]=o.getPixelForValue(V[f],I),$=P[p]=i||G?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,V,c):V[p],I);P.skip=isNaN(Q)||isNaN($)||G,P.stop=I>0&&Math.abs(V[f]-D[f])>w,b&&(P.parsed=V,P.raw=d.data[I]),h&&(P.options=u||this.resolveDataElementOptions(I,O.active?"active":n)),_||this.updateElement(O,I,P,n),D=V}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return r;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class EU extends kh{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:n}}=e.legend.options;return t.labels.map((i,o)=>{const c=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:n,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],i=_b(t._parsed[e].r,r.options.locale);return{label:n[e]||"",value:i}}parseObjectData(e,t,r,n){return yU.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,r=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(n/2,0),o=Math.max(r.cutoutPercentage?i/100*r.cutoutPercentage:1,0),l=(i-o)/e.getVisibleDatasetCount();this.outerRadius=i-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,t,r,n){const i=n==="reset",o=this.chart,c=o.options.animation,d=this._cachedMeta.rScale,u=d.xCenter,h=d.yCenter,f=d.getIndexAngle(0)-.5*Tr;let p=f,g;const b=360/this.countVisibleElements();for(g=0;g<t;++g)p+=this._computeAngle(g,n,b);for(g=t;g<t+r;g++){const w=e[g];let _=p,k=p+this._computeAngle(g,n,b),T=o.getDataVisibility(g)?d.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=k,i&&(c.animateScale&&(T=0),c.animateRotate&&(_=k=f));const D={x:u,y:h,innerRadius:0,outerRadius:T,startAngle:_,endAngle:k,options:this.resolveDataElementOptions(g,w.active?"active":n)};this.updateElement(w,g,D,n)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((r,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?yl(this.resolveDataElementOptions(e,t).angle||r):0}}class Zse extends dT{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class Kse extends kh{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,n){return yU.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta,r=t.dataset,n=t.data||[],i=t.iScale.getLabels();if(r.points=n,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const l={_loop:!0,_fullLoop:i.length===n.length,options:o};this.updateElement(r,void 0,l,e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,r,n){const i=this._cachedMeta.rScale,o=n==="reset";for(let l=t;l<t+r;l++){const c=e[l],d=this.resolveDataElementOptions(l,c.active?"active":n),u=i.getPointPositionForValue(l,this.getParsed(l).r),h=o?i.xCenter:u.x,f=o?i.yCenter:u.y,p={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:d};this.updateElement(c,l,p,n)}}}class Qse extends kh{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:i}=t,o=this.getParsed(e),l=n.getLabelForValue(o.x),c=i.getLabelForValue(o.y);return{label:r[e]||"",value:"("+l+", "+c+")"}}update(e){const t=this._cachedMeta,{data:r=[]}=t,n=this.chart._animationsDisabled;let{start:i,count:o}=uU(t,r,n);if(this._drawStart=i,this._drawCount=o,hU(t)&&(i=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:c}=t;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=r;const d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(l,void 0,{animated:!n,options:d},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,i,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,n){const i=n==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,u=this.resolveDataElementOptions(t,n),h=this.getSharedOptions(u),f=this.includeOptions(n,h),p=o.axis,g=l.axis,{spanGaps:b,segment:w}=this.options,_=mx(b)?b:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||i||n==="none";let T=t>0&&this.getParsed(t-1);for(let D=t;D<t+r;++D){const I=e[D],O=this.getParsed(D),P=k?I:{},V=fr(O[g]),G=P[p]=o.getPixelForValue(O[p],D),Q=P[g]=i||V?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,O,c):O[g],D);P.skip=isNaN(G)||isNaN(Q)||V,P.stop=D>0&&Math.abs(O[p]-T[p])>_,w&&(P.parsed=O,P.raw=d.data[D]),f&&(P.options=h||this.resolveDataElementOptions(D,I.active?"active":n)),k||this.updateElement(I,D,P,n),T=O}this.updateSharedOptions(h,n,u)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let l=0;for(let c=t.length-1;c>=0;--c)l=Math.max(l,t[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const r=e.dataset,n=r.options&&r.options.borderWidth||0;if(!t.length)return n;const i=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,i,o)/2}}var Jse=Object.freeze({__proto__:null,BarController:$se,BubbleController:Yse,DoughnutController:dT,LineController:Xse,PieController:Zse,PolarAreaController:EU,RadarController:Kse,ScatterController:Qse});function ef(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class uT{static override(e){Object.assign(uT.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return ef()}parse(){return ef()}format(){return ef()}add(){return ef()}diff(){return ef()}startOf(){return ef()}endOf(){return ef()}}var eoe={_date:uT};function toe(a,e,t,r){const{controller:n,data:i,_sorted:o}=a,l=n._cachedMeta.iScale,c=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&i.length){const d=l._reversePixels?gie:_d;if(r){if(n._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=d(i,e,t-h),p=d(i,e,t+h);return{lo:f.lo,hi:p.hi}}}}else{const u=d(i,e,t);if(c){const{vScale:h}=n._cachedMeta,{_parsed:f}=a,p=f.slice(0,u.lo+1).reverse().findIndex(b=>!fr(b[h.axis]));u.lo-=Math.max(0,p);const g=f.slice(u.hi).findIndex(b=>!fr(b[h.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:i.length-1}}function G_(a,e,t,r,n){const i=a.getSortedVisibleDatasetMetas(),o=t[e];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:h,hi:f}=toe(i[l],e,o,n);for(let p=h;p<=f;++p){const g=u[p];g.skip||r(g,d,p)}}}function aoe(a){const e=a.indexOf("x")!==-1,t=a.indexOf("y")!==-1;return function(r,n){const i=e?Math.abs(r.x-n.x):0,o=t?Math.abs(r.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function YS(a,e,t,r,n){const i=[];return!n&&!a.isPointInArea(e)||G_(a,t,e,function(l,c,d){!n&&!Nd(l,a.chartArea,0)||l.inRange(e.x,e.y,r)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function roe(a,e,t,r){let n=[];function i(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=sU(o,{x:e.x,y:e.y});Tv(h,d,u)&&n.push({element:o,datasetIndex:l,index:c})}return G_(a,t,e,i),n}function noe(a,e,t,r,n,i){let o=[];const l=aoe(t);let c=Number.POSITIVE_INFINITY;function d(u,h,f){const p=u.inRange(e.x,e.y,n);if(r&&!p)return;const g=u.getCenterPoint(n);if(!(!!i||a.isPointInArea(g))&&!p)return;const w=l(e,g);w<c?(o=[{element:u,datasetIndex:h,index:f}],c=w):w===c&&o.push({element:u,datasetIndex:h,index:f})}return G_(a,t,e,d),o}function qS(a,e,t,r,n,i){return!i&&!a.isPointInArea(e)?[]:t==="r"&&!r?roe(a,e,t,n):noe(a,e,t,r,n,i)}function SR(a,e,t,r,n){const i=[],o=t==="x"?"inXRange":"inYRange";let l=!1;return G_(a,t,e,(c,d,u)=>{c[o]&&c[o](e[t],n)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,n))}),r&&!l?[]:i}var ioe={modes:{index(a,e,t,r){const n=Mf(e,a),i=t.axis||"x",o=t.includeInvisible||!1,l=t.intersect?YS(a,n,i,r,o):qS(a,n,i,!1,r,o),c=[];return l.length?(a.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(a,e,t,r){const n=Mf(e,a),i=t.axis||"xy",o=t.includeInvisible||!1;let l=t.intersect?YS(a,n,i,r,o):qS(a,n,i,!1,r,o);if(l.length>0){const c=l[0].datasetIndex,d=a.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(a,e,t,r){const n=Mf(e,a),i=t.axis||"xy",o=t.includeInvisible||!1;return YS(a,n,i,r,o)},nearest(a,e,t,r){const n=Mf(e,a),i=t.axis||"xy",o=t.includeInvisible||!1;return qS(a,n,i,t.intersect,r,o)},x(a,e,t,r){const n=Mf(e,a);return SR(a,n,"x",t.intersect,r)},y(a,e,t,r){const n=Mf(e,a);return SR(a,n,"y",t.intersect,r)}}};const DU=["left","top","right","bottom"];function Hm(a,e){return a.filter(t=>t.pos===e)}function kR(a,e){return a.filter(t=>DU.indexOf(t.pos)===-1&&t.box.axis===e)}function Um(a,e){return a.sort((t,r)=>{const n=e?r:t,i=e?t:r;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function soe(a){const e=[];let t,r,n,i,o,l;for(t=0,r=(a||[]).length;t<r;++t)n=a[t],{position:i,options:{stack:o,stackWeight:l=1}}=n,e.push({index:t,box:n,pos:i,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&i+o,stackWeight:l});return e}function ooe(a){const e={};for(const t of a){const{stack:r,pos:n,stackWeight:i}=t;if(!r||!DU.includes(n))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function loe(a,e){const t=ooe(a),{vBoxMaxWidth:r,hBoxMaxHeight:n}=e;let i,o,l;for(i=0,o=a.length;i<o;++i){l=a[i];const{fullSize:c}=l.box,d=t[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*r:c&&e.availableWidth,l.height=n):(l.width=r,l.height=u?u*n:c&&e.availableHeight)}return t}function coe(a){const e=soe(a),t=Um(e.filter(d=>d.box.fullSize),!0),r=Um(Hm(e,"left"),!0),n=Um(Hm(e,"right")),i=Um(Hm(e,"top"),!0),o=Um(Hm(e,"bottom")),l=kR(e,"x"),c=kR(e,"y");return{fullSize:t,leftAndTop:r.concat(i),rightAndBottom:n.concat(c).concat(o).concat(l),chartArea:Hm(e,"chartArea"),vertical:r.concat(n).concat(c),horizontal:i.concat(o).concat(l)}}function CR(a,e,t,r){return Math.max(a[t],e[t])+Math.max(a[r],e[r])}function IU(a,e){a.top=Math.max(a.top,e.top),a.left=Math.max(a.left,e.left),a.bottom=Math.max(a.bottom,e.bottom),a.right=Math.max(a.right,e.right)}function doe(a,e,t,r){const{pos:n,box:i}=t,o=a.maxPadding;if(!br(n)){t.size&&(a[n]-=t.size);const h=r[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?i.height:i.width),t.size=h.size/h.count,a[n]+=t.size}i.getPadding&&IU(o,i.getPadding());const l=Math.max(0,e.outerWidth-CR(o,a,"left","right")),c=Math.max(0,e.outerHeight-CR(o,a,"top","bottom")),d=l!==a.w,u=c!==a.h;return a.w=l,a.h=c,t.horizontal?{same:d,other:u}:{same:u,other:d}}function uoe(a){const e=a.maxPadding;function t(r){const n=Math.max(e[r]-a[r],0);return a[r]+=n,n}a.y+=t("top"),a.x+=t("left"),t("right"),t("bottom")}function hoe(a,e){const t=e.maxPadding;function r(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{i[o]=Math.max(e[o],t[o])}),i}return r(a?["left","right"]:["top","bottom"])}function Rg(a,e,t,r){const n=[];let i,o,l,c,d,u;for(i=0,o=a.length,d=0;i<o;++i){l=a[i],c=l.box,c.update(l.width||e.w,l.height||e.h,hoe(l.horizontal,e));const{same:h,other:f}=doe(e,t,l,r);d|=h&&n.length,u=u||f,c.fullSize||n.push(l)}return d&&Rg(n,e,t,r)||u}function Q1(a,e,t,r,n){a.top=t,a.left=e,a.right=e+r,a.bottom=t+n,a.width=r,a.height=n}function AR(a,e,t,r){const n=t.padding;let{x:i,y:o}=e;for(const l of a){const c=l.box,d=r[l.stack]||{placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=e.w*u,f=d.size||c.height;Av(d.start)&&(o=d.start),c.fullSize?Q1(c,n.left,o,t.outerWidth-n.right-n.left,f):Q1(c,e.left+d.placed,o,h,f),d.start=o,d.placed+=h,o=c.bottom}else{const h=e.h*u,f=d.size||c.width;Av(d.start)&&(i=d.start),c.fullSize?Q1(c,i,n.top,f,t.outerHeight-n.bottom-n.top):Q1(c,i,e.top+d.placed,f,h),d.start=i,d.placed+=h,i=c.right}}e.x=i,e.y=o}var is={addBox(a,e){a.boxes||(a.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},a.boxes.push(e)},removeBox(a,e){const t=a.boxes?a.boxes.indexOf(e):-1;t!==-1&&a.boxes.splice(t,1)},configure(a,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(a,e,t,r){if(!a)return;const n=os(a.options.layout.padding),i=Math.max(e-n.width,0),o=Math.max(t-n.height,0),l=coe(a.boxes),c=l.vertical,d=l.horizontal;Yr(a.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const u=c.reduce((b,w)=>w.box.options&&w.box.options.display===!1?b:b+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:n,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},n);IU(f,os(r));const p=Object.assign({maxPadding:f,w:i,h:o,x:n.left,y:n.top},n),g=loe(c.concat(d),h);Rg(l.fullSize,p,h,g),Rg(c,p,h,g),Rg(d,p,h,g)&&Rg(c,p,h,g),uoe(p),AR(l.leftAndTop,p,h,g),p.x+=p.w,p.y+=p.h,AR(l.rightAndBottom,p,h,g),a.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Yr(l.chartArea,b=>{const w=b.box;Object.assign(w,a.chartArea),w.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class RU{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,n){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):r)}}isAttached(e){return!0}updateConfig(e){}}class foe extends RU{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Aw="$chartjs",poe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},TR=a=>a===null||a==="";function xoe(a,e){const t=a.style,r=a.getAttribute("height"),n=a.getAttribute("width");if(a[Aw]={initial:{height:r,width:n,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",TR(n)){const i=hR(a,"width");i!==void 0&&(a.width=i)}if(TR(r))if(a.style.height==="")a.height=a.width/(e||2);else{const i=hR(a,"height");i!==void 0&&(a.height=i)}return a}const LU=dse?{passive:!0}:!1;function moe(a,e,t){a&&a.addEventListener(e,t,LU)}function goe(a,e,t){a&&a.canvas&&a.canvas.removeEventListener(e,t,LU)}function voe(a,e){const t=poe[a.type]||a.type,{x:r,y:n}=Mf(a,e);return{type:t,chart:e,native:a,x:r!==void 0?r:null,y:n!==void 0?n:null}}function p2(a,e){for(const t of a)if(t===e||t.contains(e))return!0}function boe(a,e,t){const r=a.canvas,n=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||p2(l.addedNodes,r),o=o&&!p2(l.removedNodes,r);o&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}function yoe(a,e,t){const r=a.canvas,n=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||p2(l.removedNodes,r),o=o&&!p2(l.addedNodes,r);o&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}const Ev=new Map;let MR=0;function OU(){const a=window.devicePixelRatio;a!==MR&&(MR=a,Ev.forEach((e,t)=>{t.currentDevicePixelRatio!==a&&e()}))}function woe(a,e){Ev.size||window.addEventListener("resize",OU),Ev.set(a,e)}function _oe(a){Ev.delete(a),Ev.size||window.removeEventListener("resize",OU)}function Noe(a,e,t){const r=a.canvas,n=r&&cT(r);if(!n)return;const i=dU((l,c)=>{const d=n.clientWidth;t(l,c),d<n.clientWidth&&t()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return o.observe(n),woe(a,i),o}function XS(a,e,t){t&&t.disconnect(),e==="resize"&&_oe(a)}function joe(a,e,t){const r=a.canvas,n=dU(i=>{a.ctx!==null&&t(voe(i,a))},a);return moe(r,e,n),n}class Soe extends RU{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(xoe(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[Aw])return!1;const r=t[Aw].initial;["height","width"].forEach(i=>{const o=r[i];fr(o)?t.removeAttribute(i):t.setAttribute(i,o)});const n=r.style||{};return Object.keys(n).forEach(i=>{t.style[i]=n[i]}),t.width=t.width,delete t[Aw],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),o={attach:boe,detach:yoe,resize:Noe}[t]||joe;n[t]=o(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),n=r[t];if(!n)return;({attach:XS,detach:XS,resize:XS}[t]||goe)(e,t,n),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,n){return cse(e,t,r,n)}isAttached(e){const t=e&&cT(e);return!!(t&&t.isConnected)}}function koe(a){return!lT()||typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas?foe:Soe}let Vd=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return mx(this.x)&&mx(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const n={};return e.forEach(i=>{n[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),n}};function Coe(a,e){const t=a.options.ticks,r=Aoe(a),n=Math.min(t.maxTicksLimit||r,r),i=t.major.enabled?Moe(e):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>n)return Eoe(e,d,i,o/n),d;const u=Toe(i,e,n);if(o>0){let h,f;const p=o>1?Math.round((c-l)/(o-1)):null;for(J1(e,d,u,fr(p)?0:l-p,l),h=0,f=o-1;h<f;h++)J1(e,d,u,i[h],i[h+1]);return J1(e,d,u,c,fr(p)?e.length:c+p),d}return J1(e,d,u),d}function Aoe(a){const e=a.options.offset,t=a._tickSize(),r=a._length/t+(e?0:1),n=a._maxLength/t;return Math.floor(Math.min(r,n))}function Toe(a,e,t){const r=Doe(a),n=e.length/t;if(!r)return Math.max(n,1);const i=hie(r);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>n)return c}return Math.max(n,1)}function Moe(a){const e=[];let t,r;for(t=0,r=a.length;t<r;t++)a[t].major&&e.push(t);return e}function Eoe(a,e,t,r){let n=0,i=t[0],o;for(r=Math.ceil(r),o=0;o<a.length;o++)o===i&&(e.push(a[o]),n++,i=t[n*r])}function J1(a,e,t,r,n){const i=$a(r,0),o=Math.min($a(n,a.length),a.length);let l=0,c,d,u;for(t=Math.ceil(t),n&&(c=n-r,t=c/Math.floor(c/t)),u=i;u<0;)l++,u=Math.round(i+l*t);for(d=Math.max(i,0);d<o;d++)d===u&&(e.push(a[d]),l++,u=Math.round(i+l*t))}function Doe(a){const e=a.length;let t,r;if(e<2)return!1;for(r=a[0],t=1;t<e;++t)if(a[t]-a[t-1]!==r)return!1;return r}const Ioe=a=>a==="left"?"right":a==="right"?"left":a,ER=(a,e,t)=>e==="top"||e==="left"?a[e]+t:a[e]-t,DR=(a,e)=>Math.min(e||a,a);function IR(a,e){const t=[],r=a.length/e,n=a.length;let i=0;for(;i<n;i+=r)t.push(a[Math.floor(i)]);return t}function Roe(a,e,t){const r=a.ticks.length,n=Math.min(e,r-1),i=a._startPixel,o=a._endPixel,l=1e-6;let c=a.getPixelForTick(n),d;if(!(t&&(r===1?d=Math.max(c-i,o-c):e===0?d=(a.getPixelForTick(1)-c)/2:d=(c-a.getPixelForTick(n-1))/2,c+=n<e?d:-d,c<i-l||c>o+l)))return c}function Loe(a,e){Yr(a,t=>{const r=t.gc,n=r.length/2;let i;if(n>e){for(i=0;i<n;++i)delete t.data[r[i]];r.splice(0,n)}})}function Gm(a){return a.drawTicks?a.tickLength:0}function RR(a,e){if(!a.display)return 0;const t=wi(a.font,e),r=os(a.padding);return(bn(a.text)?a.text.length:1)*t.lineHeight+r.height}function Ooe(a,e){return Sh(a,{scale:e,type:"scale"})}function Poe(a,e,t){return Sh(a,{tick:t,index:e,type:"tick"})}function Boe(a,e,t){let r=aT(a);return(t&&e!=="right"||!t&&e==="right")&&(r=Ioe(r)),r}function zoe(a,e,t,r){const{top:n,left:i,bottom:o,right:l,chart:c}=a,{chartArea:d,scales:u}=c;let h=0,f,p,g;const b=o-n,w=l-i;if(a.isHorizontal()){if(p=es(r,i,l),br(t)){const _=Object.keys(t)[0],k=t[_];g=u[_].getPixelForValue(k)+b-e}else t==="center"?g=(d.bottom+d.top)/2+b-e:g=ER(a,t,e);f=l-i}else{if(br(t)){const _=Object.keys(t)[0],k=t[_];p=u[_].getPixelForValue(k)-w+e}else t==="center"?p=(d.left+d.right)/2-w+e:p=ER(a,t,e);g=es(r,o,n),h=t==="left"?-$n:$n}return{titleX:p,titleY:g,maxWidth:f,rotation:h}}let Nb=class PU extends Vd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:n}=this;return e=xo(e,Number.POSITIVE_INFINITY),t=xo(t,Number.NEGATIVE_INFINITY),r=xo(r,Number.POSITIVE_INFINITY),n=xo(n,Number.NEGATIVE_INFINITY),{min:xo(e,r),max:xo(t,n),minDefined:On(e),maxDefined:On(t)}}getMinMax(e){let{min:t,max:r,minDefined:n,maxDefined:i}=this.getUserBounds(),o;if(n&&i)return{min:t,max:r};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,e),n||(t=Math.min(t,o.min)),i||(r=Math.max(r,o.max));return t=i&&t>r?r:t,r=n&&t>r?t:r,{min:xo(t,xo(r,t)),max:xo(r,xo(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){hn(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:n,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Vie(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?IR(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Coe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){hn(this.options.afterUpdate,[this])}beforeSetDimensions(){hn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){hn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),hn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){hn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,n,i;for(r=0,n=e.length;r<n;r++)i=e[r],i.label=hn(t.callback,[i.value,r,e],this)}afterTickToLabelConversion(){hn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){hn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=DR(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,i=t.maxRotation;let o=n,l,c,d;if(!this._isVisible()||!t.display||n>=i||r<=1||!this.isHorizontal()){this.labelRotation=n;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=Di(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/r:p/(r-1),h+6>l&&(l=p/(r-(e.offset?.5:1)),c=this.maxHeight-Gm(e.grid)-t.padding-RR(e.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),o=eT(Math.min(Math.asin(Di((u.highest.height+6)/l,-1,1)),Math.asin(Di(c/d,-1,1))-Math.asin(Di(f/d,-1,1)))),o=Math.max(n,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){hn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){hn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:n,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=RR(n,t.options.font);if(l?(e.width=this.maxWidth,e.height=Gm(i)+c):(e.height=this.maxHeight,e.width=Gm(i)+c),r.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),p=r.padding*2,g=yl(this.labelRotation),b=Math.cos(g),w=Math.sin(g);if(l){const _=r.mirror?0:w*h.width+b*f.height;e.height=Math.min(this.maxHeight,e.height+_+p)}else{const _=r.mirror?0:b*h.width+w*f.height;e.width=Math.min(this.maxWidth,e.width+_+p)}this._calculatePadding(d,u,w,b)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,n){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;c?d?(f=n*e.width,p=r*t.height):(f=r*e.height,p=n*t.width):i==="start"?p=t.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,p=t.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=t.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){hn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)fr(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=IR(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:n,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(t/DR(t,r));let d=0,u=0,h,f,p,g,b,w,_,k,T,D,I;for(h=0;h<t;h+=c){if(g=e[h].label,b=this._resolveTickFontOptions(h),n.font=w=b.string,_=i[w]=i[w]||{data:{},gc:[]},k=b.lineHeight,T=D=0,!fr(g)&&!bn(g))T=h2(n,_.data,_.gc,T,g),D=k;else if(bn(g))for(f=0,p=g.length;f<p;++f)I=g[f],!fr(I)&&!bn(I)&&(T=h2(n,_.data,_.gc,T,I),D+=k);o.push(T),l.push(D),d=Math.max(T,d),u=Math.max(D,u)}Loe(i,t);const O=o.indexOf(d),P=l.indexOf(u),V=G=>({width:o[G]||0,height:l[G]||0});return{first:V(0),last:V(t-1),widest:V(O),highest:V(P),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return mie(this._alignToPixels?Jh(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=Poe(this.getContext(),e,r))}return this.$context||(this.$context=Ooe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=yl(this.labelRotation),r=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*r>l*n?l/r:c/n:c*n<l*r?c/r:l/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,n=this.options,{grid:i,position:o,border:l}=n,c=i.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Gm(i),p=[],g=l.setContext(this.getContext()),b=g.display?g.width:0,w=b/2,_=function(W){return Jh(r,W,b)};let k,T,D,I,O,P,V,G,Q,$,ae,J;if(o==="top")k=_(this.bottom),P=this.bottom-f,G=k-w,$=_(e.top)+w,J=e.bottom;else if(o==="bottom")k=_(this.top),$=e.top,J=_(e.bottom)-w,P=k+w,G=this.top+f;else if(o==="left")k=_(this.right),O=this.right-f,V=k-w,Q=_(e.left)+w,ae=e.right;else if(o==="right")k=_(this.left),Q=e.left,ae=_(e.right)-w,O=k+w,V=this.left+f;else if(t==="x"){if(o==="center")k=_((e.top+e.bottom)/2+.5);else if(br(o)){const W=Object.keys(o)[0],K=o[W];k=_(this.chart.scales[W].getPixelForValue(K))}$=e.top,J=e.bottom,P=k+w,G=P+f}else if(t==="y"){if(o==="center")k=_((e.left+e.right)/2);else if(br(o)){const W=Object.keys(o)[0],K=o[W];k=_(this.chart.scales[W].getPixelForValue(K))}O=k-w,V=O-f,Q=e.left,ae=e.right}const U=$a(n.ticks.maxTicksLimit,h),F=Math.max(1,Math.ceil(h/U));for(T=0;T<h;T+=F){const W=this.getContext(T),K=i.setContext(W),ee=l.setContext(W),ne=K.lineWidth,re=K.color,Z=ee.dash||[],ie=ee.dashOffset,de=K.tickWidth,fe=K.tickColor,he=K.tickBorderDash||[],ve=K.tickBorderDashOffset;D=Roe(this,T,c),D!==void 0&&(I=Jh(r,D,ne),d?O=V=Q=ae=I:P=G=$=J=I,p.push({tx1:O,ty1:P,tx2:V,ty2:G,x1:Q,y1:$,x2:ae,y2:J,width:ne,color:re,borderDash:Z,borderDashOffset:ie,tickWidth:de,tickColor:fe,tickBorderDash:he,tickBorderDashOffset:ve}))}return this._ticksLength=h,this._borderValue=k,p}_computeLabelItems(e){const t=this.axis,r=this.options,{position:n,ticks:i}=r,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=i,f=Gm(r.grid),p=f+u,g=h?-u:p,b=-yl(this.labelRotation),w=[];let _,k,T,D,I,O,P,V,G,Q,$,ae,J="middle";if(n==="top")O=this.bottom-g,P=this._getXAxisLabelAlignment();else if(n==="bottom")O=this.top+g,P=this._getXAxisLabelAlignment();else if(n==="left"){const F=this._getYAxisLabelAlignment(f);P=F.textAlign,I=F.x}else if(n==="right"){const F=this._getYAxisLabelAlignment(f);P=F.textAlign,I=F.x}else if(t==="x"){if(n==="center")O=(e.top+e.bottom)/2+p;else if(br(n)){const F=Object.keys(n)[0],W=n[F];O=this.chart.scales[F].getPixelForValue(W)+p}P=this._getXAxisLabelAlignment()}else if(t==="y"){if(n==="center")I=(e.left+e.right)/2-p;else if(br(n)){const F=Object.keys(n)[0],W=n[F];I=this.chart.scales[F].getPixelForValue(W)}P=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(c==="start"?J="top":c==="end"&&(J="bottom"));const U=this._getLabelSizes();for(_=0,k=l.length;_<k;++_){T=l[_],D=T.label;const F=i.setContext(this.getContext(_));V=this.getPixelForTick(_)+i.labelOffset,G=this._resolveTickFontOptions(_),Q=G.lineHeight,$=bn(D)?D.length:1;const W=$/2,K=F.color,ee=F.textStrokeColor,ne=F.textStrokeWidth;let re=P;o?(I=V,P==="inner"&&(_===k-1?re=this.options.reverse?"left":"right":_===0?re=this.options.reverse?"right":"left":re="center"),n==="top"?d==="near"||b!==0?ae=-$*Q+Q/2:d==="center"?ae=-U.highest.height/2-W*Q+Q:ae=-U.highest.height+Q/2:d==="near"||b!==0?ae=Q/2:d==="center"?ae=U.highest.height/2-W*Q:ae=U.highest.height-$*Q,h&&(ae*=-1),b!==0&&!F.showLabelBackdrop&&(I+=Q/2*Math.sin(b))):(O=V,ae=(1-$)*Q/2);let Z;if(F.showLabelBackdrop){const ie=os(F.backdropPadding),de=U.heights[_],fe=U.widths[_];let he=ae-ie.top,ve=0-ie.left;switch(J){case"middle":he-=de/2;break;case"bottom":he-=de;break}switch(P){case"center":ve-=fe/2;break;case"right":ve-=fe;break;case"inner":_===k-1?ve-=fe:_>0&&(ve-=fe/2);break}Z={left:ve,top:he,width:fe+ie.width,height:de+ie.height,color:F.backdropColor}}w.push({label:D,font:G,textOffset:ae,options:{rotation:b,color:K,strokeColor:ee,strokeWidth:ne,textAlign:re,textBaseline:J,translation:[I,O],backdrop:Z}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-yl(this.labelRotation))return e==="top"?"left":"right";let n="center";return t.align==="start"?n="left":t.align==="end"?n="right":t.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:n,padding:i}}=this.options,o=this._getLabelSizes(),l=e+i,c=o.widest.width;let d,u;return t==="left"?n?(u=this.right+i,r==="near"?d="left":r==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,r==="near"?d="right":r==="center"?(d="center",u-=c/2):(d="left",u=this.left)):t==="right"?n?(u=this.left+i,r==="near"?d="right":r==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,r==="near"?d="left":r==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:n,width:i,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,n,i,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(i=>i.value===e);return n>=0?t.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const l=(c,d,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(d.x,d.y),r.stroke(),r.restore())};if(t.display)for(i=0,o=n.length;i<o;++i){const c=n[i];t.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:n}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const l=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=Jh(e,this.left,o)-o/2,u=Jh(e,this.right,l)+l/2,h=f=c):(h=Jh(e,this.top,o)-o/2,f=Jh(e,this.bottom,l)+l/2,d=u=c),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(d,h),t.lineTo(u,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,n=this._computeLabelArea();n&&V_(r,n);const i=this.getLabelItems(e);for(const o of i){const l=o.options,c=o.font,d=o.label,u=o.textOffset;x0(r,d,0,u,c,l)}n&&H_(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:n}}=this;if(!r.display)return;const i=wi(r.font),o=os(r.padding),l=r.align;let c=i.lineHeight/2;t==="bottom"||t==="center"||br(t)?(c+=o.bottom,bn(r.text)&&(c+=i.lineHeight*(r.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=zoe(this,c,t,l);x0(e,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:f,textAlign:Boe(l,t,n),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=$a(e.grid&&e.grid.z,-1),n=$a(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==PU.prototype.draw?[{z:t,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",n=[];let i,o;for(i=0,o=t.length;i<o;++i){const l=t[i];l[r]===this.id&&(!e||l.type===e)&&n.push(l)}return n}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return wi(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}};class ey{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;Hoe(t)&&(r=this.register(t));const n=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in n||(n[i]=e,Foe(e,o,r),this.override&&wn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,n=this.scope;r in t&&delete t[r],n&&r in wn[n]&&(delete wn[n][r],this.override&&delete p0[r])}}function Foe(a,e,t){const r=Cv(Object.create(null),[t?wn.get(t):{},wn.get(e),a.defaults]);wn.set(e,r),a.defaultRoutes&&Voe(e,a.defaultRoutes),a.descriptors&&wn.describe(e,a.descriptors)}function Voe(a,e){Object.keys(e).forEach(t=>{const r=t.split("."),n=r.pop(),i=[a].concat(r).join("."),o=e[t].split("."),l=o.pop(),c=o.join(".");wn.route(i,n,c,l)})}function Hoe(a){return"id"in a&&"defaults"in a}class Uoe{constructor(){this.controllers=new ey(kh,"datasets",!0),this.elements=new ey(Vd,"elements"),this.plugins=new ey(Object,"plugins"),this.scales=new ey(Nb,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(n=>{const i=r||this._getRegistryForType(n);r||i.isForType(n)||i===this.plugins&&n.id?this._exec(e,i,n):Yr(n,o=>{const l=r||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,t,r){const n=JA(e);hn(r["before"+n],[],r),t[e](r),hn(r["after"+n],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const n=t.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return n}}var nc=new Uoe;class Goe{constructor(){this._init=void 0}notify(e,t,r,n){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=n?this._descriptors(e).filter(n):this._descriptors(e),o=this._notify(i,e,t,r);return t==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,r,n){n=n||{};for(const i of e){const o=i.plugin,l=o[r],c=[t,n,i.options];if(hn(l,c,o)===!1&&n.cancelable)return!1}return!0}invalidate(){fr(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,n=$a(r.options&&r.options.plugins,{}),i=Woe(r);return n===!1&&!t?[]:Yoe(e,i,n,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,n=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(n(t,r),e,"stop"),this._notify(n(r,t),e,"start")}}function Woe(a){const e={},t=[],r=Object.keys(nc.plugins.items);for(let i=0;i<r.length;i++)t.push(nc.getPlugin(r[i]));const n=a.plugins||[];for(let i=0;i<n.length;i++){const o=n[i];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function $oe(a,e){return!e&&a===!1?null:a===!0?{}:a}function Yoe(a,{plugins:e,localIds:t},r,n){const i=[],o=a.getContext();for(const l of e){const c=l.id,d=$oe(r[c],n);d!==null&&i.push({plugin:l,options:qoe(a.config,{plugin:l,local:t[c]},d,o)})}return i}function qoe(a,{plugin:e,local:t},r,n){const i=a.pluginScopeKeys(e),o=a.getOptionScopes(r,i);return t&&e.defaults&&o.push(e.defaults),a.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function JC(a,e){const t=wn.datasets[a]||{};return((e.datasets||{})[a]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function Xoe(a,e){let t=a;return a==="_index_"?t=e:a==="_value_"&&(t=e==="x"?"y":"x"),t}function Zoe(a,e){return a===e?"_index_":"_value_"}function LR(a){if(a==="x"||a==="y"||a==="r")return a}function Koe(a){if(a==="top"||a==="bottom")return"x";if(a==="left"||a==="right")return"y"}function e4(a,...e){if(LR(a))return a;for(const t of e){const r=t.axis||Koe(t.position)||a.length>1&&LR(a[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${a}' axis. Please provide 'axis' or 'position' option.`)}function OR(a,e,t){if(t[e+"AxisID"]===a)return{axis:e}}function Qoe(a,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===a||r.yAxisID===a);if(t.length)return OR(a,"x",t[0])||OR(a,"y",t[0])}return{}}function Joe(a,e){const t=p0[a.type]||{scales:{}},r=e.scales||{},n=JC(a.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const l=r[o];if(!br(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=e4(o,l,Qoe(o,a),wn.scales[l.type]),d=Zoe(c,n),u=t.scales||{};i[o]=tv(Object.create(null),[{axis:c},l,u[c],u[d]])}),a.data.datasets.forEach(o=>{const l=o.type||a.type,c=o.indexAxis||JC(l,e),u=(p0[l]||{}).scales||{};Object.keys(u).forEach(h=>{const f=Xoe(h,c),p=o[f+"AxisID"]||f;i[p]=i[p]||Object.create(null),tv(i[p],[{axis:f},r[p],u[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];tv(l,[wn.scales[l.type],wn.scale])}),i}function BU(a){const e=a.options||(a.options={});e.plugins=$a(e.plugins,{}),e.scales=Joe(a,e)}function zU(a){return a=a||{},a.datasets=a.datasets||[],a.labels=a.labels||[],a}function ele(a){return a=a||{},a.data=zU(a.data),BU(a),a}const PR=new Map,FU=new Set;function ty(a,e){let t=PR.get(a);return t||(t=e(),PR.set(a,t),FU.add(t)),t}const Wm=(a,e,t)=>{const r=fh(e,t);r!==void 0&&a.add(r)};class tle{constructor(e){this._config=ele(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=zU(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),BU(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ty(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return ty(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return ty(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return ty(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let n=r.get(e);return(!n||t)&&(n=new Map,r.set(e,n)),n}getOptionScopes(e,t,r){const{options:n,type:i}=this,o=this._cachedScopes(e,r),l=o.get(t);if(l)return l;const c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(h=>Wm(c,e,h))),u.forEach(h=>Wm(c,n,h)),u.forEach(h=>Wm(c,p0[i]||{},h)),u.forEach(h=>Wm(c,wn,h)),u.forEach(h=>Wm(c,KC,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),FU.has(t)&&o.set(t,d),d}chartOptionScopes(){const{options:e,type:t}=this;return[e,p0[t]||{},wn.datasets[t]||{},{type:t},wn,KC]}resolveNamedOptions(e,t,r,n=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=BR(this._resolverCache,e,n);let c=o;if(rle(o,t)){i.$shared=!1,r=ph(r)?r():r;const d=this.createResolver(e,r,l);c=gx(o,r,d)}for(const d of t)i[d]=c[d];return i}createResolver(e,t,r=[""],n){const{resolver:i}=BR(this._resolverCache,e,r);return br(t)?gx(i,t,void 0,n):i}}function BR(a,e,t){let r=a.get(e);r||(r=new Map,a.set(e,r));const n=t.join();let i=r.get(n);return i||(i={resolver:iT(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},r.set(n,i)),i}const ale=a=>br(a)&&Object.getOwnPropertyNames(a).some(e=>ph(a[e]));function rle(a,e){const{isScriptable:t,isIndexable:r}=mU(a);for(const n of e){const i=t(n),o=r(n),l=(o||i)&&a[n];if(i&&(ph(l)||ale(l))||o&&bn(l))return!0}return!1}var nle="4.5.1";const ile=["top","bottom","left","right","chartArea"];function zR(a,e){return a==="top"||a==="bottom"||ile.indexOf(a)===-1&&e==="x"}function FR(a,e){return function(t,r){return t[a]===r[a]?t[e]-r[e]:t[a]-r[a]}}function VR(a){const e=a.chart,t=e.options.animation;e.notifyPlugins("afterRender"),hn(t&&t.onComplete,[a],e)}function sle(a){const e=a.chart,t=e.options.animation;hn(t&&t.onProgress,[a],e)}function VU(a){return lT()&&typeof a=="string"?a=document.getElementById(a):a&&a.length&&(a=a[0]),a&&a.canvas&&(a=a.canvas),a}const Tw={},HR=a=>{const e=VU(a);return Object.values(Tw).filter(t=>t.canvas===e).pop()};function ole(a,e,t){const r=Object.keys(a);for(const n of r){const i=+n;if(i>=e){const o=a[n];delete a[n],(t>0||i>e)&&(a[i+t]=o)}}}function lle(a,e,t,r){return!t||a.type==="mouseout"?null:r?e:a}class Wi{static defaults=wn;static instances=Tw;static overrides=p0;static registry=nc;static version=nle;static getChart=HR;static register(...e){nc.add(...e),UR()}static unregister(...e){nc.remove(...e),UR()}constructor(e,t){const r=this.config=new tle(t),n=VU(e),i=HR(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||koe(n)),this.platform.updateConfig(r);const l=this.platform.acquireContext(n,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=rie(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Goe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=yie(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Tw[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}pd.listen(this,"complete",VR),pd.listen(this,"progress",sle),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:n,_aspectRatio:i}=this;return fr(e)?t&&i?i:n?r/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return nc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():uR(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return lR(this.canvas,this.ctx),this}stop(){return pd.stop(this),this}resize(e,t){pd.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,n=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,e,t,i),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,uR(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),hn(r.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Yr(t,(r,n)=>{r.id=n})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,n=Object.keys(r).reduce((o,l)=>(o[l]=!1,o),{});let i=[];t&&(i=i.concat(Object.keys(t).map(o=>{const l=t[o],c=e4(o,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),Yr(i,o=>{const l=o.options,c=l.id,d=e4(c,l),u=$a(l.type,o.dtype);(l.position===void 0||zR(l.position,d)!==zR(o.dposition))&&(l.position=o.dposition),n[c]=!0;let h=null;if(c in r&&r[c].type===u)h=r[c];else{const f=nc.getScale(u);h=new f({id:c,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,e)}),Yr(n,(o,l)=>{o||delete r[l]}),Yr(r,o=>{is.configure(this,o,o.options),is.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((n,i)=>n.index-i.index),r>t){for(let n=t;n<r;++n)this._destroyDatasetMeta(n);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(FR("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,n)=>{t.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,n;for(this._removeUnreferencedMetasets(),r=0,n=t.length;r<n;r++){const i=t[r];let o=this.getDatasetMeta(r);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=l,o.indexAxis=i.indexAxis||JC(l,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const c=nc.getController(l),{datasetElementType:d,dataElementType:u}=wn.datasets[l];Object.assign(c,{dataElementType:nc.getElement(u),datasetElementType:d&&nc.getElement(d)}),o.controller=new c(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Yr(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),f=!n&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),n||Yr(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(FR("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Yr(this.scales,e=>{is.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!J8(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:n,count:i}of t){const o=r==="_removeElements"?-i:i;ole(e,n,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),n=r(0);for(let i=1;i<t;i++)if(!J8(n,r(i)))return;return Array.from(n).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;is.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],Yr(this.boxes,n=>{r&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,i)=>{n._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,ph(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),n={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(r.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(pd.has(this)?this.attached&&!pd.running(this)&&pd.start(this):(this.draw(),VR({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let n,i;for(n=0,i=t.length;n<i;++n){const o=t[n];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},n=CU(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(n&&V_(t,n),e.controller.draw(),n&&H_(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Nd(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,n){const i=ioe.modes[t];return typeof i=="function"?i(this,e,r,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let n=r.filter(i=>i&&i._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=Sh(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const n=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,n);Av(t)?(i.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(l=>l.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),pd.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),lR(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Tw[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(i,o)=>{t.addEventListener(this,i,o),e[i]=o},n=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};Yr(this.options.events,i=>r(i,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(c,d)=>{t.addEventListener(this,c,d),e[c]=d},n=(c,d)=>{e[c]&&(t.removeEventListener(this,c,d),delete e[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{n("attach",l),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),r("attach",l)},t.isAttached(this.canvas)?l():o()}unbindEvents(){Yr(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Yr(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const n=r?"set":"remove";let i,o,l,c;for(t==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!c2(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const n=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(t,e),l=r?e:i(e,t);o.length&&this.updateHoverStyle(o,n.mode,!1),l.length&&n.mode&&this.updateHoverStyle(l,n.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,n)===!1)return;const i=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(i||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:n=[],options:i}=this,o=t,l=this._getActiveElements(e,n,r,o),c=cie(e),d=lle(e,this._lastEvent,r,c);r&&(this._lastEvent=null,hn(i.onHover,[e,l,this],this),c&&hn(i.onClick,[e,l,this],this));const u=!c2(l,n);return(u||t)&&(this._active=l,this._updateHoverStyles(l,n,t)),this._lastEvent=d,u}_getActiveElements(e,t,r,n){if(e.type==="mouseout")return[];if(!r)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,n)}}function UR(){return Yr(Wi.instances,a=>a._plugins.invalidate())}function cle(a,e,t){const{startAngle:r,x:n,y:i,outerRadius:o,innerRadius:l,options:c}=e,{borderWidth:d,borderJoinStyle:u}=c,h=Math.min(d/o,ns(r-t));if(a.beginPath(),a.arc(n,i,o-d/2,r+h/2,t-h/2),l>0){const f=Math.min(d/l,ns(r-t));a.arc(n,i,l+d/2,t-f/2,r+f/2,!0)}else{const f=Math.min(d/2,o*ns(r-t));if(u==="round")a.arc(n,i,f,t-Tr/2,r+Tr/2,!0);else if(u==="bevel"){const p=2*f*f,g=-p*Math.cos(t+Tr/2)+n,b=-p*Math.sin(t+Tr/2)+i,w=p*Math.cos(r+Tr/2)+n,_=p*Math.sin(r+Tr/2)+i;a.lineTo(g,b),a.lineTo(w,_)}}a.closePath(),a.moveTo(0,0),a.rect(0,0,a.canvas.width,a.canvas.height),a.clip("evenodd")}function dle(a,e,t){const{startAngle:r,pixelMargin:n,x:i,y:o,outerRadius:l,innerRadius:c}=e;let d=n/l;a.beginPath(),a.arc(i,o,l,r-d,t+d),c>n?(d=n/c,a.arc(i,o,c,t+d,r-d,!0)):a.arc(i,o,n,t+$n,r-$n),a.closePath(),a.clip()}function ule(a){return nT(a,["outerStart","outerEnd","innerStart","innerEnd"])}function hle(a,e,t,r){const n=ule(a.options.borderRadius),i=(t-e)/2,o=Math.min(i,r*e/2),l=c=>{const d=(t-Math.min(i,c))*r/2;return Di(c,0,Math.min(i,d))};return{outerStart:l(n.outerStart),outerEnd:l(n.outerEnd),innerStart:Di(n.innerStart,0,o),innerEnd:Di(n.innerEnd,0,o)}}function fp(a,e,t,r){return{x:t+a*Math.cos(e),y:r+a*Math.sin(e)}}function x2(a,e,t,r,n,i){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=e,h=Math.max(e.outerRadius+r+t-d,0),f=u>0?u+r+t+d:0;let p=0;const g=n-c;if(r){const F=u>0?u-r:0,W=h>0?h-r:0,K=(F+W)/2,ee=K!==0?g*K/(K+r):g;p=(g-ee)/2}const b=Math.max(.001,g*h-t/Tr)/h,w=(g-b)/2,_=c+w+p,k=n-w-p,{outerStart:T,outerEnd:D,innerStart:I,innerEnd:O}=hle(e,f,h,k-_),P=h-T,V=h-D,G=_+T/P,Q=k-D/V,$=f+I,ae=f+O,J=_+I/$,U=k-O/ae;if(a.beginPath(),i){const F=(G+Q)/2;if(a.arc(o,l,h,G,F),a.arc(o,l,h,F,Q),D>0){const ne=fp(V,Q,o,l);a.arc(ne.x,ne.y,D,Q,k+$n)}const W=fp(ae,k,o,l);if(a.lineTo(W.x,W.y),O>0){const ne=fp(ae,U,o,l);a.arc(ne.x,ne.y,O,k+$n,U+Math.PI)}const K=(k-O/f+(_+I/f))/2;if(a.arc(o,l,f,k-O/f,K,!0),a.arc(o,l,f,K,_+I/f,!0),I>0){const ne=fp($,J,o,l);a.arc(ne.x,ne.y,I,J+Math.PI,_-$n)}const ee=fp(P,_,o,l);if(a.lineTo(ee.x,ee.y),T>0){const ne=fp(P,G,o,l);a.arc(ne.x,ne.y,T,_-$n,G)}}else{a.moveTo(o,l);const F=Math.cos(G)*h+o,W=Math.sin(G)*h+l;a.lineTo(F,W);const K=Math.cos(Q)*h+o,ee=Math.sin(Q)*h+l;a.lineTo(K,ee)}a.closePath()}function fle(a,e,t,r,n){const{fullCircles:i,startAngle:o,circumference:l}=e;let c=e.endAngle;if(i){x2(a,e,t,r,c,n);for(let d=0;d<i;++d)a.fill();isNaN(l)||(c=o+(l%xn||xn))}return x2(a,e,t,r,c,n),a.fill(),c}function ple(a,e,t,r,n){const{fullCircles:i,startAngle:o,circumference:l,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:f,borderRadius:p}=c,g=c.borderAlign==="inner";if(!d)return;a.setLineDash(h||[]),a.lineDashOffset=f,g?(a.lineWidth=d*2,a.lineJoin=u||"round"):(a.lineWidth=d,a.lineJoin=u||"bevel");let b=e.endAngle;if(i){x2(a,e,t,r,b,n);for(let w=0;w<i;++w)a.stroke();isNaN(l)||(b=o+(l%xn||xn))}g&&dle(a,e,b),c.selfJoin&&b-o>=Tr&&p===0&&u!=="miter"&&cle(a,e,b),i||(x2(a,e,t,r,b,n),a.stroke())}class xle extends Vd{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const n=this.getProps(["x","y"],r),{angle:i,distance:o}=sU(n,{x:e,y:t}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,p=$a(h,c-l),g=Tv(i,l,c)&&l!==c,b=p>=xn||g,w=wd(o,d+f,u+f);return b&&w}getCenterPoint(e){const{x:t,y:r,startAngle:n,endAngle:i,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:d}=this.options,u=(n+i)/2,h=(o+l+d+c)/2;return{x:t+Math.cos(u)*h,y:r+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,n=(t.offset||0)/4,i=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=r>xn?Math.floor(r/xn):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*n,Math.sin(l)*n);const c=1-Math.sin(Math.min(Tr,r||0)),d=n*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,fle(e,this,d,i,o),ple(e,this,d,i,o),e.restore()}}function HU(a,e,t=e){a.lineCap=$a(t.borderCapStyle,e.borderCapStyle),a.setLineDash($a(t.borderDash,e.borderDash)),a.lineDashOffset=$a(t.borderDashOffset,e.borderDashOffset),a.lineJoin=$a(t.borderJoinStyle,e.borderJoinStyle),a.lineWidth=$a(t.borderWidth,e.borderWidth),a.strokeStyle=$a(t.borderColor,e.borderColor)}function mle(a,e,t){a.lineTo(t.x,t.y)}function gle(a){return a.stepped?Die:a.tension||a.cubicInterpolationMode==="monotone"?Iie:mle}function UU(a,e,t={}){const r=a.length,{start:n=0,end:i=r-1}=t,{start:o,end:l}=e,c=Math.max(n,o),d=Math.min(i,l),u=n<o&&i<o||n>l&&i>l;return{count:r,start:c,loop:e.loop,ilen:d<c&&!u?r+d-c:d-c}}function vle(a,e,t,r){const{points:n,options:i}=e,{count:o,start:l,loop:c,ilen:d}=UU(n,t,r),u=gle(i);let{move:h=!0,reverse:f}=r||{},p,g,b;for(p=0;p<=d;++p)g=n[(l+(f?d-p:p))%o],!g.skip&&(h?(a.moveTo(g.x,g.y),h=!1):u(a,b,g,f,i.stepped),b=g);return c&&(g=n[(l+(f?d:0))%o],u(a,b,g,f,i.stepped)),!!c}function ble(a,e,t,r){const n=e.points,{count:i,start:o,ilen:l}=UU(n,t,r),{move:c=!0,reverse:d}=r||{};let u=0,h=0,f,p,g,b,w,_;const k=D=>(o+(d?l-D:D))%i,T=()=>{b!==w&&(a.lineTo(u,w),a.lineTo(u,b),a.lineTo(u,_))};for(c&&(p=n[k(0)],a.moveTo(p.x,p.y)),f=0;f<=l;++f){if(p=n[k(f)],p.skip)continue;const D=p.x,I=p.y,O=D|0;O===g?(I<b?b=I:I>w&&(w=I),u=(h*u+D)/++h):(T(),a.lineTo(D,I),g=O,h=0,b=w=I),_=I}T()}function t4(a){const e=a.options,t=e.borderDash&&e.borderDash.length;return!a._decimated&&!a._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?ble:vle}function yle(a){return a.stepped?use:a.tension||a.cubicInterpolationMode==="monotone"?hse:Ef}function wle(a,e,t,r){let n=e._path;n||(n=e._path=new Path2D,e.path(n,t,r)&&n.closePath()),HU(a,e.options),a.stroke(n)}function _le(a,e,t,r){const{segments:n,options:i}=e,o=t4(e);for(const l of n)HU(a,i,l.style),a.beginPath(),o(a,e,l,{start:t,end:t+r-1})&&a.closePath(),a.stroke()}const Nle=typeof Path2D=="function";function jle(a,e,t,r){Nle&&!e.options.segment?wle(a,e,t,r):_le(a,e,t,r)}class W_ extends Vd{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const n=r.spanGaps?this._loop:this._fullLoop;rse(this._points,r,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=vse(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,n=e[t],i=this.points,o=kU(this,{property:t,start:n,end:n});if(!o.length)return;const l=[],c=yle(r);let d,u;for(d=0,u=o.length;d<u;++d){const{start:h,end:f}=o[d],p=i[h],g=i[f];if(p===g){l.push(p);continue}const b=Math.abs((n-p[t])/(g[t]-p[t])),w=c(p,g,b,r.stepped);w[t]=e[t],l.push(w)}return l.length===1?l[0]:l}pathSegment(e,t,r){return t4(this)(e,this,t,r)}path(e,t,r){const n=this.segments,i=t4(this);let o=this._loop;t=t||0,r=r||this.points.length-t;for(const l of n)o&=i(e,this,l,{start:t,end:t+r-1});return!!o}draw(e,t,r,n){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),jle(e,this,r,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function GR(a,e,t,r){const n=a.options,{[t]:i}=a.getProps([t],r);return Math.abs(e-i)<n.radius+n.hitRadius}class Sle extends Vd{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){const n=this.options,{x:i,y:o}=this.getProps(["x","y"],r);return Math.pow(e-i,2)+Math.pow(t-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return GR(this,e,"x",t)}inYRange(e,t){return GR(this,e,"y",t)}getCenterPoint(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const r=t&&e.borderWidth||0;return(t+r)*2}draw(e,t){const r=this.options;this.skip||r.radius<.1||!Nd(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,QC(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function GU(a,e){const{x:t,y:r,base:n,width:i,height:o}=a.getProps(["x","y","base","width","height"],e);let l,c,d,u,h;return a.horizontal?(h=o/2,l=Math.min(t,n),c=Math.max(t,n),d=r-h,u=r+h):(h=i/2,l=t-h,c=t+h,d=Math.min(r,n),u=Math.max(r,n)),{left:l,top:d,right:c,bottom:u}}function Yu(a,e,t,r){return a?0:Di(e,t,r)}function kle(a,e,t){const r=a.options.borderWidth,n=a.borderSkipped,i=xU(r);return{t:Yu(n.top,i.top,0,t),r:Yu(n.right,i.right,0,e),b:Yu(n.bottom,i.bottom,0,t),l:Yu(n.left,i.left,0,e)}}function Cle(a,e,t){const{enableBorderRadius:r}=a.getProps(["enableBorderRadius"]),n=a.options.borderRadius,i=Kf(n),o=Math.min(e,t),l=a.borderSkipped,c=r||br(n);return{topLeft:Yu(!c||l.top||l.left,i.topLeft,0,o),topRight:Yu(!c||l.top||l.right,i.topRight,0,o),bottomLeft:Yu(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:Yu(!c||l.bottom||l.right,i.bottomRight,0,o)}}function Ale(a){const e=GU(a),t=e.right-e.left,r=e.bottom-e.top,n=kle(a,t/2,r/2),i=Cle(a,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:i},inner:{x:e.left+n.l,y:e.top+n.t,w:t-n.l-n.r,h:r-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function ZS(a,e,t,r){const n=e===null,i=t===null,l=a&&!(n&&i)&&GU(a,r);return l&&(n||wd(e,l.left,l.right))&&(i||wd(t,l.top,l.bottom))}function Tle(a){return a.topLeft||a.topRight||a.bottomLeft||a.bottomRight}function Mle(a,e){a.rect(e.x,e.y,e.w,e.h)}function KS(a,e,t={}){const r=a.x!==t.x?-e:0,n=a.y!==t.y?-e:0,i=(a.x+a.w!==t.x+t.w?e:0)-r,o=(a.y+a.h!==t.y+t.h?e:0)-n;return{x:a.x+r,y:a.y+n,w:a.w+i,h:a.h+o,radius:a.radius}}class Ele extends Vd{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:n}}=this,{inner:i,outer:o}=Ale(this),l=Tle(o.radius)?Mv:Mle;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),l(e,KS(o,t,i)),e.clip(),l(e,KS(i,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),l(e,KS(i,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,r){return ZS(this,e,t,r)}inXRange(e,t){return ZS(this,e,null,t)}inYRange(e,t){return ZS(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+n)/2:t,y:i?r:(r+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var Dle=Object.freeze({__proto__:null,ArcElement:xle,BarElement:Ele,LineElement:W_,PointElement:Sle});const a4=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],WR=a4.map(a=>a.replace("rgb(","rgba(").replace(")",", 0.5)"));function WU(a){return a4[a%a4.length]}function $U(a){return WR[a%WR.length]}function Ile(a,e){return a.borderColor=WU(e),a.backgroundColor=$U(e),++e}function Rle(a,e){return a.backgroundColor=a.data.map(()=>WU(e++)),e}function Lle(a,e){return a.backgroundColor=a.data.map(()=>$U(e++)),e}function Ole(a){let e=0;return(t,r)=>{const n=a.getDatasetMeta(r).controller;n instanceof dT?e=Rle(t,e):n instanceof EU?e=Lle(t,e):n&&(e=Ile(t,e))}}function $R(a){let e;for(e in a)if(a[e].borderColor||a[e].backgroundColor)return!0;return!1}function Ple(a){return a&&(a.borderColor||a.backgroundColor)}function Ble(){return wn.borderColor!=="rgba(0,0,0,0.1)"||wn.backgroundColor!=="rgba(0,0,0,0.1)"}var zle={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(a,e,t){if(!t.enabled)return;const{data:{datasets:r},options:n}=a.config,{elements:i}=n,o=$R(r)||Ple(n)||i&&$R(i)||Ble();if(!t.forceOverride&&o)return;const l=Ole(a);r.forEach(l)}};function Fle(a,e,t,r,n){const i=n.samples||r;if(i>=t)return a.slice(e,e+t);const o=[],l=(t-2)/(i-2);let c=0;const d=e+t-1;let u=e,h,f,p,g,b;for(o[c++]=a[u],h=0;h<i-2;h++){let w=0,_=0,k;const T=Math.floor((h+1)*l)+1+e,D=Math.min(Math.floor((h+2)*l)+1,t)+e,I=D-T;for(k=T;k<D;k++)w+=a[k].x,_+=a[k].y;w/=I,_/=I;const O=Math.floor(h*l)+1+e,P=Math.min(Math.floor((h+1)*l)+1,t)+e,{x:V,y:G}=a[u];for(p=g=-1,k=O;k<P;k++)g=.5*Math.abs((V-w)*(a[k].y-G)-(V-a[k].x)*(_-G)),g>p&&(p=g,f=a[k],b=k);o[c++]=f,u=b}return o[c++]=a[d],o}function Vle(a,e,t,r){let n=0,i=0,o,l,c,d,u,h,f,p,g,b;const w=[],_=e+t-1,k=a[e].x,D=a[_].x-k;for(o=e;o<e+t;++o){l=a[o],c=(l.x-k)/D*r,d=l.y;const I=c|0;if(I===u)d<g?(g=d,h=o):d>b&&(b=d,f=o),n=(i*n+l.x)/++i;else{const O=o-1;if(!fr(h)&&!fr(f)){const P=Math.min(h,f),V=Math.max(h,f);P!==p&&P!==O&&w.push({...a[P],x:n}),V!==p&&V!==O&&w.push({...a[V],x:n})}o>0&&O!==p&&w.push(a[O]),w.push(l),u=I,i=0,g=b=d,h=f=p=o}}return w}function YU(a){if(a._decimated){const e=a._data;delete a._decimated,delete a._data,Object.defineProperty(a,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function YR(a){a.data.datasets.forEach(e=>{YU(e)})}function Hle(a,e){const t=e.length;let r=0,n;const{iScale:i}=a,{min:o,max:l,minDefined:c,maxDefined:d}=i.getUserBounds();return c&&(r=Di(_d(e,i.axis,o).lo,0,t-1)),d?n=Di(_d(e,i.axis,l).hi+1,r,t)-r:n=t-r,{start:r,count:n}}var Ule={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(a,e,t)=>{if(!t.enabled){YR(a);return}const r=a.width;a.data.datasets.forEach((n,i)=>{const{_data:o,indexAxis:l}=n,c=a.getDatasetMeta(i),d=o||n.data;if(Ig([l,a.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const u=a.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||a.options.parsing)return;let{start:h,count:f}=Hle(c,d);const p=t.threshold||4*r;if(f<=p){YU(n);return}fr(o)&&(n._data=d,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let g;switch(t.algorithm){case"lttb":g=Fle(d,h,f,r,t);break;case"min-max":g=Vle(d,h,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}n._decimated=g})},destroy(a){YR(a)}};function Gle(a,e,t){const r=a.segments,n=a.points,i=e.points,o=[];for(const l of r){let{start:c,end:d}=l;d=$_(c,d,n);const u=r4(t,n[c],n[d],l.loop);if(!e.segments){o.push({source:l,target:u,start:n[c],end:n[d]});continue}const h=kU(e,u);for(const f of h){const p=r4(t,i[f.start],i[f.end],f.loop),g=SU(l,n,p);for(const b of g)o.push({source:b,target:f,start:{[t]:qR(u,p,"start",Math.max)},end:{[t]:qR(u,p,"end",Math.min)}})}}return o}function r4(a,e,t,r){if(r)return;let n=e[a],i=t[a];return a==="angle"&&(n=ns(n),i=ns(i)),{property:a,start:n,end:i}}function Wle(a,e){const{x:t=null,y:r=null}=a||{},n=e.points,i=[];return e.segments.forEach(({start:o,end:l})=>{l=$_(o,l,n);const c=n[o],d=n[l];r!==null?(i.push({x:c.x,y:r}),i.push({x:d.x,y:r})):t!==null&&(i.push({x:t,y:c.y}),i.push({x:t,y:d.y}))}),i}function $_(a,e,t){for(;e>a;e--){const r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function qR(a,e,t,r){return a&&e?r(a[t],e[t]):a?a[t]:e?e[t]:0}function qU(a,e){let t=[],r=!1;return bn(a)?(r=!0,t=a):t=Wle(a,e),t.length?new W_({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function XR(a){return a&&a.fill!==!1}function $le(a,e,t){let n=a[e].fill;const i=[e];let o;if(!t)return n;for(;n!==!1&&i.indexOf(n)===-1;){if(!On(n))return n;if(o=a[n],!o)return!1;if(o.visible)return n;i.push(n),n=o.fill}return!1}function Yle(a,e,t){const r=Kle(a);if(br(r))return isNaN(r.value)?!1:r;let n=parseFloat(r);return On(n)&&Math.floor(n)===n?qle(r[0],e,n,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function qle(a,e,t,r){return(a==="-"||a==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function Xle(a,e){let t=null;return a==="start"?t=e.bottom:a==="end"?t=e.top:br(a)?t=e.getPixelForValue(a.value):e.getBasePixel&&(t=e.getBasePixel()),t}function Zle(a,e,t){let r;return a==="start"?r=t:a==="end"?r=e.options.reverse?e.min:e.max:br(a)?r=a.value:r=e.getBaseValue(),r}function Kle(a){const e=a.options,t=e.fill;let r=$a(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Qle(a){const{scale:e,index:t,line:r}=a,n=[],i=r.segments,o=r.points,l=Jle(e,t);l.push(qU({x:null,y:e.bottom},r));for(let c=0;c<i.length;c++){const d=i[c];for(let u=d.start;u<=d.end;u++)ece(n,o[u],l)}return new W_({points:n,options:{}})}function Jle(a,e){const t=[],r=a.getMatchingVisibleMetas("line");for(let n=0;n<r.length;n++){const i=r[n];if(i.index===e)break;i.hidden||t.unshift(i.dataset)}return t}function ece(a,e,t){const r=[];for(let n=0;n<t.length;n++){const i=t[n],{first:o,last:l,point:c}=tce(i,e,"x");if(!(!c||o&&l)){if(o)r.unshift(c);else if(a.push(c),!l)break}}a.push(...r)}function tce(a,e,t){const r=a.interpolate(e,t);if(!r)return{};const n=r[t],i=a.segments,o=a.points;let l=!1,c=!1;for(let d=0;d<i.length;d++){const u=i[d],h=o[u.start][t],f=o[u.end][t];if(wd(n,h,f)){l=n===h,c=n===f;break}}return{first:l,last:c,point:r}}class XU{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:n,y:i,radius:o}=this;return t=t||{start:0,end:xn},e.arc(n,i,o,t.end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:n}=this,i=e.angle;return{x:t+Math.cos(i)*n,y:r+Math.sin(i)*n,angle:i}}}function ace(a){const{chart:e,fill:t,line:r}=a;if(On(t))return rce(e,t);if(t==="stack")return Qle(a);if(t==="shape")return!0;const n=nce(a);return n instanceof XU?n:qU(n,r)}function rce(a,e){const t=a.getDatasetMeta(e);return t&&a.isDatasetVisible(e)?t.dataset:null}function nce(a){return(a.scale||{}).getPointPositionForValue?sce(a):ice(a)}function ice(a){const{scale:e={},fill:t}=a,r=Xle(t,e);if(On(r)){const n=e.isHorizontal();return{x:n?r:null,y:n?null:r}}return null}function sce(a){const{scale:e,fill:t}=a,r=e.options,n=e.getLabels().length,i=r.reverse?e.max:e.min,o=Zle(t,e,i),l=[];if(r.grid.circular){const c=e.getPointPositionForValue(0,i);return new XU({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<n;++c)l.push(e.getPointPositionForValue(c,o));return l}function QS(a,e,t){const r=ace(e),{chart:n,index:i,line:o,scale:l,axis:c}=e,d=o.options,u=d.fill,h=d.backgroundColor,{above:f=h,below:p=h}=u||{},g=n.getDatasetMeta(i),b=CU(n,g);r&&o.points.length&&(V_(a,t),oce(a,{line:o,target:r,above:f,below:p,area:t,scale:l,axis:c,clip:b}),H_(a))}function oce(a,e){const{line:t,target:r,above:n,below:i,area:o,scale:l,clip:c}=e,d=t._loop?"angle":e.axis;a.save();let u=i;i!==n&&(d==="x"?(ZR(a,r,o.top),JS(a,{line:t,target:r,color:n,scale:l,property:d,clip:c}),a.restore(),a.save(),ZR(a,r,o.bottom)):d==="y"&&(KR(a,r,o.left),JS(a,{line:t,target:r,color:i,scale:l,property:d,clip:c}),a.restore(),a.save(),KR(a,r,o.right),u=n)),JS(a,{line:t,target:r,color:u,scale:l,property:d,clip:c}),a.restore()}function ZR(a,e,t){const{segments:r,points:n}=e;let i=!0,o=!1;a.beginPath();for(const l of r){const{start:c,end:d}=l,u=n[c],h=n[$_(c,d,n)];i?(a.moveTo(u.x,u.y),i=!1):(a.lineTo(u.x,t),a.lineTo(u.x,u.y)),o=!!e.pathSegment(a,l,{move:o}),o?a.closePath():a.lineTo(h.x,t)}a.lineTo(e.first().x,t),a.closePath(),a.clip()}function KR(a,e,t){const{segments:r,points:n}=e;let i=!0,o=!1;a.beginPath();for(const l of r){const{start:c,end:d}=l,u=n[c],h=n[$_(c,d,n)];i?(a.moveTo(u.x,u.y),i=!1):(a.lineTo(t,u.y),a.lineTo(u.x,u.y)),o=!!e.pathSegment(a,l,{move:o}),o?a.closePath():a.lineTo(t,h.y)}a.lineTo(t,e.first().y),a.closePath(),a.clip()}function JS(a,e){const{line:t,target:r,property:n,color:i,scale:o,clip:l}=e,c=Gle(t,r,n);for(const{source:d,target:u,start:h,end:f}of c){const{style:{backgroundColor:p=i}={}}=d,g=r!==!0;a.save(),a.fillStyle=p,lce(a,o,l,g&&r4(n,h,f)),a.beginPath();const b=!!t.pathSegment(a,d);let w;if(g){b?a.closePath():QR(a,r,f,n);const _=!!r.pathSegment(a,u,{move:b,reverse:!0});w=b&&_,w||QR(a,r,h,n)}a.closePath(),a.fill(w?"evenodd":"nonzero"),a.restore()}}function lce(a,e,t,r){const n=e.chart.chartArea,{property:i,start:o,end:l}=r||{};if(i==="x"||i==="y"){let c,d,u,h;i==="x"?(c=o,d=n.top,u=l,h=n.bottom):(c=n.left,d=o,u=n.right,h=l),a.beginPath(),t&&(c=Math.max(c,t.left),u=Math.min(u,t.right),d=Math.max(d,t.top),h=Math.min(h,t.bottom)),a.rect(c,d,u-c,h-d),a.clip()}}function QR(a,e,t,r){const n=e.interpolate(t,r);n&&a.lineTo(n.x,n.y)}var cce={id:"filler",afterDatasetsUpdate(a,e,t){const r=(a.data.datasets||[]).length,n=[];let i,o,l,c;for(o=0;o<r;++o)i=a.getDatasetMeta(o),l=i.dataset,c=null,l&&l.options&&l instanceof W_&&(c={visible:a.isDatasetVisible(o),index:o,fill:Yle(l,o,r),chart:a,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,n.push(c);for(o=0;o<r;++o)c=n[o],!(!c||c.fill===!1)&&(c.fill=$le(n,o,t.propagate))},beforeDraw(a,e,t){const r=t.drawTime==="beforeDraw",n=a.getSortedVisibleDatasetMetas(),i=a.chartArea;for(let o=n.length-1;o>=0;--o){const l=n[o].$filler;l&&(l.line.updateControlPoints(i,l.axis),r&&l.fill&&QS(a.ctx,l,i))}},beforeDatasetsDraw(a,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const r=a.getSortedVisibleDatasetMetas();for(let n=r.length-1;n>=0;--n){const i=r[n].$filler;XR(i)&&QS(a.ctx,i,a.chartArea)}},beforeDatasetDraw(a,e,t){const r=e.meta.$filler;!XR(r)||t.drawTime!=="beforeDatasetDraw"||QS(a.ctx,r,a.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const JR=(a,e)=>{let{boxHeight:t=e,boxWidth:r=e}=a;return a.usePointStyle&&(t=Math.min(t,e),r=a.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},dce=(a,e)=>a!==null&&e!==null&&a.datasetIndex===e.datasetIndex&&a.index===e.index;class eL extends Vd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=hn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,n)=>e.sort(r,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,n=wi(r.font),i=n.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=JR(r,i);let d,u;t.font=n.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,n,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,n){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=n+l;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((g,b)=>{const w=r+t/2+i.measureText(g.text).width;(b===0||d[d.length-1]+w+2*l>o)&&(h+=u,d[d.length-(b>0?0:1)]=0,p+=u,f++),c[b]={left:0,top:p,row:f,width:w,height:n},d[d.length-1]+=w+l}),h}_fitCols(e,t,r,n){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-e;let h=l,f=0,p=0,g=0,b=0;return this.legendItems.forEach((w,_)=>{const{itemWidth:k,itemHeight:T}=uce(r,t,i,w,n);_>0&&p+T+2*l>u&&(h+=f+l,d.push({width:f,height:p}),g+=f+l,b++,f=p=0),c[_]={left:g,top:p,col:b,width:k,height:T},f=Math.max(f,k),p+=T+l}),h+=f,d.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:n},rtl:i}}=this,o=nx(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=es(r,this.left+n,this.right-this.lineWidths[l]);for(const d of t)l!==d.row&&(l=d.row,c=es(r,this.left+n,this.right-this.lineWidths[l])),d.top+=this.top+e+n,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+n}else{let l=0,c=es(r,this.top+e+n,this.bottom-this.columnSizes[l].height);for(const d of t)d.col!==l&&(l=d.col,c=es(r,this.top+e+n,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+n,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;V_(e,this),this._draw(),H_(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:n}=this,{align:i,labels:o}=e,l=wn.color,c=nx(e.rtl,this.left,this.width),d=wi(o.font),{padding:u}=o,h=d.size,f=h/2;let p;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=d.string;const{boxWidth:g,boxHeight:b,itemHeight:w}=JR(o,h),_=function(O,P,V){if(isNaN(g)||g<=0||isNaN(b)||b<0)return;n.save();const G=$a(V.lineWidth,1);if(n.fillStyle=$a(V.fillStyle,l),n.lineCap=$a(V.lineCap,"butt"),n.lineDashOffset=$a(V.lineDashOffset,0),n.lineJoin=$a(V.lineJoin,"miter"),n.lineWidth=G,n.strokeStyle=$a(V.strokeStyle,l),n.setLineDash($a(V.lineDash,[])),o.usePointStyle){const Q={radius:b*Math.SQRT2/2,pointStyle:V.pointStyle,rotation:V.rotation,borderWidth:G},$=c.xPlus(O,g/2),ae=P+f;pU(n,Q,$,ae,o.pointStyleWidth&&g)}else{const Q=P+Math.max((h-b)/2,0),$=c.leftForLtr(O,g),ae=Kf(V.borderRadius);n.beginPath(),Object.values(ae).some(J=>J!==0)?Mv(n,{x:$,y:Q,w:g,h:b,radius:ae}):n.rect($,Q,g,b),n.fill(),G!==0&&n.stroke()}n.restore()},k=function(O,P,V){x0(n,V.text,O,P+w/2,d,{strikethrough:V.hidden,textAlign:c.textAlign(V.textAlign)})},T=this.isHorizontal(),D=this._computeTitleHeight();T?p={x:es(i,this.left+u,this.right-r[0]),y:this.top+u+D,line:0}:p={x:this.left+u,y:es(i,this.top+D+u,this.bottom-t[0].height),line:0},_U(this.ctx,e.textDirection);const I=w+u;this.legendItems.forEach((O,P)=>{n.strokeStyle=O.fontColor,n.fillStyle=O.fontColor;const V=n.measureText(O.text).width,G=c.textAlign(O.textAlign||(O.textAlign=o.textAlign)),Q=g+f+V;let $=p.x,ae=p.y;c.setWidth(this.width),T?P>0&&$+Q+u>this.right&&(ae=p.y+=I,p.line++,$=p.x=es(i,this.left+u,this.right-r[p.line])):P>0&&ae+I>this.bottom&&($=p.x=$+t[p.line].width+u,p.line++,ae=p.y=es(i,this.top+D+u,this.bottom-t[p.line].height));const J=c.x($);if(_(J,ae,O),$=wie(G,$+g+f,T?$+Q:this.right,e.rtl),k(c.x($),ae,O),T)p.x+=Q+u;else if(typeof O.text!="string"){const U=d.lineHeight;p.y+=ZU(O,U)+u}else p.y+=I}),NU(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=wi(t.font),n=os(t.padding);if(!t.display)return;const i=nx(e.rtl,this.left,this.width),o=this.ctx,l=t.position,c=r.size/2,d=n.top+c;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=es(e.align,h,this.right-f);else{const g=this.columnSizes.reduce((b,w)=>Math.max(b,w.height),0);u=d+es(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const p=es(l,h,h+f);o.textAlign=i.textAlign(aT(l)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,x0(o,t.text,p,u,r)}_computeTitleHeight(){const e=this.options.title,t=wi(e.font),r=os(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,n,i;if(wd(e,this.left,this.right)&&wd(t,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(n=i[r],wd(e,n.left,n.left+n.width)&&wd(t,n.top,n.top+n.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!pce(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,i=dce(n,r);n&&!i&&hn(t.onLeave,[e,n,this],this),this._hoveredItem=r,r&&!i&&hn(t.onHover,[e,r,this],this)}else r&&hn(t.onClick,[e,r,this],this)}}function uce(a,e,t,r,n){const i=hce(r,a,e,t),o=fce(n,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function hce(a,e,t,r){let n=a.text;return n&&typeof n!="string"&&(n=n.reduce((i,o)=>i.length>o.length?i:o)),e+t.size/2+r.measureText(n).width}function fce(a,e,t){let r=a;return typeof e.text!="string"&&(r=ZU(e,t)),r}function ZU(a,e){const t=a.text?a.text.length:0;return e*t}function pce(a,e){return!!((a==="mousemove"||a==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(a==="click"||a==="mouseup"))}var xce={id:"legend",_element:eL,start(a,e,t){const r=a.legend=new eL({ctx:a.ctx,options:t,chart:a});is.configure(a,r,t),is.addBox(a,r)},stop(a){is.removeBox(a,a.legend),delete a.legend},beforeUpdate(a,e,t){const r=a.legend;is.configure(a,r,t),r.options=t},afterUpdate(a){const e=a.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(a,e){e.replay||a.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(a,e,t){const r=e.datasetIndex,n=t.chart;n.isDatasetVisible(r)?(n.hide(r),e.hidden=!0):(n.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:a=>a.chart.options.color,boxWidth:40,padding:10,generateLabels(a){const e=a.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:n,color:i,useBorderRadius:o,borderRadius:l}}=a.legend.options;return a._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(t?0:void 0),u=os(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:r||d.pointStyle,rotation:d.rotation,textAlign:n||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:a=>a.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:a=>!a.startsWith("on"),labels:{_scriptable:a=>!["generateLabels","filter","sort"].includes(a)}}};class hT extends Vd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const n=bn(r.text)?r.text.length:1;this._padding=os(r.padding);const i=n*wi(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:r,bottom:n,right:i,options:o}=this,l=o.align;let c=0,d,u,h;return this.isHorizontal()?(u=es(l,r,i),h=t+e,d=i-r):(o.position==="left"?(u=r+e,h=es(l,n,t),c=Tr*-.5):(u=i-e,h=es(l,t,n),c=Tr*.5),d=n-t),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=wi(t.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);x0(e,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:d,textAlign:aT(t.align),textBaseline:"middle",translation:[o,l]})}}function mce(a,e){const t=new hT({ctx:a.ctx,options:e,chart:a});is.configure(a,t,e),is.addBox(a,t),a.titleBlock=t}var gce={id:"title",_element:hT,start(a,e,t){mce(a,t)},stop(a){const e=a.titleBlock;is.removeBox(a,e),delete a.titleBlock},beforeUpdate(a,e,t){const r=a.titleBlock;is.configure(a,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ay=new WeakMap;var vce={id:"subtitle",start(a,e,t){const r=new hT({ctx:a.ctx,options:t,chart:a});is.configure(a,r,t),is.addBox(a,r),ay.set(a,r)},stop(a){is.removeBox(a,ay.get(a)),ay.delete(a)},beforeUpdate(a,e,t){const r=ay.get(a);is.configure(a,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Lg={average(a){if(!a.length)return!1;let e,t,r=new Set,n=0,i=0;for(e=0,t=a.length;e<t;++e){const l=a[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();r.add(c.x),n+=c.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((l,c)=>l+c)/r.size,y:n/i}},nearest(a,e){if(!a.length)return!1;let t=e.x,r=e.y,n=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=a.length;i<o;++i){const c=a[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=ZC(e,d);u<n&&(n=u,l=c)}}if(l){const c=l.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function tc(a,e){return e&&(bn(e)?Array.prototype.push.apply(a,e):a.push(e)),a}function xd(a){return(typeof a=="string"||a instanceof String)&&a.indexOf(`
`)>-1?a.split(`
`):a}function bce(a,e){const{element:t,datasetIndex:r,index:n}=e,i=a.getDatasetMeta(r).controller,{label:o,value:l}=i.getLabelAndValue(n);return{chart:a,label:o,parsed:i.getParsed(n),raw:a.data.datasets[r].data[n],formattedValue:l,dataset:i.getDataset(),dataIndex:n,datasetIndex:r,element:t}}function tL(a,e){const t=a.chart.ctx,{body:r,footer:n,title:i}=a,{boxWidth:o,boxHeight:l}=e,c=wi(e.bodyFont),d=wi(e.titleFont),u=wi(e.footerFont),h=i.length,f=n.length,p=r.length,g=os(e.padding);let b=g.height,w=0,_=r.reduce((D,I)=>D+I.before.length+I.lines.length+I.after.length,0);if(_+=a.beforeBody.length+a.afterBody.length,h&&(b+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),_){const D=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;b+=p*D+(_-p)*c.lineHeight+(_-1)*e.bodySpacing}f&&(b+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let k=0;const T=function(D){w=Math.max(w,t.measureText(D).width+k)};return t.save(),t.font=d.string,Yr(a.title,T),t.font=c.string,Yr(a.beforeBody.concat(a.afterBody),T),k=e.displayColors?o+2+e.boxPadding:0,Yr(r,D=>{Yr(D.before,T),Yr(D.lines,T),Yr(D.after,T)}),k=0,t.font=u.string,Yr(a.footer,T),t.restore(),w+=g.width,{width:w,height:b}}function yce(a,e){const{y:t,height:r}=e;return t<r/2?"top":t>a.height-r/2?"bottom":"center"}function wce(a,e,t,r){const{x:n,width:i}=r,o=t.caretSize+t.caretPadding;if(a==="left"&&n+i+o>e.width||a==="right"&&n-i-o<0)return!0}function _ce(a,e,t,r){const{x:n,width:i}=t,{width:o,chartArea:{left:l,right:c}}=a;let d="center";return r==="center"?d=n<=(l+c)/2?"left":"right":n<=i/2?d="left":n>=o-i/2&&(d="right"),wce(d,a,e,t)&&(d="center"),d}function aL(a,e,t){const r=t.yAlign||e.yAlign||yce(a,t);return{xAlign:t.xAlign||e.xAlign||_ce(a,e,t,r),yAlign:r}}function Nce(a,e){let{x:t,width:r}=a;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function jce(a,e,t){let{y:r,height:n}=a;return e==="top"?r+=t:e==="bottom"?r-=n+t:r-=n/2,r}function rL(a,e,t,r){const{caretSize:n,caretPadding:i,cornerRadius:o}=a,{xAlign:l,yAlign:c}=t,d=n+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=Kf(o);let g=Nce(e,l);const b=jce(e,c,d);return c==="center"?l==="left"?g+=d:l==="right"&&(g-=d):l==="left"?g-=Math.max(u,f)+n:l==="right"&&(g+=Math.max(h,p)+n),{x:Di(g,0,r.width-e.width),y:Di(b,0,r.height-e.height)}}function ry(a,e,t){const r=os(t.padding);return e==="center"?a.x+a.width/2:e==="right"?a.x+a.width-r.right:a.x+r.left}function nL(a){return tc([],xd(a))}function Sce(a,e,t){return Sh(a,{tooltip:e,tooltipItems:t,type:"tooltip"})}function iL(a,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?a.override(t):a}const KU={beforeTitle:id,title(a){if(a.length>0){const e=a[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:id,beforeBody:id,beforeLabel:id,label(a){if(this&&this.options&&this.options.mode==="dataset")return a.label+": "+a.formattedValue||a.formattedValue;let e=a.dataset.label||"";e&&(e+=": ");const t=a.formattedValue;return fr(t)||(e+=t),e},labelColor(a){const t=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(a){const t=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:id,afterBody:id,beforeFooter:id,footer:id,afterFooter:id};function Vs(a,e,t,r){const n=a[e].call(t,r);return typeof n>"u"?KU[e].call(t,r):n}class sL extends Vd{static positioners=Lg;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&t.options.animation&&r.animations,i=new AU(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Sce(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,n=Vs(r,"beforeTitle",this,e),i=Vs(r,"title",this,e),o=Vs(r,"afterTitle",this,e);let l=[];return l=tc(l,xd(n)),l=tc(l,xd(i)),l=tc(l,xd(o)),l}getBeforeBody(e,t){return nL(Vs(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,n=[];return Yr(e,i=>{const o={before:[],lines:[],after:[]},l=iL(r,i);tc(o.before,xd(Vs(l,"beforeLabel",this,i))),tc(o.lines,Vs(l,"label",this,i)),tc(o.after,xd(Vs(l,"afterLabel",this,i))),n.push(o)}),n}getAfterBody(e,t){return nL(Vs(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,n=Vs(r,"beforeFooter",this,e),i=Vs(r,"footer",this,e),o=Vs(r,"afterFooter",this,e);let l=[];return l=tc(l,xd(n)),l=tc(l,xd(i)),l=tc(l,xd(o)),l}_createItems(e){const t=this._active,r=this.chart.data,n=[],i=[],o=[];let l=[],c,d;for(c=0,d=t.length;c<d;++c)l.push(bce(this.chart,t[c]));return e.filter&&(l=l.filter((u,h,f)=>e.filter(u,h,f,r))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,r))),Yr(l,u=>{const h=iL(e.callbacks,u);n.push(Vs(h,"labelColor",this,u)),i.push(Vs(h,"labelPointStyle",this,u)),o.push(Vs(h,"labelTextColor",this,u))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const r=this.options.setContext(this.getContext()),n=this._active;let i,o=[];if(!n.length)this.opacity!==0&&(i={opacity:0});else{const l=Lg[r.position].call(this,n,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const c=this._size=tL(this,r),d=Object.assign({},l,c),u=aL(this.chart,r,d),h=rL(r,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,n){const i=this.getCaretPosition(e,r,n);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,r){const{xAlign:n,yAlign:i}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=Kf(l),{x:f,y:p}=e,{width:g,height:b}=t;let w,_,k,T,D,I;return i==="center"?(D=p+b/2,n==="left"?(w=f,_=w-o,T=D+o,I=D-o):(w=f+g,_=w+o,T=D-o,I=D+o),k=w):(n==="left"?_=f+Math.max(c,u)+o:n==="right"?_=f+g-Math.max(d,h)-o:_=this.caretX,i==="top"?(T=p,D=T-o,w=_-o,k=_+o):(T=p+b,D=T+o,w=_+o,k=_-o),I=T),{x1:w,x2:_,x3:k,y1:T,y2:D,y3:I}}drawTitle(e,t,r){const n=this.title,i=n.length;let o,l,c;if(i){const d=nx(r.rtl,this.x,this.width);for(e.x=ry(this,r.titleAlign,r),t.textAlign=d.textAlign(r.titleAlign),t.textBaseline="middle",o=wi(r.titleFont),l=r.titleSpacing,t.fillStyle=r.titleColor,t.font=o.string,c=0;c<i;++c)t.fillText(n[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===i&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,t,r,n,i){const o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:d}=i,u=wi(i.bodyFont),h=ry(this,"left",i),f=n.x(h),p=c<u.lineHeight?(u.lineHeight-c)/2:0,g=t.y+p;if(i.usePointStyle){const b={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},w=n.leftForLtr(f,d)+d/2,_=g+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,QC(e,b,w,_),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,QC(e,b,w,_)}else{e.lineWidth=br(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=n.leftForLtr(f,d),w=n.leftForLtr(n.xPlus(f,1),d-2),_=Kf(o.borderRadius);Object.values(_).some(k=>k!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Mv(e,{x:b,y:g,w:d,h:c,radius:_}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Mv(e,{x:w,y:g+1,w:d-2,h:c-2,radius:_}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(b,g,d,c),e.strokeRect(b,g,d,c),e.fillStyle=o.backgroundColor,e.fillRect(w,g+1,d-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:n}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=r,h=wi(r.bodyFont);let f=h.lineHeight,p=0;const g=nx(r.rtl,this.x,this.width),b=function(V){t.fillText(V,g.x(e.x+p),e.y+f/2),e.y+=f+i},w=g.textAlign(o);let _,k,T,D,I,O,P;for(t.textAlign=o,t.textBaseline="middle",t.font=h.string,e.x=ry(this,w,r),t.fillStyle=r.bodyColor,Yr(this.beforeBody,b),p=l&&w!=="right"?o==="center"?d/2+u:d+2+u:0,D=0,O=n.length;D<O;++D){for(_=n[D],k=this.labelTextColors[D],t.fillStyle=k,Yr(_.before,b),T=_.lines,l&&T.length&&(this._drawColorBox(t,e,D,g,r),f=Math.max(h.lineHeight,c)),I=0,P=T.length;I<P;++I)b(T[I]),f=h.lineHeight;Yr(_.after,b)}p=0,f=h.lineHeight,Yr(this.afterBody,b),e.y-=i}drawFooter(e,t,r){const n=this.footer,i=n.length;let o,l;if(i){const c=nx(r.rtl,this.x,this.width);for(e.x=ry(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=c.textAlign(r.footerAlign),t.textBaseline="middle",o=wi(r.footerFont),t.fillStyle=r.footerColor,t.font=o.string,l=0;l<i;++l)t.fillText(n[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,t,r,n){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=e,{width:d,height:u}=r,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:g}=Kf(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(l+h,c),o==="top"&&this.drawCaret(e,t,r,n),t.lineTo(l+d-f,c),t.quadraticCurveTo(l+d,c,l+d,c+f),o==="center"&&i==="right"&&this.drawCaret(e,t,r,n),t.lineTo(l+d,c+u-g),t.quadraticCurveTo(l+d,c+u,l+d-g,c+u),o==="bottom"&&this.drawCaret(e,t,r,n),t.lineTo(l+p,c+u),t.quadraticCurveTo(l,c+u,l,c+u-p),o==="center"&&i==="left"&&this.drawCaret(e,t,r,n),t.lineTo(l,c+h),t.quadraticCurveTo(l,c,l+h,c),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,n=r&&r.x,i=r&&r.y;if(n||i){const o=Lg[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=tL(this,e),c=Object.assign({},o,this._size),d=aL(t,e,c),u=rL(e,c,d,t);(n._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=os(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,n,t),_U(e,t.textDirection),i.y+=o.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),NU(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,n=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!c2(r,n),o=this._positionChanged(n,t);(i||o)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],o=this._getActiveElements(e,i,t,r),l=this._positionChanged(o,e),c=t||!c2(o,i)||l;return c&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,r,n){const i=this.options;if(e.type==="mouseout")return[];if(!n)return t.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:r,caretY:n,options:i}=this,o=Lg[i.position].call(this,e,t);return o!==!1&&(r!==o.x||n!==o.y)}}var kce={id:"tooltip",_element:sL,positioners:Lg,afterInit(a,e,t){t&&(a.tooltip=new sL({chart:a,options:t}))},beforeUpdate(a,e,t){a.tooltip&&a.tooltip.initialize(t)},reset(a,e,t){a.tooltip&&a.tooltip.initialize(t)},afterDraw(a){const e=a.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(a.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(a.ctx),a.notifyPlugins("afterTooltipDraw",t)}},afterEvent(a,e){if(a.tooltip){const t=e.replay;a.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(a,e)=>e.bodyFont.size,boxWidth:(a,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:KU},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:a=>a!=="filter"&&a!=="itemSort"&&a!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Cce=Object.freeze({__proto__:null,Colors:zle,Decimation:Ule,Filler:cce,Legend:xce,SubTitle:vce,Title:gce,Tooltip:kce});const Ace=(a,e,t,r)=>(typeof e=="string"?(t=a.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function Tce(a,e,t,r){const n=a.indexOf(e);if(n===-1)return Ace(a,e,t,r);const i=a.lastIndexOf(e);return n!==i?t:n}const Mce=(a,e)=>a===null?null:Di(Math.round(a),0,e);function oL(a){const e=this.getLabels();return a>=0&&a<e.length?e[a]:a}class Ece extends Nb{static id="category";static defaults={ticks:{callback:oL}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:n,label:i}of t)r[n]===i&&r.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(fr(e))return null;const r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:Tce(r,e,$a(t,e),this._addedLabels),Mce(t,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,n=[];let i=this.getLabels();i=e===0&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=t;o++)n.push({value:o});return n}getLabelForValue(e){return oL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Dce(a,e){const t=[],{bounds:n,step:i,min:o,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=a,p=i||1,g=u-1,{min:b,max:w}=e,_=!fr(o),k=!fr(l),T=!fr(d),D=(w-b)/(h+1);let I=tR((w-b)/g/p)*p,O,P,V,G;if(I<1e-14&&!_&&!k)return[{value:b},{value:w}];G=Math.ceil(w/I)-Math.floor(b/I),G>g&&(I=tR(G*I/g/p)*p),fr(c)||(O=Math.pow(10,c),I=Math.ceil(I*O)/O),n==="ticks"?(P=Math.floor(b/I)*I,V=Math.ceil(w/I)*I):(P=b,V=w),_&&k&&i&&pie((l-o)/i,I/1e3)?(G=Math.round(Math.min((l-o)/I,u)),I=(l-o)/G,P=o,V=l):T?(P=_?o:P,V=k?l:V,G=d-1,I=(V-P)/G):(G=(V-P)/I,av(G,Math.round(G),I/1e3)?G=Math.round(G):G=Math.ceil(G));const Q=Math.max(aR(I),aR(P));O=Math.pow(10,fr(c)?Q:c),P=Math.round(P*O)/O,V=Math.round(V*O)/O;let $=0;for(_&&(f&&P!==o?(t.push({value:o}),P<o&&$++,av(Math.round((P+$*I)*O)/O,o,lL(o,D,a))&&$++):P<o&&$++);$<G;++$){const ae=Math.round((P+$*I)*O)/O;if(k&&ae>l)break;t.push({value:ae})}return k&&f&&V!==l?t.length&&av(t[t.length-1].value,l,lL(l,D,a))?t[t.length-1].value=l:t.push({value:l}):(!k||V===l)&&t.push({value:V}),t}function lL(a,e,{horizontal:t,minRotation:r}){const n=yl(r),i=(t?Math.sin(n):Math.cos(n))||.001,o=.75*e*(""+a).length;return Math.min(e/i,o)}class m2 extends Nb{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return fr(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:n,max:i}=this;const o=c=>n=t?n:c,l=c=>i=r?i:c;if(e){const c=gc(n),d=gc(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(n===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||o(n-c)}this.min=n,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,n;return r?(n=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),t=t||11),t&&(n=Math.min(t,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const n={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},i=this._range||this,o=Dce(n,i);return e.bounds==="ticks"&&iU(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const n=(r-t)/Math.max(e.length-1,1)/2;t-=n,r+=n}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return _b(e,this.chart.options.locale,this.options.ticks.format)}}class Ice extends m2{static id="linear";static defaults={ticks:{callback:F_.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=On(e)?e:0,this.max=On(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=yl(this.options.ticks.minRotation),n=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Dv=a=>Math.floor(Wu(a)),tf=(a,e)=>Math.pow(10,Dv(a)+e);function cL(a){return a/Math.pow(10,Dv(a))===1}function dL(a,e,t){const r=Math.pow(10,t),n=Math.floor(a/r);return Math.ceil(e/r)-n}function Rce(a,e){const t=e-a;let r=Dv(t);for(;dL(a,e,r)>10;)r++;for(;dL(a,e,r)<10;)r--;return Math.min(r,Dv(a))}function Lce(a,{min:e,max:t}){e=xo(a.min,e);const r=[],n=Dv(e);let i=Rce(e,t),o=i<0?Math.pow(10,Math.abs(i)):1;const l=Math.pow(10,i),c=n>i?Math.pow(10,n):0,d=Math.round((e-c)*o)/o,u=Math.floor((e-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,i)),f=xo(a.min,Math.round((c+u+h*Math.pow(10,i))*o)/o);for(;f<t;)r.push({value:f,major:cL(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(i++,h=2,o=i>=0?1:o),f=Math.round((c+u+h*Math.pow(10,i))*o)/o;const p=xo(a.max,f);return r.push({value:p,major:cL(p),significand:h}),r}class Oce extends Nb{static id="logarithmic";static defaults={ticks:{callback:F_.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=m2.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return On(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=On(e)?Math.max(0,e):null,this.max=On(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!On(this._userMin)&&(this.min=e===tf(this.min,0)?tf(this.min,-1):tf(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,n=this.max;const i=l=>r=e?r:l,o=l=>n=t?n:l;r===n&&(r<=0?(i(1),o(10)):(i(tf(r,-1)),o(tf(n,1)))),r<=0&&i(tf(n,-1)),n<=0&&o(tf(r,1)),this.min=r,this.max=n}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},r=Lce(t,this);return e.bounds==="ticks"&&iU(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":_b(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Wu(e),this._valueRange=Wu(this.max)-Wu(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Wu(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function n4(a){const e=a.ticks;if(e.display&&a.display){const t=os(e.backdropPadding);return $a(e.font&&e.font.size,wn.font.size)+t.height}return 0}function Pce(a,e,t){return t=bn(t)?t:[t],{w:Eie(a,e.string,t),h:t.length*e.lineHeight}}function uL(a,e,t,r,n){return a===r||a===n?{start:e-t/2,end:e+t/2}:a<r||a>n?{start:e-t,end:e}:{start:e,end:e+t}}function Bce(a){const e={l:a.left+a._padding.left,r:a.right-a._padding.right,t:a.top+a._padding.top,b:a.bottom-a._padding.bottom},t=Object.assign({},e),r=[],n=[],i=a._pointLabels.length,o=a.options.pointLabels,l=o.centerPointLabels?Tr/i:0;for(let c=0;c<i;c++){const d=o.setContext(a.getPointLabelContext(c));n[c]=d.padding;const u=a.getPointPosition(c,a.drawingArea+n[c],l),h=wi(d.font),f=Pce(a.ctx,h,a._pointLabels[c]);r[c]=f;const p=ns(a.getIndexAngle(c)+l),g=Math.round(eT(p)),b=uL(g,u.x,f.w,0,180),w=uL(g,u.y,f.h,90,270);zce(t,e,p,b,w)}a.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),a._pointLabelItems=Hce(a,r,n)}function zce(a,e,t,r,n){const i=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let l=0,c=0;r.start<e.l?(l=(e.l-r.start)/i,a.l=Math.min(a.l,e.l-l)):r.end>e.r&&(l=(r.end-e.r)/i,a.r=Math.max(a.r,e.r+l)),n.start<e.t?(c=(e.t-n.start)/o,a.t=Math.min(a.t,e.t-c)):n.end>e.b&&(c=(n.end-e.b)/o,a.b=Math.max(a.b,e.b+c))}function Fce(a,e,t){const r=a.drawingArea,{extra:n,additionalAngle:i,padding:o,size:l}=t,c=a.getPointPosition(e,r+n+o,i),d=Math.round(eT(ns(c.angle+$n))),u=Wce(c.y,l.h,d),h=Uce(d),f=Gce(c.x,l.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+l.w,bottom:u+l.h}}function Vce(a,e){if(!e)return!0;const{left:t,top:r,right:n,bottom:i}=a;return!(Nd({x:t,y:r},e)||Nd({x:t,y:i},e)||Nd({x:n,y:r},e)||Nd({x:n,y:i},e))}function Hce(a,e,t){const r=[],n=a._pointLabels.length,i=a.options,{centerPointLabels:o,display:l}=i.pointLabels,c={extra:n4(i)/2,additionalAngle:o?Tr/n:0};let d;for(let u=0;u<n;u++){c.padding=t[u],c.size=e[u];const h=Fce(a,u,c);r.push(h),l==="auto"&&(h.visible=Vce(h,d),h.visible&&(d=h))}return r}function Uce(a){return a===0||a===180?"center":a<180?"left":"right"}function Gce(a,e,t){return t==="right"?a-=e:t==="center"&&(a-=e/2),a}function Wce(a,e,t){return t===90||t===270?a-=e/2:(t>270||t<90)&&(a-=e),a}function $ce(a,e,t){const{left:r,top:n,right:i,bottom:o}=t,{backdropColor:l}=e;if(!fr(l)){const c=Kf(e.borderRadius),d=os(e.backdropPadding);a.fillStyle=l;const u=r-d.left,h=n-d.top,f=i-r+d.width,p=o-n+d.height;Object.values(c).some(g=>g!==0)?(a.beginPath(),Mv(a,{x:u,y:h,w:f,h:p,radius:c}),a.fill()):a.fillRect(u,h,f,p)}}function Yce(a,e){const{ctx:t,options:{pointLabels:r}}=a;for(let n=e-1;n>=0;n--){const i=a._pointLabelItems[n];if(!i.visible)continue;const o=r.setContext(a.getPointLabelContext(n));$ce(t,o,i);const l=wi(o.font),{x:c,y:d,textAlign:u}=i;x0(t,a._pointLabels[n],c,d+l.lineHeight/2,l,{color:o.color,textAlign:u,textBaseline:"middle"})}}function QU(a,e,t,r){const{ctx:n}=a;if(t)n.arc(a.xCenter,a.yCenter,e,0,xn);else{let i=a.getPointPosition(0,e);n.moveTo(i.x,i.y);for(let o=1;o<r;o++)i=a.getPointPosition(o,e),n.lineTo(i.x,i.y)}}function qce(a,e,t,r,n){const i=a.ctx,o=e.circular,{color:l,lineWidth:c}=e;!o&&!r||!l||!c||t<0||(i.save(),i.strokeStyle=l,i.lineWidth=c,i.setLineDash(n.dash||[]),i.lineDashOffset=n.dashOffset,i.beginPath(),QU(a,t,o,r),i.closePath(),i.stroke(),i.restore())}function Xce(a,e,t){return Sh(a,{label:t,index:e,type:"pointLabel"})}class Zce extends m2{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:F_.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=os(n4(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=On(e)&&!isNaN(e)?e:0,this.max=On(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/n4(this.options))}generateTickLabels(e){m2.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{const n=hn(this.options.pointLabels.callback,[t,r],this);return n||n===0?n:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?Bce(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,n))}getIndexAngle(e){const t=xn/(this._pointLabels.length||1),r=this.options.startAngle||0;return ns(e*t+yl(r))}getDistanceFromCenterForValue(e){if(fr(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(fr(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return Xce(this.getContext(),e,r)}}getPointPosition(e,t,r=0){const n=this.getIndexAngle(e)-$n+r;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:n,bottom:i}=this._pointLabelItems[e];return{left:t,top:r,right:n,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),QU(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:n,border:i}=t,o=this._pointLabels.length;let l,c,d;if(t.pointLabels.display&&Yce(this,o),n.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),p=n.setContext(f),g=i.setContext(f);qce(this,p,c,o,g)}}),r.display){for(e.save(),l=o-1;l>=0;l--){const u=r.setContext(this.getPointLabelContext(l)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),d=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const n=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;const d=r.setContext(this.getContext(c)),u=wi(d.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,o=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const h=os(d.backdropPadding);e.fillRect(-o/2-h.left,-i-u.size/2-h.top,o+h.width,u.size+h.height)}x0(e,l.label,0,-i,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}const Y_={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ws=Object.keys(Y_);function hL(a,e){return a-e}function fL(a,e){if(fr(e))return null;const t=a._adapter,{parser:r,round:n,isoWeekday:i}=a._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),On(o)||(o=typeof r=="string"?t.parse(o,r):t.parse(o)),o===null?null:(n&&(o=n==="week"&&(mx(i)||i===!0)?t.startOf(o,"isoWeek",i):t.startOf(o,n)),+o)}function pL(a,e,t,r){const n=Ws.length;for(let i=Ws.indexOf(a);i<n-1;++i){const o=Y_[Ws[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(l*o.size))<=r)return Ws[i]}return Ws[n-1]}function Kce(a,e,t,r,n){for(let i=Ws.length-1;i>=Ws.indexOf(t);i--){const o=Ws[i];if(Y_[o].common&&a._adapter.diff(n,r,o)>=e-1)return o}return Ws[t?Ws.indexOf(t):0]}function Qce(a){for(let e=Ws.indexOf(a)+1,t=Ws.length;e<t;++e)if(Y_[Ws[e]].common)return Ws[e]}function xL(a,e,t){if(!t)a[e]=!0;else if(t.length){const{lo:r,hi:n}=tT(t,e),i=t[r]>=e?t[r]:t[n];a[i]=!0}}function Jce(a,e,t,r){const n=a._adapter,i=+n.startOf(e[0].value,r),o=e[e.length-1].value;let l,c;for(l=i;l<=o;l=+n.add(l,1,r))c=t[l],c>=0&&(e[c].major=!0);return e}function mL(a,e,t){const r=[],n={},i=e.length;let o,l;for(o=0;o<i;++o)l=e[o],n[l]=o,r.push({value:l,major:!1});return i===0||!t?r:Jce(a,r,n,t)}let i4=class extends Nb{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),n=this._adapter=new eoe._date(e.adapters.date);n.init(t),tv(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:fL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:n,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(n=Math.min(n,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),n=On(n)&&!isNaN(n)?n:+t.startOf(Date.now(),r),i=On(i)&&!isNaN(i)?i:+t.endOf(Date.now(),r)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,n=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,o=this.max,l=vie(n,i,o);return this._unit=t.unit||(r.autoSkip?pL(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):Kce(this,l.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Qce(this._unit),this.initOffsets(n),e.reverse&&l.reverse(),mL(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,n,i;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?t=1-n:t=(this.getDecimalForValue(e[1])-n)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Di(t,0,o),r=Di(r,0,o),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,n=this.options,i=n.time,o=i.unit||pL(i.minUnit,t,r,this._getLabelCapacity(t)),l=$a(n.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=mx(c)||c===!0,u={};let h=t,f,p;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":o),e.diff(r,t,o)>1e5*l)throw new Error(t+" and "+r+" are too far apart with stepSize of "+l+" "+o);const g=n.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<r;f=+e.add(f,l,o),p++)xL(u,f,g);return(f===r||n.bounds==="ticks"||p===1)&&xL(u,f,g),Object.keys(u).sort(hL).map(b=>+b)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,o=t||n[i];return this._adapter.format(e,o)}_tickFormatFunction(e,t,r,n){const i=this.options,o=i.ticks.callback;if(o)return hn(o,[e,t,r],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],f=r[t],p=d&&h&&f&&f.major;return this._adapter.format(e,n||(p?h:u))}generateTickLabels(e){let t,r,n;for(t=0,r=e.length;t<r;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,n=yl(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(n),o=Math.sin(n),l=this._resolveTickFontOptions(0).size;return{w:r*i+l*o,h:r*o+l*i}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,n=r[t.unit]||r.millisecond,i=this._tickFormatFunction(e,0,mL(this,[e],this._majorUnit),n),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,r=n.length;t<r;++t)e=e.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const n=this.getLabels();for(t=0,r=n.length;t<r;++t)e.push(fL(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return lU(e.sort(hL))}};function ny(a,e,t){let r=0,n=a.length-1,i,o,l,c;t?(e>=a[r].pos&&e<=a[n].pos&&({lo:r,hi:n}=_d(a,"pos",e)),{pos:i,time:l}=a[r],{pos:o,time:c}=a[n]):(e>=a[r].time&&e<=a[n].time&&({lo:r,hi:n}=_d(a,"time",e)),{time:i,pos:l}=a[r],{time:o,pos:c}=a[n]);const d=o-i;return d?l+(c-l)*(e-i)/d:l}class ede extends i4{static id="timeseries";static defaults=i4.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=ny(t,this.min),this._tableRange=ny(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,n=[],i=[];let o,l,c,d,u;for(o=0,l=e.length;o<l;++o)d=e[o],d>=t&&d<=r&&n.push(d);if(n.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,l=n.length;o<l;++o)u=n[o+1],c=n[o-1],d=n[o],Math.round((u+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((n,i)=>n-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(ny(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return ny(this._table,r*this._tableRange+this._minPos,!0)}}var tde=Object.freeze({__proto__:null,CategoryScale:Ece,LinearScale:Ice,LogarithmicScale:Oce,RadialLinearScale:Zce,TimeScale:i4,TimeSeriesScale:ede});const jb=[Jse,Dle,Cce,tde];Wi.register(...jb);const ade=({weeklyData:a,isChartLoading:e,navigate:t})=>{const r=H.useRef(null),n=H.useRef(null);H.useEffect(()=>{if(a.length>0&&r.current){const o=setTimeout(i,200);return window.addEventListener("resize",i),()=>{clearTimeout(o),window.removeEventListener("resize",i)}}},[a]);const i=()=>{if(!r.current)return;n.current&&n.current.destroy();const o=r.current.getContext("2d");if(!o)return;const l=a.map(h=>h.date),c=a.map(h=>h.total),d=r.current.clientHeight||300,u=o.createLinearGradient(0,0,0,d);u.addColorStop(0,"rgba(99, 102, 241, 0.2)"),u.addColorStop(1,"rgba(99, 102, 241, 0)"),n.current=new Wi(o,{type:"line",data:{labels:l,datasets:[{label:" ",data:c,borderColor:"#6366f1",backgroundColor:u,borderWidth:3,pointBackgroundColor:"#fff",pointBorderColor:"#6366f1",pointBorderWidth:2,pointRadius:4,tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:400,easing:"easeOutQuart"},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:h=>`: ${Ve(h.raw)}`}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0,0,0,0.03)"},ticks:{callback:h=>Ve(h/1e4)+"",font:{size:11,weight:"500"}}},x:{grid:{display:!1},ticks:{font:{size:11,weight:"500"}}}},onClick:(h,f)=>{if(f.length>0){const p=f[0].index,g=l[p];window.__DAILY_SALES_FILTER_DATE__=g,t("/sales/daily")}}}})};return s.jsxs("div",{className:"bg-white rounded-[20px] p-5 min-[2000px]:p-8 shadow-sm border border-slate-100 flex flex-col h-full min-h-[200px] min-[2000px]:min-h-[300px] relative overflow-hidden",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[s.jsx("h3",{className:"text-[1.1rem] font-bold text-slate-800",children:"  "}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 font-bold",children:[e&&s.jsx("span",{className:"material-symbols-rounded animate-spin text-indigo-500",children:"refresh"}),s.jsx("span",{className:"w-3 h-3 rounded-full bg-indigo-500"}),"  "]})]}),s.jsxs("div",{className:"flex-1 w-full relative min-h-0 bg-slate-50/30 rounded-xl",children:[e&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 z-10",children:s.jsx("span",{className:"material-symbols-rounded animate-spin text-4xl text-indigo-500",children:"refresh"})}),s.jsx("canvas",{ref:r,className:"w-full h-full p-2"})]})]})},rde=({top3Products:a,topProfitProducts:e,topMode:t,setTopMode:r,isRankLoading:n})=>s.jsxs("div",{className:"bg-white rounded-[20px] p-5 min-[2000px]:p-8 shadow-sm border border-slate-100 flex flex-col h-full min-h-0 relative overflow-hidden",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[s.jsxs("h3",{className:"text-[1.1rem] font-bold text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-amber-500 bg-amber-50 p-1.5 rounded-lg",children:"emoji_events"}),"   "]}),s.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-full",children:[s.jsx("button",{onClick:()=>r("qty"),className:`px-4 py-1.5 rounded-full text-[0.75rem] font-bold transition-all ${t==="qty"?"bg-white shadow-sm text-slate-800":"text-slate-500 hover:text-slate-700"}`,children:""}),s.jsx("button",{onClick:()=>r("profit"),className:`px-4 py-1.5 rounded-full text-[0.75rem] font-bold transition-all ${t==="profit"?"bg-white shadow-sm text-slate-800":"text-slate-500 hover:text-slate-700"}`,children:""})]})]}),s.jsxs("div",{className:"flex-1 overflow-auto stylish-scrollbar relative min-h-0 border-t border-slate-50",children:[n&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 z-10",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded animate-spin text-3xl text-indigo-500",children:"refresh"}),s.jsx("span",{className:"text-[11px] font-bold text-slate-400 uppercase",children:" ..."})]})}),s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"sticky top-0 bg-white",children:s.jsxs("tr",{className:"text-slate-400 font-semibold border-b border-slate-100 text-[0.75rem] text-left uppercase tracking-wider",children:[s.jsx("th",{className:"py-2.5 w-16 text-center",children:""}),s.jsx("th",{className:"py-2.5 px-2",children:""}),s.jsx("th",{className:"py-2.5 text-center",children:""}),s.jsx("th",{className:"py-2.5 text-right pr-2",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50 border-b border-slate-50",children:(t==="qty"?a:e).map((i,o)=>s.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[s.jsx("td",{className:"py-1.5 text-center font-bold text-slate-400",children:o===0?s.jsx("span",{className:"text-xl",children:""}):o===1?s.jsx("span",{className:"text-xl",children:""}):o===2?s.jsx("span",{className:"text-xl",children:""}):o+1}),s.jsx("td",{className:"py-1.5 px-2 font-black text-slate-700 text-xs",children:i.product_name}),s.jsx("td",{className:"py-1.5 text-center",children:s.jsxs("span",{className:"bg-slate-100 text-slate-600 px-2.5 py-0.5 rounded-full font-black text-[9px] tracking-tight",children:[Ve(i.total_quantity),""]})}),s.jsxs("td",{className:"py-1.5 text-right font-black text-slate-800 text-xs",children:[Ve(t==="qty"?i.total_amount:i.net_profit),"",t==="profit"&&i.margin_rate&&s.jsxs("div",{className:"text-[9px] text-emerald-500 font-medium",children:[" ",i.margin_rate.toFixed(1),"%"]})]})]},o))})]})]})]}),nde=({onClose:a})=>{const e=`${window.location.origin}/api/iot/push`;return s.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:a}),s.jsx("div",{className:"relative bg-white rounded-[32px] w-full max-w-2xl overflow-hidden shadow-2xl animate-in fade-in zoom-in duration-300",children:s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-600 bg-indigo-50 p-2 rounded-2xl",children:"sensors"})," IoT   "]}),s.jsx("p",{className:"text-slate-500 font-medium mt-1",children:"  /ESP32  Mycelium  ."})]}),s.jsx("button",{onClick:a,className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-slate-400",children:"close"})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{children:[s.jsxs("h3",{className:"text-sm font-black text-slate-700 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 bg-indigo-600 text-white rounded-full flex items-center justify-center text-[10px]",children:"1"}),"API  "]}),s.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl font-mono text-sm border border-slate-100 break-all",children:[s.jsx("span",{className:"text-indigo-600 font-bold",children:"POST"})," ",e]})]}),s.jsxs("section",{children:[s.jsxs("h3",{className:"text-sm font-black text-slate-700 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 bg-indigo-600 text-white rounded-full flex items-center justify-center text-[10px]",children:"2"}),"  (JSON Payload)"]}),s.jsx("div",{className:"bg-slate-800 p-5 rounded-2xl font-mono text-xs text-indigo-300 shadow-inner",children:s.jsx("pre",{children:JSON.stringify({sensor_id:1,temp:24.5,humid:60.2,co2:450},null,2)})})]}),s.jsxs("section",{children:[s.jsxs("h3",{className:"text-sm font-black text-slate-700 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 bg-indigo-600 text-white rounded-full flex items-center justify-center text-[10px]",children:"3"})," (HTTP Client)  "]}),s.jsx("div",{className:"bg-slate-50 p-4 rounded-2xl font-mono text-[11px] text-slate-600 border border-slate-100 h-40 overflow-y-auto",children:s.jsx("pre",{children:`#include <HTTPClient.h>

void sendData() {
  HTTPClient http;
  http.begin("${e}");
  http.addHeader("Content-Type", "application/json");
  
  String json = "{\\"sensorId\\": 1, \\"temp\\": 25.4, \\"humid\\": 65.0, \\"co2\\": 480}";
  int httpCode = http.POST(json);
  
  if (httpCode > 0) {
    Serial.println("Data sent successfully");
  }
  http.end();
}`})})]})]}),s.jsx("div",{className:"mt-8 flex justify-end",children:s.jsx("button",{onClick:a,className:"bg-slate-800 text-white px-8 py-3 rounded-2xl font-black text-sm hover:bg-slate-900 transition-all shadow-lg shadow-slate-200",children:" "})})]})})]})},ide=()=>{const[a,e]=H.useState([]),[t,r]=H.useState({}),[n,i]=H.useState(!0),[o,l]=H.useState(!1),c=async()=>{i(!0);try{const d=await Pa("get_sensors");if(e(d),d&&d.length>0){const u=d.map(p=>p.sensor_id).join(","),h=await Pa("get_latest_readings",{sensorIds:u}),f={};h.forEach(p=>{f[p.sensor_id]=p}),r(f)}}catch(d){console.error("Failed to fetch IoT data:",d)}finally{i(!1)}};return H.useEffect(()=>{c();const d=setInterval(c,6e4);return()=>clearInterval(d)},[]),s.jsxs("div",{className:"bg-white rounded-[28px] py-6 px-6 border border-slate-100 shadow-[0_4px_20px_rgb(0,0,0,0.03)] flex flex-col h-full group transition-all duration-500 hover:border-indigo-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("button",{onClick:()=>l(!0),className:"p-1.5 bg-indigo-50 text-indigo-400 hover:text-indigo-600 rounded-xl transition-all flex items-center gap-1.5",children:[s.jsx(bb,{size:12}),s.jsx("span",{className:"text-[9px] font-black uppercase tracking-tighter",children:" "})]}),s.jsx("button",{onClick:c,className:`p-1.5 bg-slate-50 rounded-xl text-slate-300 hover:text-indigo-500 transition-all ${n?"animate-spin":""}`,children:s.jsx(Ed,{size:12})})]}),s.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[a.slice(0,1).map(d=>{const u=t[d.sensor_id];return s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(yb,{size:18,className:"text-rose-400 mb-1"}),s.jsx("span",{className:"text-[10px] font-black text-slate-400 mb-1",children:""}),s.jsxs("span",{className:"text-lg font-black text-slate-700",children:[Ve(u?.temperature||0),"C"]})]}),s.jsxs("div",{className:"flex flex-col items-center border-x border-slate-100 px-2",children:[s.jsx(h0,{size:18,className:"text-blue-400 mb-1"}),s.jsx("span",{className:"text-[10px] font-black text-slate-400 mb-1",children:""}),s.jsxs("span",{className:"text-lg font-black text-slate-700",children:[Ve(u?.humidity||0),"%"]})]}),s.jsxs("div",{className:"flex flex-col items-center leading-tight",children:[s.jsx(ZH,{size:18,className:"text-emerald-500 mb-1"}),s.jsx("span",{className:"text-[10px] font-black text-slate-400 mb-1",children:"CO2 "}),s.jsxs("span",{className:"text-lg font-black text-slate-700",children:[Ve(u?.co2||0),s.jsx("small",{className:"text-[10px] ml-0.5",children:"ppm"})]})]})]},d.sensor_id)}),a.length===0&&!n&&s.jsx("div",{className:"text-center text-slate-300",children:s.jsx("p",{className:"text-[10px] font-bold",children:"   ..."})})]}),o&&s.jsx(nde,{onClose:()=>l(!1)})]})},sde=({stats:a,isLoading:e,salesTrend:t,weatherAdvice:r,isWeatherLoading:n,onLogout:i})=>{const o=Fn(),l=[{label:" ",icon:s.jsx(px,{className:"text-blue-500"}),path:"/sales/reception",color:"bg-blue-50"},{label:"/",icon:s.jsx(BH,{className:"text-emerald-500"}),path:"/sales/stock",color:"bg-emerald-50"},{label:" ",icon:s.jsx(xx,{className:"text-indigo-500"}),path:"/customer/edit",color:"bg-indigo-50"},{label:" ",icon:s.jsx(YH,{className:"text-purple-500"}),path:"/sales/special",color:"bg-purple-50"},{label:" ",icon:s.jsx(jv,{className:"text-amber-500"}),path:"/customer/consultation",color:"bg-amber-50"},{label:" ",icon:s.jsx(jc,{className:"text-rose-500"}),path:"/schedule",color:"bg-rose-50"},{label:" ",icon:s.jsx(rx,{className:"text-indigo-400"}),path:"/exp/program-mgmt",color:"bg-indigo-50"},{label:"",icon:s.jsx(rx,{className:"text-slate-500"}),path:"/settings/company-info",color:"bg-slate-50"}];return s.jsxs("div",{className:"dashboard-lite-container p-6 lg:p-10 bg-[#f8fafc] h-full flex flex-col overflow-auto text-slate-900 font-sans relative",children:[s.jsxs("div",{className:"flex justify-between items-center mb-10",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-black text-slate-800 tracking-tight mb-2",children:[", ",s.jsx("span",{className:"text-indigo-600",children:sessionStorage.getItem("username")||""}),""]}),s.jsx("p",{className:"text-slate-400 font-medium",children:"    ."})]}),s.jsx("div",{className:"flex gap-3",children:s.jsx("button",{onClick:i,className:"px-5 py-2.5 rounded-2xl bg-white border border-slate-100 text-slate-400 hover:text-rose-500 hover:border-rose-100 font-bold text-xs transition-all shadow-sm",children:""})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-10",children:[s.jsx(mo,{label:" ",value:`${Ve(a?.total_sales_amount||0)}`,icon:"payments",iconColor:"text-white",iconBg:"bg-indigo-600",trend:t,isLoading:e,className:"!bg-indigo-600 !border-0"}),s.jsx("style",{dangerouslySetInnerHTML:{__html:".dashboard-lite-container .bg-indigo-600 h3, .dashboard-lite-container .bg-indigo-600 div { color: white !important; } .dashboard-lite-container .bg-indigo-600 .bg-slate-50 { background-color: rgba(255,255,255,0.1) !important; color: white !important; }"}}),s.jsx(mo,{label:" ",value:`${Ve(a?.total_orders||0)}`,icon:"shopping_cart",iconColor:"text-blue-600",iconBg:"bg-blue-50",badge:"ORDER",isLoading:e}),s.jsx(mo,{label:" ",value:`${Ve(a?.pending_orders||0)}`,icon:"local_shipping",iconColor:"text-amber-600",iconBg:"bg-amber-50",badge:"DELIVERY",isLoading:e}),s.jsx(mo,{label:" ",value:`${Ve(a?.total_customers||0)}`,icon:"group_add",iconColor:"text-emerald-600",iconBg:"bg-emerald-50",badge:"CUSTOMERS",isLoading:e})]}),s.jsxs("div",{className:"mb-10",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("h2",{className:"text-xl font-black text-slate-800 tracking-tight",children:"  "}),s.jsx("div",{className:"h-px flex-1 bg-slate-100"})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-4",children:l.map((c,d)=>s.jsxs("button",{onClick:()=>o(c.path),className:"bg-white border border-slate-100 p-6 rounded-[32px] flex flex-col items-center justify-center gap-4 transition-all hover:scale-[1.05] hover:shadow-xl hover:border-indigo-100 group active:scale-95",children:[s.jsx("div",{className:`w-14 h-14 ${c.color} rounded-2xl flex items-center justify-center transition-transform group-hover:rotate-6 shadow-sm`,children:vr.cloneElement(c.icon,{size:28})}),s.jsx("span",{className:"text-sm font-black text-slate-600 group-hover:text-indigo-600",children:c.label})]},d))})]}),s.jsx("div",{className:"mt-auto",children:s.jsxs("div",{className:`bg-white rounded-[32px] p-8 border border-slate-100 shadow-sm flex flex-col md:flex-row items-center gap-8 ${n?"opacity-50":""}`,children:[s.jsxs("div",{className:"flex flex-col items-center md:items-start text-center md:text-left shrink-0",children:[s.jsx("div",{className:"text-5xl mb-2",children:n?"":r?.weather_icon||""}),s.jsx("div",{className:"text-xl font-black text-slate-800",children:n?"   ...":r?.current_weather||" "}),s.jsx("div",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mt-1",children:" "})]}),s.jsx("div",{className:"h-px w-full md:h-12 md:w-px bg-slate-100"}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-slate-600 font-bold leading-relaxed whitespace-pre-wrap italic",children:n?"     ...":r?.marketing_advice||"     ."})}),!n&&s.jsx("div",{className:"shrink-0 flex gap-2",children:s.jsx("div",{className:"px-4 py-2 bg-indigo-50 rounded-full text-indigo-500 font-black text-[10px] border border-indigo-100 uppercase tracking-tighter",children:"  "})})]})})]})},gL=({onClose:a})=>s.jsx("div",{className:"modal-overlay fixed inset-0 z-[10001] flex items-center justify-center bg-[#0f172a]/80 backdrop-blur-md px-4",onClick:a,children:s.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[32px] overflow-hidden shadow-[0_32px_64px_rgba(0,0,0,0.2)] animate-in zoom-in-95 duration-200 border border-slate-200",onClick:e=>e.stopPropagation(),children:[s.jsx("div",{className:"bg-gradient-to-br from-[#1e293b] to-[#0f172a] h-28 flex items-center justify-center relative",children:s.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/5 backdrop-blur-xl flex items-center justify-center border border-white/10 shadow-inner",children:s.jsx("span",{className:"material-symbols-rounded text-indigo-400 text-3xl drop-shadow-[0_0_10px_rgba(129,140,248,0.3)]",children:"logout"})})}),s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:" ?"}),s.jsxs("p",{className:"text-slate-500 text-[14px] mb-8 font-medium leading-relaxed uppercase tracking-tight",children:["  ",s.jsx("br",{}),"  ."]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:a,className:"flex-1 py-3.5 rounded-2xl bg-slate-50 text-slate-500 font-bold text-sm hover:bg-slate-100 transition-all active:scale-95 border border-slate-100",children:""}),s.jsx("button",{onClick:async()=>{try{await fetch("/api/auth/logout",{method:"POST"})}catch(e){console.error("Logout API failed",e)}sessionStorage.clear(),window.location.reload()},className:"flex-1 py-3.5 rounded-2xl bg-[#0f172a] text-white font-bold text-sm hover:bg-slate-800 shadow-xl shadow-slate-200 transition-all active:scale-95",children:""})]})]})]})}),ode=({content:a,isLoading:e,onClose:t})=>a?s.jsx("div",{className:"modal-overlay fixed inset-0 z-[10000] flex items-center justify-center bg-slate-900/60 backdrop-blur-md px-4",onClick:t,children:s.jsxs("div",{className:"bg-white w-full max-w-xl rounded-[32px] overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300 border border-slate-200",onClick:r=>r.stopPropagation(),children:[s.jsxs("div",{className:"bg-gradient-to-br from-amber-400 via-amber-500 to-orange-500 p-8 flex items-center justify-between text-white",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/20 backdrop-blur-md flex items-center justify-center border border-white/30 shadow-inner",children:s.jsx("span",{className:"material-symbols-rounded text-3xl",children:"wb_sunny"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.2em] opacity-80 mb-0.5",children:" "}),s.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"  "})]})]}),s.jsx("button",{onClick:t,className:"w-10 h-10 rounded-full bg-black/10 hover:bg-black/20 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-10 pt-8",children:[s.jsx("div",{className:"bg-slate-50/80 rounded-[28px] p-8 leading-relaxed whitespace-pre-wrap font-bold text-slate-700 text-[15px] border border-slate-100 shadow-inner relative min-h-[250px]",children:e?s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-500 rounded-full animate-spin mb-4"}),s.jsx("div",{className:"text-slate-400 font-black animate-pulse",children:"  ..."})]}):a.split("===").map((r,n)=>s.jsx("div",{children:r.includes("===")?"==="+r:r},n))}),s.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>OH("  ",a),className:"flex items-center gap-1.5 text-[11px] font-black text-slate-400 hover:text-indigo-600 transition-colors",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"print"}),"  "]}),s.jsx("div",{className:"w-px h-3 bg-slate-200"}),s.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] font-black text-slate-400",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"history_edu"}),"DATE: ",ea().format("YYYY-MM-DD")]})]}),s.jsx("button",{onClick:t,className:"bg-slate-900 text-white px-8 py-3.5 rounded-2xl font-black text-sm hover:bg-slate-800 transition-all shadow-lg shadow-slate-200 active:scale-95",children:""})]}),s.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 text-center",children:s.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-slate-50 border border-slate-100 text-[10px] font-bold text-slate-400",children:[s.jsx("span",{className:"material-symbols-rounded text-xs",children:"info"}),"         ."]})})]})]})}):null,lde=({report:a,isLoading:e,onClose:t})=>a?s.jsx("div",{className:"modal-overlay fixed inset-0 z-[10002] flex items-center justify-center bg-slate-900/60 backdrop-blur-md px-4",onClick:t,children:s.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[32px] overflow-hidden shadow-[0_32px_64px_rgba(0,0,0,0.2)] animate-in zoom-in-95 duration-300 border border-white/20",onClick:r=>r.stopPropagation(),children:[s.jsxs("div",{className:`p-8 flex items-center justify-between text-white ${a.type==="weekly"?"bg-gradient-to-br from-indigo-600 to-indigo-800":"bg-gradient-to-br from-emerald-600 to-emerald-800"}`,children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/10 backdrop-blur-md border border-white/20 flex items-center justify-center shadow-inner",children:s.jsx("span",{className:"material-symbols-rounded text-4xl",children:a.type==="weekly"?"query_stats":"leaderboard"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] font-black uppercase tracking-[0.2em] opacity-70 mb-1",children:" "}),s.jsx("h2",{className:"text-3xl font-black tracking-tight",children:a.type==="weekly"?"  ":"  "})]})]}),s.jsx("button",{onClick:t,className:"w-10 h-10 rounded-full bg-black/10 hover:bg-black/20 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-10",children:[s.jsx("div",{className:"bg-slate-50/80 rounded-[24px] p-8 min-h-[400px] max-h-[550px] overflow-auto stylish-scrollbar border border-slate-100 shadow-inner relative",children:e?s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-slate-50/80 backdrop-blur-sm z-10",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500/20 border-t-indigo-600 rounded-full animate-spin mb-6"}),s.jsx("div",{className:"text-xl font-black text-slate-800 animate-pulse",children:"Mycelium AI  ..."}),s.jsx("p",{className:"text-slate-500 text-sm mt-2 font-bold",children:"       ."})]}):a.content.includes("<")?s.jsx("div",{dangerouslySetInnerHTML:{__html:a.content},className:"prose prose-slate max-w-none prose-headings:font-black prose-p:text-slate-600 prose-strong:text-indigo-600 prose-h3:text-indigo-700"}):s.jsx("div",{className:"whitespace-pre-wrap leading-relaxed text-slate-700 font-medium",children:a.content})}),!e&&a.rawData&&s.jsxs("div",{className:"mt-6 p-4 bg-slate-900 rounded-2xl flex items-center gap-6 overflow-hidden",children:[s.jsx("div",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest ring-1 ring-indigo-400/30 px-2 py-1 rounded shrink-0",children:" "}),s.jsxs("div",{className:"flex gap-6 overflow-x-auto stylish-scrollbar-horizontal pb-1",children:[s.jsxs("div",{className:"shrink-0",children:[s.jsx("span",{className:"text-[10px] text-slate-500 font-bold block mb-0.5 uppercase",children:""}),s.jsxs("span",{className:"text-xs font-black text-white",children:[a.rawData.total_sales.toLocaleString(),""]})]}),s.jsxs("div",{className:"shrink-0",children:[s.jsx("span",{className:"text-[10px] text-slate-500 font-bold block mb-0.5 uppercase",children:""}),s.jsxs("span",{className:"text-xs font-black text-white",children:[a.rawData.total_orders,""]})]}),s.jsxs("div",{className:"shrink-0",children:[s.jsx("span",{className:"text-[10px] text-slate-500 font-bold block mb-0.5 uppercase",children:" "}),s.jsxs("span",{className:"text-xs font-black text-white",children:[a.rawData.new_customers,""]})]}),a.rawData.top_products.length>0&&s.jsxs("div",{className:"shrink-0",children:[s.jsx("span",{className:"text-[10px] text-slate-500 font-bold block mb-0.5 uppercase",children:" "}),s.jsx("span",{className:"text-xs font-black text-white",children:a.rawData.top_products[0].product_name})]})]})]}),s.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-[11px] font-black text-slate-400",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"verified_user"}),"MYCELIUM   "]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>OH(a.type==="weekly"?"  ":"  ",a.content),className:"flex items-center gap-2 text-[11px] font-black text-indigo-600 hover:text-indigo-700",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"print"}),"  "]}),s.jsx("button",{onClick:t,className:"bg-slate-900 text-white px-8 py-3.5 rounded-2xl font-black text-sm hover:bg-slate-800 active:scale-95 transition-all shadow-lg shadow-slate-200",children:"  "})]})]})]})]})}):null,cde=a=>{const[e,t]=H.useState(null),[r,n]=H.useState([]),[i,o]=H.useState([]),[l,c]=H.useState([]),[d,u]=H.useState([]),[h,f]=H.useState([]),[p,g]=H.useState([]),[b,w]=H.useState([]),[_,k]=H.useState(null),[T,D]=H.useState(!0),[I,O]=H.useState(!0),[P,V]=H.useState(!0),[G,Q]=H.useState(!0),[$,ae]=H.useState(!1);H.useEffect(()=>{J();const F=setInterval(J,6e4);return()=>clearInterval(F)},[]);const J=async()=>{Promise.all([pt("get_dashboard_priority_stats"),pt("get_dashboard_secondary_stats")]).then(([F,W])=>{t(K=>{const ee={...K||{}};return F&&Object.keys(F).forEach(ne=>{F[ne]!==null&&(ee[ne]=F[ne])}),W&&Object.keys(W).forEach(ne=>{W[ne]!==null&&(ee[ne]=W[ne])}),ee}),D(!1)}).catch(F=>{console.error("Dashboard: Stats error",F),D(!1)}),Promise.allSettled([pt("get_upcoming_anniversaries",{days:3}).then(F=>F&&u(F)),pt("get_repurchase_candidates").then(F=>F&&f(F)),pt("get_inventory_forecast_alerts").then(F=>F&&g(F)),pt("get_product_freshness").then(F=>{if(!F)return;const W=new Date,K=(F||[]).filter(ee=>{if(!ee.last_in_date||ee.stock_quantity<=0)return!1;const ne=new Date(ee.last_in_date),re=Math.ceil(Math.abs(W-ne)/(1e3*60*60*24));return ee.diffDays=re,re>7}).sort((ee,ne)=>ne.diffDays-ee.diffDays);w(K)})]).catch(F=>console.error("Aux data error",F)),pt("get_weekly_sales_data").then(F=>{F&&n(F),Q(!1)}).catch(F=>{console.error("Dashboard: Weekly chart error",F),Q(!1)}),Promise.allSettled([pt("get_top3_products_by_qty").then(F=>F&&o(F)),pt("get_top_profit_products").then(F=>F&&c(F))]).finally(()=>O(!1)),pt("get_weather_marketing_advice").then(F=>{F&&k(F),V(!1)}).catch(F=>{console.error("Dashboard: Weather error",F),V(!1)})},U=(()=>{if(!r||r.length<2)return null;const F=ea().format("MM-DD"),W=ea().subtract(1,"day").format("MM-DD"),K=r.find(Z=>Z.date===F),ee=r.find(Z=>Z.date===W);if(!K||!ee||ee.total===0)return K&&K.total>0&&(!ee||ee.total===0)?{pct:100,isUp:!0,label:""}:null;const ne=K.total-ee.total,re=ne/ee.total*100;return{pct:Math.abs(re).toFixed(1),isUp:ne>=0}})();return{stats:e,weeklyData:r,top3Products:i,topProfitProducts:l,anniversaries:d,repurchaseCandidates:h,forecastAlerts:p,freshnessAlerts:b,weatherAdvice:_,isLoading:T,isRankLoading:I,isWeatherLoading:P,isChartLoading:G,isReportLoading:$,setIsReportLoading:ae,salesTrend:U,loadDashboardData:J}},dde=()=>{const{showAlert:a,showConfirm:e}=Na(),t=Fn(),r=sessionStorage.getItem("uiMode")==="lite",{stats:n,weeklyData:i,top3Products:o,topProfitProducts:l,anniversaries:c,repurchaseCandidates:d,forecastAlerts:u,freshnessAlerts:h,weatherAdvice:f,isLoading:p,isRankLoading:g,isWeatherLoading:b,isChartLoading:w,isReportLoading:_,setIsReportLoading:k,salesTrend:T}=cde(),[D,I]=H.useState(null),[O,P]=H.useState(!1),[V,G]=H.useState(null),[Q,$]=H.useState(null),[ae,J]=H.useState(""),[U,F]=H.useState(!1),[W,K]=H.useState("qty"),ee=H.useRef(null),ne=async()=>{try{k(!0),G("AI          ...");const de=await _l(a,"get_morning_briefing");G(de)}catch(de){console.error(de),G("      (AI)   .     !   . ")}finally{k(!1)}},re=async de=>{let fe=null;try{k(!0);const he=de==="weekly"?"":"";$({type:de,content:""}),fe=await Pa("get_business_report_data",{period:de});const Oe=`${` : ${ea().format("YYYY MM DD")}
 ${he}  :
- : ${fe.period_label}
-  : ${fe.total_sales.toLocaleString()}
-  : ${fe.total_orders.toLocaleString()}
-   : ${fe.new_customers.toLocaleString()}
-  : ${fe.top_products.map(Ce=>Ce.product_name).join(", ")}
-  : ${fe.top_profitable.map(Ce=>Ce.product_name).join(", ")}`}
    ${he}   'Executive Summary' .     (Action Plan)  HTML      .`,Se=await _l(a,"call_gemini_ai",{prompt:Oe});$({type:de,content:Se,rawData:fe})}catch(he){if(console.error(he),fe){const ve=`<div class="bg-amber-50 border-l-4 border-amber-400 p-6 mb-8 rounded-r-2xl"><p class="text-[13px] text-amber-700 font-medium"> AI        .</p></div><h3 class="text-2xl font-black text-slate-800 mb-6">   </h3><div class="grid grid-cols-2 gap-4 mb-10"><div class="bg-white p-6 rounded-[24px] border"><div> </div><div class="text-2xl font-black">${fe.total_sales.toLocaleString()}</div></div><div><div> </div><div class="text-2xl font-black">${fe.total_orders.toLocaleString()}</div></div></div>`;$({type:de,content:ve,rawData:fe})}else he.message?.includes("AI_QUOTA_EXCEEDED")||a("  ","    : "+he),$(null)}finally{k(!1)}},Z=async de=>{try{const fe=` 'CS ' . : ${de.customer_name},  : ${de.last_product},   .     .`,he=await _l(a,"call_gemini_ai",{prompt:fe});await e("AI   ( )",he+`

     ?`)&&(navigator.clipboard.writeText(he),window.__SMS_DRAFT_CONTENT__=he,window.__SMS_DRAFT_RECIPIENT__=de.mobile_number,t("/customer/sms"))}catch(fe){console.error(fe)}},ie=de=>{I(D===de?null:de),D!==de&&setTimeout(()=>{document.getElementById("alert-expansion-area")?.scrollIntoView({behavior:"smooth",block:"start"})},100)};return r?s.jsxs(s.Fragment,{children:[s.jsx(sde,{stats:n,isLoading:p,salesTrend:T,weatherAdvice:f,isWeatherLoading:b,onLogout:()=>P(!0)}),O&&s.jsx(gL,{onClose:()=>P(!1)})]}):s.jsxs("div",{className:"dashboard-container p-6 lg:p-8 min-[2000px]:p-12 bg-[#f8fafc] h-full flex flex-col overflow-hidden text-slate-900 font-sans relative",children:[s.jsxs("div",{className:"dashboard-content-inner no-print flex flex-col h-full flex-1 min-h-0 relative",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-indigo-500/5 blur-[120px] rounded-full pointer-events-none"}),s.jsx(Dne,{searchQuery:ae,setSearchQuery:J,isSearchFocused:U,setIsSearchFocused:F,searchRef:ee,setShowLogoutModal:P}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 min-[2000px]:gap-6 mb-4 min-[2000px]:mb-6 shrink-0",children:[s.jsx(Ine,{weatherAdvice:f,isWeatherLoading:b}),s.jsx(mo,{icon:"payments",iconColor:"text-indigo-600",iconBg:"bg-indigo-50",label:" ",value:`${Ve(n?.total_sales_amount||0)}`,trend:T,isLoading:p}),s.jsx(mo,{icon:"shopping_cart",iconColor:"text-blue-600",iconBg:"bg-blue-50",label:" ",value:`${Ve(n?.total_orders||0)}`,badge:"",isLoading:p}),s.jsx(mo,{icon:"group_add",iconColor:"text-indigo-600",iconBg:"bg-indigo-50",label:"   / ",value:`${Ve(n?.total_customers||0)} / ${Ve(n?.total_customers_all_time||0)}`,badge:" ",isLoading:p,secondaryValue:s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),"  ",Ve(n?.normal_customers_count||0)]}),s.jsx("span",{className:"w-px h-2 bg-slate-200"}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-400"}),"  ",Ve(n?.dormant_customers_count||0)]})]})}),s.jsx(mo,{icon:"local_shipping",iconColor:"text-amber-600",iconBg:"bg-amber-50",label:" ",value:`${Ve(n?.pending_orders||0)}`,badge:"",isLoading:p,className:"hover:border-amber-200"}),s.jsx(mo,{icon:"calendar_today",iconColor:"text-indigo-600",iconBg:"bg-indigo-50",label:" ",value:`${Ve(n?.today_schedule_count||0)}`,badge:"",isLoading:p}),s.jsx(mo,{icon:"event_available",iconColor:"text-teal-600",iconBg:"bg-teal-50",label:"  ()",value:`${Ve(n?.experience_reservation_count||0)}`,badge:"",isLoading:p,className:"hover:border-teal-200"}),s.jsx(mo,{icon:"inventory_2",iconColor:"text-rose-600",iconBg:"bg-rose-50",label:" ",value:`${Ve(n?.total_alert_count||u.length+h.length)}`,badge:"",isLoading:p,className:`border-l-4 border-l-rose-500 ${D==="inventory"?"ring-2 ring-rose-500":""}`,onClick:()=>ie("inventory"),secondaryValue:s.jsxs("span",{className:"text-[10px] font-bold text-rose-400 mb-1.5 flex gap-1",children:[s.jsxs("span",{children:[":",Ve(u.length)]}),s.jsx("span",{children:"/"}),s.jsxs("span",{children:[":",Ve(h.length)]})]})}),s.jsx(mo,{icon:"forum",iconColor:"text-blue-600",iconBg:"bg-blue-50",label:" ",value:`${Ve(n?.pending_consultation_count||0)}`,badge:"",isLoading:p,className:"border-l-4 border-l-blue-500",onClick:()=>t("/customer/consultation")}),s.jsx(mo,{icon:"notifications_active",iconColor:"text-indigo-600",iconBg:"bg-indigo-50",label:" ",value:`${Ve(d.length)}`,badge:"",isLoading:p,className:`border-l-4 border-l-indigo-500 ${D==="repurchase"?"ring-2 ring-indigo-500":""}`,onClick:()=>ie("repurchase")}),s.jsxs("div",{className:"bg-white rounded-[28px] py-5 px-6 border border-slate-100 shadow-[0_4px_20px_rgb(0,0,0,0.03)] flex flex-col justify-between h-full group transition-all duration-500 hover:border-indigo-200",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("h3",{className:"text-slate-500 text-[0.8rem] font-bold flex items-center gap-2 uppercase tracking-wider",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-600 bg-indigo-50 p-1.5 rounded-lg text-lg",children:"insights"})," "]}),s.jsx("span",{className:"bg-indigo-50 text-indigo-500 text-[9px] font-black px-2 py-0.5 rounded-full border border-indigo-100 uppercase tracking-tighter",children:"AI "})]}),s.jsxs("div",{className:"flex flex-col gap-1 mt-2",children:[s.jsxs("button",{onClick:ne,className:"w-full bg-slate-50 hover:bg-slate-100 p-1.5 rounded-xl text-left transition-all group flex items-center justify-between",children:[s.jsx("span",{className:"text-[11px] font-bold text-slate-700 ml-1",children:" "}),s.jsx("span",{className:"material-symbols-rounded text-sm text-slate-300 group-hover:text-indigo-500 transition-colors",children:"arrow_forward"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[s.jsx("button",{onClick:()=>re("weekly"),className:"bg-slate-50 hover:bg-indigo-50 p-1.5 rounded-xl text-center transition-all group",children:s.jsx("span",{className:"text-[11px] font-black text-slate-700 group-hover:text-indigo-600",children:" "})}),s.jsx("button",{onClick:()=>re("monthly"),className:"bg-slate-50 hover:bg-emerald-50 p-1.5 rounded-xl text-center transition-all group",children:s.jsx("span",{className:"text-[11px] font-black text-slate-700 group-hover:text-emerald-600",children:" "})})]})]})]}),s.jsx(ide,{})]}),s.jsx(Rne,{type:D,onClose:()=>I(null),forecastAlerts:u,freshnessAlerts:h,anniversaries:c,repurchaseCandidates:d,generateAIDraft:Z,navigate:t}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[1.5fr_1fr] gap-5 flex-1 min-h-0",children:[s.jsx(ade,{weeklyData:i,isChartLoading:w,navigate:t}),s.jsx(rde,{top3Products:o,topProfitProducts:l,topMode:W,setTopMode:K,isRankLoading:g})]})]}),O&&s.jsx(gL,{onClose:()=>P(!1)}),s.jsx(ode,{content:V,isLoading:_,onClose:()=>G(null)}),s.jsx(lde,{report:Q,isLoading:_,onClose:()=>$(null)})]})},ude=()=>{const[a,e]=H.useState(null),[t,r]=H.useState([]),[n,i]=H.useState(!0),o=H.useCallback(async()=>{i(!0);try{const[c,d,u]=await Promise.all([pt("get_dashboard_priority_stats"),pt("get_dashboard_secondary_stats"),pt("get_weekly_sales_data")]);e(h=>{const f={...h||{}};return c&&Object.keys(c).forEach(p=>{c[p]!==null&&(f[p]=c[p])}),d&&Object.keys(d).forEach(p=>{d[p]!==null&&(f[p]=d[p])}),f}),r(u||[])}catch(c){console.error("Mobile Dashboard Load Error:",c)}finally{i(!1)}},[]);H.useEffect(()=>{o()},[o]);const l=(()=>{if(!t||t.length<2)return null;const c=ea().format("MM-DD"),d=ea().subtract(1,"day").format("MM-DD"),u=t.find(g=>g.date===c),h=t.find(g=>g.date===d);if(!u||!h||h.total===0)return u&&u.total>0&&(!h||h.total===0)?{pct:100,isUp:!0}:null;const f=u.total-h.total,p=f/h.total*100;return{pct:Math.abs(p).toFixed(1),isUp:f>=0}})();return{stats:a,salesTrend:l,isLoading:n,loadData:o}},JU=(a,{threshold:e=80,maxY:t=150,scrollEltRef:r=null}={})=>{const[n,i]=H.useState(0),[o,l]=H.useState(!1),c=H.useRef(0),d=H.useRef(!1),u=H.useCallback(p=>{const g=r?.current||window;(g===window?window.scrollY:g.scrollTop)<=0&&(c.current=p.touches[0].pageY,d.current=!0)},[r]),h=H.useCallback(p=>{if(!d.current||o)return;const b=p.touches[0].pageY-c.current;if(b>0){const w=Math.min(b*.4,t);i(w),b>10&&p.cancelable&&p.preventDefault()}else i(0),d.current=!1},[o,t]),f=H.useCallback(async()=>{if(d.current)if(d.current=!1,n>=e){l(!0),i(e);try{await a()}finally{setTimeout(()=>{l(!1),i(0)},500)}}else i(0)},[n,e,a]);return{pullDistance:n,isRefreshing:o,bind:{onTouchStart:u,onTouchMove:h,onTouchEnd:f}}},hde=()=>{Fn();const{stats:a,salesTrend:e,isLoading:t,loadData:r}=ude(),n=H.useRef(null),[i,o]=H.useState(ea().format("HH:mm:ss")),l=H.useCallback(async()=>{await r(),o(ea().format("HH:mm:ss"))},[r]),{pullDistance:c,isRefreshing:d,bind:u}=JU(l,{scrollEltRef:n}),h=H.useCallback(async()=>{await r(),o(ea().format("HH:mm:ss"))},[r]);return H.useEffect(()=>{h();const f=()=>{document.visibilityState==="visible"&&(console.log("App returned to foreground, refreshing data..."),h())};return document.addEventListener("visibilitychange",f),()=>document.removeEventListener("visibilitychange",f)},[h]),s.jsxs("div",{className:"mobile-fullscreen bg-slate-50 flex flex-col font-sans overflow-x-hidden",children:[s.jsxs("div",{className:"bg-indigo-600 px-6 pt-8 pb-16 rounded-b-[40px] relative shadow-lg shrink-0",children:[s.jsx("div",{className:"absolute left-0 right-0 top-0 flex justify-center pointer-events-none transition-transform",style:{transform:`translateY(${c}px)`,opacity:c>20?1:0},children:s.jsx("div",{className:"bg-white/90 backdrop-blur-md p-2 rounded-full shadow-lg border border-white/20 mt-2",children:s.jsx(Ed,{size:20,className:`text-indigo-600 ${d?"animate-spin":""}`,style:{transform:d?"none":`rotate(${c*3}deg)`,transition:d?"none":"transform 0.1s"}})})}),s.jsxs("div",{className:"relative z-10 flex justify-between items-start mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white p-2 shadow-inner flex items-center justify-center overflow-hidden",children:s.jsx("img",{src:"/app-icon.png",alt:"Logo",className:"w-full h-full object-contain"})}),s.jsx("h1",{className:"text-white text-2xl font-black tracking-tight",children:"  "})]}),s.jsx("button",{onClick:r,disabled:t,className:`w-10 h-10 rounded-2xl bg-white/20 backdrop-blur-md flex items-center justify-center text-white transition-all active:scale-95 ${t?"opacity-50":""}`,children:s.jsx(Ed,{size:18,className:t?"animate-spin":""})})]}),s.jsxs("div",{className:`relative z-10 bg-white p-6 rounded-3xl shadow-xl transition-all duration-700 ease-out ${t?"opacity-90 scale-[0.98]":"opacity-100 scale-100"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("span",{className:"text-slate-400 font-bold text-xs uppercase tracking-tight",children:"  "}),!t&&e?s.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-[10px] font-black ${e.isUp?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:[e.isUp?s.jsx(Eg,{size:10}):s.jsx(cne,{size:10}),e.pct,"%"]}):s.jsx("div",{className:"w-12 h-4 bg-slate-50 rounded-full animate-pulse"})]}),s.jsx("div",{className:"text-3xl font-black text-slate-800 tracking-tight h-10 flex items-center",children:t?s.jsx("div",{className:"w-48 h-8 bg-slate-100 rounded-lg animate-pulse"}):`${Ve(a?.total_sales_amount||0)}`}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-50 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jc,{size:14,className:"text-indigo-400"}),s.jsx("span",{className:"text-[11px] text-slate-400 font-bold",children:ea().format("YYYY MM DD")})]}),s.jsxs("span",{className:"text-[10px] text-slate-300 font-medium tracking-tight whitespace-nowrap",children:[" : ",i]})]})]})]}),s.jsxs("div",{ref:n,...u,className:"flex-1 overflow-y-auto px-6 -mt-6 relative z-20 space-y-4 pb-32 touch-pan-y",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-md border border-slate-100 min-h-[140px] flex flex-col justify-between",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-blue-50 text-blue-600 flex items-center justify-center",children:s.jsx(px,{size:20})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-slate-400 font-bold text-xs mb-1",children:" "}),s.jsx("div",{className:"text-2xl font-black text-slate-800 h-8 flex items-center",children:t?s.jsx("div",{className:"w-12 h-6 bg-slate-50 rounded animate-pulse"}):`${Ve(a?.total_orders||0)}`})]})]}),s.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-md border border-slate-100 min-h-[140px] flex flex-col justify-between",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-amber-50 text-amber-600 flex items-center justify-center",children:s.jsx(mc,{size:20})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-slate-400 font-bold text-xs mb-1",children:" "}),s.jsx("div",{className:"text-2xl font-black text-slate-800 h-8 flex items-center",children:t?s.jsx("div",{className:"w-12 h-6 bg-slate-50 rounded animate-pulse"}):`${Ve(a?.pending_orders||0)}`})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-md border border-slate-100",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:s.jsx(xx,{size:20})}),s.jsx("h3",{className:"font-black text-slate-700",children:" "})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] text-slate-400 font-bold uppercase mb-1",children:"  "}),s.jsx("div",{className:"text-2xl font-black text-slate-800 h-8 flex items-center",children:t?s.jsx("div",{className:"w-16 h-6 bg-slate-50 rounded animate-pulse"}):`${Ve(a?.total_customers||0)}`})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[11px] text-slate-400 font-bold uppercase mb-1",children:" "}),s.jsx("div",{className:"text-lg font-black text-indigo-600 h-7 flex items-center justify-end",children:t?s.jsx("div",{className:"w-20 h-5 bg-slate-50 rounded animate-pulse"}):`${Ve(a?.total_customers_all_time||0)}`})]})]}),s.jsxs("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden flex",children:[s.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-1000",style:{width:t?"0%":"65%"}}),s.jsx("div",{className:"h-full bg-indigo-300 transition-all duration-1000",style:{width:t?"0%":"20%"}})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-md border border-slate-100",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-teal-50 text-teal-600 flex items-center justify-center",children:s.jsx(_ne,{size:20})}),s.jsx("h3",{className:"font-black text-slate-700",children:"  "})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1 tracking-tighter",children:"  "}),s.jsx("div",{className:"text-xl font-black text-slate-800 h-7 flex items-center",children:t?s.jsx("div",{className:"w-10 h-6 bg-slate-50 rounded animate-pulse"}):`${Ve(a?.experience_reservation_count||0)}`})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1 tracking-tighter",children:" "}),s.jsx("div",{className:"text-xl font-black text-slate-800 h-7 flex items-center",children:t?s.jsx("div",{className:"w-10 h-6 bg-slate-50 rounded animate-pulse"}):`${Ve(a?.today_schedule_count||0)}`})]})]})]}),s.jsx("div",{className:"mt-8 px-4 text-center opacity-30",children:s.jsxs("p",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-widest leading-relaxed",children:[" 2026 Mycelium Farm OS",s.jsx("br",{}),"  "]})})]})]})};var ra;(function(a){a[a.QR_CODE=0]="QR_CODE",a[a.AZTEC=1]="AZTEC",a[a.CODABAR=2]="CODABAR",a[a.CODE_39=3]="CODE_39",a[a.CODE_93=4]="CODE_93",a[a.CODE_128=5]="CODE_128",a[a.DATA_MATRIX=6]="DATA_MATRIX",a[a.MAXICODE=7]="MAXICODE",a[a.ITF=8]="ITF",a[a.EAN_13=9]="EAN_13",a[a.EAN_8=10]="EAN_8",a[a.PDF_417=11]="PDF_417",a[a.RSS_14=12]="RSS_14",a[a.RSS_EXPANDED=13]="RSS_EXPANDED",a[a.UPC_A=14]="UPC_A",a[a.UPC_E=15]="UPC_E",a[a.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ra||(ra={}));var vL=new Map([[ra.QR_CODE,"QR_CODE"],[ra.AZTEC,"AZTEC"],[ra.CODABAR,"CODABAR"],[ra.CODE_39,"CODE_39"],[ra.CODE_93,"CODE_93"],[ra.CODE_128,"CODE_128"],[ra.DATA_MATRIX,"DATA_MATRIX"],[ra.MAXICODE,"MAXICODE"],[ra.ITF,"ITF"],[ra.EAN_13,"EAN_13"],[ra.EAN_8,"EAN_8"],[ra.PDF_417,"PDF_417"],[ra.RSS_14,"RSS_14"],[ra.RSS_EXPANDED,"RSS_EXPANDED"],[ra.UPC_A,"UPC_A"],[ra.UPC_E,"UPC_E"],[ra.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),bL;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.URL=1]="URL"})(bL||(bL={}));function fde(a){return Object.values(ra).includes(a)}var g2;(function(a){a[a.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",a[a.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(g2||(g2={}));var pde=(function(){function a(){}return a.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",a.SCAN_DEFAULT_FPS=2,a.DEFAULT_DISABLE_FLIP=!1,a.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,a.DEFAULT_SUPPORTED_SCAN_TYPE=[g2.SCAN_TYPE_CAMERA,g2.SCAN_TYPE_FILE],a})(),eG=(function(){function a(e,t){this.format=e,this.formatName=t}return a.prototype.toString=function(){return this.formatName},a.create=function(e){if(!vL.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new a(e,vL.get(e))},a})(),yL=(function(){function a(){}return a.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},a.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},a})(),s4;(function(a){a[a.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",a[a.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",a[a.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(s4||(s4={}));var xde=(function(){function a(){}return a.createFrom=function(e){return{errorMessage:e,type:s4.UNKWOWN_ERROR}},a})(),mde=(function(){function a(e){this.verbose=e}return a.prototype.log=function(e){this.verbose&&console.log(e)},a.prototype.warn=function(e){this.verbose&&console.warn(e)},a.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},a.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},a})();function md(a){return typeof a>"u"||a===null}var qp=(function(){function a(){}return a.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},a.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},a.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},a.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},a.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},a.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},a.scannerPaused=function(){return"Scanner paused"},a})(),tG=(function(){function a(){}return a.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var r=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var n=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(n),o=Object.keys(e),l=0,c=o;l<c.length;l++){var d=c[l];if(i.has(d))return t.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},a})(),Og={exports:{}},gde=Og.exports,wL;function vde(){return wL||(wL=1,(function(a,e){(function(t,r){r(e)})(gde,(function(t){function r(ue){return ue==null}var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ue,m){ue.__proto__=m}||function(ue,m){for(var y in m)m.hasOwnProperty(y)&&(ue[y]=m[y])};function i(ue,m){n(ue,m);function y(){this.constructor=ue}ue.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}function o(ue,m){var y=Object.setPrototypeOf;y?y(ue,m):ue.__proto__=m}function l(ue,m){m===void 0&&(m=ue.constructor);var y=Error.captureStackTrace;y&&y(ue,m)}var c=(function(ue){i(m,ue);function m(y){var j=this.constructor,C=ue.call(this,y)||this;return Object.defineProperty(C,"name",{value:j.name,enumerable:!1}),o(C,j.prototype),l(C),C}return m})(Error);class d extends c{constructor(m=void 0){super(m),this.message=m}getKind(){return this.constructor.kind}}d.kind="Exception";class u extends d{}u.kind="ArgumentException";class h extends d{}h.kind="IllegalArgumentException";class f{constructor(m){if(this.binarizer=m,m===null)throw new h("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(m,y){return this.binarizer.getBlackRow(m,y)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(m,y,j,C){const M=this.binarizer.getLuminanceSource().crop(m,y,j,C);return new f(this.binarizer.createBinarizer(M))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const m=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new f(this.binarizer.createBinarizer(m))}rotateCounterClockwise45(){const m=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new f(this.binarizer.createBinarizer(m))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class p extends d{static getChecksumInstance(){return new p}}p.kind="ChecksumException";class g{constructor(m){this.source=m}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class b{static arraycopy(m,y,j,C,M){for(;M--;)j[C++]=m[y++]}static currentTimeMillis(){return Date.now()}}class w extends d{}w.kind="IndexOutOfBoundsException";class _ extends w{constructor(m=void 0,y=void 0){super(y),this.index=m,this.message=y}}_.kind="ArrayIndexOutOfBoundsException";class k{static fill(m,y){for(let j=0,C=m.length;j<C;j++)m[j]=y}static fillWithin(m,y,j,C){k.rangeCheck(m.length,y,j);for(let M=y;M<j;M++)m[M]=C}static rangeCheck(m,y,j){if(y>j)throw new h("fromIndex("+y+") > toIndex("+j+")");if(y<0)throw new _(y);if(j>m)throw new _(j)}static asList(...m){return m}static create(m,y,j){return Array.from({length:m}).map(M=>Array.from({length:y}).fill(j))}static createInt32Array(m,y,j){return Array.from({length:m}).map(M=>Int32Array.from({length:y}).fill(j))}static equals(m,y){if(!m||!y||!m.length||!y.length||m.length!==y.length)return!1;for(let j=0,C=m.length;j<C;j++)if(m[j]!==y[j])return!1;return!0}static hashCode(m){if(m===null)return 0;let y=1;for(const j of m)y=31*y+j;return y}static fillUint8Array(m,y){for(let j=0;j!==m.length;j++)m[j]=y}static copyOf(m,y){return m.slice(0,y)}static copyOfUint8Array(m,y){if(m.length<=y){const j=new Uint8Array(y);return j.set(m),j}return m.slice(0,y)}static copyOfRange(m,y,j){const C=j-y,M=new Int32Array(C);return b.arraycopy(m,y,M,0,C),M}static binarySearch(m,y,j){j===void 0&&(j=k.numberComparator);let C=0,M=m.length-1;for(;C<=M;){const R=M+C>>1,N=j(y,m[R]);if(N>0)C=R+1;else if(N<0)M=R-1;else return R}return-C-1}static numberComparator(m,y){return m-y}}class T{static numberOfTrailingZeros(m){let y;if(m===0)return 32;let j=31;return y=m<<16,y!==0&&(j-=16,m=y),y=m<<8,y!==0&&(j-=8,m=y),y=m<<4,y!==0&&(j-=4,m=y),y=m<<2,y!==0&&(j-=2,m=y),j-(m<<1>>>31)}static numberOfLeadingZeros(m){if(m===0)return 32;let y=1;return m>>>16||(y+=16,m<<=16),m>>>24||(y+=8,m<<=8),m>>>28||(y+=4,m<<=4),m>>>30||(y+=2,m<<=2),y-=m>>>31,y}static toHexString(m){return m.toString(16)}static toBinaryString(m){return String(parseInt(String(m),2))}static bitCount(m){return m=m-(m>>>1&1431655765),m=(m&858993459)+(m>>>2&858993459),m=m+(m>>>4)&252645135,m=m+(m>>>8),m=m+(m>>>16),m&63}static truncDivision(m,y){return Math.trunc(m/y)}static parseInt(m,y=void 0){return parseInt(m,y)}}T.MIN_VALUE_32_BITS=-2147483648,T.MAX_VALUE=Number.MAX_SAFE_INTEGER;class D{constructor(m,y){m===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=m,y==null?this.bits=D.makeArray(m):this.bits=y)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(m){if(m>this.bits.length*32){const y=D.makeArray(m);b.arraycopy(this.bits,0,y,0,this.bits.length),this.bits=y}}get(m){return(this.bits[Math.floor(m/32)]&1<<(m&31))!==0}set(m){this.bits[Math.floor(m/32)]|=1<<(m&31)}flip(m){this.bits[Math.floor(m/32)]^=1<<(m&31)}getNextSet(m){const y=this.size;if(m>=y)return y;const j=this.bits;let C=Math.floor(m/32),M=j[C];M&=~((1<<(m&31))-1);const R=j.length;for(;M===0;){if(++C===R)return y;M=j[C]}const N=C*32+T.numberOfTrailingZeros(M);return N>y?y:N}getNextUnset(m){const y=this.size;if(m>=y)return y;const j=this.bits;let C=Math.floor(m/32),M=~j[C];M&=~((1<<(m&31))-1);const R=j.length;for(;M===0;){if(++C===R)return y;M=~j[C]}const N=C*32+T.numberOfTrailingZeros(M);return N>y?y:N}setBulk(m,y){this.bits[Math.floor(m/32)]=y}setRange(m,y){if(y<m||m<0||y>this.size)throw new h;if(y===m)return;y--;const j=Math.floor(m/32),C=Math.floor(y/32),M=this.bits;for(let R=j;R<=C;R++){const N=R>j?0:m&31,L=(2<<(R<C?31:y&31))-(1<<N);M[R]|=L}}clear(){const m=this.bits.length,y=this.bits;for(let j=0;j<m;j++)y[j]=0}isRange(m,y,j){if(y<m||m<0||y>this.size)throw new h;if(y===m)return!0;y--;const C=Math.floor(m/32),M=Math.floor(y/32),R=this.bits;for(let N=C;N<=M;N++){const A=N>C?0:m&31,B=(2<<(N<M?31:y&31))-(1<<A)&4294967295;if((R[N]&B)!==(j?B:0))return!1}return!0}appendBit(m){this.ensureCapacity(this.size+1),m&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(m,y){if(y<0||y>32)throw new h("Num bits must be between 0 and 32");this.ensureCapacity(this.size+y);for(let j=y;j>0;j--)this.appendBit((m>>j-1&1)===1)}appendBitArray(m){const y=m.size;this.ensureCapacity(this.size+y);for(let j=0;j<y;j++)this.appendBit(m.get(j))}xor(m){if(this.size!==m.size)throw new h("Sizes don't match");const y=this.bits;for(let j=0,C=y.length;j<C;j++)y[j]^=m.bits[j]}toBytes(m,y,j,C){for(let M=0;M<C;M++){let R=0;for(let N=0;N<8;N++)this.get(m)&&(R|=1<<7-N),m++;y[j+M]=R}}getBitArray(){return this.bits}reverse(){const m=new Int32Array(this.bits.length),y=Math.floor((this.size-1)/32),j=y+1,C=this.bits;for(let M=0;M<j;M++){let R=C[M];R=R>>1&1431655765|(R&1431655765)<<1,R=R>>2&858993459|(R&858993459)<<2,R=R>>4&252645135|(R&252645135)<<4,R=R>>8&16711935|(R&16711935)<<8,R=R>>16&65535|(R&65535)<<16,m[y-M]=R}if(this.size!==j*32){const M=j*32-this.size;let R=m[0]>>>M;for(let N=1;N<j;N++){const A=m[N];R|=A<<32-M,m[N-1]=R,R=A>>>M}m[j-1]=R}this.bits=m}static makeArray(m){return new Int32Array(Math.floor((m+31)/32))}equals(m){if(!(m instanceof D))return!1;const y=m;return this.size===y.size&&k.equals(this.bits,y.bits)}hashCode(){return 31*this.size+k.hashCode(this.bits)}toString(){let m="";for(let y=0,j=this.size;y<j;y++)(y&7)===0&&(m+=" "),m+=this.get(y)?"X":".";return m}clone(){return new D(this.size,this.bits.slice())}}var I;(function(ue){ue[ue.OTHER=0]="OTHER",ue[ue.PURE_BARCODE=1]="PURE_BARCODE",ue[ue.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",ue[ue.TRY_HARDER=3]="TRY_HARDER",ue[ue.CHARACTER_SET=4]="CHARACTER_SET",ue[ue.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",ue[ue.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",ue[ue.ASSUME_GS1=7]="ASSUME_GS1",ue[ue.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",ue[ue.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",ue[ue.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(I||(I={}));var O=I;class P extends d{static getFormatInstance(){return new P}}P.kind="FormatException";var V;(function(ue){ue[ue.Cp437=0]="Cp437",ue[ue.ISO8859_1=1]="ISO8859_1",ue[ue.ISO8859_2=2]="ISO8859_2",ue[ue.ISO8859_3=3]="ISO8859_3",ue[ue.ISO8859_4=4]="ISO8859_4",ue[ue.ISO8859_5=5]="ISO8859_5",ue[ue.ISO8859_6=6]="ISO8859_6",ue[ue.ISO8859_7=7]="ISO8859_7",ue[ue.ISO8859_8=8]="ISO8859_8",ue[ue.ISO8859_9=9]="ISO8859_9",ue[ue.ISO8859_10=10]="ISO8859_10",ue[ue.ISO8859_11=11]="ISO8859_11",ue[ue.ISO8859_13=12]="ISO8859_13",ue[ue.ISO8859_14=13]="ISO8859_14",ue[ue.ISO8859_15=14]="ISO8859_15",ue[ue.ISO8859_16=15]="ISO8859_16",ue[ue.SJIS=16]="SJIS",ue[ue.Cp1250=17]="Cp1250",ue[ue.Cp1251=18]="Cp1251",ue[ue.Cp1252=19]="Cp1252",ue[ue.Cp1256=20]="Cp1256",ue[ue.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",ue[ue.UTF8=22]="UTF8",ue[ue.ASCII=23]="ASCII",ue[ue.Big5=24]="Big5",ue[ue.GB18030=25]="GB18030",ue[ue.EUC_KR=26]="EUC_KR"})(V||(V={}));class G{constructor(m,y,j,...C){this.valueIdentifier=m,this.name=j,typeof y=="number"?this.values=Int32Array.from([y]):this.values=y,this.otherEncodingNames=C,G.VALUE_IDENTIFIER_TO_ECI.set(m,this),G.NAME_TO_ECI.set(j,this);const M=this.values;for(let R=0,N=M.length;R!==N;R++){const A=M[R];G.VALUES_TO_ECI.set(A,this)}for(const R of C)G.NAME_TO_ECI.set(R,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(m){if(m<0||m>=900)throw new P("incorect value");const y=G.VALUES_TO_ECI.get(m);if(y===void 0)throw new P("incorect value");return y}static getCharacterSetECIByName(m){const y=G.NAME_TO_ECI.get(m);if(y===void 0)throw new P("incorect value");return y}equals(m){if(!(m instanceof G))return!1;const y=m;return this.getName()===y.getName()}}G.VALUE_IDENTIFIER_TO_ECI=new Map,G.VALUES_TO_ECI=new Map,G.NAME_TO_ECI=new Map,G.Cp437=new G(V.Cp437,Int32Array.from([0,2]),"Cp437"),G.ISO8859_1=new G(V.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),G.ISO8859_2=new G(V.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),G.ISO8859_3=new G(V.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),G.ISO8859_4=new G(V.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),G.ISO8859_5=new G(V.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),G.ISO8859_6=new G(V.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),G.ISO8859_7=new G(V.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),G.ISO8859_8=new G(V.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),G.ISO8859_9=new G(V.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),G.ISO8859_10=new G(V.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),G.ISO8859_11=new G(V.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),G.ISO8859_13=new G(V.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),G.ISO8859_14=new G(V.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),G.ISO8859_15=new G(V.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),G.ISO8859_16=new G(V.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),G.SJIS=new G(V.SJIS,20,"SJIS","Shift_JIS"),G.Cp1250=new G(V.Cp1250,21,"Cp1250","windows-1250"),G.Cp1251=new G(V.Cp1251,22,"Cp1251","windows-1251"),G.Cp1252=new G(V.Cp1252,23,"Cp1252","windows-1252"),G.Cp1256=new G(V.Cp1256,24,"Cp1256","windows-1256"),G.UnicodeBigUnmarked=new G(V.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),G.UTF8=new G(V.UTF8,26,"UTF8","UTF-8"),G.ASCII=new G(V.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),G.Big5=new G(V.Big5,28,"Big5"),G.GB18030=new G(V.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),G.EUC_KR=new G(V.EUC_KR,30,"EUC_KR","EUC-KR");class Q extends d{}Q.kind="UnsupportedOperationException";class ${static decode(m,y){const j=this.encodingName(y);return this.customDecoder?this.customDecoder(m,j):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(j)?this.decodeFallback(m,j):new TextDecoder(j).decode(m)}static shouldDecodeOnFallback(m){return!$.isBrowser()&&m==="ISO-8859-1"}static encode(m,y){const j=this.encodingName(y);return this.customEncoder?this.customEncoder(m,j):typeof TextEncoder>"u"?this.encodeFallback(m):new TextEncoder().encode(m)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(m){return typeof m=="string"?m:m.getName()}static encodingCharacterSet(m){return m instanceof G?m:G.getCharacterSetECIByName(m)}static decodeFallback(m,y){const j=this.encodingCharacterSet(y);if($.isDecodeFallbackSupported(j)){let C="";for(let M=0,R=m.length;M<R;M++){let N=m[M].toString(16);N.length<2&&(N="0"+N),C+="%"+N}return decodeURIComponent(C)}if(j.equals(G.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(m.buffer));throw new Q(`Encoding ${this.encodingName(y)} not supported by fallback.`)}static isDecodeFallbackSupported(m){return m.equals(G.UTF8)||m.equals(G.ISO8859_1)||m.equals(G.ASCII)}static encodeFallback(m){const j=btoa(unescape(encodeURIComponent(m))).split(""),C=[];for(let M=0;M<j.length;M++)C.push(j[M].charCodeAt(0));return new Uint8Array(C)}}class ae{static castAsNonUtf8Char(m,y=null){const j=y?y.getName():this.ISO88591;return $.decode(new Uint8Array([m]),j)}static guessEncoding(m,y){if(y!=null&&y.get(O.CHARACTER_SET)!==void 0)return y.get(O.CHARACTER_SET).toString();const j=m.length;let C=!0,M=!0,R=!0,N=0,A=0,L=0,B=0,Y=0,te=0,se=0,ce=0,pe=0,ye=0,ge=0;const _e=m.length>3&&m[0]===239&&m[1]===187&&m[2]===191;for(let ke=0;ke<j&&(C||M||R);ke++){const Ne=m[ke]&255;R&&(N>0?(Ne&128)===0?R=!1:N--:(Ne&128)!==0&&((Ne&64)===0?R=!1:(N++,(Ne&32)===0?A++:(N++,(Ne&16)===0?L++:(N++,(Ne&8)===0?B++:R=!1))))),C&&(Ne>127&&Ne<160?C=!1:Ne>159&&(Ne<192||Ne===215||Ne===247)&&ge++),M&&(Y>0?Ne<64||Ne===127||Ne>252?M=!1:Y--:Ne===128||Ne===160||Ne>239?M=!1:Ne>160&&Ne<224?(te++,ce=0,se++,se>pe&&(pe=se)):Ne>127?(Y++,se=0,ce++,ce>ye&&(ye=ce)):(se=0,ce=0))}return R&&N>0&&(R=!1),M&&Y>0&&(M=!1),R&&(_e||A+L+B>0)?ae.UTF8:M&&(ae.ASSUME_SHIFT_JIS||pe>=3||ye>=3)?ae.SHIFT_JIS:C&&M?pe===2&&te===2||ge*10>=j?ae.SHIFT_JIS:ae.ISO88591:C?ae.ISO88591:M?ae.SHIFT_JIS:R?ae.UTF8:ae.PLATFORM_DEFAULT_ENCODING}static format(m,...y){let j=-1;function C(R,N,A,L,B,Y){if(R==="%%")return"%";if(y[++j]===void 0)return;R=L?parseInt(L.substr(1)):void 0;let te=B?parseInt(B.substr(1)):void 0,se;switch(Y){case"s":se=y[j];break;case"c":se=y[j][0];break;case"f":se=parseFloat(y[j]).toFixed(R);break;case"p":se=parseFloat(y[j]).toPrecision(R);break;case"e":se=parseFloat(y[j]).toExponential(R);break;case"x":se=parseInt(y[j]).toString(te||16);break;case"d":se=parseFloat(parseInt(y[j],te||10).toPrecision(R)).toFixed(0);break}se=typeof se=="object"?JSON.stringify(se):(+se).toString(te);let ce=parseInt(A),pe=A&&A[0]+""=="0"?"0":" ";for(;se.length<ce;)se=N!==void 0?se+pe:pe+se;return se}let M=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return m.replace(M,C)}static getBytes(m,y){return $.encode(m,y)}static getCharCode(m,y=0){return m.charCodeAt(y)}static getCharAt(m){return String.fromCharCode(m)}}ae.SHIFT_JIS=G.SJIS.getName(),ae.GB2312="GB2312",ae.ISO88591=G.ISO8859_1.getName(),ae.EUC_JP="EUC_JP",ae.UTF8=G.UTF8.getName(),ae.PLATFORM_DEFAULT_ENCODING=ae.UTF8,ae.ASSUME_SHIFT_JIS=!1;class J{constructor(m=""){this.value=m}enableDecoding(m){return this.encoding=m,this}append(m){return typeof m=="string"?this.value+=m.toString():this.encoding?this.value+=ae.castAsNonUtf8Char(m,this.encoding):this.value+=String.fromCharCode(m),this}appendChars(m,y,j){for(let C=y;y<y+j;C++)this.append(m[C]);return this}length(){return this.value.length}charAt(m){return this.value.charAt(m)}deleteCharAt(m){this.value=this.value.substr(0,m)+this.value.substring(m+1)}setCharAt(m,y){this.value=this.value.substr(0,m)+y+this.value.substr(m+1)}substring(m,y){return this.value.substring(m,y)}setLengthToZero(){this.value=""}toString(){return this.value}insert(m,y){this.value=this.value.substr(0,m)+y+this.value.substr(m+y.length)}}class U{constructor(m,y,j,C){if(this.width=m,this.height=y,this.rowSize=j,this.bits=C,y==null&&(y=m),this.height=y,m<1||y<1)throw new h("Both dimensions must be greater than 0");j==null&&(j=Math.floor((m+31)/32)),this.rowSize=j,C==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(m){const y=m.length,j=m[0].length,C=new U(j,y);for(let M=0;M<y;M++){const R=m[M];for(let N=0;N<j;N++)R[N]&&C.set(N,M)}return C}static parseFromString(m,y,j){if(m===null)throw new h("stringRepresentation cannot be null");const C=new Array(m.length);let M=0,R=0,N=-1,A=0,L=0;for(;L<m.length;)if(m.charAt(L)===`
`||m.charAt(L)==="\r"){if(M>R){if(N===-1)N=M-R;else if(M-R!==N)throw new h("row lengths do not match");R=M,A++}L++}else if(m.substring(L,L+y.length)===y)L+=y.length,C[M]=!0,M++;else if(m.substring(L,L+j.length)===j)L+=j.length,C[M]=!1,M++;else throw new h("illegal character encountered: "+m.substring(L));if(M>R){if(N===-1)N=M-R;else if(M-R!==N)throw new h("row lengths do not match");A++}const B=new U(N,A);for(let Y=0;Y<M;Y++)C[Y]&&B.set(Math.floor(Y%N),Math.floor(Y/N));return B}get(m,y){const j=y*this.rowSize+Math.floor(m/32);return(this.bits[j]>>>(m&31)&1)!==0}set(m,y){const j=y*this.rowSize+Math.floor(m/32);this.bits[j]|=1<<(m&31)&4294967295}unset(m,y){const j=y*this.rowSize+Math.floor(m/32);this.bits[j]&=~(1<<(m&31)&4294967295)}flip(m,y){const j=y*this.rowSize+Math.floor(m/32);this.bits[j]^=1<<(m&31)&4294967295}xor(m){if(this.width!==m.getWidth()||this.height!==m.getHeight()||this.rowSize!==m.getRowSize())throw new h("input matrix dimensions do not match");const y=new D(Math.floor(this.width/32)+1),j=this.rowSize,C=this.bits;for(let M=0,R=this.height;M<R;M++){const N=M*j,A=m.getRow(M,y).getBitArray();for(let L=0;L<j;L++)C[N+L]^=A[L]}}clear(){const m=this.bits,y=m.length;for(let j=0;j<y;j++)m[j]=0}setRegion(m,y,j,C){if(y<0||m<0)throw new h("Left and top must be nonnegative");if(C<1||j<1)throw new h("Height and width must be at least 1");const M=m+j,R=y+C;if(R>this.height||M>this.width)throw new h("The region must fit inside the matrix");const N=this.rowSize,A=this.bits;for(let L=y;L<R;L++){const B=L*N;for(let Y=m;Y<M;Y++)A[B+Math.floor(Y/32)]|=1<<(Y&31)&4294967295}}getRow(m,y){y==null||y.getSize()<this.width?y=new D(this.width):y.clear();const j=this.rowSize,C=this.bits,M=m*j;for(let R=0;R<j;R++)y.setBulk(R*32,C[M+R]);return y}setRow(m,y){b.arraycopy(y.getBitArray(),0,this.bits,m*this.rowSize,this.rowSize)}rotate180(){const m=this.getWidth(),y=this.getHeight();let j=new D(m),C=new D(m);for(let M=0,R=Math.floor((y+1)/2);M<R;M++)j=this.getRow(M,j),C=this.getRow(y-1-M,C),j.reverse(),C.reverse(),this.setRow(M,C),this.setRow(y-1-M,j)}getEnclosingRectangle(){const m=this.width,y=this.height,j=this.rowSize,C=this.bits;let M=m,R=y,N=-1,A=-1;for(let L=0;L<y;L++)for(let B=0;B<j;B++){const Y=C[L*j+B];if(Y!==0){if(L<R&&(R=L),L>A&&(A=L),B*32<M){let te=0;for(;(Y<<31-te&4294967295)===0;)te++;B*32+te<M&&(M=B*32+te)}if(B*32+31>N){let te=31;for(;!(Y>>>te);)te--;B*32+te>N&&(N=B*32+te)}}}return N<M||A<R?null:Int32Array.from([M,R,N-M+1,A-R+1])}getTopLeftOnBit(){const m=this.rowSize,y=this.bits;let j=0;for(;j<y.length&&y[j]===0;)j++;if(j===y.length)return null;const C=j/m;let M=j%m*32;const R=y[j];let N=0;for(;(R<<31-N&4294967295)===0;)N++;return M+=N,Int32Array.from([M,C])}getBottomRightOnBit(){const m=this.rowSize,y=this.bits;let j=y.length-1;for(;j>=0&&y[j]===0;)j--;if(j<0)return null;const C=Math.floor(j/m);let M=Math.floor(j%m)*32;const R=y[j];let N=31;for(;!(R>>>N);)N--;return M+=N,Int32Array.from([M,C])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(m){if(!(m instanceof U))return!1;const y=m;return this.width===y.width&&this.height===y.height&&this.rowSize===y.rowSize&&k.equals(this.bits,y.bits)}hashCode(){let m=this.width;return m=31*m+this.width,m=31*m+this.height,m=31*m+this.rowSize,m=31*m+k.hashCode(this.bits),m}toString(m="X ",y="  ",j=`
`){return this.buildToString(m,y,j)}buildToString(m,y,j){let C=new J;for(let M=0,R=this.height;M<R;M++){for(let N=0,A=this.width;N<A;N++)C.append(this.get(N,M)?m:y);C.append(j)}return C.toString()}clone(){return new U(this.width,this.height,this.rowSize,this.bits.slice())}}class F extends d{static getNotFoundInstance(){return new F}}F.kind="NotFoundException";class W extends g{constructor(m){super(m),this.luminances=W.EMPTY,this.buckets=new Int32Array(W.LUMINANCE_BUCKETS)}getBlackRow(m,y){const j=this.getLuminanceSource(),C=j.getWidth();y==null||y.getSize()<C?y=new D(C):y.clear(),this.initArrays(C);const M=j.getRow(m,this.luminances),R=this.buckets;for(let A=0;A<C;A++)R[(M[A]&255)>>W.LUMINANCE_SHIFT]++;const N=W.estimateBlackPoint(R);if(C<3)for(let A=0;A<C;A++)(M[A]&255)<N&&y.set(A);else{let A=M[0]&255,L=M[1]&255;for(let B=1;B<C-1;B++){const Y=M[B+1]&255;(L*4-A-Y)/2<N&&y.set(B),A=L,L=Y}}return y}getBlackMatrix(){const m=this.getLuminanceSource(),y=m.getWidth(),j=m.getHeight(),C=new U(y,j);this.initArrays(y);const M=this.buckets;for(let A=1;A<5;A++){const L=Math.floor(j*A/5),B=m.getRow(L,this.luminances),Y=Math.floor(y*4/5);for(let te=Math.floor(y/5);te<Y;te++){const se=B[te]&255;M[se>>W.LUMINANCE_SHIFT]++}}const R=W.estimateBlackPoint(M),N=m.getMatrix();for(let A=0;A<j;A++){const L=A*y;for(let B=0;B<y;B++)(N[L+B]&255)<R&&C.set(B,A)}return C}createBinarizer(m){return new W(m)}initArrays(m){this.luminances.length<m&&(this.luminances=new Uint8ClampedArray(m));const y=this.buckets;for(let j=0;j<W.LUMINANCE_BUCKETS;j++)y[j]=0}static estimateBlackPoint(m){const y=m.length;let j=0,C=0,M=0;for(let B=0;B<y;B++)m[B]>M&&(C=B,M=m[B]),m[B]>j&&(j=m[B]);let R=0,N=0;for(let B=0;B<y;B++){const Y=B-C,te=m[B]*Y*Y;te>N&&(R=B,N=te)}if(C>R){const B=C;C=R,R=B}if(R-C<=y/16)throw new F;let A=R-1,L=-1;for(let B=R-1;B>C;B--){const Y=B-C,te=Y*Y*(R-B)*(j-m[B]);te>L&&(A=B,L=te)}return A<<W.LUMINANCE_SHIFT}}W.LUMINANCE_BITS=5,W.LUMINANCE_SHIFT=8-W.LUMINANCE_BITS,W.LUMINANCE_BUCKETS=1<<W.LUMINANCE_BITS,W.EMPTY=Uint8ClampedArray.from([0]);class K extends W{constructor(m){super(m),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const m=this.getLuminanceSource(),y=m.getWidth(),j=m.getHeight();if(y>=K.MINIMUM_DIMENSION&&j>=K.MINIMUM_DIMENSION){const C=m.getMatrix();let M=y>>K.BLOCK_SIZE_POWER;(y&K.BLOCK_SIZE_MASK)!==0&&M++;let R=j>>K.BLOCK_SIZE_POWER;(j&K.BLOCK_SIZE_MASK)!==0&&R++;const N=K.calculateBlackPoints(C,M,R,y,j),A=new U(y,j);K.calculateThresholdForBlock(C,M,R,y,j,N,A),this.matrix=A}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(m){return new K(m)}static calculateThresholdForBlock(m,y,j,C,M,R,N){const A=M-K.BLOCK_SIZE,L=C-K.BLOCK_SIZE;for(let B=0;B<j;B++){let Y=B<<K.BLOCK_SIZE_POWER;Y>A&&(Y=A);const te=K.cap(B,2,j-3);for(let se=0;se<y;se++){let ce=se<<K.BLOCK_SIZE_POWER;ce>L&&(ce=L);const pe=K.cap(se,2,y-3);let ye=0;for(let _e=-2;_e<=2;_e++){const ke=R[te+_e];ye+=ke[pe-2]+ke[pe-1]+ke[pe]+ke[pe+1]+ke[pe+2]}const ge=ye/25;K.thresholdBlock(m,ce,Y,ge,C,N)}}}static cap(m,y,j){return m<y?y:m>j?j:m}static thresholdBlock(m,y,j,C,M,R){for(let N=0,A=j*M+y;N<K.BLOCK_SIZE;N++,A+=M)for(let L=0;L<K.BLOCK_SIZE;L++)(m[A+L]&255)<=C&&R.set(y+L,j+N)}static calculateBlackPoints(m,y,j,C,M){const R=M-K.BLOCK_SIZE,N=C-K.BLOCK_SIZE,A=new Array(j);for(let L=0;L<j;L++){A[L]=new Int32Array(y);let B=L<<K.BLOCK_SIZE_POWER;B>R&&(B=R);for(let Y=0;Y<y;Y++){let te=Y<<K.BLOCK_SIZE_POWER;te>N&&(te=N);let se=0,ce=255,pe=0;for(let ge=0,_e=B*C+te;ge<K.BLOCK_SIZE;ge++,_e+=C){for(let ke=0;ke<K.BLOCK_SIZE;ke++){const Ne=m[_e+ke]&255;se+=Ne,Ne<ce&&(ce=Ne),Ne>pe&&(pe=Ne)}if(pe-ce>K.MIN_DYNAMIC_RANGE)for(ge++,_e+=C;ge<K.BLOCK_SIZE;ge++,_e+=C)for(let ke=0;ke<K.BLOCK_SIZE;ke++)se+=m[_e+ke]&255}let ye=se>>K.BLOCK_SIZE_POWER*2;if(pe-ce<=K.MIN_DYNAMIC_RANGE&&(ye=ce/2,L>0&&Y>0)){const ge=(A[L-1][Y]+2*A[L][Y-1]+A[L-1][Y-1])/4;ce<ge&&(ye=ge)}A[L][Y]=ye}}return A}}K.BLOCK_SIZE_POWER=3,K.BLOCK_SIZE=1<<K.BLOCK_SIZE_POWER,K.BLOCK_SIZE_MASK=K.BLOCK_SIZE-1,K.MINIMUM_DIMENSION=K.BLOCK_SIZE*5,K.MIN_DYNAMIC_RANGE=24;class ee{constructor(m,y){this.width=m,this.height=y}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(m,y,j,C){throw new Q("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Q("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Q("This luminance source does not support rotation by 45 degrees.")}toString(){const m=new Uint8ClampedArray(this.width);let y=new J;for(let j=0;j<this.height;j++){const C=this.getRow(j,m);for(let M=0;M<this.width;M++){const R=C[M]&255;let N;R<64?N="#":R<128?N="+":R<192?N=".":N=" ",y.append(N)}y.append(`
`)}return y.toString()}}class ne extends ee{constructor(m){super(m.getWidth(),m.getHeight()),this.delegate=m}getRow(m,y){const j=this.delegate.getRow(m,y),C=this.getWidth();for(let M=0;M<C;M++)j[M]=255-(j[M]&255);return j}getMatrix(){const m=this.delegate.getMatrix(),y=this.getWidth()*this.getHeight(),j=new Uint8ClampedArray(y);for(let C=0;C<y;C++)j[C]=255-(m[C]&255);return j}isCropSupported(){return this.delegate.isCropSupported()}crop(m,y,j,C){return new ne(this.delegate.crop(m,y,j,C))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ne(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ne(this.delegate.rotateCounterClockwise45())}}class re extends ee{constructor(m){super(m.width,m.height),this.canvas=m,this.tempCanvasElement=null,this.buffer=re.makeBufferFromCanvasImageData(m)}static makeBufferFromCanvasImageData(m){const y=m.getContext("2d").getImageData(0,0,m.width,m.height);return re.toGrayscaleBuffer(y.data,m.width,m.height)}static toGrayscaleBuffer(m,y,j){const C=new Uint8ClampedArray(y*j);for(let M=0,R=0,N=m.length;M<N;M+=4,R++){let A;if(m[M+3]===0)A=255;else{const B=m[M],Y=m[M+1],te=m[M+2];A=306*B+601*Y+117*te+512>>10}C[R]=A}return C}getRow(m,y){if(m<0||m>=this.getHeight())throw new h("Requested row is outside the image: "+m);const j=this.getWidth(),C=m*j;return y===null?y=this.buffer.slice(C,C+j):(y.length<j&&(y=new Uint8ClampedArray(j)),y.set(this.buffer.slice(C,C+j))),y}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(m,y,j,C){return super.crop(m,y,j,C),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const m=this.canvas.ownerDocument.createElement("canvas");m.width=this.canvas.width,m.height=this.canvas.height,this.tempCanvasElement=m}return this.tempCanvasElement}rotate(m){const y=this.getTempCanvasElement(),j=y.getContext("2d"),C=m*re.DEGREE_TO_RADIANS,M=this.canvas.width,R=this.canvas.height,N=Math.ceil(Math.abs(Math.cos(C))*M+Math.abs(Math.sin(C))*R),A=Math.ceil(Math.abs(Math.sin(C))*M+Math.abs(Math.cos(C))*R);return y.width=N,y.height=A,j.translate(N/2,A/2),j.rotate(C),j.drawImage(this.canvas,M/-2,R/-2),this.buffer=re.makeBufferFromCanvasImageData(y),this}invert(){return new ne(this)}}re.DEGREE_TO_RADIANS=Math.PI/180;class Z{constructor(m,y,j){this.deviceId=m,this.label=y,this.kind="videoinput",this.groupId=j||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ie=(globalThis||kg||self||window||void 0)&&(globalThis||kg||self||window||void 0).__awaiter||function(ue,m,y,j){function C(M){return M instanceof y?M:new y(function(R){R(M)})}return new(y||(y=Promise))(function(M,R){function N(B){try{L(j.next(B))}catch(Y){R(Y)}}function A(B){try{L(j.throw(B))}catch(Y){R(Y)}}function L(B){B.done?M(B.value):C(B.value).then(N,A)}L((j=j.apply(ue,m||[])).next())})};class de{constructor(m,y=500,j){this.reader=m,this.timeBetweenScansMillis=y,this._hints=j,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(m){this._timeBetweenDecodingAttempts=m<0?0:m}set hints(m){this._hints=m||null}get hints(){return this._hints}listVideoInputDevices(){return ie(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const m=yield navigator.mediaDevices.enumerateDevices(),y=[];for(const j of m){const C=j.kind==="video"?"videoinput":j.kind;if(C!=="videoinput")continue;const M=j.deviceId||j.id,R=j.label||`Video device ${y.length+1}`,N=j.groupId,A={deviceId:M,label:R,kind:C,groupId:N};y.push(A)}return y})}getVideoInputDevices(){return ie(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(y=>new Z(y.deviceId,y.label))})}findDeviceById(m){return ie(this,void 0,void 0,function*(){const y=yield this.listVideoInputDevices();return y?y.find(j=>j.deviceId===m):null})}decodeFromInputVideoDevice(m,y){return ie(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(m,y)})}decodeOnceFromVideoDevice(m,y){return ie(this,void 0,void 0,function*(){this.reset();let j;m?j={deviceId:{exact:m}}:j={facingMode:"environment"};const C={video:j};return yield this.decodeOnceFromConstraints(C,y)})}decodeOnceFromConstraints(m,y){return ie(this,void 0,void 0,function*(){const j=yield navigator.mediaDevices.getUserMedia(m);return yield this.decodeOnceFromStream(j,y)})}decodeOnceFromStream(m,y){return ie(this,void 0,void 0,function*(){this.reset();const j=yield this.attachStreamToVideo(m,y);return yield this.decodeOnce(j)})}decodeFromInputVideoDeviceContinuously(m,y,j){return ie(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(m,y,j)})}decodeFromVideoDevice(m,y,j){return ie(this,void 0,void 0,function*(){let C;m?C={deviceId:{exact:m}}:C={facingMode:"environment"};const M={video:C};return yield this.decodeFromConstraints(M,y,j)})}decodeFromConstraints(m,y,j){return ie(this,void 0,void 0,function*(){const C=yield navigator.mediaDevices.getUserMedia(m);return yield this.decodeFromStream(C,y,j)})}decodeFromStream(m,y,j){return ie(this,void 0,void 0,function*(){this.reset();const C=yield this.attachStreamToVideo(m,y);return yield this.decodeContinuously(C,j)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(m,y){return ie(this,void 0,void 0,function*(){const j=this.prepareVideoElement(y);return this.addVideoSource(j,m),this.videoElement=j,this.stream=m,yield this.playVideoOnLoadAsync(j),j})}playVideoOnLoadAsync(m){return new Promise((y,j)=>this.playVideoOnLoad(m,()=>y()))}playVideoOnLoad(m,y){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(m),m.addEventListener("ended",this.videoEndedListener),m.addEventListener("canplay",this.videoCanPlayListener),m.addEventListener("playing",y),this.tryPlayVideo(m)}isVideoPlaying(m){return m.currentTime>0&&!m.paused&&!m.ended&&m.readyState>2}tryPlayVideo(m){return ie(this,void 0,void 0,function*(){if(this.isVideoPlaying(m)){console.warn("Trying to play video that is already playing.");return}try{yield m.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(m,y){const j=document.getElementById(m);if(!j)throw new u(`element with id '${m}' not found`);if(j.nodeName.toLowerCase()!==y.toLowerCase())throw new u(`element with id '${m}' must be an ${y} element`);return j}decodeFromImage(m,y){if(!m&&!y)throw new u("either imageElement with a src set or an url must be provided");return y&&!m?this.decodeFromImageUrl(y):this.decodeFromImageElement(m)}decodeFromVideo(m,y){if(!m&&!y)throw new u("Either an element with a src set or an URL must be provided");return y&&!m?this.decodeFromVideoUrl(y):this.decodeFromVideoElement(m)}decodeFromVideoContinuously(m,y,j){if(m===void 0&&y===void 0)throw new u("Either an element with a src set or an URL must be provided");return y&&!m?this.decodeFromVideoUrlContinuously(y,j):this.decodeFromVideoElementContinuously(m,j)}decodeFromImageElement(m){if(!m)throw new u("An image element must be provided.");this.reset();const y=this.prepareImageElement(m);this.imageElement=y;let j;return this.isImageLoaded(y)?j=this.decodeOnce(y,!1,!0):j=this._decodeOnLoadImage(y),j}decodeFromVideoElement(m){const y=this._decodeFromVideoElementSetup(m);return this._decodeOnLoadVideo(y)}decodeFromVideoElementContinuously(m,y){const j=this._decodeFromVideoElementSetup(m);return this._decodeOnLoadVideoContinuously(j,y)}_decodeFromVideoElementSetup(m){if(!m)throw new u("A video element must be provided.");this.reset();const y=this.prepareVideoElement(m);return this.videoElement=y,y}decodeFromImageUrl(m){if(!m)throw new u("An URL must be provided.");this.reset();const y=this.prepareImageElement();this.imageElement=y;const j=this._decodeOnLoadImage(y);return y.src=m,j}decodeFromVideoUrl(m){if(!m)throw new u("An URL must be provided.");this.reset();const y=this.prepareVideoElement(),j=this.decodeFromVideoElement(y);return y.src=m,j}decodeFromVideoUrlContinuously(m,y){if(!m)throw new u("An URL must be provided.");this.reset();const j=this.prepareVideoElement(),C=this.decodeFromVideoElementContinuously(j,y);return j.src=m,C}_decodeOnLoadImage(m){return new Promise((y,j)=>{this.imageLoadedListener=()=>this.decodeOnce(m,!1,!0).then(y,j),m.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(m){return ie(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(m),yield this.decodeOnce(m)})}_decodeOnLoadVideoContinuously(m,y){return ie(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(m),this.decodeContinuously(m,y)})}isImageLoaded(m){return!(!m.complete||m.naturalWidth===0)}prepareImageElement(m){let y;return typeof m>"u"&&(y=document.createElement("img"),y.width=200,y.height=200),typeof m=="string"&&(y=this.getMediaElement(m,"img")),m instanceof HTMLImageElement&&(y=m),y}prepareVideoElement(m){let y;return!m&&typeof document<"u"&&(y=document.createElement("video"),y.width=200,y.height=200),typeof m=="string"&&(y=this.getMediaElement(m,"video")),m instanceof HTMLVideoElement&&(y=m),y.setAttribute("autoplay","true"),y.setAttribute("muted","true"),y.setAttribute("playsinline","true"),y}decodeOnce(m,y=!0,j=!0){this._stopAsyncDecode=!1;const C=(M,R)=>{if(this._stopAsyncDecode){R(new F("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const N=this.decode(m);M(N)}catch(N){const A=y&&N instanceof F,B=(N instanceof p||N instanceof P)&&j;if(A||B)return setTimeout(C,this._timeBetweenDecodingAttempts,M,R);R(N)}};return new Promise((M,R)=>C(M,R))}decodeContinuously(m,y){this._stopContinuousDecode=!1;const j=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const C=this.decode(m);y(C,null),setTimeout(j,this.timeBetweenScansMillis)}catch(C){y(null,C);const M=C instanceof p||C instanceof P,R=C instanceof F;(M||R)&&setTimeout(j,this._timeBetweenDecodingAttempts)}};j()}decode(m){const y=this.createBinaryBitmap(m);return this.decodeBitmap(y)}_isHTMLVideoElement(m){return m.videoWidth!==0}drawFrameOnCanvas(m,y,j){y||(y={sx:0,sy:0,sWidth:m.videoWidth,sHeight:m.videoHeight,dx:0,dy:0,dWidth:m.videoWidth,dHeight:m.videoHeight}),j||(j=this.captureCanvasContext),j.drawImage(m,y.sx,y.sy,y.sWidth,y.sHeight,y.dx,y.dy,y.dWidth,y.dHeight)}drawImageOnCanvas(m,y,j=this.captureCanvasContext){y||(y={sx:0,sy:0,sWidth:m.naturalWidth,sHeight:m.naturalHeight,dx:0,dy:0,dWidth:m.naturalWidth,dHeight:m.naturalHeight}),j||(j=this.captureCanvasContext),j.drawImage(m,y.sx,y.sy,y.sWidth,y.sHeight,y.dx,y.dy,y.dWidth,y.dHeight)}createBinaryBitmap(m){this.getCaptureCanvasContext(m),this._isHTMLVideoElement(m)?this.drawFrameOnCanvas(m):this.drawImageOnCanvas(m);const y=this.getCaptureCanvas(m),j=new re(y),C=new K(j);return new f(C)}getCaptureCanvasContext(m){if(!this.captureCanvasContext){const j=this.getCaptureCanvas(m).getContext("2d");this.captureCanvasContext=j}return this.captureCanvasContext}getCaptureCanvas(m){if(!this.captureCanvas){const y=this.createCaptureCanvas(m);this.captureCanvas=y}return this.captureCanvas}decodeBitmap(m){return this.reader.decode(m,this._hints)}createCaptureCanvas(m){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const y=document.createElement("canvas");let j,C;return typeof m<"u"&&(m instanceof HTMLVideoElement?(j=m.videoWidth,C=m.videoHeight):m instanceof HTMLImageElement&&(j=m.naturalWidth||m.width,C=m.naturalHeight||m.height)),y.style.width=j+"px",y.style.height=C+"px",y.width=j,y.height=C,y}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(m=>m.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(m,y){try{m.srcObject=y}catch{m.src=URL.createObjectURL(y)}}cleanVideoSource(m){try{m.srcObject=null}catch{m.src=""}this.videoElement.removeAttribute("src")}}class fe{constructor(m,y,j=y==null?0:8*y.length,C,M,R=b.currentTimeMillis()){this.text=m,this.rawBytes=y,this.numBits=j,this.resultPoints=C,this.format=M,this.timestamp=R,this.text=m,this.rawBytes=y,j==null?this.numBits=y==null?0:8*y.length:this.numBits=j,this.resultPoints=C,this.format=M,this.resultMetadata=null,R==null?this.timestamp=b.currentTimeMillis():this.timestamp=R}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(m,y){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(m,y)}putAllMetadata(m){m!==null&&(this.resultMetadata===null?this.resultMetadata=m:this.resultMetadata=new Map(m))}addResultPoints(m){const y=this.resultPoints;if(y===null)this.resultPoints=m;else if(m!==null&&m.length>0){const j=new Array(y.length+m.length);b.arraycopy(y,0,j,0,y.length),b.arraycopy(m,0,j,y.length,m.length),this.resultPoints=j}}getTimestamp(){return this.timestamp}toString(){return this.text}}var he;(function(ue){ue[ue.AZTEC=0]="AZTEC",ue[ue.CODABAR=1]="CODABAR",ue[ue.CODE_39=2]="CODE_39",ue[ue.CODE_93=3]="CODE_93",ue[ue.CODE_128=4]="CODE_128",ue[ue.DATA_MATRIX=5]="DATA_MATRIX",ue[ue.EAN_8=6]="EAN_8",ue[ue.EAN_13=7]="EAN_13",ue[ue.ITF=8]="ITF",ue[ue.MAXICODE=9]="MAXICODE",ue[ue.PDF_417=10]="PDF_417",ue[ue.QR_CODE=11]="QR_CODE",ue[ue.RSS_14=12]="RSS_14",ue[ue.RSS_EXPANDED=13]="RSS_EXPANDED",ue[ue.UPC_A=14]="UPC_A",ue[ue.UPC_E=15]="UPC_E",ue[ue.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(he||(he={}));var ve=he,Oe;(function(ue){ue[ue.OTHER=0]="OTHER",ue[ue.ORIENTATION=1]="ORIENTATION",ue[ue.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",ue[ue.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",ue[ue.ISSUE_NUMBER=4]="ISSUE_NUMBER",ue[ue.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",ue[ue.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",ue[ue.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",ue[ue.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",ue[ue.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",ue[ue.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Oe||(Oe={}));var Se=Oe;class Ce{constructor(m,y,j,C,M=-1,R=-1){this.rawBytes=m,this.text=y,this.byteSegments=j,this.ecLevel=C,this.structuredAppendSequenceNumber=M,this.structuredAppendParity=R,this.numBits=m==null?0:8*m.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(m){this.numBits=m}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(m){this.errorsCorrected=m}getErasures(){return this.erasures}setErasures(m){this.erasures=m}getOther(){return this.other}setOther(m){this.other=m}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class we{exp(m){return this.expTable[m]}log(m){if(m===0)throw new h;return this.logTable[m]}static addOrSubtract(m,y){return m^y}}class xe{constructor(m,y){if(y.length===0)throw new h;this.field=m;const j=y.length;if(j>1&&y[0]===0){let C=1;for(;C<j&&y[C]===0;)C++;C===j?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(j-C),b.arraycopy(y,C,this.coefficients,0,this.coefficients.length))}else this.coefficients=y}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(m){return this.coefficients[this.coefficients.length-1-m]}evaluateAt(m){if(m===0)return this.getCoefficient(0);const y=this.coefficients;let j;if(m===1){j=0;for(let R=0,N=y.length;R!==N;R++){const A=y[R];j=we.addOrSubtract(j,A)}return j}j=y[0];const C=y.length,M=this.field;for(let R=1;R<C;R++)j=we.addOrSubtract(M.multiply(m,j),y[R]);return j}addOrSubtract(m){if(!this.field.equals(m.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero())return m;if(m.isZero())return this;let y=this.coefficients,j=m.coefficients;if(y.length>j.length){const R=y;y=j,j=R}let C=new Int32Array(j.length);const M=j.length-y.length;b.arraycopy(j,0,C,0,M);for(let R=M;R<j.length;R++)C[R]=we.addOrSubtract(y[R-M],j[R]);return new xe(this.field,C)}multiply(m){if(!this.field.equals(m.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero()||m.isZero())return this.field.getZero();const y=this.coefficients,j=y.length,C=m.coefficients,M=C.length,R=new Int32Array(j+M-1),N=this.field;for(let A=0;A<j;A++){const L=y[A];for(let B=0;B<M;B++)R[A+B]=we.addOrSubtract(R[A+B],N.multiply(L,C[B]))}return new xe(N,R)}multiplyScalar(m){if(m===0)return this.field.getZero();if(m===1)return this;const y=this.coefficients.length,j=this.field,C=new Int32Array(y),M=this.coefficients;for(let R=0;R<y;R++)C[R]=j.multiply(M[R],m);return new xe(j,C)}multiplyByMonomial(m,y){if(m<0)throw new h;if(y===0)return this.field.getZero();const j=this.coefficients,C=j.length,M=new Int32Array(C+m),R=this.field;for(let N=0;N<C;N++)M[N]=R.multiply(j[N],y);return new xe(R,M)}divide(m){if(!this.field.equals(m.field))throw new h("GenericGFPolys do not have same GenericGF field");if(m.isZero())throw new h("Divide by 0");const y=this.field;let j=y.getZero(),C=this;const M=m.getCoefficient(m.getDegree()),R=y.inverse(M);for(;C.getDegree()>=m.getDegree()&&!C.isZero();){const N=C.getDegree()-m.getDegree(),A=y.multiply(C.getCoefficient(C.getDegree()),R),L=m.multiplyByMonomial(N,A),B=y.buildMonomial(N,A);j=j.addOrSubtract(B),C=C.addOrSubtract(L)}return[j,C]}toString(){let m="";for(let y=this.getDegree();y>=0;y--){let j=this.getCoefficient(y);if(j!==0){if(j<0?(m+=" - ",j=-j):m.length>0&&(m+=" + "),y===0||j!==1){const C=this.field.log(j);C===0?m+="1":C===1?m+="a":(m+="a^",m+=C)}y!==0&&(y===1?m+="x":(m+="x^",m+=y))}}return m}}class be extends d{}be.kind="ArithmeticException";class Ee extends we{constructor(m,y,j){super(),this.primitive=m,this.size=y,this.generatorBase=j;const C=new Int32Array(y);let M=1;for(let N=0;N<y;N++)C[N]=M,M*=2,M>=y&&(M^=m,M&=y-1);this.expTable=C;const R=new Int32Array(y);for(let N=0;N<y-1;N++)R[C[N]]=N;this.logTable=R,this.zero=new xe(this,Int32Array.from([0])),this.one=new xe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(m,y){if(m<0)throw new h;if(y===0)return this.zero;const j=new Int32Array(m+1);return j[0]=y,new xe(this,j)}inverse(m){if(m===0)throw new be;return this.expTable[this.size-this.logTable[m]-1]}multiply(m,y){return m===0||y===0?0:this.expTable[(this.logTable[m]+this.logTable[y])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+T.toHexString(this.primitive)+","+this.size+")"}equals(m){return m===this}}Ee.AZTEC_DATA_12=new Ee(4201,4096,1),Ee.AZTEC_DATA_10=new Ee(1033,1024,1),Ee.AZTEC_DATA_6=new Ee(67,64,1),Ee.AZTEC_PARAM=new Ee(19,16,1),Ee.QR_CODE_FIELD_256=new Ee(285,256,0),Ee.DATA_MATRIX_FIELD_256=new Ee(301,256,1),Ee.AZTEC_DATA_8=Ee.DATA_MATRIX_FIELD_256,Ee.MAXICODE_FIELD_64=Ee.AZTEC_DATA_6;class ze extends d{}ze.kind="ReedSolomonException";class Ze extends d{}Ze.kind="IllegalStateException";class Re{constructor(m){this.field=m}decode(m,y){const j=this.field,C=new xe(j,m),M=new Int32Array(y);let R=!0;for(let se=0;se<y;se++){const ce=C.evaluateAt(j.exp(se+j.getGeneratorBase()));M[M.length-1-se]=ce,ce!==0&&(R=!1)}if(R)return;const N=new xe(j,M),A=this.runEuclideanAlgorithm(j.buildMonomial(y,1),N,y),L=A[0],B=A[1],Y=this.findErrorLocations(L),te=this.findErrorMagnitudes(B,Y);for(let se=0;se<Y.length;se++){const ce=m.length-1-j.log(Y[se]);if(ce<0)throw new ze("Bad error location");m[ce]=Ee.addOrSubtract(m[ce],te[se])}}runEuclideanAlgorithm(m,y,j){if(m.getDegree()<y.getDegree()){const se=m;m=y,y=se}const C=this.field;let M=m,R=y,N=C.getZero(),A=C.getOne();for(;R.getDegree()>=(j/2|0);){let se=M,ce=N;if(M=R,N=A,M.isZero())throw new ze("r_{i-1} was zero");R=se;let pe=C.getZero();const ye=M.getCoefficient(M.getDegree()),ge=C.inverse(ye);for(;R.getDegree()>=M.getDegree()&&!R.isZero();){const _e=R.getDegree()-M.getDegree(),ke=C.multiply(R.getCoefficient(R.getDegree()),ge);pe=pe.addOrSubtract(C.buildMonomial(_e,ke)),R=R.addOrSubtract(M.multiplyByMonomial(_e,ke))}if(A=pe.multiply(N).addOrSubtract(ce),R.getDegree()>=M.getDegree())throw new Ze("Division algorithm failed to reduce polynomial?")}const L=A.getCoefficient(0);if(L===0)throw new ze("sigmaTilde(0) was zero");const B=C.inverse(L),Y=A.multiplyScalar(B),te=R.multiplyScalar(B);return[Y,te]}findErrorLocations(m){const y=m.getDegree();if(y===1)return Int32Array.from([m.getCoefficient(1)]);const j=new Int32Array(y);let C=0;const M=this.field;for(let R=1;R<M.getSize()&&C<y;R++)m.evaluateAt(R)===0&&(j[C]=M.inverse(R),C++);if(C!==y)throw new ze("Error locator degree does not match number of roots");return j}findErrorMagnitudes(m,y){const j=y.length,C=new Int32Array(j),M=this.field;for(let R=0;R<j;R++){const N=M.inverse(y[R]);let A=1;for(let L=0;L<j;L++)if(R!==L){const B=M.multiply(y[L],N),Y=(B&1)===0?B|1:B&-2;A=M.multiply(A,Y)}C[R]=M.multiply(m.evaluateAt(N),M.inverse(A)),M.getGeneratorBase()!==0&&(C[R]=M.multiply(C[R],N))}return C}}var ut;(function(ue){ue[ue.UPPER=0]="UPPER",ue[ue.LOWER=1]="LOWER",ue[ue.MIXED=2]="MIXED",ue[ue.DIGIT=3]="DIGIT",ue[ue.PUNCT=4]="PUNCT",ue[ue.BINARY=5]="BINARY"})(ut||(ut={}));class vt{decode(m){this.ddata=m;let y=m.getBits(),j=this.extractBits(y),C=this.correctBits(j),M=vt.convertBoolArrayToByteArray(C),R=vt.getEncodedData(C),N=new Ce(M,R,null,null);return N.setNumBits(C.length),N}static highLevelDecode(m){return this.getEncodedData(m)}static getEncodedData(m){let y=m.length,j=ut.UPPER,C=ut.UPPER,M="",R=0;for(;R<y;)if(C===ut.BINARY){if(y-R<5)break;let N=vt.readCode(m,R,5);if(R+=5,N===0){if(y-R<11)break;N=vt.readCode(m,R,11)+31,R+=11}for(let A=0;A<N;A++){if(y-R<8){R=y;break}const L=vt.readCode(m,R,8);M+=ae.castAsNonUtf8Char(L),R+=8}C=j}else{let N=C===ut.DIGIT?4:5;if(y-R<N)break;let A=vt.readCode(m,R,N);R+=N;let L=vt.getCharacter(C,A);L.startsWith("CTRL_")?(j=C,C=vt.getTable(L.charAt(5)),L.charAt(6)==="L"&&(j=C)):(M+=L,C=j)}return M}static getTable(m){switch(m){case"L":return ut.LOWER;case"P":return ut.PUNCT;case"M":return ut.MIXED;case"D":return ut.DIGIT;case"B":return ut.BINARY;default:return ut.UPPER}}static getCharacter(m,y){switch(m){case ut.UPPER:return vt.UPPER_TABLE[y];case ut.LOWER:return vt.LOWER_TABLE[y];case ut.MIXED:return vt.MIXED_TABLE[y];case ut.PUNCT:return vt.PUNCT_TABLE[y];case ut.DIGIT:return vt.DIGIT_TABLE[y];default:throw new Ze("Bad table")}}correctBits(m){let y,j;this.ddata.getNbLayers()<=2?(j=6,y=Ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(j=8,y=Ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(j=10,y=Ee.AZTEC_DATA_10):(j=12,y=Ee.AZTEC_DATA_12);let C=this.ddata.getNbDatablocks(),M=m.length/j;if(M<C)throw new P;let R=m.length%j,N=new Int32Array(M);for(let te=0;te<M;te++,R+=j)N[te]=vt.readCode(m,R,j);try{new Re(y).decode(N,M-C)}catch(te){throw new P(te)}let A=(1<<j)-1,L=0;for(let te=0;te<C;te++){let se=N[te];if(se===0||se===A)throw new P;(se===1||se===A-1)&&L++}let B=new Array(C*j-L),Y=0;for(let te=0;te<C;te++){let se=N[te];if(se===1||se===A-1)B.fill(se>1,Y,Y+j-1),Y+=j-1;else for(let ce=j-1;ce>=0;--ce)B[Y++]=(se&1<<ce)!==0}return B}extractBits(m){let y=this.ddata.isCompact(),j=this.ddata.getNbLayers(),C=(y?11:14)+j*4,M=new Int32Array(C),R=new Array(this.totalBitsInLayer(j,y));if(y)for(let N=0;N<M.length;N++)M[N]=N;else{let N=C+1+2*T.truncDivision(T.truncDivision(C,2)-1,15),A=C/2,L=T.truncDivision(N,2);for(let B=0;B<A;B++){let Y=B+T.truncDivision(B,15);M[A-B-1]=L-Y-1,M[A+B]=L+Y+1}}for(let N=0,A=0;N<j;N++){let L=(j-N)*4+(y?9:12),B=N*2,Y=C-1-B;for(let te=0;te<L;te++){let se=te*2;for(let ce=0;ce<2;ce++)R[A+se+ce]=m.get(M[B+ce],M[B+te]),R[A+2*L+se+ce]=m.get(M[B+te],M[Y-ce]),R[A+4*L+se+ce]=m.get(M[Y-ce],M[Y-te]),R[A+6*L+se+ce]=m.get(M[Y-te],M[B+ce])}A+=L*8}return R}static readCode(m,y,j){let C=0;for(let M=y;M<y+j;M++)C<<=1,m[M]&&(C|=1);return C}static readByte(m,y){let j=m.length-y;return j>=8?vt.readCode(m,y,8):vt.readCode(m,y,j)<<8-j}static convertBoolArrayToByteArray(m){let y=new Uint8Array((m.length+7)/8);for(let j=0;j<y.length;j++)y[j]=vt.readByte(m,8*j);return y}totalBitsInLayer(m,y){return((y?88:112)+16*m)*m}}vt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],vt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],vt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],vt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],vt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class yt{constructor(){}static round(m){return m===NaN?0:m<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:m>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:m+(m<0?-.5:.5)|0}static distance(m,y,j,C){const M=m-j,R=y-C;return Math.sqrt(M*M+R*R)}static sum(m){let y=0;for(let j=0,C=m.length;j!==C;j++){const M=m[j];y+=M}return y}}class Ue{static floatToIntBits(m){return m}}Ue.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ye{constructor(m,y){this.x=m,this.y=y}getX(){return this.x}getY(){return this.y}equals(m){if(m instanceof Ye){const y=m;return this.x===y.x&&this.y===y.y}return!1}hashCode(){return 31*Ue.floatToIntBits(this.x)+Ue.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(m){const y=this.distance(m[0],m[1]),j=this.distance(m[1],m[2]),C=this.distance(m[0],m[2]);let M,R,N;if(j>=y&&j>=C?(R=m[0],M=m[1],N=m[2]):C>=j&&C>=y?(R=m[1],M=m[0],N=m[2]):(R=m[2],M=m[0],N=m[1]),this.crossProductZ(M,R,N)<0){const A=M;M=N,N=A}m[0]=M,m[1]=R,m[2]=N}static distance(m,y){return yt.distance(m.x,m.y,y.x,y.y)}static crossProductZ(m,y,j){const C=y.x,M=y.y;return(j.x-C)*(m.y-M)-(j.y-M)*(m.x-C)}}class Ht{constructor(m,y){this.bits=m,this.points=y}getBits(){return this.bits}getPoints(){return this.points}}class ta extends Ht{constructor(m,y,j,C,M){super(m,y),this.compact=j,this.nbDatablocks=C,this.nbLayers=M}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Bt{constructor(m,y,j,C){this.image=m,this.height=m.getHeight(),this.width=m.getWidth(),y==null&&(y=Bt.INIT_SIZE),j==null&&(j=m.getWidth()/2|0),C==null&&(C=m.getHeight()/2|0);const M=y/2|0;if(this.leftInit=j-M,this.rightInit=j+M,this.upInit=C-M,this.downInit=C+M,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new F}detect(){let m=this.leftInit,y=this.rightInit,j=this.upInit,C=this.downInit,M=!1,R=!0,N=!1,A=!1,L=!1,B=!1,Y=!1;const te=this.width,se=this.height;for(;R;){R=!1;let ce=!0;for(;(ce||!A)&&y<te;)ce=this.containsBlackPoint(j,C,y,!1),ce?(y++,R=!0,A=!0):A||y++;if(y>=te){M=!0;break}let pe=!0;for(;(pe||!L)&&C<se;)pe=this.containsBlackPoint(m,y,C,!0),pe?(C++,R=!0,L=!0):L||C++;if(C>=se){M=!0;break}let ye=!0;for(;(ye||!B)&&m>=0;)ye=this.containsBlackPoint(j,C,m,!1),ye?(m--,R=!0,B=!0):B||m--;if(m<0){M=!0;break}let ge=!0;for(;(ge||!Y)&&j>=0;)ge=this.containsBlackPoint(m,y,j,!0),ge?(j--,R=!0,Y=!0):Y||j--;if(j<0){M=!0;break}R&&(N=!0)}if(!M&&N){const ce=y-m;let pe=null;for(let ke=1;pe===null&&ke<ce;ke++)pe=this.getBlackPointOnSegment(m,C-ke,m+ke,C);if(pe==null)throw new F;let ye=null;for(let ke=1;ye===null&&ke<ce;ke++)ye=this.getBlackPointOnSegment(m,j+ke,m+ke,j);if(ye==null)throw new F;let ge=null;for(let ke=1;ge===null&&ke<ce;ke++)ge=this.getBlackPointOnSegment(y,j+ke,y-ke,j);if(ge==null)throw new F;let _e=null;for(let ke=1;_e===null&&ke<ce;ke++)_e=this.getBlackPointOnSegment(y,C-ke,y-ke,C);if(_e==null)throw new F;return this.centerEdges(_e,pe,ge,ye)}else throw new F}getBlackPointOnSegment(m,y,j,C){const M=yt.round(yt.distance(m,y,j,C)),R=(j-m)/M,N=(C-y)/M,A=this.image;for(let L=0;L<M;L++){const B=yt.round(m+L*R),Y=yt.round(y+L*N);if(A.get(B,Y))return new Ye(B,Y)}return null}centerEdges(m,y,j,C){const M=m.getX(),R=m.getY(),N=y.getX(),A=y.getY(),L=j.getX(),B=j.getY(),Y=C.getX(),te=C.getY(),se=Bt.CORR;return M<this.width/2?[new Ye(Y-se,te+se),new Ye(N+se,A+se),new Ye(L-se,B-se),new Ye(M+se,R-se)]:[new Ye(Y+se,te+se),new Ye(N+se,A-se),new Ye(L-se,B+se),new Ye(M-se,R-se)]}containsBlackPoint(m,y,j,C){const M=this.image;if(C){for(let R=m;R<=y;R++)if(M.get(R,j))return!0}else for(let R=m;R<=y;R++)if(M.get(j,R))return!0;return!1}}Bt.INIT_SIZE=10,Bt.CORR=1;class Da{static checkAndNudgePoints(m,y){const j=m.getWidth(),C=m.getHeight();let M=!0;for(let R=0;R<y.length&&M;R+=2){const N=Math.floor(y[R]),A=Math.floor(y[R+1]);if(N<-1||N>j||A<-1||A>C)throw new F;M=!1,N===-1?(y[R]=0,M=!0):N===j&&(y[R]=j-1,M=!0),A===-1?(y[R+1]=0,M=!0):A===C&&(y[R+1]=C-1,M=!0)}M=!0;for(let R=y.length-2;R>=0&&M;R-=2){const N=Math.floor(y[R]),A=Math.floor(y[R+1]);if(N<-1||N>j||A<-1||A>C)throw new F;M=!1,N===-1?(y[R]=0,M=!0):N===j&&(y[R]=j-1,M=!0),A===-1?(y[R+1]=0,M=!0):A===C&&(y[R+1]=C-1,M=!0)}}}class zt{constructor(m,y,j,C,M,R,N,A,L){this.a11=m,this.a21=y,this.a31=j,this.a12=C,this.a22=M,this.a32=R,this.a13=N,this.a23=A,this.a33=L}static quadrilateralToQuadrilateral(m,y,j,C,M,R,N,A,L,B,Y,te,se,ce,pe,ye){const ge=zt.quadrilateralToSquare(m,y,j,C,M,R,N,A);return zt.squareToQuadrilateral(L,B,Y,te,se,ce,pe,ye).times(ge)}transformPoints(m){const y=m.length,j=this.a11,C=this.a12,M=this.a13,R=this.a21,N=this.a22,A=this.a23,L=this.a31,B=this.a32,Y=this.a33;for(let te=0;te<y;te+=2){const se=m[te],ce=m[te+1],pe=M*se+A*ce+Y;m[te]=(j*se+R*ce+L)/pe,m[te+1]=(C*se+N*ce+B)/pe}}transformPointsWithValues(m,y){const j=this.a11,C=this.a12,M=this.a13,R=this.a21,N=this.a22,A=this.a23,L=this.a31,B=this.a32,Y=this.a33,te=m.length;for(let se=0;se<te;se++){const ce=m[se],pe=y[se],ye=M*ce+A*pe+Y;m[se]=(j*ce+R*pe+L)/ye,y[se]=(C*ce+N*pe+B)/ye}}static squareToQuadrilateral(m,y,j,C,M,R,N,A){const L=m-j+M-N,B=y-C+R-A;if(L===0&&B===0)return new zt(j-m,M-j,m,C-y,R-C,y,0,0,1);{const Y=j-M,te=N-M,se=C-R,ce=A-R,pe=Y*ce-te*se,ye=(L*ce-te*B)/pe,ge=(Y*B-L*se)/pe;return new zt(j-m+ye*j,N-m+ge*N,m,C-y+ye*C,A-y+ge*A,y,ye,ge,1)}}static quadrilateralToSquare(m,y,j,C,M,R,N,A){return zt.squareToQuadrilateral(m,y,j,C,M,R,N,A).buildAdjoint()}buildAdjoint(){return new zt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(m){return new zt(this.a11*m.a11+this.a21*m.a12+this.a31*m.a13,this.a11*m.a21+this.a21*m.a22+this.a31*m.a23,this.a11*m.a31+this.a21*m.a32+this.a31*m.a33,this.a12*m.a11+this.a22*m.a12+this.a32*m.a13,this.a12*m.a21+this.a22*m.a22+this.a32*m.a23,this.a12*m.a31+this.a22*m.a32+this.a32*m.a33,this.a13*m.a11+this.a23*m.a12+this.a33*m.a13,this.a13*m.a21+this.a23*m.a22+this.a33*m.a23,this.a13*m.a31+this.a23*m.a32+this.a33*m.a33)}}class Lr extends Da{sampleGrid(m,y,j,C,M,R,N,A,L,B,Y,te,se,ce,pe,ye,ge,_e,ke){const Ne=zt.quadrilateralToQuadrilateral(C,M,R,N,A,L,B,Y,te,se,ce,pe,ye,ge,_e,ke);return this.sampleGridWithTransform(m,y,j,Ne)}sampleGridWithTransform(m,y,j,C){if(y<=0||j<=0)throw new F;const M=new U(y,j),R=new Float32Array(2*y);for(let N=0;N<j;N++){const A=R.length,L=N+.5;for(let B=0;B<A;B+=2)R[B]=B/2+.5,R[B+1]=L;C.transformPoints(R),Da.checkAndNudgePoints(m,R);try{for(let B=0;B<A;B+=2)m.get(Math.floor(R[B]),Math.floor(R[B+1]))&&M.set(B/2,N)}catch{throw new F}}return M}}class ka{static setGridSampler(m){ka.gridSampler=m}static getInstance(){return ka.gridSampler}}ka.gridSampler=new Lr;class Ca{constructor(m,y){this.x=m,this.y=y}toResultPoint(){return new Ye(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Sn{constructor(m){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=m}detect(){return this.detectMirror(!1)}detectMirror(m){let y=this.getMatrixCenter(),j=this.getBullsEyeCorners(y);if(m){let R=j[0];j[0]=j[2],j[2]=R}this.extractParameters(j);let C=this.sampleGrid(this.image,j[this.shift%4],j[(this.shift+1)%4],j[(this.shift+2)%4],j[(this.shift+3)%4]),M=this.getMatrixCornerPoints(j);return new ta(C,M,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(m){if(!this.isValidPoint(m[0])||!this.isValidPoint(m[1])||!this.isValidPoint(m[2])||!this.isValidPoint(m[3]))throw new F;let y=2*this.nbCenterLayers,j=new Int32Array([this.sampleLine(m[0],m[1],y),this.sampleLine(m[1],m[2],y),this.sampleLine(m[2],m[3],y),this.sampleLine(m[3],m[0],y)]);this.shift=this.getRotation(j,y);let C=0;for(let R=0;R<4;R++){let N=j[(this.shift+R)%4];this.compact?(C<<=7,C+=N>>1&127):(C<<=10,C+=(N>>2&992)+(N>>1&31))}let M=this.getCorrectedParameterData(C,this.compact);this.compact?(this.nbLayers=(M>>6)+1,this.nbDataBlocks=(M&63)+1):(this.nbLayers=(M>>11)+1,this.nbDataBlocks=(M&2047)+1)}getRotation(m,y){let j=0;m.forEach((C,M,R)=>{let N=(C>>y-2<<1)+(C&1);j=(j<<3)+N}),j=((j&1)<<11)+(j>>1);for(let C=0;C<4;C++)if(T.bitCount(j^this.EXPECTED_CORNER_BITS[C])<=2)return C;throw new F}getCorrectedParameterData(m,y){let j,C;y?(j=7,C=2):(j=10,C=4);let M=j-C,R=new Int32Array(j);for(let A=j-1;A>=0;--A)R[A]=m&15,m>>=4;try{new Re(Ee.AZTEC_PARAM).decode(R,M)}catch{throw new F}let N=0;for(let A=0;A<C;A++)N=(N<<4)+R[A];return N}getBullsEyeCorners(m){let y=m,j=m,C=m,M=m,R=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let Y=this.getFirstDifferent(y,R,1,-1),te=this.getFirstDifferent(j,R,1,1),se=this.getFirstDifferent(C,R,-1,1),ce=this.getFirstDifferent(M,R,-1,-1);if(this.nbCenterLayers>2){let pe=this.distancePoint(ce,Y)*this.nbCenterLayers/(this.distancePoint(M,y)*(this.nbCenterLayers+2));if(pe<.75||pe>1.25||!this.isWhiteOrBlackRectangle(Y,te,se,ce))break}y=Y,j=te,C=se,M=ce,R=!R}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new F;this.compact=this.nbCenterLayers===5;let N=new Ye(y.getX()+.5,y.getY()-.5),A=new Ye(j.getX()+.5,j.getY()+.5),L=new Ye(C.getX()-.5,C.getY()+.5),B=new Ye(M.getX()-.5,M.getY()-.5);return this.expandSquare([N,A,L,B],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let m,y,j,C;try{let N=new Bt(this.image).detect();m=N[0],y=N[1],j=N[2],C=N[3]}catch{let A=this.image.getWidth()/2,L=this.image.getHeight()/2;m=this.getFirstDifferent(new Ca(A+7,L-7),!1,1,-1).toResultPoint(),y=this.getFirstDifferent(new Ca(A+7,L+7),!1,1,1).toResultPoint(),j=this.getFirstDifferent(new Ca(A-7,L+7),!1,-1,1).toResultPoint(),C=this.getFirstDifferent(new Ca(A-7,L-7),!1,-1,-1).toResultPoint()}let M=yt.round((m.getX()+C.getX()+y.getX()+j.getX())/4),R=yt.round((m.getY()+C.getY()+y.getY()+j.getY())/4);try{let N=new Bt(this.image,15,M,R).detect();m=N[0],y=N[1],j=N[2],C=N[3]}catch{m=this.getFirstDifferent(new Ca(M+7,R-7),!1,1,-1).toResultPoint(),y=this.getFirstDifferent(new Ca(M+7,R+7),!1,1,1).toResultPoint(),j=this.getFirstDifferent(new Ca(M-7,R+7),!1,-1,1).toResultPoint(),C=this.getFirstDifferent(new Ca(M-7,R-7),!1,-1,-1).toResultPoint()}return M=yt.round((m.getX()+C.getX()+y.getX()+j.getX())/4),R=yt.round((m.getY()+C.getY()+y.getY()+j.getY())/4),new Ca(M,R)}getMatrixCornerPoints(m){return this.expandSquare(m,2*this.nbCenterLayers,this.getDimension())}sampleGrid(m,y,j,C,M){let R=ka.getInstance(),N=this.getDimension(),A=N/2-this.nbCenterLayers,L=N/2+this.nbCenterLayers;return R.sampleGrid(m,N,N,A,A,L,A,L,L,A,L,y.getX(),y.getY(),j.getX(),j.getY(),C.getX(),C.getY(),M.getX(),M.getY())}sampleLine(m,y,j){let C=0,M=this.distanceResultPoint(m,y),R=M/j,N=m.getX(),A=m.getY(),L=R*(y.getX()-m.getX())/M,B=R*(y.getY()-m.getY())/M;for(let Y=0;Y<j;Y++)this.image.get(yt.round(N+Y*L),yt.round(A+Y*B))&&(C|=1<<j-Y-1);return C}isWhiteOrBlackRectangle(m,y,j,C){let M=3;m=new Ca(m.getX()-M,m.getY()+M),y=new Ca(y.getX()-M,y.getY()-M),j=new Ca(j.getX()+M,j.getY()-M),C=new Ca(C.getX()+M,C.getY()+M);let R=this.getColor(C,m);if(R===0)return!1;let N=this.getColor(m,y);return N!==R||(N=this.getColor(y,j),N!==R)?!1:(N=this.getColor(j,C),N===R)}getColor(m,y){let j=this.distancePoint(m,y),C=(y.getX()-m.getX())/j,M=(y.getY()-m.getY())/j,R=0,N=m.getX(),A=m.getY(),L=this.image.get(m.getX(),m.getY()),B=Math.ceil(j);for(let te=0;te<B;te++)N+=C,A+=M,this.image.get(yt.round(N),yt.round(A))!==L&&R++;let Y=R/j;return Y>.1&&Y<.9?0:Y<=.1===L?1:-1}getFirstDifferent(m,y,j,C){let M=m.getX()+j,R=m.getY()+C;for(;this.isValid(M,R)&&this.image.get(M,R)===y;)M+=j,R+=C;for(M-=j,R-=C;this.isValid(M,R)&&this.image.get(M,R)===y;)M+=j;for(M-=j;this.isValid(M,R)&&this.image.get(M,R)===y;)R+=C;return R-=C,new Ca(M,R)}expandSquare(m,y,j){let C=j/(2*y),M=m[0].getX()-m[2].getX(),R=m[0].getY()-m[2].getY(),N=(m[0].getX()+m[2].getX())/2,A=(m[0].getY()+m[2].getY())/2,L=new Ye(N+C*M,A+C*R),B=new Ye(N-C*M,A-C*R);M=m[1].getX()-m[3].getX(),R=m[1].getY()-m[3].getY(),N=(m[1].getX()+m[3].getX())/2,A=(m[1].getY()+m[3].getY())/2;let Y=new Ye(N+C*M,A+C*R),te=new Ye(N-C*M,A-C*R);return[L,Y,B,te]}isValid(m,y){return m>=0&&m<this.image.getWidth()&&y>0&&y<this.image.getHeight()}isValidPoint(m){let y=yt.round(m.getX()),j=yt.round(m.getY());return this.isValid(y,j)}distancePoint(m,y){return yt.distance(m.getX(),m.getY(),y.getX(),y.getY())}distanceResultPoint(m,y){return yt.distance(m.getX(),m.getY(),y.getX(),y.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(T.truncDivision(this.nbLayers-4,8)+1)+15}}class Ie{decode(m,y=null){let j=null,C=new Sn(m.getBlackMatrix()),M=null,R=null;try{let B=C.detectMirror(!1);M=B.getPoints(),this.reportFoundResultPoints(y,M),R=new vt().decode(B)}catch(B){j=B}if(R==null)try{let B=C.detectMirror(!0);M=B.getPoints(),this.reportFoundResultPoints(y,M),R=new vt().decode(B)}catch(B){throw j??B}let N=new fe(R.getText(),R.getRawBytes(),R.getNumBits(),M,ve.AZTEC,b.currentTimeMillis()),A=R.getByteSegments();A!=null&&N.putMetadata(Se.BYTE_SEGMENTS,A);let L=R.getECLevel();return L!=null&&N.putMetadata(Se.ERROR_CORRECTION_LEVEL,L),N}reportFoundResultPoints(m,y){if(m!=null){let j=m.get(O.NEED_RESULT_POINT_CALLBACK);j!=null&&y.forEach((C,M,R)=>{j.foundPossibleResultPoint(C)})}}reset(){}}class st extends de{constructor(m=500){super(new Ie,m)}}class Tt{decode(m,y){try{return this.doDecode(m,y)}catch{if(y&&y.get(O.TRY_HARDER)===!0&&m.isRotateSupported()){const M=m.rotateCounterClockwise(),R=this.doDecode(M,y),N=R.getResultMetadata();let A=270;N!==null&&N.get(Se.ORIENTATION)===!0&&(A=A+N.get(Se.ORIENTATION)%360),R.putMetadata(Se.ORIENTATION,A);const L=R.getResultPoints();if(L!==null){const B=M.getHeight();for(let Y=0;Y<L.length;Y++)L[Y]=new Ye(B-L[Y].getY()-1,L[Y].getX())}return R}else throw new F}}reset(){}doDecode(m,y){const j=m.getWidth(),C=m.getHeight();let M=new D(j);const R=y&&y.get(O.TRY_HARDER)===!0,N=Math.max(1,C>>(R?8:5));let A;R?A=C:A=15;const L=Math.trunc(C/2);for(let B=0;B<A;B++){const Y=Math.trunc((B+1)/2),te=(B&1)===0,se=L+N*(te?Y:-Y);if(se<0||se>=C)break;try{M=m.getBlackRow(se,M)}catch{continue}for(let ce=0;ce<2;ce++){if(ce===1&&(M.reverse(),y&&y.get(O.NEED_RESULT_POINT_CALLBACK)===!0)){const pe=new Map;y.forEach((ye,ge)=>pe.set(ge,ye)),pe.delete(O.NEED_RESULT_POINT_CALLBACK),y=pe}try{const pe=this.decodeRow(se,M,y);if(ce===1){pe.putMetadata(Se.ORIENTATION,180);const ye=pe.getResultPoints();ye!==null&&(ye[0]=new Ye(j-ye[0].getX()-1,ye[0].getY()),ye[1]=new Ye(j-ye[1].getX()-1,ye[1].getY()))}return pe}catch{}}}throw new F}static recordPattern(m,y,j){const C=j.length;for(let L=0;L<C;L++)j[L]=0;const M=m.getSize();if(y>=M)throw new F;let R=!m.get(y),N=0,A=y;for(;A<M;){if(m.get(A)!==R)j[N]++;else{if(++N===C)break;j[N]=1,R=!R}A++}if(!(N===C||N===C-1&&A===M))throw new F}static recordPatternInReverse(m,y,j){let C=j.length,M=m.get(y);for(;y>0&&C>=0;)m.get(--y)!==M&&(C--,M=!M);if(C>=0)throw new F;Tt.recordPattern(m,y+1,j)}static patternMatchVariance(m,y,j){const C=m.length;let M=0,R=0;for(let L=0;L<C;L++)M+=m[L],R+=y[L];if(M<R)return Number.POSITIVE_INFINITY;const N=M/R;j*=N;let A=0;for(let L=0;L<C;L++){const B=m[L],Y=y[L]*N,te=B>Y?B-Y:Y-B;if(te>j)return Number.POSITIVE_INFINITY;A+=te}return A/M}}class lt extends Tt{static findStartPattern(m){const y=m.getSize(),j=m.getNextSet(0);let C=0,M=Int32Array.from([0,0,0,0,0,0]),R=j,N=!1;const A=6;for(let L=j;L<y;L++)if(m.get(L)!==N)M[C]++;else{if(C===A-1){let B=lt.MAX_AVG_VARIANCE,Y=-1;for(let te=lt.CODE_START_A;te<=lt.CODE_START_C;te++){const se=Tt.patternMatchVariance(M,lt.CODE_PATTERNS[te],lt.MAX_INDIVIDUAL_VARIANCE);se<B&&(B=se,Y=te)}if(Y>=0&&m.isRange(Math.max(0,R-(L-R)/2),R,!1))return Int32Array.from([R,L,Y]);R+=M[0]+M[1],M=M.slice(2,M.length-1),M[C-1]=0,M[C]=0,C--}else C++;M[C]=1,N=!N}throw new F}static decodeCode(m,y,j){Tt.recordPattern(m,j,y);let C=lt.MAX_AVG_VARIANCE,M=-1;for(let R=0;R<lt.CODE_PATTERNS.length;R++){const N=lt.CODE_PATTERNS[R],A=this.patternMatchVariance(y,N,lt.MAX_INDIVIDUAL_VARIANCE);A<C&&(C=A,M=R)}if(M>=0)return M;throw new F}decodeRow(m,y,j){const C=j&&j.get(O.ASSUME_GS1)===!0,M=lt.findStartPattern(y),R=M[2];let N=0;const A=new Uint8Array(20);A[N++]=R;let L;switch(R){case lt.CODE_START_A:L=lt.CODE_CODE_A;break;case lt.CODE_START_B:L=lt.CODE_CODE_B;break;case lt.CODE_START_C:L=lt.CODE_CODE_C;break;default:throw new P}let B=!1,Y=!1,te="",se=M[0],ce=M[1];const pe=Int32Array.from([0,0,0,0,0,0]);let ye=0,ge=0,_e=R,ke=0,Ne=!0,Me=!1,Te=!1;for(;!B;){const bt=Y;switch(Y=!1,ye=ge,ge=lt.decodeCode(y,pe,ce),A[N++]=ge,ge!==lt.CODE_STOP&&(Ne=!0),ge!==lt.CODE_STOP&&(ke++,_e+=ke*ge),se=ce,ce+=pe.reduce((Yt,Ft)=>Yt+Ft,0),ge){case lt.CODE_START_A:case lt.CODE_START_B:case lt.CODE_START_C:throw new P}switch(L){case lt.CODE_CODE_A:if(ge<64)Te===Me?te+=String.fromCharCode(32+ge):te+=String.fromCharCode(32+ge+128),Te=!1;else if(ge<96)Te===Me?te+=String.fromCharCode(ge-64):te+=String.fromCharCode(ge+64),Te=!1;else switch(ge!==lt.CODE_STOP&&(Ne=!1),ge){case lt.CODE_FNC_1:C&&(te.length===0?te+="]C1":te+="");break;case lt.CODE_FNC_2:case lt.CODE_FNC_3:break;case lt.CODE_FNC_4_A:!Me&&Te?(Me=!0,Te=!1):Me&&Te?(Me=!1,Te=!1):Te=!0;break;case lt.CODE_SHIFT:Y=!0,L=lt.CODE_CODE_B;break;case lt.CODE_CODE_B:L=lt.CODE_CODE_B;break;case lt.CODE_CODE_C:L=lt.CODE_CODE_C;break;case lt.CODE_STOP:B=!0;break}break;case lt.CODE_CODE_B:if(ge<96)Te===Me?te+=String.fromCharCode(32+ge):te+=String.fromCharCode(32+ge+128),Te=!1;else switch(ge!==lt.CODE_STOP&&(Ne=!1),ge){case lt.CODE_FNC_1:C&&(te.length===0?te+="]C1":te+="");break;case lt.CODE_FNC_2:case lt.CODE_FNC_3:break;case lt.CODE_FNC_4_B:!Me&&Te?(Me=!0,Te=!1):Me&&Te?(Me=!1,Te=!1):Te=!0;break;case lt.CODE_SHIFT:Y=!0,L=lt.CODE_CODE_A;break;case lt.CODE_CODE_A:L=lt.CODE_CODE_A;break;case lt.CODE_CODE_C:L=lt.CODE_CODE_C;break;case lt.CODE_STOP:B=!0;break}break;case lt.CODE_CODE_C:if(ge<100)ge<10&&(te+="0"),te+=ge;else switch(ge!==lt.CODE_STOP&&(Ne=!1),ge){case lt.CODE_FNC_1:C&&(te.length===0?te+="]C1":te+="");break;case lt.CODE_CODE_A:L=lt.CODE_CODE_A;break;case lt.CODE_CODE_B:L=lt.CODE_CODE_B;break;case lt.CODE_STOP:B=!0;break}break}bt&&(L=L===lt.CODE_CODE_A?lt.CODE_CODE_B:lt.CODE_CODE_A)}const Ge=ce-se;if(ce=y.getNextUnset(ce),!y.isRange(ce,Math.min(y.getSize(),ce+(ce-se)/2),!1))throw new F;if(_e-=ke*ye,_e%103!==ye)throw new p;const qe=te.length;if(qe===0)throw new F;qe>0&&Ne&&(L===lt.CODE_CODE_C?te=te.substring(0,qe-2):te=te.substring(0,qe-1));const He=(M[1]+M[0])/2,et=se+Ge/2,ht=A.length,kt=new Uint8Array(ht);for(let bt=0;bt<ht;bt++)kt[bt]=A[bt];const Mt=[new Ye(He,m),new Ye(et,m)];return new fe(te,kt,0,Mt,ve.CODE_128,new Date().getTime())}}lt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],lt.MAX_AVG_VARIANCE=.25,lt.MAX_INDIVIDUAL_VARIANCE=.7,lt.CODE_SHIFT=98,lt.CODE_CODE_C=99,lt.CODE_CODE_B=100,lt.CODE_CODE_A=101,lt.CODE_FNC_1=102,lt.CODE_FNC_2=97,lt.CODE_FNC_3=96,lt.CODE_FNC_4_A=101,lt.CODE_FNC_4_B=100,lt.CODE_START_A=103,lt.CODE_START_B=104,lt.CODE_START_C=105,lt.CODE_STOP=106;class oa extends Tt{constructor(m=!1,y=!1){super(),this.usingCheckDigit=m,this.extendedMode=y,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(m,y,j){let C=this.counters;C.fill(0),this.decodeRowResult="";let M=oa.findAsteriskPattern(y,C),R=y.getNextSet(M[1]),N=y.getSize(),A,L;do{oa.recordPattern(y,R,C);let pe=oa.toNarrowWidePattern(C);if(pe<0)throw new F;A=oa.patternToChar(pe),this.decodeRowResult+=A,L=R;for(let ye of C)R+=ye;R=y.getNextSet(R)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let B=0;for(let pe of C)B+=pe;let Y=R-L-B;if(R!==N&&Y*2<B)throw new F;if(this.usingCheckDigit){let pe=this.decodeRowResult.length-1,ye=0;for(let ge=0;ge<pe;ge++)ye+=oa.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ge));if(this.decodeRowResult.charAt(pe)!==oa.ALPHABET_STRING.charAt(ye%43))throw new p;this.decodeRowResult=this.decodeRowResult.substring(0,pe)}if(this.decodeRowResult.length===0)throw new F;let te;this.extendedMode?te=oa.decodeExtended(this.decodeRowResult):te=this.decodeRowResult;let se=(M[1]+M[0])/2,ce=L+B/2;return new fe(te,null,0,[new Ye(se,m),new Ye(ce,m)],ve.CODE_39,new Date().getTime())}static findAsteriskPattern(m,y){let j=m.getSize(),C=m.getNextSet(0),M=0,R=C,N=!1,A=y.length;for(let L=C;L<j;L++)if(m.get(L)!==N)y[M]++;else{if(M===A-1){if(this.toNarrowWidePattern(y)===oa.ASTERISK_ENCODING&&m.isRange(Math.max(0,R-Math.floor((L-R)/2)),R,!1))return[R,L];R+=y[0]+y[1],y.copyWithin(0,2,2+M-1),y[M-1]=0,y[M]=0,M--}else M++;y[M]=1,N=!N}throw new F}static toNarrowWidePattern(m){let y=m.length,j=0,C;do{let M=2147483647;for(let A of m)A<M&&A>j&&(M=A);j=M,C=0;let R=0,N=0;for(let A=0;A<y;A++){let L=m[A];L>j&&(N|=1<<y-1-A,C++,R+=L)}if(C===3){for(let A=0;A<y&&C>0;A++){let L=m[A];if(L>j&&(C--,L*2>=R))return-1}return N}}while(C>3);return-1}static patternToChar(m){for(let y=0;y<oa.CHARACTER_ENCODINGS.length;y++)if(oa.CHARACTER_ENCODINGS[y]===m)return oa.ALPHABET_STRING.charAt(y);if(m===oa.ASTERISK_ENCODING)return"*";throw new F}static decodeExtended(m){let y=m.length,j="";for(let C=0;C<y;C++){let M=m.charAt(C);if(M==="+"||M==="$"||M==="%"||M==="/"){let R=m.charAt(C+1),N="\0";switch(M){case"+":if(R>="A"&&R<="Z")N=String.fromCharCode(R.charCodeAt(0)+32);else throw new P;break;case"$":if(R>="A"&&R<="Z")N=String.fromCharCode(R.charCodeAt(0)-64);else throw new P;break;case"%":if(R>="A"&&R<="E")N=String.fromCharCode(R.charCodeAt(0)-38);else if(R>="F"&&R<="J")N=String.fromCharCode(R.charCodeAt(0)-11);else if(R>="K"&&R<="O")N=String.fromCharCode(R.charCodeAt(0)+16);else if(R>="P"&&R<="T")N=String.fromCharCode(R.charCodeAt(0)+43);else if(R==="U")N="\0";else if(R==="V")N="@";else if(R==="W")N="`";else if(R==="X"||R==="Y"||R==="Z")N="";else throw new P;break;case"/":if(R>="A"&&R<="O")N=String.fromCharCode(R.charCodeAt(0)-32);else if(R==="Z")N=":";else throw new P;break}j+=N,C++}else j+=M}return j}}oa.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",oa.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],oa.ASTERISK_ENCODING=148;class xt extends Tt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(m,y,j){let C=this.decodeStart(y),M=this.decodeEnd(y),R=new J;xt.decodeMiddle(y,C[1],M[0],R);let N=R.toString(),A=null;j!=null&&(A=j.get(O.ALLOWED_LENGTHS)),A==null&&(A=xt.DEFAULT_ALLOWED_LENGTHS);let L=N.length,B=!1,Y=0;for(let ce of A){if(L===ce){B=!0;break}ce>Y&&(Y=ce)}if(!B&&L>Y&&(B=!0),!B)throw new P;const te=[new Ye(C[1],m),new Ye(M[0],m)];return new fe(N,null,0,te,ve.ITF,new Date().getTime())}static decodeMiddle(m,y,j,C){let M=new Int32Array(10),R=new Int32Array(5),N=new Int32Array(5);for(M.fill(0),R.fill(0),N.fill(0);y<j;){Tt.recordPattern(m,y,M);for(let L=0;L<5;L++){let B=2*L;R[L]=M[B],N[L]=M[B+1]}let A=xt.decodeDigit(R);C.append(A.toString()),A=this.decodeDigit(N),C.append(A.toString()),M.forEach(function(L){y+=L})}}decodeStart(m){let y=xt.skipWhiteSpace(m),j=xt.findGuardPattern(m,y,xt.START_PATTERN);return this.narrowLineWidth=(j[1]-j[0])/4,this.validateQuietZone(m,j[0]),j}validateQuietZone(m,y){let j=this.narrowLineWidth*10;j=j<y?j:y;for(let C=y-1;j>0&&C>=0&&!m.get(C);C--)j--;if(j!==0)throw new F}static skipWhiteSpace(m){const y=m.getSize(),j=m.getNextSet(0);if(j===y)throw new F;return j}decodeEnd(m){m.reverse();try{let y=xt.skipWhiteSpace(m),j;try{j=xt.findGuardPattern(m,y,xt.END_PATTERN_REVERSED[0])}catch(M){M instanceof F&&(j=xt.findGuardPattern(m,y,xt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(m,j[0]);let C=j[0];return j[0]=m.getSize()-j[1],j[1]=m.getSize()-C,j}finally{m.reverse()}}static findGuardPattern(m,y,j){let C=j.length,M=new Int32Array(C),R=m.getSize(),N=!1,A=0,L=y;M.fill(0);for(let B=y;B<R;B++)if(m.get(B)!==N)M[A]++;else{if(A===C-1){if(Tt.patternMatchVariance(M,j,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return[L,B];L+=M[0]+M[1],b.arraycopy(M,2,M,0,A-1),M[A-1]=0,M[A]=0,A--}else A++;M[A]=1,N=!N}throw new F}static decodeDigit(m){let y=xt.MAX_AVG_VARIANCE,j=-1,C=xt.PATTERNS.length;for(let M=0;M<C;M++){let R=xt.PATTERNS[M],N=Tt.patternMatchVariance(m,R,xt.MAX_INDIVIDUAL_VARIANCE);N<y?(y=N,j=M):N===y&&(j=-1)}if(j>=0)return j%10;throw new F}}xt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],xt.MAX_AVG_VARIANCE=.38,xt.MAX_INDIVIDUAL_VARIANCE=.5,xt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],xt.START_PATTERN=Int32Array.from([1,1,1,1]),xt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class la extends Tt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(m){let y=!1,j,C=0,M=Int32Array.from([0,0,0]);for(;!y;){M=Int32Array.from([0,0,0]),j=la.findGuardPattern(m,C,!1,this.START_END_PATTERN,M);let R=j[0];C=j[1];let N=R-(C-R);N>=0&&(y=m.isRange(N,R,!1))}return j}static checkChecksum(m){return la.checkStandardUPCEANChecksum(m)}static checkStandardUPCEANChecksum(m){let y=m.length;if(y===0)return!1;let j=parseInt(m.charAt(y-1),10);return la.getStandardUPCEANChecksum(m.substring(0,y-1))===j}static getStandardUPCEANChecksum(m){let y=m.length,j=0;for(let C=y-1;C>=0;C-=2){let M=m.charAt(C).charCodeAt(0)-48;if(M<0||M>9)throw new P;j+=M}j*=3;for(let C=y-2;C>=0;C-=2){let M=m.charAt(C).charCodeAt(0)-48;if(M<0||M>9)throw new P;j+=M}return(1e3-j)%10}static decodeEnd(m,y){return la.findGuardPattern(m,y,!1,la.START_END_PATTERN,new Int32Array(la.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(m,y,j,C){return this.findGuardPattern(m,y,j,C,new Int32Array(C.length))}static findGuardPattern(m,y,j,C,M){let R=m.getSize();y=j?m.getNextUnset(y):m.getNextSet(y);let N=0,A=y,L=C.length,B=j;for(let Y=y;Y<R;Y++)if(m.get(Y)!==B)M[N]++;else{if(N===L-1){if(Tt.patternMatchVariance(M,C,la.MAX_INDIVIDUAL_VARIANCE)<la.MAX_AVG_VARIANCE)return Int32Array.from([A,Y]);A+=M[0]+M[1];let te=M.slice(2,M.length-1);for(let se=0;se<N-1;se++)M[se]=te[se];M[N-1]=0,M[N]=0,N--}else N++;M[N]=1,B=!B}throw new F}static decodeDigit(m,y,j,C){this.recordPattern(m,j,y);let M=this.MAX_AVG_VARIANCE,R=-1,N=C.length;for(let A=0;A<N;A++){let L=C[A],B=Tt.patternMatchVariance(y,L,la.MAX_INDIVIDUAL_VARIANCE);B<M&&(M=B,R=A)}if(R>=0)return R;throw new F}}la.MAX_AVG_VARIANCE=.48,la.MAX_INDIVIDUAL_VARIANCE=.7,la.START_END_PATTERN=Int32Array.from([1,1,1]),la.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),la.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),la.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Vr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(m,y,j){let C=this.decodeRowStringBuffer,M=this.decodeMiddle(y,j,C),R=C.toString(),N=Vr.parseExtensionString(R),A=[new Ye((j[0]+j[1])/2,m),new Ye(M,m)],L=new fe(R,null,0,A,ve.UPC_EAN_EXTENSION,new Date().getTime());return N!=null&&L.putAllMetadata(N),L}decodeMiddle(m,y,j){let C=this.decodeMiddleCounters;C[0]=0,C[1]=0,C[2]=0,C[3]=0;let M=m.getSize(),R=y[1],N=0;for(let L=0;L<5&&R<M;L++){let B=la.decodeDigit(m,C,R,la.L_AND_G_PATTERNS);j+=String.fromCharCode(48+B%10);for(let Y of C)R+=Y;B>=10&&(N|=1<<4-L),L!==4&&(R=m.getNextSet(R),R=m.getNextUnset(R))}if(j.length!==5)throw new F;let A=this.determineCheckDigit(N);if(Vr.extensionChecksum(j.toString())!==A)throw new F;return R}static extensionChecksum(m){let y=m.length,j=0;for(let C=y-2;C>=0;C-=2)j+=m.charAt(C).charCodeAt(0)-48;j*=3;for(let C=y-1;C>=0;C-=2)j+=m.charAt(C).charCodeAt(0)-48;return j*=3,j%10}determineCheckDigit(m){for(let y=0;y<10;y++)if(m===this.CHECK_DIGIT_ENCODINGS[y])return y;throw new F}static parseExtensionString(m){if(m.length!==5)return null;let y=Vr.parseExtension5String(m);return y==null?null:new Map([[Se.SUGGESTED_PRICE,y]])}static parseExtension5String(m){let y;switch(m.charAt(0)){case"0":y="";break;case"5":y="$";break;case"9":switch(m){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}y="";break;default:y="";break}let j=parseInt(m.substring(1)),C=(j/100).toString(),M=j%100,R=M<10?"0"+M:M.toString();return y+C+"."+R}}class hs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(m,y,j){let C=this.decodeRowStringBuffer,M=this.decodeMiddle(y,j,C),R=C.toString(),N=hs.parseExtensionString(R),A=[new Ye((j[0]+j[1])/2,m),new Ye(M,m)],L=new fe(R,null,0,A,ve.UPC_EAN_EXTENSION,new Date().getTime());return N!=null&&L.putAllMetadata(N),L}decodeMiddle(m,y,j){let C=this.decodeMiddleCounters;C[0]=0,C[1]=0,C[2]=0,C[3]=0;let M=m.getSize(),R=y[1],N=0;for(let A=0;A<2&&R<M;A++){let L=la.decodeDigit(m,C,R,la.L_AND_G_PATTERNS);j+=String.fromCharCode(48+L%10);for(let B of C)R+=B;L>=10&&(N|=1<<1-A),A!==1&&(R=m.getNextSet(R),R=m.getNextUnset(R))}if(j.length!==2)throw new F;if(parseInt(j.toString())%4!==N)throw new F;return R}static parseExtensionString(m){return m.length!==2?null:new Map([[Se.ISSUE_NUMBER,parseInt(m)]])}}class It{static decodeRow(m,y,j){let C=la.findGuardPattern(y,j,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Vr().decodeRow(m,y,C)}catch{return new hs().decodeRow(m,y,C)}}}It.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ya extends la{constructor(){super(),this.decodeRowStringBuffer="",Ya.L_AND_G_PATTERNS=Ya.L_PATTERNS.map(m=>Int32Array.from(m));for(let m=10;m<20;m++){let y=Ya.L_PATTERNS[m-10],j=new Int32Array(y.length);for(let C=0;C<y.length;C++)j[C]=y[y.length-C-1];Ya.L_AND_G_PATTERNS[m]=j}}decodeRow(m,y,j){let C=Ya.findStartGuardPattern(y),M=j==null?null:j.get(O.NEED_RESULT_POINT_CALLBACK);if(M!=null){const Ne=new Ye((C[0]+C[1])/2,m);M.foundPossibleResultPoint(Ne)}let R=this.decodeMiddle(y,C,this.decodeRowStringBuffer),N=R.rowOffset,A=R.resultString;if(M!=null){const Ne=new Ye(N,m);M.foundPossibleResultPoint(Ne)}let L=this.decodeEnd(y,N);if(M!=null){const Ne=new Ye((L[0]+L[1])/2,m);M.foundPossibleResultPoint(Ne)}let B=L[1],Y=B+(B-L[0]);if(Y>=y.getSize()||!y.isRange(B,Y,!1))throw new F;let te=A.toString();if(te.length<8)throw new P;if(!Ya.checkChecksum(te))throw new p;let se=(C[1]+C[0])/2,ce=(L[1]+L[0])/2,pe=this.getBarcodeFormat(),ye=[new Ye(se,m),new Ye(ce,m)],ge=new fe(te,null,0,ye,pe,new Date().getTime()),_e=0;try{let Ne=It.decodeRow(m,y,L[1]);ge.putMetadata(Se.UPC_EAN_EXTENSION,Ne.getText()),ge.putAllMetadata(Ne.getResultMetadata()),ge.addResultPoints(Ne.getResultPoints()),_e=Ne.getText().length}catch{}let ke=j==null?null:j.get(O.ALLOWED_EAN_EXTENSIONS);if(ke!=null){let Ne=!1;for(let Me in ke)if(_e.toString()===Me){Ne=!0;break}if(!Ne)throw new F}return ge}decodeEnd(m,y){return Ya.findGuardPattern(m,y,!1,Ya.START_END_PATTERN,new Int32Array(Ya.START_END_PATTERN.length).fill(0))}static checkChecksum(m){return Ya.checkStandardUPCEANChecksum(m)}static checkStandardUPCEANChecksum(m){let y=m.length;if(y===0)return!1;let j=parseInt(m.charAt(y-1),10);return Ya.getStandardUPCEANChecksum(m.substring(0,y-1))===j}static getStandardUPCEANChecksum(m){let y=m.length,j=0;for(let C=y-1;C>=0;C-=2){let M=m.charAt(C).charCodeAt(0)-48;if(M<0||M>9)throw new P;j+=M}j*=3;for(let C=y-2;C>=0;C-=2){let M=m.charAt(C).charCodeAt(0)-48;if(M<0||M>9)throw new P;j+=M}return(1e3-j)%10}}class xi extends Ya{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(m,y,j){let C=this.decodeMiddleCounters;C[0]=0,C[1]=0,C[2]=0,C[3]=0;let M=m.getSize(),R=y[1],N=0;for(let L=0;L<6&&R<M;L++){let B=Ya.decodeDigit(m,C,R,Ya.L_AND_G_PATTERNS);j+=String.fromCharCode(48+B%10);for(let Y of C)R+=Y;B>=10&&(N|=1<<5-L)}j=xi.determineFirstDigit(j,N),R=Ya.findGuardPattern(m,R,!0,Ya.MIDDLE_PATTERN,new Int32Array(Ya.MIDDLE_PATTERN.length).fill(0))[1];for(let L=0;L<6&&R<M;L++){let B=Ya.decodeDigit(m,C,R,Ya.L_PATTERNS);j+=String.fromCharCode(48+B);for(let Y of C)R+=Y}return{rowOffset:R,resultString:j}}getBarcodeFormat(){return ve.EAN_13}static determineFirstDigit(m,y){for(let j=0;j<10;j++)if(y===this.FIRST_DIGIT_ENCODINGS[j])return m=String.fromCharCode(48+j)+m,m;throw new F}}xi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Yi extends Ya{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(m,y,j){const C=this.decodeMiddleCounters;C[0]=0,C[1]=0,C[2]=0,C[3]=0;let M=m.getSize(),R=y[1];for(let A=0;A<4&&R<M;A++){let L=Ya.decodeDigit(m,C,R,Ya.L_PATTERNS);j+=String.fromCharCode(48+L);for(let B of C)R+=B}R=Ya.findGuardPattern(m,R,!0,Ya.MIDDLE_PATTERN,new Int32Array(Ya.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<4&&R<M;A++){let L=Ya.decodeDigit(m,C,R,Ya.L_PATTERNS);j+=String.fromCharCode(48+L);for(let B of C)R+=B}return{rowOffset:R,resultString:j}}getBarcodeFormat(){return ve.EAN_8}}class Ks extends Ya{constructor(){super(...arguments),this.ean13Reader=new xi}getBarcodeFormat(){return ve.UPC_A}decode(m,y){return this.maybeReturnResult(this.ean13Reader.decode(m))}decodeRow(m,y,j){return this.maybeReturnResult(this.ean13Reader.decodeRow(m,y,j))}decodeMiddle(m,y,j){return this.ean13Reader.decodeMiddle(m,y,j)}maybeReturnResult(m){let y=m.getText();if(y.charAt(0)==="0"){let j=new fe(y.substring(1),null,null,m.getResultPoints(),ve.UPC_A);return m.getResultMetadata()!=null&&j.putAllMetadata(m.getResultMetadata()),j}else throw new F}reset(){this.ean13Reader.reset()}}class _n extends Ya{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(m,y,j){const C=this.decodeMiddleCounters.map(L=>L);C[0]=0,C[1]=0,C[2]=0,C[3]=0;const M=m.getSize();let R=y[1],N=0;for(let L=0;L<6&&R<M;L++){const B=_n.decodeDigit(m,C,R,_n.L_AND_G_PATTERNS);j+=String.fromCharCode(48+B%10);for(let Y of C)R+=Y;B>=10&&(N|=1<<5-L)}let A=_n.determineNumSysAndCheckDigit(j,N);return{rowOffset:R,resultString:A}}decodeEnd(m,y){return _n.findGuardPatternWithoutCounters(m,y,!0,_n.MIDDLE_END_PATTERN)}checkChecksum(m){return Ya.checkChecksum(_n.convertUPCEtoUPCA(m))}static determineNumSysAndCheckDigit(m,y){for(let j=0;j<=1;j++)for(let C=0;C<10;C++)if(y===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[j][C]){let M=String.fromCharCode(48+j),R=String.fromCharCode(48+C);return M+m+R}throw F.getNotFoundInstance()}getBarcodeFormat(){return ve.UPC_E}static convertUPCEtoUPCA(m){const y=m.slice(1,7).split("").map(M=>M.charCodeAt(0)),j=new J;j.append(m.charAt(0));let C=y[5];switch(C){case 0:case 1:case 2:j.appendChars(y,0,2),j.append(C),j.append("0000"),j.appendChars(y,2,3);break;case 3:j.appendChars(y,0,3),j.append("00000"),j.appendChars(y,3,2);break;case 4:j.appendChars(y,0,4),j.append("00000"),j.append(y[4]);break;default:j.appendChars(y,0,5),j.append("0000"),j.append(C);break}return m.length>=8&&j.append(m.charAt(7)),j.toString()}}_n.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_n.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ol extends Tt{constructor(m){super();let y=m==null?null:m.get(O.POSSIBLE_FORMATS),j=[];r(y)?(j.push(new xi),j.push(new Ks),j.push(new Yi),j.push(new _n)):(y.indexOf(ve.EAN_13)>-1&&j.push(new xi),y.indexOf(ve.UPC_A)>-1&&j.push(new Ks),y.indexOf(ve.EAN_8)>-1&&j.push(new Yi),y.indexOf(ve.UPC_E)>-1&&j.push(new _n)),this.readers=j}decodeRow(m,y,j){for(let C of this.readers)try{const M=C.decodeRow(m,y,j),R=M.getBarcodeFormat()===ve.EAN_13&&M.getText().charAt(0)==="0",N=j==null?null:j.get(O.POSSIBLE_FORMATS),A=N==null||N.includes(ve.UPC_A);if(R&&A){const L=M.getRawBytes(),B=new fe(M.getText().substring(1),L,L?L.length:null,M.getResultPoints(),ve.UPC_A);return B.putAllMetadata(M.getResultMetadata()),B}return M}catch{}throw new F}reset(){for(let m of this.readers)m.reset()}}class cn extends Tt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(m,y){for(let j=0;j<y.length;j++)if(Tt.patternMatchVariance(m,y[j],cn.MAX_INDIVIDUAL_VARIANCE)<cn.MAX_AVG_VARIANCE)return j;throw new F}static count(m){return yt.sum(new Int32Array(m))}static increment(m,y){let j=0,C=y[0];for(let M=1;M<m.length;M++)y[M]>C&&(C=y[M],j=M);m[j]++}static decrement(m,y){let j=0,C=y[0];for(let M=1;M<m.length;M++)y[M]<C&&(C=y[M],j=M);m[j]--}static isFinderPattern(m){let y=m[0]+m[1],j=y+m[2]+m[3],C=y/j;if(C>=cn.MIN_FINDER_PATTERN_RATIO&&C<=cn.MAX_FINDER_PATTERN_RATIO){let M=Number.MAX_SAFE_INTEGER,R=Number.MIN_SAFE_INTEGER;for(let N of m)N>R&&(R=N),N<M&&(M=N);return R<10*M}return!1}}cn.MAX_AVG_VARIANCE=.2,cn.MAX_INDIVIDUAL_VARIANCE=.45,cn.MIN_FINDER_PATTERN_RATIO=9.5/12,cn.MAX_FINDER_PATTERN_RATIO=12.5/14;class kn{constructor(m,y){this.value=m,this.checksumPortion=y}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(m){if(!(m instanceof kn))return!1;const y=m;return this.value===y.value&&this.checksumPortion===y.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ai{constructor(m,y,j,C,M){this.value=m,this.startEnd=y,this.value=m,this.startEnd=y,this.resultPoints=new Array,this.resultPoints.push(new Ye(j,M)),this.resultPoints.push(new Ye(C,M))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(m){if(!(m instanceof ai))return!1;const y=m;return this.value===y.value}hashCode(){return this.value}}class Si{constructor(){}static getRSSvalue(m,y,j){let C=0;for(let A of m)C+=A;let M=0,R=0,N=m.length;for(let A=0;A<N-1;A++){let L;for(L=1,R|=1<<A;L<m[A];L++,R&=~(1<<A)){let B=Si.combins(C-L-1,N-A-2);if(j&&R===0&&C-L-(N-A-1)>=N-A-1&&(B-=Si.combins(C-L-(N-A),N-A-2)),N-A-1>1){let Y=0;for(let te=C-L-(N-A-2);te>y;te--)Y+=Si.combins(C-L-te-1,N-A-3);B-=Y*(N-1-A)}else C-L>y&&B--;M+=B}C-=L}return M}static combins(m,y){let j,C;m-y>y?(C=y,j=m-y):(C=m-y,j=y);let M=1,R=1;for(let N=m;N>j;N--)M*=N,R<=C&&(M/=R,R++);for(;R<=C;)M/=R,R++;return M}}class sl{static buildBitArray(m){let y=m.length*2-1;m[m.length-1].getRightChar()==null&&(y-=1);let j=12*y,C=new D(j),M=0,N=m[0].getRightChar().getValue();for(let A=11;A>=0;--A)(N&1<<A)!=0&&C.set(M),M++;for(let A=1;A<m.length;++A){let L=m[A],B=L.getLeftChar().getValue();for(let Y=11;Y>=0;--Y)(B&1<<Y)!=0&&C.set(M),M++;if(L.getRightChar()!=null){let Y=L.getRightChar().getValue();for(let te=11;te>=0;--te)(Y&1<<te)!=0&&C.set(M),M++}}return C}}class Ae{constructor(m,y){y?this.decodedInformation=null:(this.finished=m,this.decodedInformation=y)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Be{constructor(m){this.newPosition=m}getNewPosition(){return this.newPosition}}class Xe extends Be{constructor(m,y){super(m),this.value=y}getValue(){return this.value}isFNC1(){return this.value===Xe.FNC1}}Xe.FNC1="$";class gt extends Be{constructor(m,y,j){super(m),j?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=y}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class wt extends Be{constructor(m,y,j){if(super(m),y<0||y>10||j<0||j>10)throw new P;this.firstDigit=y,this.secondDigit=j}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===wt.FNC1}isSecondDigitFNC1(){return this.secondDigit===wt.FNC1}isAnyFNC1(){return this.firstDigit===wt.FNC1||this.secondDigit===wt.FNC1}}wt.FNC1=10;class ot{constructor(){}static parseFieldsInGeneralPurpose(m){if(!m)return null;if(m.length<2)throw new F;let y=m.substring(0,2);for(let M of ot.TWO_DIGIT_DATA_LENGTH)if(M[0]===y)return M[1]===ot.VARIABLE_LENGTH?ot.processVariableAI(2,M[2],m):ot.processFixedAI(2,M[1],m);if(m.length<3)throw new F;let j=m.substring(0,3);for(let M of ot.THREE_DIGIT_DATA_LENGTH)if(M[0]===j)return M[1]===ot.VARIABLE_LENGTH?ot.processVariableAI(3,M[2],m):ot.processFixedAI(3,M[1],m);for(let M of ot.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(M[0]===j)return M[1]===ot.VARIABLE_LENGTH?ot.processVariableAI(4,M[2],m):ot.processFixedAI(4,M[1],m);if(m.length<4)throw new F;let C=m.substring(0,4);for(let M of ot.FOUR_DIGIT_DATA_LENGTH)if(M[0]===C)return M[1]===ot.VARIABLE_LENGTH?ot.processVariableAI(4,M[2],m):ot.processFixedAI(4,M[1],m);throw new F}static processFixedAI(m,y,j){if(j.length<m)throw new F;let C=j.substring(0,m);if(j.length<m+y)throw new F;let M=j.substring(m,m+y),R=j.substring(m+y),N="("+C+")"+M,A=ot.parseFieldsInGeneralPurpose(R);return A==null?N:N+A}static processVariableAI(m,y,j){let C=j.substring(0,m),M;j.length<m+y?M=j.length:M=m+y;let R=j.substring(m,M),N=j.substring(M),A="("+C+")"+R,L=ot.parseFieldsInGeneralPurpose(N);return L==null?A:A+L}}ot.VARIABLE_LENGTH=[],ot.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ot.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ot.VARIABLE_LENGTH,20],["22",ot.VARIABLE_LENGTH,29],["30",ot.VARIABLE_LENGTH,8],["37",ot.VARIABLE_LENGTH,8],["90",ot.VARIABLE_LENGTH,30],["91",ot.VARIABLE_LENGTH,30],["92",ot.VARIABLE_LENGTH,30],["93",ot.VARIABLE_LENGTH,30],["94",ot.VARIABLE_LENGTH,30],["95",ot.VARIABLE_LENGTH,30],["96",ot.VARIABLE_LENGTH,30],["97",ot.VARIABLE_LENGTH,3],["98",ot.VARIABLE_LENGTH,30],["99",ot.VARIABLE_LENGTH,30]],ot.THREE_DIGIT_DATA_LENGTH=[["240",ot.VARIABLE_LENGTH,30],["241",ot.VARIABLE_LENGTH,30],["242",ot.VARIABLE_LENGTH,6],["250",ot.VARIABLE_LENGTH,30],["251",ot.VARIABLE_LENGTH,30],["253",ot.VARIABLE_LENGTH,17],["254",ot.VARIABLE_LENGTH,20],["400",ot.VARIABLE_LENGTH,30],["401",ot.VARIABLE_LENGTH,30],["402",17],["403",ot.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ot.VARIABLE_LENGTH,20],["421",ot.VARIABLE_LENGTH,15],["422",3],["423",ot.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ot.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ot.VARIABLE_LENGTH,15],["391",ot.VARIABLE_LENGTH,18],["392",ot.VARIABLE_LENGTH,15],["393",ot.VARIABLE_LENGTH,18],["703",ot.VARIABLE_LENGTH,30]],ot.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ot.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ot.VARIABLE_LENGTH,20],["8003",ot.VARIABLE_LENGTH,30],["8004",ot.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ot.VARIABLE_LENGTH,30],["8008",ot.VARIABLE_LENGTH,12],["8018",18],["8020",ot.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ot.VARIABLE_LENGTH,70],["8200",ot.VARIABLE_LENGTH,70]];class Lt{constructor(m){this.buffer=new J,this.information=m}decodeAllCodes(m,y){let j=y,C=null;do{let M=this.decodeGeneralPurposeField(j,C),R=ot.parseFieldsInGeneralPurpose(M.getNewString());if(R!=null&&m.append(R),M.isRemaining()?C=""+M.getRemainingValue():C=null,j===M.getNewPosition())break;j=M.getNewPosition()}while(!0);return m.toString()}isStillNumeric(m){if(m+7>this.information.getSize())return m+4<=this.information.getSize();for(let y=m;y<m+3;++y)if(this.information.get(y))return!0;return this.information.get(m+3)}decodeNumeric(m){if(m+7>this.information.getSize()){let M=this.extractNumericValueFromBitArray(m,4);return M===0?new wt(this.information.getSize(),wt.FNC1,wt.FNC1):new wt(this.information.getSize(),M-1,wt.FNC1)}let y=this.extractNumericValueFromBitArray(m,7),j=(y-8)/11,C=(y-8)%11;return new wt(m+7,j,C)}extractNumericValueFromBitArray(m,y){return Lt.extractNumericValueFromBitArray(this.information,m,y)}static extractNumericValueFromBitArray(m,y,j){let C=0;for(let M=0;M<j;++M)m.get(y+M)&&(C|=1<<j-M-1);return C}decodeGeneralPurposeField(m,y){this.buffer.setLengthToZero(),y!=null&&this.buffer.append(y),this.current.setPosition(m);let j=this.parseBlocks();return j!=null&&j.isRemaining()?new gt(this.current.getPosition(),this.buffer.toString(),j.getRemainingValue()):new gt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let m,y;do{let j=this.current.getPosition();if(this.current.isAlpha()?(y=this.parseAlphaBlock(),m=y.isFinished()):this.current.isIsoIec646()?(y=this.parseIsoIec646Block(),m=y.isFinished()):(y=this.parseNumericBlock(),m=y.isFinished()),!(j!==this.current.getPosition())&&!m)break}while(!m);return y.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let m=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(m.getNewPosition()),m.isFirstDigitFNC1()){let y;return m.isSecondDigitFNC1()?y=new gt(this.current.getPosition(),this.buffer.toString()):y=new gt(this.current.getPosition(),this.buffer.toString(),m.getSecondDigit()),new Ae(!0,y)}if(this.buffer.append(m.getFirstDigit()),m.isSecondDigitFNC1()){let y=new gt(this.current.getPosition(),this.buffer.toString());return new Ae(!0,y)}this.buffer.append(m.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ae(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let m=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(m.getNewPosition()),m.isFNC1()){let y=new gt(this.current.getPosition(),this.buffer.toString());return new Ae(!0,y)}this.buffer.append(m.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ae(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let m=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(m.getNewPosition()),m.isFNC1()){let y=new gt(this.current.getPosition(),this.buffer.toString());return new Ae(!0,y)}this.buffer.append(m.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ae(!1)}isStillIsoIec646(m){if(m+5>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(m,5);if(y>=5&&y<16)return!0;if(m+7>this.information.getSize())return!1;let j=this.extractNumericValueFromBitArray(m,7);if(j>=64&&j<116)return!0;if(m+8>this.information.getSize())return!1;let C=this.extractNumericValueFromBitArray(m,8);return C>=232&&C<253}decodeIsoIec646(m){let y=this.extractNumericValueFromBitArray(m,5);if(y===15)return new Xe(m+5,Xe.FNC1);if(y>=5&&y<15)return new Xe(m+5,"0"+(y-5));let j=this.extractNumericValueFromBitArray(m,7);if(j>=64&&j<90)return new Xe(m+7,""+(j+1));if(j>=90&&j<116)return new Xe(m+7,""+(j+7));let C=this.extractNumericValueFromBitArray(m,8),M;switch(C){case 232:M="!";break;case 233:M='"';break;case 234:M="%";break;case 235:M="&";break;case 236:M="'";break;case 237:M="(";break;case 238:M=")";break;case 239:M="*";break;case 240:M="+";break;case 241:M=",";break;case 242:M="-";break;case 243:M=".";break;case 244:M="/";break;case 245:M=":";break;case 246:M=";";break;case 247:M="<";break;case 248:M="=";break;case 249:M=">";break;case 250:M="?";break;case 251:M="_";break;case 252:M=" ";break;default:throw new P}return new Xe(m+8,M)}isStillAlpha(m){if(m+5>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(m,5);if(y>=5&&y<16)return!0;if(m+6>this.information.getSize())return!1;let j=this.extractNumericValueFromBitArray(m,6);return j>=16&&j<63}decodeAlphanumeric(m){let y=this.extractNumericValueFromBitArray(m,5);if(y===15)return new Xe(m+5,Xe.FNC1);if(y>=5&&y<15)return new Xe(m+5,"0"+(y-5));let j=this.extractNumericValueFromBitArray(m,6);if(j>=32&&j<58)return new Xe(m+6,""+(j+33));let C;switch(j){case 58:C="*";break;case 59:C=",";break;case 60:C="-";break;case 61:C=".";break;case 62:C="/";break;default:throw new Ze("Decoding invalid alphanumeric value: "+j)}return new Xe(m+6,C)}isAlphaTo646ToAlphaLatch(m){if(m+1>this.information.getSize())return!1;for(let y=0;y<5&&y+m<this.information.getSize();++y)if(y===2){if(!this.information.get(m+2))return!1}else if(this.information.get(m+y))return!1;return!0}isAlphaOr646ToNumericLatch(m){if(m+3>this.information.getSize())return!1;for(let y=m;y<m+3;++y)if(this.information.get(y))return!1;return!0}isNumericToAlphaNumericLatch(m){if(m+1>this.information.getSize())return!1;for(let y=0;y<4&&y+m<this.information.getSize();++y)if(this.information.get(m+y))return!1;return!0}}class Et{constructor(m){this.information=m,this.generalDecoder=new Lt(m)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class At extends Et{constructor(m){super(m)}encodeCompressedGtin(m,y){m.append("(01)");let j=m.length();m.append("9"),this.encodeCompressedGtinWithoutAI(m,y,j)}encodeCompressedGtinWithoutAI(m,y,j){for(let C=0;C<4;++C){let M=this.getGeneralDecoder().extractNumericValueFromBitArray(y+10*C,10);M/100===0&&m.append("0"),M/10===0&&m.append("0"),m.append(M)}At.appendCheckDigit(m,j)}static appendCheckDigit(m,y){let j=0;for(let C=0;C<13;C++){let M=m.charAt(C+y).charCodeAt(0)-48;j+=(C&1)===0?3*M:M}j=10-j%10,j===10&&(j=0),m.append(j)}}At.GTIN_SIZE=40;class Vt extends At{constructor(m){super(m)}parseInformation(){let m=new J;m.append("(01)");let y=m.length(),j=this.getGeneralDecoder().extractNumericValueFromBitArray(Vt.HEADER_SIZE,4);return m.append(j),this.encodeCompressedGtinWithoutAI(m,Vt.HEADER_SIZE+4,y),this.getGeneralDecoder().decodeAllCodes(m,Vt.HEADER_SIZE+44)}}Vt.HEADER_SIZE=4;class ca extends Et{constructor(m){super(m)}parseInformation(){let m=new J;return this.getGeneralDecoder().decodeAllCodes(m,ca.HEADER_SIZE)}}ca.HEADER_SIZE=5;class sa extends At{constructor(m){super(m)}encodeCompressedWeight(m,y,j){let C=this.getGeneralDecoder().extractNumericValueFromBitArray(y,j);this.addWeightCode(m,C);let M=this.checkWeight(C),R=1e5;for(let N=0;N<5;++N)M/R===0&&m.append("0"),R/=10;m.append(M)}}class ja extends sa{constructor(m){super(m)}parseInformation(){if(this.getInformation().getSize()!=ja.HEADER_SIZE+sa.GTIN_SIZE+ja.WEIGHT_SIZE)throw new F;let m=new J;return this.encodeCompressedGtin(m,ja.HEADER_SIZE),this.encodeCompressedWeight(m,ja.HEADER_SIZE+sa.GTIN_SIZE,ja.WEIGHT_SIZE),m.toString()}}ja.HEADER_SIZE=5,ja.WEIGHT_SIZE=15;class nr extends ja{constructor(m){super(m)}addWeightCode(m,y){m.append("(3103)")}checkWeight(m){return m}}class Nr extends ja{constructor(m){super(m)}addWeightCode(m,y){y<1e4?m.append("(3202)"):m.append("(3203)")}checkWeight(m){return m<1e4?m:m-1e4}}class pr extends At{constructor(m){super(m)}parseInformation(){if(this.getInformation().getSize()<pr.HEADER_SIZE+At.GTIN_SIZE)throw new F;let m=new J;this.encodeCompressedGtin(m,pr.HEADER_SIZE);let y=this.getGeneralDecoder().extractNumericValueFromBitArray(pr.HEADER_SIZE+At.GTIN_SIZE,pr.LAST_DIGIT_SIZE);m.append("(392"),m.append(y),m.append(")");let j=this.getGeneralDecoder().decodeGeneralPurposeField(pr.HEADER_SIZE+At.GTIN_SIZE+pr.LAST_DIGIT_SIZE,null);return m.append(j.getNewString()),m.toString()}}pr.HEADER_SIZE=8,pr.LAST_DIGIT_SIZE=2;class Za extends At{constructor(m){super(m)}parseInformation(){if(this.getInformation().getSize()<Za.HEADER_SIZE+At.GTIN_SIZE)throw new F;let m=new J;this.encodeCompressedGtin(m,Za.HEADER_SIZE);let y=this.getGeneralDecoder().extractNumericValueFromBitArray(Za.HEADER_SIZE+At.GTIN_SIZE,Za.LAST_DIGIT_SIZE);m.append("(393"),m.append(y),m.append(")");let j=this.getGeneralDecoder().extractNumericValueFromBitArray(Za.HEADER_SIZE+At.GTIN_SIZE+Za.LAST_DIGIT_SIZE,Za.FIRST_THREE_DIGITS_SIZE);j/100==0&&m.append("0"),j/10==0&&m.append("0"),m.append(j);let C=this.getGeneralDecoder().decodeGeneralPurposeField(Za.HEADER_SIZE+At.GTIN_SIZE+Za.LAST_DIGIT_SIZE+Za.FIRST_THREE_DIGITS_SIZE,null);return m.append(C.getNewString()),m.toString()}}Za.HEADER_SIZE=8,Za.LAST_DIGIT_SIZE=2,Za.FIRST_THREE_DIGITS_SIZE=10;class Ot extends sa{constructor(m,y,j){super(m),this.dateCode=j,this.firstAIdigits=y}parseInformation(){if(this.getInformation().getSize()!=Ot.HEADER_SIZE+Ot.GTIN_SIZE+Ot.WEIGHT_SIZE+Ot.DATE_SIZE)throw new F;let m=new J;return this.encodeCompressedGtin(m,Ot.HEADER_SIZE),this.encodeCompressedWeight(m,Ot.HEADER_SIZE+Ot.GTIN_SIZE,Ot.WEIGHT_SIZE),this.encodeCompressedDate(m,Ot.HEADER_SIZE+Ot.GTIN_SIZE+Ot.WEIGHT_SIZE),m.toString()}encodeCompressedDate(m,y){let j=this.getGeneralDecoder().extractNumericValueFromBitArray(y,Ot.DATE_SIZE);if(j==38400)return;m.append("("),m.append(this.dateCode),m.append(")");let C=j%32;j/=32;let M=j%12+1;j/=12;let R=j;R/10==0&&m.append("0"),m.append(R),M/10==0&&m.append("0"),m.append(M),C/10==0&&m.append("0"),m.append(C)}addWeightCode(m,y){m.append("("),m.append(this.firstAIdigits),m.append(y/1e5),m.append(")")}checkWeight(m){return m%1e5}}Ot.HEADER_SIZE=8,Ot.WEIGHT_SIZE=20,Ot.DATE_SIZE=16;function Hr(ue){try{if(ue.get(1))return new Vt(ue);if(!ue.get(2))return new ca(ue);switch(Lt.extractNumericValueFromBitArray(ue,1,4)){case 4:return new nr(ue);case 5:return new Nr(ue)}switch(Lt.extractNumericValueFromBitArray(ue,1,5)){case 12:return new pr(ue);case 13:return new Za(ue)}switch(Lt.extractNumericValueFromBitArray(ue,1,7)){case 56:return new Ot(ue,"310","11");case 57:return new Ot(ue,"320","11");case 58:return new Ot(ue,"310","13");case 59:return new Ot(ue,"320","13");case 60:return new Ot(ue,"310","15");case 61:return new Ot(ue,"320","15");case 62:return new Ot(ue,"310","17");case 63:return new Ot(ue,"320","17")}}catch(m){throw console.log(m),new Ze("unknown decoder: "+ue)}}class jr{constructor(m,y,j,C){this.leftchar=m,this.rightchar=y,this.finderpattern=j,this.maybeLast=C}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(m,y){return m instanceof jr?jr.equalsOrNull(m.leftchar,y.leftchar)&&jr.equalsOrNull(m.rightchar,y.rightchar)&&jr.equalsOrNull(m.finderpattern,y.finderpattern):!1}static equalsOrNull(m,y){return m===null?y===null:jr.equals(m,y)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Er{constructor(m,y,j){this.pairs=m,this.rowNumber=y,this.wasReversed=j}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(m){return this.checkEqualitity(this,m)}toString(){return"{ "+this.pairs+" }"}equals(m,y){return m instanceof Er?this.checkEqualitity(m,y)&&m.wasReversed===y.wasReversed:!1}checkEqualitity(m,y){if(!m||!y)return;let j;return m.forEach((C,M)=>{y.forEach(R=>{C.getLeftChar().getValue()===R.getLeftChar().getValue()&&C.getRightChar().getValue()===R.getRightChar().getValue()&&C.getFinderPatter().getValue()===R.getFinderPatter().getValue()&&(j=!0)})}),j}}class dt extends cn{constructor(m){super(...arguments),this.pairs=new Array(dt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=m===!0}decodeRow(m,y,j){this.pairs.length=0,this.startFromEven=!1;try{return dt.constructResult(this.decodeRow2pairs(m,y))}catch(C){this.verbose&&console.log(C)}return this.pairs.length=0,this.startFromEven=!0,dt.constructResult(this.decodeRow2pairs(m,y))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(m,y){let j=!1;for(;!j;)try{this.pairs.push(this.retrieveNextPair(y,this.pairs,m))}catch(M){if(M instanceof F){if(!this.pairs.length)throw new F;j=!0}}if(this.checkChecksum())return this.pairs;let C;if(this.rows.length?C=!0:C=!1,this.storeRow(m,!1),C){let M=this.checkRowsBoolean(!1);if(M!=null||(M=this.checkRowsBoolean(!0),M!=null))return M}throw new F}checkRowsBoolean(m){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,m&&(this.rows=this.rows.reverse());let y=null;try{y=this.checkRows(new Array,0)}catch(j){this.verbose&&console.log(j)}return m&&(this.rows=this.rows.reverse()),y}checkRows(m,y){for(let j=y;j<this.rows.length;j++){let C=this.rows[j];this.pairs.length=0;for(let R of m)this.pairs.push(R.getPairs());if(this.pairs.push(C.getPairs()),!dt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let M=new Array(m);M.push(C);try{return this.checkRows(M,j+1)}catch(R){this.verbose&&console.log(R)}}throw new F}static isValidSequence(m){for(let y of dt.FINDER_PATTERN_SEQUENCES){if(m.length>y.length)continue;let j=!0;for(let C=0;C<m.length;C++)if(m[C].getFinderPattern().getValue()!=y[C]){j=!1;break}if(j)return!0}return!1}storeRow(m,y){let j=0,C=!1,M=!1;for(;j<this.rows.length;){let R=this.rows[j];if(R.getRowNumber()>m){M=R.isEquivalent(this.pairs);break}C=R.isEquivalent(this.pairs),j++}M||C||dt.isPartialRow(this.pairs,this.rows)||(this.rows.push(j,new Er(this.pairs,m,y)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(m,y){for(let j of y)if(j.getPairs().length!==m.length){for(let C of j.getPairs())for(let M of m)if(jr.equals(C,M))break}}static isPartialRow(m,y){for(let j of y){let C=!0;for(let M of m){let R=!1;for(let N of j.getPairs())if(M.equals(N)){R=!0;break}if(!R){C=!1;break}}if(C)return!0}return!1}getRows(){return this.rows}static constructResult(m){let y=sl.buildBitArray(m),C=Hr(y).parseInformation(),M=m[0].getFinderPattern().getResultPoints(),R=m[m.length-1].getFinderPattern().getResultPoints(),N=[M[0],M[1],R[0],R[1]];return new fe(C,null,null,N,ve.RSS_EXPANDED,null)}checkChecksum(){let m=this.pairs.get(0),y=m.getLeftChar(),j=m.getRightChar();if(j==null)return!1;let C=j.getChecksumPortion(),M=2;for(let N=1;N<this.pairs.size();++N){let A=this.pairs.get(N);C+=A.getLeftChar().getChecksumPortion(),M++;let L=A.getRightChar();L!=null&&(C+=L.getChecksumPortion(),M++)}return C%=211,211*(M-4)+C==y.getValue()}static getNextSecondBar(m,y){let j;return m.get(y)?(j=m.getNextUnset(y),j=m.getNextSet(j)):(j=m.getNextSet(y),j=m.getNextUnset(j)),j}retrieveNextPair(m,y,j){let C=y.length%2==0;this.startFromEven&&(C=!C);let M,R=!0,N=-1;do this.findNextPair(m,y,N),M=this.parseFoundFinderPattern(m,j,C),M==null?N=dt.getNextSecondBar(m,this.startEnd[0]):R=!1;while(R);let A=this.decodeDataCharacter(m,M,C,!0);if(!this.isEmptyPair(y)&&y[y.length-1].mustBeLast())throw new F;let L;try{L=this.decodeDataCharacter(m,M,C,!1)}catch(B){L=null,this.verbose&&console.log(B)}return new jr(A,L,M,!0)}isEmptyPair(m){return m.length===0}findNextPair(m,y,j){let C=this.getDecodeFinderCounters();C[0]=0,C[1]=0,C[2]=0,C[3]=0;let M=m.getSize(),R;j>=0?R=j:this.isEmptyPair(y)?R=0:R=y[y.length-1].getFinderPattern().getStartEnd()[1];let N=y.length%2!=0;this.startFromEven&&(N=!N);let A=!1;for(;R<M&&(A=!m.get(R),!!A);)R++;let L=0,B=R;for(let Y=R;Y<M;Y++)if(m.get(Y)!=A)C[L]++;else{if(L==3){if(N&&dt.reverseCounters(C),dt.isFinderPattern(C)){this.startEnd[0]=B,this.startEnd[1]=Y;return}N&&dt.reverseCounters(C),B+=C[0]+C[1],C[0]=C[2],C[1]=C[3],C[2]=0,C[3]=0,L--}else L++;C[L]=1,A=!A}throw new F}static reverseCounters(m){let y=m.length;for(let j=0;j<y/2;++j){let C=m[j];m[j]=m[y-j-1],m[y-j-1]=C}}parseFoundFinderPattern(m,y,j){let C,M,R;if(j){let L=this.startEnd[0]-1;for(;L>=0&&!m.get(L);)L--;L++,C=this.startEnd[0]-L,M=L,R=this.startEnd[1]}else M=this.startEnd[0],R=m.getNextUnset(this.startEnd[1]+1),C=R-this.startEnd[1];let N=this.getDecodeFinderCounters();b.arraycopy(N,0,N,1,N.length-1),N[0]=C;let A;try{A=this.parseFinderValue(N,dt.FINDER_PATTERNS)}catch{return null}return new ai(A,[M,R],M,R,y)}decodeDataCharacter(m,y,j,C){let M=this.getDataCharacterCounters();for(let et=0;et<M.length;et++)M[et]=0;if(C)dt.recordPatternInReverse(m,y.getStartEnd()[0],M);else{dt.recordPattern(m,y.getStartEnd()[1],M);for(let et=0,ht=M.length-1;et<ht;et++,ht--){let kt=M[et];M[et]=M[ht],M[ht]=kt}}let R=17,N=yt.sum(new Int32Array(M))/R,A=(y.getStartEnd()[1]-y.getStartEnd()[0])/15;if(Math.abs(N-A)/A>.3)throw new F;let L=this.getOddCounts(),B=this.getEvenCounts(),Y=this.getOddRoundingErrors(),te=this.getEvenRoundingErrors();for(let et=0;et<M.length;et++){let ht=1*M[et]/N,kt=ht+.5;if(kt<1){if(ht<.3)throw new F;kt=1}else if(kt>8){if(ht>8.7)throw new F;kt=8}let Mt=et/2;(et&1)==0?(L[Mt]=kt,Y[Mt]=ht-kt):(B[Mt]=kt,te[Mt]=ht-kt)}this.adjustOddEvenCounts(R);let se=4*y.getValue()+(j?0:2)+(C?0:1)-1,ce=0,pe=0;for(let et=L.length-1;et>=0;et--){if(dt.isNotA1left(y,j,C)){let ht=dt.WEIGHTS[se][2*et];pe+=L[et]*ht}ce+=L[et]}let ye=0;for(let et=B.length-1;et>=0;et--)if(dt.isNotA1left(y,j,C)){let ht=dt.WEIGHTS[se][2*et+1];ye+=B[et]*ht}let ge=pe+ye;if((ce&1)!=0||ce>13||ce<4)throw new F;let _e=(13-ce)/2,ke=dt.SYMBOL_WIDEST[_e],Ne=9-ke,Me=Si.getRSSvalue(L,ke,!0),Te=Si.getRSSvalue(B,Ne,!1),Ge=dt.EVEN_TOTAL_SUBSET[_e],qe=dt.GSUM[_e],He=Me*Ge+Te+qe;return new kn(He,ge)}static isNotA1left(m,y,j){return!(m.getValue()==0&&y&&j)}adjustOddEvenCounts(m){let y=yt.sum(new Int32Array(this.getOddCounts())),j=yt.sum(new Int32Array(this.getEvenCounts())),C=!1,M=!1;y>13?M=!0:y<4&&(C=!0);let R=!1,N=!1;j>13?N=!0:j<4&&(R=!0);let A=y+j-m,L=(y&1)==1,B=(j&1)==0;if(A==1)if(L){if(B)throw new F;M=!0}else{if(!B)throw new F;N=!0}else if(A==-1)if(L){if(B)throw new F;C=!0}else{if(!B)throw new F;R=!0}else if(A==0){if(L){if(!B)throw new F;y<j?(C=!0,N=!0):(M=!0,R=!0)}else if(B)throw new F}else throw new F;if(C){if(M)throw new F;dt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(M&&dt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),R){if(N)throw new F;dt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}N&&dt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}dt.SYMBOL_WIDEST=[7,5,4,3,1],dt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],dt.GSUM=[0,348,1388,2948,3988],dt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],dt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],dt.FINDER_PAT_A=0,dt.FINDER_PAT_B=1,dt.FINDER_PAT_C=2,dt.FINDER_PAT_D=3,dt.FINDER_PAT_E=4,dt.FINDER_PAT_F=5,dt.FINDER_PATTERN_SEQUENCES=[[dt.FINDER_PAT_A,dt.FINDER_PAT_A],[dt.FINDER_PAT_A,dt.FINDER_PAT_B,dt.FINDER_PAT_B],[dt.FINDER_PAT_A,dt.FINDER_PAT_C,dt.FINDER_PAT_B,dt.FINDER_PAT_D],[dt.FINDER_PAT_A,dt.FINDER_PAT_E,dt.FINDER_PAT_B,dt.FINDER_PAT_D,dt.FINDER_PAT_C],[dt.FINDER_PAT_A,dt.FINDER_PAT_E,dt.FINDER_PAT_B,dt.FINDER_PAT_D,dt.FINDER_PAT_D,dt.FINDER_PAT_F],[dt.FINDER_PAT_A,dt.FINDER_PAT_E,dt.FINDER_PAT_B,dt.FINDER_PAT_D,dt.FINDER_PAT_E,dt.FINDER_PAT_F,dt.FINDER_PAT_F],[dt.FINDER_PAT_A,dt.FINDER_PAT_A,dt.FINDER_PAT_B,dt.FINDER_PAT_B,dt.FINDER_PAT_C,dt.FINDER_PAT_C,dt.FINDER_PAT_D,dt.FINDER_PAT_D],[dt.FINDER_PAT_A,dt.FINDER_PAT_A,dt.FINDER_PAT_B,dt.FINDER_PAT_B,dt.FINDER_PAT_C,dt.FINDER_PAT_C,dt.FINDER_PAT_D,dt.FINDER_PAT_E,dt.FINDER_PAT_E],[dt.FINDER_PAT_A,dt.FINDER_PAT_A,dt.FINDER_PAT_B,dt.FINDER_PAT_B,dt.FINDER_PAT_C,dt.FINDER_PAT_C,dt.FINDER_PAT_D,dt.FINDER_PAT_E,dt.FINDER_PAT_F,dt.FINDER_PAT_F],[dt.FINDER_PAT_A,dt.FINDER_PAT_A,dt.FINDER_PAT_B,dt.FINDER_PAT_B,dt.FINDER_PAT_C,dt.FINDER_PAT_D,dt.FINDER_PAT_D,dt.FINDER_PAT_E,dt.FINDER_PAT_E,dt.FINDER_PAT_F,dt.FINDER_PAT_F]],dt.MAX_PAIRS=11;class ri extends kn{constructor(m,y,j){super(m,y),this.count=0,this.finderPattern=j}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class sr extends cn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(m,y,j){const C=this.decodePair(y,!1,m,j);sr.addOrTally(this.possibleLeftPairs,C),y.reverse();let M=this.decodePair(y,!0,m,j);sr.addOrTally(this.possibleRightPairs,M),y.reverse();for(let R of this.possibleLeftPairs)if(R.getCount()>1){for(let N of this.possibleRightPairs)if(N.getCount()>1&&sr.checkChecksum(R,N))return sr.constructResult(R,N)}throw new F}static addOrTally(m,y){if(y==null)return;let j=!1;for(let C of m)if(C.getValue()===y.getValue()){C.incrementCount(),j=!0;break}j||m.push(y)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(m,y){let j=4537077*m.getValue()+y.getValue(),C=new String(j).toString(),M=new J;for(let L=13-C.length;L>0;L--)M.append("0");M.append(C);let R=0;for(let L=0;L<13;L++){let B=M.charAt(L).charCodeAt(0)-48;R+=(L&1)===0?3*B:B}R=10-R%10,R===10&&(R=0),M.append(R.toString());let N=m.getFinderPattern().getResultPoints(),A=y.getFinderPattern().getResultPoints();return new fe(M.toString(),null,0,[N[0],N[1],A[0],A[1]],ve.RSS_14,new Date().getTime())}static checkChecksum(m,y){let j=(m.getChecksumPortion()+16*y.getChecksumPortion())%79,C=9*m.getFinderPattern().getValue()+y.getFinderPattern().getValue();return C>72&&C--,C>8&&C--,j===C}decodePair(m,y,j,C){try{let M=this.findFinderPattern(m,y),R=this.parseFoundFinderPattern(m,j,y,M),N=C==null?null:C.get(O.NEED_RESULT_POINT_CALLBACK);if(N!=null){let B=(M[0]+M[1])/2;y&&(B=m.getSize()-1-B),N.foundPossibleResultPoint(new Ye(B,j))}let A=this.decodeDataCharacter(m,R,!0),L=this.decodeDataCharacter(m,R,!1);return new ri(1597*A.getValue()+L.getValue(),A.getChecksumPortion()+4*L.getChecksumPortion(),R)}catch{return null}}decodeDataCharacter(m,y,j){let C=this.getDataCharacterCounters();for(let ye=0;ye<C.length;ye++)C[ye]=0;if(j)Tt.recordPatternInReverse(m,y.getStartEnd()[0],C);else{Tt.recordPattern(m,y.getStartEnd()[1]+1,C);for(let ye=0,ge=C.length-1;ye<ge;ye++,ge--){let _e=C[ye];C[ye]=C[ge],C[ge]=_e}}let M=j?16:15,R=yt.sum(new Int32Array(C))/M,N=this.getOddCounts(),A=this.getEvenCounts(),L=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let ye=0;ye<C.length;ye++){let ge=C[ye]/R,_e=Math.floor(ge+.5);_e<1?_e=1:_e>8&&(_e=8);let ke=Math.floor(ye/2);(ye&1)===0?(N[ke]=_e,L[ke]=ge-_e):(A[ke]=_e,B[ke]=ge-_e)}this.adjustOddEvenCounts(j,M);let Y=0,te=0;for(let ye=N.length-1;ye>=0;ye--)te*=9,te+=N[ye],Y+=N[ye];let se=0,ce=0;for(let ye=A.length-1;ye>=0;ye--)se*=9,se+=A[ye],ce+=A[ye];let pe=te+3*se;if(j){if((Y&1)!==0||Y>12||Y<4)throw new F;let ye=(12-Y)/2,ge=sr.OUTSIDE_ODD_WIDEST[ye],_e=9-ge,ke=Si.getRSSvalue(N,ge,!1),Ne=Si.getRSSvalue(A,_e,!0),Me=sr.OUTSIDE_EVEN_TOTAL_SUBSET[ye],Te=sr.OUTSIDE_GSUM[ye];return new kn(ke*Me+Ne+Te,pe)}else{if((ce&1)!==0||ce>10||ce<4)throw new F;let ye=(10-ce)/2,ge=sr.INSIDE_ODD_WIDEST[ye],_e=9-ge,ke=Si.getRSSvalue(N,ge,!0),Ne=Si.getRSSvalue(A,_e,!1),Me=sr.INSIDE_ODD_TOTAL_SUBSET[ye],Te=sr.INSIDE_GSUM[ye];return new kn(Ne*Me+ke+Te,pe)}}findFinderPattern(m,y){let j=this.getDecodeFinderCounters();j[0]=0,j[1]=0,j[2]=0,j[3]=0;let C=m.getSize(),M=!1,R=0;for(;R<C&&(M=!m.get(R),y!==M);)R++;let N=0,A=R;for(let L=R;L<C;L++)if(m.get(L)!==M)j[N]++;else{if(N===3){if(cn.isFinderPattern(j))return[A,L];A+=j[0]+j[1],j[0]=j[2],j[1]=j[3],j[2]=0,j[3]=0,N--}else N++;j[N]=1,M=!M}throw new F}parseFoundFinderPattern(m,y,j,C){let M=m.get(C[0]),R=C[0]-1;for(;R>=0&&M!==m.get(R);)R--;R++;const N=C[0]-R,A=this.getDecodeFinderCounters(),L=new Int32Array(A.length);b.arraycopy(A,0,L,1,A.length-1),L[0]=N;const B=this.parseFinderValue(L,sr.FINDER_PATTERNS);let Y=R,te=C[1];return j&&(Y=m.getSize()-1-Y,te=m.getSize()-1-te),new ai(B,[R,C[1]],Y,te,y)}adjustOddEvenCounts(m,y){let j=yt.sum(new Int32Array(this.getOddCounts())),C=yt.sum(new Int32Array(this.getEvenCounts())),M=!1,R=!1,N=!1,A=!1;m?(j>12?R=!0:j<4&&(M=!0),C>12?A=!0:C<4&&(N=!0)):(j>11?R=!0:j<5&&(M=!0),C>10?A=!0:C<4&&(N=!0));let L=j+C-y,B=(j&1)===(m?1:0),Y=(C&1)===1;if(L===1)if(B){if(Y)throw new F;R=!0}else{if(!Y)throw new F;A=!0}else if(L===-1)if(B){if(Y)throw new F;M=!0}else{if(!Y)throw new F;N=!0}else if(L===0){if(B){if(!Y)throw new F;j<C?(M=!0,A=!0):(R=!0,N=!0)}else if(Y)throw new F}else throw new F;if(M){if(R)throw new F;cn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(R&&cn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),N){if(A)throw new F;cn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&cn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}sr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],sr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],sr.OUTSIDE_GSUM=[0,161,961,2015,2715],sr.INSIDE_GSUM=[0,336,1036,1516],sr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],sr.INSIDE_ODD_WIDEST=[2,4,6,8],sr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Nn extends Tt{constructor(m,y){super(),this.readers=[],this.verbose=y===!0;const j=m?m.get(O.POSSIBLE_FORMATS):null,C=m&&m.get(O.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;j?((j.includes(ve.EAN_13)||j.includes(ve.UPC_A)||j.includes(ve.EAN_8)||j.includes(ve.UPC_E))&&this.readers.push(new Ol(m)),j.includes(ve.CODE_39)&&this.readers.push(new oa(C)),j.includes(ve.CODE_128)&&this.readers.push(new lt),j.includes(ve.ITF)&&this.readers.push(new xt),j.includes(ve.RSS_14)&&this.readers.push(new sr),j.includes(ve.RSS_EXPANDED)&&this.readers.push(new dt(this.verbose))):(this.readers.push(new Ol(m)),this.readers.push(new oa),this.readers.push(new Ol(m)),this.readers.push(new lt),this.readers.push(new xt),this.readers.push(new sr),this.readers.push(new dt(this.verbose)))}decodeRow(m,y,j){for(let C=0;C<this.readers.length;C++)try{return this.readers[C].decodeRow(m,y,j)}catch{}throw new F}reset(){this.readers.forEach(m=>m.reset())}}class mi extends de{constructor(m=500,y){super(new Nn(y),m,y)}}class er{constructor(m,y,j){this.ecCodewords=m,this.ecBlocks=[y],j&&this.ecBlocks.push(j)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ha{constructor(m,y){this.count=m,this.dataCodewords=y}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Wt{constructor(m,y,j,C,M,R){this.versionNumber=m,this.symbolSizeRows=y,this.symbolSizeColumns=j,this.dataRegionSizeRows=C,this.dataRegionSizeColumns=M,this.ecBlocks=R;let N=0;const A=R.getECCodewords(),L=R.getECBlocks();for(let B of L)N+=B.getCount()*(B.getDataCodewords()+A);this.totalCodewords=N}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(m,y){if((m&1)!==0||(y&1)!==0)throw new P;for(let j of Wt.VERSIONS)if(j.symbolSizeRows===m&&j.symbolSizeColumns===y)return j;throw new P}toString(){return""+this.versionNumber}static buildVersions(){return[new Wt(1,10,10,8,8,new er(5,new Ha(1,3))),new Wt(2,12,12,10,10,new er(7,new Ha(1,5))),new Wt(3,14,14,12,12,new er(10,new Ha(1,8))),new Wt(4,16,16,14,14,new er(12,new Ha(1,12))),new Wt(5,18,18,16,16,new er(14,new Ha(1,18))),new Wt(6,20,20,18,18,new er(18,new Ha(1,22))),new Wt(7,22,22,20,20,new er(20,new Ha(1,30))),new Wt(8,24,24,22,22,new er(24,new Ha(1,36))),new Wt(9,26,26,24,24,new er(28,new Ha(1,44))),new Wt(10,32,32,14,14,new er(36,new Ha(1,62))),new Wt(11,36,36,16,16,new er(42,new Ha(1,86))),new Wt(12,40,40,18,18,new er(48,new Ha(1,114))),new Wt(13,44,44,20,20,new er(56,new Ha(1,144))),new Wt(14,48,48,22,22,new er(68,new Ha(1,174))),new Wt(15,52,52,24,24,new er(42,new Ha(2,102))),new Wt(16,64,64,14,14,new er(56,new Ha(2,140))),new Wt(17,72,72,16,16,new er(36,new Ha(4,92))),new Wt(18,80,80,18,18,new er(48,new Ha(4,114))),new Wt(19,88,88,20,20,new er(56,new Ha(4,144))),new Wt(20,96,96,22,22,new er(68,new Ha(4,174))),new Wt(21,104,104,24,24,new er(56,new Ha(6,136))),new Wt(22,120,120,18,18,new er(68,new Ha(6,175))),new Wt(23,132,132,20,20,new er(62,new Ha(8,163))),new Wt(24,144,144,22,22,new er(62,new Ha(8,156),new Ha(2,155))),new Wt(25,8,18,6,16,new er(7,new Ha(1,5))),new Wt(26,8,32,6,14,new er(11,new Ha(1,10))),new Wt(27,12,26,10,24,new er(14,new Ha(1,16))),new Wt(28,12,36,10,16,new er(18,new Ha(1,22))),new Wt(29,16,36,14,16,new er(24,new Ha(1,32))),new Wt(30,16,48,14,22,new er(28,new Ha(1,49)))]}}Wt.VERSIONS=Wt.buildVersions();class ua{constructor(m){const y=m.getHeight();if(y<8||y>144||(y&1)!==0)throw new P;this.version=ua.readVersion(m),this.mappingBitMatrix=this.extractDataRegion(m),this.readMappingMatrix=new U(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(m){const y=m.getHeight(),j=m.getWidth();return Wt.getVersionForDimensions(y,j)}readCodewords(){const m=new Int8Array(this.version.getTotalCodewords());let y=0,j=4,C=0;const M=this.mappingBitMatrix.getHeight(),R=this.mappingBitMatrix.getWidth();let N=!1,A=!1,L=!1,B=!1;do if(j===M&&C===0&&!N)m[y++]=this.readCorner1(M,R)&255,j-=2,C+=2,N=!0;else if(j===M-2&&C===0&&(R&3)!==0&&!A)m[y++]=this.readCorner2(M,R)&255,j-=2,C+=2,A=!0;else if(j===M+4&&C===2&&(R&7)===0&&!L)m[y++]=this.readCorner3(M,R)&255,j-=2,C+=2,L=!0;else if(j===M-2&&C===0&&(R&7)===4&&!B)m[y++]=this.readCorner4(M,R)&255,j-=2,C+=2,B=!0;else{do j<M&&C>=0&&!this.readMappingMatrix.get(C,j)&&(m[y++]=this.readUtah(j,C,M,R)&255),j-=2,C+=2;while(j>=0&&C<R);j+=1,C+=3;do j>=0&&C<R&&!this.readMappingMatrix.get(C,j)&&(m[y++]=this.readUtah(j,C,M,R)&255),j+=2,C-=2;while(j<M&&C>=0);j+=3,C+=1}while(j<M||C<R);if(y!==this.version.getTotalCodewords())throw new P;return m}readModule(m,y,j,C){return m<0&&(m+=j,y+=4-(j+4&7)),y<0&&(y+=C,m+=4-(C+4&7)),this.readMappingMatrix.set(y,m),this.mappingBitMatrix.get(y,m)}readUtah(m,y,j,C){let M=0;return this.readModule(m-2,y-2,j,C)&&(M|=1),M<<=1,this.readModule(m-2,y-1,j,C)&&(M|=1),M<<=1,this.readModule(m-1,y-2,j,C)&&(M|=1),M<<=1,this.readModule(m-1,y-1,j,C)&&(M|=1),M<<=1,this.readModule(m-1,y,j,C)&&(M|=1),M<<=1,this.readModule(m,y-2,j,C)&&(M|=1),M<<=1,this.readModule(m,y-1,j,C)&&(M|=1),M<<=1,this.readModule(m,y,j,C)&&(M|=1),M}readCorner1(m,y){let j=0;return this.readModule(m-1,0,m,y)&&(j|=1),j<<=1,this.readModule(m-1,1,m,y)&&(j|=1),j<<=1,this.readModule(m-1,2,m,y)&&(j|=1),j<<=1,this.readModule(0,y-2,m,y)&&(j|=1),j<<=1,this.readModule(0,y-1,m,y)&&(j|=1),j<<=1,this.readModule(1,y-1,m,y)&&(j|=1),j<<=1,this.readModule(2,y-1,m,y)&&(j|=1),j<<=1,this.readModule(3,y-1,m,y)&&(j|=1),j}readCorner2(m,y){let j=0;return this.readModule(m-3,0,m,y)&&(j|=1),j<<=1,this.readModule(m-2,0,m,y)&&(j|=1),j<<=1,this.readModule(m-1,0,m,y)&&(j|=1),j<<=1,this.readModule(0,y-4,m,y)&&(j|=1),j<<=1,this.readModule(0,y-3,m,y)&&(j|=1),j<<=1,this.readModule(0,y-2,m,y)&&(j|=1),j<<=1,this.readModule(0,y-1,m,y)&&(j|=1),j<<=1,this.readModule(1,y-1,m,y)&&(j|=1),j}readCorner3(m,y){let j=0;return this.readModule(m-1,0,m,y)&&(j|=1),j<<=1,this.readModule(m-1,y-1,m,y)&&(j|=1),j<<=1,this.readModule(0,y-3,m,y)&&(j|=1),j<<=1,this.readModule(0,y-2,m,y)&&(j|=1),j<<=1,this.readModule(0,y-1,m,y)&&(j|=1),j<<=1,this.readModule(1,y-3,m,y)&&(j|=1),j<<=1,this.readModule(1,y-2,m,y)&&(j|=1),j<<=1,this.readModule(1,y-1,m,y)&&(j|=1),j}readCorner4(m,y){let j=0;return this.readModule(m-3,0,m,y)&&(j|=1),j<<=1,this.readModule(m-2,0,m,y)&&(j|=1),j<<=1,this.readModule(m-1,0,m,y)&&(j|=1),j<<=1,this.readModule(0,y-2,m,y)&&(j|=1),j<<=1,this.readModule(0,y-1,m,y)&&(j|=1),j<<=1,this.readModule(1,y-1,m,y)&&(j|=1),j<<=1,this.readModule(2,y-1,m,y)&&(j|=1),j<<=1,this.readModule(3,y-1,m,y)&&(j|=1),j}extractDataRegion(m){const y=this.version.getSymbolSizeRows(),j=this.version.getSymbolSizeColumns();if(m.getHeight()!==y)throw new h("Dimension of bitMatrix must match the version size");const C=this.version.getDataRegionSizeRows(),M=this.version.getDataRegionSizeColumns(),R=y/C|0,N=j/M|0,A=R*C,L=N*M,B=new U(L,A);for(let Y=0;Y<R;++Y){const te=Y*C;for(let se=0;se<N;++se){const ce=se*M;for(let pe=0;pe<C;++pe){const ye=Y*(C+2)+1+pe,ge=te+pe;for(let _e=0;_e<M;++_e){const ke=se*(M+2)+1+_e;if(m.get(ke,ye)){const Ne=ce+_e;B.set(Ne,ge)}}}}}return B}}class ki{constructor(m,y){this.numDataCodewords=m,this.codewords=y}static getDataBlocks(m,y){const j=y.getECBlocks();let C=0;const M=j.getECBlocks();for(let pe of M)C+=pe.getCount();const R=new Array(C);let N=0;for(let pe of M)for(let ye=0;ye<pe.getCount();ye++){const ge=pe.getDataCodewords(),_e=j.getECCodewords()+ge;R[N++]=new ki(ge,new Uint8Array(_e))}const L=R[0].codewords.length-j.getECCodewords(),B=L-1;let Y=0;for(let pe=0;pe<B;pe++)for(let ye=0;ye<N;ye++)R[ye].codewords[pe]=m[Y++];const te=y.getVersionNumber()===24,se=te?8:N;for(let pe=0;pe<se;pe++)R[pe].codewords[L-1]=m[Y++];const ce=R[0].codewords.length;for(let pe=L;pe<ce;pe++)for(let ye=0;ye<N;ye++){const ge=te?(ye+8)%N:ye,_e=te&&ge>7?pe-1:pe;R[ge].codewords[_e]=m[Y++]}if(Y!==m.length)throw new h;return R}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class mn{constructor(m){this.bytes=m,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(m){if(m<1||m>32||m>this.available())throw new h(""+m);let y=0,j=this.bitOffset,C=this.byteOffset;const M=this.bytes;if(j>0){const R=8-j,N=m<R?m:R,A=R-N,L=255>>8-N<<A;y=(M[C]&L)>>A,m-=N,j+=N,j===8&&(j=0,C++)}if(m>0){for(;m>=8;)y=y<<8|M[C]&255,C++,m-=8;if(m>0){const R=8-m,N=255>>R<<R;y=y<<m|(M[C]&N)>>R,j+=m}}return this.bitOffset=j,this.byteOffset=C,y}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var fa;(function(ue){ue[ue.PAD_ENCODE=0]="PAD_ENCODE",ue[ue.ASCII_ENCODE=1]="ASCII_ENCODE",ue[ue.C40_ENCODE=2]="C40_ENCODE",ue[ue.TEXT_ENCODE=3]="TEXT_ENCODE",ue[ue.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",ue[ue.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",ue[ue.BASE256_ENCODE=6]="BASE256_ENCODE"})(fa||(fa={}));class Cn{static decode(m){const y=new mn(m),j=new J,C=new J,M=new Array;let R=fa.ASCII_ENCODE;do if(R===fa.ASCII_ENCODE)R=this.decodeAsciiSegment(y,j,C);else{switch(R){case fa.C40_ENCODE:this.decodeC40Segment(y,j);break;case fa.TEXT_ENCODE:this.decodeTextSegment(y,j);break;case fa.ANSIX12_ENCODE:this.decodeAnsiX12Segment(y,j);break;case fa.EDIFACT_ENCODE:this.decodeEdifactSegment(y,j);break;case fa.BASE256_ENCODE:this.decodeBase256Segment(y,j,M);break;default:throw new P}R=fa.ASCII_ENCODE}while(R!==fa.PAD_ENCODE&&y.available()>0);return C.length()>0&&j.append(C.toString()),new Ce(m,j.toString(),M.length===0?null:M,null)}static decodeAsciiSegment(m,y,j){let C=!1;do{let M=m.readBits(8);if(M===0)throw new P;if(M<=128)return C&&(M+=128),y.append(String.fromCharCode(M-1)),fa.ASCII_ENCODE;if(M===129)return fa.PAD_ENCODE;if(M<=229){const R=M-130;R<10&&y.append("0"),y.append(""+R)}else switch(M){case 230:return fa.C40_ENCODE;case 231:return fa.BASE256_ENCODE;case 232:y.append("");break;case 233:case 234:break;case 235:C=!0;break;case 236:y.append("[)>05"),j.insert(0,"");break;case 237:y.append("[)>06"),j.insert(0,"");break;case 238:return fa.ANSIX12_ENCODE;case 239:return fa.TEXT_ENCODE;case 240:return fa.EDIFACT_ENCODE;case 241:break;default:if(M!==254||m.available()!==0)throw new P;break}}while(m.available()>0);return fa.ASCII_ENCODE}static decodeC40Segment(m,y){let j=!1;const C=[];let M=0;do{if(m.available()===8)return;const R=m.readBits(8);if(R===254)return;this.parseTwoBytes(R,m.readBits(8),C);for(let N=0;N<3;N++){const A=C[N];switch(M){case 0:if(A<3)M=A+1;else if(A<this.C40_BASIC_SET_CHARS.length){const L=this.C40_BASIC_SET_CHARS[A];j?(y.append(String.fromCharCode(L.charCodeAt(0)+128)),j=!1):y.append(L)}else throw new P;break;case 1:j?(y.append(String.fromCharCode(A+128)),j=!1):y.append(String.fromCharCode(A)),M=0;break;case 2:if(A<this.C40_SHIFT2_SET_CHARS.length){const L=this.C40_SHIFT2_SET_CHARS[A];j?(y.append(String.fromCharCode(L.charCodeAt(0)+128)),j=!1):y.append(L)}else switch(A){case 27:y.append("");break;case 30:j=!0;break;default:throw new P}M=0;break;case 3:j?(y.append(String.fromCharCode(A+224)),j=!1):y.append(String.fromCharCode(A+96)),M=0;break;default:throw new P}}}while(m.available()>0)}static decodeTextSegment(m,y){let j=!1,C=[],M=0;do{if(m.available()===8)return;const R=m.readBits(8);if(R===254)return;this.parseTwoBytes(R,m.readBits(8),C);for(let N=0;N<3;N++){const A=C[N];switch(M){case 0:if(A<3)M=A+1;else if(A<this.TEXT_BASIC_SET_CHARS.length){const L=this.TEXT_BASIC_SET_CHARS[A];j?(y.append(String.fromCharCode(L.charCodeAt(0)+128)),j=!1):y.append(L)}else throw new P;break;case 1:j?(y.append(String.fromCharCode(A+128)),j=!1):y.append(String.fromCharCode(A)),M=0;break;case 2:if(A<this.TEXT_SHIFT2_SET_CHARS.length){const L=this.TEXT_SHIFT2_SET_CHARS[A];j?(y.append(String.fromCharCode(L.charCodeAt(0)+128)),j=!1):y.append(L)}else switch(A){case 27:y.append("");break;case 30:j=!0;break;default:throw new P}M=0;break;case 3:if(A<this.TEXT_SHIFT3_SET_CHARS.length){const L=this.TEXT_SHIFT3_SET_CHARS[A];j?(y.append(String.fromCharCode(L.charCodeAt(0)+128)),j=!1):y.append(L),M=0}else throw new P;break;default:throw new P}}}while(m.available()>0)}static decodeAnsiX12Segment(m,y){const j=[];do{if(m.available()===8)return;const C=m.readBits(8);if(C===254)return;this.parseTwoBytes(C,m.readBits(8),j);for(let M=0;M<3;M++){const R=j[M];switch(R){case 0:y.append("\r");break;case 1:y.append("*");break;case 2:y.append(">");break;case 3:y.append(" ");break;default:if(R<14)y.append(String.fromCharCode(R+44));else if(R<40)y.append(String.fromCharCode(R+51));else throw new P;break}}}while(m.available()>0)}static parseTwoBytes(m,y,j){let C=(m<<8)+y-1,M=Math.floor(C/1600);j[0]=M,C-=M*1600,M=Math.floor(C/40),j[1]=M,j[2]=C-M*40}static decodeEdifactSegment(m,y){do{if(m.available()<=16)return;for(let j=0;j<4;j++){let C=m.readBits(6);if(C===31){const M=8-m.getBitOffset();M!==8&&m.readBits(M);return}(C&32)===0&&(C|=64),y.append(String.fromCharCode(C))}}while(m.available()>0)}static decodeBase256Segment(m,y,j){let C=1+m.getByteOffset();const M=this.unrandomize255State(m.readBits(8),C++);let R;if(M===0?R=m.available()/8|0:M<250?R=M:R=250*(M-249)+this.unrandomize255State(m.readBits(8),C++),R<0)throw new P;const N=new Uint8Array(R);for(let A=0;A<R;A++){if(m.available()<8)throw new P;N[A]=this.unrandomize255State(m.readBits(8),C++)}j.push(N);try{y.append($.decode(N,ae.ISO88591))}catch(A){throw new Ze("Platform does not support required encoding: "+A.message)}}static unrandomize255State(m,y){const j=149*y%255+1,C=m-j;return C>=0?C:C+256}}Cn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Cn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Cn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Cn.TEXT_SHIFT2_SET_CHARS=Cn.C40_SHIFT2_SET_CHARS,Cn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Pc{constructor(){this.rsDecoder=new Re(Ee.DATA_MATRIX_FIELD_256)}decode(m){const y=new ua(m),j=y.getVersion(),C=y.readCodewords(),M=ki.getDataBlocks(C,j);let R=0;for(let L of M)R+=L.getNumDataCodewords();const N=new Uint8Array(R),A=M.length;for(let L=0;L<A;L++){const B=M[L],Y=B.getCodewords(),te=B.getNumDataCodewords();this.correctErrors(Y,te);for(let se=0;se<te;se++)N[se*A+L]=Y[se]}return Cn.decode(N)}correctErrors(m,y){const j=new Int32Array(m);try{this.rsDecoder.decode(j,m.length-y)}catch{throw new p}for(let C=0;C<y;C++)m[C]=j[C]}}class Or{constructor(m){this.image=m,this.rectangleDetector=new Bt(this.image)}detect(){const m=this.rectangleDetector.detect();let y=this.detectSolid1(m);if(y=this.detectSolid2(y),y[3]=this.correctTopRight(y),!y[3])throw new F;y=this.shiftToModuleCenter(y);const j=y[0],C=y[1],M=y[2],R=y[3];let N=this.transitionsBetween(j,R)+1,A=this.transitionsBetween(M,R)+1;(N&1)===1&&(N+=1),(A&1)===1&&(A+=1),4*N<7*A&&4*A<7*N&&(N=A=Math.max(N,A));let L=Or.sampleGrid(this.image,j,C,M,R,N,A);return new Ht(L,[j,C,M,R])}static shiftPoint(m,y,j){let C=(y.getX()-m.getX())/(j+1),M=(y.getY()-m.getY())/(j+1);return new Ye(m.getX()+C,m.getY()+M)}static moveAway(m,y,j){let C=m.getX(),M=m.getY();return C<y?C-=1:C+=1,M<j?M-=1:M+=1,new Ye(C,M)}detectSolid1(m){let y=m[0],j=m[1],C=m[3],M=m[2],R=this.transitionsBetween(y,j),N=this.transitionsBetween(j,C),A=this.transitionsBetween(C,M),L=this.transitionsBetween(M,y),B=R,Y=[M,y,j,C];return B>N&&(B=N,Y[0]=y,Y[1]=j,Y[2]=C,Y[3]=M),B>A&&(B=A,Y[0]=j,Y[1]=C,Y[2]=M,Y[3]=y),B>L&&(Y[0]=C,Y[1]=M,Y[2]=y,Y[3]=j),Y}detectSolid2(m){let y=m[0],j=m[1],C=m[2],M=m[3],R=this.transitionsBetween(y,M),N=Or.shiftPoint(j,C,(R+1)*4),A=Or.shiftPoint(C,j,(R+1)*4),L=this.transitionsBetween(N,y),B=this.transitionsBetween(A,M);return L<B?(m[0]=y,m[1]=j,m[2]=C,m[3]=M):(m[0]=j,m[1]=C,m[2]=M,m[3]=y),m}correctTopRight(m){let y=m[0],j=m[1],C=m[2],M=m[3],R=this.transitionsBetween(y,M),N=this.transitionsBetween(j,M),A=Or.shiftPoint(y,j,(N+1)*4),L=Or.shiftPoint(C,j,(R+1)*4);R=this.transitionsBetween(A,M),N=this.transitionsBetween(L,M);let B=new Ye(M.getX()+(C.getX()-j.getX())/(R+1),M.getY()+(C.getY()-j.getY())/(R+1)),Y=new Ye(M.getX()+(y.getX()-j.getX())/(N+1),M.getY()+(y.getY()-j.getY())/(N+1));if(!this.isValid(B))return this.isValid(Y)?Y:null;if(!this.isValid(Y))return B;let te=this.transitionsBetween(A,B)+this.transitionsBetween(L,B),se=this.transitionsBetween(A,Y)+this.transitionsBetween(L,Y);return te>se?B:Y}shiftToModuleCenter(m){let y=m[0],j=m[1],C=m[2],M=m[3],R=this.transitionsBetween(y,M)+1,N=this.transitionsBetween(C,M)+1,A=Or.shiftPoint(y,j,N*4),L=Or.shiftPoint(C,j,R*4);R=this.transitionsBetween(A,M)+1,N=this.transitionsBetween(L,M)+1,(R&1)===1&&(R+=1),(N&1)===1&&(N+=1);let B=(y.getX()+j.getX()+C.getX()+M.getX())/4,Y=(y.getY()+j.getY()+C.getY()+M.getY())/4;y=Or.moveAway(y,B,Y),j=Or.moveAway(j,B,Y),C=Or.moveAway(C,B,Y),M=Or.moveAway(M,B,Y);let te,se;return A=Or.shiftPoint(y,j,N*4),A=Or.shiftPoint(A,M,R*4),te=Or.shiftPoint(j,y,N*4),te=Or.shiftPoint(te,C,R*4),L=Or.shiftPoint(C,M,N*4),L=Or.shiftPoint(L,j,R*4),se=Or.shiftPoint(M,C,N*4),se=Or.shiftPoint(se,y,R*4),[A,te,L,se]}isValid(m){return m.getX()>=0&&m.getX()<this.image.getWidth()&&m.getY()>0&&m.getY()<this.image.getHeight()}static sampleGrid(m,y,j,C,M,R,N){return ka.getInstance().sampleGrid(m,R,N,.5,.5,R-.5,.5,R-.5,N-.5,.5,N-.5,y.getX(),y.getY(),M.getX(),M.getY(),C.getX(),C.getY(),j.getX(),j.getY())}transitionsBetween(m,y){let j=Math.trunc(m.getX()),C=Math.trunc(m.getY()),M=Math.trunc(y.getX()),R=Math.trunc(y.getY()),N=Math.abs(R-C)>Math.abs(M-j);if(N){let pe=j;j=C,C=pe,pe=M,M=R,R=pe}let A=Math.abs(M-j),L=Math.abs(R-C),B=-A/2,Y=C<R?1:-1,te=j<M?1:-1,se=0,ce=this.image.get(N?C:j,N?j:C);for(let pe=j,ye=C;pe!==M;pe+=te){let ge=this.image.get(N?ye:pe,N?pe:ye);if(ge!==ce&&(se++,ce=ge),B+=L,B>0){if(ye===R)break;ye+=Y,B-=A}}return se}}class Ts{constructor(){this.decoder=new Pc}decode(m,y=null){let j,C;if(y!=null&&y.has(O.PURE_BARCODE)){const L=Ts.extractPureBits(m.getBlackMatrix());j=this.decoder.decode(L),C=Ts.NO_POINTS}else{const L=new Or(m.getBlackMatrix()).detect();j=this.decoder.decode(L.getBits()),C=L.getPoints()}const M=j.getRawBytes(),R=new fe(j.getText(),M,8*M.length,C,ve.DATA_MATRIX,b.currentTimeMillis()),N=j.getByteSegments();N!=null&&R.putMetadata(Se.BYTE_SEGMENTS,N);const A=j.getECLevel();return A!=null&&R.putMetadata(Se.ERROR_CORRECTION_LEVEL,A),R}reset(){}static extractPureBits(m){const y=m.getTopLeftOnBit(),j=m.getBottomRightOnBit();if(y==null||j==null)throw new F;const C=this.moduleSize(y,m);let M=y[1];const R=j[1];let N=y[0];const L=(j[0]-N+1)/C,B=(R-M+1)/C;if(L<=0||B<=0)throw new F;const Y=C/2;M+=Y,N+=Y;const te=new U(L,B);for(let se=0;se<B;se++){const ce=M+se*C;for(let pe=0;pe<L;pe++)m.get(N+pe*C,ce)&&te.set(pe,se)}return te}static moduleSize(m,y){const j=y.getWidth();let C=m[0];const M=m[1];for(;C<j&&y.get(C,M);)C++;if(C===j)throw new F;const R=C-m[0];if(R===0)throw new F;return R}}Ts.NO_POINTS=[];class Sr extends de{constructor(m=500){super(new Ts,m)}}var Ms;(function(ue){ue[ue.L=0]="L",ue[ue.M=1]="M",ue[ue.Q=2]="Q",ue[ue.H=3]="H"})(Ms||(Ms={}));class Fa{constructor(m,y,j){this.value=m,this.stringValue=y,this.bits=j,Fa.FOR_BITS.set(j,this),Fa.FOR_VALUE.set(m,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(m){switch(m){case"L":return Fa.L;case"M":return Fa.M;case"Q":return Fa.Q;case"H":return Fa.H;default:throw new u(m+"not available")}}toString(){return this.stringValue}equals(m){if(!(m instanceof Fa))return!1;const y=m;return this.value===y.value}static forBits(m){if(m<0||m>=Fa.FOR_BITS.size)throw new h;return Fa.FOR_BITS.get(m)}}Fa.FOR_BITS=new Map,Fa.FOR_VALUE=new Map,Fa.L=new Fa(Ms.L,"L",1),Fa.M=new Fa(Ms.M,"M",0),Fa.Q=new Fa(Ms.Q,"Q",3),Fa.H=new Fa(Ms.H,"H",2);class an{constructor(m){this.errorCorrectionLevel=Fa.forBits(m>>3&3),this.dataMask=m&7}static numBitsDiffering(m,y){return T.bitCount(m^y)}static decodeFormatInformation(m,y){const j=an.doDecodeFormatInformation(m,y);return j!==null?j:an.doDecodeFormatInformation(m^an.FORMAT_INFO_MASK_QR,y^an.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(m,y){let j=Number.MAX_SAFE_INTEGER,C=0;for(const M of an.FORMAT_INFO_DECODE_LOOKUP){const R=M[0];if(R===m||R===y)return new an(M[1]);let N=an.numBitsDiffering(m,R);N<j&&(C=M[1],j=N),m!==y&&(N=an.numBitsDiffering(y,R),N<j&&(C=M[1],j=N))}return j<=3?new an(C):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(m){if(!(m instanceof an))return!1;const y=m;return this.errorCorrectionLevel===y.errorCorrectionLevel&&this.dataMask===y.dataMask}}an.FORMAT_INFO_MASK_QR=21522,an.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class $e{constructor(m,...y){this.ecCodewordsPerBlock=m,this.ecBlocks=y}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let m=0;const y=this.ecBlocks;for(const j of y)m+=j.getCount();return m}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class je{constructor(m,y){this.count=m,this.dataCodewords=y}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class aa{constructor(m,y,...j){this.versionNumber=m,this.alignmentPatternCenters=y,this.ecBlocks=j;let C=0;const M=j[0].getECCodewordsPerBlock(),R=j[0].getECBlocks();for(const N of R)C+=N.getCount()*(N.getDataCodewords()+M);this.totalCodewords=C}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(m){return this.ecBlocks[m.getValue()]}static getProvisionalVersionForDimension(m){if(m%4!==1)throw new P;try{return this.getVersionForNumber((m-17)/4)}catch{throw new P}}static getVersionForNumber(m){if(m<1||m>40)throw new h;return aa.VERSIONS[m-1]}static decodeVersionInformation(m){let y=Number.MAX_SAFE_INTEGER,j=0;for(let C=0;C<aa.VERSION_DECODE_INFO.length;C++){const M=aa.VERSION_DECODE_INFO[C];if(M===m)return aa.getVersionForNumber(C+7);const R=an.numBitsDiffering(m,M);R<y&&(j=C+7,y=R)}return y<=3?aa.getVersionForNumber(j):null}buildFunctionPattern(){const m=this.getDimensionForVersion(),y=new U(m);y.setRegion(0,0,9,9),y.setRegion(m-8,0,8,9),y.setRegion(0,m-8,9,8);const j=this.alignmentPatternCenters.length;for(let C=0;C<j;C++){const M=this.alignmentPatternCenters[C]-2;for(let R=0;R<j;R++)C===0&&(R===0||R===j-1)||C===j-1&&R===0||y.setRegion(this.alignmentPatternCenters[R]-2,M,5,5)}return y.setRegion(6,9,1,m-17),y.setRegion(9,6,m-17,1),this.versionNumber>6&&(y.setRegion(m-11,0,3,6),y.setRegion(0,m-11,6,3)),y}toString(){return""+this.versionNumber}}aa.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),aa.VERSIONS=[new aa(1,new Int32Array(0),new $e(7,new je(1,19)),new $e(10,new je(1,16)),new $e(13,new je(1,13)),new $e(17,new je(1,9))),new aa(2,Int32Array.from([6,18]),new $e(10,new je(1,34)),new $e(16,new je(1,28)),new $e(22,new je(1,22)),new $e(28,new je(1,16))),new aa(3,Int32Array.from([6,22]),new $e(15,new je(1,55)),new $e(26,new je(1,44)),new $e(18,new je(2,17)),new $e(22,new je(2,13))),new aa(4,Int32Array.from([6,26]),new $e(20,new je(1,80)),new $e(18,new je(2,32)),new $e(26,new je(2,24)),new $e(16,new je(4,9))),new aa(5,Int32Array.from([6,30]),new $e(26,new je(1,108)),new $e(24,new je(2,43)),new $e(18,new je(2,15),new je(2,16)),new $e(22,new je(2,11),new je(2,12))),new aa(6,Int32Array.from([6,34]),new $e(18,new je(2,68)),new $e(16,new je(4,27)),new $e(24,new je(4,19)),new $e(28,new je(4,15))),new aa(7,Int32Array.from([6,22,38]),new $e(20,new je(2,78)),new $e(18,new je(4,31)),new $e(18,new je(2,14),new je(4,15)),new $e(26,new je(4,13),new je(1,14))),new aa(8,Int32Array.from([6,24,42]),new $e(24,new je(2,97)),new $e(22,new je(2,38),new je(2,39)),new $e(22,new je(4,18),new je(2,19)),new $e(26,new je(4,14),new je(2,15))),new aa(9,Int32Array.from([6,26,46]),new $e(30,new je(2,116)),new $e(22,new je(3,36),new je(2,37)),new $e(20,new je(4,16),new je(4,17)),new $e(24,new je(4,12),new je(4,13))),new aa(10,Int32Array.from([6,28,50]),new $e(18,new je(2,68),new je(2,69)),new $e(26,new je(4,43),new je(1,44)),new $e(24,new je(6,19),new je(2,20)),new $e(28,new je(6,15),new je(2,16))),new aa(11,Int32Array.from([6,30,54]),new $e(20,new je(4,81)),new $e(30,new je(1,50),new je(4,51)),new $e(28,new je(4,22),new je(4,23)),new $e(24,new je(3,12),new je(8,13))),new aa(12,Int32Array.from([6,32,58]),new $e(24,new je(2,92),new je(2,93)),new $e(22,new je(6,36),new je(2,37)),new $e(26,new je(4,20),new je(6,21)),new $e(28,new je(7,14),new je(4,15))),new aa(13,Int32Array.from([6,34,62]),new $e(26,new je(4,107)),new $e(22,new je(8,37),new je(1,38)),new $e(24,new je(8,20),new je(4,21)),new $e(22,new je(12,11),new je(4,12))),new aa(14,Int32Array.from([6,26,46,66]),new $e(30,new je(3,115),new je(1,116)),new $e(24,new je(4,40),new je(5,41)),new $e(20,new je(11,16),new je(5,17)),new $e(24,new je(11,12),new je(5,13))),new aa(15,Int32Array.from([6,26,48,70]),new $e(22,new je(5,87),new je(1,88)),new $e(24,new je(5,41),new je(5,42)),new $e(30,new je(5,24),new je(7,25)),new $e(24,new je(11,12),new je(7,13))),new aa(16,Int32Array.from([6,26,50,74]),new $e(24,new je(5,98),new je(1,99)),new $e(28,new je(7,45),new je(3,46)),new $e(24,new je(15,19),new je(2,20)),new $e(30,new je(3,15),new je(13,16))),new aa(17,Int32Array.from([6,30,54,78]),new $e(28,new je(1,107),new je(5,108)),new $e(28,new je(10,46),new je(1,47)),new $e(28,new je(1,22),new je(15,23)),new $e(28,new je(2,14),new je(17,15))),new aa(18,Int32Array.from([6,30,56,82]),new $e(30,new je(5,120),new je(1,121)),new $e(26,new je(9,43),new je(4,44)),new $e(28,new je(17,22),new je(1,23)),new $e(28,new je(2,14),new je(19,15))),new aa(19,Int32Array.from([6,30,58,86]),new $e(28,new je(3,113),new je(4,114)),new $e(26,new je(3,44),new je(11,45)),new $e(26,new je(17,21),new je(4,22)),new $e(26,new je(9,13),new je(16,14))),new aa(20,Int32Array.from([6,34,62,90]),new $e(28,new je(3,107),new je(5,108)),new $e(26,new je(3,41),new je(13,42)),new $e(30,new je(15,24),new je(5,25)),new $e(28,new je(15,15),new je(10,16))),new aa(21,Int32Array.from([6,28,50,72,94]),new $e(28,new je(4,116),new je(4,117)),new $e(26,new je(17,42)),new $e(28,new je(17,22),new je(6,23)),new $e(30,new je(19,16),new je(6,17))),new aa(22,Int32Array.from([6,26,50,74,98]),new $e(28,new je(2,111),new je(7,112)),new $e(28,new je(17,46)),new $e(30,new je(7,24),new je(16,25)),new $e(24,new je(34,13))),new aa(23,Int32Array.from([6,30,54,78,102]),new $e(30,new je(4,121),new je(5,122)),new $e(28,new je(4,47),new je(14,48)),new $e(30,new je(11,24),new je(14,25)),new $e(30,new je(16,15),new je(14,16))),new aa(24,Int32Array.from([6,28,54,80,106]),new $e(30,new je(6,117),new je(4,118)),new $e(28,new je(6,45),new je(14,46)),new $e(30,new je(11,24),new je(16,25)),new $e(30,new je(30,16),new je(2,17))),new aa(25,Int32Array.from([6,32,58,84,110]),new $e(26,new je(8,106),new je(4,107)),new $e(28,new je(8,47),new je(13,48)),new $e(30,new je(7,24),new je(22,25)),new $e(30,new je(22,15),new je(13,16))),new aa(26,Int32Array.from([6,30,58,86,114]),new $e(28,new je(10,114),new je(2,115)),new $e(28,new je(19,46),new je(4,47)),new $e(28,new je(28,22),new je(6,23)),new $e(30,new je(33,16),new je(4,17))),new aa(27,Int32Array.from([6,34,62,90,118]),new $e(30,new je(8,122),new je(4,123)),new $e(28,new je(22,45),new je(3,46)),new $e(30,new je(8,23),new je(26,24)),new $e(30,new je(12,15),new je(28,16))),new aa(28,Int32Array.from([6,26,50,74,98,122]),new $e(30,new je(3,117),new je(10,118)),new $e(28,new je(3,45),new je(23,46)),new $e(30,new je(4,24),new je(31,25)),new $e(30,new je(11,15),new je(31,16))),new aa(29,Int32Array.from([6,30,54,78,102,126]),new $e(30,new je(7,116),new je(7,117)),new $e(28,new je(21,45),new je(7,46)),new $e(30,new je(1,23),new je(37,24)),new $e(30,new je(19,15),new je(26,16))),new aa(30,Int32Array.from([6,26,52,78,104,130]),new $e(30,new je(5,115),new je(10,116)),new $e(28,new je(19,47),new je(10,48)),new $e(30,new je(15,24),new je(25,25)),new $e(30,new je(23,15),new je(25,16))),new aa(31,Int32Array.from([6,30,56,82,108,134]),new $e(30,new je(13,115),new je(3,116)),new $e(28,new je(2,46),new je(29,47)),new $e(30,new je(42,24),new je(1,25)),new $e(30,new je(23,15),new je(28,16))),new aa(32,Int32Array.from([6,34,60,86,112,138]),new $e(30,new je(17,115)),new $e(28,new je(10,46),new je(23,47)),new $e(30,new je(10,24),new je(35,25)),new $e(30,new je(19,15),new je(35,16))),new aa(33,Int32Array.from([6,30,58,86,114,142]),new $e(30,new je(17,115),new je(1,116)),new $e(28,new je(14,46),new je(21,47)),new $e(30,new je(29,24),new je(19,25)),new $e(30,new je(11,15),new je(46,16))),new aa(34,Int32Array.from([6,34,62,90,118,146]),new $e(30,new je(13,115),new je(6,116)),new $e(28,new je(14,46),new je(23,47)),new $e(30,new je(44,24),new je(7,25)),new $e(30,new je(59,16),new je(1,17))),new aa(35,Int32Array.from([6,30,54,78,102,126,150]),new $e(30,new je(12,121),new je(7,122)),new $e(28,new je(12,47),new je(26,48)),new $e(30,new je(39,24),new je(14,25)),new $e(30,new je(22,15),new je(41,16))),new aa(36,Int32Array.from([6,24,50,76,102,128,154]),new $e(30,new je(6,121),new je(14,122)),new $e(28,new je(6,47),new je(34,48)),new $e(30,new je(46,24),new je(10,25)),new $e(30,new je(2,15),new je(64,16))),new aa(37,Int32Array.from([6,28,54,80,106,132,158]),new $e(30,new je(17,122),new je(4,123)),new $e(28,new je(29,46),new je(14,47)),new $e(30,new je(49,24),new je(10,25)),new $e(30,new je(24,15),new je(46,16))),new aa(38,Int32Array.from([6,32,58,84,110,136,162]),new $e(30,new je(4,122),new je(18,123)),new $e(28,new je(13,46),new je(32,47)),new $e(30,new je(48,24),new je(14,25)),new $e(30,new je(42,15),new je(32,16))),new aa(39,Int32Array.from([6,26,54,82,110,138,166]),new $e(30,new je(20,117),new je(4,118)),new $e(28,new je(40,47),new je(7,48)),new $e(30,new je(43,24),new je(22,25)),new $e(30,new je(10,15),new je(67,16))),new aa(40,Int32Array.from([6,30,58,86,114,142,170]),new $e(30,new je(19,118),new je(6,119)),new $e(28,new je(18,47),new je(31,48)),new $e(30,new je(34,24),new je(34,25)),new $e(30,new je(20,15),new je(61,16)))];var gn;(function(ue){ue[ue.DATA_MASK_000=0]="DATA_MASK_000",ue[ue.DATA_MASK_001=1]="DATA_MASK_001",ue[ue.DATA_MASK_010=2]="DATA_MASK_010",ue[ue.DATA_MASK_011=3]="DATA_MASK_011",ue[ue.DATA_MASK_100=4]="DATA_MASK_100",ue[ue.DATA_MASK_101=5]="DATA_MASK_101",ue[ue.DATA_MASK_110=6]="DATA_MASK_110",ue[ue.DATA_MASK_111=7]="DATA_MASK_111"})(gn||(gn={}));class ni{constructor(m,y){this.value=m,this.isMasked=y}unmaskBitMatrix(m,y){for(let j=0;j<y;j++)for(let C=0;C<y;C++)this.isMasked(j,C)&&m.flip(C,j)}}ni.values=new Map([[gn.DATA_MASK_000,new ni(gn.DATA_MASK_000,(ue,m)=>(ue+m&1)===0)],[gn.DATA_MASK_001,new ni(gn.DATA_MASK_001,(ue,m)=>(ue&1)===0)],[gn.DATA_MASK_010,new ni(gn.DATA_MASK_010,(ue,m)=>m%3===0)],[gn.DATA_MASK_011,new ni(gn.DATA_MASK_011,(ue,m)=>(ue+m)%3===0)],[gn.DATA_MASK_100,new ni(gn.DATA_MASK_100,(ue,m)=>(Math.floor(ue/2)+Math.floor(m/3)&1)===0)],[gn.DATA_MASK_101,new ni(gn.DATA_MASK_101,(ue,m)=>ue*m%6===0)],[gn.DATA_MASK_110,new ni(gn.DATA_MASK_110,(ue,m)=>ue*m%6<3)],[gn.DATA_MASK_111,new ni(gn.DATA_MASK_111,(ue,m)=>(ue+m+ue*m%3&1)===0)]]);class ol{constructor(m){const y=m.getHeight();if(y<21||(y&3)!==1)throw new P;this.bitMatrix=m}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let m=0;for(let M=0;M<6;M++)m=this.copyBit(M,8,m);m=this.copyBit(7,8,m),m=this.copyBit(8,8,m),m=this.copyBit(8,7,m);for(let M=5;M>=0;M--)m=this.copyBit(8,M,m);const y=this.bitMatrix.getHeight();let j=0;const C=y-7;for(let M=y-1;M>=C;M--)j=this.copyBit(8,M,j);for(let M=y-8;M<y;M++)j=this.copyBit(M,8,j);if(this.parsedFormatInfo=an.decodeFormatInformation(m,j),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new P}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const m=this.bitMatrix.getHeight(),y=Math.floor((m-17)/4);if(y<=6)return aa.getVersionForNumber(y);let j=0;const C=m-11;for(let R=5;R>=0;R--)for(let N=m-9;N>=C;N--)j=this.copyBit(N,R,j);let M=aa.decodeVersionInformation(j);if(M!==null&&M.getDimensionForVersion()===m)return this.parsedVersion=M,M;j=0;for(let R=5;R>=0;R--)for(let N=m-9;N>=C;N--)j=this.copyBit(R,N,j);if(M=aa.decodeVersionInformation(j),M!==null&&M.getDimensionForVersion()===m)return this.parsedVersion=M,M;throw new P}copyBit(m,y,j){return(this.isMirror?this.bitMatrix.get(y,m):this.bitMatrix.get(m,y))?j<<1|1:j<<1}readCodewords(){const m=this.readFormatInformation(),y=this.readVersion(),j=ni.values.get(m.getDataMask()),C=this.bitMatrix.getHeight();j.unmaskBitMatrix(this.bitMatrix,C);const M=y.buildFunctionPattern();let R=!0;const N=new Uint8Array(y.getTotalCodewords());let A=0,L=0,B=0;for(let Y=C-1;Y>0;Y-=2){Y===6&&Y--;for(let te=0;te<C;te++){const se=R?C-1-te:te;for(let ce=0;ce<2;ce++)M.get(Y-ce,se)||(B++,L<<=1,this.bitMatrix.get(Y-ce,se)&&(L|=1),B===8&&(N[A++]=L,B=0,L=0))}R=!R}if(A!==y.getTotalCodewords())throw new P;return N}remask(){if(this.parsedFormatInfo===null)return;const m=ni.values[this.parsedFormatInfo.getDataMask()],y=this.bitMatrix.getHeight();m.unmaskBitMatrix(this.bitMatrix,y)}setMirror(m){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=m}mirror(){const m=this.bitMatrix;for(let y=0,j=m.getWidth();y<j;y++)for(let C=y+1,M=m.getHeight();C<M;C++)m.get(y,C)!==m.get(C,y)&&(m.flip(C,y),m.flip(y,C))}}class Eh{constructor(m,y){this.numDataCodewords=m,this.codewords=y}static getDataBlocks(m,y,j){if(m.length!==y.getTotalCodewords())throw new h;const C=y.getECBlocksForLevel(j);let M=0;const R=C.getECBlocks();for(const ce of R)M+=ce.getCount();const N=new Array(M);let A=0;for(const ce of R)for(let pe=0;pe<ce.getCount();pe++){const ye=ce.getDataCodewords(),ge=C.getECCodewordsPerBlock()+ye;N[A++]=new Eh(ye,new Uint8Array(ge))}const L=N[0].codewords.length;let B=N.length-1;for(;B>=0&&N[B].codewords.length!==L;)B--;B++;const Y=L-C.getECCodewordsPerBlock();let te=0;for(let ce=0;ce<Y;ce++)for(let pe=0;pe<A;pe++)N[pe].codewords[ce]=m[te++];for(let ce=B;ce<A;ce++)N[ce].codewords[Y]=m[te++];const se=N[0].codewords.length;for(let ce=Y;ce<se;ce++)for(let pe=0;pe<A;pe++){const ye=pe<B?ce:ce+1;N[pe].codewords[ye]=m[te++]}return N}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ra;(function(ue){ue[ue.TERMINATOR=0]="TERMINATOR",ue[ue.NUMERIC=1]="NUMERIC",ue[ue.ALPHANUMERIC=2]="ALPHANUMERIC",ue[ue.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",ue[ue.BYTE=4]="BYTE",ue[ue.ECI=5]="ECI",ue[ue.KANJI=6]="KANJI",ue[ue.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",ue[ue.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",ue[ue.HANZI=9]="HANZI"})(Ra||(Ra={}));class pa{constructor(m,y,j,C){this.value=m,this.stringValue=y,this.characterCountBitsForVersions=j,this.bits=C,pa.FOR_BITS.set(C,this),pa.FOR_VALUE.set(m,this)}static forBits(m){const y=pa.FOR_BITS.get(m);if(y===void 0)throw new h;return y}getCharacterCountBits(m){const y=m.getVersionNumber();let j;return y<=9?j=0:y<=26?j=1:j=2,this.characterCountBitsForVersions[j]}getValue(){return this.value}getBits(){return this.bits}equals(m){if(!(m instanceof pa))return!1;const y=m;return this.value===y.value}toString(){return this.stringValue}}pa.FOR_BITS=new Map,pa.FOR_VALUE=new Map,pa.TERMINATOR=new pa(Ra.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),pa.NUMERIC=new pa(Ra.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),pa.ALPHANUMERIC=new pa(Ra.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),pa.STRUCTURED_APPEND=new pa(Ra.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),pa.BYTE=new pa(Ra.BYTE,"BYTE",Int32Array.from([8,16,16]),4),pa.ECI=new pa(Ra.ECI,"ECI",Int32Array.from([0,0,0]),7),pa.KANJI=new pa(Ra.KANJI,"KANJI",Int32Array.from([8,10,12]),8),pa.FNC1_FIRST_POSITION=new pa(Ra.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),pa.FNC1_SECOND_POSITION=new pa(Ra.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),pa.HANZI=new pa(Ra.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ur{static decode(m,y,j,C){const M=new mn(m);let R=new J;const N=new Array;let A=-1,L=-1;try{let B=null,Y=!1,te;do{if(M.available()<4)te=pa.TERMINATOR;else{const se=M.readBits(4);te=pa.forBits(se)}switch(te){case pa.TERMINATOR:break;case pa.FNC1_FIRST_POSITION:case pa.FNC1_SECOND_POSITION:Y=!0;break;case pa.STRUCTURED_APPEND:if(M.available()<16)throw new P;A=M.readBits(8),L=M.readBits(8);break;case pa.ECI:const se=Ur.parseECIValue(M);if(B=G.getCharacterSetECIByValue(se),B===null)throw new P;break;case pa.HANZI:const ce=M.readBits(4),pe=M.readBits(te.getCharacterCountBits(y));ce===Ur.GB2312_SUBSET&&Ur.decodeHanziSegment(M,R,pe);break;default:const ye=M.readBits(te.getCharacterCountBits(y));switch(te){case pa.NUMERIC:Ur.decodeNumericSegment(M,R,ye);break;case pa.ALPHANUMERIC:Ur.decodeAlphanumericSegment(M,R,ye,Y);break;case pa.BYTE:Ur.decodeByteSegment(M,R,ye,B,N,C);break;case pa.KANJI:Ur.decodeKanjiSegment(M,R,ye);break;default:throw new P}break}}while(te!==pa.TERMINATOR)}catch{throw new P}return new Ce(m,R.toString(),N.length===0?null:N,j===null?null:j.toString(),A,L)}static decodeHanziSegment(m,y,j){if(j*13>m.available())throw new P;const C=new Uint8Array(2*j);let M=0;for(;j>0;){const R=m.readBits(13);let N=R/96<<8&4294967295|R%96;N<959?N+=41377:N+=42657,C[M]=N>>8&255,C[M+1]=N&255,M+=2,j--}try{y.append($.decode(C,ae.GB2312))}catch(R){throw new P(R)}}static decodeKanjiSegment(m,y,j){if(j*13>m.available())throw new P;const C=new Uint8Array(2*j);let M=0;for(;j>0;){const R=m.readBits(13);let N=R/192<<8&4294967295|R%192;N<7936?N+=33088:N+=49472,C[M]=N>>8,C[M+1]=N,M+=2,j--}try{y.append($.decode(C,ae.SHIFT_JIS))}catch(R){throw new P(R)}}static decodeByteSegment(m,y,j,C,M,R){if(8*j>m.available())throw new P;const N=new Uint8Array(j);for(let L=0;L<j;L++)N[L]=m.readBits(8);let A;C===null?A=ae.guessEncoding(N,R):A=C.getName();try{y.append($.decode(N,A))}catch(L){throw new P(L)}M.push(N)}static toAlphaNumericChar(m){if(m>=Ur.ALPHANUMERIC_CHARS.length)throw new P;return Ur.ALPHANUMERIC_CHARS[m]}static decodeAlphanumericSegment(m,y,j,C){const M=y.length();for(;j>1;){if(m.available()<11)throw new P;const R=m.readBits(11);y.append(Ur.toAlphaNumericChar(Math.floor(R/45))),y.append(Ur.toAlphaNumericChar(R%45)),j-=2}if(j===1){if(m.available()<6)throw new P;y.append(Ur.toAlphaNumericChar(m.readBits(6)))}if(C)for(let R=M;R<y.length();R++)y.charAt(R)==="%"&&(R<y.length()-1&&y.charAt(R+1)==="%"?y.deleteCharAt(R+1):y.setCharAt(R,""))}static decodeNumericSegment(m,y,j){for(;j>=3;){if(m.available()<10)throw new P;const C=m.readBits(10);if(C>=1e3)throw new P;y.append(Ur.toAlphaNumericChar(Math.floor(C/100))),y.append(Ur.toAlphaNumericChar(Math.floor(C/10)%10)),y.append(Ur.toAlphaNumericChar(C%10)),j-=3}if(j===2){if(m.available()<7)throw new P;const C=m.readBits(7);if(C>=100)throw new P;y.append(Ur.toAlphaNumericChar(Math.floor(C/10))),y.append(Ur.toAlphaNumericChar(C%10))}else if(j===1){if(m.available()<4)throw new P;const C=m.readBits(4);if(C>=10)throw new P;y.append(Ur.toAlphaNumericChar(C))}}static parseECIValue(m){const y=m.readBits(8);if((y&128)===0)return y&127;if((y&192)===128){const j=m.readBits(8);return(y&63)<<8&4294967295|j}if((y&224)===192){const j=m.readBits(16);return(y&31)<<16&4294967295|j}throw new P}}Ur.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ur.GB2312_SUBSET=1;class B0{constructor(m){this.mirrored=m}isMirrored(){return this.mirrored}applyMirroredCorrection(m){if(!this.mirrored||m===null||m.length<3)return;const y=m[0];m[0]=m[2],m[2]=y}}class Oi{constructor(){this.rsDecoder=new Re(Ee.QR_CODE_FIELD_256)}decodeBooleanArray(m,y){return this.decodeBitMatrix(U.parseFromBooleanArray(m),y)}decodeBitMatrix(m,y){const j=new ol(m);let C=null;try{return this.decodeBitMatrixParser(j,y)}catch(M){C=M}try{j.remask(),j.setMirror(!0),j.readVersion(),j.readFormatInformation(),j.mirror();const M=this.decodeBitMatrixParser(j,y);return M.setOther(new B0(!0)),M}catch(M){throw C!==null?C:M}}decodeBitMatrixParser(m,y){const j=m.readVersion(),C=m.readFormatInformation().getErrorCorrectionLevel(),M=m.readCodewords(),R=Eh.getDataBlocks(M,j,C);let N=0;for(const B of R)N+=B.getNumDataCodewords();const A=new Uint8Array(N);let L=0;for(const B of R){const Y=B.getCodewords(),te=B.getNumDataCodewords();this.correctErrors(Y,te);for(let se=0;se<te;se++)A[L++]=Y[se]}return Ur.decode(A,j,C,y)}correctErrors(m,y){const j=new Int32Array(m);try{this.rsDecoder.decode(j,m.length-y)}catch{throw new p}for(let C=0;C<y;C++)m[C]=j[C]}}class fs extends Ye{constructor(m,y,j){super(m,y),this.estimatedModuleSize=j}aboutEquals(m,y,j){if(Math.abs(y-this.getY())<=m&&Math.abs(j-this.getX())<=m){const C=Math.abs(m-this.estimatedModuleSize);return C<=1||C<=this.estimatedModuleSize}return!1}combineEstimate(m,y,j){const C=(this.getX()+y)/2,M=(this.getY()+m)/2,R=(this.estimatedModuleSize+j)/2;return new fs(C,M,R)}}class gi{constructor(m,y,j,C,M,R,N){this.image=m,this.startX=y,this.startY=j,this.width=C,this.height=M,this.moduleSize=R,this.resultPointCallback=N,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const m=this.startX,y=this.height,j=this.width,C=m+j,M=this.startY+y/2,R=new Int32Array(3),N=this.image;for(let A=0;A<y;A++){const L=M+((A&1)===0?Math.floor((A+1)/2):-Math.floor((A+1)/2));R[0]=0,R[1]=0,R[2]=0;let B=m;for(;B<C&&!N.get(B,L);)B++;let Y=0;for(;B<C;){if(N.get(B,L))if(Y===1)R[1]++;else if(Y===2){if(this.foundPatternCross(R)){const te=this.handlePossibleCenter(R,L,B);if(te!==null)return te}R[0]=R[2],R[1]=1,R[2]=0,Y=1}else R[++Y]++;else Y===1&&Y++,R[Y]++;B++}if(this.foundPatternCross(R)){const te=this.handlePossibleCenter(R,L,C);if(te!==null)return te}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new F}static centerFromEnd(m,y){return y-m[2]-m[1]/2}foundPatternCross(m){const y=this.moduleSize,j=y/2;for(let C=0;C<3;C++)if(Math.abs(y-m[C])>=j)return!1;return!0}crossCheckVertical(m,y,j,C){const M=this.image,R=M.getHeight(),N=this.crossCheckStateCount;N[0]=0,N[1]=0,N[2]=0;let A=m;for(;A>=0&&M.get(y,A)&&N[1]<=j;)N[1]++,A--;if(A<0||N[1]>j)return NaN;for(;A>=0&&!M.get(y,A)&&N[0]<=j;)N[0]++,A--;if(N[0]>j)return NaN;for(A=m+1;A<R&&M.get(y,A)&&N[1]<=j;)N[1]++,A++;if(A===R||N[1]>j)return NaN;for(;A<R&&!M.get(y,A)&&N[2]<=j;)N[2]++,A++;if(N[2]>j)return NaN;const L=N[0]+N[1]+N[2];return 5*Math.abs(L-C)>=2*C?NaN:this.foundPatternCross(N)?gi.centerFromEnd(N,A):NaN}handlePossibleCenter(m,y,j){const C=m[0]+m[1]+m[2],M=gi.centerFromEnd(m,j),R=this.crossCheckVertical(y,M,2*m[1],C);if(!isNaN(R)){const N=(m[0]+m[1]+m[2])/3;for(const L of this.possibleCenters)if(L.aboutEquals(N,R,M))return L.combineEstimate(R,M,N);const A=new fs(M,R,N);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null}}class qi extends Ye{constructor(m,y,j,C){super(m,y),this.estimatedModuleSize=j,this.count=C,C===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(m,y,j){if(Math.abs(y-this.getY())<=m&&Math.abs(j-this.getX())<=m){const C=Math.abs(m-this.estimatedModuleSize);return C<=1||C<=this.estimatedModuleSize}return!1}combineEstimate(m,y,j){const C=this.count+1,M=(this.count*this.getX()+y)/C,R=(this.count*this.getY()+m)/C,N=(this.count*this.estimatedModuleSize+j)/C;return new qi(M,R,N,C)}}class $d{constructor(m){this.bottomLeft=m[0],this.topLeft=m[1],this.topRight=m[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Xr{constructor(m,y){this.image=m,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=y}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(m){const y=m!=null&&m.get(O.TRY_HARDER)!==void 0,j=m!=null&&m.get(O.PURE_BARCODE)!==void 0,C=this.image,M=C.getHeight(),R=C.getWidth();let N=Math.floor(3*M/(4*Xr.MAX_MODULES));(N<Xr.MIN_SKIP||y)&&(N=Xr.MIN_SKIP);let A=!1;const L=new Int32Array(5);for(let Y=N-1;Y<M&&!A;Y+=N){L[0]=0,L[1]=0,L[2]=0,L[3]=0,L[4]=0;let te=0;for(let se=0;se<R;se++)if(C.get(se,Y))(te&1)===1&&te++,L[te]++;else if((te&1)===0)if(te===4)if(Xr.foundPatternCross(L)){if(this.handlePossibleCenter(L,Y,se,j)===!0)if(N=2,this.hasSkipped===!0)A=this.haveMultiplyConfirmedCenters();else{const pe=this.findRowSkip();pe>L[2]&&(Y+=pe-L[2]-N,se=R-1)}else{L[0]=L[2],L[1]=L[3],L[2]=L[4],L[3]=1,L[4]=0,te=3;continue}te=0,L[0]=0,L[1]=0,L[2]=0,L[3]=0,L[4]=0}else L[0]=L[2],L[1]=L[3],L[2]=L[4],L[3]=1,L[4]=0,te=3;else L[++te]++;else L[te]++;Xr.foundPatternCross(L)&&this.handlePossibleCenter(L,Y,R,j)===!0&&(N=L[0],this.hasSkipped&&(A=this.haveMultiplyConfirmedCenters()))}const B=this.selectBestPatterns();return Ye.orderBestPatterns(B),new $d(B)}static centerFromEnd(m,y){return y-m[4]-m[3]-m[2]/2}static foundPatternCross(m){let y=0;for(let M=0;M<5;M++){const R=m[M];if(R===0)return!1;y+=R}if(y<7)return!1;const j=y/7,C=j/2;return Math.abs(j-m[0])<C&&Math.abs(j-m[1])<C&&Math.abs(3*j-m[2])<3*C&&Math.abs(j-m[3])<C&&Math.abs(j-m[4])<C}getCrossCheckStateCount(){const m=this.crossCheckStateCount;return m[0]=0,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m}crossCheckDiagonal(m,y,j,C){const M=this.getCrossCheckStateCount();let R=0;const N=this.image;for(;m>=R&&y>=R&&N.get(y-R,m-R);)M[2]++,R++;if(m<R||y<R)return!1;for(;m>=R&&y>=R&&!N.get(y-R,m-R)&&M[1]<=j;)M[1]++,R++;if(m<R||y<R||M[1]>j)return!1;for(;m>=R&&y>=R&&N.get(y-R,m-R)&&M[0]<=j;)M[0]++,R++;if(M[0]>j)return!1;const A=N.getHeight(),L=N.getWidth();for(R=1;m+R<A&&y+R<L&&N.get(y+R,m+R);)M[2]++,R++;if(m+R>=A||y+R>=L)return!1;for(;m+R<A&&y+R<L&&!N.get(y+R,m+R)&&M[3]<j;)M[3]++,R++;if(m+R>=A||y+R>=L||M[3]>=j)return!1;for(;m+R<A&&y+R<L&&N.get(y+R,m+R)&&M[4]<j;)M[4]++,R++;if(M[4]>=j)return!1;const B=M[0]+M[1]+M[2]+M[3]+M[4];return Math.abs(B-C)<2*C&&Xr.foundPatternCross(M)}crossCheckVertical(m,y,j,C){const M=this.image,R=M.getHeight(),N=this.getCrossCheckStateCount();let A=m;for(;A>=0&&M.get(y,A);)N[2]++,A--;if(A<0)return NaN;for(;A>=0&&!M.get(y,A)&&N[1]<=j;)N[1]++,A--;if(A<0||N[1]>j)return NaN;for(;A>=0&&M.get(y,A)&&N[0]<=j;)N[0]++,A--;if(N[0]>j)return NaN;for(A=m+1;A<R&&M.get(y,A);)N[2]++,A++;if(A===R)return NaN;for(;A<R&&!M.get(y,A)&&N[3]<j;)N[3]++,A++;if(A===R||N[3]>=j)return NaN;for(;A<R&&M.get(y,A)&&N[4]<j;)N[4]++,A++;if(N[4]>=j)return NaN;const L=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(L-C)>=2*C?NaN:Xr.foundPatternCross(N)?Xr.centerFromEnd(N,A):NaN}crossCheckHorizontal(m,y,j,C){const M=this.image,R=M.getWidth(),N=this.getCrossCheckStateCount();let A=m;for(;A>=0&&M.get(A,y);)N[2]++,A--;if(A<0)return NaN;for(;A>=0&&!M.get(A,y)&&N[1]<=j;)N[1]++,A--;if(A<0||N[1]>j)return NaN;for(;A>=0&&M.get(A,y)&&N[0]<=j;)N[0]++,A--;if(N[0]>j)return NaN;for(A=m+1;A<R&&M.get(A,y);)N[2]++,A++;if(A===R)return NaN;for(;A<R&&!M.get(A,y)&&N[3]<j;)N[3]++,A++;if(A===R||N[3]>=j)return NaN;for(;A<R&&M.get(A,y)&&N[4]<j;)N[4]++,A++;if(N[4]>=j)return NaN;const L=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(L-C)>=C?NaN:Xr.foundPatternCross(N)?Xr.centerFromEnd(N,A):NaN}handlePossibleCenter(m,y,j,C){const M=m[0]+m[1]+m[2]+m[3]+m[4];let R=Xr.centerFromEnd(m,j),N=this.crossCheckVertical(y,Math.floor(R),m[2],M);if(!isNaN(N)&&(R=this.crossCheckHorizontal(Math.floor(R),Math.floor(N),m[2],M),!isNaN(R)&&(!C||this.crossCheckDiagonal(Math.floor(N),Math.floor(R),m[2],M)))){const A=M/7;let L=!1;const B=this.possibleCenters;for(let Y=0,te=B.length;Y<te;Y++){const se=B[Y];if(se.aboutEquals(A,N,R)){B[Y]=se.combineEstimate(N,R,A),L=!0;break}}if(!L){const Y=new qi(R,N,A);B.push(Y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(Y)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let y=null;for(const j of this.possibleCenters)if(j.getCount()>=Xr.CENTER_QUORUM)if(y==null)y=j;else return this.hasSkipped=!0,Math.floor((Math.abs(y.getX()-j.getX())-Math.abs(y.getY()-j.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let m=0,y=0;const j=this.possibleCenters.length;for(const R of this.possibleCenters)R.getCount()>=Xr.CENTER_QUORUM&&(m++,y+=R.getEstimatedModuleSize());if(m<3)return!1;const C=y/j;let M=0;for(const R of this.possibleCenters)M+=Math.abs(R.getEstimatedModuleSize()-C);return M<=.05*y}selectBestPatterns(){const m=this.possibleCenters.length;if(m<3)throw new F;const y=this.possibleCenters;let j;if(m>3){let C=0,M=0;for(const A of this.possibleCenters){const L=A.getEstimatedModuleSize();C+=L,M+=L*L}j=C/m;let R=Math.sqrt(M/m-j*j);y.sort((A,L)=>{const B=Math.abs(L.getEstimatedModuleSize()-j),Y=Math.abs(A.getEstimatedModuleSize()-j);return B<Y?-1:B>Y?1:0});const N=Math.max(.2*j,R);for(let A=0;A<y.length&&y.length>3;A++){const L=y[A];Math.abs(L.getEstimatedModuleSize()-j)>N&&(y.splice(A,1),A--)}}if(y.length>3){let C=0;for(const M of y)C+=M.getEstimatedModuleSize();j=C/y.length,y.sort((M,R)=>{if(R.getCount()===M.getCount()){const N=Math.abs(R.getEstimatedModuleSize()-j),A=Math.abs(M.getEstimatedModuleSize()-j);return N<A?1:N>A?-1:0}else return R.getCount()-M.getCount()}),y.splice(3)}return[y[0],y[1],y[2]]}}Xr.CENTER_QUORUM=2,Xr.MIN_SKIP=3,Xr.MAX_MODULES=57;class Dr{constructor(m){this.image=m}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(m){this.resultPointCallback=m==null?null:m.get(O.NEED_RESULT_POINT_CALLBACK);const j=new Xr(this.image,this.resultPointCallback).find(m);return this.processFinderPatternInfo(j)}processFinderPatternInfo(m){const y=m.getTopLeft(),j=m.getTopRight(),C=m.getBottomLeft(),M=this.calculateModuleSize(y,j,C);if(M<1)throw new F("No pattern found in proccess finder.");const R=Dr.computeDimension(y,j,C,M),N=aa.getProvisionalVersionForDimension(R),A=N.getDimensionForVersion()-7;let L=null;if(N.getAlignmentPatternCenters().length>0){const se=j.getX()-y.getX()+C.getX(),ce=j.getY()-y.getY()+C.getY(),pe=1-3/A,ye=Math.floor(y.getX()+pe*(se-y.getX())),ge=Math.floor(y.getY()+pe*(ce-y.getY()));for(let _e=4;_e<=16;_e<<=1)try{L=this.findAlignmentInRegion(M,ye,ge,_e);break}catch(ke){if(!(ke instanceof F))throw ke}}const B=Dr.createTransform(y,j,C,L,R),Y=Dr.sampleGrid(this.image,B,R);let te;return L===null?te=[C,y,j]:te=[C,y,j,L],new Ht(Y,te)}static createTransform(m,y,j,C,M){const R=M-3.5;let N,A,L,B;return C!==null?(N=C.getX(),A=C.getY(),L=R-3,B=L):(N=y.getX()-m.getX()+j.getX(),A=y.getY()-m.getY()+j.getY(),L=R,B=R),zt.quadrilateralToQuadrilateral(3.5,3.5,R,3.5,L,B,3.5,R,m.getX(),m.getY(),y.getX(),y.getY(),N,A,j.getX(),j.getY())}static sampleGrid(m,y,j){return ka.getInstance().sampleGridWithTransform(m,j,j,y)}static computeDimension(m,y,j,C){const M=yt.round(Ye.distance(m,y)/C),R=yt.round(Ye.distance(m,j)/C);let N=Math.floor((M+R)/2)+7;switch(N&3){case 0:N++;break;case 2:N--;break;case 3:throw new F("Dimensions could be not found.")}return N}calculateModuleSize(m,y,j){return(this.calculateModuleSizeOneWay(m,y)+this.calculateModuleSizeOneWay(m,j))/2}calculateModuleSizeOneWay(m,y){const j=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(m.getX()),Math.floor(m.getY()),Math.floor(y.getX()),Math.floor(y.getY())),C=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(y.getX()),Math.floor(y.getY()),Math.floor(m.getX()),Math.floor(m.getY()));return isNaN(j)?C/7:isNaN(C)?j/7:(j+C)/14}sizeOfBlackWhiteBlackRunBothWays(m,y,j,C){let M=this.sizeOfBlackWhiteBlackRun(m,y,j,C),R=1,N=m-(j-m);N<0?(R=m/(m-N),N=0):N>=this.image.getWidth()&&(R=(this.image.getWidth()-1-m)/(N-m),N=this.image.getWidth()-1);let A=Math.floor(y-(C-y)*R);return R=1,A<0?(R=y/(y-A),A=0):A>=this.image.getHeight()&&(R=(this.image.getHeight()-1-y)/(A-y),A=this.image.getHeight()-1),N=Math.floor(m+(N-m)*R),M+=this.sizeOfBlackWhiteBlackRun(m,y,N,A),M-1}sizeOfBlackWhiteBlackRun(m,y,j,C){const M=Math.abs(C-y)>Math.abs(j-m);if(M){let se=m;m=y,y=se,se=j,j=C,C=se}const R=Math.abs(j-m),N=Math.abs(C-y);let A=-R/2;const L=m<j?1:-1,B=y<C?1:-1;let Y=0;const te=j+L;for(let se=m,ce=y;se!==te;se+=L){const pe=M?ce:se,ye=M?se:ce;if(Y===1===this.image.get(pe,ye)){if(Y===2)return yt.distance(se,ce,m,y);Y++}if(A+=N,A>0){if(ce===C)break;ce+=B,A-=R}}return Y===2?yt.distance(j+L,C,m,y):NaN}findAlignmentInRegion(m,y,j,C){const M=Math.floor(C*m),R=Math.max(0,y-M),N=Math.min(this.image.getWidth()-1,y+M);if(N-R<m*3)throw new F("Alignment top exceeds estimated module size.");const A=Math.max(0,j-M),L=Math.min(this.image.getHeight()-1,j+M);if(L-A<m*3)throw new F("Alignment bottom exceeds estimated module size.");return new gi(this.image,R,A,N-R,L-A,m,this.resultPointCallback).find()}}class An{constructor(){this.decoder=new Oi}getDecoder(){return this.decoder}decode(m,y){let j,C;if(y!=null&&y.get(O.PURE_BARCODE)!==void 0){const A=An.extractPureBits(m.getBlackMatrix());j=this.decoder.decodeBitMatrix(A,y),C=An.NO_POINTS}else{const A=new Dr(m.getBlackMatrix()).detect(y);j=this.decoder.decodeBitMatrix(A.getBits(),y),C=A.getPoints()}j.getOther()instanceof B0&&j.getOther().applyMirroredCorrection(C);const M=new fe(j.getText(),j.getRawBytes(),void 0,C,ve.QR_CODE,void 0),R=j.getByteSegments();R!==null&&M.putMetadata(Se.BYTE_SEGMENTS,R);const N=j.getECLevel();return N!==null&&M.putMetadata(Se.ERROR_CORRECTION_LEVEL,N),j.hasStructuredAppend()&&(M.putMetadata(Se.STRUCTURED_APPEND_SEQUENCE,j.getStructuredAppendSequenceNumber()),M.putMetadata(Se.STRUCTURED_APPEND_PARITY,j.getStructuredAppendParity())),M}reset(){}static extractPureBits(m){const y=m.getTopLeftOnBit(),j=m.getBottomRightOnBit();if(y===null||j===null)throw new F;const C=this.moduleSize(y,m);let M=y[1],R=j[1],N=y[0],A=j[0];if(N>=A||M>=R)throw new F;if(R-M!==A-N&&(A=N+(R-M),A>=m.getWidth()))throw new F;const L=Math.round((A-N+1)/C),B=Math.round((R-M+1)/C);if(L<=0||B<=0)throw new F;if(B!==L)throw new F;const Y=Math.floor(C/2);M+=Y,N+=Y;const te=N+Math.floor((L-1)*C)-A;if(te>0){if(te>Y)throw new F;N-=te}const se=M+Math.floor((B-1)*C)-R;if(se>0){if(se>Y)throw new F;M-=se}const ce=new U(L,B);for(let pe=0;pe<B;pe++){const ye=M+Math.floor(pe*C);for(let ge=0;ge<L;ge++)m.get(N+Math.floor(ge*C),ye)&&ce.set(ge,pe)}return ce}static moduleSize(m,y){const j=y.getHeight(),C=y.getWidth();let M=m[0],R=m[1],N=!0,A=0;for(;M<C&&R<j;){if(N!==y.get(M,R)){if(++A===5)break;N=!N}M++,R++}if(M===C||R===j)throw new F;return(M-m[0])/7}}An.NO_POINTS=new Array;class xa{PDF417Common(){}static getBitCountSum(m){return yt.sum(m)}static toIntArray(m){if(m==null||!m.length)return xa.EMPTY_INT_ARRAY;const y=new Int32Array(m.length);let j=0;for(const C of m)y[j++]=C;return y}static getCodeword(m){const y=k.binarySearch(xa.SYMBOL_TABLE,m&262143);return y<0?-1:(xa.CODEWORD_TABLE[y]-1)%xa.NUMBER_OF_CODEWORDS}}xa.NUMBER_OF_CODEWORDS=929,xa.MAX_CODEWORDS_IN_BARCODE=xa.NUMBER_OF_CODEWORDS-1,xa.MIN_ROWS_IN_BARCODE=3,xa.MAX_ROWS_IN_BARCODE=90,xa.MODULES_IN_CODEWORD=17,xa.MODULES_IN_STOP_PATTERN=18,xa.BARS_IN_MODULE=8,xa.EMPTY_INT_ARRAY=new Int32Array([]),xa.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),xa.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Pl{constructor(m,y){this.bits=m,this.points=y}getBits(){return this.bits}getPoints(){return this.points}}class Ma{static detectMultiple(m,y,j){let C=m.getBlackMatrix(),M=Ma.detect(j,C);return M.length||(C=C.clone(),C.rotate180(),M=Ma.detect(j,C)),new Pl(C,M)}static detect(m,y){const j=new Array;let C=0,M=0,R=!1;for(;C<y.getHeight();){const N=Ma.findVertices(y,C,M);if(N[0]==null&&N[3]==null){if(!R)break;R=!1,M=0;for(const A of j)A[1]!=null&&(C=Math.trunc(Math.max(C,A[1].getY()))),A[3]!=null&&(C=Math.max(C,Math.trunc(A[3].getY())));C+=Ma.ROW_STEP;continue}if(R=!0,j.push(N),!m)break;N[2]!=null?(M=Math.trunc(N[2].getX()),C=Math.trunc(N[2].getY())):(M=Math.trunc(N[4].getX()),C=Math.trunc(N[4].getY()))}return j}static findVertices(m,y,j){const C=m.getHeight(),M=m.getWidth(),R=new Array(8);return Ma.copyToResult(R,Ma.findRowsWithPattern(m,C,M,y,j,Ma.START_PATTERN),Ma.INDEXES_START_PATTERN),R[4]!=null&&(j=Math.trunc(R[4].getX()),y=Math.trunc(R[4].getY())),Ma.copyToResult(R,Ma.findRowsWithPattern(m,C,M,y,j,Ma.STOP_PATTERN),Ma.INDEXES_STOP_PATTERN),R}static copyToResult(m,y,j){for(let C=0;C<j.length;C++)m[j[C]]=y[C]}static findRowsWithPattern(m,y,j,C,M,R){const N=new Array(4);let A=!1;const L=new Int32Array(R.length);for(;C<y;C+=Ma.ROW_STEP){let Y=Ma.findGuardPattern(m,M,C,j,!1,R,L);if(Y!=null){for(;C>0;){const te=Ma.findGuardPattern(m,M,--C,j,!1,R,L);if(te!=null)Y=te;else{C++;break}}N[0]=new Ye(Y[0],C),N[1]=new Ye(Y[1],C),A=!0;break}}let B=C+1;if(A){let Y=0,te=Int32Array.from([Math.trunc(N[0].getX()),Math.trunc(N[1].getX())]);for(;B<y;B++){const se=Ma.findGuardPattern(m,te[0],B,j,!1,R,L);if(se!=null&&Math.abs(te[0]-se[0])<Ma.MAX_PATTERN_DRIFT&&Math.abs(te[1]-se[1])<Ma.MAX_PATTERN_DRIFT)te=se,Y=0;else{if(Y>Ma.SKIPPED_ROW_COUNT_MAX)break;Y++}}B-=Y+1,N[2]=new Ye(te[0],B),N[3]=new Ye(te[1],B)}return B-C<Ma.BARCODE_MIN_HEIGHT&&k.fill(N,null),N}static findGuardPattern(m,y,j,C,M,R,N){k.fillWithin(N,0,N.length,0);let A=y,L=0;for(;m.get(A,j)&&A>0&&L++<Ma.MAX_PIXEL_DRIFT;)A--;let B=A,Y=0,te=R.length;for(let se=M;B<C;B++)if(m.get(B,j)!==se)N[Y]++;else{if(Y===te-1){if(Ma.patternMatchVariance(N,R,Ma.MAX_INDIVIDUAL_VARIANCE)<Ma.MAX_AVG_VARIANCE)return new Int32Array([A,B]);A+=N[0]+N[1],b.arraycopy(N,2,N,0,Y-1),N[Y-1]=0,N[Y]=0,Y--}else Y++;N[Y]=1,se=!se}return Y===te-1&&Ma.patternMatchVariance(N,R,Ma.MAX_INDIVIDUAL_VARIANCE)<Ma.MAX_AVG_VARIANCE?new Int32Array([A,B-1]):null}static patternMatchVariance(m,y,j){let C=m.length,M=0,R=0;for(let L=0;L<C;L++)M+=m[L],R+=y[L];if(M<R)return 1/0;let N=M/R;j*=N;let A=0;for(let L=0;L<C;L++){let B=m[L],Y=y[L]*N,te=B>Y?B-Y:Y-B;if(te>j)return 1/0;A+=te}return A/M}}Ma.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ma.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ma.MAX_AVG_VARIANCE=.42,Ma.MAX_INDIVIDUAL_VARIANCE=.8,Ma.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ma.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ma.MAX_PIXEL_DRIFT=3,Ma.MAX_PATTERN_DRIFT=5,Ma.SKIPPED_ROW_COUNT_MAX=25,Ma.ROW_STEP=5,Ma.BARCODE_MIN_HEIGHT=10;class xr{constructor(m,y){if(y.length===0)throw new h;this.field=m;let j=y.length;if(j>1&&y[0]===0){let C=1;for(;C<j&&y[C]===0;)C++;C===j?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(j-C),b.arraycopy(y,C,this.coefficients,0,this.coefficients.length))}else this.coefficients=y}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(m){return this.coefficients[this.coefficients.length-1-m]}evaluateAt(m){if(m===0)return this.getCoefficient(0);if(m===1){let C=0;for(let M of this.coefficients)C=this.field.add(C,M);return C}let y=this.coefficients[0],j=this.coefficients.length;for(let C=1;C<j;C++)y=this.field.add(this.field.multiply(m,y),this.coefficients[C]);return y}add(m){if(!this.field.equals(m.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero())return m;if(m.isZero())return this;let y=this.coefficients,j=m.coefficients;if(y.length>j.length){let R=y;y=j,j=R}let C=new Int32Array(j.length),M=j.length-y.length;b.arraycopy(j,0,C,0,M);for(let R=M;R<j.length;R++)C[R]=this.field.add(y[R-M],j[R]);return new xr(this.field,C)}subtract(m){if(!this.field.equals(m.field))throw new h("ModulusPolys do not have same ModulusGF field");return m.isZero()?this:this.add(m.negative())}multiply(m){return m instanceof xr?this.multiplyOther(m):this.multiplyScalar(m)}multiplyOther(m){if(!this.field.equals(m.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero()||m.isZero())return new xr(this.field,new Int32Array([0]));let y=this.coefficients,j=y.length,C=m.coefficients,M=C.length,R=new Int32Array(j+M-1);for(let N=0;N<j;N++){let A=y[N];for(let L=0;L<M;L++)R[N+L]=this.field.add(R[N+L],this.field.multiply(A,C[L]))}return new xr(this.field,R)}negative(){let m=this.coefficients.length,y=new Int32Array(m);for(let j=0;j<m;j++)y[j]=this.field.subtract(0,this.coefficients[j]);return new xr(this.field,y)}multiplyScalar(m){if(m===0)return new xr(this.field,new Int32Array([0]));if(m===1)return this;let y=this.coefficients.length,j=new Int32Array(y);for(let C=0;C<y;C++)j[C]=this.field.multiply(this.coefficients[C],m);return new xr(this.field,j)}multiplyByMonomial(m,y){if(m<0)throw new h;if(y===0)return new xr(this.field,new Int32Array([0]));let j=this.coefficients.length,C=new Int32Array(j+m);for(let M=0;M<j;M++)C[M]=this.field.multiply(this.coefficients[M],y);return new xr(this.field,C)}toString(){let m=new J;for(let y=this.getDegree();y>=0;y--){let j=this.getCoefficient(y);j!==0&&(j<0?(m.append(" - "),j=-j):m.length()>0&&m.append(" + "),(y===0||j!==1)&&m.append(j),y!==0&&(y===1?m.append("x"):(m.append("x^"),m.append(y))))}return m.toString()}}class Dh{add(m,y){return(m+y)%this.modulus}subtract(m,y){return(this.modulus+m-y)%this.modulus}exp(m){return this.expTable[m]}log(m){if(m===0)throw new h;return this.logTable[m]}inverse(m){if(m===0)throw new be;return this.expTable[this.modulus-this.logTable[m]-1]}multiply(m,y){return m===0||y===0?0:this.expTable[(this.logTable[m]+this.logTable[y])%(this.modulus-1)]}getSize(){return this.modulus}equals(m){return m===this}}class ii extends Dh{constructor(m,y){super(),this.modulus=m,this.expTable=new Int32Array(m),this.logTable=new Int32Array(m);let j=1;for(let C=0;C<m;C++)this.expTable[C]=j,j=j*y%m;for(let C=0;C<m-1;C++)this.logTable[this.expTable[C]]=C;this.zero=new xr(this,new Int32Array([0])),this.one=new xr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(m,y){if(m<0)throw new h;if(y===0)return this.zero;let j=new Int32Array(m+1);return j[0]=y,new xr(this,j)}}ii.PDF417_GF=new ii(xa.NUMBER_OF_CODEWORDS,3);class ps{constructor(){this.field=ii.PDF417_GF}decode(m,y,j){let C=new xr(this.field,m),M=new Int32Array(y),R=!1;for(let ce=y;ce>0;ce--){let pe=C.evaluateAt(this.field.exp(ce));M[y-ce]=pe,pe!==0&&(R=!0)}if(!R)return 0;let N=this.field.getOne();if(j!=null)for(const ce of j){let pe=this.field.exp(m.length-1-ce),ye=new xr(this.field,new Int32Array([this.field.subtract(0,pe),1]));N=N.multiply(ye)}let A=new xr(this.field,M),L=this.runEuclideanAlgorithm(this.field.buildMonomial(y,1),A,y),B=L[0],Y=L[1],te=this.findErrorLocations(B),se=this.findErrorMagnitudes(Y,B,te);for(let ce=0;ce<te.length;ce++){let pe=m.length-1-this.field.log(te[ce]);if(pe<0)throw p.getChecksumInstance();m[pe]=this.field.subtract(m[pe],se[ce])}return te.length}runEuclideanAlgorithm(m,y,j){if(m.getDegree()<y.getDegree()){let te=m;m=y,y=te}let C=m,M=y,R=this.field.getZero(),N=this.field.getOne();for(;M.getDegree()>=Math.round(j/2);){let te=C,se=R;if(C=M,R=N,C.isZero())throw p.getChecksumInstance();M=te;let ce=this.field.getZero(),pe=C.getCoefficient(C.getDegree()),ye=this.field.inverse(pe);for(;M.getDegree()>=C.getDegree()&&!M.isZero();){let ge=M.getDegree()-C.getDegree(),_e=this.field.multiply(M.getCoefficient(M.getDegree()),ye);ce=ce.add(this.field.buildMonomial(ge,_e)),M=M.subtract(C.multiplyByMonomial(ge,_e))}N=ce.multiply(R).subtract(se).negative()}let A=N.getCoefficient(0);if(A===0)throw p.getChecksumInstance();let L=this.field.inverse(A),B=N.multiply(L),Y=M.multiply(L);return[B,Y]}findErrorLocations(m){let y=m.getDegree(),j=new Int32Array(y),C=0;for(let M=1;M<this.field.getSize()&&C<y;M++)m.evaluateAt(M)===0&&(j[C]=this.field.inverse(M),C++);if(C!==y)throw p.getChecksumInstance();return j}findErrorMagnitudes(m,y,j){let C=y.getDegree(),M=new Int32Array(C);for(let L=1;L<=C;L++)M[C-L]=this.field.multiply(L,y.getCoefficient(L));let R=new xr(this.field,M),N=j.length,A=new Int32Array(N);for(let L=0;L<N;L++){let B=this.field.inverse(j[L]),Y=this.field.subtract(0,m.evaluateAt(B)),te=this.field.inverse(R.evaluateAt(B));A[L]=this.field.multiply(Y,te)}return A}}class Es{constructor(m,y,j,C,M){m instanceof Es?this.constructor_2(m):this.constructor_1(m,y,j,C,M)}constructor_1(m,y,j,C,M){const R=y==null||j==null,N=C==null||M==null;if(R&&N)throw new F;R?(y=new Ye(0,C.getY()),j=new Ye(0,M.getY())):N&&(C=new Ye(m.getWidth()-1,y.getY()),M=new Ye(m.getWidth()-1,j.getY())),this.image=m,this.topLeft=y,this.bottomLeft=j,this.topRight=C,this.bottomRight=M,this.minX=Math.trunc(Math.min(y.getX(),j.getX())),this.maxX=Math.trunc(Math.max(C.getX(),M.getX())),this.minY=Math.trunc(Math.min(y.getY(),C.getY())),this.maxY=Math.trunc(Math.max(j.getY(),M.getY()))}constructor_2(m){this.image=m.image,this.topLeft=m.getTopLeft(),this.bottomLeft=m.getBottomLeft(),this.topRight=m.getTopRight(),this.bottomRight=m.getBottomRight(),this.minX=m.getMinX(),this.maxX=m.getMaxX(),this.minY=m.getMinY(),this.maxY=m.getMaxY()}static merge(m,y){return m==null?y:y==null?m:new Es(m.image,m.topLeft,m.bottomLeft,y.topRight,y.bottomRight)}addMissingRows(m,y,j){let C=this.topLeft,M=this.bottomLeft,R=this.topRight,N=this.bottomRight;if(m>0){let A=j?this.topLeft:this.topRight,L=Math.trunc(A.getY()-m);L<0&&(L=0);let B=new Ye(A.getX(),L);j?C=B:R=B}if(y>0){let A=j?this.bottomLeft:this.bottomRight,L=Math.trunc(A.getY()+y);L>=this.image.getHeight()&&(L=this.image.getHeight()-1);let B=new Ye(A.getX(),L);j?M=B:N=B}return new Es(this.image,C,M,R,N)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Bl{constructor(m,y,j,C){this.columnCount=m,this.errorCorrectionLevel=C,this.rowCountUpperPart=y,this.rowCountLowerPart=j,this.rowCount=y+j}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ds{constructor(){this.buffer=""}static form(m,y){let j=-1;function C(R,N,A,L,B,Y){if(R==="%%")return"%";if(y[++j]===void 0)return;R=L?parseInt(L.substr(1)):void 0;let te=B?parseInt(B.substr(1)):void 0,se;switch(Y){case"s":se=y[j];break;case"c":se=y[j][0];break;case"f":se=parseFloat(y[j]).toFixed(R);break;case"p":se=parseFloat(y[j]).toPrecision(R);break;case"e":se=parseFloat(y[j]).toExponential(R);break;case"x":se=parseInt(y[j]).toString(te||16);break;case"d":se=parseFloat(parseInt(y[j],te||10).toPrecision(R)).toFixed(0);break}se=typeof se=="object"?JSON.stringify(se):(+se).toString(te);let ce=parseInt(A),pe=A&&A[0]+""=="0"?"0":" ";for(;se.length<ce;)se=N!==void 0?se+pe:pe+se;return se}let M=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return m.replace(M,C)}format(m,...y){this.buffer+=Ds.form(m,y)}toString(){return this.buffer}}class Is{constructor(m){this.boundingBox=new Es(m),this.codewords=new Array(m.getMaxY()-m.getMinY()+1)}getCodewordNearby(m){let y=this.getCodeword(m);if(y!=null)return y;for(let j=1;j<Is.MAX_NEARBY_DISTANCE;j++){let C=this.imageRowToCodewordIndex(m)-j;if(C>=0&&(y=this.codewords[C],y!=null)||(C=this.imageRowToCodewordIndex(m)+j,C<this.codewords.length&&(y=this.codewords[C],y!=null)))return y}return null}imageRowToCodewordIndex(m){return m-this.boundingBox.getMinY()}setCodeword(m,y){this.codewords[this.imageRowToCodewordIndex(m)]=y}getCodeword(m){return this.codewords[this.imageRowToCodewordIndex(m)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const m=new Ds;let y=0;for(const j of this.codewords){if(j==null){m.format("%3d:    |   %n",y++);continue}m.format("%3d: %3d|%3d%n",y++,j.getRowNumber(),j.getValue())}return m.toString()}}Is.MAX_NEARBY_DISTANCE=5;class Qs{constructor(){this.values=new Map}setValue(m){m=Math.trunc(m);let y=this.values.get(m);y==null&&(y=0),y++,this.values.set(m,y)}getValue(){let m=-1,y=new Array;for(const[j,C]of this.values.entries()){const M={getKey:()=>j,getValue:()=>C};M.getValue()>m?(m=M.getValue(),y=[],y.push(M.getKey())):M.getValue()===m&&y.push(M.getKey())}return xa.toIntArray(y)}getConfidence(m){return this.values.get(m)}}class Ih extends Is{constructor(m,y){super(m),this._isLeft=y}setRowNumbers(){for(let m of this.getCodewords())m?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(m){let y=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(y,m);let j=this.getBoundingBox(),C=this._isLeft?j.getTopLeft():j.getTopRight(),M=this._isLeft?j.getBottomLeft():j.getBottomRight(),R=this.imageRowToCodewordIndex(Math.trunc(C.getY())),N=this.imageRowToCodewordIndex(Math.trunc(M.getY())),A=-1,L=1,B=0;for(let Y=R;Y<N;Y++){if(y[Y]==null)continue;let te=y[Y],se=te.getRowNumber()-A;if(se===0)B++;else if(se===1)L=Math.max(L,B),B=1,A=te.getRowNumber();else if(se<0||te.getRowNumber()>=m.getRowCount()||se>Y)y[Y]=null;else{let ce;L>2?ce=(L-2)*se:ce=se;let pe=ce>=Y;for(let ye=1;ye<=ce&&!pe;ye++)pe=y[Y-ye]!=null;pe?y[Y]=null:(A=te.getRowNumber(),B=1)}}}getRowHeights(){let m=this.getBarcodeMetadata();if(m==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(m);let y=new Int32Array(m.getRowCount());for(let j of this.getCodewords())if(j!=null){let C=j.getRowNumber();if(C>=y.length)continue;y[C]++}return y}adjustIncompleteIndicatorColumnRowNumbers(m){let y=this.getBoundingBox(),j=this._isLeft?y.getTopLeft():y.getTopRight(),C=this._isLeft?y.getBottomLeft():y.getBottomRight(),M=this.imageRowToCodewordIndex(Math.trunc(j.getY())),R=this.imageRowToCodewordIndex(Math.trunc(C.getY())),N=this.getCodewords(),A=-1;for(let L=M;L<R;L++){if(N[L]==null)continue;let B=N[L];B.setRowNumberAsRowIndicatorColumn();let Y=B.getRowNumber()-A;Y===0||(Y===1?A=B.getRowNumber():B.getRowNumber()>=m.getRowCount()?N[L]=null:A=B.getRowNumber())}}getBarcodeMetadata(){let m=this.getCodewords(),y=new Qs,j=new Qs,C=new Qs,M=new Qs;for(let N of m){if(N==null)continue;N.setRowNumberAsRowIndicatorColumn();let A=N.getValue()%30,L=N.getRowNumber();switch(this._isLeft||(L+=2),L%3){case 0:j.setValue(A*3+1);break;case 1:M.setValue(A/3),C.setValue(A%3);break;case 2:y.setValue(A+1);break}}if(y.getValue().length===0||j.getValue().length===0||C.getValue().length===0||M.getValue().length===0||y.getValue()[0]<1||j.getValue()[0]+C.getValue()[0]<xa.MIN_ROWS_IN_BARCODE||j.getValue()[0]+C.getValue()[0]>xa.MAX_ROWS_IN_BARCODE)return null;let R=new Bl(y.getValue()[0],j.getValue()[0],C.getValue()[0],M.getValue()[0]);return this.removeIncorrectCodewords(m,R),R}removeIncorrectCodewords(m,y){for(let j=0;j<m.length;j++){let C=m[j];if(m[j]==null)continue;let M=C.getValue()%30,R=C.getRowNumber();if(R>y.getRowCount()){m[j]=null;continue}switch(this._isLeft||(R+=2),R%3){case 0:M*3+1!==y.getRowCountUpperPart()&&(m[j]=null);break;case 1:(Math.trunc(M/3)!==y.getErrorCorrectionLevel()||M%3!==y.getRowCountLowerPart())&&(m[j]=null);break;case 2:M+1!==y.getColumnCount()&&(m[j]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class dn{constructor(m,y){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=m,this.barcodeColumnCount=m.getColumnCount(),this.boundingBox=y,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let m=xa.MAX_CODEWORDS_IN_BARCODE,y;do y=m,m=this.adjustRowNumbersAndGetCount();while(m>0&&m<y);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(m){m?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let m=this.adjustRowNumbersByRow();if(m===0)return 0;for(let y=1;y<this.barcodeColumnCount+1;y++){let j=this.detectionResultColumns[y].getCodewords();for(let C=0;C<j.length;C++)j[C]!=null&&(j[C].hasValidRowNumber()||this.adjustRowNumbers(y,C,j))}return m}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let m=this.detectionResultColumns[0].getCodewords(),y=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let j=0;j<m.length;j++)if(m[j]!=null&&y[j]!=null&&m[j].getRowNumber()===y[j].getRowNumber())for(let C=1;C<=this.barcodeColumnCount;C++){let M=this.detectionResultColumns[C].getCodewords()[j];M!=null&&(M.setRowNumber(m[j].getRowNumber()),M.hasValidRowNumber()||(this.detectionResultColumns[C].getCodewords()[j]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let m=0,y=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let j=0;j<y.length;j++){if(y[j]==null)continue;let C=y[j].getRowNumber(),M=0;for(let R=this.barcodeColumnCount+1;R>0&&M<this.ADJUST_ROW_NUMBER_SKIP;R--){let N=this.detectionResultColumns[R].getCodewords()[j];N!=null&&(M=dn.adjustRowNumberIfValid(C,M,N),N.hasValidRowNumber()||m++)}}return m}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let m=0,y=this.detectionResultColumns[0].getCodewords();for(let j=0;j<y.length;j++){if(y[j]==null)continue;let C=y[j].getRowNumber(),M=0;for(let R=1;R<this.barcodeColumnCount+1&&M<this.ADJUST_ROW_NUMBER_SKIP;R++){let N=this.detectionResultColumns[R].getCodewords()[j];N!=null&&(M=dn.adjustRowNumberIfValid(C,M,N),N.hasValidRowNumber()||m++)}}return m}static adjustRowNumberIfValid(m,y,j){return j==null||j.hasValidRowNumber()||(j.isValidRowNumber(m)?(j.setRowNumber(m),y=0):++y),y}adjustRowNumbers(m,y,j){if(!this.detectionResultColumns[m-1])return;let C=j[y],M=this.detectionResultColumns[m-1].getCodewords(),R=M;this.detectionResultColumns[m+1]!=null&&(R=this.detectionResultColumns[m+1].getCodewords());let N=new Array(14);N[2]=M[y],N[3]=R[y],y>0&&(N[0]=j[y-1],N[4]=M[y-1],N[5]=R[y-1]),y>1&&(N[8]=j[y-2],N[10]=M[y-2],N[11]=R[y-2]),y<j.length-1&&(N[1]=j[y+1],N[6]=M[y+1],N[7]=R[y+1]),y<j.length-2&&(N[9]=j[y+2],N[12]=M[y+2],N[13]=R[y+2]);for(let A of N)if(dn.adjustRowNumber(C,A))return}static adjustRowNumber(m,y){return y==null?!1:y.hasValidRowNumber()&&y.getBucket()===m.getBucket()?(m.setRowNumber(y.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(m){this.boundingBox=m}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(m,y){this.detectionResultColumns[m]=y}getDetectionResultColumn(m){return this.detectionResultColumns[m]}toString(){let m=this.detectionResultColumns[0];m==null&&(m=this.detectionResultColumns[this.barcodeColumnCount+1]);let y=new Ds;for(let j=0;j<m.getCodewords().length;j++){y.format("CW %3d:",j);for(let C=0;C<this.barcodeColumnCount+2;C++){if(this.detectionResultColumns[C]==null){y.format("    |   ");continue}let M=this.detectionResultColumns[C].getCodewords()[j];if(M==null){y.format("    |   ");continue}y.format(" %3d|%3d",M.getRowNumber(),M.getValue())}y.format("%n")}return y.toString()}}class xs{constructor(m,y,j,C){this.rowNumber=xs.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(m),this.endX=Math.trunc(y),this.bucket=Math.trunc(j),this.value=Math.trunc(C)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(m){return m!==xs.BARCODE_ROW_UNKNOWN&&this.bucket===m%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(m){this.rowNumber=m}toString(){return this.rowNumber+"|"+this.value}}xs.BARCODE_ROW_UNKNOWN=-1;class Vn{static initialize(){for(let m=0;m<xa.SYMBOL_TABLE.length;m++){let y=xa.SYMBOL_TABLE[m],j=y&1;for(let C=0;C<xa.BARS_IN_MODULE;C++){let M=0;for(;(y&1)===j;)M+=1,y>>=1;j=y&1,Vn.RATIOS_TABLE[m]||(Vn.RATIOS_TABLE[m]=new Array(xa.BARS_IN_MODULE)),Vn.RATIOS_TABLE[m][xa.BARS_IN_MODULE-C-1]=Math.fround(M/xa.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(m){let y=Vn.getDecodedCodewordValue(Vn.sampleBitCounts(m));return y!==-1?y:Vn.getClosestDecodedValue(m)}static sampleBitCounts(m){let y=yt.sum(m),j=new Int32Array(xa.BARS_IN_MODULE),C=0,M=0;for(let R=0;R<xa.MODULES_IN_CODEWORD;R++){let N=y/(2*xa.MODULES_IN_CODEWORD)+R*y/xa.MODULES_IN_CODEWORD;M+m[C]<=N&&(M+=m[C],C++),j[C]++}return j}static getDecodedCodewordValue(m){let y=Vn.getBitValue(m);return xa.getCodeword(y)===-1?-1:y}static getBitValue(m){let y=0;for(let j=0;j<m.length;j++)for(let C=0;C<m[j];C++)y=y<<1|(j%2===0?1:0);return Math.trunc(y)}static getClosestDecodedValue(m){let y=yt.sum(m),j=new Array(xa.BARS_IN_MODULE);if(y>1)for(let R=0;R<j.length;R++)j[R]=Math.fround(m[R]/y);let C=Ue.MAX_VALUE,M=-1;this.bSymbolTableReady||Vn.initialize();for(let R=0;R<Vn.RATIOS_TABLE.length;R++){let N=0,A=Vn.RATIOS_TABLE[R];for(let L=0;L<xa.BARS_IN_MODULE;L++){let B=Math.fround(A[L]-j[L]);if(N+=Math.fround(B*B),N>=C)break}N<C&&(C=N,M=xa.SYMBOL_TABLE[R])}return M}}Vn.bSymbolTableReady=!1,Vn.RATIOS_TABLE=new Array(xa.SYMBOL_TABLE.length).map(ue=>new Array(xa.BARS_IN_MODULE));class Js{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(m){this.segmentIndex=m}getFileId(){return this.fileId}setFileId(m){this.fileId=m}getOptionalData(){return this.optionalData}setOptionalData(m){this.optionalData=m}isLastSegment(){return this.lastSegment}setLastSegment(m){this.lastSegment=m}getSegmentCount(){return this.segmentCount}setSegmentCount(m){this.segmentCount=m}getSender(){return this.sender||null}setSender(m){this.sender=m}getAddressee(){return this.addressee||null}setAddressee(m){this.addressee=m}getFileName(){return this.fileName}setFileName(m){this.fileName=m}getFileSize(){return this.fileSize}setFileSize(m){this.fileSize=m}getChecksum(){return this.checksum}setChecksum(m){this.checksum=m}getTimestamp(){return this.timestamp}setTimestamp(m){this.timestamp=m}}class Bc{static parseLong(m,y=void 0){return parseInt(m,y)}}class zl extends d{}zl.kind="NullPointerException";class Rh{writeBytes(m){this.writeBytesOffset(m,0,m.length)}writeBytesOffset(m,y,j){if(m==null)throw new zl;if(y<0||y>m.length||j<0||y+j>m.length||y+j<0)throw new w;if(j===0)return;for(let C=0;C<j;C++)this.write(m[y+C])}flush(){}close(){}}class zc extends d{}class Yd extends Rh{constructor(m=32){if(super(),this.count=0,m<0)throw new h("Negative initial size: "+m);this.buf=new Uint8Array(m)}ensureCapacity(m){m-this.buf.length>0&&this.grow(m)}grow(m){let j=this.buf.length<<1;if(j-m<0&&(j=m),j<0){if(m<0)throw new zc;j=T.MAX_VALUE}this.buf=k.copyOfUint8Array(this.buf,j)}write(m){this.ensureCapacity(this.count+1),this.buf[this.count]=m,this.count+=1}writeBytesOffset(m,y,j){if(y<0||y>m.length||j<0||y+j-m.length>0)throw new w;this.ensureCapacity(this.count+j),b.arraycopy(m,y,this.buf,this.count,j),this.count+=j}writeTo(m){m.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return k.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(m){return m?typeof m=="string"?this.toString_string(m):this.toString_number(m):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(m){return new String(this.buf).toString()}toString_number(m){return new String(this.buf).toString()}close(){}}var yr;(function(ue){ue[ue.ALPHA=0]="ALPHA",ue[ue.LOWER=1]="LOWER",ue[ue.MIXED=2]="MIXED",ue[ue.PUNCT=3]="PUNCT",ue[ue.ALPHA_SHIFT=4]="ALPHA_SHIFT",ue[ue.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(yr||(yr={}));function qd(){if(typeof window<"u")return window.BigInt||null;if(typeof kg<"u")return kg.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Fc;function ms(ue){if(typeof Fc>"u"&&(Fc=qd()),Fc===null)throw new Error("BigInt is not supported!");return Fc(ue)}function Fl(){let ue=[];ue[0]=ms(1);let m=ms(900);ue[1]=m;for(let y=2;y<16;y++)ue[y]=ue[y-1]*m;return ue}class at{static decode(m,y){let j=new J(""),C=G.ISO8859_1;j.enableDecoding(C);let M=1,R=m[M++],N=new Js;for(;M<m[0];){switch(R){case at.TEXT_COMPACTION_MODE_LATCH:M=at.textCompaction(m,M,j);break;case at.BYTE_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH_6:M=at.byteCompaction(R,m,C,M,j);break;case at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:j.append(m[M++]);break;case at.NUMERIC_COMPACTION_MODE_LATCH:M=at.numericCompaction(m,M,j);break;case at.ECI_CHARSET:G.getCharacterSetECIByValue(m[M++]);break;case at.ECI_GENERAL_PURPOSE:M+=2;break;case at.ECI_USER_DEFINED:M++;break;case at.BEGIN_MACRO_PDF417_CONTROL_BLOCK:M=at.decodeMacroBlock(m,M,N);break;case at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case at.MACRO_PDF417_TERMINATOR:throw new P;default:M--,M=at.textCompaction(m,M,j);break}if(M<m.length)R=m[M++];else throw P.getFormatInstance()}if(j.length()===0)throw P.getFormatInstance();let A=new Ce(null,j.toString(),null,y);return A.setOther(N),A}static decodeMacroBlock(m,y,j){if(y+at.NUMBER_OF_SEQUENCE_CODEWORDS>m[0])throw P.getFormatInstance();let C=new Int32Array(at.NUMBER_OF_SEQUENCE_CODEWORDS);for(let N=0;N<at.NUMBER_OF_SEQUENCE_CODEWORDS;N++,y++)C[N]=m[y];j.setSegmentIndex(T.parseInt(at.decodeBase900toBase10(C,at.NUMBER_OF_SEQUENCE_CODEWORDS)));let M=new J;y=at.textCompaction(m,y,M),j.setFileId(M.toString());let R=-1;for(m[y]===at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(R=y+1);y<m[0];)switch(m[y]){case at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(y++,m[y]){case at.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let N=new J;y=at.textCompaction(m,y+1,N),j.setFileName(N.toString());break;case at.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let A=new J;y=at.textCompaction(m,y+1,A),j.setSender(A.toString());break;case at.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let L=new J;y=at.textCompaction(m,y+1,L),j.setAddressee(L.toString());break;case at.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let B=new J;y=at.numericCompaction(m,y+1,B),j.setSegmentCount(T.parseInt(B.toString()));break;case at.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let Y=new J;y=at.numericCompaction(m,y+1,Y),j.setTimestamp(Bc.parseLong(Y.toString()));break;case at.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let te=new J;y=at.numericCompaction(m,y+1,te),j.setChecksum(T.parseInt(te.toString()));break;case at.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let se=new J;y=at.numericCompaction(m,y+1,se),j.setFileSize(Bc.parseLong(se.toString()));break;default:throw P.getFormatInstance()}break;case at.MACRO_PDF417_TERMINATOR:y++,j.setLastSegment(!0);break;default:throw P.getFormatInstance()}if(R!==-1){let N=y-R;j.isLastSegment()&&N--,j.setOptionalData(k.copyOfRange(m,R,R+N))}return y}static textCompaction(m,y,j){let C=new Int32Array((m[0]-y)*2),M=new Int32Array((m[0]-y)*2),R=0,N=!1;for(;y<m[0]&&!N;){let A=m[y++];if(A<at.TEXT_COMPACTION_MODE_LATCH)C[R]=A/30,C[R+1]=A%30,R+=2;else switch(A){case at.TEXT_COMPACTION_MODE_LATCH:C[R++]=at.TEXT_COMPACTION_MODE_LATCH;break;case at.BYTE_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH_6:case at.NUMERIC_COMPACTION_MODE_LATCH:case at.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case at.MACRO_PDF417_TERMINATOR:y--,N=!0;break;case at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C[R]=at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,A=m[y++],M[R]=A,R++;break}}return at.decodeTextCompaction(C,M,R,j),y}static decodeTextCompaction(m,y,j,C){let M=yr.ALPHA,R=yr.ALPHA,N=0;for(;N<j;){let A=m[N],L="";switch(M){case yr.ALPHA:if(A<26)L=String.fromCharCode(65+A);else switch(A){case 26:L=" ";break;case at.LL:M=yr.LOWER;break;case at.ML:M=yr.MIXED;break;case at.PS:R=M,M=yr.PUNCT_SHIFT;break;case at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C.append(y[N]);break;case at.TEXT_COMPACTION_MODE_LATCH:M=yr.ALPHA;break}break;case yr.LOWER:if(A<26)L=String.fromCharCode(97+A);else switch(A){case 26:L=" ";break;case at.AS:R=M,M=yr.ALPHA_SHIFT;break;case at.ML:M=yr.MIXED;break;case at.PS:R=M,M=yr.PUNCT_SHIFT;break;case at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C.append(y[N]);break;case at.TEXT_COMPACTION_MODE_LATCH:M=yr.ALPHA;break}break;case yr.MIXED:if(A<at.PL)L=at.MIXED_CHARS[A];else switch(A){case at.PL:M=yr.PUNCT;break;case 26:L=" ";break;case at.LL:M=yr.LOWER;break;case at.AL:M=yr.ALPHA;break;case at.PS:R=M,M=yr.PUNCT_SHIFT;break;case at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C.append(y[N]);break;case at.TEXT_COMPACTION_MODE_LATCH:M=yr.ALPHA;break}break;case yr.PUNCT:if(A<at.PAL)L=at.PUNCT_CHARS[A];else switch(A){case at.PAL:M=yr.ALPHA;break;case at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C.append(y[N]);break;case at.TEXT_COMPACTION_MODE_LATCH:M=yr.ALPHA;break}break;case yr.ALPHA_SHIFT:if(M=R,A<26)L=String.fromCharCode(65+A);else switch(A){case 26:L=" ";break;case at.TEXT_COMPACTION_MODE_LATCH:M=yr.ALPHA;break}break;case yr.PUNCT_SHIFT:if(M=R,A<at.PAL)L=at.PUNCT_CHARS[A];else switch(A){case at.PAL:M=yr.ALPHA;break;case at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C.append(y[N]);break;case at.TEXT_COMPACTION_MODE_LATCH:M=yr.ALPHA;break}break}L!==""&&C.append(L),N++}}static byteCompaction(m,y,j,C,M){let R=new Yd,N=0,A=0,L=!1;switch(m){case at.BYTE_COMPACTION_MODE_LATCH:let B=new Int32Array(6),Y=y[C++];for(;C<y[0]&&!L;)switch(B[N++]=Y,A=900*A+Y,Y=y[C++],Y){case at.TEXT_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH:case at.NUMERIC_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH_6:case at.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case at.MACRO_PDF417_TERMINATOR:C--,L=!0;break;default:if(N%5===0&&N>0){for(let te=0;te<6;++te)R.write(Number(ms(A)>>ms(8*(5-te))));A=0,N=0}break}C===y[0]&&Y<at.TEXT_COMPACTION_MODE_LATCH&&(B[N++]=Y);for(let te=0;te<N;te++)R.write(B[te]);break;case at.BYTE_COMPACTION_MODE_LATCH_6:for(;C<y[0]&&!L;){let te=y[C++];if(te<at.TEXT_COMPACTION_MODE_LATCH)N++,A=900*A+te;else switch(te){case at.TEXT_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH:case at.NUMERIC_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH_6:case at.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case at.MACRO_PDF417_TERMINATOR:C--,L=!0;break}if(N%5===0&&N>0){for(let se=0;se<6;++se)R.write(Number(ms(A)>>ms(8*(5-se))));A=0,N=0}}break}return M.append($.decode(R.toByteArray(),j)),C}static numericCompaction(m,y,j){let C=0,M=!1,R=new Int32Array(at.MAX_NUMERIC_CODEWORDS);for(;y<m[0]&&!M;){let N=m[y++];if(y===m[0]&&(M=!0),N<at.TEXT_COMPACTION_MODE_LATCH)R[C]=N,C++;else switch(N){case at.TEXT_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH_6:case at.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case at.MACRO_PDF417_TERMINATOR:y--,M=!0;break}(C%at.MAX_NUMERIC_CODEWORDS===0||N===at.NUMERIC_COMPACTION_MODE_LATCH||M)&&C>0&&(j.append(at.decodeBase900toBase10(R,C)),C=0)}return y}static decodeBase900toBase10(m,y){let j=ms(0);for(let M=0;M<y;M++)j+=at.EXP900[y-M-1]*ms(m[M]);let C=j.toString();if(C.charAt(0)!=="1")throw new P;return C.substring(1)}}at.TEXT_COMPACTION_MODE_LATCH=900,at.BYTE_COMPACTION_MODE_LATCH=901,at.NUMERIC_COMPACTION_MODE_LATCH=902,at.BYTE_COMPACTION_MODE_LATCH_6=924,at.ECI_USER_DEFINED=925,at.ECI_GENERAL_PURPOSE=926,at.ECI_CHARSET=927,at.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,at.MACRO_PDF417_TERMINATOR=922,at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,at.MAX_NUMERIC_CODEWORDS=15,at.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,at.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,at.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,at.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,at.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,at.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,at.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,at.PL=25,at.LL=27,at.AS=27,at.ML=28,at.AL=28,at.PS=29,at.PAL=29,at.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,at.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",at.EXP900=qd()?Fl():[],at.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ua{constructor(){}static decode(m,y,j,C,M,R,N){let A=new Es(m,y,j,C,M),L=null,B=null,Y;for(let ce=!0;;ce=!1){if(y!=null&&(L=Ua.getRowIndicatorColumn(m,A,y,!0,R,N)),C!=null&&(B=Ua.getRowIndicatorColumn(m,A,C,!1,R,N)),Y=Ua.merge(L,B),Y==null)throw F.getNotFoundInstance();let pe=Y.getBoundingBox();if(ce&&pe!=null&&(pe.getMinY()<A.getMinY()||pe.getMaxY()>A.getMaxY()))A=pe;else break}Y.setBoundingBox(A);let te=Y.getBarcodeColumnCount()+1;Y.setDetectionResultColumn(0,L),Y.setDetectionResultColumn(te,B);let se=L!=null;for(let ce=1;ce<=te;ce++){let pe=se?ce:te-ce;if(Y.getDetectionResultColumn(pe)!==void 0)continue;let ye;pe===0||pe===te?ye=new Ih(A,pe===0):ye=new Is(A),Y.setDetectionResultColumn(pe,ye);let ge=-1,_e=ge;for(let ke=A.getMinY();ke<=A.getMaxY();ke++){if(ge=Ua.getStartColumn(Y,pe,ke,se),ge<0||ge>A.getMaxX()){if(_e===-1)continue;ge=_e}let Ne=Ua.detectCodeword(m,A.getMinX(),A.getMaxX(),se,ge,ke,R,N);Ne!=null&&(ye.setCodeword(ke,Ne),_e=ge,R=Math.min(R,Ne.getWidth()),N=Math.max(N,Ne.getWidth()))}}return Ua.createDecoderResult(Y)}static merge(m,y){if(m==null&&y==null)return null;let j=Ua.getBarcodeMetadata(m,y);if(j==null)return null;let C=Es.merge(Ua.adjustBoundingBox(m),Ua.adjustBoundingBox(y));return new dn(j,C)}static adjustBoundingBox(m){if(m==null)return null;let y=m.getRowHeights();if(y==null)return null;let j=Ua.getMax(y),C=0;for(let N of y)if(C+=j-N,N>0)break;let M=m.getCodewords();for(let N=0;C>0&&M[N]==null;N++)C--;let R=0;for(let N=y.length-1;N>=0&&(R+=j-y[N],!(y[N]>0));N--);for(let N=M.length-1;R>0&&M[N]==null;N--)R--;return m.getBoundingBox().addMissingRows(C,R,m.isLeft())}static getMax(m){let y=-1;for(let j of m)y=Math.max(y,j);return y}static getBarcodeMetadata(m,y){let j;if(m==null||(j=m.getBarcodeMetadata())==null)return y==null?null:y.getBarcodeMetadata();let C;return y==null||(C=y.getBarcodeMetadata())==null?j:j.getColumnCount()!==C.getColumnCount()&&j.getErrorCorrectionLevel()!==C.getErrorCorrectionLevel()&&j.getRowCount()!==C.getRowCount()?null:j}static getRowIndicatorColumn(m,y,j,C,M,R){let N=new Ih(y,C);for(let A=0;A<2;A++){let L=A===0?1:-1,B=Math.trunc(Math.trunc(j.getX()));for(let Y=Math.trunc(Math.trunc(j.getY()));Y<=y.getMaxY()&&Y>=y.getMinY();Y+=L){let te=Ua.detectCodeword(m,0,m.getWidth(),C,B,Y,M,R);te!=null&&(N.setCodeword(Y,te),C?B=te.getStartX():B=te.getEndX())}}return N}static adjustCodewordCount(m,y){let j=y[0][1],C=j.getValue(),M=m.getBarcodeColumnCount()*m.getBarcodeRowCount()-Ua.getNumberOfECCodeWords(m.getBarcodeECLevel());if(C.length===0){if(M<1||M>xa.MAX_CODEWORDS_IN_BARCODE)throw F.getNotFoundInstance();j.setValue(M)}else C[0]!==M&&j.setValue(M)}static createDecoderResult(m){let y=Ua.createBarcodeMatrix(m);Ua.adjustCodewordCount(m,y);let j=new Array,C=new Int32Array(m.getBarcodeRowCount()*m.getBarcodeColumnCount()),M=[],R=new Array;for(let A=0;A<m.getBarcodeRowCount();A++)for(let L=0;L<m.getBarcodeColumnCount();L++){let B=y[A][L+1].getValue(),Y=A*m.getBarcodeColumnCount()+L;B.length===0?j.push(Y):B.length===1?C[Y]=B[0]:(R.push(Y),M.push(B))}let N=new Array(M.length);for(let A=0;A<N.length;A++)N[A]=M[A];return Ua.createDecoderResultFromAmbiguousValues(m.getBarcodeECLevel(),C,xa.toIntArray(j),xa.toIntArray(R),N)}static createDecoderResultFromAmbiguousValues(m,y,j,C,M){let R=new Int32Array(C.length),N=100;for(;N-- >0;){for(let A=0;A<R.length;A++)y[C[A]]=M[A][R[A]];try{return Ua.decodeCodewords(y,m,j)}catch(A){if(!(A instanceof p))throw A}if(R.length===0)throw p.getChecksumInstance();for(let A=0;A<R.length;A++)if(R[A]<M[A].length-1){R[A]++;break}else if(R[A]=0,A===R.length-1)throw p.getChecksumInstance()}throw p.getChecksumInstance()}static createBarcodeMatrix(m){let y=Array.from({length:m.getBarcodeRowCount()},()=>new Array(m.getBarcodeColumnCount()+2));for(let C=0;C<y.length;C++)for(let M=0;M<y[C].length;M++)y[C][M]=new Qs;let j=0;for(let C of m.getDetectionResultColumns()){if(C!=null){for(let M of C.getCodewords())if(M!=null){let R=M.getRowNumber();if(R>=0){if(R>=y.length)continue;y[R][j].setValue(M.getValue())}}}j++}return y}static isValidBarcodeColumn(m,y){return y>=0&&y<=m.getBarcodeColumnCount()+1}static getStartColumn(m,y,j,C){let M=C?1:-1,R=null;if(Ua.isValidBarcodeColumn(m,y-M)&&(R=m.getDetectionResultColumn(y-M).getCodeword(j)),R!=null)return C?R.getEndX():R.getStartX();if(R=m.getDetectionResultColumn(y).getCodewordNearby(j),R!=null)return C?R.getStartX():R.getEndX();if(Ua.isValidBarcodeColumn(m,y-M)&&(R=m.getDetectionResultColumn(y-M).getCodewordNearby(j)),R!=null)return C?R.getEndX():R.getStartX();let N=0;for(;Ua.isValidBarcodeColumn(m,y-M);){y-=M;for(let A of m.getDetectionResultColumn(y).getCodewords())if(A!=null)return(C?A.getEndX():A.getStartX())+M*N*(A.getEndX()-A.getStartX());N++}return C?m.getBoundingBox().getMinX():m.getBoundingBox().getMaxX()}static detectCodeword(m,y,j,C,M,R,N,A){M=Ua.adjustCodewordStartColumn(m,y,j,C,M,R);let L=Ua.getModuleBitCount(m,y,j,C,M,R);if(L==null)return null;let B,Y=yt.sum(L);if(C)B=M+Y;else{for(let ce=0;ce<L.length/2;ce++){let pe=L[ce];L[ce]=L[L.length-1-ce],L[L.length-1-ce]=pe}B=M,M=B-Y}if(!Ua.checkCodewordSkew(Y,N,A))return null;let te=Vn.getDecodedValue(L),se=xa.getCodeword(te);return se===-1?null:new xs(M,B,Ua.getCodewordBucketNumber(te),se)}static getModuleBitCount(m,y,j,C,M,R){let N=M,A=new Int32Array(8),L=0,B=C?1:-1,Y=C;for(;(C?N<j:N>=y)&&L<A.length;)m.get(N,R)===Y?(A[L]++,N+=B):(L++,Y=!Y);return L===A.length||N===(C?j:y)&&L===A.length-1?A:null}static getNumberOfECCodeWords(m){return 2<<m}static adjustCodewordStartColumn(m,y,j,C,M,R){let N=M,A=C?-1:1;for(let L=0;L<2;L++){for(;(C?N>=y:N<j)&&C===m.get(N,R);){if(Math.abs(M-N)>Ua.CODEWORD_SKEW_SIZE)return M;N+=A}A=-A,C=!C}return N}static checkCodewordSkew(m,y,j){return y-Ua.CODEWORD_SKEW_SIZE<=m&&m<=j+Ua.CODEWORD_SKEW_SIZE}static decodeCodewords(m,y,j){if(m.length===0)throw P.getFormatInstance();let C=1<<y+1,M=Ua.correctErrors(m,j,C);Ua.verifyCodewordCount(m,C);let R=at.decode(m,""+y);return R.setErrorsCorrected(M),R.setErasures(j.length),R}static correctErrors(m,y,j){if(y!=null&&y.length>j/2+Ua.MAX_ERRORS||j<0||j>Ua.MAX_EC_CODEWORDS)throw p.getChecksumInstance();return Ua.errorCorrection.decode(m,j,y)}static verifyCodewordCount(m,y){if(m.length<4)throw P.getFormatInstance();let j=m[0];if(j>m.length)throw P.getFormatInstance();if(j===0)if(y<m.length)m[0]=m.length-y;else throw P.getFormatInstance()}static getBitCountForCodeword(m){let y=new Int32Array(8),j=0,C=y.length-1;for(;!((m&1)!==j&&(j=m&1,C--,C<0));)y[C]++,m>>=1;return y}static getCodewordBucketNumber(m){return m instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(m):this.getCodewordBucketNumber_number(m)}static getCodewordBucketNumber_number(m){return Ua.getCodewordBucketNumber(Ua.getBitCountForCodeword(m))}static getCodewordBucketNumber_Int32Array(m){return(m[0]-m[2]+m[4]-m[6]+9)%9}static toString(m){let y=new Ds;for(let j=0;j<m.length;j++){y.format("Row %2d: ",j);for(let C=0;C<m[j].length;C++){let M=m[j][C];M.getValue().length===0?y.format("        ",null):y.format("%4d(%2d)",M.getValue()[0],M.getConfidence(M.getValue()[0]))}y.format("%n")}return y.toString()}}Ua.CODEWORD_SKEW_SIZE=2,Ua.MAX_ERRORS=3,Ua.MAX_EC_CODEWORDS=512,Ua.errorCorrection=new ps;class Hn{decode(m,y=null){let j=Hn.decode(m,y,!1);if(j==null||j.length===0||j[0]==null)throw F.getNotFoundInstance();return j[0]}decodeMultiple(m,y=null){try{return Hn.decode(m,y,!0)}catch(j){throw j instanceof P||j instanceof p?F.getNotFoundInstance():j}}static decode(m,y,j){const C=new Array,M=Ma.detectMultiple(m,y,j);for(const R of M.getPoints()){const N=Ua.decode(M.getBits(),R[4],R[5],R[6],R[7],Hn.getMinCodewordWidth(R),Hn.getMaxCodewordWidth(R)),A=new fe(N.getText(),N.getRawBytes(),void 0,R,ve.PDF_417);A.putMetadata(Se.ERROR_CORRECTION_LEVEL,N.getECLevel());const L=N.getOther();L!=null&&A.putMetadata(Se.PDF417_EXTRA_METADATA,L),C.push(A)}return C.map(R=>R)}static getMaxWidth(m,y){return m==null||y==null?0:Math.trunc(Math.abs(m.getX()-y.getX()))}static getMinWidth(m,y){return m==null||y==null?T.MAX_VALUE:Math.trunc(Math.abs(m.getX()-y.getX()))}static getMaxCodewordWidth(m){return Math.floor(Math.max(Math.max(Hn.getMaxWidth(m[0],m[4]),Hn.getMaxWidth(m[6],m[2])*xa.MODULES_IN_CODEWORD/xa.MODULES_IN_STOP_PATTERN),Math.max(Hn.getMaxWidth(m[1],m[5]),Hn.getMaxWidth(m[7],m[3])*xa.MODULES_IN_CODEWORD/xa.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(m){return Math.floor(Math.min(Math.min(Hn.getMinWidth(m[0],m[4]),Hn.getMinWidth(m[6],m[2])*xa.MODULES_IN_CODEWORD/xa.MODULES_IN_STOP_PATTERN),Math.min(Hn.getMinWidth(m[1],m[5]),Hn.getMinWidth(m[7],m[3])*xa.MODULES_IN_CODEWORD/xa.MODULES_IN_STOP_PATTERN)))}reset(){}}class eo extends d{}eo.kind="ReaderException";class Xd{constructor(m,y){this.verbose=m===!0,y&&this.setHints(y)}decode(m,y){return y&&this.setHints(y),this.decodeInternal(m)}decodeWithState(m){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(m)}setHints(m){this.hints=m;const y=!r(m)&&m.get(O.TRY_HARDER)===!0,j=r(m)?null:m.get(O.POSSIBLE_FORMATS),C=new Array;if(!r(j)){const M=j.some(R=>R===ve.UPC_A||R===ve.UPC_E||R===ve.EAN_13||R===ve.EAN_8||R===ve.CODABAR||R===ve.CODE_39||R===ve.CODE_93||R===ve.CODE_128||R===ve.ITF||R===ve.RSS_14||R===ve.RSS_EXPANDED);M&&!y&&C.push(new Nn(m,this.verbose)),j.includes(ve.QR_CODE)&&C.push(new An),j.includes(ve.DATA_MATRIX)&&C.push(new Ts),j.includes(ve.AZTEC)&&C.push(new Ie),j.includes(ve.PDF_417)&&C.push(new Hn),M&&y&&C.push(new Nn(m,this.verbose))}C.length===0&&(y||C.push(new Nn(m,this.verbose)),C.push(new An),C.push(new Ts),C.push(new Ie),C.push(new Hn),y&&C.push(new Nn(m,this.verbose))),this.readers=C}reset(){if(this.readers!==null)for(const m of this.readers)m.reset()}decodeInternal(m){if(this.readers===null)throw new eo("No readers where selected, nothing can be read.");for(const y of this.readers)try{return y.decode(m,this.hints)}catch(j){if(j instanceof eo)continue}throw new F("No MultiFormat Readers were able to detect the code.")}}class Zd extends de{constructor(m=null,y=500){const j=new Xd;j.setHints(m),super(j,y)}decodeBitmap(m){return this.reader.decodeWithState(m)}}class Lh extends de{constructor(m=500){super(new Hn,m)}}class Oh extends de{constructor(m=500){super(new An,m)}}var Tn;(function(ue){ue[ue.ERROR_CORRECTION=0]="ERROR_CORRECTION",ue[ue.CHARACTER_SET=1]="CHARACTER_SET",ue[ue.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",ue[ue.MIN_SIZE=3]="MIN_SIZE",ue[ue.MAX_SIZE=4]="MAX_SIZE",ue[ue.MARGIN=5]="MARGIN",ue[ue.PDF417_COMPACT=6]="PDF417_COMPACT",ue[ue.PDF417_COMPACTION=7]="PDF417_COMPACTION",ue[ue.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",ue[ue.AZTEC_LAYERS=9]="AZTEC_LAYERS",ue[ue.QR_VERSION=10]="QR_VERSION"})(Tn||(Tn={}));var rn=Tn;class to{constructor(m){this.field=m,this.cachedGenerators=[],this.cachedGenerators.push(new xe(m,Int32Array.from([1])))}buildGenerator(m){const y=this.cachedGenerators;if(m>=y.length){let j=y[y.length-1];const C=this.field;for(let M=y.length;M<=m;M++){const R=j.multiply(new xe(C,Int32Array.from([1,C.exp(M-1+C.getGeneratorBase())])));y.push(R),j=R}}return y[m]}encode(m,y){if(y===0)throw new h("No error correction bytes");const j=m.length-y;if(j<=0)throw new h("No data bytes provided");const C=this.buildGenerator(y),M=new Int32Array(j);b.arraycopy(m,0,M,0,j);let R=new xe(this.field,M);R=R.multiplyByMonomial(y,1);const A=R.divide(C)[1].getCoefficients(),L=y-A.length;for(let B=0;B<L;B++)m[j+B]=0;b.arraycopy(A,0,m,j+L,A.length)}}class nn{constructor(){}static applyMaskPenaltyRule1(m){return nn.applyMaskPenaltyRule1Internal(m,!0)+nn.applyMaskPenaltyRule1Internal(m,!1)}static applyMaskPenaltyRule2(m){let y=0;const j=m.getArray(),C=m.getWidth(),M=m.getHeight();for(let R=0;R<M-1;R++){const N=j[R];for(let A=0;A<C-1;A++){const L=N[A];L===N[A+1]&&L===j[R+1][A]&&L===j[R+1][A+1]&&y++}}return nn.N2*y}static applyMaskPenaltyRule3(m){let y=0;const j=m.getArray(),C=m.getWidth(),M=m.getHeight();for(let R=0;R<M;R++)for(let N=0;N<C;N++){const A=j[R];N+6<C&&A[N]===1&&A[N+1]===0&&A[N+2]===1&&A[N+3]===1&&A[N+4]===1&&A[N+5]===0&&A[N+6]===1&&(nn.isWhiteHorizontal(A,N-4,N)||nn.isWhiteHorizontal(A,N+7,N+11))&&y++,R+6<M&&j[R][N]===1&&j[R+1][N]===0&&j[R+2][N]===1&&j[R+3][N]===1&&j[R+4][N]===1&&j[R+5][N]===0&&j[R+6][N]===1&&(nn.isWhiteVertical(j,N,R-4,R)||nn.isWhiteVertical(j,N,R+7,R+11))&&y++}return y*nn.N3}static isWhiteHorizontal(m,y,j){y=Math.max(y,0),j=Math.min(j,m.length);for(let C=y;C<j;C++)if(m[C]===1)return!1;return!0}static isWhiteVertical(m,y,j,C){j=Math.max(j,0),C=Math.min(C,m.length);for(let M=j;M<C;M++)if(m[M][y]===1)return!1;return!0}static applyMaskPenaltyRule4(m){let y=0;const j=m.getArray(),C=m.getWidth(),M=m.getHeight();for(let A=0;A<M;A++){const L=j[A];for(let B=0;B<C;B++)L[B]===1&&y++}const R=m.getHeight()*m.getWidth();return Math.floor(Math.abs(y*2-R)*10/R)*nn.N4}static getDataMaskBit(m,y,j){let C,M;switch(m){case 0:C=j+y&1;break;case 1:C=j&1;break;case 2:C=y%3;break;case 3:C=(j+y)%3;break;case 4:C=Math.floor(j/2)+Math.floor(y/3)&1;break;case 5:M=j*y,C=(M&1)+M%3;break;case 6:M=j*y,C=(M&1)+M%3&1;break;case 7:M=j*y,C=M%3+(j+y&1)&1;break;default:throw new h("Invalid mask pattern: "+m)}return C===0}static applyMaskPenaltyRule1Internal(m,y){let j=0;const C=y?m.getHeight():m.getWidth(),M=y?m.getWidth():m.getHeight(),R=m.getArray();for(let N=0;N<C;N++){let A=0,L=-1;for(let B=0;B<M;B++){const Y=y?R[N][B]:R[B][N];Y===L?A++:(A>=5&&(j+=nn.N1+(A-5)),A=1,L=Y)}A>=5&&(j+=nn.N1+(A-5))}return j}}nn.N1=3,nn.N2=3,nn.N3=40,nn.N4=10;class ll{constructor(m,y){this.width=m,this.height=y;const j=new Array(y);for(let C=0;C!==y;C++)j[C]=new Uint8Array(m);this.bytes=j}getHeight(){return this.height}getWidth(){return this.width}get(m,y){return this.bytes[y][m]}getArray(){return this.bytes}setNumber(m,y,j){this.bytes[y][m]=j}setBoolean(m,y,j){this.bytes[y][m]=j?1:0}clear(m){for(const y of this.bytes)k.fill(y,m)}equals(m){if(!(m instanceof ll))return!1;const y=m;if(this.width!==y.width||this.height!==y.height)return!1;for(let j=0,C=this.height;j<C;++j){const M=this.bytes[j],R=y.bytes[j];for(let N=0,A=this.width;N<A;++N)if(M[N]!==R[N])return!1}return!0}toString(){const m=new J;for(let y=0,j=this.height;y<j;++y){const C=this.bytes[y];for(let M=0,R=this.width;M<R;++M)switch(C[M]){case 0:m.append(" 0");break;case 1:m.append(" 1");break;default:m.append("  ");break}m.append(`
`)}return m.toString()}}class Mo{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const m=new J;return m.append(`<<
`),m.append(" mode: "),m.append(this.mode?this.mode.toString():"null"),m.append(`
 ecLevel: `),m.append(this.ecLevel?this.ecLevel.toString():"null"),m.append(`
 version: `),m.append(this.version?this.version.toString():"null"),m.append(`
 maskPattern: `),m.append(this.maskPattern.toString()),this.matrix?(m.append(`
 matrix:
`),m.append(this.matrix.toString())):m.append(`
 matrix: null
`),m.append(`>>
`),m.toString()}setMode(m){this.mode=m}setECLevel(m){this.ecLevel=m}setVersion(m){this.version=m}setMaskPattern(m){this.maskPattern=m}setMatrix(m){this.matrix=m}static isValidMaskPattern(m){return m>=0&&m<Mo.NUM_MASK_PATTERNS}}Mo.NUM_MASK_PATTERNS=8;class kr extends d{}kr.kind="WriterException";class ma{constructor(){}static clearMatrix(m){m.clear(255)}static buildMatrix(m,y,j,C,M){ma.clearMatrix(M),ma.embedBasicPatterns(j,M),ma.embedTypeInfo(y,C,M),ma.maybeEmbedVersionInfo(j,M),ma.embedDataBits(m,C,M)}static embedBasicPatterns(m,y){ma.embedPositionDetectionPatternsAndSeparators(y),ma.embedDarkDotAtLeftBottomCorner(y),ma.maybeEmbedPositionAdjustmentPatterns(m,y),ma.embedTimingPatterns(y)}static embedTypeInfo(m,y,j){const C=new D;ma.makeTypeInfoBits(m,y,C);for(let M=0,R=C.getSize();M<R;++M){const N=C.get(C.getSize()-1-M),A=ma.TYPE_INFO_COORDINATES[M],L=A[0],B=A[1];if(j.setBoolean(L,B,N),M<8){const Y=j.getWidth()-M-1;j.setBoolean(Y,8,N)}else{const te=j.getHeight()-7+(M-8);j.setBoolean(8,te,N)}}}static maybeEmbedVersionInfo(m,y){if(m.getVersionNumber()<7)return;const j=new D;ma.makeVersionInfoBits(m,j);let C=17;for(let M=0;M<6;++M)for(let R=0;R<3;++R){const N=j.get(C);C--,y.setBoolean(M,y.getHeight()-11+R,N),y.setBoolean(y.getHeight()-11+R,M,N)}}static embedDataBits(m,y,j){let C=0,M=-1,R=j.getWidth()-1,N=j.getHeight()-1;for(;R>0;){for(R===6&&(R-=1);N>=0&&N<j.getHeight();){for(let A=0;A<2;++A){const L=R-A;if(!ma.isEmpty(j.get(L,N)))continue;let B;C<m.getSize()?(B=m.get(C),++C):B=!1,y!==255&&nn.getDataMaskBit(y,L,N)&&(B=!B),j.setBoolean(L,N,B)}N+=M}M=-M,N+=M,R-=2}if(C!==m.getSize())throw new kr("Not all bits consumed: "+C+"/"+m.getSize())}static findMSBSet(m){return 32-T.numberOfLeadingZeros(m)}static calculateBCHCode(m,y){if(y===0)throw new h("0 polynomial");const j=ma.findMSBSet(y);for(m<<=j-1;ma.findMSBSet(m)>=j;)m^=y<<ma.findMSBSet(m)-j;return m}static makeTypeInfoBits(m,y,j){if(!Mo.isValidMaskPattern(y))throw new kr("Invalid mask pattern");const C=m.getBits()<<3|y;j.appendBits(C,5);const M=ma.calculateBCHCode(C,ma.TYPE_INFO_POLY);j.appendBits(M,10);const R=new D;if(R.appendBits(ma.TYPE_INFO_MASK_PATTERN,15),j.xor(R),j.getSize()!==15)throw new kr("should not happen but we got: "+j.getSize())}static makeVersionInfoBits(m,y){y.appendBits(m.getVersionNumber(),6);const j=ma.calculateBCHCode(m.getVersionNumber(),ma.VERSION_INFO_POLY);if(y.appendBits(j,12),y.getSize()!==18)throw new kr("should not happen but we got: "+y.getSize())}static isEmpty(m){return m===255}static embedTimingPatterns(m){for(let y=8;y<m.getWidth()-8;++y){const j=(y+1)%2;ma.isEmpty(m.get(y,6))&&m.setNumber(y,6,j),ma.isEmpty(m.get(6,y))&&m.setNumber(6,y,j)}}static embedDarkDotAtLeftBottomCorner(m){if(m.get(8,m.getHeight()-8)===0)throw new kr;m.setNumber(8,m.getHeight()-8,1)}static embedHorizontalSeparationPattern(m,y,j){for(let C=0;C<8;++C){if(!ma.isEmpty(j.get(m+C,y)))throw new kr;j.setNumber(m+C,y,0)}}static embedVerticalSeparationPattern(m,y,j){for(let C=0;C<7;++C){if(!ma.isEmpty(j.get(m,y+C)))throw new kr;j.setNumber(m,y+C,0)}}static embedPositionAdjustmentPattern(m,y,j){for(let C=0;C<5;++C){const M=ma.POSITION_ADJUSTMENT_PATTERN[C];for(let R=0;R<5;++R)j.setNumber(m+R,y+C,M[R])}}static embedPositionDetectionPattern(m,y,j){for(let C=0;C<7;++C){const M=ma.POSITION_DETECTION_PATTERN[C];for(let R=0;R<7;++R)j.setNumber(m+R,y+C,M[R])}}static embedPositionDetectionPatternsAndSeparators(m){const y=ma.POSITION_DETECTION_PATTERN[0].length;ma.embedPositionDetectionPattern(0,0,m),ma.embedPositionDetectionPattern(m.getWidth()-y,0,m),ma.embedPositionDetectionPattern(0,m.getWidth()-y,m);const j=8;ma.embedHorizontalSeparationPattern(0,j-1,m),ma.embedHorizontalSeparationPattern(m.getWidth()-j,j-1,m),ma.embedHorizontalSeparationPattern(0,m.getWidth()-j,m);const C=7;ma.embedVerticalSeparationPattern(C,0,m),ma.embedVerticalSeparationPattern(m.getHeight()-C-1,0,m),ma.embedVerticalSeparationPattern(C,m.getHeight()-C,m)}static maybeEmbedPositionAdjustmentPatterns(m,y){if(m.getVersionNumber()<2)return;const j=m.getVersionNumber()-1,C=ma.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[j];for(let M=0,R=C.length;M!==R;M++){const N=C[M];if(N>=0)for(let A=0;A!==R;A++){const L=C[A];L>=0&&ma.isEmpty(y.get(L,N))&&ma.embedPositionAdjustmentPattern(L-2,N-2,y)}}}}ma.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ma.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ma.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ma.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ma.VERSION_INFO_POLY=7973,ma.TYPE_INFO_POLY=1335,ma.TYPE_INFO_MASK_PATTERN=21522;class Ph{constructor(m,y){this.dataBytes=m,this.errorCorrectionBytes=y}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class wr{constructor(){}static calculateMaskPenalty(m){return nn.applyMaskPenaltyRule1(m)+nn.applyMaskPenaltyRule2(m)+nn.applyMaskPenaltyRule3(m)+nn.applyMaskPenaltyRule4(m)}static encode(m,y,j=null){let C=wr.DEFAULT_BYTE_MODE_ENCODING;const M=j!==null&&j.get(rn.CHARACTER_SET)!==void 0;M&&(C=j.get(rn.CHARACTER_SET).toString());const R=this.chooseMode(m,C),N=new D;if(R===pa.BYTE&&(M||wr.DEFAULT_BYTE_MODE_ENCODING!==C)){const ke=G.getCharacterSetECIByName(C);ke!==void 0&&this.appendECI(ke,N)}this.appendModeInfo(R,N);const A=new D;this.appendBytes(m,R,A,C);let L;if(j!==null&&j.get(rn.QR_VERSION)!==void 0){const ke=Number.parseInt(j.get(rn.QR_VERSION).toString(),10);L=aa.getVersionForNumber(ke);const Ne=this.calculateBitsNeeded(R,N,A,L);if(!this.willFit(Ne,L,y))throw new kr("Data too big for requested version")}else L=this.recommendVersion(y,R,N,A);const B=new D;B.appendBitArray(N);const Y=R===pa.BYTE?A.getSizeInBytes():m.length;this.appendLengthInfo(Y,L,R,B),B.appendBitArray(A);const te=L.getECBlocksForLevel(y),se=L.getTotalCodewords()-te.getTotalECCodewords();this.terminateBits(se,B);const ce=this.interleaveWithECBytes(B,L.getTotalCodewords(),se,te.getNumBlocks()),pe=new Mo;pe.setECLevel(y),pe.setMode(R),pe.setVersion(L);const ye=L.getDimensionForVersion(),ge=new ll(ye,ye),_e=this.chooseMaskPattern(ce,y,L,ge);return pe.setMaskPattern(_e),ma.buildMatrix(ce,y,L,_e,ge),pe.setMatrix(ge),pe}static recommendVersion(m,y,j,C){const M=this.calculateBitsNeeded(y,j,C,aa.getVersionForNumber(1)),R=this.chooseVersion(M,m),N=this.calculateBitsNeeded(y,j,C,R);return this.chooseVersion(N,m)}static calculateBitsNeeded(m,y,j,C){return y.getSize()+m.getCharacterCountBits(C)+j.getSize()}static getAlphanumericCode(m){return m<wr.ALPHANUMERIC_TABLE.length?wr.ALPHANUMERIC_TABLE[m]:-1}static chooseMode(m,y=null){if(G.SJIS.getName()===y&&this.isOnlyDoubleByteKanji(m))return pa.KANJI;let j=!1,C=!1;for(let M=0,R=m.length;M<R;++M){const N=m.charAt(M);if(wr.isDigit(N))j=!0;else if(this.getAlphanumericCode(N.charCodeAt(0))!==-1)C=!0;else return pa.BYTE}return C?pa.ALPHANUMERIC:j?pa.NUMERIC:pa.BYTE}static isOnlyDoubleByteKanji(m){let y;try{y=$.encode(m,G.SJIS)}catch{return!1}const j=y.length;if(j%2!==0)return!1;for(let C=0;C<j;C+=2){const M=y[C]&255;if((M<129||M>159)&&(M<224||M>235))return!1}return!0}static chooseMaskPattern(m,y,j,C){let M=Number.MAX_SAFE_INTEGER,R=-1;for(let N=0;N<Mo.NUM_MASK_PATTERNS;N++){ma.buildMatrix(m,y,j,N,C);let A=this.calculateMaskPenalty(C);A<M&&(M=A,R=N)}return R}static chooseVersion(m,y){for(let j=1;j<=40;j++){const C=aa.getVersionForNumber(j);if(wr.willFit(m,C,y))return C}throw new kr("Data too big")}static willFit(m,y,j){const C=y.getTotalCodewords(),R=y.getECBlocksForLevel(j).getTotalECCodewords(),N=C-R,A=(m+7)/8;return N>=A}static terminateBits(m,y){const j=m*8;if(y.getSize()>j)throw new kr("data bits cannot fit in the QR Code"+y.getSize()+" > "+j);for(let R=0;R<4&&y.getSize()<j;++R)y.appendBit(!1);const C=y.getSize()&7;if(C>0)for(let R=C;R<8;R++)y.appendBit(!1);const M=m-y.getSizeInBytes();for(let R=0;R<M;++R)y.appendBits((R&1)===0?236:17,8);if(y.getSize()!==j)throw new kr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(m,y,j,C,M,R){if(C>=j)throw new kr("Block ID too large");const N=m%j,A=j-N,L=Math.floor(m/j),B=L+1,Y=Math.floor(y/j),te=Y+1,se=L-Y,ce=B-te;if(se!==ce)throw new kr("EC bytes mismatch");if(j!==A+N)throw new kr("RS blocks mismatch");if(m!==(Y+se)*A+(te+ce)*N)throw new kr("Total bytes mismatch");C<A?(M[0]=Y,R[0]=se):(M[0]=te,R[0]=ce)}static interleaveWithECBytes(m,y,j,C){if(m.getSizeInBytes()!==j)throw new kr("Number of bits and data bytes does not match");let M=0,R=0,N=0;const A=new Array;for(let B=0;B<C;++B){const Y=new Int32Array(1),te=new Int32Array(1);wr.getNumDataBytesAndNumECBytesForBlockID(y,j,C,B,Y,te);const se=Y[0],ce=new Uint8Array(se);m.toBytes(8*M,ce,0,se);const pe=wr.generateECBytes(ce,te[0]);A.push(new Ph(ce,pe)),R=Math.max(R,se),N=Math.max(N,pe.length),M+=Y[0]}if(j!==M)throw new kr("Data bytes does not match offset");const L=new D;for(let B=0;B<R;++B)for(const Y of A){const te=Y.getDataBytes();B<te.length&&L.appendBits(te[B],8)}for(let B=0;B<N;++B)for(const Y of A){const te=Y.getErrorCorrectionBytes();B<te.length&&L.appendBits(te[B],8)}if(y!==L.getSizeInBytes())throw new kr("Interleaving error: "+y+" and "+L.getSizeInBytes()+" differ.");return L}static generateECBytes(m,y){const j=m.length,C=new Int32Array(j+y);for(let R=0;R<j;R++)C[R]=m[R]&255;new to(Ee.QR_CODE_FIELD_256).encode(C,y);const M=new Uint8Array(y);for(let R=0;R<y;R++)M[R]=C[j+R];return M}static appendModeInfo(m,y){y.appendBits(m.getBits(),4)}static appendLengthInfo(m,y,j,C){const M=j.getCharacterCountBits(y);if(m>=1<<M)throw new kr(m+" is bigger than "+((1<<M)-1));C.appendBits(m,M)}static appendBytes(m,y,j,C){switch(y){case pa.NUMERIC:wr.appendNumericBytes(m,j);break;case pa.ALPHANUMERIC:wr.appendAlphanumericBytes(m,j);break;case pa.BYTE:wr.append8BitBytes(m,j,C);break;case pa.KANJI:wr.appendKanjiBytes(m,j);break;default:throw new kr("Invalid mode: "+y)}}static getDigit(m){return m.charCodeAt(0)-48}static isDigit(m){const y=wr.getDigit(m);return y>=0&&y<=9}static appendNumericBytes(m,y){const j=m.length;let C=0;for(;C<j;){const M=wr.getDigit(m.charAt(C));if(C+2<j){const R=wr.getDigit(m.charAt(C+1)),N=wr.getDigit(m.charAt(C+2));y.appendBits(M*100+R*10+N,10),C+=3}else if(C+1<j){const R=wr.getDigit(m.charAt(C+1));y.appendBits(M*10+R,7),C+=2}else y.appendBits(M,4),C++}}static appendAlphanumericBytes(m,y){const j=m.length;let C=0;for(;C<j;){const M=wr.getAlphanumericCode(m.charCodeAt(C));if(M===-1)throw new kr;if(C+1<j){const R=wr.getAlphanumericCode(m.charCodeAt(C+1));if(R===-1)throw new kr;y.appendBits(M*45+R,11),C+=2}else y.appendBits(M,6),C++}}static append8BitBytes(m,y,j){let C;try{C=$.encode(m,j)}catch(M){throw new kr(M)}for(let M=0,R=C.length;M!==R;M++){const N=C[M];y.appendBits(N,8)}}static appendKanjiBytes(m,y){let j;try{j=$.encode(m,G.SJIS)}catch(M){throw new kr(M)}const C=j.length;for(let M=0;M<C;M+=2){const R=j[M]&255,N=j[M+1]&255,A=R<<8&4294967295|N;let L=-1;if(A>=33088&&A<=40956?L=A-33088:A>=57408&&A<=60351&&(L=A-49472),L===-1)throw new kr("Invalid byte sequence");const B=(L>>8)*192+(L&255);y.appendBits(B,13)}}static appendECI(m,y){y.appendBits(pa.ECI.getBits(),4),y.appendBits(m.getValue(),8)}}wr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),wr.DEFAULT_BYTE_MODE_ENCODING=G.UTF8.getName();class ao{write(m,y,j,C=null){if(m.length===0)throw new h("Found empty contents");if(y<0||j<0)throw new h("Requested dimensions are too small: "+y+"x"+j);let M=Fa.L,R=ao.QUIET_ZONE_SIZE;C!==null&&(C.get(rn.ERROR_CORRECTION)!==void 0&&(M=Fa.fromString(C.get(rn.ERROR_CORRECTION).toString())),C.get(rn.MARGIN)!==void 0&&(R=Number.parseInt(C.get(rn.MARGIN).toString(),10)));const N=wr.encode(m,M,C);return this.renderResult(N,y,j,R)}writeToDom(m,y,j,C,M=null){typeof m=="string"&&(m=document.querySelector(m));const R=this.write(y,j,C,M);m&&m.appendChild(R)}renderResult(m,y,j,C){const M=m.getMatrix();if(M===null)throw new Ze;const R=M.getWidth(),N=M.getHeight(),A=R+C*2,L=N+C*2,B=Math.max(y,A),Y=Math.max(j,L),te=Math.min(Math.floor(B/A),Math.floor(Y/L)),se=Math.floor((B-R*te)/2),ce=Math.floor((Y-N*te)/2),pe=this.createSVGElement(B,Y);for(let ye=0,ge=ce;ye<N;ye++,ge+=te)for(let _e=0,ke=se;_e<R;_e++,ke+=te)if(M.get(_e,ye)===1){const Ne=this.createSvgRectElement(ke,ge,te,te);pe.appendChild(Ne)}return pe}createSVGElement(m,y){const j=document.createElementNS(ao.SVG_NS,"svg");return j.setAttributeNS(null,"height",m.toString()),j.setAttributeNS(null,"width",y.toString()),j}createSvgRectElement(m,y,j,C){const M=document.createElementNS(ao.SVG_NS,"rect");return M.setAttributeNS(null,"x",m.toString()),M.setAttributeNS(null,"y",y.toString()),M.setAttributeNS(null,"height",j.toString()),M.setAttributeNS(null,"width",C.toString()),M.setAttributeNS(null,"fill","#000000"),M}}ao.QUIET_ZONE_SIZE=4,ao.SVG_NS="http://www.w3.org/2000/svg";class Eo{encode(m,y,j,C,M){if(m.length===0)throw new h("Found empty contents");if(y!==ve.QR_CODE)throw new h("Can only encode QR_CODE, but got "+y);if(j<0||C<0)throw new h(`Requested dimensions are too small: ${j}x${C}`);let R=Fa.L,N=Eo.QUIET_ZONE_SIZE;M!==null&&(M.get(rn.ERROR_CORRECTION)!==void 0&&(R=Fa.fromString(M.get(rn.ERROR_CORRECTION).toString())),M.get(rn.MARGIN)!==void 0&&(N=Number.parseInt(M.get(rn.MARGIN).toString(),10)));const A=wr.encode(m,R,M);return Eo.renderResult(A,j,C,N)}static renderResult(m,y,j,C){const M=m.getMatrix();if(M===null)throw new Ze;const R=M.getWidth(),N=M.getHeight(),A=R+C*2,L=N+C*2,B=Math.max(y,A),Y=Math.max(j,L),te=Math.min(Math.floor(B/A),Math.floor(Y/L)),se=Math.floor((B-R*te)/2),ce=Math.floor((Y-N*te)/2),pe=new U(B,Y);for(let ye=0,ge=ce;ye<N;ye++,ge+=te)for(let _e=0,ke=se;_e<R;_e++,ke+=te)M.get(_e,ye)===1&&pe.setRegion(ke,ge,te,te);return pe}}Eo.QUIET_ZONE_SIZE=4;class Kd{encode(m,y,j,C,M){let R;if(y===ve.QR_CODE)R=new Eo;else throw new h("No encoder available for format "+y);return R.encode(m,y,j,C,M)}}class Xi extends ee{constructor(m,y,j,C,M,R,N,A){if(super(R,N),this.yuvData=m,this.dataWidth=y,this.dataHeight=j,this.left=C,this.top=M,C+R>y||M+N>j)throw new h("Crop rectangle does not fit within image data.");A&&this.reverseHorizontal(R,N)}getRow(m,y){if(m<0||m>=this.getHeight())throw new h("Requested row is outside the image: "+m);const j=this.getWidth();(y==null||y.length<j)&&(y=new Uint8ClampedArray(j));const C=(m+this.top)*this.dataWidth+this.left;return b.arraycopy(this.yuvData,C,y,0,j),y}getMatrix(){const m=this.getWidth(),y=this.getHeight();if(m===this.dataWidth&&y===this.dataHeight)return this.yuvData;const j=m*y,C=new Uint8ClampedArray(j);let M=this.top*this.dataWidth+this.left;if(m===this.dataWidth)return b.arraycopy(this.yuvData,M,C,0,j),C;for(let R=0;R<y;R++){const N=R*m;b.arraycopy(this.yuvData,M,C,N,m),M+=this.dataWidth}return C}isCropSupported(){return!0}crop(m,y,j,C){return new Xi(this.yuvData,this.dataWidth,this.dataHeight,this.left+m,this.top+y,j,C,!1)}renderThumbnail(){const m=this.getWidth()/Xi.THUMBNAIL_SCALE_FACTOR,y=this.getHeight()/Xi.THUMBNAIL_SCALE_FACTOR,j=new Int32Array(m*y),C=this.yuvData;let M=this.top*this.dataWidth+this.left;for(let R=0;R<y;R++){const N=R*m;for(let A=0;A<m;A++){const L=C[M+A*Xi.THUMBNAIL_SCALE_FACTOR]&255;j[N+A]=4278190080|L*65793}M+=this.dataWidth*Xi.THUMBNAIL_SCALE_FACTOR}return j}getThumbnailWidth(){return this.getWidth()/Xi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Xi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(m,y){const j=this.yuvData;for(let C=0,M=this.top*this.dataWidth+this.left;C<y;C++,M+=this.dataWidth){const R=M+m/2;for(let N=M,A=M+m-1;N<R;N++,A--){const L=j[N];j[N]=j[A],j[A]=L}}}invert(){return new ne(this)}}Xi.THUMBNAIL_SCALE_FACTOR=2;class Qd extends ee{constructor(m,y,j,C,M,R,N){if(super(y,j),this.dataWidth=C,this.dataHeight=M,this.left=R,this.top=N,m.BYTES_PER_ELEMENT===4){const A=y*j,L=new Uint8ClampedArray(A);for(let B=0;B<A;B++){const Y=m[B],te=Y>>16&255,se=Y>>7&510,ce=Y&255;L[B]=(te+se+ce)/4&255}this.luminances=L}else this.luminances=m;if(C===void 0&&(this.dataWidth=y),M===void 0&&(this.dataHeight=j),R===void 0&&(this.left=0),N===void 0&&(this.top=0),this.left+y>this.dataWidth||this.top+j>this.dataHeight)throw new h("Crop rectangle does not fit within image data.")}getRow(m,y){if(m<0||m>=this.getHeight())throw new h("Requested row is outside the image: "+m);const j=this.getWidth();(y==null||y.length<j)&&(y=new Uint8ClampedArray(j));const C=(m+this.top)*this.dataWidth+this.left;return b.arraycopy(this.luminances,C,y,0,j),y}getMatrix(){const m=this.getWidth(),y=this.getHeight();if(m===this.dataWidth&&y===this.dataHeight)return this.luminances;const j=m*y,C=new Uint8ClampedArray(j);let M=this.top*this.dataWidth+this.left;if(m===this.dataWidth)return b.arraycopy(this.luminances,M,C,0,j),C;for(let R=0;R<y;R++){const N=R*m;b.arraycopy(this.luminances,M,C,N,m),M+=this.dataWidth}return C}isCropSupported(){return!0}crop(m,y,j,C){return new Qd(this.luminances,j,C,this.dataWidth,this.dataHeight,this.left+m,this.top+y)}invert(){return new ne(this)}}class z0 extends G{static forName(m){return this.getCharacterSetECIByName(m)}}class cl{}cl.ISO_8859_1=G.ISO8859_1;class ro{isCompact(){return this.compact}setCompact(m){this.compact=m}getSize(){return this.size}setSize(m){this.size=m}getLayers(){return this.layers}setLayers(m){this.layers=m}getCodeWords(){return this.codeWords}setCodeWords(m){this.codeWords=m}getMatrix(){return this.matrix}setMatrix(m){this.matrix=m}}class F0{static singletonList(m){return[m]}static min(m,y){return m.sort(y)[0]}}class Jd{constructor(m){this.previous=m}getPrevious(){return this.previous}}class no extends Jd{constructor(m,y,j){super(m),this.value=y,this.bitCount=j}appendTo(m,y){m.appendBits(this.value,this.bitCount)}add(m,y){return new no(this,m,y)}addBinaryShift(m,y){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new no(this,m,y)}toString(){let m=this.value&(1<<this.bitCount)-1;return m|=1<<this.bitCount,"<"+T.toBinaryString(m|1<<this.bitCount).substring(1)+">"}}class eu extends no{constructor(m,y,j){super(m,0,0),this.binaryShiftStart=y,this.binaryShiftByteCount=j}appendTo(m,y){for(let j=0;j<this.binaryShiftByteCount;j++)(j===0||j===31&&this.binaryShiftByteCount<=62)&&(m.appendBits(31,5),this.binaryShiftByteCount>62?m.appendBits(this.binaryShiftByteCount-31,16):j===0?m.appendBits(Math.min(this.binaryShiftByteCount,31),5):m.appendBits(this.binaryShiftByteCount-31,5)),m.appendBits(y[this.binaryShiftStart+j],8)}addBinaryShift(m,y){return new eu(this,m,y)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Bh(ue,m,y){return new eu(ue,m,y)}function Vl(ue,m,y){return new no(ue,m,y)}const dl=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],io=0,tu=1,Pi=2,Vc=3,Zi=4,Hl=new no(null,0,0),ul=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function nm(ue){for(let m of ue)k.fill(m,-1);return ue[io][Zi]=0,ue[tu][Zi]=0,ue[tu][io]=28,ue[Vc][Zi]=0,ue[Pi][Zi]=0,ue[Pi][io]=15,ue}const Hc=nm(k.createInt32Array(6,6));class Ci{constructor(m,y,j,C){this.token=m,this.mode=y,this.binaryShiftByteCount=j,this.bitCount=C}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(m,y){let j=this.bitCount,C=this.token;if(m!==this.mode){let R=ul[this.mode][m];C=Vl(C,R&65535,R>>16),j+=R>>16}let M=m===Pi?4:5;return C=Vl(C,y,M),new Ci(C,m,0,j+M)}shiftAndAppend(m,y){let j=this.token,C=this.mode===Pi?4:5;return j=Vl(j,Hc[this.mode][m],C),j=Vl(j,y,5),new Ci(j,this.mode,0,this.bitCount+C+5)}addBinaryShiftChar(m){let y=this.token,j=this.mode,C=this.bitCount;if(this.mode===Zi||this.mode===Pi){let N=ul[j][io];y=Vl(y,N&65535,N>>16),C+=N>>16,j=io}let M=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,R=new Ci(y,j,this.binaryShiftByteCount+1,C+M);return R.binaryShiftByteCount===2078&&(R=R.endBinaryShift(m+1)),R}endBinaryShift(m){if(this.binaryShiftByteCount===0)return this;let y=this.token;return y=Bh(y,m-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ci(y,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(m){let y=this.bitCount+(ul[this.mode][m.mode]>>16);return this.binaryShiftByteCount<m.binaryShiftByteCount?y+=Ci.calculateBinaryShiftCost(m)-Ci.calculateBinaryShiftCost(this):this.binaryShiftByteCount>m.binaryShiftByteCount&&m.binaryShiftByteCount>0&&(y+=10),y<=m.bitCount}toBitArray(m){let y=[];for(let C=this.endBinaryShift(m.length).token;C!==null;C=C.getPrevious())y.unshift(C);let j=new D;for(const C of y)C.appendTo(j,m);return j}toString(){return ae.format("%s bits=%d bytes=%d",dl[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(m){return m.binaryShiftByteCount>62?21:m.binaryShiftByteCount>31?20:m.binaryShiftByteCount>0?10:0}}Ci.INITIAL_STATE=new Ci(Hl,io,0,0);function Rs(ue){const m=ae.getCharCode(" "),y=ae.getCharCode("."),j=ae.getCharCode(",");ue[io][m]=1;const C=ae.getCharCode("Z"),M=ae.getCharCode("A");for(let te=M;te<=C;te++)ue[io][te]=te-M+2;ue[tu][m]=1;const R=ae.getCharCode("z"),N=ae.getCharCode("a");for(let te=N;te<=R;te++)ue[tu][te]=te-N+2;ue[Pi][m]=1;const A=ae.getCharCode("9"),L=ae.getCharCode("0");for(let te=L;te<=A;te++)ue[Pi][te]=te-L+2;ue[Pi][j]=12,ue[Pi][y]=13;const B=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let te=0;te<B.length;te++)ue[Vc][ae.getCharCode(B[te])]=te;const Y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let te=0;te<Y.length;te++)ae.getCharCode(Y[te])>0&&(ue[Zi][ae.getCharCode(Y[te])]=te);return ue}const Gr=Rs(k.createInt32Array(5,256));class Ls{constructor(m){this.text=m}encode(){const m=ae.getCharCode(" "),y=ae.getCharCode(`
`);let j=F0.singletonList(Ci.INITIAL_STATE);for(let M=0;M<this.text.length;M++){let R,N=M+1<this.text.length?this.text[M+1]:0;switch(this.text[M]){case ae.getCharCode("\r"):R=N===y?2:0;break;case ae.getCharCode("."):R=N===m?3:0;break;case ae.getCharCode(","):R=N===m?4:0;break;case ae.getCharCode(":"):R=N===m?5:0;break;default:R=0}R>0?(j=Ls.updateStateListForPair(j,M,R),M++):j=this.updateStateListForChar(j,M)}return F0.min(j,(M,R)=>M.getBitCount()-R.getBitCount()).toBitArray(this.text)}updateStateListForChar(m,y){const j=[];for(let C of m)this.updateStateForChar(C,y,j);return Ls.simplifyStates(j)}updateStateForChar(m,y,j){let C=this.text[y]&255,M=Gr[m.getMode()][C]>0,R=null;for(let N=0;N<=Zi;N++){let A=Gr[N][C];if(A>0){if(R==null&&(R=m.endBinaryShift(y)),!M||N===m.getMode()||N===Pi){const L=R.latchAndAppend(N,A);j.push(L)}if(!M&&Hc[m.getMode()][N]>=0){const L=R.shiftAndAppend(N,A);j.push(L)}}}if(m.getBinaryShiftByteCount()>0||Gr[m.getMode()][C]===0){let N=m.addBinaryShiftChar(y);j.push(N)}}static updateStateListForPair(m,y,j){const C=[];for(let M of m)this.updateStateForPair(M,y,j,C);return this.simplifyStates(C)}static updateStateForPair(m,y,j,C){let M=m.endBinaryShift(y);if(C.push(M.latchAndAppend(Zi,j)),m.getMode()!==Zi&&C.push(M.shiftAndAppend(Zi,j)),j===3||j===4){let R=M.latchAndAppend(Pi,16-j).latchAndAppend(Pi,1);C.push(R)}if(m.getBinaryShiftByteCount()>0){let R=m.addBinaryShiftChar(y).addBinaryShiftChar(y+1);C.push(R)}}static simplifyStates(m){let y=[];for(const j of m){let C=!0;for(const M of y){if(M.isBetterThanOrEqualTo(j)){C=!1;break}j.isBetterThanOrEqualTo(M)&&(y=y.filter(R=>R!==M))}C&&y.push(j)}return y}}class qa{constructor(){}static encodeBytes(m){return qa.encode(m,qa.DEFAULT_EC_PERCENT,qa.DEFAULT_AZTEC_LAYERS)}static encode(m,y,j){let C=new Ls(m).encode(),M=T.truncDivision(C.getSize()*y,100)+11,R=C.getSize()+M,N,A,L,B,Y;if(j!==qa.DEFAULT_AZTEC_LAYERS){if(N=j<0,A=Math.abs(j),A>(N?qa.MAX_NB_BITS_COMPACT:qa.MAX_NB_BITS))throw new h(ae.format("Illegal value %s for layers",j));L=qa.totalBitsInLayer(A,N),B=qa.WORD_SIZE[A];let Ne=L-L%B;if(Y=qa.stuffBits(C,B),Y.getSize()+M>Ne)throw new h("Data to large for user specified layer");if(N&&Y.getSize()>B*64)throw new h("Data to large for user specified layer")}else{B=0,Y=null;for(let Ne=0;;Ne++){if(Ne>qa.MAX_NB_BITS)throw new h("Data too large for an Aztec code");if(N=Ne<=3,A=N?Ne+1:Ne,L=qa.totalBitsInLayer(A,N),R>L)continue;(Y==null||B!==qa.WORD_SIZE[A])&&(B=qa.WORD_SIZE[A],Y=qa.stuffBits(C,B));let Me=L-L%B;if(!(N&&Y.getSize()>B*64)&&Y.getSize()+M<=Me)break}}let te=qa.generateCheckWords(Y,L,B),se=Y.getSize()/B,ce=qa.generateModeMessage(N,A,se),pe=(N?11:14)+A*4,ye=new Int32Array(pe),ge;if(N){ge=pe;for(let Ne=0;Ne<ye.length;Ne++)ye[Ne]=Ne}else{ge=pe+1+2*T.truncDivision(T.truncDivision(pe,2)-1,15);let Ne=T.truncDivision(pe,2),Me=T.truncDivision(ge,2);for(let Te=0;Te<Ne;Te++){let Ge=Te+T.truncDivision(Te,15);ye[Ne-Te-1]=Me-Ge-1,ye[Ne+Te]=Me+Ge+1}}let _e=new U(ge);for(let Ne=0,Me=0;Ne<A;Ne++){let Te=(A-Ne)*4+(N?9:12);for(let Ge=0;Ge<Te;Ge++){let qe=Ge*2;for(let He=0;He<2;He++)te.get(Me+qe+He)&&_e.set(ye[Ne*2+He],ye[Ne*2+Ge]),te.get(Me+Te*2+qe+He)&&_e.set(ye[Ne*2+Ge],ye[pe-1-Ne*2-He]),te.get(Me+Te*4+qe+He)&&_e.set(ye[pe-1-Ne*2-He],ye[pe-1-Ne*2-Ge]),te.get(Me+Te*6+qe+He)&&_e.set(ye[pe-1-Ne*2-Ge],ye[Ne*2+He])}Me+=Te*8}if(qa.drawModeMessage(_e,N,ge,ce),N)qa.drawBullsEye(_e,T.truncDivision(ge,2),5);else{qa.drawBullsEye(_e,T.truncDivision(ge,2),7);for(let Ne=0,Me=0;Ne<T.truncDivision(pe,2)-1;Ne+=15,Me+=16)for(let Te=T.truncDivision(ge,2)&1;Te<ge;Te+=2)_e.set(T.truncDivision(ge,2)-Me,Te),_e.set(T.truncDivision(ge,2)+Me,Te),_e.set(Te,T.truncDivision(ge,2)-Me),_e.set(Te,T.truncDivision(ge,2)+Me)}let ke=new ro;return ke.setCompact(N),ke.setSize(ge),ke.setLayers(A),ke.setCodeWords(se),ke.setMatrix(_e),ke}static drawBullsEye(m,y,j){for(let C=0;C<j;C+=2)for(let M=y-C;M<=y+C;M++)m.set(M,y-C),m.set(M,y+C),m.set(y-C,M),m.set(y+C,M);m.set(y-j,y-j),m.set(y-j+1,y-j),m.set(y-j,y-j+1),m.set(y+j,y-j),m.set(y+j,y-j+1),m.set(y+j,y+j-1)}static generateModeMessage(m,y,j){let C=new D;return m?(C.appendBits(y-1,2),C.appendBits(j-1,6),C=qa.generateCheckWords(C,28,4)):(C.appendBits(y-1,5),C.appendBits(j-1,11),C=qa.generateCheckWords(C,40,4)),C}static drawModeMessage(m,y,j,C){let M=T.truncDivision(j,2);if(y)for(let R=0;R<7;R++){let N=M-3+R;C.get(R)&&m.set(N,M-5),C.get(R+7)&&m.set(M+5,N),C.get(20-R)&&m.set(N,M+5),C.get(27-R)&&m.set(M-5,N)}else for(let R=0;R<10;R++){let N=M-5+R+T.truncDivision(R,5);C.get(R)&&m.set(N,M-7),C.get(R+10)&&m.set(M+7,N),C.get(29-R)&&m.set(N,M+7),C.get(39-R)&&m.set(M-7,N)}}static generateCheckWords(m,y,j){let C=m.getSize()/j,M=new to(qa.getGF(j)),R=T.truncDivision(y,j),N=qa.bitsToWords(m,j,R);M.encode(N,R-C);let A=y%j,L=new D;L.appendBits(0,A);for(const B of Array.from(N))L.appendBits(B,j);return L}static bitsToWords(m,y,j){let C=new Int32Array(j),M,R;for(M=0,R=m.getSize()/y;M<R;M++){let N=0;for(let A=0;A<y;A++)N|=m.get(M*y+A)?1<<y-A-1:0;C[M]=N}return C}static getGF(m){switch(m){case 4:return Ee.AZTEC_PARAM;case 6:return Ee.AZTEC_DATA_6;case 8:return Ee.AZTEC_DATA_8;case 10:return Ee.AZTEC_DATA_10;case 12:return Ee.AZTEC_DATA_12;default:throw new h("Unsupported word size "+m)}}static stuffBits(m,y){let j=new D,C=m.getSize(),M=(1<<y)-2;for(let R=0;R<C;R+=y){let N=0;for(let A=0;A<y;A++)(R+A>=C||m.get(R+A))&&(N|=1<<y-1-A);(N&M)===M?(j.appendBits(N&M,y),R--):(N&M)===0?(j.appendBits(N|1,y),R--):j.appendBits(N,y)}return j}static totalBitsInLayer(m,y){return((y?88:112)+16*m)*m}}qa.DEFAULT_EC_PERCENT=33,qa.DEFAULT_AZTEC_LAYERS=0,qa.MAX_NB_BITS=32,qa.MAX_NB_BITS_COMPACT=4,qa.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Uc{encode(m,y,j,C){return this.encodeWithHints(m,y,j,C,null)}encodeWithHints(m,y,j,C,M){let R=cl.ISO_8859_1,N=qa.DEFAULT_EC_PERCENT,A=qa.DEFAULT_AZTEC_LAYERS;return M!=null&&(M.has(rn.CHARACTER_SET)&&(R=z0.forName(M.get(rn.CHARACTER_SET).toString())),M.has(rn.ERROR_CORRECTION)&&(N=T.parseInt(M.get(rn.ERROR_CORRECTION).toString())),M.has(rn.AZTEC_LAYERS)&&(A=T.parseInt(M.get(rn.AZTEC_LAYERS).toString()))),Uc.encodeLayers(m,y,j,C,R,N,A)}static encodeLayers(m,y,j,C,M,R,N){if(y!==ve.AZTEC)throw new h("Can only encode AZTEC, but got "+y);let A=qa.encode(ae.getBytes(m,M),R,N);return Uc.renderResult(A,j,C)}static renderResult(m,y,j){let C=m.getMatrix();if(C==null)throw new Ze;let M=C.getWidth(),R=C.getHeight(),N=Math.max(y,M),A=Math.max(j,R),L=Math.min(N/M,A/R),B=(N-M*L)/2,Y=(A-R*L)/2,te=new U(N,A);for(let se=0,ce=Y;se<R;se++,ce+=L)for(let pe=0,ye=B;pe<M;pe++,ye+=L)C.get(pe,se)&&te.setRegion(ye,ce,L,L);return te}}t.AbstractExpandedDecoder=Et,t.ArgumentException=u,t.ArithmeticException=be,t.AztecCode=ro,t.AztecCodeReader=Ie,t.AztecCodeWriter=Uc,t.AztecDecoder=vt,t.AztecDetector=Sn,t.AztecDetectorResult=ta,t.AztecEncoder=qa,t.AztecHighLevelEncoder=Ls,t.AztecPoint=Ca,t.BarcodeFormat=ve,t.Binarizer=g,t.BinaryBitmap=f,t.BitArray=D,t.BitMatrix=U,t.BitSource=mn,t.BrowserAztecCodeReader=st,t.BrowserBarcodeReader=mi,t.BrowserCodeReader=de,t.BrowserDatamatrixCodeReader=Sr,t.BrowserMultiFormatReader=Zd,t.BrowserPDF417Reader=Lh,t.BrowserQRCodeReader=Oh,t.BrowserQRCodeSvgWriter=ao,t.CharacterSetECI=G,t.ChecksumException=p,t.Code128Reader=lt,t.Code39Reader=oa,t.DataMatrixDecodedBitStreamParser=Cn,t.DataMatrixReader=Ts,t.DecodeHintType=O,t.DecoderResult=Ce,t.DefaultGridSampler=Lr,t.DetectorResult=Ht,t.EAN13Reader=xi,t.EncodeHintType=rn,t.Exception=d,t.FormatException=P,t.GenericGF=Ee,t.GenericGFPoly=xe,t.GlobalHistogramBinarizer=W,t.GridSampler=Da,t.GridSamplerInstance=ka,t.HTMLCanvasElementLuminanceSource=re,t.HybridBinarizer=K,t.ITFReader=xt,t.IllegalArgumentException=h,t.IllegalStateException=Ze,t.InvertedLuminanceSource=ne,t.LuminanceSource=ee,t.MathUtils=yt,t.MultiFormatOneDReader=Nn,t.MultiFormatReader=Xd,t.MultiFormatWriter=Kd,t.NotFoundException=F,t.OneDReader=Tt,t.PDF417DecodedBitStreamParser=at,t.PDF417DecoderErrorCorrection=ps,t.PDF417Reader=Hn,t.PDF417ResultMetadata=Js,t.PerspectiveTransform=zt,t.PlanarYUVLuminanceSource=Xi,t.QRCodeByteMatrix=ll,t.QRCodeDataMask=ni,t.QRCodeDecodedBitStreamParser=Ur,t.QRCodeDecoderErrorCorrectionLevel=Fa,t.QRCodeDecoderFormatInformation=an,t.QRCodeEncoder=wr,t.QRCodeEncoderQRCode=Mo,t.QRCodeMaskUtil=nn,t.QRCodeMatrixUtil=ma,t.QRCodeMode=pa,t.QRCodeReader=An,t.QRCodeVersion=aa,t.QRCodeWriter=Eo,t.RGBLuminanceSource=Qd,t.RSS14Reader=sr,t.RSSExpandedReader=dt,t.ReaderException=eo,t.ReedSolomonDecoder=Re,t.ReedSolomonEncoder=to,t.ReedSolomonException=ze,t.Result=fe,t.ResultMetadataType=Se,t.ResultPoint=Ye,t.StringUtils=ae,t.UnsupportedOperationException=Q,t.VideoInputDevice=Z,t.WhiteRectangleDetector=Bt,t.WriterException=kr,t.ZXingArrays=k,t.ZXingCharset=z0,t.ZXingInteger=T,t.ZXingStandardCharsets=cl,t.ZXingStringBuilder=J,t.ZXingStringEncoding=$,t.ZXingSystem=b,t.createAbstractExpandedDecoder=Hr,Object.defineProperty(t,"__esModule",{value:!0})}))})(Og,Og.exports)),Og.exports}var jn=vde();const bde=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var _L=(function(){function a(e,t,r){if(this.formatMap=new Map([[ra.QR_CODE,jn.BarcodeFormat.QR_CODE],[ra.AZTEC,jn.BarcodeFormat.AZTEC],[ra.CODABAR,jn.BarcodeFormat.CODABAR],[ra.CODE_39,jn.BarcodeFormat.CODE_39],[ra.CODE_93,jn.BarcodeFormat.CODE_93],[ra.CODE_128,jn.BarcodeFormat.CODE_128],[ra.DATA_MATRIX,jn.BarcodeFormat.DATA_MATRIX],[ra.MAXICODE,jn.BarcodeFormat.MAXICODE],[ra.ITF,jn.BarcodeFormat.ITF],[ra.EAN_13,jn.BarcodeFormat.EAN_13],[ra.EAN_8,jn.BarcodeFormat.EAN_8],[ra.PDF_417,jn.BarcodeFormat.PDF_417],[ra.RSS_14,jn.BarcodeFormat.RSS_14],[ra.RSS_EXPANDED,jn.BarcodeFormat.RSS_EXPANDED],[ra.UPC_A,jn.BarcodeFormat.UPC_A],[ra.UPC_E,jn.BarcodeFormat.UPC_E],[ra.UPC_EAN_EXTENSION,jn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!bde)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var n=this.createZXingFormats(e),i=new Map;i.set(jn.DecodeHintType.POSSIBLE_FORMATS,n),i.set(jn.DecodeHintType.TRY_HARDER,!1),this.hints=i}return a.prototype.decodeAsync=function(e){var t=this;return new Promise(function(r,n){try{r(t.decode(e))}catch(i){n(i)}})},a.prototype.decode=function(e){var t=new jn.MultiFormatReader(this.verbose,this.hints),r=new jn.HTMLCanvasElementLuminanceSource(e),n=new jn.BinaryBitmap(new jn.HybridBinarizer(r)),i=t.decode(n);return{text:i.text,format:eG.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,n){e.set(t,r)}),e},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createZXingFormats=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return t},a.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},a})(),yde=function(a,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((r=r.apply(a,e||[])).next())})},wde=function(a,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(t=0)),t;)try{if(r=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,n=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){t.label=d[1];break}if(d[0]===6&&t.label<i[1]){t.label=i[1],i=d;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(d);break}i[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(a,t)}catch(u){d=[6,u],n=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},NL=(function(){function a(e,t,r){if(this.formatMap=new Map([[ra.QR_CODE,"qr_code"],[ra.AZTEC,"aztec"],[ra.CODABAR,"codabar"],[ra.CODE_39,"code_39"],[ra.CODE_93,"code_93"],[ra.CODE_128,"code_128"],[ra.DATA_MATRIX,"data_matrix"],[ra.ITF,"itf"],[ra.EAN_13,"ean_13"],[ra.EAN_8,"ean_8"],[ra.PDF_417,"pdf417"],[ra.UPC_A,"upc_a"],[ra.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!a.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=r;var n=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(n),!this.detector)throw"BarcodeDetector detector not supported"}return a.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},a.prototype.decodeAsync=function(e){return yde(this,void 0,void 0,function(){var t,r;return wde(this,function(n){switch(n.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=n.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(t),[2,{text:r.rawValue,format:eG.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},a.prototype.selectLargestBarcode=function(e){for(var t=null,r=0,n=0,i=e;n<i.length;n++){var o=i[n],l=o.boundingBox.width*o.boundingBox.height;l>r&&(r=l,t=o)}if(!t)throw"No largest barcode found";return t},a.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,n){e.set(t,r)}),e},a.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},a})(),jL=function(a,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((r=r.apply(a,e||[])).next())})},SL=function(a,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(t=0)),t;)try{if(r=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,n=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){t.label=d[1];break}if(d[0]===6&&t.label<i[1]){t.label=i[1],i=d;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(d);break}i[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(a,t)}catch(u){d=[6,u],n=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},_de=(function(){function a(e,t,r,n){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&NL.isSupported()?(this.primaryDecoder=new NL(e,r,n),this.secondaryDecoder=new _L(e,r,n)):this.primaryDecoder=new _L(e,r,n)}return a.prototype.decodeAsync=function(e){return jL(this,void 0,void 0,function(){var t;return SL(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},a.prototype.decodeRobustlyAsync=function(e){return jL(this,void 0,void 0,function(){var t,r;return SL(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,n.sent()];case 3:if(r=n.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},a.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},a.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},a.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,r=this.executionResults;t<r.length;t++){var n=r[t];e+=n}var i=e/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},a})(),fT=(function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},a(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),v2=function(a,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((r=r.apply(a,e||[])).next())})},b2=function(a,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(t=0)),t;)try{if(r=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,n=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){t.label=d[1];break}if(d[0]===6&&t.label<i[1]){t.label=i[1],i=d;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(d);break}i[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(a,t)}catch(u){d=[6,u],n=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},aG=(function(){function a(e,t){this.name=e,this.track=t}return a.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},a.prototype.apply=function(e){var t={};t[this.name]=e;var r={advanced:[t]};return this.track.applyConstraints(r)},a.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},a})(),Nde=(function(a){fT(e,a);function e(t,r){return a.call(this,t,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),r=t[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(aG),jde=(function(a){fT(e,a);function e(t){return a.call(this,"zoom",t)||this}return e})(Nde),Sde=(function(a){fT(e,a);function e(t){return a.call(this,"torch",t)||this}return e})(aG),kde=(function(){function a(e){this.track=e}return a.prototype.zoomFeature=function(){return new jde(this.track)},a.prototype.torchFeature=function(){return new Sde(this.track)},a})(),Cde=(function(){function a(e,t,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return a.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},a.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=e.surface.clientWidth,n=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,n),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},a.create=function(e,t,r,n){return v2(this,void 0,void 0,function(){var i,o;return b2(this,function(l){switch(l.label){case 0:return i=new a(e,t,n),r.aspectRatio?(o={aspectRatio:r.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:l.sent(),l.label=2;case 2:return i.setupSurface(),[2,i]}})})},a.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},a.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},a.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},a.prototype.resume=function(e){this.failIfClosed();var t=this,r=function(){setTimeout(e,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},a.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},a.prototype.getSurface=function(){return this.failIfClosed(),this.surface},a.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},a.prototype.applyVideoConstraints=function(e){return v2(this,void 0,void 0,function(){return b2(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},a.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,r){var n=e.mediaStream.getVideoTracks(),i=n.length,o=0;e.mediaStream.getVideoTracks().forEach(function(l){e.mediaStream.removeTrack(l),l.stop(),++o,o>=i&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},a.prototype.getCapabilities=function(){return new kde(this.getFirstTrackOrFail())},a})(),Ade=(function(){function a(e){this.mediaStream=e}return a.prototype.render=function(e,t,r){return v2(this,void 0,void 0,function(){return b2(this,function(n){return[2,Cde.create(e,this.mediaStream,t,r)]})})},a.create=function(e){return v2(this,void 0,void 0,function(){var t,r;return b2(this,function(n){switch(n.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=n.sent(),[2,new a(r)]}})})},a})(),kL=function(a,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((r=r.apply(a,e||[])).next())})},CL=function(a,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(t=0)),t;)try{if(r=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,n=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){t.label=d[1];break}if(d[0]===6&&t.label<i[1]){t.label=i[1],i=d;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(d);break}i[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(a,t)}catch(u){d=[6,u],n=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Tde=(function(){function a(){}return a.failIfNotSupported=function(){return kL(this,void 0,void 0,function(){return CL(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new a]})})},a.prototype.create=function(e){return kL(this,void 0,void 0,function(){return CL(this,function(t){return[2,Ade.create(e)]})})},a})(),Mde=function(a,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((r=r.apply(a,e||[])).next())})},Ede=function(a,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(t=0)),t;)try{if(r=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,n=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){t.label=d[1];break}if(d[0]===6&&t.label<i[1]){t.label=i[1],i=d;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(d);break}i[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(a,t)}catch(u){d=[6,u],n=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Dde=(function(){function a(){}return a.retrieve=function(){if(navigator.mediaDevices)return a.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?a.getCamerasFromMediaStreamTrack():a.rejectWithError()},a.rejectWithError=function(){var e=qp.unableToQuerySupportedDevices();return a.isHttpsOrLocalhost()||(e=qp.insecureContextCameraQueryError()),Promise.reject(e)},a.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},a.getCamerasFromMediaDevices=function(){return Mde(this,void 0,void 0,function(){var e,t,r,n,i,o,l;return Ede(this,function(c){switch(c.label){case 0:return e=function(d){for(var u=d.getVideoTracks(),h=0,f=u;h<f.length;h++){var p=f[h];p.enabled=!1,p.stop(),d.removeTrack(p)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=c.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=c.sent(),n=[],i=0,o=r;i<o.length;i++)l=o[i],l.kind==="videoinput"&&n.push({id:l.deviceId,label:l.label});return e(t),[2,n]}})})},a.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var r=function(i){for(var o=[],l=0,c=i;l<c.length;l++){var d=c[l];d.kind==="video"&&o.push({id:d.id,label:d.label})}e(o)},n=MediaStreamTrack;n.getSources(r)})},a})(),Rn;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.NOT_STARTED=1]="NOT_STARTED",a[a.SCANNING=2]="SCANNING",a[a.PAUSED=3]="PAUSED"})(Rn||(Rn={}));var Ide=(function(){function a(){this.state=Rn.NOT_STARTED,this.onGoingTransactionNewState=Rn.UNKNOWN}return a.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},a.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},a.prototype.execute=function(){if(this.onGoingTransactionNewState===Rn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Rn.UNKNOWN,this.directTransition(e)},a.prototype.cancel=function(){if(this.onGoingTransactionNewState===Rn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Rn.UNKNOWN},a.prototype.getState=function(){return this.state},a.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Rn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},a.prototype.validateTransition=function(e){switch(this.state){case Rn.UNKNOWN:throw"Transition from unknown is not allowed";case Rn.NOT_STARTED:this.failIfNewStateIs(e,[Rn.PAUSED]);break;case Rn.SCANNING:break;case Rn.PAUSED:break}},a.prototype.failIfNewStateIs=function(e,t){for(var r=0,n=t;r<n.length;r++){var i=n[r];if(e===i)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},a})(),Rde=(function(){function a(e){this.stateManager=e}return a.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},a.prototype.directTransition=function(e){this.stateManager.directTransition(e)},a.prototype.getState=function(){return this.stateManager.getState()},a.prototype.canScanFile=function(){return this.stateManager.getState()===Rn.NOT_STARTED},a.prototype.isScanning=function(){return this.stateManager.getState()!==Rn.NOT_STARTED},a.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Rn.SCANNING},a.prototype.isPaused=function(){return this.stateManager.getState()===Rn.PAUSED},a})(),Lde=(function(){function a(){}return a.create=function(){return new Rde(new Ide)},a})(),Ode=(function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},a(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),po=(function(a){Ode(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(pde),Pde=(function(){function a(e,t){this.logger=t,this.fps=po.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=po.DEFAULT_DISABLE_FLIP}return a.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?tG.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},a.prototype.isShadedBoxEnabled=function(){return!md(this.qrbox)},a.create=function(e,t){return new a(e,t)},a})(),xh=(function(){function a(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof t=="boolean"?this.verbose=t===!0:t&&(r=t,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new mde(this.verbose),this.qrcode=new _de(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Lde.create()}return a.prototype.start=function(e,t,r,n){var i=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;n?o=n:o=this.verbose?this.logger.log:function(){};var l=Pde.create(t,this.logger);this.clearElement();var c=!1;l.videoConstraints&&(l.isMediaStreamConstraintsValid()?c=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=c,u=document.getElementById(this.elementId);u.clientWidth?u.clientWidth:po.DEFAULT_WIDTH,u.style.position="relative",this.shouldScan=!0,this.element=u;var h=this,f=this.stateManagerProxy.startTransition(Rn.SCANNING);return new Promise(function(p,g){var b=d?l.videoConstraints:h.createVideoConstraints(e);if(!b){f.cancel(),g("videoConstraints should be defined");return}var w={};(!d||l.aspectRatio)&&(w.aspectRatio=l.aspectRatio);var _={onRenderSurfaceReady:function(k,T){h.setupUi(k,T,l),h.isScanning=!0,h.foreverScan(l,r,o)}};Tde.failIfNotSupported().then(function(k){k.create(b).then(function(T){return T.render(i.element,w,_).then(function(D){h.renderedCamera=D,f.execute(),p(null)}).catch(function(D){f.cancel(),g(D)})}).catch(function(T){f.cancel(),g(qp.errorGettingUserMedia(T))})}).catch(function(k){f.cancel(),g(qp.cameraStreamingNotSupported())})})},a.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Rn.PAUSED),this.showPausedState(),(md(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},a.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Rn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},a.prototype.getState=function(){return this.stateManagerProxy.getState()},a.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Rn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var i=document.getElementById(po.SHADED_REGION_ELEMENT_ID);i&&e.element.removeChild(i)}},n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),r(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},a.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(r){return r.decodedText})},a.prototype.scanFileV2=function(e,t){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(md(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(n,i){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var l=o.width,c=o.height,d=document.getElementById(r.elementId),u=d.clientWidth?d.clientWidth:po.DEFAULT_WIDTH,h=Math.max(d.clientHeight?d.clientHeight:c,po.FILE_SCAN_MIN_HEIGHT),f=r.computeCanvasDrawConfig(l,c,u,h);if(t){var p=r.createCanvasElement(u,h,"qr-canvas-visible");p.style.display="inline-block",d.appendChild(p);var g=p.getContext("2d");if(!g)throw"Unable to get 2d context from canvas";g.canvas.width=u,g.canvas.height=h,g.drawImage(o,0,0,l,c,f.x,f.y,f.width,f.height)}var b=po.FILE_SCAN_HIDDEN_CANVAS_PADDING,w=Math.max(o.width,f.width),_=Math.max(o.height,f.height),k=w+2*b,T=_+2*b,D=r.createCanvasElement(k,T);d.appendChild(D);var I=D.getContext("2d");if(!I)throw"Unable to get 2d context from canvas";I.canvas.width=k,I.canvas.height=T,I.drawImage(o,0,0,l,c,b,b,w,_);try{r.qrcode.decodeRobustlyAsync(D).then(function(O){n(yL.createFromQrcodeResult(O))}).catch(i)}catch(O){i("QR code parse error, error = ".concat(O))}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(e)})},a.prototype.clear=function(){this.clearElement()},a.getCameras=function(){return Dde.retrieve()},a.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},a.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},a.prototype.applyVideoConstraints=function(e){if(e){if(!tG.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},a.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},a.prototype.getSupportedFormats=function(e){var t=[ra.QR_CODE,ra.AZTEC,ra.CODABAR,ra.CODE_39,ra.CODE_93,ra.CODE_128,ra.DATA_MATRIX,ra.MAXICODE,ra.ITF,ra.EAN_13,ra.EAN_8,ra.PDF_417,ra.RSS_14,ra.RSS_EXPANDED,ra.UPC_A,ra.UPC_E,ra.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],n=0,i=e.formatsToSupport;n<i.length;n++){var o=i[n];fde(o)?r.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},a.prototype.getUseBarCodeDetectorIfSupported=function(e){if(md(e))return!0;if(!md(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(md(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return md(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},a.prototype.validateQrboxSize=function(e,t,r){var n=this,i=r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(e,t,i),l=function(d){if(d<po.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(po.MIN_QR_BOX_SIZE,"px.")},c=function(d){return d>e&&(n.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=e),d};l(o.width),l(o.height),o.width=c(o.width)},a.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},a.prototype.toQrdimensions=function(e,t,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,t)}catch(n){throw new Error("qrbox config was passed as a function but it failed with unknown error"+n)}return r},a.prototype.setupUi=function(e,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,r);var n=md(r.qrbox)?{width:e,height:t}:r.qrbox;this.validateQrboxConfig(n);var i=this.toQrdimensions(e,t,n);i.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=r.isShadedBoxEnabled()&&i.height<=t,l={x:0,y:0,width:e,height:t},c=o?this.getShadedRegionBounds(e,t,i):l,d=this.createCanvasElement(c.width,c.height),u={willReadFrequently:!0},h=d.getContext("2d",u);h.canvas.width=c.width,h.canvas.height=c.height,this.element.append(d),o&&this.possiblyInsertShadingElement(this.element,e,t,i),this.createScannerPausedUiElement(this.element),this.qrRegion=c,this.context=h,this.canvasElement=d},a.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=qp.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},a.prototype.scanContext=function(e,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(n){return e(n.text,yL.createFromQrcodeResult(n)),r.possiblyUpdateShaders(!0),!0}).catch(function(n){r.possiblyUpdateShaders(!1);var i=qp.codeParseError(n);return t(i,xde.createFrom(i)),!1})},a.prototype.foreverScan=function(e,t,r){var n=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,l=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var c=this.qrRegion.width*o,d=this.qrRegion.height*l,u=this.qrRegion.x*o,h=this.qrRegion.y*l;this.context.drawImage(i,u,h,c,d,0,0,this.qrRegion.width,this.qrRegion.height);var f=function(){n.foreverScanTimeout=setTimeout(function(){n.foreverScan(e,t,r)},n.getTimeoutFps(e.fps))};this.scanContext(t,r).then(function(p){!p&&e.disableFlip!==!0?(n.context.translate(n.context.canvas.width,0),n.context.scale(-1,1),n.scanContext(t,r).finally(function(){f()})):f()}).catch(function(p){n.logger.logError("Error happend while scanning context",p),f()})}},a.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",r="deviceId",n={user:!0,environment:!0},i="exact",o=function(g){if(g in n)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(g,"'")},l=Object.keys(e);if(l.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(l.length," keys");var c=Object.keys(e)[0];if(c!==t&&c!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(c===t){var d=e.facingMode;if(typeof d=="string"){if(o(d))return{facingMode:d}}else if(typeof d=="object")if(i in d){if(o(d["".concat(i)]))return{facingMode:{exact:d["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var u=typeof d;throw"Invalid type of 'facingMode' = ".concat(u)}}else{var h=e.deviceId;if(typeof h=="string")return{deviceId:h};if(typeof h=="object"){if(i in h)return{deviceId:{exact:h["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}else{var f=typeof h;throw"Invalid type of 'deviceId' = ".concat(f)}}}var p=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(p)},a.prototype.computeCanvasDrawConfig=function(e,t,r,n){if(e<=r&&t<=n){var i=(r-e)/2,o=(n-t)/2;return{x:i,y:o,width:e,height:t}}else{var l=e,c=t;return e>r&&(t=r/e*t,e=r),t>n&&(e=n/t*e,t=n),this.logger.log("Image downsampled from "+"".concat(l,"X").concat(c)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,r,n)}},a.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},a.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?po.BORDER_SHADER_MATCH_COLOR:po.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},a.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},a.prototype.createCanvasElement=function(e,t,r){var n=e,i=t,o=document.createElement("canvas");return o.style.width="".concat(n,"px"),o.style.height="".concat(i,"px"),o.style.display="none",o.id=md(r)?"qr-canvas":r,o},a.prototype.getShadedRegionBounds=function(e,t,r){if(r.width>e||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},a.prototype.possiblyInsertShadingElement=function(e,t,r,n){if(!(t-n.width<1||r-n.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(t-n.width)/2,l=(r-n.height)/2;if(i.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(po.SHADED_REGION_ELEMENT_ID),t-n.width<11||r-n.height<11)this.hasBorderShaders=!1;else{var c=5,d=40;this.insertShaderBorders(i,d,c,-c,null,0,!0),this.insertShaderBorders(i,d,c,-c,null,0,!1),this.insertShaderBorders(i,d,c,null,-c,0,!0),this.insertShaderBorders(i,d,c,null,-c,0,!1),this.insertShaderBorders(i,c,d+c,-c,null,-c,!0),this.insertShaderBorders(i,c,d+c,null,-c,-c,!0),this.insertShaderBorders(i,c,d+c,-c,null,-c,!1),this.insertShaderBorders(i,c,d+c,null,-c,-c,!1),this.hasBorderShaders=!0}e.append(i)}},a.prototype.insertShaderBorders=function(e,t,r,n,i,o,l){var c=document.createElement("div");c.style.position="absolute",c.style.backgroundColor=po.BORDER_SHADER_DEFAULT_COLOR,c.style.width="".concat(t,"px"),c.style.height="".concat(r,"px"),n!==null&&(c.style.top="".concat(n,"px")),i!==null&&(c.style.bottom="".concat(i,"px")),l?c.style.left="".concat(o,"px"):c.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(c),e.appendChild(c)},a.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},a.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},a.prototype.getTimeoutFps=function(e){return 1e3/e},a})(),AL;(function(a){a[a.STATUS_DEFAULT=0]="STATUS_DEFAULT",a[a.STATUS_SUCCESS=1]="STATUS_SUCCESS",a[a.STATUS_WARNING=2]="STATUS_WARNING",a[a.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(AL||(AL={}));var bx;(function(a){a.Unimplemented="UNIMPLEMENTED",a.Unavailable="UNAVAILABLE"})(bx||(bx={}));class ek extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const Bde=a=>{var e,t;return a?.androidBridge?"android":!((t=(e=a?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},zde=a=>{const e=a.CapacitorCustomPlatform||null,t=a.Capacitor||{},r=t.Plugins=t.Plugins||{},n=()=>e!==null?e.name:Bde(a),i=()=>n()!=="web",o=h=>{const f=d.get(h);return!!(f?.platforms.has(n())||l(h))},l=h=>{var f;return(f=t.PluginHeaders)===null||f===void 0?void 0:f.find(p=>p.name===h)},c=h=>a.console.error(h),d=new Map,u=(h,f={})=>{const p=d.get(h);if(p)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),p.proxy;const g=n(),b=l(h);let w;const _=async()=>(!w&&g in f?w=typeof f[g]=="function"?w=await f[g]():w=f[g]:e!==null&&!w&&"web"in f&&(w=typeof f.web=="function"?w=await f.web():w=f.web),w),k=(V,G)=>{var Q,$;if(b){const ae=b?.methods.find(J=>G===J.name);if(ae)return ae.rtype==="promise"?J=>t.nativePromise(h,G.toString(),J):(J,U)=>t.nativeCallback(h,G.toString(),J,U);if(V)return(Q=V[G])===null||Q===void 0?void 0:Q.bind(V)}else{if(V)return($=V[G])===null||$===void 0?void 0:$.bind(V);throw new ek(`"${h}" plugin is not implemented on ${g}`,bx.Unimplemented)}},T=V=>{let G;const Q=(...$)=>{const ae=_().then(J=>{const U=k(J,V);if(U){const F=U(...$);return G=F?.remove,F}else throw new ek(`"${h}.${V}()" is not implemented on ${g}`,bx.Unimplemented)});return V==="addListener"&&(ae.remove=async()=>G()),ae};return Q.toString=()=>`${V.toString()}() { [capacitor code] }`,Object.defineProperty(Q,"name",{value:V,writable:!1,configurable:!1}),Q},D=T("addListener"),I=T("removeListener"),O=(V,G)=>{const Q=D({eventName:V},G),$=async()=>{const J=await Q;I({eventName:V,callbackId:J},G)},ae=new Promise(J=>Q.then(()=>J({remove:$})));return ae.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await $()},ae},P=new Proxy({},{get(V,G){switch(G){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return b?O:D;case"removeListener":return I;default:return T(G)}}});return r[h]=P,d.set(h,{name:h,proxy:P,platforms:new Set([...Object.keys(f),...b?[g]:[]])}),P};return t.convertFileSrc||(t.convertFileSrc=h=>h),t.getPlatform=n,t.handleError=c,t.isNativePlatform=i,t.isPluginAvailable=o,t.registerPlugin=u,t.Exception=ek,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},Fde=a=>a.Capacitor=zde(a),mh=Fde(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),q_=mh.registerPlugin;class pT{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,t);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const n=this.listeners[e];if(!n){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(t),this.retainedEventArguments[e]=i}return}n.forEach(i=>i(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new mh.Exception(e,bx.Unimplemented)}unavailable(e="not available"){return new mh.Exception(e,bx.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const n=r.indexOf(t);this.listeners[e].splice(n,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const TL=a=>encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ML=a=>a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Vde extends pT{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[n,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=ML(n).trim(),i=ML(i).trim(),t[n]=i}),t}async setCookie(e){try{const t=TL(e.key),r=TL(e.value),n=e.expires?`; expires=${e.expires.replace("expires=","")}`:"",i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${n}; path=${i}; ${o};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}q_("CapacitorCookies",{web:()=>new Vde});const Hde=async a=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const n=r.result;e(n.indexOf(",")>=0?n.split(",")[1]:n)},r.onerror=n=>t(n),r.readAsDataURL(a)}),Ude=(a={})=>{const e=Object.keys(a);return Object.keys(a).map(n=>n.toLocaleLowerCase()).reduce((n,i,o)=>(n[i]=a[e[o]],n),{})},Gde=(a,e=!0)=>a?Object.entries(a).reduce((r,n)=>{const[i,o]=n;let l,c;return Array.isArray(o)?(c="",o.forEach(d=>{l=e?encodeURIComponent(d):d,c+=`${i}=${l}&`}),c.slice(0,-1)):(l=e?encodeURIComponent(o):o,c=`${i}=${l}`),`${r}&${c}`},"").substr(1):null,Wde=(a,e={})=>{const t=Object.assign({method:a.method||"GET",headers:a.headers},e),n=Ude(a.headers)["content-type"]||"";if(typeof a.data=="string")t.body=a.data;else if(n.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,l]of Object.entries(a.data||{}))i.set(o,l);t.body=i.toString()}else if(n.includes("multipart/form-data")||a.data instanceof FormData){const i=new FormData;if(a.data instanceof FormData)a.data.forEach((l,c)=>{i.append(c,l)});else for(const l of Object.keys(a.data))i.append(l,a.data[l]);t.body=i;const o=new Headers(t.headers);o.delete("content-type"),t.headers=o}else(n.includes("application/json")||typeof a.data=="object")&&(t.body=JSON.stringify(a.data));return t};class $de extends pT{async request(e){const t=Wde(e,e.webFetchExtra),r=Gde(e.params,e.shouldEncodeUrlParams),n=r?`${e.url}?${r}`:e.url,i=await fetch(n,t),o=i.headers.get("content-type")||"";let{responseType:l="text"}=i.ok?e:{};o.includes("application/json")&&(l="json");let c,d;switch(l){case"arraybuffer":case"blob":d=await i.blob(),c=await Hde(d);break;case"json":c=await i.json();break;default:c=await i.text()}const u={};return i.headers.forEach((h,f)=>{u[f]=h}),{data:c,headers:u,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}q_("CapacitorHttp",{web:()=>new $de});var EL;(function(a){a.Dark="DARK",a.Light="LIGHT",a.Default="DEFAULT"})(EL||(EL={}));var DL;(function(a){a.StatusBar="StatusBar",a.NavigationBar="NavigationBar"})(DL||(DL={}));class Yde extends pT{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}q_("SystemBars",{web:()=>new Yde});const qde="modulepreload",Xde=function(a){return"/"+a},IL={},rG=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");n=c(t.map(d=>{if(d=Xde(d),d in IL)return;IL[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":qde,u||(f.as="script"),f.crossOrigin="",f.href=d,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var o4;(function(a){a[a.BACK=1]="BACK",a[a.FRONT=2]="FRONT"})(o4||(o4={}));var l4;(function(a){a[a.PORTRAIT=1]="PORTRAIT",a[a.LANDSCAPE=2]="LANDSCAPE",a[a.ADAPTIVE=3]="ADAPTIVE"})(l4||(l4={}));var c4;(function(a){a[a.ALL=17]="ALL"})(c4||(c4={}));const Zde=Object.assign(Object.assign({},ra),c4);var RL;(function(a){a.ZXING="zxing",a.MLKIT="mlkit"})(RL||(RL={}));const Kde=[{selector:".scanner-container-display",css:"display: block;"},{selector:".scanner-dialog",css:"display: none; position: fixed; z-index: 999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);"},{selector:".scanner-dialog-inner",css:"background-color: #fefefe; margin: 2% auto; padding: 20px; border: 1px solid #888; width: 96%;"},{selector:".close-button",css:"color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;"},{selector:".close-button:hover",css:"color: #222;"},{selector:".scanner-container-full-width",css:"width: 100%;"}];function Qde(a){const e="custom-style-os-cap-barcode";let t=document.getElementById(e);if(t||(t=document.createElement("style"),t.type="text/css",t.id=e,document.head.appendChild(t)),t.sheet){for(;t.sheet.cssRules.length;)t.sheet.deleteRule(0);for(const{selector:r,css:n}of a)t.sheet.insertRule(`${r} { ${n} }`)}else{t.textContent="";for(const{selector:r,css:n}of a)t.textContent+=`${r} { ${n} }`}}const Jde=q_("CapacitorBarcodeScanner",{web:()=>(Qde(Kde),rG(()=>import("./web-ClfwReEE.js"),[]).then(a=>new a.CapacitorBarcodeScannerWeb))});class eue{static async scanBarcode(e){return e.scanInstructions=e.scanInstructions||" ",e.scanButton=e.scanButton||!1,e.scanText=e.scanText||" ",e.cameraDirection=e.cameraDirection||o4.BACK,e.scanOrientation=e.scanOrientation||l4.ADAPTIVE,Jde.scanBarcode(e)}}async function X_(){if(!mh.isNativePlatform())return{isNative:!1};try{const a=await eue.scanBarcode({hint:Zde.QR_CODE,scanInstructions:"QR    .",scanButton:!1});return a&&a.ScanResult?{isNative:!0,content:a.ScanResult}:{isNative:!0,content:null}}catch(a){throw console.error("Native scan failed:",a),a}}async function Z_(){}const tue=()=>{Fn();const{showAlert:a}=Na(),[e,t]=H.useState([]),[r,n]=H.useState([]),[i,o]=H.useState(!0),l=H.useRef(null),{pullDistance:c,isRefreshing:d,bind:u}=JU(async()=>{await ae()},{scrollEltRef:l}),[h,f]=H.useState({log_id:0,batch_id:null,space_id:null,log_date:ea().format("YYYY-MM-DD"),worker_name:sessionStorage.getItem("username")||"",work_type:"",work_content:"",input_materials:null,env_data:{temp:"",humi:""},photos:null}),[p,g]=H.useState(null),b=H.useRef(null),[w,_]=H.useState(!1),[k,T]=H.useState(""),D=H.useRef(null),I=H.useRef(null),O=H.useRef(null),[P,V]=H.useState(null);H.useEffect(()=>{let W=!0;if(w){if(mh.isNativePlatform())return(async()=>{try{const ne=await X_();ne.content&&W&&$(ne.content)}catch(ne){console.error("Native scan error",ne),V("   : "+ne.message)}})(),()=>{W=!1,Z_()};const K=setTimeout(async()=>{if(!(!W||!document.getElementById("reader-worklog")))try{if(I.current)try{I.current.isScanning&&await I.current.stop()}catch(Z){console.warn("Cleanup failed",Z)}const ne=new xh("reader-worklog");I.current=ne;const re={fps:15,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1};try{await ne.start({facingMode:"environment"},re,Z=>{W&&(V(null),$(Z))},Z=>{})}catch(Z){console.log("Back camera failed, trying front",Z),await ne.start({facingMode:"user"},re,ie=>{W&&(V(null),$(ie))},()=>{})}}catch(ne){console.error("Scanner initialization failed:",ne),!window.isSecureContext&&window.location.hostname!=="localhost"?V("  (HTTPS) . WiFi(HTTP)       ."):V(`   : ${ne.message||"  "}`)}},500);return()=>{if(W=!1,clearTimeout(K),I.current){const ee=I.current;ee.getState&&ee.getState()===2?ee.stop().catch(ne=>console.error("Stop failed",ne)):ee.isScanning&&ee.stop().catch(ne=>console.error("Stop failed",ne))}}}},[w]);const G=async W=>{const K=W.target.files?.[0];if(K)try{const ne=await new xh("reader-worklog").scanFileV2(K,!1);$(ne.decodedText),_(!1)}catch{alert("    .  .")}},Q=()=>{_(!0),T("")},$=async W=>{if(!W)return;const K=W.trim();if(console.log("WorkLog Processing Scanned QR:",K),I.current)try{((I.current.getState?I.current.getState():0)===2||I.current.isScanning)&&await I.current.stop()}catch(Z){console.warn("Stop on success failed",Z)}const ee=K.split("|").map(Z=>Z.trim());if(ee[0]==="BATCH"&&ee[1]){const Z=parseInt(ee[1]),ie=r.find(de=>Number(de.batch_id)===Z);if(ie){f(de=>({...de,batch_id:ie.batch_id})),_(!1),setTimeout(()=>O.current?.focus(),300),a(" ",` [${ie.batch_code}] .`);return}}else if(ee[0]==="SPACE"&&ee[1]){const Z=parseInt(ee[1]),ie=e.find(de=>Number(de.space_id)===Z);if(ie){f(de=>({...de,space_id:ie.space_id})),_(!1),a(" ",` [${ie.space_name}] .`);return}}const ne=r.find(Z=>Z.batch_code===K);if(ne){f(Z=>({...Z,batch_id:ne.batch_id})),_(!1),a(" ",` [${ne.batch_code}] .`);return}const re=e.find(Z=>Z.space_name===K);if(re){f(Z=>({...Z,space_id:re.space_id})),_(!1),setTimeout(()=>O.current?.focus(),300),a(" ",` [${re.space_name}] .`);return}_(!1),a(" ",`[${K}]    .`)};H.useEffect(()=>{ae()},[]);const ae=async()=>{try{const[W,K]=await Promise.all([pt("get_production_spaces"),pt("get_production_batches")]);t(W||[]),n(K||[])}catch(W){console.error(W),a("  ","    .")}finally{o(!1)}},J=async()=>{if(!h.work_content){a(" ","   .");return}try{const W=await pt("save_farming_log",{log:h});if(W&&W.success)a(" ","    ."),f(K=>({...K,work_content:"",env_data:{temp:"",humi:""}}));else throw new Error(W?.error||"Unknown error")}catch(W){console.error(W),a(" ","    : "+W)}},U=()=>{b.current?.click()},F=W=>{const K=W.target.files[0];if(K){const ee=new FileReader;ee.onloadend=()=>{g(ee.result),f(ne=>({...ne,photos:ee.result}))},ee.readAsDataURL(K)}};return s.jsxs("div",{ref:l,...u,className:"min-h-screen bg-slate-50 flex flex-col font-sans pb-20 overflow-y-auto touch-pan-y",children:[s.jsx("div",{className:"fixed left-0 right-0 top-0 flex justify-center pointer-events-none z-[60] transition-transform",style:{transform:`translateY(${c}px)`,opacity:c>20?1:0},children:s.jsx("div",{className:"bg-white/90 backdrop-blur-md p-2 rounded-full shadow-lg border border-slate-200 mt-2",children:s.jsx(RefreshCw,{size:20,className:`text-indigo-600 ${d?"animate-spin":""}`,style:{transform:d?"none":`rotate(${c*3}deg)`,transition:d?"none":"transform 0.1s"}})})}),s.jsxs("div",{className:"bg-white border-b border-slate-100 p-4 pt-4 sticky top-0 z-50 flex items-center justify-between",children:[s.jsx("button",{className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400",onClick:()=>window.history.back(),children:s.jsx(GA,{size:20})}),s.jsx("h1",{className:"text-lg font-black text-slate-800",children:"  "}),s.jsx("div",{className:"w-10"})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:b,onChange:F,className:"hidden"}),s.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-sm border border-slate-100 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-3 text-slate-800 font-black",children:[s.jsx(B_,{size:18,className:"text-indigo-500"}),s.jsx("span",{children:" / "})]}),s.jsxs("button",{onClick:Q,className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-600 border border-indigo-100 rounded-xl font-black text-xs transition-all active:scale-95",children:[s.jsx(f0,{size:14}),s.jsx("span",{children:"QR "})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("select",{className:"w-full h-14 bg-slate-50 border-none rounded-2xl px-4 text-sm font-bold text-slate-700 appearance-none bg-no-repeat bg-[right_1rem_center]",value:h.space_id||"",onChange:W=>f({...h,space_id:W.target.value?parseInt(W.target.value):null}),children:[s.jsx("option",{value:"",children:"  ( )"}),e.map(W=>s.jsx("option",{value:W.space_id,children:W.space_name},W.space_id))]}),s.jsxs("select",{className:"w-full h-14 bg-slate-50 border-none rounded-2xl px-4 text-sm font-bold text-slate-700",value:h.batch_id||"",onChange:W=>f({...h,batch_id:W.target.value?parseInt(W.target.value):null}),children:[s.jsx("option",{value:"",children:"   ( )"}),r.map(W=>s.jsx("option",{value:W.batch_id,children:W.batch_code},W.batch_id))]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white p-4 rounded-3xl shadow-sm border border-slate-100 flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-rose-50 text-rose-500 flex items-center justify-center",children:s.jsx(yb,{size:18})}),s.jsx("input",{ref:O,type:"number",placeholder:"",className:"w-full bg-transparent border-none text-sm font-black text-slate-800 placeholder:text-slate-300",value:h.env_data.temp,onChange:W=>f({...h,env_data:{...h.env_data,temp:W.target.value}}),inputMode:"decimal"}),s.jsx("span",{className:"text-xs font-bold text-slate-400",children:"C"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-3xl shadow-sm border border-slate-100 flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-blue-50 text-blue-500 flex items-center justify-center",children:s.jsx(h0,{size:18})}),s.jsx("input",{type:"number",placeholder:"",className:"w-full bg-transparent border-none text-sm font-black text-slate-800 placeholder:text-slate-300",value:h.env_data.humi,onChange:W=>f({...h,env_data:{...h.env_data,humi:W.target.value}})}),s.jsx("span",{className:"text-xs font-bold text-slate-400",children:"%"})]})]}),s.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-sm border border-slate-100 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 text-slate-800 font-black mb-2",children:[s.jsx(hh,{size:18,className:"text-indigo-500"}),s.jsx("span",{children:"  "})]}),s.jsx("textarea",{className:"w-full min-h-[150px] bg-slate-50 border-none rounded-2xl p-4 text-sm font-medium text-slate-700 placeholder:text-slate-300 resize-none",placeholder:"  ? (:  ,  )",value:h.work_content,onChange:W=>f({...h,work_content:W.target.value})})]}),s.jsx("button",{onClick:U,className:"w-full bg-white p-6 rounded-3xl shadow-sm border-2 border-dashed border-slate-200 flex flex-col items-center justify-center gap-2 group active:bg-slate-50 transition-colors overflow-hidden",children:p?s.jsxs("div",{className:"w-full aspect-video rounded-xl overflow-hidden relative",children:[s.jsx("img",{src:p,alt:"Preview",className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(UC,{size:32,className:"text-white"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-50 text-slate-400 flex items-center justify-center group-hover:bg-indigo-50 group-hover:text-indigo-500 transition-colors",children:s.jsx(UC,{size:24})}),s.jsx("span",{className:"text-sm font-black text-slate-400 group-hover:text-indigo-500",children:"   ()"})]})})]}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 pb-24 bg-white/80 backdrop-blur-xl border-t border-slate-100 z-40",children:s.jsxs("button",{onClick:J,className:"w-full h-14 bg-indigo-600 rounded-2xl text-white font-black text-lg flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 active:scale-95 transition-transform",children:[s.jsx(rs,{size:20})," "]})}),w&&s.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-start p-6 pt-12 animate-in fade-in duration-300 overflow-y-auto",children:[s.jsxs("div",{className:"relative w-full max-w-[280px] aspect-square border-2 border-indigo-500/50 rounded-[2.5rem] overflow-hidden bg-slate-950 shadow-2xl flex items-center justify-center shrink-0",children:[s.jsx("div",{id:"reader-worklog",className:"absolute inset-0 z-0"}),P&&s.jsxs("div",{className:"z-20 flex flex-col items-center gap-4 px-6 py-4 bg-slate-800/95 text-white rounded-3xl text-center mx-4 border border-white/10 shadow-2xl",children:[s.jsx("p",{className:"text-xs font-black leading-relaxed",children:P}),s.jsx("button",{onClick:()=>b.current?.click(),className:"px-6 py-3 bg-indigo-600 rounded-2xl text-sm font-black shadow-lg active:scale-95 transition-all",children:"  "}),s.jsx("input",{ref:b,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:G})]}),s.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[s.jsx("div",{className:"absolute inset-x-0 h-1 bg-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.8)] animate-scan"}),s.jsx("div",{className:"absolute top-8 left-8 w-8 h-8 border-t-4 border-l-4 border-white rounded-tl-lg"}),s.jsx("div",{className:"absolute top-8 right-8 w-8 h-8 border-t-4 border-r-4 border-white rounded-tr-lg"}),s.jsx("div",{className:"absolute bottom-8 left-8 w-8 h-8 border-b-4 border-l-4 border-white rounded-bl-lg"}),s.jsx("div",{className:"absolute bottom-8 right-8 w-8 h-8 border-b-4 border-r-4 border-white rounded-br-lg"})]})]}),s.jsxs("div",{className:"mt-6 text-center text-white space-y-4 w-full",children:[s.jsx("h3",{className:"text-xl font-black",children:" QR  "}),s.jsx("p",{className:"text-sm text-slate-400",children:"  QR  ."}),s.jsxs("div",{className:"max-w-xs mx-auto pt-2 space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block",children:"   (  )"}),s.jsx("div",{className:"relative opacity-60 focus-within:opacity-100 transition-opacity",children:s.jsx("input",{ref:D,type:"text",className:"w-full h-12 bg-white/5 border border-white/10 rounded-2xl px-6 text-white text-center font-black focus:border-indigo-500/50 focus:ring-0 transition-all outline-none text-xs",placeholder:"  ",value:k,onChange:W=>T(W.target.value),onKeyDown:W=>{W.key==="Enter"&&($(k),W.target.blur())}})})]})]}),s.jsx("button",{onClick:()=>_(!1),className:"mt-8 mb-12 w-16 h-16 bg-white/10 hover:bg-white/20 text-white rounded-full flex items-center justify-center transition-all active:scale-90 shrink-0",children:s.jsx(js,{size:32})}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                        @keyframes scan { 0% { top: 0; } 50% { top: 100%; } 100% { top: 0; } }
                        .animate-scan { position: absolute; animation: scan 3s infinite linear; }
                        #reader-worklog video { 
                            object-fit: cover !important;
                            height: 100% !important;
                            width: 100% !important;
                        }
                    `}})]})]})},aue=()=>{Fn();const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState([]),[n,i]=H.useState(!0),[o,l]=H.useState({harvest_id:0,batch_id:null,harvest_date:ea().format("YYYY-MM-DD"),quantity:0,defective_quantity:0,loss_quantity:0,unit:"kg",grade:"",traceability_code:"",memo:"",package_count:0,weight_per_package:0,package_unit:"kg"}),[c,d]=H.useState(!1),[u,h]=H.useState(!1),[f,p]=H.useState(""),g=H.useRef(null),b=H.useRef(null),w=H.useRef(null),_=H.useRef(null),[k,T]=H.useState(null);H.useEffect(()=>{let $=!0;if(u){if(mh.isNativePlatform())return(async()=>{try{const U=await X_();U.content&&$&&O(U.content)}catch(U){console.error("Native scan error",U),T("   : "+U.message)}})(),()=>{$=!1,Z_()};const ae=setTimeout(async()=>{if(!(!$||!document.getElementById("reader-harvest")))try{if(b.current)try{b.current.isScanning&&await b.current.stop()}catch(W){console.warn("Cleanup of old scanner failed",W)}const U=new xh("reader-harvest");b.current=U;const F={fps:15,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1};try{await U.start({facingMode:"environment"},F,W=>{$&&(T(null),O(W))},W=>{})}catch(W){console.log("Environment camera start failed, trying any",W),await U.start({facingMode:"user"},F,K=>{$&&(T(null),O(K))},()=>{})}}catch(U){console.error("Scanner initialization failed:",U),!window.isSecureContext&&window.location.hostname!=="localhost"?T("  (HTTPS) . WiFi(HTTP)       ."):T(`   : ${U.message||"  "}`)}},500);return()=>{if($=!1,clearTimeout(ae),b.current){const J=b.current;J.getState&&J.getState()===2?J.stop().catch(U=>console.error("Stop failed",U)):J.isScanning&&J.stop().catch(U=>console.error("Stop failed",U))}}}},[u]);const D=async $=>{const ae=$.target.files?.[0];if(ae)try{const U=await new xh("reader-harvest").scanFileV2(ae,!1);O(U.decodedText),h(!1)}catch{alert("    .  .")}},I=()=>{h(!0),p("")},O=async $=>{if(!$)return;const ae=$.trim();d(!0),console.log("Harvest Processing Scanned QR:",ae);const J=ae.split("|").map(F=>F.trim());let U=null;if(J[0]==="BATCH"&&J[1]){const F=parseInt(J[1]);U=t.find(W=>Number(W.batch_id)===F)}else U=t.find(F=>F.batch_code===ae);if(d(!1),U){if(l(F=>({...F,batch_id:U.batch_id})),b.current)try{((b.current.getState?b.current.getState():0)===2||b.current.isScanning)&&await b.current.stop()}catch(F){console.warn("Stop on success failed",F)}h(!1),setTimeout(()=>{_.current?.focus(),_.current?.select()},300),a(" ",`[${U.batch_code}]  .`)}else a(" ",`[${ae}]     .`)};H.useEffect(()=>{G()},[]);const[P,V]=H.useState([]),G=async()=>{try{const[$,ae]=await Promise.all([pt("get_production_batches"),pt("get_product_list")]);r($?.filter(J=>J.status!=="completed")||[]),V(ae||[])}catch($){console.error($),a("  ","     .")}finally{i(!1)}},Q=async()=>{if(!o.batch_id){a(" ","    .");return}if(o.quantity<=0&&o.defective_quantity<=0){a(" ","   .");return}if(await e("  ",`     ?
(     .)`))try{const ae=await pt("save_harvest_record",{record:{...o,quantity:parseFloat(o.quantity),defective_quantity:parseFloat(o.defective_quantity),loss_quantity:parseFloat(o.loss_quantity),harvest_date:o.harvest_date},complete_batch:!1});if(ae&&ae.success)a(" ","   ."),l(J=>({...J,quantity:0,defective_quantity:0,loss_quantity:0,memo:""}));else throw new Error(ae?.error||"Unknown error")}catch(ae){console.error(ae),a(" ","   : "+ae)}};return s.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col font-sans pb-24",children:[s.jsxs("div",{className:"bg-white border-b border-slate-100 p-4 pt-4 sticky top-0 z-50 flex items-center justify-between",children:[s.jsx("button",{className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400",onClick:()=>window.history.back(),children:s.jsx(GA,{size:20})}),s.jsx("h1",{className:"text-lg font-black text-slate-800",children:"  "}),s.jsx("div",{className:"w-10"})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-sm border border-slate-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 text-slate-800 font-black",children:[s.jsx(mc,{size:18,className:"text-indigo-500"}),s.jsx("span",{children:"  "})]}),s.jsx("button",{onClick:I,disabled:c,className:`flex items-center gap-2 px-4 py-2 rounded-xl font-black text-xs transition-all active:scale-95 ${c?"bg-slate-100 text-slate-400":"bg-indigo-50 text-indigo-600 border border-indigo-100"}`,children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-3 h-3 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(f0,{size:14}),s.jsx("span",{children:"QR "})]})})]}),s.jsxs("select",{className:"w-full h-14 bg-slate-50 border-none rounded-2xl px-4 text-sm font-bold text-slate-700",value:o.batch_id||"",onChange:$=>l({...o,batch_id:$.target.value?parseInt($.target.value):null}),children:[s.jsx("option",{value:"",children:" "}),t.map($=>{const ae=P.find(J=>J.product_id===$.product_id);return s.jsxs("option",{value:$.batch_id,children:[$.batch_code," - ",ae?`${ae.product_name}${ae.specification?` (${ae.specification})`:""}`:" "]},$.batch_id)})]})]}),s.jsxs("div",{className:"bg-indigo-600 rounded-[2.5rem] p-6 shadow-xl shadow-indigo-100 text-white space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(GH,{size:20}),s.jsx("span",{className:"font-black text-lg",children:" "})]}),s.jsx("div",{className:"px-3 py-1 bg-white/20 rounded-full text-[10px] font-black uppercase tracking-widest",children:"Main Stock"})]}),s.jsxs("div",{className:"flex items-end gap-3",children:[s.jsx("input",{ref:_,type:"number",className:"w-full bg-transparent border-b-2 border-white/30 focus:border-white text-4xl font-black text-white placeholder:text-white/30 outline-none pb-2",placeholder:"0.00",value:o.quantity||"",onChange:$=>l({...o,quantity:$.target.value}),inputMode:"decimal"}),s.jsx("span",{className:"text-2xl font-black mb-2",children:"kg"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-sm border border-slate-100 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-rose-500 font-black text-xs",children:[s.jsx(bb,{size:14}),s.jsx("span",{children:"()"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",className:"w-full bg-slate-50 border-none rounded-xl p-3 text-lg font-black text-slate-700",placeholder:"0",value:o.defective_quantity||"",onChange:$=>l({...o,defective_quantity:$.target.value})}),s.jsx("span",{className:"font-bold text-slate-400",children:"kg"})]})]}),s.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-sm border border-slate-100 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-400 font-black text-xs",children:[s.jsx(al,{size:14}),s.jsx("span",{children:" "})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",className:"w-full bg-slate-50 border-none rounded-xl p-3 text-lg font-black text-slate-700",placeholder:"0",value:o.loss_quantity||"",onChange:$=>l({...o,loss_quantity:$.target.value})}),s.jsx("span",{className:"font-bold text-slate-400",children:"kg"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-sm border border-slate-100 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 text-slate-800 font-black mb-2",children:[s.jsx(yi,{size:18,className:"text-indigo-500"}),s.jsx("span",{children:"   "})]}),s.jsx("div",{className:"flex gap-2",children:["","",""].map($=>s.jsx("button",{onClick:()=>l({...o,grade:$}),className:`flex-1 h-12 rounded-xl font-black text-sm transition-all ${o.grade===$?"bg-indigo-600 text-white shadow-md shadow-indigo-100":"bg-slate-50 text-slate-400"}`,children:$},$))}),s.jsx("textarea",{className:"w-full min-h-[100px] bg-slate-50 border-none rounded-2xl p-4 text-sm font-medium text-slate-700 placeholder:text-slate-300 resize-none",placeholder:"   .",value:o.memo,onChange:$=>l({...o,memo:$.target.value})})]})]}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 pb-24 bg-white/80 backdrop-blur-xl border-t border-slate-100 z-40",children:s.jsxs("button",{onClick:Q,className:"w-full h-14 bg-indigo-600 rounded-2xl text-white font-black text-lg flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 active:scale-95 transition-transform",children:[s.jsx(rs,{size:20}),"  "]})}),u&&s.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-start p-6 pt-12 animate-in fade-in duration-300 overflow-y-auto",children:[s.jsxs("div",{className:"relative w-full max-w-[280px] aspect-square border-2 border-indigo-500/50 rounded-[2.5rem] overflow-hidden bg-slate-950 shadow-2xl flex items-center justify-center shrink-0",children:[s.jsx("div",{id:"reader-harvest",className:"absolute inset-0 z-0"}),k&&s.jsxs("div",{className:"z-20 flex flex-col items-center gap-4 px-6 py-4 bg-slate-800/95 text-white rounded-3xl text-center mx-4 border border-white/10 shadow-2xl",children:[s.jsx("p",{className:"text-xs font-black leading-relaxed",children:k}),s.jsx("button",{onClick:()=>w.current?.click(),className:"px-6 py-3 bg-indigo-600 rounded-2xl text-sm font-black shadow-lg active:scale-95 transition-all",children:"  "}),s.jsx("input",{ref:w,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:D})]}),s.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[s.jsx("div",{className:"absolute inset-x-0 h-1 bg-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.8)] animate-scan"}),s.jsx("div",{className:"absolute top-8 left-8 w-8 h-8 border-t-4 border-l-4 border-white rounded-tl-lg"}),s.jsx("div",{className:"absolute top-8 right-8 w-8 h-8 border-t-4 border-r-4 border-white rounded-tr-lg"}),s.jsx("div",{className:"absolute bottom-8 left-8 w-8 h-8 border-b-4 border-l-4 border-white rounded-bl-lg"}),s.jsx("div",{className:"absolute bottom-8 right-8 w-8 h-8 border-b-4 border-r-4 border-white rounded-br-lg"})]})]}),s.jsxs("div",{className:"mt-6 text-center text-white space-y-4 w-full",children:[s.jsx("h3",{className:"text-xl font-black",children:" QR  "}),s.jsx("p",{className:"text-sm text-slate-400",children:"  QR  ."}),s.jsxs("div",{className:"max-w-xs mx-auto pt-2 space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block",children:"   (  )"}),s.jsx("div",{className:"relative opacity-60 focus-within:opacity-100 transition-opacity",children:s.jsx("input",{ref:g,type:"text",className:"w-full h-12 bg-white/5 border border-white/10 rounded-2xl px-6 text-white text-center font-black focus:border-indigo-500/50 focus:ring-0 transition-all outline-none text-xs",placeholder:"  ",value:f,onChange:$=>p($.target.value),onKeyDown:$=>{$.key==="Enter"&&(O(f),$.target.blur())}})})]})]}),s.jsx("button",{onClick:()=>h(!1),className:"mt-8 mb-12 w-16 h-16 bg-white/10 hover:bg-white/20 text-white rounded-full flex items-center justify-center transition-all active:scale-90 shrink-0",children:s.jsx(X,{size:32})}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                        @keyframes scan { 0% { top: 0; } 50% { top: 100%; } 100% { top: 0; } }
                        .animate-scan { position: absolute; animation: scan 3s infinite linear; }
                        #reader-harvest video { 
                            object-fit: cover !important;
                            height: 100% !important;
                            width: 100% !important;
                        }
                    `}})]})]})},rue=()=>{const a=Fn(),{showAlert:e,showConfirm:t}=Na(),[r,n]=H.useState([]),[i,o]=H.useState([]),[l,c]=H.useState(!0),[d,u]=H.useState([]),[h,f]=H.useState(""),[p,g]=H.useState(""),[b,w]=H.useState(""),[_,k]=H.useState(0),[T,D]=H.useState(!1),[I,O]=H.useState(!1),[P,V]=H.useState(""),G=H.useRef(null),Q=H.useRef(null),$=H.useRef(null),ae=H.useRef(null),[J,U]=H.useState(null);H.useEffect(()=>{let be=!0;if(I){if(mh.isNativePlatform())return(async()=>{try{const Ze=await X_();Ze.content&&be&&ve(Ze.content)}catch(Ze){console.error("Native scan error",Ze),U("   : "+Ze.message)}})(),()=>{be=!1,Z_()};const Ee=setTimeout(async()=>{if(!(!be||!document.getElementById("reader-event")))try{if(Q.current)try{Q.current.isScanning&&await Q.current.stop()}catch(ut){console.warn("Cleanup failed",ut)}const Ze=new xh("reader-event");Q.current=Ze;const Re={fps:15,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1};try{await Ze.start({facingMode:"environment"},Re,ut=>{be&&(U(null),ve(ut))},ut=>{})}catch(ut){console.log("Back camera failed, trying front",ut),await Ze.start({facingMode:"user"},Re,vt=>{be&&(U(null),ve(vt))},()=>{})}}catch(Ze){console.error("Scanner initialization failed:",Ze),!window.isSecureContext&&window.location.hostname!=="localhost"?U("  (HTTPS) . WiFi(HTTP)       ."):U(`   : ${Ze.message||"  "}`)}},500);return()=>{if(be=!1,clearTimeout(Ee),Q.current){const ze=Q.current;ze.getState&&ze.getState()===2?ze.stop().catch(Ze=>console.error("Stop failed",Ze)):ze.isScanning&&ze.stop().catch(Ze=>console.error("Stop failed",Ze))}}}},[I]);const F=async be=>{const Ee=be.target.files?.[0];if(Ee)try{const Ze=await new xh("reader-event").scanFileV2(Ee,!1);ve(Ze.decodedText),O(!1)}catch{alert("    .  .")}},[W,K]=H.useState(!0),ee={product:"",qty:1,price:"",amount:0},[ne,re]=H.useState(ee),Z=be=>(typeof be!="number"&&(be=parseFloat(String(be).replace(/[^0-9.-]/g,""))||0),be.toLocaleString("ko-KR"));H.useEffect(()=>{const be=localStorage.getItem("event_cart"),Ee=localStorage.getItem("event_id"),ze=localStorage.getItem("event_discount");be&&u(JSON.parse(be)),Ee&&w(Ee),ze&&k(parseInt(ze)),ie()},[]),H.useEffect(()=>{localStorage.setItem("event_cart",JSON.stringify(d))},[d]),H.useEffect(()=>{localStorage.setItem("event_id",b)},[b]),H.useEffect(()=>{localStorage.setItem("event_discount",_.toString())},[_]);const ie=async()=>{try{const[be,Ee]=await Promise.all([pt("get_product_list"),pt("get_all_events")]),ze=(be||[]).filter(Ze=>(!Ze.item_type||Ze.item_type==="product")&&Ze.status!=="");n(ze),o(Ee||[])}catch(be){console.error(be),e("  ","   .")}finally{c(!1)}},de=be=>{const{name:Ee,value:ze}=be.target;let Ze={...ne,[Ee]:ze};if(Ee==="product"){const vt=r.find(yt=>yt.product_name===ze);vt&&(Ze.price=vt.unit_price)}const Re=Number(Ze.qty)||0,ut=Number(String(Ze.price).replace(/[^0-9]/g,""))||0;Ze.amount=Re*ut,re(Ze)},fe=()=>{if(!b)return e(" ","     .");if(!ne.product)return e(" ","   .");if(Number(ne.qty)<=0)return e(" "," 1  .");const be=r.find(Ze=>Ze.product_name===ne.product);if(!be)return;const Ee=d.find(Ze=>Ze.product_id===be.product_id),ze=Number(String(ne.price).replace(/[^0-9]/g,""));u(Ee?d.map(Ze=>Ze.product_id===be.product_id?{...Ze,quantity:Ze.quantity+Number(ne.qty),unit_price:ze}:Ze):[...d,{...be,quantity:Number(ne.qty),unit_price:ze}]),re(ee)},he=()=>{O(!0),V("")},ve=async be=>{if(!be)return;const Ee=be.trim();if(D(!0),console.log("Processing Scanned Content:",Ee),Q.current)try{((Q.current.getState?Q.current.getState():0)===2||Q.current.isScanning)&&await Q.current.stop()}catch(Re){console.warn("Stop on success failed",Re)}const ze=Ee.split("|").map(Re=>Re.trim());let Ze=null;if(ze[0]==="PRODUCT"&&ze[1]){const Re=parseInt(ze[1]),ut=ze[3],vt=ze[4]==="NA"||!ze[4]?"":ze[4];if(Ze=r.find(yt=>Number(yt.product_id)===Re),!Ze||Ze&&ut&&Ze.product_name!==ut){const yt=r.find(Ue=>Ue.product_name===ut&&(vt?Ue.specification===vt:!0));yt&&(Ze=yt)}}else if(ze[0]==="HARVEST"&&ze[3]){const Re=ze[3],ut=ze[4]||"";if(Ze=r.find(vt=>vt.product_name===Re&&(vt.specification===ut||vt.specification&&ut&&vt.specification.includes(ut))),!Ze){const vt=r.filter(yt=>yt.product_name===Re);if(vt.length===1)Ze=vt[0];else if(vt.length>1){e(" ",`[${Re}]    .    .`),D(!1);return}}}else if(Ee.includes("ID:")){const Re=Ee.split("ID:").pop().trim(),ut=parseInt(Re.replace(/[^0-9]/g,""));Ze=r.find(vt=>Number(vt.product_id)===ut)}else if(Ze=r.find(Re=>Re.product_code&&Re.product_code===Ee||Re.product_name===Ee||`${Re.product_name} ${Re.specification||""}`.trim()===Ee||`${Re.product_name}(${Re.specification||""})`.trim()===Ee),!Ze&&/^\d+$/.test(Ee)){const Re=parseInt(Ee);Ze=r.find(ut=>Number(ut.product_id)===Re)}D(!1),Ze?(de({target:{name:"product",value:Ze.product_name}}),O(!1),setTimeout(()=>{ae.current?.focus(),ae.current?.select()},300)):e(" ",`[${Ee}]    .`)},Oe=(be,Ee)=>{u(d.map(ze=>{if(ze.product_id===be){const Ze=Math.max(0,ze.quantity+Ee);return{...ze,quantity:Ze}}return ze}).filter(ze=>ze.quantity>0))},Se=d.reduce((be,Ee)=>be+Ee.unit_price*Ee.quantity,0),Ce=Math.round(Se*(_/100)),we=Se-Ce,xe=async()=>{if(!b){e(" ","     .");return}if(d.length===0){e(" ","  .");return}const be=i.find(ze=>ze.event_id===b);if(await t("  ",`${be?"["+be.event_name+"] ":""} ${we.toLocaleString()}    PC ?`))try{const ze=d.map(Re=>({sales_id:"",customer_id:"EVENT_GUEST",product_name:Re.product_name,specification:Re.specification,unit_price:Re.unit_price,quantity:Re.quantity,total_amount:Math.round(Re.unit_price*Re.quantity*(1-_/100)),memo:`[:${be?.event_name||""}] ${h?":"+h:""} / :${_}% / :${p}`,status:"",payment_status:"",discount_rate:_})),Ze=await pt("save_general_sales_batch",{sales:ze});if(Ze&&Ze.success)e(" ","     ."),u([]),f("");else throw new Error(Ze?.error||"Unknown error")}catch(ze){console.error(ze),e(" ","    .   .")}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden",children:[s.jsxs("div",{className:"bg-white px-5 pt-6 pb-4 border-b border-slate-100 shrink-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h1",{className:"text-xl font-black text-slate-900 tracking-tight",children:""}),s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{onClick:()=>a("/mobile-dashboard"),className:"p-2 bg-slate-50 text-slate-400 rounded-xl hover:text-indigo-600 transition-colors",children:s.jsx(GA,{size:18})})})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-indigo-500 pointer-events-none",children:s.jsx(zH,{size:18})}),s.jsx("select",{className:"w-full h-12 bg-slate-50 border-none rounded-2xl pl-12 pr-10 text-sm font-black text-slate-700 appearance-none focus:ring-2 focus:ring-indigo-500 transition-all",value:b,onChange:be=>w(be.target.value),children:i.length===0?s.jsx("option",{value:"",children:"  "}):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"",children:"    ()"}),i.map(be=>s.jsx("option",{value:be.event_id,children:be.event_name},be.event_id))]})}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-300 pointer-events-none",children:s.jsx(i2,{size:18})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden px-5 pt-4 pb-44 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:he,className:`bg-indigo-600 h-20 rounded-3xl shadow-lg shadow-indigo-100 flex flex-col items-center justify-center gap-1 text-white active:scale-95 transition-all ${T?"animate-pulse":""}`,children:[s.jsx(f0,{size:24}),s.jsx("span",{className:"text-[11px] font-black",children:T?" ...":" QR "})]}),s.jsxs("div",{className:"bg-white h-20 rounded-3xl shadow-sm border border-slate-100 flex flex-col items-center justify-center gap-1 relative overflow-hidden",children:[s.jsx("div",{className:"flex items-center gap-1",children:s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:" "})}),s.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-1.5 rounded-2xl border border-slate-100",children:[s.jsx("button",{type:"button",onClick:()=>k(Math.max(0,_-1)),className:"w-10 h-10 flex items-center justify-center bg-white rounded-xl text-rose-500 shadow-sm border border-slate-200 active:scale-90 transition-all",children:s.jsx("span",{className:"text-2xl font-black leading-none select-none",children:"-"})}),s.jsxs("div",{className:"flex items-center justify-center min-w-[3rem]",children:[s.jsx("input",{type:"number",className:"w-10 text-center bg-transparent border-none text-xl font-black text-rose-600 p-0 focus:ring-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",value:_,onChange:be=>k(Math.min(100,Math.max(0,parseInt(be.target.value)||0)))}),s.jsx(HH,{size:14,className:"text-rose-400 ml-0.5",strokeWidth:3})]}),s.jsx("button",{type:"button",onClick:()=>k(Math.min(100,_+1)),className:"w-10 h-10 flex items-center justify-center bg-rose-500 rounded-xl text-white active:scale-90 transition-all shadow-md shadow-rose-100",children:s.jsx("span",{className:"text-2xl font-black leading-none select-none",children:"+"})})]})]})]}),s.jsxs("div",{className:`space-y-3 transition-opacity ${b?"":"opacity-30 pointer-events-none"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-400 font-black text-xs uppercase tracking-widest pl-1",children:[s.jsx(So,{size:12,className:"text-indigo-500"}),s.jsx("span",{children:"  "})]}),s.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:r.map(be=>s.jsxs("button",{onClick:()=>{de({target:{name:"product",value:be.product_name}})},className:"bg-white px-5 py-3 rounded-2xl shadow-sm border border-slate-100 whitespace-nowrap active:scale-95 transition-all flex flex-col items-center min-w-[120px]",children:[s.jsx("div",{className:"text-sm font-black text-slate-700",children:be.product_name}),be.specification&&s.jsx("div",{className:"text-[10px] text-slate-400 font-bold mb-1",children:be.specification}),s.jsxs("div",{className:"text-[10px] text-indigo-500 font-black",children:[Z(be.unit_price),""]})]},be.product_id))})]}),!b&&s.jsxs("div",{className:"bg-amber-50 border border-amber-100 p-4 rounded-2xl flex items-center gap-3 animate-pulse",children:[s.jsx("div",{className:"w-10 h-10 bg-amber-500 rounded-xl flex items-center justify-center text-white shrink-0",children:s.jsx(qH,{size:20})}),s.jsxs("div",{className:"text-sm font-black text-amber-900 leading-tight",children:["     ",s.jsx("br",{}),"  ."]})]}),s.jsxs("div",{className:"flex items-center justify-between px-2",children:[s.jsxs("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:["  (",d.length,")"]}),s.jsx("button",{onClick:()=>K(!W),className:`text-[11px] font-black h-8 px-4 rounded-full transition-all ${W?"bg-indigo-600 text-white shadow-lg":"bg-white border border-slate-100 text-indigo-600"}`,children:W?"":" "})]}),W&&s.jsxs("div",{className:`bg-white p-6 rounded-[2.5rem] border border-slate-100 shadow-xl space-y-5 animate-in slide-in-from-top-4 duration-300 transition-opacity ${b?"":"opacity-30 pointer-events-none"}`,children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:" "}),s.jsxs("select",{name:"product",className:"w-full h-12 bg-slate-50 border-none rounded-2xl px-5 text-sm font-black focus:ring-2 focus:ring-indigo-500 transition-all appearance-none",value:ne.product,onChange:de,children:[s.jsx("option",{value:"",children:" "}),r.map(be=>s.jsxs("option",{value:be.product_name,children:[be.product_name," (",be.specification||" ",") - ",Z(be.unit_price),""]},be.product_id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:""}),s.jsx("input",{name:"price",className:"w-full h-12 bg-slate-50 border-none rounded-2xl text-sm font-black focus:ring-2 focus:ring-indigo-500 transition-all text-right px-4",value:Z(ne.price),onChange:be=>de({target:{name:"price",value:be.target.value.replace(/[^0-9]/g,"")}}),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:""}),s.jsxs("div",{className:"h-12 bg-slate-50 rounded-2xl flex items-center px-1 border border-slate-100 overflow-hidden",children:[s.jsx("button",{type:"button",onClick:()=>de({target:{name:"qty",value:Math.max(1,Number(ne.qty)-1)}}),className:"w-10 h-10 shrink-0 flex items-center justify-center bg-white rounded-xl shadow-sm border border-slate-200 text-slate-700 active:scale-90 transition-all",children:s.jsx("span",{className:"text-2xl font-black leading-none select-none",children:"-"})}),s.jsx("input",{ref:ae,type:"number",name:"qty",className:"flex-1 w-full bg-transparent border-none text-center font-black text-lg text-slate-800 focus:ring-0 p-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",value:ne.qty,onChange:de,inputMode:"numeric"}),s.jsx("button",{type:"button",onClick:()=>de({target:{name:"qty",value:Number(ne.qty)+1}}),className:"w-10 h-10 shrink-0 flex items-center justify-center bg-indigo-600 rounded-xl shadow-sm text-white active:scale-90 transition-all",children:s.jsx("span",{className:"text-2xl font-black leading-none select-none",children:"+"})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:" "}),s.jsxs("div",{className:"h-12 bg-indigo-50/50 rounded-2xl flex items-center px-4 justify-between border border-indigo-100/50",children:[s.jsx(px,{size:18,className:"text-indigo-300"}),s.jsxs("span",{className:"text-lg font-black text-indigo-600",children:[Z(ne.amount),""]})]})]}),s.jsxs("button",{onClick:fe,className:"w-full h-14 bg-indigo-600 text-white rounded-2xl font-black shadow-lg shadow-indigo-100 flex items-center justify-center gap-3 active:scale-[0.98] transition-all",children:[s.jsx(So,{size:20}),""]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between px-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-400 font-black text-xs uppercase tracking-widest",children:[s.jsx(px,{size:12}),s.jsxs("span",{children:["  (",d.length,")"]})]}),s.jsxs("button",{onClick:()=>{d.length>0&&u([])},disabled:d.length===0,className:`flex items-center gap-1 font-black text-xs px-2 py-1.5 rounded-lg transition-all active:scale-95 ${d.length>0?"text-rose-500 bg-rose-50 border border-rose-100 shadow-sm":"text-slate-300 bg-slate-50 opacity-50"}`,children:[s.jsx(al,{size:12}),s.jsx("span",{children:" "})]})]}),d.length===0?s.jsxs("div",{className:"bg-white rounded-3xl p-10 flex flex-col items-center justify-center text-slate-300 border border-slate-100 border-dashed",children:[s.jsx(f0,{size:40,className:"mb-2 opacity-20"}),s.jsx("span",{className:"text-sm font-bold text-center px-4",children:" QR    "})]}):s.jsx("div",{className:"space-y-3",children:d.map(be=>s.jsxs("div",{className:"bg-white px-5 py-3 rounded-[1.5rem] border border-slate-100 shadow-sm flex items-center gap-4 animate-in fade-in slide-in-from-left-2 transition-all",children:[s.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[s.jsx("div",{className:"text-sm font-black text-slate-800 truncate",children:be.product_name}),be.specification&&s.jsx("div",{className:"text-[10px] text-slate-400 font-bold mt-0.5",children:be.specification}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-[10px] text-slate-400 font-bold line-through",children:[be.unit_price.toLocaleString(),""]}),s.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:[Math.round(be.unit_price*(1-_/100)).toLocaleString(),""]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-1.5 rounded-xl border border-slate-100 scale-95 origin-right",children:[s.jsx("button",{type:"button",onClick:()=>Oe(be.product_id,-1),className:"w-7 h-7 rounded-lg bg-white shadow-sm border border-slate-200 flex items-center justify-center text-slate-700 active:scale-90",children:s.jsx("span",{className:"text-xl font-black leading-none select-none",children:"-"})}),s.jsx("span",{className:"text-sm font-black text-slate-800 min-w-[20px] text-center",children:be.quantity}),s.jsx("button",{type:"button",onClick:()=>Oe(be.product_id,1),className:"w-7 h-7 rounded-lg bg-indigo-600 shadow-sm flex items-center justify-center text-white active:scale-90",children:s.jsx("span",{className:"text-xl font-black leading-none select-none",children:"+"})})]})]},be.product_id))})]}),s.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-100 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-black text-sm pl-1",children:[s.jsx(WC,{size:16,className:"text-indigo-500"}),s.jsx("span",{children:" "})]}),s.jsx("div",{className:"flex gap-2",children:["","",""].map(be=>s.jsx("button",{onClick:()=>g(be),className:`flex-1 h-12 rounded-xl font-black text-sm transition-all ${p===be?"bg-indigo-600 text-white shadow-md":"bg-slate-50 text-slate-400"}`,children:be},be))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-black text-sm pl-1",children:[s.jsx(hh,{size:16,className:"text-indigo-500"}),s.jsx("span",{children:"  ()"})]}),s.jsx("input",{type:"text",placeholder:"  ,   ",className:"w-full h-12 bg-slate-50 border-none rounded-2xl px-4 text-sm font-bold text-slate-700 placeholder:text-slate-300",value:h,onChange:be=>f(be.target.value)})]})]})]}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 animate-in slide-in-from-bottom-full duration-500",children:s.jsx("div",{className:"bg-white border-t border-slate-100 p-5 pb-24 shadow-[0_-10px_40px_rgba(0,0,0,0.05)]",children:s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"flex-1 flex flex-col justify-center px-4 h-14 bg-slate-50 rounded-[1.5rem]",children:[s.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"  "}),s.jsxs("span",{className:"text-lg font-black text-indigo-600 leading-none",children:[we.toLocaleString(),""]})]}),s.jsx("button",{onClick:xe,disabled:d.length===0,className:`w-20 h-14 bg-indigo-600 text-white rounded-[1.5rem] flex items-center justify-center shadow-lg shadow-indigo-100 active:scale-[0.95] transition-all ${d.length===0?"opacity-50":""}`,children:s.jsx(rs,{size:24})})]})})}),I&&s.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-start p-6 pt-12 animate-in fade-in duration-300 overflow-y-auto",children:[s.jsxs("div",{className:"relative w-full max-w-[280px] aspect-square border-2 border-indigo-500/50 rounded-[2.5rem] overflow-hidden bg-slate-950 shadow-2xl flex items-center justify-center shrink-0",children:[s.jsx("div",{id:"reader-event",className:"absolute inset-0 z-0"}),J&&s.jsxs("div",{className:"z-20 flex flex-col items-center gap-4 px-6 py-4 bg-slate-800/95 text-white rounded-3xl text-center mx-4 border border-white/10 shadow-2xl",children:[s.jsx("p",{className:"text-xs font-black leading-relaxed",children:J}),s.jsx("button",{onClick:()=>$.current?.click(),className:"px-6 py-3 bg-indigo-600 rounded-2xl text-sm font-black shadow-lg active:scale-95 transition-all",children:"  "}),s.jsx("input",{ref:$,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:F})]}),s.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[s.jsx("div",{className:"absolute inset-x-0 h-1 bg-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.8)] animate-scan"}),s.jsx("div",{className:"absolute top-8 left-8 w-8 h-8 border-t-4 border-l-4 border-white rounded-tl-lg"}),s.jsx("div",{className:"absolute top-8 right-8 w-8 h-8 border-t-4 border-r-4 border-white rounded-tr-lg"}),s.jsx("div",{className:"absolute bottom-8 left-8 w-8 h-8 border-b-4 border-l-4 border-white rounded-bl-lg"}),s.jsx("div",{className:"absolute bottom-8 right-8 w-8 h-8 border-b-4 border-r-4 border-white rounded-br-lg"})]})]}),s.jsxs("div",{className:"mt-6 text-center text-white space-y-4 w-full",children:[s.jsx("h3",{className:"text-xl font-black",children:"   "}),s.jsx("p",{className:"text-sm text-slate-400",children:"   QR  ."}),s.jsxs("div",{className:"max-w-xs mx-auto pt-2 space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block",children:"   (  )"}),s.jsx("div",{className:"relative opacity-60 focus-within:opacity-100 transition-opacity",children:s.jsx("input",{ref:G,type:"text",className:"w-full h-12 bg-white/5 border border-white/10 rounded-2xl px-6 text-white text-center font-black focus:border-indigo-500 focus:ring-0 transition-all outline-none text-xs",placeholder:"  ",value:P,onChange:be=>V(be.target.value),onKeyDown:be=>{be.key==="Enter"&&(ve(P),be.target.blur())}})})]})]}),s.jsx("button",{onClick:()=>O(!1),className:"mt-8 mb-12 w-16 h-16 bg-white/10 hover:bg-white/20 text-white rounded-full flex items-center justify-center transition-all active:scale-90 shrink-0",children:s.jsx(js,{size:32})}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                        @keyframes scan { 0% { top: 0; } 50% { top: 100%; } 100% { top: 0; } }
                        .animate-scan { position: absolute; animation: scan 3s infinite linear; }
                        #reader-event video { 
                            object-fit: cover !important;
                            height: 100% !important;
                            width: 100% !important;
                        }
                    `}})]})]})},nG=(a,e)=>{const[t,r]=H.useState(ev(new Date)),[n,i]=H.useState(null),[o,l]=H.useState([]),[c,d]=H.useState([]),[u,h]=H.useState([]),[f,p]=H.useState([]),[g,b]=H.useState(null),[w,_]=H.useState(!1),[k,T]=H.useState(!1),[D,I]=H.useState(null),[O,P]=H.useState(!1),[V,G]=H.useState(!1),[Q,$]=H.useState(""),[ae,J]=H.useState(""),U={product:"",spec:"",qty:1,price:"",discountRate:0,amount:0,shipType:"basic",shipZip:"",shipAddr1:"",shipAddr2:"",shipName:"",shipMobile:"",shipMemo:"",isSaveAddr:!0},[F,W]=H.useState(U),K=H.useCallback((Ue,Ye,Ht)=>{const ta=Number(Ue)||0,Bt=typeof Ye=="string"?Uu(Ye):Number(Ye)||0,Da=Number(Ht)||0;let zt=ta*Bt*(1-Da/100);return zt=Math.floor(zt/10)*10,zt},[]),ee=H.useCallback(async()=>{try{const Ue=await pt("get_company_info");I(Ue)}catch(Ue){console.error(Ue)}},[]),ne=H.useCallback(async()=>{try{const Ye=(await pt("get_product_list")||[]).filter(Ht=>(!Ht.item_type||Ht.item_type==="product")&&Ht.status!=="");d(Ye)}catch(Ue){console.error(Ue)}},[]),re=H.useCallback(async(Ue,Ye)=>{try{const ta=(await pt("get_customer_sales_on_date",{customerId:String(Ue),date:Ye})).map(Bt=>({id:Bt.sales_id,tempId:Bt.sales_id,product:Bt.product_name,spec:Bt.specification,qty:Bt.quantity,price:Bt.unit_price,discountRate:Bt.discount_rate||0,amount:Bt.total_amount,supplyValue:Bt.supply_value,vatAmount:Bt.vat_amount,status:Bt.status,shipName:Bt.shipping_name||"",shipZip:Bt.shipping_zip_code||"",shipAddr1:Bt.shipping_address_primary||"",shipAddr2:Bt.shipping_address_detail||"",shipMobile:Bt.shipping_mobile_number||"",shipMemo:Bt.memo||"",isDirty:!1}));h(ta.reverse()),p([]),T(!1)}catch(Ht){console.error(Ht)}},[]),[Z,ie]=H.useState(null);H.useEffect(()=>{const Ue=localStorage.getItem("mycelium_draft_reception");if(Ue)try{const Ye=JSON.parse(Ue);(Ye.salesRows?.length>0||Ye.customer)&&ie(Ye)}catch(Ye){console.error(Ye)}},[]);const de=()=>{Z&&(i(Z.customer),r(Z.orderDate||ev(new Date)),h(Z.salesRows||[]),p(Z.deletedSalesIds||[]),W(Ue=>({...Ue,...Z.inputState})),T(!0),P(!0),ie(null))},fe=()=>{he(),ie(null)};H.useEffect(()=>{if(k||u.length>0||n){const Ue={customer:n,orderDate:t,salesRows:u,deletedSalesIds:f,inputState:F};localStorage.setItem("mycelium_draft_reception",JSON.stringify(Ue))}},[n,t,u,f,F,k]);const he=()=>{localStorage.removeItem("mycelium_draft_reception"),P(!1)},ve=async Ue=>{i(Ue);try{const Ye=await pt("get_customer_addresses",{customerId:Ue.customer_id});l(Ye||[]);const Ht=Ye.find(ta=>ta.is_default)||Ye[0];Ht?Oe(Ht,Ue):Se(Ue)}catch{Se(Ue)}},Oe=(Ue,Ye)=>{W(Ht=>({...Ht,shipType:`addr_${Ue.address_id}`,shipZip:Ue.zip_code||"",shipAddr1:Ue.address_primary||"",shipAddr2:Ue.address_detail||"",shipName:Ue.recipient_name||Ye.customer_name,shipMobile:Ue.mobile_number||Ye.mobile_number||"",shipMemo:Ue.shipping_memo||""}))},Se=Ue=>{W(Ye=>({...Ye,shipType:"basic",shipZip:Ue.zip_code||"",shipAddr1:Ue.address_primary||"",shipAddr2:Ue.address_detail||"",shipName:Ue.customer_name,shipMobile:Ue.mobile_number||"",shipMemo:""}))},Ce=Ue=>{const{name:Ye,value:Ht,type:ta,checked:Bt}=Ue.target;W(Da=>{let zt={...Da,[Ye]:ta==="checkbox"?Bt:Ht};if(Ye==="product"){const Lr=c.find(ka=>ka.product_name===Ht);Lr&&(zt.spec=Lr.specification||"",zt.price=Lr.unit_price)}if(["product","qty","price","discountRate"].includes(Ye)&&(zt.amount=K(zt.qty,zt.price,zt.discountRate)),Ye==="shipType"){if(Ht==="new")zt.shipZip="",zt.shipAddr1="",zt.shipAddr2="",zt.shipName="",zt.shipMobile="",zt.shipMemo="";else if(Ht==="basic"&&n)zt.shipZip=n.zip_code||"",zt.shipAddr1=n.address_primary||"",zt.shipAddr2=n.address_detail||"",zt.shipName=n.customer_name,zt.shipMobile=n.mobile_number||"",zt.shipMemo="";else if(Ht.startsWith("addr_")){const Lr=Number(Ht.split("_")[1]),ka=o.find(Ca=>Ca.address_id===Lr);ka&&(zt.shipZip=ka.zip_code,zt.shipAddr1=ka.address_primary,zt.shipAddr2=ka.address_detail,zt.shipName=ka.recipient_name,zt.shipMobile=ka.mobile_number,zt.shipMemo=ka.shipping_memo||"")}}return Ye==="shipMobile"&&(zt.shipMobile=Kn(Ht)),zt}),T(!0)},we=()=>{if(!n){a("","  .");return}if(!F.product){a(""," .");return}let Ue="";g&&(Ue=F.status||"");const Ye={...F,tempId:g||Date.now()+Math.random(),status:Ue,isDirty:!0};g?(h(Ht=>Ht.map(ta=>ta.tempId===g?Ye:ta)),b(null)):h(Ht=>[Ye,...Ht]),W(Ht=>({...Ht,product:"",spec:"",qty:1,price:"",discountRate:0,amount:0})),T(!0)},xe=Ue=>{b(Ue.tempId),W({...Ue,shipType:"new"})},be=Ue=>{Ue.id&&p(Ye=>[...Ye,String(Ue.id)]),h(Ye=>Ye.filter(Ht=>Ht.tempId!==Ue.tempId)),T(!0)},Ee=(Ue,Ye)=>{h(Ht=>Ht.map(ta=>{if(ta.tempId===Ue){const Bt=Math.max(1,Number(ta.qty)+Ye),Da=Number(ta.price)||0,zt=Number(ta.discountRate)||0,Lr=K(Bt,Da,zt);return{...ta,qty:Bt,amount:Lr,isDirty:!0}}return ta})),T(!0)},ze=async()=>{if(!(u.length===0&&f.length===0)&&await e(" ","   ?")){_(!0);try{const Ue=u.map(Ye=>({salesId:Ye.id?String(Ye.id):null,customerId:String(n.customer_id),productName:Ye.product,specification:Ye.spec||null,unitPrice:Number(String(Ye.price).replace(/[^0-9]/g,"")),quantity:Number(Ye.qty),totalAmount:Number(Ye.amount),status:Ye.status,memo:Ye.shipMemo||ae||null,orderDateStr:t,shippingName:Ye.shipName||null,shippingZipCode:Ye.shipZip||null,shippingAddressPrimary:Ye.shipAddr1||null,shippingAddressDetail:Ye.shipAddr2||null,shippingMobileNumber:Ye.shipMobile||null,paidAmount:Q===""||Q===""||Q===""?Number(Ye.amount):0,paymentStatus:"",paymentMethod:Q,discountRate:Number(Ye.discountRate),isDirty:Ye.isDirty?"true":"false"}));await pt("save_general_sales_batch",{items:Ue,deletedIds:f}),await a(""," ."),he(),re(n.customer_id,t)}catch(Ue){a("",`   : ${Ue}`)}finally{_(!1)}}},Ze=async()=>{k&&!await e("","   .  ?")||(i(null),h([]),W(U),T(!1),he())},Re=H.useMemo(()=>{const Ue=u.length,Ye=u.reduce((Da,zt)=>Da+Number(zt.qty),0),Ht=u.reduce((Da,zt)=>Da+Number(zt.amount),0),ta=u.reduce((Da,zt)=>Da+(zt.supplyValue||zt.amount),0),Bt=u.reduce((Da,zt)=>Da+(zt.vatAmount||0),0);return{count:Ue,qty:Ye,amount:Ht,supply:ta,vat:Bt}},[u]);return{orderDate:t,setOrderDate:r,customer:n,setCustomer:i,addresses:o,products:c,salesRows:u,setSalesRows:h,editingTempId:g,isProcessing:w,isDirty:k,setIsDirty:T,companyInfo:D,inputState:F,setInputState:W,loadProducts:ne,loadCompanyInfo:ee,loadSalesHistory:re,selectCustomer:ve,handleInputChange:Ce,handleAddRow:we,handleEditRow:xe,handleDeleteRow:be,handleSaveAll:ze,handleReset:Ze,handlePrintStatement:()=>{if(!n){a(""," .");return}if(u.length===0){a("","  .");return}G(!0)},closeStatement:()=>G(!1),showStatement:V,handleCsvUpload:async Ue=>{const Ye=Ue.target.files[0];if(!Ye)return;const Ht=await Ye.arrayBuffer();let ta="";try{ta=new TextDecoder("utf-8",{fatal:!0}).decode(Ht)}catch{ta=new TextDecoder("euc-kr").decode(Ht)}const Bt=ka=>{const Ca=[];let Sn="",Ie=!1;for(let st=0;st<ka.length;st++){const Tt=ka[st];Tt==='"'&&ka[st+1]==='"'?(Sn+='"',st++):Tt==='"'?Ie=!Ie:Tt===","&&!Ie?(Ca.push(Sn.trim()),Sn=""):Sn+=Tt}return Ca.push(Sn.trim()),Ca},Da=ta.split(/\r?\n/).filter(ka=>ka.trim());if(Da.length===0)return;const zt=Da[0].includes("")||Da[0].includes("")?1:0,Lr=Da.slice(zt).map(ka=>{const Ca=Bt(ka);return Ca.length<2||!Ca[0]?null:{...U,tempId:Date.now()+Math.random(),isDirty:!0,status:"",amount:0,shipName:Ca[0],shipMobile:Kn(Ca[1]),shipZip:Ca[2]||"",shipAddr1:Ca[3]||"",shipAddr2:Ca[4]||"",product:Ca[5]||""}}).filter(ka=>ka!==null);h(ka=>[...Lr,...ka]),T(!0),a("",`${Lr.length}  .`),Ue.target.value=""},summary:Re,isDraftRestored:O,tempDraft:Z,handleRestoreDraft:de,handleDiscardDraft:fe,paymentMethod:Q,setPaymentMethod:$,memo:ae,setMemo:J,updateRowQty:Ee}},nue=()=>{Fn();const{showAlert:a,showConfirm:e}=Na(),{orderDate:t,setOrderDate:r,customer:n,setCustomer:i,products:o,salesRows:l,isProcessing:c,inputState:d,loadProducts:u,loadSalesHistory:h,selectCustomer:f,handleInputChange:p,handleAddRow:g,handleDeleteRow:b,handleSaveAll:w,handleReset:_,summary:k,paymentMethod:T,setPaymentMethod:D,memo:I,setMemo:O,updateRowQty:P}=nG(a,e),[V,G]=H.useState(!1),[Q,$]=H.useState(!1),[ae,J]=H.useState(""),U=H.useRef(null),F=H.useRef(null),W=H.useRef(null),K=H.useRef(null),[ee,ne]=H.useState(null);H.useEffect(()=>{let Ue=!0;if(Q){if(mh.isNativePlatform())return(async()=>{try{const ta=await X_();ta.content&&Ue&&yt(ta.content)}catch(ta){console.error("Native scan error",ta),ne("   : "+ta.message)}})(),()=>{Ue=!1,Z_()};const Ye=setTimeout(async()=>{if(!(!Ue||!document.getElementById("reader")))try{if(F.current)try{F.current.isScanning&&await F.current.stop()}catch(Da){console.warn("Cleanup of old scanner failed",Da)}const ta=new xh("reader");F.current=ta;const Bt={fps:15,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1};try{await ta.start({facingMode:"environment"},Bt,Da=>{Ue&&(ne(null),yt(Da))},Da=>{})}catch(Da){console.log("Environment camera start failed, trying any available camera",Da),await ta.start({facingMode:"user"},Bt,zt=>{Ue&&(ne(null),yt(zt))},()=>{})}}catch(ta){console.error("Scanner initialization failed:",ta),!window.isSecureContext&&window.location.hostname!=="localhost"?ne("  (HTTPS) . WiFi(HTTP)       ."):ne(`   : ${ta.message||"  "}`)}},500);return()=>{if(Ue=!1,clearTimeout(Ye),F.current){const Ht=F.current;Ht.getState&&Ht.getState()===2?Ht.stop().catch(ta=>console.error("Stop failed",ta)):Ht.isScanning&&Ht.stop().catch(ta=>console.error("Stop failed",ta))}}}},[Q]);const re=async Ue=>{const Ye=Ue.target.files?.[0];if(Ye)try{const ta=await new xh("reader").scanFileV2(Ye,!1);yt(ta.decodedText),$(!1)}catch{alert("    .  .")}},[Z,ie]=H.useState(""),[de,fe]=H.useState([]),[he,ve]=H.useState(!1),[Oe,Se]=H.useState(!0),[Ce,we]=H.useState(!1),[xe,be]=H.useState({name:"",mobile:""});H.useEffect(()=>{u()},[u]),H.useEffect(()=>{n&&t&&h(n.customer_id,t)},[n,t,h]);const Ee=async()=>{if(Z.trim()){G(!0);try{const Ue=await pt("search_customers_by_name",{name:Z});fe(Ue||[]),Ue?.length===0&&be(Ye=>({...Ye,name:Z}))}catch(Ue){console.error(Ue)}finally{G(!1)}}},ze=Ue=>{f(Ue),ie(""),fe([])},Ze=async()=>{if(!xe.name||!xe.mobile)return a("","  .");try{await pt("create_customer",{name:xe.name,mobile:Kn(xe.mobile),joinDate:new Date().toISOString().split("T")[0]});const Ue=await pt("search_customers_by_name",{name:xe.name});Ue&&Ue.length>0&&(ze(Ue[0]),ve(!1),a(""," ."))}catch(Ue){a("",`  : ${Ue}`)}},Re=Ue=>{be({...xe,mobile:Kn(Ue.target.value)})},ut=()=>{if(!d.product)return a(""," .");g(),Se(!1)},vt=()=>{$(!0),J("")},yt=async Ue=>{if(!Ue)return;const Ye=Ue.trim(),Ht=Ye.split("|").map(Bt=>Bt.trim());let ta=null;if(Ht[0]==="PRODUCT"&&Ht[1]){const Bt=parseInt(Ht[1]);ta=o.find(Da=>Number(Da.product_id)===Bt)}else if(Ht[0]==="HARVEST"&&Ht[3]){const Bt=Ht[3];ta=o.find(Da=>Da.product_name===Bt)}else ta=o.find(Bt=>Bt.product_code&&Bt.product_code===Ye||Bt.product_name===Ye);if(ta){if(p({target:{name:"product",value:ta.product_name}}),F.current)try{((F.current.getState?F.current.getState():0)===2||F.current.isScanning)&&await F.current.stop()}catch(Bt){console.warn("Stop on success failed",Bt)}a(" ",`[${ta.product_name}]  .`),$(!1),setTimeout(()=>{K.current?.focus(),K.current?.select()},300)}else a(" ","   .")};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden",children:[s.jsxs("div",{className:"bg-white px-5 pt-6 pb-4 border-b border-slate-100 shrink-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h1",{className:"text-xl font-black text-slate-900 tracking-tight",children:""}),s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{onClick:_,className:"p-2 bg-slate-50 text-slate-400 rounded-xl hover:text-rose-500 transition-colors",children:s.jsx(Vx,{size:18})})})]}),n?s.jsxs("div",{className:"flex items-center gap-4 bg-indigo-50 p-4 rounded-3xl border border-indigo-100",children:[s.jsx("div",{className:"w-12 h-12 bg-indigo-600 text-white rounded-2xl flex items-center justify-center font-black text-lg",children:n.customer_name[0]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-black text-slate-900",children:n.customer_name}),s.jsx("span",{className:"bg-white text-indigo-600 px-2 py-0.5 rounded-full text-[9px] font-black border border-indigo-200 uppercase tracking-tighter",children:"VIP CUSTOMER"})]}),s.jsx("div",{className:"text-[10px] font-bold text-slate-500 mt-0.5",children:n.mobile_number})]}),s.jsx("button",{onClick:()=>i(null),className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:s.jsx(js,{size:18})})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"   ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl text-sm font-bold focus:ring-2 focus:ring-indigo-500 transition-all",value:Z,onChange:Ue=>ie(Ue.target.value),onKeyPress:Ue=>Ue.key==="Enter"&&Ee()}),s.jsx("button",{onClick:Ee,className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 px-4 bg-indigo-600 text-white rounded-xl text-xs font-black shadow-lg shadow-indigo-100",children:""})]}),de.length>0&&s.jsx("div",{className:"bg-white border border-slate-100 rounded-2xl shadow-xl max-h-48 overflow-auto animate-in slide-in-from-top-2",children:de.map(Ue=>s.jsxs("button",{onClick:()=>ze(Ue),className:"w-full px-4 py-3 text-left border-b border-slate-50 last:border-0 hover:bg-slate-50 active:bg-slate-100 transition-colors",children:[s.jsx("div",{className:"text-sm font-black text-slate-800",children:Ue.customer_name}),s.jsxs("div",{className:"text-[10px] font-bold text-slate-400",children:[Ue.mobile_number," | ",Ue.address_primary||" "]})]},Ue.customer_id))}),Z&&de.length===0&&!V&&s.jsxs("button",{onClick:()=>ve(!0),className:"w-full h-12 border-2 border-dashed border-slate-200 rounded-2xl flex items-center justify-center gap-2 text-slate-400 hover:text-indigo-600 hover:border-indigo-200 transition-all font-bold text-sm",children:[s.jsx(vne,{size:18}),s.jsxs("span",{children:['"',Z,'"   ']})]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden px-5 pt-4 pb-20 space-y-4",children:n&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white p-4 rounded-[2rem] border border-slate-100 shadow-sm flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2.5 bg-indigo-50 text-indigo-500 rounded-2xl",children:s.jsx(jc,{size:18})}),s.jsx("span",{className:"text-sm font-bold text-slate-600",children:" "})]}),s.jsx("input",{type:"date",className:"bg-transparent border-none text-right font-black text-slate-900 focus:ring-0 text-sm",value:t,onChange:Ue=>r(Ue.target.value)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:vt,className:"bg-white h-20 rounded-3xl shadow-sm border border-slate-100 flex flex-col items-center justify-center gap-1 text-slate-600 active:scale-95 transition-all",children:[s.jsx(f0,{size:24,className:"text-indigo-500"}),s.jsx("span",{className:"text-[11px] font-black",children:" QR "})]}),s.jsxs("div",{className:"bg-white h-20 rounded-3xl shadow-sm border border-slate-100 flex flex-col items-center justify-center gap-1",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:" "}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>p({target:{name:"discountRate",value:Math.max(0,(Number(d.discountRate)||0)-1)}}),className:"w-8 h-8 flex items-center justify-center bg-slate-50 rounded-lg text-rose-500 active:scale-95 transition-all",children:s.jsx("span",{className:"text-xl font-black leading-none select-none",children:"-"})}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"number",name:"discountRate",className:"w-14 text-center bg-transparent border-none text-xl font-black text-rose-500 p-0 focus:ring-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",value:d.discountRate||0,onChange:p}),s.jsx(HH,{size:14,className:"text-rose-500",strokeWidth:3})]}),s.jsx("button",{onClick:()=>p({target:{name:"discountRate",value:Math.min(100,(Number(d.discountRate)||0)+1)}}),className:"w-8 h-8 flex items-center justify-center bg-rose-500 rounded-lg text-white active:scale-95 transition-all shadow-sm shadow-rose-100",children:s.jsx("span",{className:"text-xl font-black leading-none select-none",children:"+"})})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-400 font-black text-xs uppercase tracking-widest pl-1 mt-2",children:[s.jsx(So,{size:12,className:"text-indigo-500"}),s.jsx("span",{children:"  "})]}),s.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:o.map(Ue=>s.jsxs("button",{onClick:()=>{p({target:{name:"product",value:Ue.product_name}})},className:"bg-white px-5 py-3 rounded-2xl shadow-sm border border-slate-100 whitespace-nowrap active:scale-95 transition-all flex flex-col items-center min-w-[120px]",children:[s.jsx("div",{className:"text-sm font-black text-slate-700",children:Ue.product_name}),Ue.specification&&s.jsx("div",{className:"text-[10px] text-slate-400 font-bold mb-1",children:Ue.specification}),s.jsxs("div",{className:"text-[10px] text-indigo-500 font-black",children:[Ve(Ue.unit_price),""]})]},Ue.product_id))})]}),s.jsxs("div",{className:"flex items-center justify-between px-2",children:[s.jsxs("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:["  (",l.length,")"]}),s.jsx("button",{onClick:()=>Se(!Oe),className:`text-[11px] font-black h-8 px-4 rounded-full transition-all ${Oe?"bg-indigo-600 text-white shadow-lg":"bg-white border border-slate-100 text-indigo-600"}`,children:Oe?"":" "})]}),Oe&&s.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] border border-slate-100 shadow-xl space-y-5 animate-in slide-in-from-top-4 duration-300",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:" "}),s.jsxs("select",{name:"product",className:"w-full h-12 bg-slate-50 border-none rounded-2xl text-sm font-black focus:ring-2 focus:ring-indigo-500 transition-all appearance-none pr-10",value:d.product,onChange:p,children:[s.jsx("option",{value:"",children:" "}),o.map(Ue=>s.jsxs("option",{value:Ue.product_name,children:[Ue.product_name," (",Ue.specification||" ",") - ",Ve(Ue.unit_price),""]},Ue.product_id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:""}),s.jsx("input",{name:"price",className:"w-full h-12 bg-slate-50 border-none rounded-2xl text-sm font-black focus:ring-2 focus:ring-indigo-500 transition-all text-right",value:Ve(d.price),onChange:Ue=>p({target:{name:"price",value:Ue.target.value.replace(/[^0-9]/g,"")}}),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:""}),s.jsxs("div",{className:"h-12 bg-slate-50 rounded-2xl flex items-center px-1 border border-slate-100 overflow-hidden",children:[s.jsx("button",{type:"button",onClick:()=>p({target:{name:"qty",value:Math.max(1,Number(d.qty)-1)}}),className:"w-10 h-10 shrink-0 flex items-center justify-center bg-white rounded-xl shadow-sm border border-slate-200 text-slate-700 active:scale-90 transition-all",children:s.jsx("span",{className:"text-2xl font-black leading-none select-none",children:"-"})}),s.jsx("input",{ref:K,type:"number",name:"qty",className:"flex-1 w-full bg-transparent border-none text-center font-black text-lg text-slate-800 focus:ring-0 p-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",value:d.qty,onChange:p,inputMode:"numeric"}),s.jsx("button",{type:"button",onClick:()=>p({target:{name:"qty",value:Number(d.qty)+1}}),className:"w-10 h-10 shrink-0 flex items-center justify-center bg-indigo-600 rounded-xl shadow-sm text-white active:scale-90 transition-all",children:s.jsx("span",{className:"text-2xl font-black leading-none select-none",children:"+"})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:" ( )"}),s.jsxs("div",{className:"h-12 bg-indigo-50/50 rounded-2xl flex items-center px-4 justify-between border border-indigo-100/50",children:[s.jsx(WC,{size:18,className:"text-indigo-300"}),s.jsxs("span",{className:"text-lg font-black text-indigo-600",children:[Ve(d.amount),""]})]})]}),s.jsxs("button",{onClick:ut,className:"w-full h-14 bg-indigo-600 text-white rounded-2xl font-black shadow-lg shadow-indigo-100 flex items-center justify-center gap-3 active:scale-[0.98] transition-all",children:[s.jsx(So,{size:20})," "]})]}),s.jsxs("div",{className:"space-y-3",children:[l.map(Ue=>s.jsxs("div",{className:"bg-white px-5 py-3 rounded-[1.5rem] border border-slate-100 shadow-sm flex items-center gap-4 animate-in fade-in slide-in-from-left-2 transition-all",children:[s.jsx("div",{className:"w-10 h-10 bg-slate-50 text-slate-400 rounded-xl flex items-center justify-center shrink-0",children:s.jsx(mc,{size:20})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-black text-slate-800",children:Ue.product}),s.jsxs("div",{className:"text-[10px] font-bold text-slate-400 mt-1",children:[Ve(Ue.price),"  ",Ue.qty,""]})]}),s.jsxs("div",{className:"text-right flex flex-col items-end gap-1",children:[s.jsxs("div",{className:"text-sm font-black text-indigo-600",children:[Ve(Ue.amount),""]}),s.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-1.5 rounded-xl scale-95 origin-right border border-slate-200",children:[s.jsx("button",{type:"button",onClick:()=>P(Ue.tempId,-1),className:"w-7 h-7 rounded-lg bg-white shadow-sm border border-slate-200 flex items-center justify-center text-slate-700 active:scale-90",children:s.jsx("span",{className:"text-lg font-black leading-none select-none",children:"-"})}),s.jsx("span",{className:"text-sm font-black text-slate-800 min-w-[20px] text-center",children:Ue.qty}),s.jsx("button",{type:"button",onClick:()=>P(Ue.tempId,1),className:"w-7 h-7 rounded-lg bg-indigo-600 shadow-sm flex items-center justify-center text-white active:scale-90",children:s.jsx("span",{className:"text-lg font-black leading-none select-none",children:"+"})})]}),s.jsx("button",{onClick:()=>b(Ue),className:"text-[9px] font-black text-rose-400 hover:text-rose-600 uppercase",children:""})]})]},Ue.tempId)),l.length===0&&!Oe&&s.jsxs("div",{className:"py-12 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-50 text-slate-200 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(mc,{size:32})}),s.jsxs("p",{className:"text-sm font-bold text-slate-400",children:["  .",s.jsx("br",{})," ."]})]})]}),l.length>0&&s.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-100 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-black text-sm pl-1",children:[s.jsx(WC,{size:16,className:"text-indigo-500"}),s.jsx("span",{children:" "})]}),s.jsx("div",{className:"flex gap-2",children:["","",""].map(Ue=>s.jsx("button",{onClick:()=>D(Ue),className:`flex-1 h-12 rounded-xl font-black text-sm transition-all ${T===Ue?"bg-indigo-600 text-white shadow-md":"bg-slate-50 text-slate-400"}`,children:Ue},Ue))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-black text-sm pl-1",children:[s.jsx(hh,{size:16,className:"text-indigo-500"}),s.jsx("span",{children:"  ()"})]}),s.jsx("input",{type:"text",placeholder:"  ",className:"w-full h-12 bg-slate-50 border-none rounded-2xl px-4 text-sm font-bold text-slate-700 placeholder:text-slate-300",value:I,onChange:Ue=>O(Ue.target.value)})]})]})]})}),n&&l.length>0&&s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50 animate-in slide-in-from-bottom-full duration-500",children:[Ce&&s.jsxs("div",{className:"bg-slate-900/90 backdrop-blur-md text-white p-6 rounded-t-[3rem] space-y-4 animate-in slide-in-from-bottom-4",children:[s.jsxs("div",{className:"flex justify-between items-center text-slate-400 text-xs font-black uppercase tracking-widest",children:[s.jsx("span",{children:"  "}),s.jsx("button",{onClick:()=>we(!1),children:s.jsx(i2,{})})]}),s.jsxs("div",{className:"space-y-3 pt-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-slate-400 text-sm font-bold",children:" "}),s.jsxs("span",{className:"text-white font-black",children:[Ve(k.supply),""]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-slate-400 text-sm font-bold",children:" "}),s.jsxs("span",{className:"text-white font-black",children:[Ve(k.vat),""]})]}),s.jsx("div",{className:"h-px bg-white/10 my-2"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-indigo-400 text-lg font-black",children:"  "}),s.jsxs("span",{className:"text-2xl font-black text-white",children:[Ve(k.amount),""]})]})]})]}),s.jsx("div",{className:"bg-white border-t border-slate-100 p-5 pb-24 shadow-[0_-10px_40px_rgba(0,0,0,0.05)]",children:s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("button",{onClick:()=>we(!Ce),className:"flex-1 h-14 bg-slate-900 text-white rounded-[1.5rem] px-5 flex items-center justify-between group active:scale-[0.98] transition-all",children:[s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsxs("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:[" (",l.length,") "]}),s.jsxs("span",{className:"text-lg font-black leading-none",children:[Ve(k.amount),""]})]}),s.jsx("div",{className:"flex items-center gap-1 text-slate-500",children:Ce?s.jsx(Bae,{size:18}):s.jsx(i2,{size:18})})]}),s.jsx("button",{onClick:w,disabled:c,className:`w-20 h-14 bg-indigo-600 text-white rounded-[1.5rem] flex items-center justify-center shadow-lg shadow-indigo-100 active:scale-[0.95] transition-all ${c?"opacity-50 animate-pulse":""}`,children:s.jsx(rs,{size:24})})]})})]}),he&&s.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-900/60 backdrop-blur-sm flex items-end animate-in fade-in duration-300",children:s.jsxs("div",{className:"w-full bg-white rounded-t-[3rem] p-8 pb-12 animate-in slide-in-from-bottom-10 duration-500 shadow-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-black text-slate-800 tracking-tight",children:"  "}),s.jsx("p",{className:"text-sm font-medium text-slate-400 mt-1 font-bold",children:"    ."})]}),s.jsx("button",{onClick:()=>ve(!1),className:"p-3 bg-slate-50 rounded-2xl text-slate-300",children:s.jsx(js,{})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 mb-2 block",children:""}),s.jsx("input",{className:"w-full h-14 bg-slate-50 border-none rounded-2xl px-5 text-sm font-black focus:ring-2 focus:ring-indigo-500 transition-all",placeholder:" ",value:xe.name,onChange:Ue=>be({...xe,name:Ue.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 mb-2 block",children:" "}),s.jsx("input",{className:"w-full h-14 bg-slate-50 border-none rounded-2xl px-5 text-sm font-black focus:ring-2 focus:ring-indigo-500 transition-all",placeholder:"010-0000-0000",value:xe.mobile,onChange:Re})]}),s.jsx("button",{onClick:Ze,className:"w-full h-16 bg-indigo-600 text-white rounded-2xl animate-in zoom-in-95 duration-500 font-black text-lg shadow-xl shadow-indigo-100 mt-4 active:scale-[0.98]",children:"  "})]})]})}),V&&s.jsx("div",{className:"fixed inset-0 z-[200] bg-white/60 backdrop-blur-sm flex items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-sm font-black text-indigo-600 animate-pulse",children:"   ..."})]})}),Q&&s.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-start p-6 pt-12 animate-in fade-in duration-300 overflow-y-auto",children:[s.jsxs("div",{className:"relative w-full max-w-[280px] aspect-square border-2 border-indigo-500/50 rounded-[2.5rem] overflow-hidden bg-slate-950 shadow-2xl flex items-center justify-center shrink-0",children:[s.jsx("div",{id:"reader",className:"absolute inset-0 z-0"}),ee&&s.jsxs("div",{className:"z-20 flex flex-col items-center gap-4 px-6 py-4 bg-slate-800/95 text-white rounded-3xl text-center mx-4 border border-white/10 shadow-2xl",children:[s.jsx("p",{className:"text-xs font-black leading-relaxed",children:ee}),s.jsx("button",{onClick:()=>W.current?.click(),className:"px-6 py-3 bg-indigo-600 rounded-2xl text-sm font-black shadow-lg active:scale-95 transition-all",children:"  "}),s.jsx("input",{ref:W,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:re})]}),s.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[s.jsx("div",{className:"absolute inset-x-0 h-1 bg-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.8)] animate-scan"}),s.jsx("div",{className:"absolute top-8 left-8 w-8 h-8 border-t-4 border-l-4 border-white rounded-tl-lg"}),s.jsx("div",{className:"absolute top-8 right-8 w-8 h-8 border-t-4 border-r-4 border-white rounded-tr-lg"}),s.jsx("div",{className:"absolute bottom-8 left-8 w-8 h-8 border-b-4 border-l-4 border-white rounded-bl-lg"}),s.jsx("div",{className:"absolute bottom-8 right-8 w-8 h-8 border-b-4 border-r-4 border-white rounded-br-lg"})]})]}),s.jsxs("div",{className:"mt-6 text-center text-white space-y-4 w-full",children:[s.jsx("h3",{className:"text-xl font-black",children:"QR   "}),s.jsx("p",{className:"text-sm text-slate-400",children:"  QR  ."}),s.jsxs("div",{className:"max-w-xs mx-auto pt-2 space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block",children:"   (  )"}),s.jsx("div",{className:"relative opacity-60 focus-within:opacity-100 transition-opacity",children:s.jsx("input",{ref:U,type:"text",className:"w-full h-12 bg-white/5 border border-white/10 rounded-2xl px-6 text-white text-center font-black focus:border-indigo-500/50 focus:ring-0 transition-all outline-none text-xs",placeholder:"  ",value:ae,onChange:Ue=>J(Ue.target.value),onKeyDown:Ue=>{Ue.key==="Enter"&&(yt(ae),Ue.target.blur())}})})]})]}),s.jsx("button",{onClick:()=>$(!1),className:"mt-8 mb-12 w-16 h-16 bg-white/10 hover:bg-white/20 text-white rounded-full flex items-center justify-center transition-all active:scale-90 shrink-0",children:s.jsx(js,{size:32})}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                        @keyframes scan { 0% { top: 0; } 50% { top: 100%; } 100% { top: 0; } }
                        .animate-scan { position: absolute; animation: scan 3s infinite linear; }
                        #reader video { 
                            object-fit: cover !important;
                            height: 100% !important;
                            width: 100% !important;
                        }
                    `}})]})]})},iue=()=>{const{showAlert:a,showConfirm:e}=Na(),t={joinDate:new Date().toISOString().split("T")[0],name:"",level:"",email:"",zip:"",addr1:"",addr2:"",phone:"",mobile:"",marketingConsent:!1,anniversaryDate:"",anniversaryType:"",acquisition:"",purchaseCycle:"",prefProduct:"",prefPackage:"",subInterest:!1,familyType:"",healthConcern:"",memo:""},[r,n]=H.useState(t),[i,o]=H.useState(!1),[l,c]=H.useState(!1),d=H.useRef(null),u=H.useRef(null),h=H.useRef(null),f=H.useRef(null),p=H.useRef(null),g=H.useRef(null),[b,w]=H.useState([]),[_,k]=H.useState(!1),[T,D]=H.useState([]),[I,O]=H.useState([]),[P,V]=H.useState(!1),[G,Q]=H.useState(!1),[$,ae]=H.useState(null),[J,U]=H.useState(!1),[F,W]=H.useState(!1);H.useEffect(()=>{d.current&&d.current.focus()},[]),H.useEffect(()=>{const Re=setTimeout(async()=>{if(J&&r.name.trim().length>=2)try{const ut=await fetch(`/api/customer/search/name?query=${encodeURIComponent(r.name)}`);if(ut.ok){const vt=await ut.json();D(vt.slice(0,5))}}catch(ut){console.error("Name search failed:",ut)}else D([])},300);return()=>clearTimeout(Re)},[r.name,J]),H.useEffect(()=>{const Re=setTimeout(async()=>{const ut=r.mobile.replace(/[^0-9]/g,"");if(F&&ut.length>=4)try{const vt=await fetch(`/api/customer/search/mobile?query=${encodeURIComponent(r.mobile)}`);if(vt.ok){const yt=await vt.json();O(yt.slice(0,5))}}catch(vt){console.error("Mobile search failed:",vt)}else O([])},300);return()=>clearTimeout(Re)},[r.mobile,F]);const K=Re=>{const{name:ut,value:vt,type:yt,checked:Ue}=Re.target;let Ye=yt==="checkbox"?Ue:vt;(ut==="mobile"||ut==="phone")&&(Ye=Kn(Ye)),ut==="name"&&U(!0),ut==="mobile"&&W(!0),n(Ht=>({...Ht,[ut]:Ye}))},ee=async Re=>{let ut=`[${Re.customer_name}]   ?`;Re.status!==""&&(ut=`[${Re.customer_name}]  '${Re.status}' .   ''  ?`),await e(" ",ut)&&(n(vt=>({...vt,name:Re.customer_name,mobile:Re.mobile_number,level:Re.membership_level||"",email:Re.email||"",zip:Re.zip_code||"",addr1:Re.address_primary||"",addr2:Re.address_detail||"",phone:Re.phone_number||"",memo:Re.memo||"",marketingConsent:Re.marketing_consent||!1,anniversaryDate:Re.anniversary_date||"",anniversaryType:Re.anniversary_type||"",acquisition:Re.acquisition_channel||"",purchaseCycle:Re.purchase_cycle||"",prefProduct:Re.pref_product_type||"",prefPackage:Re.pref_package_type||"",familyType:Re.family_type||"",healthConcern:Re.health_concern||"",subInterest:Re.sub_interest||!1})),ae(Re.customer_id),U(!1),W(!1),D([]),O([]))},ne=(Re,ut)=>{Re.key==="Enter"&&(Re.preventDefault(),ut&&ut.current&&ut.current.focus())},re=()=>{if(!window.daum||!window.daum.Postcode){a("","  (Daum)   .");return}c(!0),setTimeout(()=>{new window.daum.Postcode({oncomplete:Re=>{let ut=Re.address,vt="";Re.addressType==="R"&&(Re.bname!==""&&(vt+=Re.bname),Re.buildingName!==""&&(vt+=vt!==""?`, ${Re.buildingName}`:Re.buildingName),ut+=vt!==""?` (${vt})`:""),n(yt=>({...yt,zip:Re.zonecode,addr1:ut})),c(!1)},width:"100%",height:"100%"}).embed(document.getElementById("addr-layer-container-reg"))},100)},Z=async()=>{const{name:Re,mobile:ut}=r;if(!Re&&!ut)return[];try{let vt=[];if(Re){const yt=await fetch(`/api/customer/search/name?query=${encodeURIComponent(Re)}`);if(yt.ok){const Ue=await yt.json();vt=vt.concat(Ue)}}if(ut&&ut.length>5){const yt=await fetch(`/api/customer/search/mobile?query=${encodeURIComponent(ut)}`);if(yt.ok){const Ue=await yt.json(),Ye=new Set(vt.map(ta=>ta.customer_id)),Ht=Ue.filter(ta=>!Ye.has(ta.customer_id));vt=vt.concat(Ht)}}return vt}catch(vt){return console.error("Duplicate check failed:",vt),[]}},ie=async Re=>{if(Re.preventDefault(),!r.name){await a(""," ."),d.current?.focus();return}if(r.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)){await a("","   .");return}if(!_){const ut=await Z();if(ut.length>0){w(ut),k(!0);return}}await e("",$?"  ?":" ?")&&await de()},de=async()=>{o(!0);try{const Re={customerId:$||void 0,customerName:r.name,mobileNumber:r.mobile,membershipLevel:r.level,phoneNumber:r.phone||null,email:r.email||null,zipCode:r.zip||null,addressPrimary:r.addr1||null,addressDetail:r.addr2||null,memo:r.memo||null,anniversaryDate:r.anniversaryDate||null,anniversaryType:r.anniversaryType||null,marketingConsent:r.marketingConsent,acquisitionChannel:r.acquisition||null,prefProductType:r.prefProduct||null,prefPackageType:r.prefPackage||null,familyType:r.familyType||null,healthConcern:r.healthConcern||null,subInterest:r.subInterest,purchaseCycle:r.purchaseCycle||null,status:""};if(!(await fetch($?"/api/customer/update":"/api/customer/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Re)})).ok)throw new Error("Network response was not ok");$?await a("","   ()."):await a("","  ."),fe()}catch(Re){console.error("Failed to register customer:",Re),await a(""," : "+Re)}finally{o(!1)}},fe=()=>{n(t),ae(null),U(!1),W(!1),d.current&&d.current.focus()},he=async Re=>{const ut=Re.target.files[0];if(!ut)return;const vt=new FileReader;vt.onload=async()=>{const yt=vt.result.split(",")[1];await ve(yt,ut.type),Re.target.value=""},vt.readAsDataURL(ut)},ve=async(Re,ut)=>{o(!0);try{const vt=await fetch("/api/ai/business-card",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageBase64:Re,mimeType:ut})});if(!vt.ok)throw new Error("AI processing failed");const yt=await vt.json();n(Ue=>({...Ue,name:yt.name||Ue.name,mobile:yt.mobile||Ue.mobile,phone:yt.phone||Ue.phone,email:yt.email||Ue.email,addr1:yt.address||Ue.addr1,memo:(Ue.memo?Ue.memo+`
`:"")+[yt.company,yt.job_title,yt.memo].filter(Boolean).join(`
`)})),await a("","    .")}catch(vt){console.error(vt);let yt="  .  .";const Ue=String(vt);Ue.includes("API ")||Ue.includes("400")||Ue.includes("403")?yt="AI  : API     .":Ue.includes("Network Error")&&(yt="   ."),await a("",yt)}finally{o(!1)}},[Oe,Se]=H.useState(!1),Ce=H.useRef(null),we=H.useRef(null),xe=H.useRef(null),be=async()=>{Se(!0)};H.useEffect(()=>(Oe?Ee():ze(),()=>ze()),[Oe]);const Ee=async()=>{try{const Re=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});xe.current=Re,Ce.current&&(Ce.current.srcObject=Re)}catch(Re){console.error("Camera error:",Re),a("","   .  ."),Se(!1)}},ze=()=>{xe.current&&(xe.current.getTracks().forEach(Re=>Re.stop()),xe.current=null)},Ze=async()=>{if(!Ce.current||!we.current)return;const Re=Ce.current,ut=we.current;ut.width=Re.videoWidth,ut.height=Re.videoHeight,ut.getContext("2d").drawImage(Re,0,0,ut.width,ut.height);const yt=ut.toDataURL("image/jpeg",.8).split(",")[1];ze(),Se(!1),await ve(yt,"image/jpeg")};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Customer Relationship Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Registration"})]})]}),s.jsx("div",{className:"flex gap-3",children:s.jsxs("div",{className:"flex items-center gap-3 bg-white px-4 py-2 rounded-2xl border border-slate-200 shadow-sm",children:[s.jsx("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-tight",children:"  (OCR)"}),s.jsx("input",{type:"file",ref:g,accept:"image/*",className:"hidden",onChange:he}),s.jsxs("button",{onClick:()=>g.current?.click(),className:"h-10 px-4 rounded-xl bg-slate-50 text-indigo-600 font-bold hover:bg-indigo-50 transition-all flex items-center gap-2 text-sm border border-indigo-100",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"upload_file"}),"  "]}),s.jsxs("button",{onClick:be,className:"h-10 px-4 rounded-xl bg-indigo-600 text-white font-bold hover:bg-indigo-500 transition-all flex items-center gap-2 text-sm shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"photo_camera"}),"  "]})]})})]})}),s.jsx("form",{onSubmit:ie,className:"px-4 lg:px-6 min-[2000px]:px-10 mt-0.5 flex flex-col gap-2 overflow-hidden flex-1 pb-4 lg:pb-6 min-[2000px]:pb-10",children:s.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-3 shadow-sm border border-slate-100 relative group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 overflow-hidden pointer-events-none",children:s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-50/30 rounded-full -mr-16 -mt-16 transition-transform group-hover:scale-110"})}),s.jsxs("h3",{className:"text-lg font-black text-slate-800 mb-2 flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-600 flex items-center justify-center text-white",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"info"})}),"  "]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-y-2 gap-x-4",children:[s.jsxs("div",{className:"lg:col-span-3 space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"date",name:"joinDate",value:r.joinDate,onChange:K,className:"w-full h-10 bg-slate-50 border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 transition-all"})})]}),s.jsxs("div",{className:"lg:col-span-2 space-y-1",children:[s.jsxs("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:[" ",s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",name:"name",ref:d,value:r.name,onChange:K,onFocus:()=>V(!0),onBlur:()=>setTimeout(()=>V(!1),200),onKeyDown:Re=>ne(Re,u),placeholder:" ",required:!0,className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-800 px-4 focus:ring-2 focus:ring-indigo-500 transition-all shadow-sm"}),P&&T.length>0&&s.jsxs("div",{className:"absolute z-[100] top-full left-0 w-80 mt-1 bg-white border border-slate-200 rounded-2xl shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"bg-slate-50 px-4 py-2 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"material-symbols-rounded text-xs text-rose-500",children:"warning"}),s.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-tight",children:"   "})]}),s.jsx("span",{className:"text-[9px] bg-rose-100 text-rose-600 px-1.5 py-0.5 rounded-md font-black",children:" "})]}),s.jsx("div",{className:"max-h-60 overflow-y-auto custom-scrollbar",children:T.map(Re=>s.jsxs("div",{onClick:()=>Re.status!==""&&ee(Re),className:`p-3 border-b border-slate-50 last:border-0 transition-colors ${Re.status!==""?"hover:bg-slate-50 cursor-pointer":"cursor-default opacity-60 bg-slate-50"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-0.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-bold text-slate-800",children:Re.customer_name}),Re.status!==""?s.jsx("span",{className:"text-[9px] font-black bg-rose-100 text-rose-600 px-1.5 py-0.5 rounded-md",children:Re.status}):s.jsx("span",{className:"text-[9px] font-bold text-emerald-600 bg-emerald-50 px-1.5 py-0.5 rounded-md",children:""})]}),s.jsx("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 px-1.5 py-0.5 rounded-md",children:Re.membership_level||""})]}),s.jsxs("div",{className:"text-[11px] text-slate-500 flex items-center gap-1 font-medium",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"call"})," ",Re.mobile_number||"-"]}),s.jsxs("div",{className:"text-[11px] text-slate-400 truncate mt-0.5 font-medium",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"location_on"})," ",Re.address_primary||"  "]})]},Re.customer_id))}),s.jsx("div",{className:"bg-slate-50 px-4 py-2 border-t border-slate-100 text-center",children:s.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:"    ."})})]})]})]}),s.jsxs("div",{className:"lg:col-span-2 space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsxs("select",{name:"level",value:r.level,onChange:K,className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 transition-all appearance-none shadow-sm",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"VIP",children:"VIP"}),s.jsx("option",{value:"VVIP",children:"VVIP"}),s.jsx("option",{value:"/",children:"/"})]})]}),s.jsxs("div",{className:"lg:col-span-5 space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("input",{type:"email",name:"email",ref:h,value:r.email,onChange:K,onKeyDown:Re=>ne(Re,p),placeholder:"example@mail.com",className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 transition-all shadow-sm"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-y-2 gap-x-4 mt-3",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:""}),s.jsx("input",{type:"text",name:"zip",value:r.zip,readOnly:!0,onClick:re,placeholder:"",className:"w-full h-10 bg-slate-50 border-slate-200 border rounded-xl font-bold text-slate-700 px-4 cursor-pointer hover:bg-slate-100 transition-all text-center"})]}),s.jsxs("div",{className:"lg:col-span-5 space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("input",{type:"text",name:"addr1",value:r.addr1,onClick:re,placeholder:"  ",readOnly:!0,className:"w-full h-10 bg-slate-50 border-slate-200 border rounded-xl font-bold text-slate-700 px-4 cursor-pointer hover:bg-slate-100 transition-all"})]}),s.jsxs("div",{className:"lg:col-span-5 space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("input",{type:"text",name:"addr2",ref:f,value:r.addr2,onChange:K,placeholder:" /   ",className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 transition-all shadow-sm"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-y-2 gap-x-4 mt-3",children:[s.jsxs("div",{className:"lg:col-span-3 space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("input",{type:"tel",name:"phone",ref:p,value:r.phone,onChange:K,onKeyDown:Re=>ne(Re,u),placeholder:"02-000-0000",className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 transition-all shadow-sm"})]}),s.jsxs("div",{className:"lg:col-span-3 space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"tel",name:"mobile",ref:u,value:r.mobile,onChange:K,onFocus:()=>Q(!0),onBlur:()=>setTimeout(()=>Q(!1),200),onKeyDown:Re=>ne(Re,h),placeholder:"010-0000-0000",className:"w-full h-10 bg-white border-indigo-200 border-2 rounded-xl font-black text-slate-900 px-4 focus:ring-4 focus:ring-indigo-500/20 transition-all shadow-sm"}),G&&I.length>0&&s.jsxs("div",{className:"absolute z-[100] top-full right-0 w-80 mt-1 bg-white border border-slate-200 rounded-2xl shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"bg-slate-50 px-4 py-2 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"material-symbols-rounded text-xs text-rose-500",children:"warning"}),s.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-tight",children:"   "})]}),s.jsx("span",{className:"text-[9px] bg-rose-100 text-rose-600 px-1.5 py-0.5 rounded-md font-black",children:" "})]}),s.jsx("div",{className:"max-h-60 overflow-y-auto custom-scrollbar",children:I.map(Re=>s.jsxs("div",{onClick:()=>ee(Re),className:"p-3 hover:bg-slate-50 cursor-pointer border-b border-slate-50 last:border-0 transition-colors text-left",children:[s.jsxs("div",{className:"flex justify-between items-start mb-0.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-bold text-slate-800",children:Re.customer_name}),Re.status!==""&&s.jsx("span",{className:"text-[9px] font-black bg-rose-100 text-rose-600 px-1.5 py-0.5 rounded-md",children:Re.status})]}),s.jsx("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 px-1.5 py-0.5 rounded-md",children:Re.membership_level||""})]}),s.jsxs("div",{className:"text-[11px] text-slate-500 flex items-center gap-1 font-medium",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"call"})," ",Re.mobile_number||"-"]}),s.jsxs("div",{className:"text-[11px] text-slate-400 truncate mt-0.5 font-medium",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"location_on"})," ",Re.address_primary||"  "]})]},Re.customer_id))}),s.jsx("div",{className:"bg-slate-50 px-4 py-2 border-t border-slate-100 text-center",children:s.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:"     ."})})]})]})]}),s.jsx("div",{className:"lg:col-span-6 flex items-end pb-1",children:s.jsxs("label",{className:"flex items-center gap-3 bg-slate-50 border border-slate-200 px-6 py-3 rounded-2xl cursor-pointer hover:bg-indigo-50 transition-all w-full group/check",children:[s.jsx("div",{className:"relative flex items-center",children:s.jsx("input",{type:"checkbox",name:"marketingConsent",checked:r.marketingConsent,onChange:K,className:"w-5 h-5 rounded-lg border-2 border-slate-300 text-indigo-600 focus:ring-indigo-500 transition-all cursor-pointer"})}),s.jsx("span",{className:"text-sm font-black text-slate-600 group-hover/check:text-indigo-700",children:"   "})]})})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-3 shadow-sm border border-slate-100 relative group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 overflow-hidden pointer-events-none",children:s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-50/30 rounded-full -mr-16 -mt-16 transition-transform group-hover:scale-110"})}),s.jsxs("h3",{className:"text-lg font-black text-slate-800 mb-2 flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-600 flex items-center justify-center text-white",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"volunteer_activism"})}),"CRM    "]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-y-2 gap-x-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("input",{type:"date",name:"anniversaryDate",value:r.anniversaryDate,onChange:K,className:"w-full h-10 bg-slate-50 border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 transition-all"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsxs("select",{name:"anniversaryType",value:r.anniversaryType,onChange:K,className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 appearance-none shadow-sm focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsxs("select",{name:"acquisition",value:r.acquisition,onChange:K,className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 appearance-none shadow-sm focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"SNS(/)",children:"SNS"}),s.jsx("option",{value:" ",children:" "}),s.jsx("option",{value:" ",children:" "}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsxs("select",{name:"purchaseCycle",value:r.purchaseCycle,onChange:K,className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 appearance-none shadow-sm focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:" ",children:" "}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"/",children:"/"}),s.jsx("option",{value:" ",children:" "})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-y-2 gap-x-4 mt-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsxs("select",{name:"prefProduct",value:r.prefProduct,onChange:K,className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 appearance-none shadow-sm focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"(/)",children:""}),s.jsx("option",{value:" ",children:" "})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsxs("select",{name:"prefPackage",value:r.prefPackage,onChange:K,className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 appearance-none shadow-sm focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"()",children:""}),s.jsx("option",{value:"()",children:""})]})]}),s.jsx("div",{className:"lg:col-span-2 flex items-end pb-1",children:s.jsxs("label",{className:"flex items-center gap-3 bg-white border border-indigo-100 px-6 py-3 rounded-2xl cursor-pointer hover:bg-indigo-50 transition-all w-full group/check",children:[s.jsx("input",{type:"checkbox",name:"subInterest",checked:r.subInterest,onChange:K,className:"w-5 h-5 rounded-lg border-2 border-slate-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer"}),s.jsx("span",{className:"text-sm font-black text-slate-600 group-hover/check:text-indigo-700",children:" ()  "})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-2 gap-x-4 mt-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:"  "}),s.jsx("input",{type:"text",name:"familyType",value:r.familyType,onChange:K,placeholder:":  ,    ",className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 shadow-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("input",{type:"text",name:"healthConcern",value:r.healthConcern,onChange:K,placeholder:": ,  ",className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 shadow-sm"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-3 shadow-sm border border-slate-100 mb-2",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1 mb-1 block",children:"  "}),s.jsx("textarea",{name:"memo",value:r.memo,onChange:K,rows:"3",placeholder:"   .",className:"w-full bg-slate-50 border-slate-200 border rounded-xl font-bold text-slate-700 p-3 focus:ring-2 focus:ring-indigo-500 transition-all resize-none"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 pb-2 border-t border-slate-100",children:[s.jsxs("button",{type:"button",onClick:fe,className:"h-10 px-8 rounded-2xl bg-white border border-slate-200 text-slate-500 font-black hover:bg-slate-50 transition-all flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"refresh"}),"  "]}),s.jsxs("button",{type:"submit",disabled:i,className:"h-10 px-12 rounded-2xl bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-200 flex items-center gap-2 disabled:opacity-50",children:[s.jsx("span",{className:"material-symbols-rounded",children:i?"sync":"person_add"}),i?" ...":" "]})]})]})}),l&&s.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>c(!1)}),s.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-[2rem] shadow-2xl overflow-hidden flex flex-col animate-in zoom-in duration-300",children:[s.jsxs("div",{className:"px-8 py-6 border-b border-slate-100 flex justify-between items-center bg-indigo-600 text-white",children:[s.jsx("h3",{className:"text-xl font-black",children:" "}),s.jsx("button",{onClick:()=>c(!1),className:"w-10 h-9 rounded-full hover:bg-white/20 transition-colors flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{id:"addr-layer-container-reg",className:"w-full h-[500px]"})]})]}),Oe&&s.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-in fade-in",children:s.jsxs("div",{className:"relative w-full max-w-2xl bg-black rounded-3xl overflow-hidden shadow-2xl flex flex-col",children:[s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsx("button",{onClick:()=>Se(!1),className:"w-10 h-10 rounded-full bg-black/50 text-white flex items-center justify-center hover:bg-black/70 transition-all",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})}),s.jsxs("div",{className:"relative aspect-[4/3] bg-black",children:[s.jsx("video",{ref:Ce,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),s.jsx("canvas",{ref:we,className:"hidden"}),s.jsx("div",{className:"absolute inset-0 border-[3px] border-white/30 m-8 rounded-2xl pointer-events-none flex items-center justify-center",children:s.jsx("div",{className:"text-white/70 font-bold bg-black/40 px-4 py-2 rounded-full backdrop-blur-sm text-sm",children:"   "})})]}),s.jsxs("div",{className:"p-6 bg-slate-900 flex justify-center items-center gap-6",children:[s.jsx("button",{onClick:()=>Se(!1),className:"px-6 py-3 rounded-xl bg-slate-800 text-white font-bold hover:bg-slate-700 transition-all",children:""}),s.jsx("button",{onClick:Ze,className:"w-16 h-16 rounded-full bg-white border-4 border-slate-300 flex items-center justify-center hover:scale-105 transition-transform shadow-lg shadow-indigo-500/30",children:s.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-600 border-2 border-white"})}),s.jsx("div",{className:"w-[88px]"})," "]})]})}),_&&s.jsxs("div",{className:"fixed inset-0 z-[400] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-md",onClick:()=>{k(!1),d.current?.focus()}}),s.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col animate-in zoom-in duration-300",children:[s.jsxs("div",{className:"p-8 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-rose-100 flex items-center justify-center text-rose-600",children:s.jsx("span",{className:"material-symbols-rounded",children:"warning"})}),s.jsx("h3",{className:"text-2xl font-black text-slate-800",children:" "})]}),s.jsxs("p",{className:"text-slate-500 font-medium",children:["    ",s.jsxs("span",{className:"text-rose-600 font-black",children:[b.length,""]})," .",s.jsx("br",{}),"   ."]})]}),s.jsx("div",{className:"px-8 py-2 max-h-[400px] overflow-y-auto",children:s.jsx("div",{className:"rounded-2xl border border-slate-100 overflow-hidden shadow-sm",children:s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 border-b border-slate-100",children:[s.jsx("th",{className:"px-4 py-3 text-left text-[11px] font-black text-slate-400 uppercase",children:""}),s.jsx("th",{className:"px-4 py-3 text-left text-[11px] font-black text-slate-400 uppercase",children:""}),s.jsx("th",{className:"px-4 py-3 text-left text-[11px] font-black text-slate-400 uppercase",children:""}),s.jsx("th",{className:"px-4 py-3 text-left text-[11px] font-black text-slate-400 uppercase",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:b.map((Re,ut)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("div",{className:"font-black text-slate-700",children:Re.customer_name}),s.jsx("div",{className:"text-[10px] text-slate-400 truncate max-w-[150px]",children:Re.address_primary||" "})]}),s.jsx("td",{className:"px-4 py-3",children:Re.status!==""?s.jsx("span",{className:"text-[10px] font-black bg-rose-100 text-rose-600 px-2 py-1 rounded-md",children:Re.status}):s.jsx("span",{className:"text-[10px] font-black bg-emerald-100 text-emerald-600 px-2 py-1 rounded-md",children:""})}),s.jsx("td",{className:"px-4 py-3 font-bold text-slate-500",children:Re.mobile_number||"-"}),s.jsx("td",{className:"px-4 py-3",children:Re.status!==""?s.jsx("button",{onClick:()=>{k(!1),ee(Re)},className:"px-3 py-1.5 rounded-lg bg-indigo-50 text-indigo-600 font-black text-xs hover:bg-indigo-600 hover:text-white transition-all whitespace-nowrap",children:"  "}):s.jsx("span",{className:"text-[11px] font-bold text-slate-400",children:" "})})]},ut))})]})})}),s.jsxs("div",{className:"p-8 pt-4 flex gap-3",children:[s.jsxs("button",{onClick:()=>{k(!1),d.current?.focus()},className:"h-12 px-6 rounded-2xl bg-slate-100 text-slate-600 font-black hover:bg-slate-200 transition-all flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"close"}),"  ()"]}),s.jsxs("button",{onClick:()=>{k(!1),r.mobile?r.addr2||f.current?.focus():u.current?.focus()},className:"flex-1 h-12 rounded-2xl bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-200 flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"forward"}),"   "]})]})]})]})]})},sue=()=>{const{showAlert:a,showConfirm:e}=Na(),t={id:"",name:"",level:"",joinDate:"",email:"",zip:"",addr1:"",addr2:"",phone:"",mobile:"",marketingConsent:!1,anniversaryDate:"",anniversaryType:"",acquisition:"",purchaseCycle:"",prefProduct:"",prefPackage:"",subInterest:!1,familyType:"",healthConcern:"",memo:"",status:""},[r,n]=H.useState("view"),[i,o]=H.useState(""),[l,c]=H.useState(null),[d,u]=H.useState(!1),[h,f]=H.useState(t),[p,g]=H.useState([]),[b,w]=H.useState([]),[_,k]=H.useState(!1),[T,D]=H.useState(!1),[I,O]=H.useState(null),[P,V]=H.useState(!1),[G,Q]=H.useState(!1),[$,ae]=H.useState(!1),[J,U]=H.useState([]),[F,W]=H.useState([]),[K,ee]=H.useState(!1),ne=H.useRef(null);H.useEffect(()=>{ne.current&&ne.current.focus()},[]);const re=async xe=>{if(xe?.preventDefault(),!i){await a("","   .");return}u(!0);try{let be=[];if(/[0-9]/.test(i)){const Ee=await fetch(`/api/customer/search/mobile?query=${encodeURIComponent(i)}`);Ee.ok&&(be=await Ee.json())}if(be.length===0){const Ee=await fetch(`/api/customer/search/name?query=${encodeURIComponent(i)}`);Ee.ok&&(be=await Ee.json())}be.length===0?await a(" ","  ."):be.length===1?de(be[0]):(W(be),ee(!0))}catch(be){await a(""," : "+be)}finally{u(!1)}},Z=async xe=>{try{const be=await fetch(`/api/customer/addresses?customer_id=${xe}`);if(be.ok){const Ee=await be.json();g(Ee||[])}}catch(be){console.error("Address fetch error:",be),a("",`   : ${be.message}`)}},ie=async xe=>{if(xe)try{console.log(`Fetching logs for ${xe}`);const be=await fetch(`/api/customer/logs?customer_id=${xe}`);if(be.ok){const Ee=await be.json();console.log("Logs loaded:",Ee),U(Ee),ae(!0)}else{const Ee=await be.text();throw new Error(`Status ${be.status}: ${Ee}`)}}catch(be){console.error("Log fetch error:",be),a("",`   : ${be.message}`)}},de=H.useCallback(async xe=>{c(xe),n("view"),f({id:xe.customer_id,name:xe.customer_name,level:xe.membership_level,joinDate:xe.join_date,email:xe.email||"",zip:xe.zip_code||"",addr1:xe.address_primary||"",addr2:xe.address_detail||"",phone:xe.phone_number||"",mobile:xe.mobile_number||"",marketingConsent:xe.marketing_consent===!0||xe.marketing_consent==="true",anniversaryDate:xe.anniversary_date||"",anniversaryType:xe.anniversary_type||"",acquisition:xe.acquisition_channel||"",purchaseCycle:xe.purchase_cycle||"",prefProduct:xe.pref_product_type||"",prefPackage:xe.pref_package_type||"",subInterest:xe.sub_interest===!0||xe.sub_interest==="true",familyType:xe.family_type||"",healthConcern:xe.health_concern||"",memo:xe.memo||"",status:xe.status||""}),Z(xe.customer_id)},[]),fe=async xe=>{if(xe&&xe.preventDefault(),!l){await a("","  .");return}if(r==="view"){n("edit");return}if(await e(""," ?")){u(!0);try{const be={customerId:h.id,customerName:h.name,mobileNumber:h.mobile,membershipLevel:h.level,phoneNumber:h.phone||null,email:h.email||null,zipCode:h.zip||null,addressPrimary:h.addr1||null,addressDetail:h.addr2||null,memo:h.memo||null,anniversaryDate:h.anniversaryDate||null,anniversaryType:h.anniversaryType||null,marketingConsent:h.marketingConsent,acquisitionChannel:h.acquisition||null,status:h.status,prefProductType:h.prefProduct||null,prefPackageType:h.prefPackage||null,familyType:h.familyType||null,healthConcern:h.healthConcern||null,subInterest:h.subInterest||!1,purchaseCycle:h.purchaseCycle||null};if(!(await fetch("/api/customer/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(be)})).ok)throw new Error("Update failed");await a("","."),n("view");const ze=await fetch(`/api/customer/get?customer_id=${h.id}`);if(ze.ok){const Ze=await ze.json();de(Ze)}}catch(be){await a(""," : "+be)}finally{u(!1)}}},he=async()=>{if(!l){await a("","    .");return}if(await e(" ",`     ?
  , ''    .`)){u(!0);try{if(!(await fetch("/api/customer/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:l.customer_id})})).ok)throw new Error("Operation failed");await a("","  ."),Oe()}catch(xe){await a("","  : "+xe)}finally{u(!1)}}},ve=async()=>{if(l&&await e(" ","   ''  ?")){u(!0);try{if(!(await fetch("/api/customer/reactivate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:l.customer_id})})).ok)throw new Error("Operation failed");await a("","  .");const be=await fetch(`/api/customer/get?customer_id=${l.customer_id}`);if(be.ok){const Ee=await be.json();de(Ee)}}catch(xe){await a(""," : "+xe)}finally{u(!1)}}},Oe=()=>{c(null),f(t),o(""),g([]),w([]),n("view"),ne.current&&ne.current.focus()},Se=()=>{r!=="view"&&(V(!0),setTimeout(()=>{new window.daum.Postcode({oncomplete:xe=>{f(be=>({...be,zip:xe.zonecode,addr1:xe.address})),V(!1)},width:"100%",height:"100%"}).embed(document.getElementById("addr-layer-list-edit"))},100))},Ce=xe=>{const{name:be,value:Ee,type:ze,checked:Ze}=xe.target;let Re=ze==="checkbox"?Ze:Ee;(be==="mobile"||be==="phone")&&(Re=Kn(Re)),f(ut=>({...ut,[be]:Re}))},we=()=>{V(!0),setTimeout(()=>{new window.daum.Postcode({oncomplete:xe=>{setEditingAddress(be=>({...be,zip_code:xe.zonecode,address_primary:xe.address})),V(!1)},width:"100%",height:"100%"}).embed(document.getElementById("addr-layer-list-edit"))},100)};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 pb-2 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-xs font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Customer Relationship Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter mb-4",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["//  ",s.jsx("span",{className:"text-slate-400 font-light ml-2 text-xl",children:"Inquiry & Management"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("form",{onSubmit:re,className:"flex gap-2",children:[s.jsx("input",{ref:ne,type:"text",value:i,onChange:xe=>o(xe.target.value),placeholder:"     Enter",className:"w-80 h-10 px-4 rounded-xl bg-white border border-slate-300 focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all font-bold text-slate-800 shadow-sm text-sm"}),s.jsxs("button",{type:"submit",disabled:d,className:"h-10 px-6 rounded-xl bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-200 flex items-center gap-2",children:[d?s.jsx("span",{className:"material-symbols-rounded animate-spin",children:"refresh"}):s.jsx("span",{className:"material-symbols-rounded",children:"person_search"}),""]})]}),s.jsxs("div",{className:`px-4 py-1.5 rounded-full border font-black text-xs shadow-sm flex items-center gap-2 transition-all ${r==="view"?"bg-slate-100 border-slate-200 text-slate-500":"bg-amber-50 border-amber-200 text-amber-600 shadow-amber-100"}`,children:[s.jsx("span",{className:`material-symbols-rounded text-base ${r==="view"?"text-slate-400":"text-amber-500"}`,children:r==="view"?"visibility":"edit_square"}),r==="view"?" ":" "]})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden bg-slate-50 px-6 lg:px-8 py-4 flex flex-col",children:s.jsxs("div",{className:"space-y-4 overflow-y-auto custom-gray-scrollbar flex-1 p-1",children:[s.jsxs("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition-all ${r==="edit"?"border-indigo-500 shadow-lg":"border-slate-100"}`,children:[s.jsxs("h3",{className:"text-sm font-black text-slate-800 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-3.5 bg-indigo-600 rounded-full"}),"  ",r==="edit"&&s.jsx("span",{className:"text-amber-500 text-[10px] uppercase ml-2 px-1.5 py-0.5 bg-amber-50 rounded-full font-black",children:"Edit"}),h.status===""&&s.jsxs("span",{className:"text-rose-600 text-[10px] uppercase ml-2 px-2 py-0.5 bg-rose-50 rounded-full font-black flex items-center gap-1 border border-rose-100 animate-pulse",children:[s.jsx("span",{className:"material-symbols-rounded text-xs",children:"block"}),"  "]})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-2.5",children:[s.jsxs("div",{className:"col-span-2 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:""}),s.jsx("input",{name:"name",value:h.name||"",onChange:Ce,readOnly:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm transition-all border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400 focus:ring-2 focus:ring-indigo-500 shadow-sm"}`})]}),s.jsxs("div",{className:"col-span-2 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsxs("select",{name:"level",value:h.level||"",onChange:Ce,disabled:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400 focus:ring-2 focus:ring-indigo-500 shadow-sm"}`,children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"VIP",children:"VIP"}),s.jsx("option",{value:"VVIP",children:"VVIP"}),s.jsx("option",{value:"/",children:"/"})]})]}),s.jsxs("div",{className:"col-span-6 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:""}),s.jsx("input",{type:"email",name:"email",value:h.email||"",onChange:Ce,readOnly:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400"}`})]}),s.jsx("div",{className:"col-span-2 flex items-end",children:s.jsxs("label",{className:`flex items-center gap-2 px-3 h-11 rounded-lg w-full border transition-all ${h.marketingConsent?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-slate-50 border-slate-200 text-slate-400"}`,children:[s.jsx("input",{type:"checkbox",name:"marketingConsent",checked:h.marketingConsent||!1,onChange:Ce,disabled:r==="view",className:"w-4 h-4 rounded text-indigo-600"}),s.jsx("span",{className:"text-xs font-black",children:""})]})})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-2.5 mt-2",children:[s.jsxs("div",{className:"col-span-2 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:""}),s.jsx("input",{value:h.zip||"",readOnly:!0,onClick:Se,className:`w-full h-11 rounded-lg font-black text-center text-sm border text-black bg-white shadow-sm ${r==="view"?"border-slate-300":"border-slate-400 cursor-pointer"}`})]}),s.jsxs("div",{className:"col-span-5 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsx("input",{value:h.addr1||"",readOnly:!0,onClick:Se,className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white shadow-sm ${r==="view"?"border-slate-300":"border-slate-400 cursor-pointer"}`})]}),s.jsxs("div",{className:"col-span-5 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsx("input",{name:"addr2",value:h.addr2||"",onChange:Ce,readOnly:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400 focus:ring-2 focus:ring-indigo-500 shadow-sm"}`})]})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-2.5 mt-2",children:[s.jsxs("div",{className:"col-span-3 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsx("input",{name:"mobile",value:h.mobile||"",onChange:Ce,readOnly:r==="view",className:`w-full h-11 rounded-lg font-black px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400 focus:ring-2 focus:ring-indigo-500 shadow-sm"}`})]}),s.jsxs("div",{className:"col-span-3 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsx("input",{name:"phone",value:h.phone||"",onChange:Ce,readOnly:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400"}`})]})]})]}),s.jsxs("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition-all ${r==="edit"?"border-indigo-500 shadow-lg":"border-slate-100"}`,children:[s.jsxs("h3",{className:"text-sm font-black text-slate-800 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-3.5 bg-indigo-600 rounded-full"}),"CRM    "]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2.5",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsx("input",{type:"date",name:"anniversaryDate",value:h.anniversaryDate||"",onChange:Ce,readOnly:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400"}`})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsxs("select",{name:"anniversaryType",value:h.anniversaryType||"",onChange:Ce,disabled:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400"}`,children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsxs("select",{name:"prefProduct",value:h.prefProduct||"",onChange:Ce,disabled:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400"}`,children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:" ",children:" "})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("label",{className:`flex items-center gap-2 px-3 h-11 rounded-lg w-full border transition-all ${h.subInterest?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-slate-50 border-slate-200 text-slate-400"}`,children:[s.jsx("input",{type:"checkbox",name:"subInterest",checked:h.subInterest||!1,onChange:Ce,disabled:r==="view",className:"w-4 h-4 rounded text-indigo-600"}),s.jsx("span",{className:"text-xs font-black",children:"  "})]})})]})]}),s.jsxs("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition-all overflow-hidden ${r==="edit"?"border-indigo-500 shadow-lg":"border-slate-100"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("h3",{className:"text-sm font-black text-black flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-3.5 bg-indigo-600 rounded-full"}),"  "]}),s.jsxs("button",{type:"button",disabled:r==="view"||!l,onClick:()=>{setEditingAddress({}),Q(!0)},className:"h-7 px-3 rounded-lg bg-indigo-50 text-indigo-600 font-bold hover:bg-indigo-100 transition-all flex items-center gap-1.5 text-[10px] border border-indigo-100 disabled:opacity-30",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"add_location"}),"  "]})]}),s.jsx("div",{className:"overflow-x-auto border border-slate-200 rounded-xl",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2.5 font-black uppercase text-xs",children:""}),s.jsx("th",{className:"px-4 py-2.5 font-black uppercase text-xs",children:""}),s.jsx("th",{className:"px-4 py-2.5 font-black uppercase text-xs",children:""}),s.jsx("th",{className:"px-4 py-2.5 font-black uppercase text-xs",children:" "}),s.jsx("th",{className:"px-4 py-2.5 font-black uppercase text-xs text-center",children:""}),s.jsx("th",{className:"px-4 py-2.5 font-black uppercase text-xs text-center",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[p.map(xe=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"px-4 py-2.5",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black ${xe.address_alias===""?"bg-indigo-600 text-white":"bg-slate-100 text-slate-500"}`,children:xe.address_alias})}),s.jsx("td",{className:"px-4 py-2.5 font-black text-slate-700",children:xe.recipient_name}),s.jsx("td",{className:"px-4 py-2.5 font-bold text-slate-500",children:xe.mobile_number}),s.jsxs("td",{className:"px-4 py-2.5 text-slate-500",children:["(",xe.zip_code,") ",xe.address_primary]}),s.jsx("td",{className:"px-4 py-2.5 text-center",children:s.jsx("input",{type:"radio",checked:xe.is_default,onChange:async()=>{if(!(r==="view"||!l))try{await fetch("/api/customer/address/set-default",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:l.customer_id,addressId:xe.address_id})}),Z(l.customer_id);const be=await fetch(`/api/customer/get?customer_id=${l.customer_id}`);if(be.ok){const Ee=await be.json();de(Ee)}}catch{a(""," ")}},disabled:r==="view"||!l,className:"w-3.5 h-3.5 text-indigo-600"})}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsxs("div",{className:"flex justify-center gap-1",children:[s.jsx("button",{type:"button",disabled:r==="view"||xe.address_alias==="",onClick:()=>{setEditingAddress(xe),Q(!0)},className:"w-7 h-7 rounded bg-white border border-slate-200 text-slate-400 hover:text-indigo-600 disabled:opacity-20",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"edit"})}),s.jsx("button",{type:"button",disabled:r==="view"||xe.address_alias==="",onClick:async()=>{await e(""," ?")&&(await fetch("/api/customer/address/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address_id:xe.address_id})}),Z(l.customer_id))},className:"w-7 h-7 rounded bg-white border border-slate-200 text-slate-400 hover:text-rose-600 disabled:opacity-20",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"delete"})})]})})]},xe.address_id)),p.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"px-4 py-5 text-center text-slate-300 font-bold italic",children:" "})})]})]})})]}),s.jsxs("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition-all ${r==="edit"?"border-indigo-500 shadow-lg":"border-slate-100"}`,children:[s.jsxs("h3",{className:"text-sm font-black text-slate-800 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-3.5 bg-indigo-600 rounded-full"}),"   ()"]}),s.jsx("textarea",{name:"memo",value:h.memo||"",onChange:Ce,readOnly:r==="view",rows:"2",placeholder:"  .",className:`w-full rounded-xl font-bold p-3 transition-all resize-none shadow-inner h-24 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400 focus:ring-2 focus:ring-indigo-500"}`})]})]})}),s.jsxs("div",{className:"px-6 lg:px-8 py-4 border-t border-slate-100 bg-white/95 backdrop-blur-sm shrink-0 flex justify-between items-center",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:Oe,className:"h-10 px-6 rounded-xl bg-white border border-slate-200 text-slate-500 font-black hover:bg-slate-50 transition-all flex items-center gap-2 shadow-sm text-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"}),"  "]}),s.jsx("div",{className:"w-[1px] h-6 bg-slate-200 mx-1 self-center"}),s.jsxs("button",{type:"button",onClick:async()=>{if(l){u(!0);try{const xe=await fetch(`/api/customer/ai-insight?customer_id=${l.customer_id}`);if(xe.status===429||xe.status===403)throw new Error("AI_QUOTA_EXCEEDED");if(!xe.ok){const Ee=await xe.text();throw new Error(`AI Request Failed: ${xe.status} ${Ee}`)}const be=await xe.json();O(be),D(!0)}catch(xe){console.error("AI Error:",xe),xe.message==="AI_QUOTA_EXCEEDED"?a(" AI   ","   ."):a("","AI  : "+xe.message)}finally{u(!1)}}},disabled:!l||d,className:`h-10 px-4 rounded-xl font-bold text-xs flex items-center gap-2 border transition-all ${l?"bg-indigo-50 text-indigo-600 border-indigo-100 hover:bg-indigo-100 shadow-sm":"bg-slate-50 border-slate-100 text-slate-200 cursor-not-allowed"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"psychology"})," AI  "]}),s.jsxs("button",{type:"button",onClick:()=>ie(l?.customer_id),disabled:!l,className:"h-10 px-6 rounded-xl bg-white border border-slate-200 text-slate-600 font-black hover:bg-slate-50 transition-all flex items-center gap-2 shadow-sm text-sm disabled:opacity-50",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"history"}),"  "]}),s.jsxs("button",{type:"button",onClick:async()=>{if(l){u(!0);try{const xe=await fetch(`/api/customer/sales?customer_id=${l.customer_id}`);if(xe.ok){const be=await xe.json();w(be),k(!0)}else{const be=await xe.text();throw new Error(`Status ${xe.status}: ${be}`)}}catch(xe){console.error("Sales fetch error:",xe),a("",`  : ${xe.message}`)}finally{u(!1)}}},disabled:!l||d,className:`h-10 px-4 rounded-xl font-bold text-xs flex items-center gap-2 border transition-all ${l?"bg-emerald-50 text-emerald-600 border-emerald-100 hover:bg-emerald-100 shadow-sm":"bg-slate-50 border-slate-100 text-slate-200 cursor-not-allowed"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"history"}),"  "]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:fe,disabled:d,className:`h-10 px-10 rounded-xl font-black transition-all shadow-md flex items-center gap-2 text-sm ${l?r==="view"?"bg-amber-500 text-white hover:bg-amber-400 shadow-amber-200":"bg-indigo-600 text-white hover:bg-indigo-500 shadow-indigo-200":"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:r==="view"?"edit":d?"sync":"save"}),r==="view"?"  ":"  "]}),s.jsxs("button",{type:"button",onClick:he,disabled:!l||r!=="edit"||d||h.status==="",className:`h-10 px-6 rounded-xl font-black transition-all flex items-center gap-2 shadow-sm text-sm ${!l||r!=="edit"||h.status===""?"bg-slate-50 border-slate-100 text-slate-200 cursor-not-allowed shadow-none":"bg-white border-rose-200 text-rose-500 hover:bg-rose-50"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"person_off"}),"   "]}),h.status===""&&s.jsxs("button",{type:"button",onClick:ve,disabled:d,className:"h-10 px-6 rounded-xl font-black transition-all flex items-center gap-2 shadow-lg bg-emerald-600 text-white hover:bg-emerald-500 shadow-emerald-200 text-sm animate-bounce",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"person_check"}),"   "]})]})]}),T&&I&&s.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 backdrop-blur-md bg-slate-900/40 animate-in fade-in duration-300",children:s.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95 text-left",children:[s.jsxs("div",{className:"px-6 py-5 bg-indigo-600 text-white flex justify-between items-center relative overflow-hidden",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded",children:"auto_awesome"})," AI  "]}),s.jsx("button",{onClick:()=>D(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"bg-indigo-50/50 p-4 rounded-2xl border border-indigo-100",children:[s.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest block mb-2 italic",children:"Profile Keywords"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:I.keywords?.map((xe,be)=>s.jsx("span",{className:"px-3 py-1 bg-white text-indigo-700 rounded-lg font-black text-[10px] shadow-sm shadow-indigo-100",children:xe},be))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-4 bg-slate-50/80 rounded-2xl border border-slate-100",children:[s.jsx("p",{className:"font-black text-slate-800 text-xs mb-2 flex items-center gap-2",children:"  "}),s.jsx("p",{className:"text-slate-600 text-[13px] leading-relaxed font-bold",children:I.ice_breaking||"  "})]}),s.jsxs("div",{className:"p-4 bg-slate-50/80 rounded-2xl border border-slate-100",children:[s.jsx("p",{className:"font-black text-slate-800 text-xs mb-2 flex items-center gap-2",children:"   "}),s.jsx("p",{className:"text-slate-600 text-[13px] leading-relaxed font-bold",children:I.sales_tip||"  "})]})]})]})]})}),_&&s.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 backdrop-blur-md bg-slate-900/40 h-full",children:s.jsxs("div",{className:"relative w-full max-w-4xl bg-white rounded-[2rem] shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95 max-h-[80vh] text-left",children:[s.jsxs("div",{className:"px-6 py-5 bg-slate-950 text-white flex justify-between items-center shrink-0",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-emerald-400",children:"history"})," ",h.name,"   "]}),s.jsx("button",{onClick:()=>k(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto bg-white custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"sticky top-0 bg-slate-50 z-20 border-b border-slate-200 shadow-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase text-right",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase text-right",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase text-center",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:b.length>0?b.map((xe,be)=>s.jsxs("tr",{className:"hover:bg-slate-50/80",children:[s.jsx("td",{className:"px-6 py-3 font-bold text-slate-400",children:xe.order_date?.split("T")[0]}),s.jsx("td",{className:"px-6 py-3 font-black text-slate-900",children:xe.product_name}),s.jsxs("td",{className:"px-6 py-3 text-right font-black text-slate-600",children:[xe.quantity,""]}),s.jsxs("td",{className:"px-6 py-3 text-right font-black text-indigo-600",children:[Ve(xe.total_amount),""]}),s.jsx("td",{className:"px-6 py-3 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-[8px] font-black ${xe.status===""?"bg-emerald-100 text-emerald-600":"bg-amber-100 text-amber-600"}`,children:xe.status})})]},be)):s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"px-6 py-20 text-center text-slate-300 font-black italic",children:" "})})})]})}),s.jsx("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-100 flex justify-end shrink-0",children:s.jsx("button",{onClick:()=>k(!1),className:"px-6 py-2 bg-white border border-slate-200 text-slate-600 rounded-xl font-black text-xs",children:""})})]})}),P&&s.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4 backdrop-blur-sm bg-slate-900/60",children:s.jsxs("div",{className:"relative w-full max-w-[450px] bg-white rounded-2xl shadow-2xl flex flex-col overflow-hidden h-[550px]",children:[s.jsxs("div",{className:"px-5 py-3 bg-slate-900 text-white flex justify-between items-center",children:[s.jsx("h3",{className:"font-black text-sm",children:" "}),s.jsx("button",{onClick:()=>V(!1),className:"w-7 h-7 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{id:"addr-layer-list-edit",className:"flex-1 w-full"})]})}),G&&s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 backdrop-blur-sm bg-slate-950/40 text-left",children:s.jsxs("div",{className:"relative w-full max-w-lg bg-white rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95",children:[s.jsxs("div",{className:"px-6 py-5 bg-indigo-600 text-white flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-black",children:" "}),s.jsx("button",{onClick:()=>Q(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"p-6",children:s.jsxs("form",{onSubmit:async xe=>{xe.preventDefault();const be={customerId:l.customer_id,alias:xe.target.alias.value,recipient:xe.target.recipient.value,mobile:xe.target.mobile.value,zip:xe.target.zip.value||null,addr1:xe.target.addr1.value,addr2:xe.target.addr2.value||null,isDefault:xe.target.isDefault.checked,memo:xe.target.memo.value||null};try{if(editingAddress.address_id){const Ee={...be,addressId:editingAddress.address_id};await fetch("/api/customer/address/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ee)})}else await fetch("/api/customer/address/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(be)});Z(l.customer_id),Q(!1)}catch(Ee){a(""," : "+Ee)}},className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-600 ml-1",children:""}),s.jsx("input",{name:"alias",value:editingAddress?.address_alias||"",onChange:xe=>setEditingAddress(be=>({...be,address_alias:xe.target.value})),required:!0,className:"w-full h-11 px-3 rounded-lg bg-white border border-slate-400 font-bold text-sm text-black"})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-600 ml-1",children:""}),s.jsx("input",{name:"recipient",value:editingAddress?.recipient_name||"",onChange:xe=>setEditingAddress(be=>({...be,recipient_name:xe.target.value})),required:!0,className:"w-full h-11 px-3 rounded-lg bg-white border border-slate-400 font-bold text-sm text-black"})]})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-600 ml-1",children:""}),s.jsx("input",{name:"mobile",value:editingAddress?.mobile_number||"",onChange:xe=>setEditingAddress(be=>({...be,mobile_number:Kn(xe.target.value)})),required:!0,className:"w-full h-11 px-3 rounded-lg bg-white border border-slate-400 font-bold text-sm text-black"})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{className:"col-span-1 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-600 ml-1",children:""}),s.jsx("input",{name:"zip",value:editingAddress?.zip_code||"",readOnly:!0,onClick:we,className:"w-full h-11 px-3 rounded-lg bg-white border border-slate-400 font-black text-center text-sm cursor-pointer text-black"})]}),s.jsxs("div",{className:"col-span-3 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-600 ml-1",children:""}),s.jsx("input",{name:"addr1",value:editingAddress?.address_primary||"",readOnly:!0,onClick:we,className:"w-full h-11 px-3 rounded-lg bg-white border border-slate-400 font-bold text-sm px-3 cursor-pointer text-black"})]})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-600 ml-1",children:" "}),s.jsx("input",{name:"addr2",value:editingAddress?.address_detail||"",onChange:xe=>setEditingAddress(be=>({...be,address_detail:xe.target.value})),className:"w-full h-11 px-3 rounded-lg bg-white border border-slate-400 font-bold text-sm text-black"})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-600 ml-1",children:" "}),s.jsx("input",{name:"memo",value:editingAddress?.shipping_memo||"",onChange:xe=>setEditingAddress(be=>({...be,shipping_memo:xe.target.value})),className:"w-full h-11 px-3 rounded-lg bg-white border border-slate-400 font-bold text-sm text-black"})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[s.jsx("input",{type:"checkbox",name:"isDefault",defaultChecked:editingAddress.is_default,className:"w-4 h-4 rounded text-indigo-600"}),s.jsx("span",{className:"text-xs font-black text-slate-500",children:"  "})]}),s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx("button",{type:"submit",className:"h-10 px-10 bg-indigo-600 text-white rounded-xl font-black shadow-lg shadow-indigo-600/20 hover:bg-indigo-500 transition-all text-xs",children:""})})]})})]})}),K&&s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 backdrop-blur-md bg-slate-900/40 animate-in fade-in duration-300",children:s.jsxs("div",{className:"relative w-full max-w-4xl bg-white rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95 flex flex-col max-h-[70vh]",children:[s.jsxs("div",{className:"px-6 py-5 bg-slate-800 text-white flex justify-between items-center shrink-0",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-400",children:"group"}),"   ",s.jsxs("span",{className:"text-slate-400 font-light text-sm",children:[" ",F.length," ."]})]}),s.jsx("button",{onClick:()=>ee(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"sticky top-0 bg-slate-50 z-20 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase text-center",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase text-center",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:F.map(xe=>s.jsxs("tr",{className:"hover:bg-indigo-50/50 transition-colors cursor-pointer group",onClick:()=>{de(xe),ee(!1)},children:[s.jsx("td",{className:"px-6 py-4 font-black text-slate-800",children:xe.customer_name}),s.jsx("td",{className:"px-6 py-4 font-bold text-slate-600",children:Kn(xe.mobile_number)}),s.jsx("td",{className:"px-6 py-4 text-slate-500 text-xs break-all",children:xe.address_primary}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black ${(xe.status||"")===""?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"}`,children:(xe.status||"")===""?"":""})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("button",{className:"px-4 py-1.5 rounded-lg bg-white border border-slate-200 text-indigo-600 font-black text-xs group-hover:bg-indigo-600 group-hover:text-white group-hover:border-indigo-600 transition-all",children:""})})]},xe.customer_id))})]})}),s.jsx("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-200 flex justify-end shrink-0",children:s.jsx("button",{onClick:()=>ee(!1),className:"px-6 py-2 bg-white border border-slate-200 text-slate-600 rounded-xl font-black text-xs hover:bg-slate-100 transition-all",children:""})})]})}),$&&s.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col overflow-hidden border border-white/20 scale-in-center",children:[s.jsxs("div",{className:"px-6 py-5 bg-slate-800 text-white flex justify-between items-center shrink-0",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-400",children:"history"}),"   ",s.jsxs("span",{className:"text-slate-400 font-light text-sm",children:[l?.customer_name," "]})]}),s.jsx("button",{onClick:()=>ae(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-slate-50/10",children:J.length===0?s.jsxs("div",{className:"h-40 flex flex-col items-center justify-center text-slate-400 italic font-bold",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl mb-2 opacity-20",children:"history"}),"   ."]}):s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-slate-200/50"}),s.jsx("div",{className:"space-y-6 relative",children:J.map(xe=>s.jsxs("div",{className:"relative pl-10",children:[s.jsx("div",{className:"absolute left-3 w-2.5 h-2.5 rounded-full bg-indigo-500 border-2 border-white translate-x-[-1px] z-10"}),s.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100/50",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("span",{className:"text-[10px] font-black px-2 py-0.5 bg-slate-100 text-slate-500 rounded-full uppercase tracking-wider",children:[xe.field_name," "]}),s.jsxs("span",{className:"text-[10px] font-bold text-slate-400 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-xs",children:"schedule"}),xe.changed_at?new Date(xe.changed_at).toLocaleString():" "]})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm font-bold",children:[s.jsxs("div",{className:"flex-1 p-2.5 bg-rose-50/50 rounded-xl border border-rose-100/30",children:[s.jsx("div",{className:"text-[9px] font-black text-rose-300 uppercase mb-0.5",children:" "}),s.jsx("div",{className:"text-rose-600 truncate",children:xe.old_value||"()"})]}),s.jsx("span",{className:"material-symbols-rounded text-slate-300 transform transition-transform",children:"arrow_right_alt"}),s.jsxs("div",{className:"flex-1 p-2.5 bg-emerald-50/50 rounded-xl border border-emerald-100/30",children:[s.jsx("div",{className:"text-[9px] font-black text-emerald-300 uppercase mb-0.5",children:" "}),s.jsx("div",{className:"text-emerald-600 truncate",children:xe.new_value||"()"})]})]})]})]},xe.log_id))})]})}),s.jsx("div",{className:"px-6 py-4 bg-white border-t border-slate-100 flex justify-end",children:s.jsx("button",{onClick:()=>ae(!1),className:"px-6 h-10 rounded-xl bg-slate-800 text-white font-black text-sm hover:bg-slate-700 transition-all",children:""})})]})})]})},oue=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState([]),[n,i]=H.useState(""),[o,l]=H.useState(!1),[c,d]=H.useState(!1),[u,h]=H.useState({id:"",name:"",organizer:"",manager:"",location:"",start:new Date().toISOString().split("T")[0],end:"",memo:""});H.useEffect(()=>{f()},[]);const f=async(_="")=>{l(!0);try{const k=_?`/api/event/list?query=${encodeURIComponent(_)}`:"/api/event/list",T=await fetch(k);if(!T.ok)throw new Error("Network response was not ok");const D=await T.json();r(D||[])}catch(k){console.error(k),a("","  : "+k),r([])}finally{l(!1)}},p=()=>{f(n)},g=(_=null)=>{h(_?{id:_.event_id,name:_.event_name,organizer:_.organizer||"",manager:_.manager_name||"",location:_.location_address||"",start:_.start_date||"",end:_.end_date||"",memo:_.memo||""}:{id:"",name:"",organizer:"",manager:"",location:"",start:new Date().toISOString().split("T")[0],end:"",memo:""}),d(!0)},b=async()=>{if(!u.name.trim())return a(""," .");if(!await e(" ","  ?"))return;const k={event_id:u.id||null,event_name:u.name,organizer:u.organizer||null,manager_name:u.manager||null,manager_contact:null,location_address:u.location||null,location_detail:null,start_date:u.start||null,end_date:u.end||null,memo:u.memo||null};try{let T;if(u.id?T=await fetch("/api/event/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)}):T=await fetch("/api/event/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)}),!T.ok)throw new Error("Network response was not ok");d(!1),await a("",u.id?".":"."),f(n)}catch(T){console.error(T),a(""," : "+T)}},w=async()=>{if(u.id&&await e(" ",`   ?
(        )`))try{if(!(await fetch("/api/event/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event_id:u.id})})).ok)throw new Error("Network response was not ok");d(!1),await a("","."),f(n)}catch(_){console.error(_),a(""," : "+_)}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-2 bg-[#f8fafc]",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-blue-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-blue-600 uppercase",children:"Event Location Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["()  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Location Master"})]})]})}),s.jsxs("div",{className:"flex justify-end gap-3 items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-rounded absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-lg",children:"search"}),s.jsx("input",{value:n,onChange:_=>i(_.target.value),onKeyDown:_=>_.key==="Enter"&&p(),className:"pl-10 pr-4 h-11 w-64 bg-white border border-slate-200 rounded-xl text-sm font-bold focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all outline-none shadow-sm",placeholder:" ..."})]}),s.jsx("button",{onClick:p,className:"h-11 px-6 rounded-xl bg-white border border-slate-200 text-slate-600 font-bold text-sm hover:bg-slate-50 transition-all shadow-sm",children:""}),s.jsxs("button",{onClick:()=>g(),className:"h-11 px-6 rounded-xl bg-blue-600 text-white font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2 active:scale-95",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"add"}),"  "]})]})]}),s.jsxs("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-6 lg:pb-8 min-[2000px]:pb-12 mt-4 overflow-hidden",children:[s.jsx("div",{className:"h-full bg-white rounded-[1.5rem] border border-slate-200 shadow-sm overflow-hidden flex flex-col relative",children:s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar",children:s.jsxs("table",{className:"w-full text-sm border-collapse table-fixed",children:[s.jsx("thead",{className:"bg-slate-50/80 backdrop-blur-md sticky top-0 z-10 border-b border-slate-200 shadow-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-5 py-4 w-[5%] text-center text-[10px] font-black uppercase text-slate-400 tracking-wider",children:"No"}),s.jsx("th",{className:"px-5 py-4 w-[20%] text-left text-[10px] font-black uppercase text-slate-400 tracking-wider",children:""}),s.jsx("th",{className:"px-5 py-4 w-[14%] text-left text-[10px] font-black uppercase text-slate-400 tracking-wider",children:""}),s.jsx("th",{className:"px-5 py-4 w-[10%] text-left text-[10px] font-black uppercase text-slate-400 tracking-wider",children:""}),s.jsx("th",{className:"px-5 py-4 w-[15%] text-left text-[10px] font-black uppercase text-slate-400 tracking-wider",children:""}),s.jsx("th",{className:"px-5 py-4 w-[18%] text-center text-[10px] font-black uppercase text-slate-400 tracking-wider",children:""}),s.jsx("th",{className:"px-5 py-4 w-[18%] text-left text-[10px] font-black uppercase text-slate-400 tracking-wider",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:o?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"p-10 text-center",children:s.jsx("span",{className:"material-symbols-rounded spin text-slate-400 text-2xl",children:"sync"})})}):t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"p-10 text-center text-slate-400",children:"  ."})}):t.map(_=>s.jsxs("tr",{onClick:()=>g(_),className:"hover:bg-blue-50/40 cursor-pointer transition-colors group",children:[s.jsx("td",{className:"px-5 py-4 text-center text-slate-400 font-mono text-[11px]",children:t.indexOf(_)+1}),s.jsx("td",{className:"px-5 py-4 font-bold text-slate-700 truncate",title:_.event_name,children:_.event_name}),s.jsx("td",{className:"px-5 py-4 text-slate-600 truncate",title:_.organizer,children:_.organizer||"-"}),s.jsx("td",{className:"px-5 py-4 text-slate-600 truncate",title:_.manager_name,children:_.manager_name||"-"}),s.jsx("td",{className:"px-5 py-4 text-slate-600 truncate",title:_.location_address,children:_.location_address||"-"}),s.jsx("td",{className:"px-5 py-4 text-center",children:s.jsxs("span",{className:"bg-blue-50 text-blue-600 px-3 py-1 rounded-lg text-xs font-bold border border-blue-100",children:[_.start_date||"-"," ~ ",_.end_date||"-"]})}),s.jsx("td",{className:"px-5 py-4 text-slate-500 truncate max-w-[200px]",title:_.memo,children:_.memo||"-"})]},_.event_id))})]})})}),c&&s.jsx("div",{className:"modal flex fixed inset-0 z-50 items-center justify-center bg-black/60 backdrop-blur-md animate-in fade-in duration-300",children:s.jsxs("div",{className:"bg-white w-[850px] rounded-[2.5rem] shadow-2xl overflow-hidden p-0 border border-white/50 relative transform transition-all scale-100",children:[s.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-white p-8 border-b border-slate-100 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[s.jsx("span",{className:"w-10 h-10 rounded-2xl bg-blue-100 text-blue-600 flex items-center justify-center shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-2xl",children:u.id?"edit_calendar":"add_circle"})}),u.id?"  ":"  "]}),s.jsx("p",{className:"text-slate-400 text-sm mt-1 ml-14 font-medium",children:"()    ."})]}),s.jsx("button",{onClick:()=>d(!1),className:"w-10 h-10 rounded-full bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 flex items-center justify-center transition-all",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"close"})})]}),s.jsxs("div",{className:"p-8 bg-slate-50/50",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[s.jsx("div",{className:"col-span-7 space-y-5",children:s.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"w-1 h-4 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"   "})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{value:u.name,onChange:_=>h({...u,name:_.target.value}),className:"w-full h-12 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-800 px-4 focus:bg-white focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all text-sm shadow-inner",placeholder:"  ",autoFocus:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:"/"}),s.jsx("input",{value:u.organizer,onChange:_=>h({...u,organizer:_.target.value}),className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all px-4 text-sm",placeholder:" "})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:" "}),s.jsx("input",{value:u.manager,onChange:_=>h({...u,manager:_.target.value}),className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all px-4 text-sm",placeholder:" "})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:"   "}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-rounded absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-lg",children:"location_on"}),s.jsx("input",{value:u.location,onChange:_=>h({...u,location:_.target.value}),className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 pl-10 pr-4 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all text-sm",placeholder:"    "})]})]})]})}),s.jsx("div",{className:"col-span-5 space-y-5",children:s.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm space-y-4 h-full",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"w-1 h-4 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"   "})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:" "}),s.jsx("input",{type:"date",value:u.start,onChange:_=>h({...u,start:_.target.value}),className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 px-4 focus:border-blue-500 transition-all text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:" "}),s.jsx("input",{type:"date",value:u.end,onChange:_=>h({...u,end:_.target.value}),className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 px-4 focus:border-blue-500 transition-all text-sm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:" ()"}),s.jsx("textarea",{value:u.memo,onChange:_=>h({...u,memo:_.target.value}),className:"w-full h-24 bg-slate-50 border border-slate-200 rounded-xl p-4 text-sm font-medium text-slate-600 focus:bg-white focus:border-blue-500 transition-all resize-none shadow-inner",placeholder:"     ..."})]})]})})]}),s.jsxs("div",{className:"flex justify-between items-center mt-8 border-t border-slate-200 pt-6",children:[u.id?s.jsxs("button",{onClick:w,className:"h-12 px-6 rounded-2xl bg-red-50 text-red-500 font-bold hover:bg-red-100 transition-all text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"delete"}),"  "]}):s.jsx("div",{}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>d(!1),className:"h-12 px-8 rounded-2xl bg-white border border-slate-200 text-slate-500 font-bold hover:bg-slate-50 transition-colors text-sm",children:""}),s.jsxs("button",{onClick:b,className:"h-12 px-10 rounded-2xl bg-blue-600 text-white font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all hover:scale-105 active:scale-95 text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"save"}),u.id?"  ":"  "]})]})]})]})]})})]})]})},lue=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState([]),[n,i]=H.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[o,l]=H.useState(!1),[c,d]=H.useState(null),[u,h]=H.useState(null),[f,p]=H.useState(null),[g,b]=H.useState(!1),[w,_]=H.useState(!1),[k,T]=H.useState([]),D={urgent:t.filter(K=>K.priority===""&&K.status!=="").length,pending:t.filter(K=>["",""].includes(K.status)).length};H.useEffect(()=>{I()},[]);const I=async()=>{try{const K=new URLSearchParams;n.startDate&&K.append("startDate",n.startDate),n.endDate&&K.append("endDate",n.endDate);const ee=await fetch(`/api/crm/consultations?${K.toString()}`);if(ee.ok){const ne=await ee.json();r(ne||[])}else{const ne=await ee.text();throw new Error(ne)}}catch(K){console.error(K),a("","   : "+K.message)}},O=async()=>{try{b(!0);const K=await fetch("/api/crm/ai/summary");if(!K.ok){const ne=await K.text();throw new Error(ne)}const ee=await K.json();a("AI  ",ee.summary||ee)}catch(K){console.error(K),a("","AI  : "+K.message)}finally{b(!1)}},P=(K=null)=>{d(K?{...K}:{consult_id:null,customer_id:null,guest_name:"",contact:"",channel:"",counselor_name:"",category:" ",priority:"",title:"",content:"",answer:"",status:"",consult_date:new Date().toISOString().split("T")[0],follow_up_date:""}),h(null),p(null),l(!0)},V=async K=>{K.preventDefault();try{if(c.consult_id){const ee=await fetch("/api/crm/consultations/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({consultId:c.consult_id,answer:c.answer||null,status:c.status,priority:c.priority,followUpDate:c.follow_up_date||null})});if(!ee.ok){const ne=await ee.text();throw new Error(ne)}a("","  .")}else{const ee=await fetch("/api/crm/consultations/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:c.customer_id||null,guestName:c.guest_name,contact:c.contact,channel:c.channel,counselorName:c.counselor_name,category:c.category,priority:c.priority,title:c.title,content:c.content})});if(!ee.ok){const ne=await ee.text();throw new Error(ne)}a("","  .")}l(!1),I()}catch(ee){a(""," : "+ee.message)}},G=async()=>{if(c?.consult_id&&await e(" ","    ?"))try{const K=await fetch(`/api/crm/consultations/delete?consult_id=${c.consult_id}`);if(!K.ok){const ee=await K.text();throw new Error(ee)}a("","."),l(!1),I()}catch(K){a(""," : "+K.message)}},Q=async()=>{if(c){b(!0);try{const K=await fetch("/api/crm/ai/advisor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:c.customer_id||null,category:c.category,title:c.title,content:c.content})});if(K.status===429||K.status===403)throw new Error("AI_QUOTA_EXCEEDED");if(!K.ok){const ne=await K.text();throw new Error(ne)}const ee=await K.json();p(ee)}catch(K){console.error(K),K.message==="AI_QUOTA_EXCEEDED"?a("AI ","    ."):a("","AI  : "+K.message)}finally{b(!1)}}},$=async()=>{if(c?.customer_id){b(!0);try{const K=await fetch(`/api/crm/ai/briefing?customer_id=${c.customer_id}`);if(K.status===429||K.status===403)throw new Error("AI_QUOTA_EXCEEDED");if(!K.ok){const ne=await K.text();throw new Error(ne)}const ee=await K.json();h(ee.briefing||ee)}catch(K){console.error(K),K.message==="AI_QUOTA_EXCEEDED"?a("AI ","    ."):a("","AI  : "+K.message)}finally{b(!1)}}},ae=async K=>{if(!K||K.length<1){a(""," .");return}try{const ee=await fetch(`/api/customer/search/name?query=${encodeURIComponent(K)}`);if(!ee.ok){const re=await ee.text();throw new Error(re)}const ne=await ee.json();!ne||ne.length===0||(ne.length===1?J(ne[0]):(T(ne),_(!0)))}catch(ee){console.error(ee),a("","    .")}},J=K=>{d(ee=>({...ee,customer_id:K.customer_id,guest_name:K.customer_name,contact:K.mobile_number,counselor_name:ee.counselor_name||""})),_(!1)},U=K=>{K.key==="Enter"&&(K.preventDefault(),ae(K.target.value))},F=K=>{switch(K){case"":return"bg-indigo-100 text-indigo-700 border-indigo-200";case"":return"bg-blue-100 text-blue-700 border-blue-200";case"":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"":return"bg-amber-100 text-amber-700 border-amber-200";default:return"bg-slate-100 text-slate-600 border-slate-200"}},W=K=>{switch(K){case"":return"bg-rose-100 text-rose-700 border-rose-200 animate-pulse";case"":return"bg-orange-100 text-orange-700 border-orange-200";case"":return"bg-slate-100 text-slate-600 border-slate-200";default:return"bg-sky-100 text-sky-700 border-sky-200"}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:[s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Customer Relationship Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["  (CRM) ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Consultation"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 mb-4",children:[s.jsxs("div",{className:"lg:col-span-3 flex gap-3",children:[s.jsxs("div",{className:"flex-1 bg-white rounded-2xl border border-rose-100 p-3 shadow-sm flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-rose-50 flex items-center justify-center text-rose-500",children:s.jsx("span",{className:"material-symbols-rounded",children:"campaign"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-rose-400 uppercase",children:" "}),s.jsxs("div",{className:"text-xl font-black text-slate-700",children:[D.urgent,""]})]})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-2xl border border-indigo-100 p-3 shadow-sm flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 flex items-center justify-center text-indigo-500",children:s.jsx("span",{className:"material-symbols-rounded",children:"pending_actions"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-indigo-400 uppercase",children:" "}),s.jsxs("div",{className:"text-xl font-black text-slate-700",children:[D.pending,""]})]})]})]}),s.jsxs("div",{className:"lg:col-span-9 bg-white rounded-2xl border border-slate-200 p-3 shadow-sm flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-slate-400 ml-2",children:"filter_alt"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-black text-slate-500 uppercase",children:""}),s.jsx("input",{type:"date",value:n.startDate,onChange:K=>i({...n,startDate:K.target.value}),className:"h-9 px-3 rounded-lg bg-slate-50 border border-slate-200 text-sm font-bold text-slate-700"}),s.jsx("span",{className:"text-slate-400",children:"~"}),s.jsx("input",{type:"date",value:n.endDate,onChange:K=>i({...n,endDate:K.target.value}),className:"h-9 px-3 rounded-lg bg-slate-50 border border-slate-200 text-sm font-bold text-slate-700"})]}),s.jsx("div",{className:"h-6 w-px bg-slate-200 mx-1"}),s.jsx("button",{onClick:I,className:"h-9 px-4 rounded-lg bg-slate-800 text-white font-black hover:bg-slate-700 transition-all text-sm shadow-md shadow-slate-200",children:""}),s.jsx("div",{className:"flex-1"}),s.jsxs("button",{onClick:O,className:"h-9 px-4 rounded-lg bg-white border border-indigo-200 text-indigo-600 font-black hover:bg-indigo-50 transition-all text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"psychology"})," AI "]}),s.jsxs("button",{onClick:()=>P(),className:"h-9 px-5 rounded-lg bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-all text-sm shadow-md shadow-indigo-200 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"add"}),"  "]})]})]})]}),s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 flex flex-col overflow-hidden flex-1 pb-4",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] border border-slate-200 shadow-sm flex flex-col overflow-hidden h-full",children:[s.jsx("div",{className:"px-5 py-3 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:s.jsxs("span",{className:"text-xs font-black text-slate-500",children:[" : ",s.jsx("span",{className:"text-indigo-600",children:t.length}),""]})}),s.jsx("div",{className:"flex-1 overflow-auto bg-slate-50/30",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 font-black text-xs uppercase border-b border-slate-200 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-center w-[10%] min-w-[90px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[8%] min-w-[70px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-left w-[15%] min-w-[120px]",children:" "}),s.jsx("th",{className:"px-4 py-3 text-left w-[12%] min-w-[100px]",children:" /"}),s.jsx("th",{className:"px-4 py-3 text-center w-[10%] min-w-[80px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-left",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[8%] min-w-[60px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[8%] min-w-[60px]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"8",className:"p-20 text-center text-slate-400 font-bold italic",children:"  ."})}):t.map(K=>s.jsxs("tr",{onClick:()=>P(K),className:"hover:bg-slate-50 group transition-colors bg-white cursor-pointer",children:[s.jsx("td",{className:"px-4 py-3 text-center text-slate-500 text-xs font-mono",children:K.consult_date}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black border ${F(K.status)}`,children:K.status})}),s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("div",{className:"font-bold text-slate-700",children:K.guest_name}),s.jsx("div",{className:"text-[10px] text-slate-400",children:K.contact})]}),s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("div",{className:"font-bold text-slate-700 text-xs",children:K.channel}),s.jsx("div",{className:"text-[10px] text-slate-400",children:K.counselor_name})]}),s.jsx("td",{className:"px-4 py-3 text-center text-slate-600 text-xs",children:K.category}),s.jsx("td",{className:"px-4 py-3 font-bold text-slate-700 truncate max-w-[300px]",children:K.title}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black border ${W(K.priority)}`,children:K.priority})}),s.jsx("td",{className:"px-4 py-3 text-center",children:K.sentiment?s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black ${K.sentiment.includes("")?"bg-emerald-100 text-emerald-600":K.sentiment.includes("")?"bg-rose-100 text-rose-600":"bg-slate-100 text-slate-500"}`,children:K.sentiment}):s.jsx("span",{className:"text-slate-300",children:"-"})})]},K.consult_id))})]})})]})}),o&&c&&s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:s.jsxs("div",{className:"relative w-full max-w-4xl bg-white rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95 flex flex-col max-h-[90vh]",children:[s.jsxs("div",{className:"px-8 py-5 bg-slate-800 text-white flex justify-between items-center shrink-0",children:[s.jsxs("h3",{className:"text-xl font-black flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-400",children:"support_agent"}),c.consult_id?"    ":"  "]}),s.jsx("button",{onClick:()=>l(!1),className:"w-9 h-9 rounded-full hover:bg-white/20 transition-colors flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-8 bg-[#f8fafc]",children:s.jsxs("form",{onSubmit:V,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-8 gap-y-4 items-start",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between items-center h-7",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:"  ()"}),c.customer_id&&s.jsxs("button",{type:"button",onClick:$,className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded border border-indigo-100 hover:bg-indigo-100 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-xs",children:"summarize"})," AI  "]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:c.consult_id?"  ":"  (Tab/  )",value:c.guest_name||"",onChange:K=>d({...c,guest_name:K.target.value,customer_id:null}),onBlur:K=>ae(K.target.value),onKeyDown:U,disabled:!!c.consult_id,className:`w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 bg-white focus:ring-2 focus:ring-indigo-500 ${c.consult_id?"bg-slate-100 text-slate-500 cursor-not-allowed":""}`}),c.customer_id&&s.jsxs("span",{className:"absolute right-3 top-2.5 text-[10px] font-bold text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded border border-indigo-100 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-[10px]",children:"link"})," "]})]}),u&&s.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-100 rounded-lg text-xs leading-relaxed text-blue-800 animate-in fade-in",children:[s.jsx("strong",{className:"block mb-1 text-blue-900",children:" AI  :"}),u]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-between items-center h-7",children:s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" "})}),s.jsxs("select",{value:c.channel,onChange:K=>d({...c,channel:K.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 bg-white",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-between items-center h-7",children:s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" "})}),s.jsx("input",{type:"date",value:c.consult_date,onChange:K=>d({...c,consult_date:K.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 bg-slate-50"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-between items-center h-7",children:s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" ()"})}),s.jsx("input",{type:"text",value:c.counselor_name,onChange:K=>d({...c,counselor_name:K.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700",placeholder:" "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-between items-center h-7",children:s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" "})}),s.jsx("input",{type:"text",value:c.guest_name,onChange:K=>d({...c,guest_name:K.target.value}),readOnly:!!c.consult_id,className:`w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 ${c.consult_id?"bg-slate-100 text-slate-500 focus:ring-0":""}`,placeholder:"   "})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-between items-center h-7",children:s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" "})}),s.jsxs("select",{value:c.category,onChange:K=>d({...c,category:K.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 bg-white",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-between items-center h-7",children:s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:""})}),s.jsxs("select",{value:c.priority,onChange:K=>d({...c,priority:K.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 bg-white",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-between items-center h-7",children:s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:""})}),s.jsx("input",{type:"text",value:c.contact,onChange:K=>d({...c,contact:K.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700",placeholder:""})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" "}),s.jsx("input",{type:"text",value:c.title,onChange:K=>d({...c,title:K.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-black text-slate-800 placeholder-slate-400 bg-white",placeholder:"  "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:"  "}),s.jsxs("button",{type:"button",onClick:Q,className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white px-3 py-1 rounded-lg text-xs font-black flex items-center gap-1 hover:shadow-lg hover:shadow-indigo-200 transition-all",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"psychology"})," AI   "]})]}),s.jsx("textarea",{value:c.content,onChange:K=>d({...c,content:K.target.value}),rows:"4",className:"w-full bg-white border border-slate-200 rounded-xl p-4 text-sm font-medium text-slate-600 resize-none highlight-focus",placeholder:"   ."})]}),f&&s.jsxs("div",{className:"bg-purple-50 border border-purple-100 rounded-xl p-4 space-y-3 animate-in fade-in slide-in-from-top-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-purple-700",children:[s.jsx("span",{className:"material-symbols-rounded",children:"magic_button"}),s.jsx("h4",{className:"text-xs font-black uppercase",children:"Jenny's AI  "})]}),s.jsxs("div",{className:"space-y-2 text-sm text-slate-700 bg-white/60 p-3 rounded-lg border border-purple-100/50",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:"font-bold shrink-0 w-12 text-purple-600",children:""}),s.jsx("span",{children:f.analysis})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:"font-bold shrink-0 w-12 text-blue-600",children:""}),s.jsx("span",{children:f.strategy})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:"font-bold shrink-0 w-12 text-emerald-600",children:""}),s.jsxs("span",{className:"italic",children:['"',f.recommended_answer,'"']})]}),s.jsxs("div",{className:"flex gap-2 text-rose-600 font-bold bg-rose-50 p-1.5 rounded",children:[s.jsx("span",{className:"shrink-0 w-12",children:""}),s.jsx("span",{children:f.caution_points})]})]})]}),c.consult_id&&s.jsx("div",{className:"pt-6 border-t border-slate-200",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"text-sm font-black text-indigo-600 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),"    ",f&&s.jsx("button",{type:"button",onClick:()=>d({...c,answer:f.recommended_answer}),className:"ml-auto text-xs bg-emerald-100 text-emerald-600 px-2 py-0.5 rounded font-bold hover:bg-emerald-200",children:"AI  "})]}),s.jsx("textarea",{value:c.answer||"",onChange:K=>d({...c,answer:K.target.value}),rows:"3",className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-4 text-sm font-medium text-slate-700 resize-none focus:bg-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"  "}),s.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" "}),s.jsxs("select",{value:c.status,onChange:K=>d({...c,status:K.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 bg-white",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" "}),s.jsx("input",{type:"date",value:c.follow_up_date||"",onChange:K=>d({...c,follow_up_date:K.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 bg-white"})]})]})]})})]})]})}),s.jsxs("div",{className:"p-5 border-t border-slate-200 bg-white flex justify-between shrink-0",children:[c.consult_id?s.jsxs("button",{type:"button",onClick:G,className:"h-10 px-5 rounded-xl bg-rose-50 text-rose-600 font-bold hover:bg-rose-100 transition-colors flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"delete"})," "]}):s.jsx("div",{}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>l(!1),className:"h-10 px-6 rounded-xl bg-white border border-slate-200 text-slate-500 font-bold hover:bg-slate-50 transition-colors",children:""}),s.jsxs("button",{onClick:V,className:"h-10 px-8 rounded-xl bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-colors shadow-lg shadow-indigo-200 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"check"})," "]})]})]})]})}),w&&s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg overflow-hidden animate-in zoom-in-95",children:[s.jsxs("div",{className:"px-5 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[s.jsx("h3",{className:"font-bold text-slate-800",children:"  "}),s.jsx("button",{onClick:()=>_(!1),className:"text-slate-400 hover:text-slate-600",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"max-h-[400px] overflow-y-auto p-2",children:k.map(K=>s.jsxs("div",{onClick:()=>J(K),className:"p-3 hover:bg-indigo-50 rounded-xl cursor-pointer transition-colors border-b border-slate-50 last:border-0 group",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsxs("div",{className:"font-bold text-slate-700 flex items-center gap-2",children:[K.customer_name,s.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${K.level==="VIP"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-500"}`,children:K.level})]}),s.jsx("div",{className:"text-xs font-bold text-indigo-600",children:K.mobile_number})]}),s.jsxs("div",{className:"text-xs text-slate-400 truncate",children:[K.address_primary," ",K.address_detail]})]},K.customer_id))})]})}),g&&s.jsx("div",{className:"fixed inset-0 z-[300] bg-black/20 backdrop-blur-[2px] flex items-center justify-center cursor-wait",children:s.jsxs("div",{className:"bg-white px-6 py-4 rounded-2xl shadow-xl flex items-center gap-4 animate-bounce-custom",children:[s.jsx("span",{className:"material-symbols-rounded text-3xl text-indigo-500 animate-spin",children:"sync"}),s.jsx("div",{className:"text-sm font-bold text-slate-700",children:"AI  ..."})]})})]})},cue=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState([]),[n,i]=H.useState(1),o=20,[l,c]=H.useState({keyword:"",level:"",dateStart:"",dateEnd:"",dormantYears:"3",isDormantMode:!1}),[d,u]=H.useState(new Set),[h,f]=H.useState(!1),[p,g]=H.useState(""),[b,w]=H.useState(!1),[_,k]=H.useState(null),[T,D]=H.useState(!1),[I,O]=H.useState(!1),[P,V]=H.useState([]),[G,Q]=H.useState(null);H.useEffect(()=>{$(!0)},[]);const $=async(he=!1)=>{let ve,Oe,Se="",Ce=null;if(he)ve="1900-01-01",Oe="2999-12-31",c(we=>({...we,dateStart:"",dateEnd:"",level:"",keyword:"",isDormantMode:!1}));else{if(ve=l.dateStart||"1900-01-01",Oe=l.dateEnd||"2999-12-31",Se=l.keyword.trim(),Ce=l.level||null,Se.length>0&&/^\d+$/.test(Se)&&Se.length<2){await a("","()    2  .");return}c(we=>({...we,isDormantMode:!1}))}try{const we=new URLSearchParams({start:ve,end:Oe});Se&&we.append("keyword",Se),Ce&&we.append("membershipLevel",Ce);const xe=await fetch(`/api/customer/batch/search?${we.toString()}`);if(xe.ok){const be=await xe.json();r(be||[]),i(1),u(new Set)}else{const be=await xe.text();throw new Error(be)}}catch(we){console.error(we),a("","   : "+we.message)}},ae=async()=>{c(Oe=>({...Oe,keyword:"",level:"",dateStart:"",dateEnd:"",isDormantMode:!0}));const he=parseFloat(l.dormantYears)||3,ve=Math.round(he*365);try{const Oe=await fetch(`/api/customer/batch/dormant?daysThreshold=${ve}`);if(Oe.ok){const Se=await Oe.json();r(Se||[]),i(1),u(new Set)}else{const Se=await Oe.text();throw new Error(Se)}}catch(Oe){console.error(Oe),a("","   : "+Oe.message)}},J=async()=>{if(d.size===0){await a("","  .");return}const he=p==="";let ve=he?` ${d.size}    ?`:` ${d.size}  ''  ?`;if(he&&h&&(ve+=`

 :     ( )  !`),ve+=`
    .`,!!await e(he?"  ":"  ",ve))try{const Oe=await fetch("/api/customer/batch/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Array.from(d),permanent:he,alsoDeleteSales:he?h:!1})});if(!Oe.ok){const Se=await Oe.text();throw new Error(Se)}await a("",he?`${d.size}    .`:`${d.size}    .`),l.isDormantMode?ae():$(!1)}catch(Oe){a(""," : "+Oe.message)}},U=async()=>{if(d.size===0){await a("","  .");return}if(await e("  ",` ${d.size}   ''  ?`))try{const he=await fetch("/api/customer/batch/reactivate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Array.from(d)})});if(!he.ok){const ve=await he.text();throw new Error(ve)}await a("",`${d.size}    .`),l.isDormantMode?ae():$(!1)}catch(he){a(""," : "+he.message)}},F=async()=>{if(t.length===0){await a("","  .");return}const he=["No","","","","","","","",""],ve=t.map((Se,Ce)=>[Ce+1,Se.customer_name,Se.mobile_number,Se.membership_level||"",Se.join_date||"",Se.zip_code||"",Se.address_primary||"",Se.address_detail||"",Se.memo||""]);let Oe="\uFEFF";Oe+=he.join(",")+`
`,ve.forEach(Se=>{Oe+=Se.map(Ce=>`"${String(Ce).replace(/"/g,'""')}"`).join(",")+`
`});try{const Se=new Blob([Oe],{type:"text/csv;charset=utf-8;"}),Ce=URL.createObjectURL(Se),we=document.createElement("a");we.href=Ce,we.download=`_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(we),we.click(),document.body.removeChild(we),URL.revokeObjectURL(Ce),a("","  .")}catch(Se){a("","  : "+Se.message)}},W=async he=>{if(he){D(!0),w(!0),k(null);try{const ve=await fetch(`/api/customer/ai-insight?customer_id=${he}`);if(ve.status===429||ve.status===403)throw new Error("AI_QUOTA_EXCEEDED");if(!ve.ok){const Se=await ve.text();throw new Error(`AI  : ${Se}`)}const Oe=await ve.json();k(Oe)}catch(ve){console.error(ve),ve.message==="AI_QUOTA_EXCEEDED"?k({error:"    ."}):k({error:String(ve.message)})}finally{D(!1)}}},K=async he=>{Q(he);try{const ve=await fetch(`/api/customer/logs?customer_id=${he.customer_id}`);if(ve.ok){const Oe=await ve.json();V(Oe||[]),O(!0)}else{const Oe=await ve.text();throw new Error(Oe)}}catch(ve){a("","  : "+ve.message)}},ee=t.filter(he=>p===""?!0:((he.status||"")===""?"":he.status||"")===p),ne=Math.ceil(ee.length/o)||1,re=(n-1)*o,Z=ee.slice(re,re+o),ie=he=>{if(he){const ve=new Set(Z.map(Oe=>Oe.customer_id));u(Oe=>new Set([...Oe,...ve]))}else{const ve=new Set(Z.map(Oe=>Oe.customer_id));u(Oe=>{const Se=new Set(Oe);return ve.forEach(Ce=>Se.delete(Ce)),Se})}},de=(he,ve)=>{u(Oe=>{const Se=new Set(Oe);return ve?Se.add(he):Se.delete(he),Se})},fe=Z.length>0&&Z.every(he=>d.has(he.customer_id));return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:[s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Customer Management System"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Batch View"})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 shadow-sm mb-4",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-black text-slate-500 uppercase",children:""}),s.jsx("input",{type:"date",value:l.dateStart,onChange:he=>c({...l,dateStart:he.target.value}),className:"h-9 px-3 rounded-lg bg-slate-50 border border-slate-200 text-sm font-bold text-slate-700"}),s.jsx("span",{className:"text-slate-400",children:"~"}),s.jsx("input",{type:"date",value:l.dateEnd,onChange:he=>c({...l,dateEnd:he.target.value}),className:"h-9 px-3 rounded-lg bg-slate-50 border border-slate-200 text-sm font-bold text-slate-700"})]}),s.jsx("div",{className:"h-6 w-px bg-slate-200 mx-1"}),s.jsxs("select",{value:l.level,onChange:he=>c({...l,level:he.target.value}),className:"h-10 px-2 rounded-lg bg-slate-50 border border-slate-200 text-sm font-bold text-slate-700",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"VIP",children:"VIP"}),s.jsx("option",{value:"VVIP",children:"VVIP"}),s.jsx("option",{value:"/",children:"/"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{value:l.keyword,onChange:he=>c({...l,keyword:he.target.value}),placeholder:"   ",className:"h-9 w-48 pl-9 pr-3 rounded-lg bg-slate-50 border border-slate-200 text-sm font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500"}),s.jsx("span",{className:"material-symbols-rounded absolute left-2.5 top-2 text-slate-400 text-lg",children:"search"})]}),s.jsx("button",{onClick:()=>$(!1),className:"h-9 px-4 rounded-lg bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-all text-sm shadow-md shadow-indigo-200",children:""}),s.jsx("button",{onClick:()=>$(!0),className:"h-9 px-4 rounded-lg bg-white border border-slate-200 text-slate-600 font-black hover:bg-slate-50 transition-all text-sm",children:" "}),s.jsx("div",{className:"flex-1"}),s.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-200",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:" ()"}),s.jsx("input",{type:"number",value:l.dormantYears,onChange:he=>c({...l,dormantYears:he.target.value}),className:"w-12 h-6 text-center text-sm font-bold bg-white border border-slate-300 rounded"}),s.jsx("span",{className:"text-xs font-bold text-slate-500",children:" "}),s.jsx("button",{onClick:ae,className:"h-6 px-2 rounded bg-rose-100 text-rose-600 text-xs font-black hover:bg-rose-200",children:""})]})]})})]}),s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 flex gap-1 mb-4",children:["","",""].map(he=>s.jsxs("button",{onClick:()=>{g(he),i(1),he===""&&u(new Set)},className:`px-6 py-2 rounded-xl font-black text-sm transition-all ${p===he?"bg-indigo-600 text-white shadow-lg shadow-indigo-200":"bg-white border border-slate-200 text-slate-400 hover:bg-slate-50"}`,children:[he," ",p===he&&s.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 bg-white/20 rounded text-[10px]",children:ee.length})]},he))}),s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 flex flex-col overflow-hidden flex-1 pb-4",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] border border-slate-200 shadow-sm flex flex-col overflow-hidden h-full",children:[s.jsxs("div",{className:"px-5 py-3 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[s.jsx("div",{className:"text-xs font-black text-slate-500 flex items-center gap-2",children:s.jsxs("span",{children:[" ",s.jsx("span",{className:"text-indigo-600 text-sm",children:t.length.toLocaleString()}),""]})}),s.jsxs("div",{className:"flex items-center gap-3",children:[p===""&&s.jsxs("button",{onClick:J,className:"h-8 px-4 rounded-lg bg-rose-600 text-white font-black hover:bg-rose-500 transition-all flex items-center gap-1 text-xs shadow-sm shadow-rose-200",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"person_remove"}),"   "]}),p===""&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:U,className:"h-8 px-4 rounded-lg bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-all flex items-center gap-1 text-xs shadow-sm shadow-indigo-200",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"person_add"}),"   "]}),s.jsxs("div",{className:"flex items-center gap-3 px-3 py-1 bg-rose-50 border border-rose-200 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer group",onClick:()=>f(!h),children:[s.jsx("input",{type:"checkbox",checked:h,onChange:he=>f(he.target.checked),className:"w-4 h-4 rounded text-rose-600 focus:ring-rose-500 border-rose-300 cursor-pointer"}),s.jsx("span",{className:"text-xs font-bold text-rose-600 select-none",children:"   "})]}),s.jsx("div",{className:"h-4 w-px bg-rose-200"}),s.jsxs("button",{onClick:J,className:"h-8 px-4 rounded-lg bg-rose-600 text-white font-black hover:bg-rose-700 transition-all flex items-center gap-1 text-xs shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"delete_forever"}),"  "]})]})]}),(p===""||p==="")&&s.jsx("div",{className:"h-4 w-px bg-slate-200 mx-1"}),s.jsxs("button",{onClick:F,className:"h-8 px-3 rounded-lg bg-white border border-emerald-200 text-emerald-600 font-black hover:bg-emerald-50 hover:border-emerald-300 transition-all flex items-center gap-1 text-xs",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"download"}),"  "]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto bg-slate-50/30",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 font-black text-xs uppercase border-b border-slate-200 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-center w-[40px]",children:s.jsx("input",{type:"checkbox",checked:fe,onChange:he=>ie(he.target.checked),disabled:p==="",className:`w-4 h-4 rounded text-indigo-600 border-slate-300 focus:ring-indigo-500 ${p===""?"opacity-20 cursor-not-allowed":""}`})}),s.jsx("th",{className:"px-4 py-3 text-center w-[5%] min-w-[50px]",children:"No"}),s.jsx("th",{className:"px-4 py-3 text-center w-[12%] min-w-[80px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[13%] min-w-[100px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[8%] min-w-[60px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[10%] min-w-[90px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[7%] min-w-[60px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-left",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[80px]",children:"AI "})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:Z.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"8",className:"p-20 text-center text-slate-400 font-bold italic",children:"  ."})}):Z.map((he,ve)=>s.jsxs("tr",{className:"hover:bg-slate-50 group transition-colors bg-white cursor-pointer",onClick:()=>K(he),children:[s.jsx("td",{className:"px-4 py-3 text-center",onClick:Oe=>Oe.stopPropagation(),children:s.jsx("input",{type:"checkbox",checked:d.has(he.customer_id),onChange:Oe=>de(he.customer_id,Oe.target.checked),disabled:p==="",className:`w-4 h-4 rounded text-indigo-600 border-slate-300 focus:ring-indigo-500 ${p===""?"opacity-20 cursor-not-allowed":""}`})}),s.jsx("td",{className:"px-4 py-3 text-center text-slate-400 text-xs font-mono",children:re+ve+1}),s.jsx("td",{className:"px-4 py-3 text-center font-bold text-slate-700 cursor-pointer hover:text-indigo-600",title:he.customer_id,children:he.customer_name}),s.jsx("td",{className:"px-4 py-3 text-center font-mono text-slate-600 text-xs",children:he.mobile_number}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black uppercase ${he.membership_level==="VIP"?"bg-amber-100 text-amber-600":"bg-slate-100 text-slate-500"}`,children:he.membership_level||""})}),s.jsx("td",{className:"px-4 py-3 text-center text-slate-500 text-xs",children:he.join_date||"-"}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black ${(he.status||"")===""?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"}`,children:(he.status||"")===""?"":he.status||""})}),s.jsxs("td",{className:"px-4 py-3 text-slate-600 text-xs truncate max-w-[300px]",title:`${he.address_primary||""} ${he.address_detail||""}`,children:[he.address_primary," ",he.address_detail]}),s.jsx("td",{className:"px-4 py-3 text-center",onClick:Oe=>Oe.stopPropagation(),children:s.jsx("button",{onClick:()=>W(he.customer_id),className:"w-8 h-8 rounded-full hover:bg-indigo-50 text-indigo-300 hover:text-indigo-600 transition-all flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"auto_awesome"})})})]},he.customer_id))})]})}),s.jsxs("div",{className:"px-5 py-3 border-t border-slate-100 flex justify-between items-center bg-white",children:[s.jsxs("div",{className:"text-xs text-slate-400 font-medium",children:["Page ",n," of ",ne," (Showing ",ee.length," items)"]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>i(he=>Math.max(1,he-1)),disabled:n===1,className:"w-8 h-8 rounded-lg border border-slate-200 flex items-center justify-center text-slate-500 hover:bg-slate-50 disabled:opacity-30 disabled:hover:bg-white transition-all",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"chevron_left"})}),s.jsx("button",{onClick:()=>i(he=>Math.min(ne,he+1)),disabled:n===ne,className:"w-8 h-8 rounded-lg border border-slate-200 flex items-center justify-center text-slate-500 hover:bg-slate-50 disabled:opacity-30 disabled:hover:bg-white transition-all",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"chevron_right"})})]})]})]})}),b&&s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm animate-in fade-in",children:s.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95 flex flex-col",children:[s.jsxs("div",{className:"px-6 py-5 bg-indigo-600 text-white flex justify-between items-center",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"auto_awesome"})," AI  "]}),s.jsx("button",{onClick:()=>w(!1),className:"w-8 h-8 rounded-full hover:bg-white/20 transition-colors flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"p-6 min-h-[200px] flex flex-col justify-center",children:T?s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl text-indigo-300 animate-spin",children:"sync"}),s.jsx("p",{className:"font-bold text-slate-500 animate-pulse",children:"   ..."})]}):_?.error?s.jsx("div",{className:"text-center text-rose-500 font-bold p-4 bg-rose-50 rounded-xl",children:_.error}):_?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:_.keywords?.map((he,ve)=>s.jsx("span",{className:"px-3 py-1 bg-purple-50 text-purple-700 rounded-lg text-sm font-bold border border-purple-100",children:he},ve))}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xs font-black text-slate-400 uppercase",children:"Ice Breaking"}),s.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl text-slate-700 text-sm font-medium leading-relaxed",children:['"',_.ice_breaking,'"']})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xs font-black text-slate-400 uppercase",children:"Sales Tip"}),s.jsx("div",{className:"p-3 bg-indigo-50 rounded-xl text-indigo-800 text-sm font-bold leading-relaxed border border-indigo-100",children:_.sales_tip})]})]}):null})]})}),I&&s.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col overflow-hidden border border-white/20 scale-in-center",children:[s.jsxs("div",{className:"px-6 py-5 bg-slate-800 text-white flex justify-between items-center shrink-0",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-400",children:"history"}),"   ",s.jsxs("span",{className:"text-slate-400 font-light text-sm",children:[G?.customer_name," "]})]}),s.jsx("button",{onClick:()=>O(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-slate-50/10",children:P.length===0?s.jsxs("div",{className:"h-40 flex flex-col items-center justify-center text-slate-400 italic font-bold",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl mb-2 opacity-20",children:"history"}),"   ."]}):s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-slate-200/50"}),s.jsx("div",{className:"space-y-6 relative",children:P.map(he=>s.jsxs("div",{className:"relative pl-10",children:[s.jsx("div",{className:"absolute left-3 w-2.5 h-2.5 rounded-full bg-indigo-500 border-2 border-white translate-x-[-1px] z-10"}),s.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100/50",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("span",{className:"text-[10px] font-black px-2 py-0.5 bg-slate-100 text-slate-500 rounded-full uppercase tracking-wider",children:[he.field_name," "]}),s.jsxs("span",{className:"text-[10px] font-bold text-slate-400 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-xs",children:"schedule"}),he.changed_at?new Date(he.changed_at).toLocaleString():" "]})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm font-bold",children:[s.jsxs("div",{className:"flex-1 p-2.5 bg-rose-50/50 rounded-xl border border-rose-100/30",children:[s.jsx("div",{className:"text-[9px] font-black text-rose-300 uppercase mb-0.5",children:" "}),s.jsx("div",{className:"text-rose-600 truncate",children:he.old_value||"()"})]}),s.jsx("span",{className:"material-symbols-rounded text-slate-300",children:"arrow_right_alt"}),s.jsxs("div",{className:"flex-1 p-2.5 bg-emerald-50/50 rounded-xl border border-emerald-100/30",children:[s.jsx("div",{className:"text-[9px] font-black text-emerald-300 uppercase mb-0.5",children:" "}),s.jsx("div",{className:"text-emerald-600 truncate",children:he.new_value||"()"})]})]})]})]},he.log_id))})]})}),s.jsx("div",{className:"px-6 py-4 bg-white border-t border-slate-100 flex justify-end",children:s.jsx("button",{onClick:()=>O(!1),className:"px-6 h-10 rounded-xl bg-slate-800 text-white font-black text-sm hover:bg-slate-700 transition-all",children:""})})]})})]})},due=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState([]),[n,i]=H.useState({minQty:100,minAmt:0,logic:"AND"}),[o,l]=H.useState(!1),c=20,[d,u]=H.useState(1),[h,f]=H.useState(new Set),[p,g]=H.useState(""),[b,w]=H.useState(!1),[_,k]=H.useState(null),[T,D]=H.useState(!1);H.useEffect(()=>{I()},[]);const I=async()=>{l(!0),u(1),f(new Set);try{const U=new URLSearchParams({minQty:n.minQty,minAmt:n.minAmt,logic:n.logic}),F=await fetch(`/api/customer/best?${U.toString()}`);if(F.ok){const W=await F.json();r(W||[])}else throw new Error(await F.text())}catch(U){console.error(U),a("","   : "+U.message),r([])}finally{l(!1)}},O=U=>{const F=new Set(h);F.has(U)?F.delete(U):F.add(U),f(F)},P=Math.ceil(t.length/c)||1,V=t.slice((d-1)*c,d*c),G=U=>{if(U.target.checked){const F=V.map(W=>W.customer_id);f(new Set([...h,...F]))}else{const F=new Set(h);V.forEach(W=>F.delete(W.customer_id)),f(F)}},Q=async()=>{if(!p)return a("","  .");if(h.size===0)return a("","  .");if(await e(" ",` ${h.size}   '${p}'() ?`))try{const U=await fetch("/api/customer/batch/membership",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerIds:Array.from(h),newLevel:p})});if(U.ok)await a(""," ."),I();else throw new Error(await U.text())}catch(U){a("","  : "+U.message)}},$=async()=>{if(t.length===0)return a("","  .");let U=`\uFEFFNo,,,,,,,
`;t.forEach((ee,ne)=>{const re=[ne+1,ee.customer_name,ee.mobile_number,ee.membership_level==="Normal"?"":ee.membership_level,ee.total_orders,ee.total_qty,ee.total_amount,(ee.address_primary||"")+" "+(ee.address_detail||"")].map(Z=>`"${Z||""}"`).join(",");U+=re+`
`});const F=new Blob([U],{type:"text/csv;charset=utf-8;"}),W=URL.createObjectURL(F),K=document.createElement("a");K.href=W,K.setAttribute("download",`_${ea().format("YYYYMMDD")}.csv`),document.body.appendChild(K),K.click(),document.body.removeChild(K),a(""," .")},ae=async U=>{k(null),w(!0),D(!0);try{const F=await fetch(`/api/customer/ai-insight?customerId=${U}`);if(F.status===429||F.status===403)throw new Error("AI_QUOTA_EXCEEDED");if(!F.ok)throw new Error(await F.text());const W=await F.json();k(W)}catch(F){console.error(F),F.message==="AI_QUOTA_EXCEEDED"?a("","    ."):a("","AI  : "+F.message)}finally{D(!1)}},J=V.length>0&&V.every(U=>h.has(U.customer_id));return s.jsxs("div",{className:"sales-v3-container fade-in flex flex-col h-full bg-slate-50",children:[s.jsx("div",{className:"flex-none px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"VIP Customer & LTV Analysis"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Best Customers"})]})]})})}),s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col px-6 lg:px-8 min-[2000px]:px-12 pb-6",children:[s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-5 shadow-lg border border-slate-200/60 mb-4 flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:"  ()"}),s.jsx("input",{type:"number",value:n.minQty,onChange:U=>i({...n,minQty:U.target.value}),className:"w-32 h-10 rounded-xl bg-slate-50 border-slate-200 font-bold text-center focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),s.jsxs("div",{className:"flex h-10 items-center bg-slate-100 rounded-xl p-1",children:[s.jsx("button",{onClick:()=>i({...n,logic:"AND"}),className:`h-full px-4 rounded-lg text-xs font-black transition-all ${n.logic==="AND"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:"AND"}),s.jsx("button",{onClick:()=>i({...n,logic:"OR"}),className:`h-full px-4 rounded-lg text-xs font-black transition-all ${n.logic==="OR"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:"OR"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:"  ()"}),s.jsx("input",{type:"number",value:n.minAmt,onChange:U=>i({...n,minAmt:U.target.value}),className:"w-40 h-10 rounded-xl bg-slate-50 border-slate-200 font-bold text-right focus:ring-2 focus:ring-indigo-500 px-3",placeholder:"0"})]}),s.jsxs("button",{onClick:I,className:"h-10 px-6 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white font-bold shadow-lg shadow-indigo-200 transition-all flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"search"})," "]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-1.5 px-3 rounded-xl border border-slate-200",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:" "}),s.jsxs("select",{value:p,onChange:U=>g(U.target.value),className:"h-8 py-0 pl-2 rounded-lg border-none bg-white text-xs font-bold w-28 focus:ring-0",children:[s.jsx("option",{value:"",children:"----"}),s.jsx("option",{value:"Normal",children:""}),s.jsx("option",{value:"VIP",children:"VIP"}),s.jsx("option",{value:"VVIP",children:"VVIP"}),s.jsx("option",{value:"Group",children:"/"})]}),s.jsx("button",{onClick:Q,className:"h-8 px-3 rounded-lg bg-slate-800 text-white text-xs font-bold hover:bg-slate-700",children:""})]}),s.jsx("div",{className:"w-px h-8 bg-slate-200"}),s.jsx("button",{onClick:$,className:"h-10 w-10 rounded-xl bg-green-50 text-green-600 hover:bg-green-100 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"download"})})]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col bg-white rounded-[1.5rem] shadow-xl border border-slate-200 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar p-0.5",children:s.jsxs("table",{className:"w-full text-xs border-separate border-spacing-0",children:[s.jsx("thead",{className:"sticky top-0 z-20",children:s.jsxs("tr",{className:"bg-slate-50/80 backdrop-blur-md",children:[s.jsx("th",{className:"px-4 py-3 w-12 text-center border-b border-slate-100",children:s.jsx("input",{type:"checkbox",checked:J,onChange:G,className:"rounded text-indigo-600 focus:ring-indigo-500 border-slate-300"})}),s.jsx("th",{className:"px-4 py-3 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-24",children:""}),s.jsx("th",{className:"px-4 py-3 text-right text-[9px] font-black uppercase text-slate-500 border-b border-slate-100 bg-blue-50/50",children:""}),s.jsx("th",{className:"px-4 py-3 text-right text-[9px] font-black uppercase text-slate-500 border-b border-slate-100 bg-green-50/50",children:""}),s.jsx("th",{className:"px-4 py-3 text-right text-[9px] font-black uppercase text-slate-500 border-b border-slate-100 bg-orange-50/50",children:""}),s.jsx("th",{className:"px-4 py-3 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-20",children:"AI"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:o?s.jsx("tr",{children:s.jsx("td",{colSpan:"9",className:"py-20 text-center",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("span",{className:"material-symbols-rounded spin text-3xl text-indigo-300",children:"sync"})})})}):t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"9",className:"py-20 text-center text-slate-300 font-bold",children:"    ."})}):V.map(U=>s.jsxs("tr",{className:"hover:bg-indigo-50/30 transition-colors group",children:[s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("input",{type:"checkbox",checked:h.has(U.customer_id),onChange:()=>O(U.customer_id),className:"rounded text-indigo-600 focus:ring-indigo-500 border-slate-300"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"font-bold text-slate-700 flex items-center gap-2",children:[U.customer_name,s.jsx("button",{onClick:()=>Ene(U.customer_name),className:"opacity-0 group-hover:opacity-100 text-slate-300 hover:text-indigo-500",children:s.jsx("span",{className:"material-symbols-rounded text-[14px]",children:"content_copy"})})]})}),s.jsx("td",{className:"px-4 py-3 text-center text-slate-500 font-mono tracking-tight",children:U.mobile_number}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-black tracking-tight ${U.membership_level==="VVIP"?"bg-amber-100 text-amber-700":U.membership_level==="VIP"?"bg-purple-100 text-purple-700":U.membership_level==="Group"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-500"}`,children:U.membership_level==="Normal"?"":U.membership_level})}),s.jsx("td",{className:"px-4 py-3 text-right font-mono font-medium text-slate-600 bg-blue-50/30",children:U.total_orders}),s.jsx("td",{className:"px-4 py-3 text-right font-mono font-bold text-green-600 bg-green-50/30",children:Ve(U.total_qty)}),s.jsx("td",{className:"px-4 py-3 text-right font-mono font-black text-orange-600 bg-orange-50/30",children:Ve(U.total_amount)}),s.jsxs("td",{className:"px-4 py-3 text-slate-500 truncate max-w-[300px]",title:`${U.address_primary} ${U.address_detail}`,children:[U.address_primary," ",U.address_detail]}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("button",{onClick:()=>ae(U.customer_id),className:"w-8 h-8 rounded-full hover:bg-purple-100 text-purple-300 hover:text-purple-600 transition-colors flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"auto_awesome"})})})]},U.customer_id))})]})}),s.jsxs("div",{className:"p-3 border-t border-slate-100 bg-white flex justify-between items-center px-6",children:[s.jsxs("div",{className:"text-xs font-bold text-slate-400",children:[" ",s.jsx("span",{className:"text-slate-800",children:t.length.toLocaleString()})," "]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>u(d-1),disabled:d===1,className:"w-8 h-8 rounded-lg flex items-center justify-center hover:bg-slate-100 disabled:opacity-30 disabled:hover:bg-white transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-slate-500",children:"chevron_left"})}),s.jsxs("span",{className:"text-xs font-black text-slate-600 min-w-[60px] text-center",children:[d," / ",P]}),s.jsx("button",{onClick:()=>u(d+1),disabled:d===P,className:"w-8 h-8 rounded-lg flex items-center justify-center hover:bg-slate-100 disabled:opacity-30 disabled:hover:bg-white transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-slate-500",children:"chevron_right"})})]})]})]})]}),b&&s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:()=>w(!1)}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[450px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-slate-900 px-6 py-4 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-purple-400",children:"auto_awesome"}),"AI  "]}),s.jsx("button",{onClick:()=>w(!1),className:"text-slate-400 hover:text-white",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"p-6",children:T?s.jsxs("div",{className:"py-12 flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-purple-500 rounded-full animate-spin"}),s.jsx("p",{className:"text-sm font-bold text-slate-500 animate-pulse",children:"AI    ..."})]}):_?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2",children:""}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[_.keywords&&_.keywords.map((U,F)=>s.jsx("span",{className:"px-3 py-1 bg-purple-50 text-purple-700 rounded-lg text-xs font-bold border border-purple-100 shadow-sm",children:U},F)),(!_.keywords||_.keywords.length===0)&&s.jsx("span",{className:"text-xs text-slate-400",children:" "})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2",children:"  (Sales Tip)"}),s.jsx("div",{className:"p-4 bg-green-50 rounded-2xl border border-green-100 text-green-900 text-sm font-medium leading-relaxed shadow-sm",children:_.sales_tip||"  ."})]}),_.ice_breaking&&s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2",children:" "}),s.jsx("div",{className:"p-4 bg-blue-50 rounded-2xl border border-blue-100 text-blue-900 text-sm font-medium leading-relaxed shadow-sm",children:_.ice_breaking})]})]}):s.jsx("div",{className:"py-10 text-center text-rose-500 font-bold",children:"  ."})})]})]})]})},uue=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState([]),[n,i]=H.useState({total:0,avgRatio:0,mainReason:"-"}),[o,l]=H.useState(!1);H.useEffect(()=>{c()},[]);const c=async()=>{l(!0);try{const h=await fetch("/api/crm/special-care");if(!h.ok)throw new Error(await h.text());const p=(await h.json()||[]).sort((g,b)=>b.claim_ratio-g.claim_ratio);r(p),d(p)}catch(h){console.error(h),a("","  : "+h.message)}finally{l(!1)}},d=h=>{if(!h||h.length===0){i({total:0,avgRatio:0,mainReason:"-"});return}let f=0;const p={};h.forEach(w=>{f+=w.claim_ratio,w.major_reason&&(p[w.major_reason]=(p[w.major_reason]||0)+1)});let g="-",b=0;for(const w in p)p[w]>b&&(b=p[w],g=w);i({total:h.length,avgRatio:h.length>0?(f/h.length).toFixed(1):0,mainReason:g})},u=h=>{h.is_member?a("",`         .
[ /]    .`):a("",`      .
 (CRM)     .`)};return s.jsxs("div",{className:"sales-v3-container fade-in flex flex-col h-full bg-slate-50",children:[s.jsx("div",{className:"flex-none px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:s.jsxs("div",{className:"flex justify-between items-end mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Targeted Care & Churn Risk Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["    ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Special Care"})]})]}),s.jsx("button",{onClick:c,className:"w-10 h-10 rounded-full bg-white border border-slate-200 shadow-sm flex items-center justify-center hover:bg-slate-50 transition-colors",children:s.jsx("span",{className:`material-symbols-rounded text-slate-400 ${o?"animate-spin":""}`,children:"refresh"})})]})}),s.jsxs("div",{className:"flex-none px-6 lg:px-8 min-[2000px]:px-12 grid grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-white p-5 rounded-[1.5rem] shadow-lg border border-slate-200/60 flex items-center gap-5 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-24 bg-gradient-to-l from-rose-50 to-transparent opacity-50"}),s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-rose-50 flex items-center justify-center flex-shrink-0 shadow-inner group-hover:scale-110 transition-transform",children:s.jsx("span",{className:"material-symbols-rounded text-rose-500 text-3xl",children:"priority_high"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wide",children:"  "}),s.jsxs("div",{className:"text-3xl font-black text-slate-800 tracking-tight",children:[n.total.toLocaleString(),s.jsx("span",{className:"text-base font-bold text-slate-400 ml-1",children:""})]})]})]}),s.jsxs("div",{className:"bg-white p-5 rounded-[1.5rem] shadow-lg border border-slate-200/60 flex items-center gap-5 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-24 bg-gradient-to-l from-orange-50 to-transparent opacity-50"}),s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-orange-50 flex items-center justify-center flex-shrink-0 shadow-inner group-hover:scale-110 transition-transform",children:s.jsx("span",{className:"material-symbols-rounded text-orange-500 text-3xl",children:"percent"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wide",children:"  "}),s.jsxs("div",{className:"text-3xl font-black text-slate-800 tracking-tight",children:[n.avgRatio,s.jsx("span",{className:"text-base font-bold text-slate-400 ml-1",children:"%"})]})]})]}),s.jsxs("div",{className:"bg-white p-5 rounded-[1.5rem] shadow-lg border border-slate-200/60 flex items-center gap-5 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-24 bg-gradient-to-l from-blue-50 to-transparent opacity-50"}),s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-blue-50 flex items-center justify-center flex-shrink-0 shadow-inner group-hover:scale-110 transition-transform",children:s.jsx("span",{className:"material-symbols-rounded text-blue-500 text-3xl",children:"error_outline"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wide",children:"  "}),s.jsx("div",{className:"text-2xl font-black text-slate-800 tracking-tight truncate max-w-[150px]",title:n.mainReason,children:n.mainReason})]})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden flex flex-col px-6 lg:px-8 min-[2000px]:px-12 pb-6",children:s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col bg-white rounded-[1.5rem] shadow-xl border border-slate-200 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-rose-500 via-orange-500 to-yellow-500"}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar p-0.5",children:s.jsxs("table",{className:"w-full text-xs border-separate border-spacing-0",children:[s.jsx("thead",{className:"sticky top-0 z-20",children:s.jsxs("tr",{className:"bg-slate-50/80 backdrop-blur-md",children:[s.jsx("th",{className:"px-4 py-3 text-left w-40 text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-left w-32 text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-20 text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-right text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:" "}),s.jsx("th",{className:"px-4 py-3 text-right text-[9px] font-black uppercase text-rose-500 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-left w-40 text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:" (Ratio)"}),s.jsx("th",{className:"px-4 py-3 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:" "}),s.jsx("th",{className:"px-4 py-3 text-center w-32 text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:" "}),s.jsx("th",{className:"px-4 py-3 text-center w-20 text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:o?s.jsx("tr",{children:s.jsx("td",{colSpan:"9",className:"py-20 text-center",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("span",{className:"material-symbols-rounded spin text-3xl text-rose-300",children:"sync"})})})}):t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"9",className:"py-20 text-center text-slate-300 font-bold",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl text-green-200",children:"check_circle"}),s.jsx("span",{children:"    ."})]})})}):t.map((h,f)=>{let p="text-slate-600",g="bg-slate-300";return h.claim_ratio>=30?(p="text-rose-600",g="bg-rose-500"):h.claim_ratio>=15&&(p="text-orange-500",g="bg-orange-400"),s.jsxs("tr",{className:"hover:bg-rose-50/20 transition-colors group",children:[s.jsx("td",{className:"px-4 py-3 font-bold text-slate-700",children:h.name}),s.jsx("td",{className:"px-4 py-3 text-slate-500 font-mono tracking-tight",children:h.mobile}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-black tracking-tight ${h.is_member?"bg-blue-50 text-blue-600 border-blue-100":"bg-slate-50 text-slate-500 border-slate-100"}`,children:h.is_member?"":""})}),s.jsx("td",{className:"px-4 py-3 text-right font-mono text-slate-600",children:h.total_orders.toLocaleString()}),s.jsx("td",{className:"px-4 py-3 text-right font-mono font-bold text-rose-600 bg-rose-50/30",children:h.claim_count.toLocaleString()}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("span",{className:`font-bold text-[10px] ${p}`,children:[h.claim_ratio.toFixed(1),"%"]})}),s.jsx("div",{className:"w-full h-1.5 bg-slate-100 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${g}`,style:{width:`${Math.min(h.claim_ratio,100)}%`}})})]})}),s.jsx("td",{className:"px-4 py-3 text-slate-600 text-xs truncate max-w-[200px]",title:h.major_reason,children:h.major_reason||"-"}),s.jsx("td",{className:"px-4 py-3 text-center text-slate-500 text-[10px] font-mono",children:h.last_claim_date||"-"}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("button",{onClick:()=>u(h),className:"w-8 h-8 rounded-full hover:bg-slate-100 text-slate-400 hover:text-slate-600 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"edit_note"})})})]},f)})})]})})]})})]})},hue=()=>{const{showAlert:a,showConfirm:e}=Na(),t={greeting:`[{COMPANY}]  ! 
    .
     ,    .`,promo:`[{COMPANY}/]   !
  ,   20%   .
    !
: 080-1234-5678`,repurchase:`[{COMPANY}]    ! 
       .     .`,seasonal:`[{COMPANY}]        !
    ,    .`,anniversary:`[{COMPANY}]     !
   5,000   .
  !`,recovery:`[{COMPANY}]    . 
      .    ,      [ ]  .    .`},[r,n]=H.useState({all:!1,vvip:!1,vip:!1,normal:!1,corp:!1,recovery:!1}),[i,o]=H.useState([]),[l,c]=H.useState(!1),[d,u]=H.useState([]),[h,f]=H.useState(90),[p,g]=H.useState(!1),[b,w]=H.useState("sms"),[_,k]=H.useState(""),[T,D]=H.useState(0),[I,O]=H.useState("SMS"),[P,V]=H.useState("Mycelium"),[G,Q]=H.useState(0);H.useEffect(()=>{$()},[]);const $=async()=>{try{const Z=await Pa("get_company_info");Z&&Z.company_name&&V(Z.company_name)}catch(Z){console.error("Company Info Error:",Z)}};H.useEffect(()=>{J()},[r,i]),H.useEffect(()=>{U(_)},[_]);const ae=(Z,ie)=>{n(Z==="all"?{all:ie,vvip:ie,vip:ie,normal:ie,corp:ie,recovery:ie&&r.recovery}:de=>({...{...de,[Z]:ie},all:!1}))},J=()=>{let Z=0;r.all?Z=1150:(r.vvip&&(Z+=12),r.vip&&(Z+=65),r.normal&&(Z+=280),r.corp&&(Z+=40),r.recovery&&(Z+=i.length>0?i.length:15)),Q(Z)},U=Z=>{let ie=0;for(let de=0;de<Z.length;de++){const fe=Z.charCodeAt(de);ie+=fe>127?2:1}D(ie),O(ie>90?"LMS":"SMS")},F=Z=>{const ie=Z.target.value;if(!ie)return;let de=t[ie]||"";de=de.replace(/\{COMPANY\}/g,P),k(de)},W=async()=>{if(!(Object.values(r).some(fe=>fe)||r.all)){a("","    .");return}if(!_.trim()){a("","  .");return}const ie=b==="kakao"?" ":" ";if(await e(" ",` ${G.toLocaleString()} ${ie} ?
(  API  )`))try{const fe=Object.keys(r).filter(ve=>r[ve]&&ve!=="all");r.all&&fe.push("all");const he=await Pa("send_sms_simulation",{mode:b,recipients:fe,content:_,templateCode:b==="kakao"?"TEMPLATE_001":null});he.success?(a(" ",` : ${he.message_id||"N/A"}
 .`,"success"),k("")):a(" ",he.error||"   ")}catch(fe){console.error(fe),a("","   .")}},K=()=>{c(!0),ee(h)},ee=async Z=>{g(!0);try{const ie=await Pa("get_claim_targets",{days:parseInt(Z)});u(ie||[])}catch(ie){console.error(ie),a("","   ")}finally{g(!1)}},ne=Z=>{o(ie=>ie.includes(Z)?ie.filter(de=>de!==Z):[...ie,Z])},re=()=>{ae("recovery",!0),c(!1)};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-violet-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-violet-600 uppercase",children:"Promotion"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-700 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"SMS Promotion"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"sms"}),"      ."]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden p-6 lg:p-8 pt-0 flex flex-col xl:flex-row gap-6",children:[s.jsxs("div",{className:"flex-1 flex flex-col gap-6 min-w-[350px] overflow-y-auto custom-scrollbar",children:[s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[s.jsxs("h3",{className:"text-indigo-600 font-bold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"group"}),"   "]}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("label",{className:"flex items-center gap-4 p-4 border border-slate-200 rounded-xl cursor-pointer hover:bg-slate-50 hover:border-indigo-200 transition-all group bg-white",children:[s.jsx("input",{type:"checkbox",checked:r.all,onChange:Z=>ae("all",Z.target.checked),className:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"material-symbols-rounded text-slate-400 group-hover:text-indigo-500 text-2xl",children:"groups"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-bold text-slate-600 group-hover:text-indigo-700",children:" "}),s.jsx("span",{className:"text-xs text-slate-400",children:"   "})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[["VVIP","VIP","","/"].map(Z=>{const ie=Z==="/"?"corp":Z===""?"normal":Z.toLowerCase();return s.jsxs("label",{className:`flex items-center justify-center gap-3 p-3 border rounded-xl cursor-pointer transition-all ${r[ie]?"bg-indigo-50 border-indigo-300 text-indigo-700 font-bold":"bg-white border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:[s.jsx("input",{type:"checkbox",checked:r[ie],onChange:de=>ae(ie,de.target.checked),className:"hidden"}),s.jsx("span",{children:Z})]},ie)}),s.jsxs("div",{className:"col-span-2 relative",children:[s.jsxs("label",{className:`flex items-center gap-3 p-3 border rounded-xl cursor-pointer transition-all ${r.recovery?"bg-amber-50 border-amber-300 text-amber-700":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[s.jsx("input",{type:"checkbox",checked:r.recovery,onChange:Z=>ae("recovery",Z.target.checked),className:"w-5 h-5 text-amber-500 rounded focus:ring-amber-500"}),s.jsx("span",{className:"material-symbols-rounded text-amber-500",children:"sentiment_dissatisfied"}),s.jsx("span",{className:`font-bold ${r.recovery?"text-amber-800":"text-slate-500"}`,children:"  "})]}),r.recovery&&s.jsxs("button",{onClick:K,className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-white border border-amber-200 text-amber-600 text-xs font-bold rounded-lg shadow-sm hover:bg-amber-50 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:i.length>0?"check_circle":"list_alt"}),i.length>0?`${i.length} `:" "]})]})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-xl border border-dashed border-slate-200 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-bold text-slate-500 block",children:"  "}),s.jsx("span",{className:"text-[10px] text-slate-400",children:"*   "})]}),s.jsxs("strong",{className:"text-xl font-black text-indigo-600",children:[G.toLocaleString()," "]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-violet-50 to-white rounded-2xl border border-violet-200 p-5 shadow-sm",children:[s.jsxs("h4",{className:"text-violet-800 font-bold mb-2 flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"lightbulb"}),"  "]}),s.jsxs("p",{className:"text-xs text-violet-600 leading-relaxed font-medium",children:["       ",s.jsx("strong",{children:"()"}),"   ",s.jsx("strong",{children:"080 "}),"   ."]})]})]}),s.jsxs("div",{className:"flex-[2] bg-white rounded-2xl shadow-lg border border-slate-200 p-6 flex flex-col gap-5 min-h-[500px]",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 border-b border-slate-100 pb-4",children:[s.jsxs("h3",{className:"text-lg font-black text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"p-1.5 bg-violet-100 text-violet-600 rounded-lg material-symbols-rounded",children:"edit_square"})," "]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>w("sms"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${b==="sms"?"bg-white text-violet-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"SMS/LMS"}),s.jsx("button",{onClick:()=>w("kakao"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${b==="kakao"?"bg-yellow-400 text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:" "})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:""}),s.jsxs("select",{onChange:F,className:"bg-slate-50 border border-slate-200 text-slate-700 text-xs rounded-lg p-2 outline-none focus:border-violet-500 font-medium",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"greeting",children:"   "}),s.jsx("option",{value:"promo",children:"    "}),s.jsx("option",{value:"repurchase",children:"  "}),s.jsx("option",{value:"seasonal",children:"  "}),s.jsx("option",{value:"anniversary",children:"  "}),s.jsx("option",{value:"recovery",children:"  "})]})]})]})]}),b==="kakao"&&s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-3 flex gap-3 text-xs text-yellow-800 font-medium animate-in fade-in slide-in-from-top-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"info"}),s.jsxs("p",{children:[s.jsx("b",{children:"  :"}),"      .      ."]})]}),s.jsxs("div",{className:"relative flex-1",children:[s.jsx("textarea",{value:_,onChange:Z=>k(Z.target.value),className:"w-full h-full p-5 bg-slate-50 border border-slate-200 rounded-2xl resize-none outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 transition-all text-slate-700 leading-relaxed font-medium",placeholder:"    ."}),s.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center gap-3 bg-white/90 backdrop-blur border border-slate-200 px-3 py-1.5 rounded-full shadow-sm text-xs font-bold text-slate-500 pointer-events-none",children:[s.jsx("span",{className:`${I==="LMS"?"text-violet-600":"text-slate-500"}`,children:I}),s.jsx("span",{className:"w-px h-3 bg-slate-200"}),s.jsxs("span",{children:[s.jsx("span",{className:"text-slate-800",children:T})," / 2000 bytes"]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2",children:[s.jsxs("button",{onClick:()=>{k(""),U("")},className:"px-4 py-3 rounded-xl border border-slate-200 text-slate-500 hover:bg-slate-50 hover:text-slate-700 font-bold text-sm flex items-center gap-2 transition-colors",children:[s.jsx("span",{className:"material-symbols-rounded",children:"delete_outline"})," "]}),s.jsxs("button",{onClick:W,className:`px-8 py-3 rounded-xl font-bold text-sm flex items-center gap-2 shadow-lg transition-all transform active:scale-95 ${b==="kakao"?"bg-yellow-400 hover:bg-yellow-500 text-slate-900 shadow-yellow-200":"bg-violet-600 hover:bg-violet-700 text-white shadow-violet-200"}`,children:[s.jsx("span",{className:"material-symbols-rounded",children:b==="kakao"?"chat":"send"}),b==="kakao"?" ":" "]})]})]})]}),l&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-start bg-slate-50/50",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-black text-slate-800",children:"   "}),s.jsx("p",{className:"text-sm text-slate-500 mt-1",children:" (/)      ."})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("select",{value:h,onChange:Z=>{f(Z.target.value),ee(Z.target.value)},className:"bg-white border border-slate-200 text-slate-700 text-sm rounded-lg p-2 outline-none focus:border-indigo-500",children:[s.jsx("option",{value:"7",children:" 7"}),s.jsx("option",{value:"30",children:" 30"}),s.jsx("option",{value:"90",children:" 90"}),s.jsx("option",{value:"365",children:" 1"})]}),s.jsx("button",{onClick:()=>c(!1),className:"bg-slate-100 p-2 rounded-full hover:bg-slate-200",children:s.jsx("span",{className:"material-symbols-rounded text-slate-500",children:"close"})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-0 min-h-0 custom-scrollbar relative",children:[p&&s.jsx("div",{className:"absolute inset-0 z-10 bg-white/80 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded animate-spin text-4xl text-indigo-500",children:"sync"})}),s.jsxs("table",{className:"w-full text-sm text-left whitespace-nowrap",children:[s.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500 font-bold border-b border-slate-200 sticky top-0 z-10 shadow-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-3 px-4 w-[50px] text-center",children:""}),s.jsx("th",{className:"py-3 px-4",children:""}),s.jsx("th",{className:"py-3 px-4",children:""}),s.jsx("th",{className:"py-3 px-4 text-center",children:""}),s.jsx("th",{className:"py-3 px-4 text-center",children:" "}),s.jsx("th",{className:"py-3 px-4",children:""}),s.jsx("th",{className:"py-3 px-4 text-center",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[d.map((Z,ie)=>{const de=i.includes(Z.mobile);return s.jsxs("tr",{onClick:()=>ne(Z.mobile),className:`cursor-pointer transition-colors hover:bg-slate-50 ${de?"bg-indigo-50/50":""}`,children:[s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("input",{type:"checkbox",checked:de,readOnly:!0,className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"})}),s.jsx("td",{className:"py-3 px-4 font-bold text-slate-700",children:Z.name}),s.jsx("td",{className:"py-3 px-4 text-slate-500 font-mono",children:Z.mobile}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold border ${Z.is_member?"bg-sky-50 text-sky-700 border-sky-200":"bg-slate-50 text-slate-500 border-slate-200"}`,children:Z.is_member?"":""})}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold border ${Z.claim_type===""?"bg-red-50 text-red-700 border-red-200":"bg-amber-50 text-amber-700 border-amber-200"}`,children:Z.claim_type})}),s.jsx("td",{className:"py-3 px-4 text-slate-600",children:Z.reason||"-"}),s.jsx("td",{className:"py-3 px-4 text-center text-slate-400 text-xs",children:Z.date})]},ie)}),d.length===0&&!p&&s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"p-8 text-center text-slate-400",children:" ."})})]})]})]}),s.jsxs("div",{className:"p-4 border-t border-slate-100 flex items-center justify-between bg-slate-50",children:[s.jsxs("div",{className:"text-sm text-slate-600 font-bold",children:[" ",s.jsx("span",{className:"text-indigo-600",children:i.length})," "]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>o([]),className:"px-4 py-2 border border-slate-200 rounded-lg text-sm text-slate-500 font-bold hover:bg-white",children:" "}),s.jsx("button",{onClick:re,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700 shadow-sm",children:" "})]})]})]})})]})},fue=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState([]),[n,i]=H.useState([]),[o,l]=H.useState([]),[c,d]=H.useState(new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0]),[u,h]=H.useState(new Date().toISOString().split("T")[0]),[f,p]=H.useState(""),g={purchaseId:null,date:new Date().toISOString().split("T")[0],vendorId:"",itemName:"",spec:"",qty:1,price:0,total:0,paymentStatus:"",memo:"",linkProductId:"",isInventoryMode:!1,isSyncMode:!1,syncItems:[]},[b,w]=H.useState(g),[_,k]=H.useState(""),[T,D]=H.useState([]),I=H.useCallback(async()=>{try{const K=await fetch("/api/product/list");if(K.ok){const ee=await K.json();i(ee||[])}}catch(K){console.error("Product load error:",K)}},[]),O=H.useCallback(async()=>{try{const K=await fetch("/api/finance/vendors");if(K.ok){const ee=await K.json();l(ee||[])}}catch(K){console.error("Vendor load error:",K)}},[]),P=H.useCallback(async()=>{try{const K=new URLSearchParams({start_date:c,end_date:u});f&&K.append("vendor_id",f);const ee=await fetch(`/api/finance/purchases?${K.toString()}`);if(ee.ok){const ne=await ee.json();r(ne||[])}}catch(K){console.error("Purchase list load error:",K)}},[c,u,f]);H.useEffect(()=>{I(),O(),P()},[I,O,P]);const V=K=>{const{name:ee,value:ne,type:re,checked:Z}=K.target;w(ie=>{const de={...ie,[ee]:re==="checkbox"?Z:ne};if(ee==="qty"||ee==="price"){const fe=ee==="qty"?Uu(ne):ie.qty,he=ee==="price"?Uu(ne):ie.price;de.total=fe*he,ee==="qty"&&ne===""&&(de.qty=""),ee==="price"&&ne===""&&(de.price="")}if(ee==="isInventoryMode"&&!Z&&(de.linkProductId="",de.isSyncMode=!1,de.syncItems=[]),ee==="isSyncMode"){if(Z&&!ie.linkProductId)return a("",' "   " .'),ie;Z?G(ie.itemName):de.syncItems=[]}if(ee==="linkProductId"){if(!ne)de.isSyncMode=!1,de.syncItems=[];else if(!ie.itemName){const fe=n.find(he=>String(he.product_id)===String(ne));fe&&(de.itemName=fe.product_name)}}return ee==="itemName"&&ie.isSyncMode&&G(ne),de})},G=K=>{if(!K)return;const ee=/(\d+\s*(kg|g||||))/i,ne=K.match(ee),re=ne?ne[0].toLowerCase():K.toLowerCase();if(re.length<2){D([]);return}const Z=n.filter(ie=>ie.item_type==="product"&&(ie.product_name.toLowerCase().includes(re)||ie.specification&&ie.specification.toLowerCase().includes(re))).slice(0,20);D(Z)},Q=K=>{const ee=K.target.value;k(ee),G(ee)},$=(K,ee)=>{w(ne=>ne.syncItems.find(Z=>Z.product_id===K.product_id)?{...ne,syncItems:ne.syncItems.map(Z=>Z.product_id===K.product_id?{...Z,quantity:ee}:Z)}:{...ne,syncItems:[...ne.syncItems,{product_id:K.product_id,quantity:ee,product_name:K.product_name}]})},ae=async()=>{if(!b.itemName){a(""," .");return}if(!b.vendorId){a("","() .");return}try{const K={purchase_id:b.purchaseId,vendor_id:parseInt(b.vendorId),purchase_date:b.date,item_name:b.itemName,specification:b.spec,quantity:Number(b.qty)||0,unit_price:Number(b.price)||0,total_amount:Number(b.total)||0,payment_status:b.paymentStatus,memo:b.memo,inventory_synced:!!b.linkProductId,material_item_id:b.linkProductId?parseInt(b.linkProductId):null};let ee=null;if(b.isSyncMode&&b.syncItems.some(re=>re.quantity>0)&&(ee=b.syncItems.filter(re=>re.quantity>0).map(re=>({product_id:re.product_id,quantity:Number(re.quantity)}))),!(await fetch("/api/finance/purchases/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({purchase:K,inventory_sync_data:ee})})).ok)throw new Error("Failed to save purchase");await a("","  ."),J(),P(),I()}catch(K){a("",` : ${K}`)}},J=()=>{w(g),D([]),k("")},U=K=>{w({purchaseId:K.purchase_id,date:K.purchase_date,vendorId:K.vendor_id||"",itemName:K.item_name,spec:K.specification||"",qty:K.quantity,price:K.unit_price,total:K.total_amount,paymentStatus:K.payment_status,memo:K.memo||"",isInventoryMode:!!K.material_item_id,linkProductId:K.material_item_id||"",isSyncMode:!1,syncItems:[]})},F=async K=>{if(await e("","    ?"))try{if(!(await fetch("/api/finance/purchases/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:K})})).ok)throw new Error("Failed to delete purchase");P()}catch(ee){a("",` : ${ee}`)}},W=H.useMemo(()=>{const K=t.reduce((ne,re)=>ne+re.total_amount,0),ee=t.filter(ne=>ne.payment_status==="").reduce((ne,re)=>ne+re.total_amount,0);return{total:K,unpaid:ee}},[t]);return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-violet-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-violet-600 uppercase",children:"Start Your Business"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:[" / ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Purchase History"})]})]}),s.jsxs("div",{className:"flex flex-1 gap-6 px-6 lg:px-8 pb-6 min-h-0",children:[s.jsx("div",{className:"w-[360px] flex flex-col gap-4 h-full",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-5 border border-slate-200 shadow-sm relative group overflow-hidden flex flex-col flex-1 h-full",children:[s.jsx("div",{className:"absolute top-0 right-0 w-24 h-full bg-violet-50/50 -skew-x-12 translate-x-12 transition-transform group-hover:translate-x-6"}),s.jsxs("div",{className:"flex items-center gap-2 mb-4 relative z-10 shrink-0",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-violet-100 flex items-center justify-center text-violet-600",children:s.jsx("span",{className:"material-symbols-rounded",children:"edit_square"})}),s.jsx("h3",{className:"text-lg font-bold text-slate-700",children:"  "})]}),s.jsxs("div",{className:"flex flex-col gap-3 relative z-10 overflow-y-auto flex-1 px-1 custom-scrollbar",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" "}),s.jsx("input",{type:"date",name:"date",value:b.date,onChange:V,className:"w-full h-10 rounded-xl bg-slate-50 border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" ()"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{name:"vendorId",value:b.vendorId,onChange:V,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3 appearance-none",children:[s.jsx("option",{value:"",children:" "}),o.map(K=>s.jsx("option",{value:K.vendor_id,children:K.vendor_name},K.vendor_id))]}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:"unfold_more"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" ( )"}),s.jsx("input",{type:"text",name:"itemName",value:b.itemName,onChange:V,placeholder:":   5kg",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" ()"}),s.jsx("input",{type:"text",name:"spec",value:b.spec,onChange:V,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("input",{type:"text",name:"qty",value:Ve(b.qty),onChange:V,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold text-right focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("input",{type:"text",name:"price",value:Ve(b.price),onChange:V,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold text-right focus:ring-2 focus:ring-violet-500 transition-all px-3"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-violet-600 uppercase ml-1 mb-1 block",children:" "}),s.jsx("input",{type:"text",value:Ve(b.total),readOnly:!0,className:"w-full h-10 rounded-xl bg-violet-50 border-none text-violet-700 font-black text-right px-4"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" "}),s.jsxs("select",{name:"paymentStatus",value:b.paymentStatus,onChange:V,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:"()"}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{className:"mt-2 bg-slate-50 rounded-xl p-3 border border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-xs font-bold text-slate-600 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"inventory_2"}),"   "]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"isInventoryMode",checked:b.isInventoryMode,onChange:V,className:"sr-only peer"}),s.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-violet-600"})]})]}),b.isInventoryMode&&s.jsxs("div",{className:"flex flex-col gap-3 animate-in fade-in slide-in-from-top-2 duration-300",children:[s.jsxs("div",{children:[s.jsxs("select",{name:"linkProductId",value:b.linkProductId,onChange:V,className:"w-full h-9 rounded-lg border-orange-200 bg-orange-50 text-xs font-bold text-orange-800 focus:ring-2 focus:ring-orange-400",children:[s.jsx("option",{value:"",children:"   ( )"}),n.filter(K=>K.item_type==="material").map(K=>s.jsxs("option",{value:K.product_id,children:[K.product_name," ",K.specification?`(${K.specification})`:""]},K.product_id))]}),s.jsx("p",{className:"text-[10px] text-orange-600 mt-1 ml-1",children:"*      ."})]}),s.jsxs("div",{className:"pt-2 border-t border-dashed border-slate-300",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-2",children:[s.jsx("input",{type:"checkbox",name:"isSyncMode",checked:b.isSyncMode,onChange:V,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"}),s.jsx("span",{className:"text-xs font-bold text-blue-600",children:"()   "})]}),b.isSyncMode&&s.jsxs("div",{className:"bg-blue-50/50 rounded-lg p-2 border border-blue-100",children:[s.jsx("input",{type:"text",value:_,onChange:Q,placeholder:" ...",className:"w-full h-8 rounded border-blue-200 text-xs mb-2 px-2 focus:ring-1 focus:ring-blue-400"}),s.jsx("div",{className:"max-h-[150px] overflow-y-auto flex flex-col gap-1",children:T.length===0?s.jsx("p",{className:"text-[10px] text-slate-400 text-center py-2",children:"  ."}):T.map(K=>{const ee=b.syncItems.find(ne=>ne.product_id===K.product_id)?.quantity||"";return s.jsxs("div",{className:"flex items-center justify-between bg-white px-2 py-1.5 rounded border border-blue-100",children:[s.jsx("span",{className:"text-xs font-medium truncate flex-1",children:K.product_name}),s.jsx("input",{type:"number",placeholder:"",value:ee,onChange:ne=>$(K,ne.target.value),className:"w-16 h-6 text-right text-xs border border-slate-200 rounded px-1 focus:border-blue-500 outline-none"})]},K.product_id)})})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("textarea",{name:"memo",value:b.memo,onChange:V,className:"w-full h-20 rounded-xl bg-white border-slate-200 text-slate-800 text-sm p-3 focus:ring-2 focus:ring-violet-500 transition-all resize-none"})]}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs("button",{onClick:ae,className:"flex-1 h-11 bg-violet-600 hover:bg-violet-700 text-white rounded-xl font-bold shadow-lg shadow-violet-200 transition-all flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"save"})," "]}),s.jsx("button",{onClick:J,className:"w-12 h-11 bg-white border border-slate-200 hover:bg-slate-50 text-slate-600 rounded-xl flex items-center justify-center transition-all",children:s.jsx("span",{className:"material-symbols-rounded",children:"restart_alt"})})]})]})]})}),s.jsxs("div",{className:"flex-1 flex flex-col min-w-0 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-4 border border-slate-200 shadow-sm flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 rounded-lg border border-slate-200",children:[s.jsx("span",{className:"material-symbols-rounded text-slate-400 text-[18px]",children:"calendar_today"}),s.jsx("input",{type:"date",value:c,onChange:K=>d(K.target.value),className:"bg-transparent text-sm font-bold text-slate-600 outline-none w-28"}),s.jsx("span",{className:"text-slate-400",children:"~"}),s.jsx("input",{type:"date",value:u,onChange:K=>h(K.target.value),className:"bg-transparent text-sm font-bold text-slate-600 outline-none w-28"})]}),s.jsxs("select",{value:f,onChange:K=>p(K.target.value),className:"h-10 rounded-lg border-slate-200 text-sm font-bold text-slate-600 w-40",children:[s.jsx("option",{value:"",children:" "}),o.map(K=>s.jsx("option",{value:K.vendor_id,children:K.vendor_name},K.vendor_id))]}),s.jsxs("button",{onClick:P,className:"h-10 px-4 bg-slate-800 text-white rounded-lg font-bold hover:bg-slate-700 transition-colors flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"search"})," "]}),s.jsxs("div",{className:"ml-auto flex items-center gap-6",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase block",children:" "}),s.jsxs("span",{className:"text-lg font-black text-slate-800",children:[Ve(W.total),""]})]}),s.jsxs("div",{className:"text-right pl-6 border-l border-slate-200",children:[s.jsx("span",{className:"text-[10px] font-bold text-red-400 uppercase block",children:" "}),s.jsxs("span",{className:"text-lg font-black text-red-500",children:[Ve(W.unpaid),""]})]})]})]}),s.jsx("div",{className:"flex-1 bg-white rounded-[1.5rem] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0 z-10 shadow-sm",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-200",children:[s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-1/3",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-right",children:" "}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100",children:[t.map(K=>s.jsxs("tr",{onClick:()=>U(K),className:"hover:bg-violet-50/50 cursor-pointer transition-colors group",children:[s.jsx("td",{className:"py-3 px-4 font-medium text-slate-600",children:K.purchase_date}),s.jsx("td",{className:"py-3 px-4 font-bold text-slate-700",children:K.vendor_name||"-"}),s.jsxs("td",{className:"py-3 px-4",children:[s.jsx("div",{className:"font-bold text-slate-800",children:K.item_name}),K.specification&&s.jsxs("div",{className:"text-xs text-slate-500",children:["(",K.specification,")"]})]}),s.jsx("td",{className:"py-3 px-4 text-center font-medium text-slate-600",children:Ve(K.quantity)}),s.jsxs("td",{className:"py-3 px-4 text-right font-bold text-slate-800",children:[Ve(K.total_amount),""]}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs font-bold border ${K.payment_status===""?"bg-red-50 text-red-600 border-red-200":"bg-green-50 text-green-600 border-green-200"}`,children:K.payment_status})}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("div",{className:"flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:ee=>{ee.stopPropagation(),F(K.purchase_id)},className:"w-8 h-8 rounded-lg text-slate-400 hover:bg-red-50 hover:text-red-500 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"delete"})})})})]},K.purchase_id)),t.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"py-12 text-center text-slate-400 font-medium",children:"  ."})})]})]})})})]})]})]})},pue=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState([]),[n,i]=H.useState(!1),o=new Date().toISOString().split("T")[0],l=new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],[c,d]=H.useState({start:l,end:o,category:""}),u={id:null,date:o,category:"",amount:"",method:"",memo:""},[h,f]=H.useState(u);H.useEffect(()=>{p()},[]);const p=async()=>{i(!0);try{const I=new URLSearchParams({start_date:c.start,end_date:c.end});c.category&&I.append("category",c.category);const O=await fetch(`/api/finance/expenses?${I.toString()}`);if(O.ok){const P=await O.json();r(P||[])}}catch(I){console.error(I),a("","  : "+I),r([])}finally{i(!1)}},g=I=>{const{name:O,value:P}=I.target;f(V=>{if(O==="amount"){const G=Uu(P.replace(/,/g,""));return{...V,amount:G}}return{...V,[O]:P}})},b=I=>{const O=I.target.value.replace(/,/g,"");/^\d*$/.test(O)&&f(P=>({...P,amount:O}))},w=async()=>{const I=Number(h.amount);if(I<=0)return a("","  .");const O={expense_id:h.id,expense_date:h.date,category:h.category,amount:I,payment_method:h.method,memo:h.memo};try{if(!(await fetch("/api/finance/expenses/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)})).ok)throw new Error("Failed to save expense");await a("","  ."),k(),p()}catch(P){a(""," : "+P)}},_=async I=>{if(await e(" ","   ?"))try{if(!(await fetch("/api/finance/expenses/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:I})})).ok)throw new Error("Failed to delete expense");p()}catch(O){a(""," : "+O)}},k=()=>{f(u)},T=I=>{f({id:I.expense_id,date:I.expense_date,category:I.category,amount:String(I.amount),method:I.payment_method,memo:I.memo||""})},D=t.reduce((I,O)=>I+O.amount,0);return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-violet-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-violet-600 uppercase",children:"Financial Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Expense Management"})]})]}),s.jsxs("div",{className:"flex flex-1 gap-6 px-6 lg:px-8 pb-6 min-h-0",children:[s.jsx("div",{className:"w-[360px] flex flex-col gap-4 h-full",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-5 border border-slate-200 shadow-sm relative group overflow-hidden flex flex-col flex-1 h-full",children:[s.jsx("div",{className:"absolute top-0 right-0 w-24 h-full bg-violet-50/50 -skew-x-12 translate-x-12 transition-transform group-hover:translate-x-6"}),s.jsxs("div",{className:"flex items-center gap-2 mb-4 relative z-10 shrink-0",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-violet-100 flex items-center justify-center text-violet-600",children:s.jsx("span",{className:"material-symbols-rounded",children:"edit_square"})}),s.jsx("h3",{className:"text-lg font-bold text-slate-700",children:"  "})]}),s.jsxs("div",{className:"flex flex-col gap-3 relative z-10 overflow-y-auto flex-1 px-1 custom-scrollbar",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" "}),s.jsx("input",{type:"date",name:"date",value:h.date,onChange:g,className:"w-full h-10 rounded-xl bg-slate-50 border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{name:"category",value:h.category,onChange:g,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3 appearance-none",children:[s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:"/"}),s.jsx("option",{children:""})]}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:"unfold_more"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" "}),s.jsx("input",{type:"text",name:"amount",value:Ve(h.amount),onChange:b,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold text-right focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" "}),s.jsxs("select",{name:"method",value:h.method,onChange:g,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3",children:[s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" /"}),s.jsx("textarea",{name:"memo",value:h.memo,onChange:g,className:"w-full h-32 rounded-xl bg-white border-slate-200 text-slate-800 text-sm p-3 focus:ring-2 focus:ring-violet-500 transition-all resize-none",placeholder:"  "})]}),s.jsxs("div",{className:"flex gap-2 mt-auto pt-4",children:[s.jsxs("button",{onClick:w,className:"flex-1 h-11 bg-violet-600 hover:bg-violet-700 text-white rounded-xl font-bold shadow-lg shadow-violet-200 transition-all flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"save"})," "]}),s.jsx("button",{onClick:k,className:"w-12 h-11 bg-white border border-slate-200 hover:bg-slate-50 text-slate-600 rounded-xl flex items-center justify-center transition-all",children:s.jsx("span",{className:"material-symbols-rounded",children:"restart_alt"})})]})]})]})}),s.jsxs("div",{className:"flex-1 flex flex-col min-w-0 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-4 border border-slate-200 shadow-sm flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 rounded-lg border border-slate-200",children:[s.jsx("span",{className:"material-symbols-rounded text-slate-400 text-[18px]",children:"calendar_today"}),s.jsx("input",{type:"date",value:c.start,onChange:I=>d({...c,start:I.target.value}),className:"bg-transparent text-sm font-bold text-slate-600 outline-none w-28"}),s.jsx("span",{className:"text-slate-400",children:"~"}),s.jsx("input",{type:"date",value:c.end,onChange:I=>d({...c,end:I.target.value}),className:"bg-transparent text-sm font-bold text-slate-600 outline-none w-28"})]}),s.jsxs("select",{value:c.category,onChange:I=>d({...c,category:I.target.value}),className:"h-10 rounded-lg border-slate-200 text-sm font-bold text-slate-600 w-32",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:"/"}),s.jsx("option",{children:""})]}),s.jsxs("button",{onClick:p,className:"h-10 px-4 bg-slate-800 text-white rounded-lg font-bold hover:bg-slate-700 transition-colors flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"search"})," "]}),s.jsx("div",{className:"ml-auto flex items-center gap-6",children:s.jsxs("div",{className:"text-right pl-6 border-l border-slate-200",children:[s.jsx("span",{className:"text-[10px] font-bold text-red-400 uppercase block",children:" "}),s.jsxs("span",{className:"text-lg font-black text-red-500",children:[Ve(D),""]})]})})]}),s.jsx("div",{className:"flex-1 bg-white rounded-[1.5rem] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0 z-10 shadow-sm",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-200",children:[s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center min-w-[100px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center min-w-[100px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-right min-w-[120px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-2/5 min-w-[200px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center w-[80px]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"py-12 text-center text-slate-400 font-medium",children:"  ."})}):t.map(I=>s.jsxs("tr",{onClick:()=>T(I),className:"hover:bg-violet-50/50 cursor-pointer transition-colors group",children:[s.jsx("td",{className:"py-3 px-4 text-center font-medium text-slate-600",children:I.expense_date}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs font-bold bg-slate-100 text-slate-600 border border-slate-200 whitespace-nowrap",children:I.category})}),s.jsxs("td",{className:"py-3 px-4 text-right font-black text-red-500",children:[Ve(I.amount),""]}),s.jsx("td",{className:"py-3 px-4 text-center text-slate-500 text-xs",children:I.payment_method}),s.jsx("td",{className:"py-3 px-4 text-slate-700 break-keep",children:I.memo||"-"}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("div",{className:"flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:O=>{O.stopPropagation(),_(I.expense_id)},className:"w-8 h-8 rounded-lg text-slate-400 hover:bg-red-50 hover:text-red-500 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"delete"})})})})]},I.expense_id))})]})})})]})]})]})},xue=()=>{const{showAlert:a}=Na(),[e,t]=H.useState(""),[r,n]=H.useState("");H.useEffect(()=>{const p=new Date,g=new Date(p.getFullYear(),p.getMonth(),1),b=new Date(p.getFullYear(),p.getMonth()+1,0);t(g.toISOString().split("T")[0]),n(b.toISOString().split("T")[0])},[]);const[i,o]=H.useState({taxableSales:[],exemptSales:[],purchases:[],summary:{taxableSalesAmt:0,taxableSalesSupply:0,taxableSalesVat:0,exemptSalesAmt:0,totalSalesAmt:0,purchaseAmt:0,purchaseSupply:0,purchaseVat:0}}),[l,c]=H.useState(!1),d=async()=>{c(!0);try{const p=new URLSearchParams({start_date:e,end_date:r}),g=await fetch(`/api/finance/tax/report?${p.toString()}`);let b=[];if(g.ok)b=await g.json();else throw new Error("Failed to load tax report");let w=[],_=[],k=[],T={taxableSalesAmt:0,taxableSalesSupply:0,taxableSalesVat:0,exemptSalesAmt:0,totalSalesAmt:0,purchaseAmt:0,purchaseSupply:0,purchaseVat:0};(b||[]).forEach(D=>{const I=D.total_amount||0,O=D.supply_value||0,P=D.vat_amount||0,V=D.tax_exempt_value||0;D.direction===""?(T.totalSalesAmt+=I,D.tax_type===""?(_.push(D),T.exemptSalesAmt+=I):(D.tax_type===""||D.tax_type==="")&&(w.push(D),T.taxableSalesAmt+=I-V,T.taxableSalesSupply+=O,T.taxableSalesVat+=P,V>0&&(_.push({...D,name:`[] ${D.name}`,total_amount:V}),T.exemptSalesAmt+=V))):(k.push(D),T.purchaseAmt+=I,T.purchaseSupply+=O,T.purchaseVat+=P)}),o({taxableSales:w,exemptSales:_,purchases:k,summary:T})}catch(p){console.error(p),a("","  : "+p)}finally{c(!1)}},u=async()=>{if(i.summary.totalSalesAmt===0&&i.summary.purchaseAmt===0){a("","  .");return}let p=`\uFEFF[    ]
`;p+=` : ${e} ~ ${r}

`,p+=`[  (Output VAT)]
`,p+=` ,${i.summary.taxableSalesSupply}
`,p+=` ,${i.summary.taxableSalesVat}
`,p+=` ,${i.summary.exemptSalesAmt}
`,p+=` ,${i.summary.totalSalesAmt}

`,p+=`[  (Input VAT)]
`,p+=` ,${i.summary.purchaseSupply}
`,p+=` ,${i.summary.purchaseVat}
`,p+=` ,${i.summary.purchaseAmt}

`,p+=`,,,,,,,
`,[...i.taxableSales,...i.exemptSales,...i.purchases].forEach(T=>{const D=[T.direction,T.category,T.date,T.name,T.supply_value,T.vat_amount,T.total_amount,T.memo||"-"].join(",");p+=D+`
`});const b=`_${e.replace(/-/g,"")}~${r.replace(/-/g,"")}.csv`,w=new Blob([p],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(w),k=document.createElement("a");k.href=_,k.setAttribute("download",b),document.body.appendChild(k),k.click(),document.body.removeChild(k),a(""," .")},h=()=>{const p=new URLSearchParams({start_date:e,end_date:r});window.open(`/api/finance/report/pdf?${p.toString()}`,"_blank")},f=async()=>{const p=[...i.taxableSales||[],...i.exemptSales||[],...i.purchases||[]];if(p.length===0){a("","  .   .");return}if(window.confirm(`[ ]

 ${p.length}  ( API) ?

       .`)){c(!0);try{const b=await fetch("/api/finance/tax/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:p,start_date:e,end_date:r})});if(!b.ok){const _=await b.text();throw new Error(_)}const w=await b.json();a(" ",w)}catch(b){console.error(b),a(" "," : "+b)}finally{c(!1)}}};return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 p-6 lg:p-8 overflow-hidden font-sans",children:[s.jsxs("div",{className:"mb-8 flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-8 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[10px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Tax & VAT Report"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["/   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Tax Support"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 bg-white p-2 rounded-2xl shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 border-r border-slate-100",children:[s.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:""}),s.jsx("input",{type:"date",value:e,onChange:p=>t(p.target.value),className:"text-sm font-black text-slate-700 outline-none border-none bg-transparent w-40 font-mono"})]}),s.jsxs("div",{className:"flex items-center gap-2 px-3 border-r border-slate-100",children:[s.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:""}),s.jsx("input",{type:"date",value:r,onChange:p=>n(p.target.value),className:"text-sm font-black text-slate-700 outline-none border-none bg-transparent w-40 font-mono"})]}),s.jsxs("button",{onClick:d,disabled:l,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2.5 rounded-xl font-black text-sm transition-all shadow-md shadow-indigo-100 flex items-center gap-2 disabled:opacity-50",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"analytics"}),""]}),s.jsxs("button",{onClick:u,className:"bg-emerald-500 hover:bg-emerald-600 text-white px-5 py-2.5 rounded-xl font-black text-sm transition-all shadow-md shadow-emerald-100 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"download"})," "]}),s.jsxs("button",{onClick:h,className:"bg-slate-700 hover:bg-slate-800 text-white px-5 py-2.5 rounded-xl font-black text-sm transition-all shadow-md shadow-slate-100 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"picture_as_pdf"}),"PDF "]}),s.jsxs("button",{onClick:f,disabled:l,className:"bg-violet-600 hover:bg-violet-700 text-white px-5 py-2.5 rounded-xl font-black text-sm transition-all shadow-md shadow-violet-100 flex items-center gap-2 disabled:opacity-50",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"rocket_launch"})," (API)"]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-8 shrink-0",children:[s.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-200 relative overflow-hidden group hover:shadow-md transition-all",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-50 rounded-bl-full -mr-16 -mt-16 transition-transform group-hover:scale-110"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("p",{className:"text-[11px] font-black text-indigo-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"trending_up"}),"   (Sales/Revenue)"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-500",children:[s.jsx("span",{children:" (+)"}),s.jsxs("span",{className:"text-slate-700",children:[Ve(i.summary.taxableSalesSupply+i.summary.exemptSalesAmt),""]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-500 border-b border-slate-50 pb-2",children:[s.jsx("span",{children:"  (Output VAT)"}),s.jsxs("span",{className:"text-indigo-600",children:["+",Ve(i.summary.taxableSalesVat),""]})]}),s.jsxs("div",{className:"flex justify-between items-center bg-indigo-50/50 p-2 rounded-lg",children:[s.jsx("span",{className:"text-xs font-black text-indigo-400",children:" "}),s.jsxs("span",{className:"text-xl font-black text-indigo-700 tracking-tight",children:[Ve(i.summary.totalSalesAmt),""]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-200 relative overflow-hidden group hover:shadow-md transition-all",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-rose-50 rounded-bl-full -mr-16 -mt-16 transition-transform group-hover:scale-110"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("p",{className:"text-[11px] font-black text-rose-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"trending_down"})," /  (Expenses)"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-500",children:[s.jsx("span",{children:" (Input)"}),s.jsxs("span",{className:"text-slate-700",children:[Ve(i.summary.purchaseSupply),""]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-500 border-b border-slate-50 pb-2",children:[s.jsx("span",{children:"  (Input VAT)"}),s.jsxs("span",{className:"text-rose-600",children:["-",Ve(i.summary.purchaseVat),""]})]}),s.jsxs("div",{className:"flex justify-between items-center bg-rose-50/50 p-2 rounded-lg",children:[s.jsx("span",{className:"text-xs font-black text-rose-400",children:" "}),s.jsxs("span",{className:"text-xl font-black text-rose-700 tracking-tight",children:[Ve(i.summary.purchaseAmt),""]})]})]})]})]}),s.jsxs("div",{className:"bg-slate-900 rounded-3xl p-6 shadow-xl relative overflow-hidden group",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/10 to-transparent opacity-50"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("p",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg text-white",children:"account_balance_wallet"}),"    (Estimated VAT)"]}),s.jsxs("div",{className:"flex flex-col justify-center h-[116px]",children:[s.jsx("p",{className:"text-xs font-bold text-slate-500 mb-2",children:" - "}),s.jsxs("p",{className:"text-3xl font-black text-white tracking-tighter tabular-nums",children:[Ve(i.summary.taxableSalesVat-i.summary.purchaseVat)," ",s.jsx("span",{className:"text-base font-medium text-slate-500",children:""})]}),s.jsxs("div",{className:"mt-4 flex gap-4",children:[s.jsxs("div",{className:"text-[10px] text-slate-400",children:[": ",s.jsxs("span",{className:"text-white font-bold",children:[i.taxableSales.length+i.exemptSales.length+i.purchases.length,""]})]}),s.jsxs("div",{className:"text-[10px] text-slate-400",children:[": ",s.jsx("span",{className:"text-emerald-400 font-bold",children:""})]})]})]})]})]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-6 min-h-0",children:[s.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-sm font-black text-slate-700 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"}),"   (Revenue List)"]}),s.jsxs("span",{className:"text-[10px] font-bold text-slate-400 font-mono",children:[(i.taxableSales?.length||0)+(i.exemptSales?.length||0)," "]})]}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar",children:s.jsxs("table",{className:"w-full text-[11px] border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-white shadow-sm z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left font-bold text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"p-3 text-left font-bold text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"p-3 text-left font-bold text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"p-3 text-right font-bold text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"p-3 text-right font-bold text-slate-400 border-b border-slate-100",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:[...i.taxableSales||[],...i.exemptSales||[]].map((p,g)=>s.jsxs("tr",{className:"hover:bg-indigo-50/30 transition-colors group",children:[s.jsx("td",{className:"p-3 font-bold text-indigo-400",children:p.category}),s.jsx("td",{className:"p-3 font-mono text-slate-400",children:p.date}),s.jsx("td",{className:"p-3 font-bold text-slate-700 truncate max-w-[120px]",title:p.name,children:p.name}),s.jsx("td",{className:"p-3 text-right font-black text-indigo-500",children:Ve(p.vat_amount)}),s.jsx("td",{className:"p-3 text-right font-black text-slate-800 tabular-nums",children:Ve(p.total_amount)})]},g))})]})})]}),s.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-sm font-black text-slate-700 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-rose-500"})," /  (Expense List)"]}),s.jsxs("span",{className:"text-[10px] font-bold text-slate-400 font-mono",children:[i.purchases?.length||0," "]})]}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar",children:s.jsxs("table",{className:"w-full text-[11px] border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-white shadow-sm z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left font-bold text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"p-3 text-left font-bold text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"p-3 text-left font-bold text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"p-3 text-right font-bold text-slate-400 border-b border-slate-100",children:"()"}),s.jsx("th",{className:"p-3 text-right font-bold text-slate-400 border-b border-slate-100",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:(i.purchases||[]).map((p,g)=>s.jsxs("tr",{className:"hover:bg-rose-50/30 transition-colors group",children:[s.jsx("td",{className:"p-3 font-bold text-rose-400",children:p.category}),s.jsx("td",{className:"p-3 font-mono text-slate-400",children:p.date}),s.jsx("td",{className:"p-3 font-bold text-slate-700 truncate max-w-[120px]",title:p.name,children:p.name}),s.jsx("td",{className:"p-3 text-right font-black text-rose-500",children:Ve(p.vat_amount)}),s.jsx("td",{className:"p-3 text-right font-black text-slate-800 tabular-nums",children:Ve(p.total_amount)})]},g))})]})})]})]}),s.jsx("p",{className:"mt-4 text-[10px] text-slate-400 italic",children:"*          ,        /    ."})]})},mue=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState([]),[n,i]=H.useState([]),[o,l]=H.useState(""),c={id:null,name:"",bizNum:"",rep:"",mobile:"",email:"",address:"",items:"",memo:""},[d,u]=H.useState(c);H.useEffect(()=>{h()},[]),H.useEffect(()=>{if(!o)r(n);else{const _=o.toLowerCase(),k=n.filter(T=>T.vendor_name.toLowerCase().includes(_)||T.main_items&&T.main_items.toLowerCase().includes(_));r(k)}},[o,n]);const h=async()=>{try{const _=await fetch("/api/finance/vendors");if(_.ok){const k=await _.json();i(k||[]),r(k||[])}}catch(_){console.error(_),a("","  : "+_)}},f=_=>{const{name:k,value:T}=_.target;u(D=>({...D,[k]:T}))},p=async()=>{if(!d.name.trim())return a(""," .");const _={vendor_id:d.id,vendor_name:d.name,business_number:d.bizNum,representative:d.rep,mobile_number:d.mobile,email:d.email,address:d.address,main_items:d.items,memo:d.memo,is_active:!0};try{if(!(await fetch("/api/finance/vendors/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).ok)throw new Error("Failed to save vendor");await a("","  ."),b(),h()}catch(k){a(""," : "+k)}},g=async(_,k)=>{if(await e(" ",`'${k}'  ?`))try{if(!(await fetch("/api/finance/vendors/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:_})})).ok)throw new Error("Failed to delete vendor");h()}catch(T){a(""," : "+T)}},b=()=>{u(c),l("")},w=_=>{u({id:_.vendor_id,name:_.vendor_name,bizNum:_.business_number||"",rep:_.representative||"",mobile:_.mobile_number||"",email:_.email||"",address:_.address||"",items:_.main_items||"",memo:_.memo||""}),l(_.vendor_name)};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-violet-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-violet-600 uppercase",children:"Vendor Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["/  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Supply Vendors"})]})]}),s.jsxs("div",{className:"flex flex-1 gap-6 px-6 lg:px-8 pb-6 min-h-0",children:[s.jsx("div",{className:"w-[420px] flex flex-col gap-4 h-full",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-5 border border-slate-200 shadow-sm relative group overflow-hidden flex flex-col flex-1 h-full",children:[s.jsx("div",{className:"absolute top-0 right-0 w-24 h-full bg-violet-50/50 -skew-x-12 translate-x-12 transition-transform group-hover:translate-x-6"}),s.jsxs("div",{className:"flex items-center gap-2 mb-4 relative z-10 shrink-0",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-violet-100 flex items-center justify-center text-violet-600",children:s.jsx("span",{className:"material-symbols-rounded",children:"store"})}),s.jsx("h3",{className:"text-lg font-bold text-slate-700",children:"  "})]}),s.jsxs("div",{className:"flex flex-col gap-3 relative z-10 overflow-y-auto flex-1 px-1 custom-scrollbar",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:[" () ",s.jsx("span",{className:"text-violet-500",children:"*"})]}),s.jsx("input",{name:"name",value:d.name,onChange:f,placeholder:": OO",autoFocus:!0,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("input",{name:"rep",value:d.rep,onChange:f,placeholder:"",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("input",{name:"bizNum",value:d.bizNum,onChange:f,placeholder:"000-00-00000",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]})]}),s.jsxs("div",{className:"w-1/2 pr-1.5",children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("input",{name:"mobile",value:d.mobile,onChange:f,placeholder:"010..",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("input",{type:"email",name:"email",value:d.email,onChange:f,placeholder:"email@example.com",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("input",{name:"address",value:d.address,onChange:f,placeholder:"  ",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:"  "}),s.jsx("input",{name:"items",value:d.items,onChange:f,placeholder:": , ,  ",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("textarea",{name:"memo",value:d.memo,onChange:f,className:"w-full h-24 rounded-xl bg-white border-slate-200 text-slate-800 text-sm p-3 focus:ring-2 focus:ring-violet-500 transition-all resize-none",placeholder:"  "})]}),s.jsxs("div",{className:"flex gap-2 mt-auto pt-4",children:[s.jsxs("button",{onClick:p,className:"flex-1 h-11 bg-violet-600 hover:bg-violet-700 text-white rounded-xl font-bold shadow-lg shadow-violet-200 transition-all flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"save"})," "]}),s.jsx("button",{onClick:b,className:"w-12 h-11 bg-white border border-slate-200 hover:bg-slate-50 text-slate-600 rounded-xl flex items-center justify-center transition-all",children:s.jsx("span",{className:"material-symbols-rounded",children:"restart_alt"})})]})]})]})}),s.jsxs("div",{className:"flex-1 flex flex-col min-w-0 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-4 border border-slate-200 shadow-sm flex flex-wrap items-center justify-between gap-3",children:[s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-rounded absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"search"}),s.jsx("input",{value:o,onChange:_=>l(_.target.value),placeholder:"   ...",className:"pl-10 pr-4 h-10 rounded-xl bg-slate-50 border-slate-200 text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-violet-500 transition-all w-64"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[11px] font-bold text-slate-400 uppercase",children:" "}),s.jsx("span",{className:"text-lg font-black text-violet-600",children:t.length}),s.jsx("span",{className:"text-sm font-medium text-slate-500",children:""})]})]}),s.jsx("div",{className:"flex-1 bg-white rounded-[1.5rem] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0 z-10 shadow-sm",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-200",children:[s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-[15%] min-w-[120px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-[10%] min-w-[80px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-[12%] min-w-[100px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-[25%] min-w-[200px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-[30%] min-w-[150px]",children:" "}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center w-[80px]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"py-12 text-center text-slate-400 font-medium",children:"  ."})}):t.map(_=>s.jsxs("tr",{onClick:()=>w(_),className:"hover:bg-violet-50/50 cursor-pointer transition-colors group",children:[s.jsx("td",{className:"py-3 px-4 font-bold text-slate-800 break-keep",children:_.vendor_name}),s.jsx("td",{className:"py-3 px-4 font-medium text-slate-600",children:_.representative||"-"}),s.jsx("td",{className:"py-3 px-4 font-mono text-xs text-slate-500",children:_.mobile_number||"-"}),s.jsx("td",{className:"py-3 px-4 text-slate-600 text-xs break-keep",children:_.address||"-"}),s.jsx("td",{className:"py-3 px-4 text-slate-700 text-sm truncate",children:_.main_items||"-"}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("div",{className:"flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:k=>{k.stopPropagation(),g(_.vendor_id,_.vendor_name)},className:"w-8 h-8 rounded-lg text-slate-400 hover:bg-red-50 hover:text-red-500 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"delete"})})})})]},_.vendor_id))})]})})})]})]})]})};Wi.register(...jb);const gue=`
    @media print {
        @page { size: A4 portrait; margin: 15mm; }
        html, body { 
            background: white !important; 
            color: black !important;
            color-scheme: light !important;
            margin: 0 !important;
            padding: 0 !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
    }
    .print-report-wrapper { 
        font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; 
        padding: 0; 
        color: #000; 
        width: 100%;
        box-sizing: border-box;
    }
    .report-card {
        border: 1px solid #000;
        padding: 30px;
        margin-bottom: 20px;
        position: relative;
    }
    .report-header { 
        text-align: center; 
        margin-bottom: 40px; 
    }
    .report-header h1 { 
        margin: 0; 
        font-size: 32px; 
        font-weight: 900; 
        letter-spacing: 0.2em; 
        text-decoration: underline;
        text-underline-offset: 10px;
    }
    .report-header .info {
        margin-top: 20px;
        display: flex;
        justify-content: space-between;
        font-size: 14px;
        font-weight: bold;
    }
    .stats-grid {
        display: grid;
        grid-template-cols: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 30px;
    }
    .stat-box {
        border: 2px solid #000;
        padding: 15px;
        text-align: center;
    }
    .stat-box .label { font-size: 12px; color: #555; margin-bottom: 5px; font-weight: bold; }
    .stat-box .value { font-size: 20px; font-weight: 900; }
    
    .section-title {
        font-size: 18px;
        font-weight: 900;
        margin: 30px 0 15px 0;
        padding-left: 10px;
        border-left: 5px solid #000;
    }
    
    table { 
        width: 100%; 
        border-collapse: collapse; 
        font-size: 12px; 
        border: 2px solid #000; 
    }
    th, td { 
        border: 1px solid #000; 
        padding: 8px 10px; 
        text-align: center; 
    }
    th { 
        background: #f0f0f0 !important; 
        font-weight: 900; 
    }
    .text-right { text-align: right; }
    .chart-placeholder {
        width: 100%;
        height: 300px;
        border: 1px dashed #ccc;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 20px 0;
        background: #fafafa;
    }
`,vue=()=>{const{showAlert:a}=Na(),[e,t]=H.useState(new Date().getFullYear()),[r,n]=H.useState({revenue:0,cost:0,profit:0,margin:0}),[i,o]=H.useState([]),[l,c]=H.useState([]),[d,u]=H.useState([]),[h,f]=H.useState(!1),p=H.useRef(null),g=H.useRef(null),b=H.useRef(null),w=H.useRef(null),_=new Date().getFullYear(),k=Array.from({length:5},(V,G)=>_-G);H.useEffect(()=>{T()},[e]),H.useEffect(()=>{!h&&i.length>0&&D()},[i,h]),H.useEffect(()=>{!h&&l.length>0&&I()},[l,h]);const T=async()=>{f(!0);try{const[V,G,Q]=await Promise.all([fetch(`/api/finance/analysis/monthly-pl?year=${e}`),fetch(`/api/finance/analysis/cost-breakdown?year=${e}`),fetch(`/api/finance/analysis/vendor-ranking?year=${e}`)]),$=V.ok?await V.json():[],ae=G.ok?await G.json():[],J=Q.ok?await Q.json():[],U=$.reduce((ee,ne)=>ee+ne.revenue,0),F=$.reduce((ee,ne)=>ee+ne.cost,0),W=U-F,K=U>0?(W/U*100).toFixed(1):0;n({revenue:U,cost:F,profit:W,margin:K}),o($||[]),c(ae||[]),u(J||[])}catch(V){console.error("Analysis Load Error:",V),a("","    : "+V)}finally{f(!1)}},D=()=>{if(!p.current)return;const V=p.current.getContext("2d");b.current&&b.current.destroy(),b.current=new Wi(V,{type:"bar",data:{labels:i.map(G=>parseInt(G.month.split("-")[1])+""),datasets:[{label:"",type:"line",data:i.map(G=>G.profit),borderColor:"#10b981",backgroundColor:"#10b981",borderWidth:3,pointBackgroundColor:"#fff",pointBorderColor:"#10b981",pointRadius:4,tension:.3,order:0,yAxisID:"y"},{label:"",data:i.map(G=>G.revenue),backgroundColor:"rgba(59, 130, 246, 0.8)",borderRadius:4,order:1},{label:"",data:i.map(G=>G.cost),backgroundColor:"rgba(239, 68, 68, 0.8)",borderRadius:4,order:2}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{y:{beginAtZero:!0,grid:{borderDash:[4,4],color:"#f1f5f9"},ticks:{callback:G=>G>=1e6?G/1e4+"":G,font:{family:"Pretendard",size:11}}},x:{grid:{display:!1},ticks:{font:{family:"Pretendard",size:11}}}},plugins:{legend:{labels:{usePointStyle:!0,font:{family:"Pretendard",size:12}}},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",padding:10,callbacks:{label:function(G){let Q=G.dataset.label||"";return Q&&(Q+=": "),G.parsed.y!==null&&(Q+=Ve(G.parsed.y)+""),Q}}}}}})},I=()=>{if(!g.current)return;const V=g.current.getContext("2d");w.current&&w.current.destroy();const G=["#3b82f6","#ef4444","#f59e0b","#10b981","#8b5cf6","#ec4899","#6366f1","#14b8a6","#f43f5e","#64748b"];w.current=new Wi(V,{type:"doughnut",data:{labels:l.map(Q=>Q.category),datasets:[{data:l.map(Q=>Q.amount),backgroundColor:G.slice(0,l.length),borderWidth:0,hoverOffset:10}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",callbacks:{label:function(Q){const $=Q.parsed,ae=Q.dataset.data.reduce((U,F)=>U+F,0),J=($/ae*100).toFixed(1);return`${Q.label}: ${Ve($)} (${J}%)`}}}}}})},O=()=>{if(h)return;const V=p.current?p.current.toDataURL("image/png"):null,G=g.current?g.current.toDataURL("image/png"):null,Q=`
            <style>${gue}</style>
            <div class="print-report-wrapper">
                <div class="report-card">
                    <div class="report-header">
                        <h1>   </h1>
                        <div class="info">
                            <span> : <strong>${e}</strong></span>
                            <span> : <strong>${new Date().toLocaleString()}</strong></span>
                        </div>
                    </div>

                    <div class="section-title">   (Annual Summary)</div>
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="label">  (Revenue)</div>
                            <div class="value" style="color: #2563eb;"> ${Ve(r.revenue)}</div>
                        </div>
                        <div class="stat-box">
                            <div class="label">  (Total Cost)</div>
                            <div class="value" style="color: #dc2626;"> ${Ve(r.cost)}</div>
                        </div>
                        <div class="stat-box">
                            <div class="label">  (Net Profit)</div>
                            <div class="value" style="color: #059669;"> ${Ve(r.profit)} (${r.margin}%)</div>
                        </div>
                    </div>

                    <div class="section-title">   (Monthly Trend)</div>
                    ${V?`<img src="${V}" style="width: 100%; height: auto; max-height: 300px; display: block; margin-bottom: 20px;" />`:'<div class="chart-placeholder">  </div>'}

                    <div class="section-title">   </div>
                    <table>
                        <thead>
                            <tr>
                                <th></th>
                                <th>(A)</th>
                                <th>(B)</th>
                                <th>(A-B)</th>
                                <th>(%)</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${i.map($=>`
                                <tr>
                                    <td>${parseInt($.month.split("-")[1])}</td>
                                    <td class="text-right">${Ve($.revenue)}</td>
                                    <td class="text-right">${Ve($.cost)}</td>
                                    <td class="text-right" style="font-weight: bold;">${Ve($.profit)}</td>
                                    <td>${$.revenue>0?($.profit/$.revenue*100).toFixed(1):0}%</td>
                                </tr>
                            `).join("")}
                        </tbody>
                        <tfoot>
                            <tr style="background: #fafafa; font-weight: 900;">
                                <td> </td>
                                <td class="text-right">${Ve(r.revenue)}</td>
                                <td class="text-right">${Ve(r.cost)}</td>
                                <td class="text-right">${Ve(r.profit)}</td>
                                <td>${r.margin}%</td>
                            </tr>
                        </tfoot>
                    </table>

                    <div style="page-break-before: always;"></div>

                    <div class="section-title">   </div>
                    <div style="display: flex; gap: 40px; align-items: flex-start;">
                        <div style="flex: 1;">
                            ${G?`<img src="${G}" style="width: 100%; max-width: 300px; display: block; margin: 0 auto;" />`:'<div class="chart-placeholder">  </div>'}
                        </div>
                        <div style="flex: 1.5;">
                            <table>
                                <thead>
                                    <tr>
                                        <th> </th>
                                        <th></th>
                                        <th>(%)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${l.map($=>`
                                        <tr>
                                            <td style="text-align: left;">${$.category}</td>
                                            <td class="text-right">${Ve($.amount)}</td>
                                            <td class="font-bold">${$.percentage}%</td>
                                        </tr>
                                    `).join("")}
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="section-title">    (TOP 5)</div>
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 60px;"></th>
                                <th style="text-align: left;"></th>
                                <th style="width: 150px;"></th>
                                <th style="width: 80px;"></th>
                            </tr>
                        </thead>
                        <tbody>
                            ${d.map(($,ae)=>`
                                <tr>
                                    <td>${ae+1}</td>
                                    <td style="text-align: left; font-weight: bold;">${$.vendor_name}</td>
                                    <td class="text-right">${Ve($.total_amount)}</td>
                                    <td>${$.purchase_count}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>

                    <div style="margin-top: 50px; text-align: center; border-top: 1px solid #eee; pt-20px; font-size: 11px; color: #666;">
                        <p>  Mycelium Enterprise Intelligence      .</p>
                        <p> Mycelium ERP - All Rights Reserved.</p>
                    </div>
                </div>
            </div>
        `;El(Q)},P=["bg-blue-500","bg-red-500","bg-amber-500","bg-emerald-500","bg-violet-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-rose-500","bg-slate-500"];return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-violet-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-violet-600 uppercase",children:"Financial Intelligence"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["/  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Profit & Loss Analysis"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"info"})," =  - ( + )     "]})]}),s.jsxs("div",{className:"flex flex-col flex-1 gap-6 px-6 lg:px-8 pb-8 min-h-0 overflow-y-auto custom-scrollbar",children:[s.jsxs("div",{className:"flex flex-col xl:flex-row gap-6 shrink-0 h-[420px]",children:[s.jsxs("div",{className:"w-full xl:w-[320px] flex flex-col gap-4",children:[s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-5 border border-slate-200 shadow-sm",children:[s.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-2 block",children:"  (Fiscal Year)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("select",{value:e,onChange:V=>t(Number(V.target.value)),className:"flex-1 h-11 rounded-xl bg-slate-50 border-slate-200 text-slate-700 font-bold focus:ring-2 focus:ring-violet-500 px-3 outline-none transition-all",children:k.map(V=>s.jsxs("option",{value:V,children:[V,""]},V))}),s.jsx("button",{onClick:T,className:"w-11 h-11 rounded-xl bg-violet-600 text-white flex items-center justify-center hover:bg-violet-700 shadow-lg shadow-violet-200 transition-all",children:s.jsx("span",{className:"material-symbols-rounded",children:"refresh"})}),s.jsxs("button",{onClick:()=>O(),className:"h-11 px-5 rounded-xl bg-white border border-slate-200 text-slate-600 font-bold text-xs flex items-center gap-2 hover:bg-slate-50 transition-all shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-violet-500 filled",children:"print"})," "]})]})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-[1.5rem] p-6 border border-slate-200 shadow-sm flex flex-col justify-between relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-full bg-slate-50 -skew-x-12 translate-x-10 transition-transform group-hover:translate-x-4"}),s.jsxs("div",{className:"relative z-10 space-y-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Total Revenue"}),s.jsxs("div",{className:"text-2xl font-black text-blue-600 tracking-tight",children:[Ve(r.revenue),""]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Total Cost"}),s.jsxs("div",{className:"text-2xl font-black text-red-500 tracking-tight",children:[Ve(r.cost),""]})]}),s.jsxs("div",{className:"pt-4 border-t border-dashed border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("div",{className:"text-sm font-bold text-slate-700 uppercase",children:"Net Profit"}),s.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${r.profit>=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:[" ",r.margin,"%"]})]}),s.jsxs("div",{className:`text-3xl font-black tracking-tight ${r.profit>=0?"text-emerald-500":"text-red-500"}`,children:[Ve(r.profit),""]})]})]})]})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-[1.5rem] p-6 border border-slate-200 shadow-sm flex flex-col min-w-0",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-blue-500",children:"bar_chart"}),"   "]}),s.jsxs("div",{className:"flex-1 relative w-full h-full min-h-0",children:[h&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 z-10 backdrop-blur-sm",children:s.jsx("span",{className:"material-symbols-rounded animate-spin text-3xl text-violet-500",children:"sync"})}),s.jsx("canvas",{ref:p})]})]})]}),s.jsxs("div",{className:"flex flex-col xl:flex-row gap-6 shrink-0 h-[380px]",children:[s.jsxs("div",{className:"flex-1 bg-white rounded-[1.5rem] p-6 border border-slate-200 shadow-sm flex flex-col",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-rose-500",children:"pie_chart"}),"   (Cost Breakdown)"]}),s.jsxs("div",{className:"flex flex-1 items-center gap-8 min-h-0",children:[s.jsxs("div",{className:"relative w-[240px] h-[240px] shrink-0",children:[s.jsx("canvas",{ref:g}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s.jsx("span",{className:"text-xs font-bold text-slate-400",children:"EXPENSES"})})]}),s.jsx("div",{className:"flex-1 h-[240px] overflow-y-auto pr-2 custom-scrollbar",children:l.length===0?s.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 text-sm",children:" "}):s.jsx("div",{className:"grid grid-cols-1 gap-2",children:l.map((V,G)=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`w-3 h-3 rounded-full ${P[G%P.length]}`}),s.jsx("span",{className:"text-sm font-bold text-slate-600",children:V.category})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-black text-slate-800",children:[V.percentage,"%"]}),s.jsxs("div",{className:"text-[10px] text-slate-400",children:[Ve(V.amount),""]})]})]},G))})})]})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-[1.5rem] p-6 border border-slate-200 shadow-sm flex flex-col min-w-0",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-amber-500",children:"trophy"}),"   (Top 5)"]}),s.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:s.jsx("div",{className:"overflow-y-auto flex-1 custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0 z-10",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-200",children:[s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center w-[10%] min-w-[60px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-[40%] min-w-[120px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-right w-[30%] min-w-[100px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center w-[20%] min-w-[80px]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:d.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"4",className:"py-12 text-center text-slate-400 font-medium",children:" ."})}):d.map((V,G)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 rounded-full text-xs font-bold ${G<3?"bg-amber-100 text-amber-700":"text-slate-400"}`,children:G+1})}),s.jsx("td",{className:"py-3 px-4 font-bold text-slate-700",children:V.vendor_name}),s.jsxs("td",{className:"py-3 px-4 text-right font-black text-slate-800",children:[Ve(V.total_amount),""]}),s.jsxs("td",{className:"py-3 px-4 text-center text-slate-500 text-xs",children:[V.purchase_count,""]})]},G))})]})})})]})]})]})]})},bue=`
    @media print {
        @page { size: A4 portrait; margin: 15mm; }
        html, body { 
            background: white !important; 
            color: black !important;
            color-scheme: light !important;
            margin: 0 !important;
            padding: 0 !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
    }
    .print-report-wrapper { 
        font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; 
        padding: 0; 
        color: #000; 
        width: 100%;
    }
    .report-card {
        border: 1px solid #000;
        padding: 30px;
        position: relative;
    }
    .report-header { text-align: center; margin-bottom: 40px; }
    .report-header h1 { 
        margin: 0; 
        font-size: 28px; 
        font-weight: 900; 
        letter-spacing: 0.1em; 
        text-decoration: underline; 
        text-underline-offset: 8px;
    }
    .report-header .meta {
        margin-top: 15px;
        display: flex;
        justify-content: space-between;
        font-size: 13px;
        font-weight: bold;
    }
    .section-title {
        font-size: 18px;
        font-weight: 900;
        margin: 30px 0 15px 0;
        padding-left: 10px;
        border-left: 5px solid #000;
    }
    .summary-box {
        border: 2px solid #000;
        padding: 20px;
        background: #fdfdfd !important;
        margin-bottom: 20px;
    }
    .summary-grid {
        display: grid;
        grid-template-cols: 1fr 1fr;
        gap: 15px;
    }
    .summary-item {
        display: flex;
        justify-content: space-between;
        border-bottom: 1px dashed #ccc;
        padding-bottom: 5px;
    }
    .summary-item .label { font-weight: bold; color: #555; }
    .summary-item .value { font-weight: 900; }
    
    table { width: 100%; border-collapse: collapse; font-size: 12px; border: 2px solid #000; }
    th, td { border: 1px solid #000; padding: 8px; text-align: center; }
    th { background: #f0f0f0 !important; font-weight: 900; }
    .text-right { text-align: right; }
    .advice-content {
        padding: 15px;
        border: 1px solid #eee;
        background: #fafafa;
        font-size: 13px;
        line-height: 1.6;
        white-space: pre-wrap;
    }
`;Wi.register(...jb);const yue=()=>{const{showAlert:a}=Na(),[e,t]=H.useState("advice"),[r,n]=H.useState(!0),[i,o]=H.useState("  ..."),[l,c]=H.useState({trend:[],topProducts:[]}),[d,u]=H.useState(!1),[h,f]=H.useState(!1),[p,g]=H.useState(""),b=(T,D="  ...")=>{f(T),g(D)},w=T=>{e!==T&&(u(!0),setTimeout(()=>{t(T),setTimeout(()=>u(!1),300)},50))},_=[{id:"advice",label:"AI  ",icon:"psychology",color:"text-indigo-500"},{id:"summary",label:" ",icon:"dashboard",color:"text-slate-600"},{id:"trend",label:" ",icon:"trending_up",color:"text-blue-500"},{id:"product",label:"/",icon:"inventory_2",color:"text-amber-500"},{id:"forecast",label:"AI  ",icon:"auto_awesome",color:"text-violet-600"},{id:"profit",label:" ",icon:"account_balance_wallet",color:"text-emerald-500"}];H.useEffect(()=>{k()},[]);const k=async()=>{try{const[T,D]=await Promise.all([pt("get_ten_year_sales_stats"),pt("get_top3_products_by_qty")]);c({trend:T||[],topProducts:D||[]})}catch(T){console.error("Shared data load failed:",T)}finally{n(!1)}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative",children:[r&&s.jsx("div",{className:"absolute inset-0 z-[100] bg-white/60 backdrop-blur-sm flex flex-col items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center animate-in zoom-in-95 duration-500",children:[s.jsx("span",{className:"material-symbols-rounded text-6xl text-indigo-500 animate-spin",children:"cyclone"}),s.jsx("div",{className:"mt-6 text-xl font-black text-slate-700",children:i}),s.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"    ."})]})}),h&&s.jsx("div",{className:"absolute inset-0 z-[90] bg-slate-900/5 backdrop-blur-[1px] flex flex-col items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-4 bg-white/90 backdrop-blur-md p-10 rounded-[2.5rem] shadow-2xl shadow-indigo-200/40 border border-white/50 animate-in zoom-in-95 duration-300",children:[s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-rounded text-7xl text-indigo-600 animate-spin",children:"progress_activity"}),s.jsx("span",{className:"material-symbols-rounded text-3xl text-indigo-300 absolute inset-0 flex items-center justify-center",children:"analytics"})]}),s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("span",{className:"text-xl font-black text-slate-800",children:p}),s.jsxs("span",{className:"text-sm text-slate-500 mt-2",children:["     .",s.jsx("br",{}),"     ."]})]})]})}),d&&s.jsx("div",{className:"absolute inset-0 z-[80] bg-white/40 backdrop-blur-[1px] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white/90 backdrop-blur-sm px-6 py-4 rounded-2xl shadow-xl flex items-center gap-4 border border-slate-100",children:[s.jsx("span",{className:"material-symbols-rounded text-2xl animate-spin text-indigo-600",children:"sync"}),s.jsx("span",{className:"text-base font-bold text-slate-700",children:"  ..."})]})}),s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Intelligent Report"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-700 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["    ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Sales Intelligence"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"support_agent"}),"   AI      ."]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>window.location.reload(),className:"h-10 px-4 rounded-xl bg-white border border-slate-200 text-slate-600 font-bold hover:bg-slate-50 transition-all flex items-center gap-2 text-sm shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"})," "]}),s.jsxs("button",{onClick:()=>{const T=l.trend?.[l.trend.length-1]||{},D=l.trend?.[l.trend.length-2]||{},I=D.total_amount>0?((T.total_amount-D.total_amount)/D.total_amount*100).toFixed(1):"0",O=`
                                    <style>${bue}</style>
                                    <div class="print-report-wrapper">
                                        <div class="report-card">
                                            <div class="report-header">
                                                <h1>   </h1>
                                                <div class="meta">
                                                    <span>  : <strong> 10</strong></span>
                                                    <span>: <strong>${new Date().toLocaleString()}</strong></span>
                                                </div>
                                            </div>

                                            <div class="section-title">     (Key Metrics)</div>
                                            <div class="summary-box">
                                                <div class="summary-grid">
                                                    <div class="summary-item">
                                                        <span class="label">(FY ${new Date().getFullYear()})  </span>
                                                        <span class="value">${Ve(T.total_amount||0)}</span>
                                                    </div>
                                                    <div class="summary-item">
                                                        <span class="label">  </span>
                                                        <span class="value" style="color: ${Number(I)>=0?"#d32f2f":"#1976d2"}">${I}%</span>
                                                    </div>
                                                    <div class="summary-item">
                                                        <span class="label">  </span>
                                                        <span class="value">${(T.total_quantity||0).toLocaleString()}</span>
                                                    </div>
                                                    <div class="summary-item">
                                                        <span class="label">()</span>
                                                        <span class="value">${Ve(Math.round((T.total_amount||0)/(T.record_count||1)))}</span>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="section-title">    (10-Year Trend)</div>
                                            <table>
                                                <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th></th>
                                                        <th></th>
                                                        <th> ()</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    ${[...l.trend].reverse().map((P,V,G)=>{const Q=G[V+1];let $="-";return Q&&Q.total_amount>0&&($=((P.total_amount-Q.total_amount)/Q.total_amount*100).toFixed(1)+"%"),`
                                                            <tr>
                                                                <td>${P.year}</td>
                                                                <td>${P.record_count.toLocaleString()}</td>
                                                                <td>${P.total_quantity.toLocaleString()}</td>
                                                                <td class="text-right" style="font-weight: bold;">${Ve(P.total_amount)}</td>
                                                                <td style="color: ${$.startsWith("-")?"#1976d2":"#d32f2f"}; font-weight: bold;">${$}</td>
                                                            </tr>
                                                        `}).join("")}
                                                </tbody>
                                            </table>

                                            <div class="section-title">   (Top Products)</div>
                                            <table>
                                                <thead>
                                                    <tr>
                                                        <th style="width: 80px;"></th>
                                                        <th style="text-align: left;"></th>
                                                        <th> </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    ${l.topProducts.map((P,V)=>`
                                                        <tr>
                                                            <td> ${V+1}</td>
                                                            <td style="text-align: left; font-weight: bold;">${P.product_name}</td>
                                                            <td class="text-right">${P.total_quantity.toLocaleString()}</td>
                                                        </tr>
                                                    `).join("")}
                                                </tbody>
                                            </table>

                                            <div style="margin-top: 40px; text-align: center; border-top: 1px solid #eee; padding-top: 20px; font-size: 11px; color: #999;">
                                                  Mycelium ERP Intelligence       .
                                            </div>
                                        </div>
                                    </div>
                                `;El(O)},className:"h-10 px-4 rounded-xl bg-indigo-600 text-white font-bold hover:bg-indigo-700 transition-all flex items-center gap-2 text-sm shadow-lg shadow-indigo-200",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"print"}),"  "]})]})]}),s.jsx("div",{className:"flex items-center gap-1 mt-6 border-b border-slate-200 overflow-x-auto custom-scrollbar",children:_.map(T=>s.jsxs("button",{onClick:()=>w(T.id),className:`px-4 py-3 text-sm font-bold flex items-center gap-2 border-b-2 transition-all whitespace-nowrap
                                ${e===T.id?"border-indigo-600 text-slate-800 bg-indigo-50/50 rounded-t-lg":"border-transparent text-slate-400 hover:text-slate-600 hover:bg-slate-50/50 rounded-t-lg"}
                            `,children:[s.jsx("span",{className:`material-symbols-rounded text-lg ${e===T.id?T.color:"text-slate-400"}`,children:T.icon}),T.label]},T.id))})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 min-h-0 custom-scrollbar",children:s.jsxs("div",{className:d||h||r?"opacity-70 blur-[0.5px] pointer-events-none transition-all duration-300":"opacity-100 transition-all duration-300",children:[s.jsx("div",{style:{display:e==="advice"?"block":"none"},children:s.jsx(wue,{sharedData:l,isVisible:e==="advice",showAlert:a,toggleProcessing:b})}),s.jsx("div",{style:{display:e==="summary"?"block":"none"},children:s.jsx(_ue,{sharedData:l,isVisible:e==="summary"})}),s.jsx("div",{style:{display:e==="trend"?"block":"none"},children:s.jsx(Nue,{sharedData:l,isVisible:e==="trend"})}),s.jsx("div",{style:{display:e==="product"?"block":"none"},children:s.jsx(jue,{isVisible:e==="product",toggleProcessing:b})}),s.jsx("div",{style:{display:e==="forecast"?"block":"none"},children:s.jsx(Sue,{isVisible:e==="forecast",showAlert:a,toggleProcessing:b})}),s.jsx("div",{style:{display:e==="profit"?"block":"none"},children:s.jsx(kue,{isVisible:e==="profit",toggleProcessing:b})})]})})]})},wue=({sharedData:a,isVisible:e,showAlert:t,toggleProcessing:r})=>{const[n,i]=H.useState({yearTotal:0,topItem:"-"}),[o,l]=H.useState(null),[c,d]=H.useState("marketing"),[u,h]=H.useState(!1);H.useEffect(()=>{if(a?.trend&&a?.topProducts){const p=new Date().getFullYear(),g=a.trend.find(b=>Number(b.year)===p)||{total_amount:0};i({yearTotal:g.total_amount,topItem:a.topProducts?.[0]?.product_name||"-"})}},[a]);const f=async()=>{h(!0),r(!0,"AI     ..."),l(null);try{const p={marketing:"  ",stock:"   ",loyal:"  "},[g,b]=await Promise.all([pt("get_ten_year_sales_stats"),pt("get_top3_products_by_qty")]),w=g.find(T=>Number(T.year)===new Date().getFullYear())||{total_amount:0},_=` 'Mycelium'    ''. 
  [${p[c]}]      .

[]
-  : ${Ve(w.total_amount)}
-  : ${b.map(T=>T.product_name).join(", ")}

[]
1.   (  )
2. '${p[c]}'     3  
3.   ,    (, )`,k=await _l(t,"call_gemini_ai",{prompt:_});l(k.result||k)}catch(p){console.error(p)}finally{h(!1),r(!1)}};return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-2xl p-8 border-l-[6px] border-indigo-500 shadow-sm flex flex-col md:flex-row gap-6",children:[s.jsx("div",{className:"shrink-0 flex flex-col items-center gap-3",children:s.jsx("div",{className:"w-20 h-20 rounded-full bg-indigo-50 border-4 border-indigo-100 overflow-hidden",children:s.jsx("img",{src:"https://api.dicebear.com/7.x/bottts/svg?seed=jenny",alt:"Jenny AI",className:"w-full h-full"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:"   "}),s.jsx("p",{className:"text-slate-500 mb-6",children:"AI         ."}),!o&&!u&&s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100 flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-indigo-500 shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded",children:"payments"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Revenue"}),s.jsxs("div",{className:"text-lg font-black text-slate-700",children:[Ve(n.yearTotal),""]})]})]}),s.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100 flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-amber-500 shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded",children:"star"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase",children:"Best Seller"}),s.jsx("div",{className:"text-lg font-black text-slate-700",children:n.topItem})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-bold text-slate-500 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"list_alt"}),"   "]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[{id:"marketing",title:"  ",desc:"  "},{id:"stock",title:"   ",desc:"  "},{id:"loyal",title:"  ",desc:"  "}].map(p=>s.jsxs("div",{onClick:()=>d(p.id),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${c===p.id?"border-indigo-500 bg-indigo-50":"border-slate-100 bg-white hover:border-slate-200"}`,children:[s.jsx("div",{className:`font-bold mb-1 ${c===p.id?"text-indigo-700":"text-slate-700"}`,children:p.title}),s.jsx("div",{className:"text-xs text-slate-400",children:p.desc})]},p.id))})]}),s.jsxs("button",{onClick:f,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200 flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"auto_awesome"}),"     "]})]}),o&&!u&&s.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200 animate-in fade-in zoom-in-95 duration-500",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-slate-200",children:[s.jsxs("h3",{className:"font-bold text-lg text-slate-700 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"verified"}),"   "]}),s.jsx("button",{onClick:()=>l(null),className:"text-sm text-slate-400 hover:text-slate-600",children:" "})]}),s.jsx("div",{className:"prose prose-indigo prose-sm max-w-none text-slate-600 leading-relaxed whitespace-pre-line",children:o})]})]})]})})},_ue=({sharedData:a,isVisible:e})=>{const[t,r]=H.useState({yearTotal:0,yearGrowth:0,monthTotal:0,monthGrowth:0,topProduct:"-",topQty:0,forecast:0}),n=H.useRef(null),i=H.useRef(null);H.useEffect(()=>{e&&i.current&&i.current.resize()},[e]),H.useEffect(()=>{a?.trend&&o(a.trend,a.topProducts)},[a]);const o=(c,d)=>{const u=new Date().getFullYear(),h=c.find(g=>Number(g.year)===u)||{total_amount:0},f=c.find(g=>Number(g.year)===u-1)||{total_amount:0},p=f.total_amount>0?((h.total_amount-f.total_amount)/f.total_amount*100).toFixed(1):0;r({yearTotal:h.total_amount,yearGrowth:p,monthTotal:Math.round(h.total_amount/12),monthGrowth:0,topProduct:d?.[0]?.product_name||"-",topQty:d?.[0]?.total_quantity||0,forecast:Math.round(h.total_amount/12*1.05)}),l(c.slice(-5))},l=c=>{if(!n.current)return;i.current&&i.current.destroy();const d=n.current.getContext("2d");i.current=new Wi(d,{type:"line",data:{labels:c.map(u=>u.year+""),datasets:[{label:" ",data:c.map(u=>u.total_amount),borderColor:"#6366f1",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{display:!1},x:{grid:{display:!1}}}}})};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"  ",value:Ve(t.yearTotal)+"",sub:`${t.yearGrowth>0?"+":""}${t.yearGrowth}%  `,color:t.yearGrowth>=0?"text-red-500":"text-blue-500"},{label:"  ",value:Ve(t.monthTotal)+"",sub:"  ",color:"text-slate-500"},{label:"  ",value:t.topProduct,sub:`${t.topQty} `,color:"text-emerald-600"},{label:"AI   ",value:Ve(t.forecast)+"",sub:"  ",color:"text-violet-600",bg:"bg-violet-50 border-violet-100"}].map((c,d)=>s.jsxs("div",{className:`p-5 rounded-2xl border ${c.bg||"bg-white border-slate-200"} shadow-sm`,children:[s.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:c.label}),s.jsx("div",{className:`text-2xl font-black ${c.bg?"text-violet-700":"text-slate-800"}`,children:c.value}),s.jsx("div",{className:`text-xs font-bold mt-1 ${c.color}`,children:c.sub})]},d))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[400px]",children:[s.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl border border-slate-200 p-6 flex flex-col",children:[s.jsx("h3",{className:"font-bold text-lg text-slate-700 mb-4",children:"   "}),s.jsx("div",{className:"flex-1 min-h-0 relative",children:s.jsx("canvas",{ref:n})})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 flex flex-col",children:[s.jsxs("h3",{className:"font-bold text-lg text-slate-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"info"}),"  "]}),s.jsxs("div",{className:"flex-1 text-sm text-slate-600 leading-relaxed bg-slate-50 rounded-xl p-4",children:[s.jsxs("p",{className:"mb-3",children:["     ",s.jsxs("strong",{className:t.yearGrowth>=0?"text-red-500":"text-blue-500",children:[t.yearGrowth,"%"]})," ",t.yearGrowth>=0?"":"","."]}),s.jsxs("p",{className:"mb-3",children:[" ",s.jsx("strong",{className:"text-slate-800",children:t.topProduct}),"     ."]}),s.jsx("p",{children:"      5~10%   ."})]})]})]})]})},Nue=({sharedData:a,isVisible:e})=>{const[t,r]=H.useState([]),n=H.useRef(null),i=H.useRef(null);H.useEffect(()=>{e&&i.current&&i.current.resize()},[e]),H.useEffect(()=>{if(a?.trend){const l=[...a.trend];r(l.reverse()),o(l),o(l.reverse())}},[a]);const o=l=>{if(!n.current)return;i.current&&i.current.destroy();const c=n.current.getContext("2d");i.current=new Wi(c,{type:"bar",data:{labels:l.map(d=>d.year+""),datasets:[{label:"",data:l.map(d=>d.total_amount),backgroundColor:"rgba(99, 102, 241, 0.6)",order:1},{label:"",data:l.map(d=>d.total_quantity),type:"line",borderColor:"#fb7185",borderWidth:2,yAxisID:"y1",order:0}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0},y1:{position:"right",beginAtZero:!0,grid:{drawOnChartArea:!1}}}}})};return s.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 h-[350px] shrink-0 flex flex-col",children:[s.jsx("h3",{className:"font-bold text-lg text-slate-700 mb-4",children:"   (10)"}),s.jsx("div",{className:"flex-1 min-h-0 relative",children:s.jsx("canvas",{ref:n})})]}),s.jsx("div",{className:"flex-1 bg-white rounded-2xl border border-slate-200 overflow-hidden flex flex-col min-h-0",children:s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0 z-10",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-200",children:[s.jsx("th",{className:"py-3 px-4 font-bold text-center w-[15%]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold text-right w-[20%]",children:" "}),s.jsx("th",{className:"py-3 px-4 font-bold text-right w-[20%]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold text-right w-[25%]",children:" "}),s.jsx("th",{className:"py-3 px-4 font-bold text-right w-[20%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"p-8 text-center text-slate-400",children:" "})}):t.map((l,c)=>{const d=t[c+1];let u=0;return d&&d.total_amount>0&&(u=((l.total_amount-d.total_amount)/d.total_amount*100).toFixed(1)),s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsxs("td",{className:"py-3 px-4 text-center font-bold text-slate-900",children:[l.year,""]}),s.jsxs("td",{className:"py-3 px-4 text-right text-black",children:[l.record_count.toLocaleString(),""]}),s.jsxs("td",{className:"py-3 px-4 text-right text-black",children:[l.total_quantity.toLocaleString(),""]}),s.jsx("td",{className:"py-3 px-4 text-right font-black text-slate-900",children:Ve(l.total_amount)}),s.jsxs("td",{className:`py-3 px-4 text-right font-bold ${u>=0?"text-red-600":"text-blue-600"}`,children:[u>0&&"+",u,"%"]})]},l.year)})})]})})})]})},jue=({isVisible:a,toggleProcessing:e})=>{const[t,r]=H.useState([]),[n,i]=H.useState([]),[o,l]=H.useState(!1),c=H.useRef(null),d=H.useRef(null),u=H.useRef(null),h=H.useRef(null);H.useEffect(()=>{a&&(u.current&&u.current.resize(),h.current&&h.current.resize(),o||f())},[a]);const f=async()=>{e(!0,"      ...");try{const g=new Date().getFullYear(),[b,w]=await Promise.all([pt("get_product_sales_stats",{year:g.toString()}),pt("get_sales_by_region_analysis",{year:g})]);r(b||[]),i(w||[]),p(b,w),l(!0)}catch(g){console.error(g)}finally{e(!1)}},p=(g,b)=>{if(u.current&&u.current.destroy(),h.current&&h.current.destroy(),c.current&&g.length>0){const w=[...g].sort((_,k)=>k.total_amount-_.total_amount).slice(0,5);u.current=new Wi(c.current.getContext("2d"),{type:"doughnut",data:{labels:w.map(_=>_.product_name),datasets:[{data:w.map(_=>_.total_amount),backgroundColor:["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:10},plugins:{legend:{position:"bottom",labels:{boxWidth:10,font:{size:10,weight:"bold"},padding:15}}}}})}if(d.current&&b.length>0){const w=b.slice(0,8);h.current=new Wi(d.current.getContext("2d"),{type:"bar",data:{labels:w.map(_=>_.region),datasets:[{label:" ",data:w.map(_=>_.total_amount),backgroundColor:"#10b981",borderRadius:4}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,layout:{padding:{right:20,top:10,bottom:20}},plugins:{legend:{display:!1}},scales:{x:{ticks:{font:{size:10},callback:_=>_>=1e6?(_/1e6).toFixed(1)+"":_>=1e4?(_/1e4).toLocaleString()+"":_.toLocaleString()}},y:{ticks:{font:{weight:"bold",size:11}}}}}})}};return s.jsxs("div",{className:"flex flex-col gap-6 h-full relative",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[400px] shrink-0",children:[s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 flex flex-col shadow-sm",children:[s.jsxs("h3",{className:"font-bold text-lg text-slate-700 mb-2 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"}),"   (Top 5)"]}),s.jsx("div",{className:"flex-1 relative min-h-0",children:s.jsx("canvas",{ref:c})})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 flex flex-col shadow-sm",children:[s.jsxs("h3",{className:"font-bold text-lg text-slate-700 mb-2 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),"  "]}),s.jsx("div",{className:"flex-1 relative min-h-0",children:s.jsx("canvas",{ref:d})})]})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-2xl border border-slate-200 overflow-hidden flex flex-col min-h-0 shadow-sm",children:[s.jsxs("div",{className:"px-6 py-4 bg-slate-50 border-b border-slate-200 font-bold text-slate-700 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"analytics"}),"   ( )"]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"flex-1 flex flex-col border-r border-slate-100",children:[s.jsx("div",{className:"p-3 bg-slate-50/50 text-xs font-bold text-slate-500 uppercase text-center border-b border-slate-100 italic",children:"By Product"}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"sticky top-0 bg-white shadow-sm",children:s.jsxs("tr",{className:"text-slate-500",children:[s.jsx("th",{className:"py-2 text-left px-4",children:""}),s.jsx("th",{className:"py-2 text-right px-4",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:t.map(g=>s.jsxs("tr",{className:"hover:bg-indigo-50/30 transition-colors",children:[s.jsx("td",{className:"py-2 px-4 text-slate-700 font-bold",children:g.product_name}),s.jsx("td",{className:"py-2 px-4 text-right font-mono text-slate-900 font-bold",children:Ve(g.total_amount)})]},g.product_id))})]})})]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"p-3 bg-slate-50/50 text-xs font-bold text-slate-500 uppercase text-center border-b border-slate-100 italic",children:"By Region"}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"sticky top-0 bg-white shadow-sm",children:s.jsxs("tr",{className:"text-slate-500",children:[s.jsx("th",{className:"py-2 text-left px-4",children:""}),s.jsx("th",{className:"py-2 text-right px-4",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:n.map((g,b)=>s.jsxs("tr",{className:"hover:bg-emerald-50/30 transition-colors",children:[s.jsx("td",{className:"py-2 px-4 text-slate-700 font-bold",children:g.region}),s.jsx("td",{className:"py-2 px-4 text-right font-mono text-slate-900 font-bold",children:Ve(g.total_amount)})]},b))})]})})]})]})]})]})},Sue=({isVisible:a,showAlert:e,toggleProcessing:t})=>{const[r,n]=H.useState([]),[i,o]=H.useState("ALL"),[l,c]=H.useState("90"),[d,u]=H.useState(null),[h,f]=H.useState(!1),p=H.useRef(null),g=H.useRef(null);H.useEffect(()=>{a&&g.current&&g.current.resize(),a&&!h&&b()},[a]);const b=async()=>{try{const k=await pt("get_product_list");n(k||[]),f(!0)}catch{}},w=async()=>{t(!0,"AI       ...");try{const k=await _l(e,"get_ai_demand_forecast",{productName:i==="ALL"?null:i,forecastDays:Number(l)});u(k),_(k)}catch(k){console.error(k)}finally{t(!1)}},_=k=>{if(!p.current)return;g.current&&g.current.destroy();const T=k.history,D=k.forecast;g.current=new Wi(p.current.getContext("2d"),{type:"line",data:{labels:[...T.map(I=>I.date),...D.map(I=>I.date)],datasets:[{label:" ",data:T.map(I=>I.count),borderColor:"#94a3b8",fill:!1,tension:.3},{label:" ",data:[...Array(T.length-1).fill(null),T[T.length-1].count,...D.map(I=>I.count)],borderColor:"#6366f1",borderDash:[5,5],fill:!0,backgroundColor:"rgba(99,102,241,0.1)",tension:.3}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}}}})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-slate-200 shadow-sm flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-indigo-500 font-bold px-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"analytics"}),"  "]}),s.jsxs("select",{value:i,onChange:k=>o(k.target.value),className:"h-10 rounded-lg border-slate-200 bg-slate-50 px-3 text-sm font-bold min-w-[200px]",children:[s.jsx("option",{value:"ALL",children:"  "}),r.map(k=>s.jsx("option",{value:k.product_name,children:k.product_name},k.product_id))]}),s.jsxs("select",{value:l,onChange:k=>c(k.target.value),className:"h-10 rounded-lg border-slate-200 bg-slate-50 px-3 text-sm font-bold w-[140px]",children:[s.jsx("option",{value:"30",children:"30 ()"}),s.jsx("option",{value:"90",children:"90 ()"}),s.jsx("option",{value:"180",children:"180 ()"})]}),s.jsxs("button",{onClick:w,className:"ml-auto h-10 px-6 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-bold shadow-md shadow-indigo-200 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"psychology"})," AI  "]})]}),d?s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2 bg-white rounded-2xl border border-slate-200 p-6 h-[400px] flex flex-col",children:s.jsx("canvas",{ref:p})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-indigo-600 text-white rounded-2xl p-6 shadow-lg shadow-indigo-200",children:[s.jsx("div",{className:"opacity-80 text-sm mb-1",children:"  "}),s.jsxs("div",{className:"text-3xl font-black",children:[Ve(d.expected_total_revenue),""]}),s.jsxs("div",{className:"mt-2 text-xs opacity-70 bg-indigo-700 inline-block px-2 py-1 rounded",children:[" : ",d.growth_rate,"%"]})]}),s.jsxs("div",{className:"bg-amber-50 text-amber-900 rounded-2xl p-6 border border-amber-100",children:[s.jsxs("h4",{className:"font-bold flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"inventory"}),"   "]}),s.jsx("p",{className:"text-sm leading-relaxed",children:d.stock_tip})]})]})]}):s.jsxs("div",{className:"h-[400px] border-2 border-dashed border-slate-200 rounded-2xl flex flex-col items-center justify-center text-slate-400 relative",children:[s.jsx("span",{className:"material-symbols-rounded text-6xl opacity-30 mb-4",children:"insights"}),s.jsx("p",{children:"  'AI  '  ."})]})]})},kue=({isVisible:a,toggleProcessing:e})=>{const[t,r]=H.useState([]),[n,i]=H.useState(!1);H.useEffect(()=>{a&&!n&&o()},[a]);const o=async()=>{e(!0,"       ...");try{const h=await pt("get_profit_margin_analysis",{year:new Date().getFullYear()});r(h||[]),i(!0)}catch(h){console.error(h)}finally{e(!1)}},l=t.reduce((h,f)=>h+f.total_revenue,0),c=t.reduce((h,f)=>h+f.total_cost,0),d=t.reduce((h,f)=>h+f.net_profit,0),u=l?(d/l*100).toFixed(1):0;return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-4 gap-4",children:[{l:" ",v:Ve(d)+"",c:"text-emerald-600"},{l:" ",v:u+"%",c:"text-amber-500"},{l:"  ",v:t.length?t.sort((h,f)=>f.net_profit-h.net_profit)[0].product_name:"-",c:"text-blue-500"},{l:" ",v:Ve(c)+"",c:"text-indigo-500"}].map((h,f)=>s.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[s.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:h.l}),s.jsx("div",{className:`text-2xl font-black ${h.c}`,children:h.v})]},f))}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden flex flex-col h-[500px]",children:[s.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[s.jsx("h3",{className:"font-bold text-slate-700",children:"    "}),s.jsx("div",{className:"text-xs text-slate-500 px-3 py-1 bg-white rounded-full border border-slate-200",children:"*   "})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-white shadow-sm sticky top-0 z-10",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-100",children:[s.jsx("th",{className:"py-3 px-4 text-left w-[25%]",children:""}),s.jsx("th",{className:"py-3 px-4 text-right w-[20%]",children:""}),s.jsx("th",{className:"py-3 px-4 text-right w-[15%]",children:" "}),s.jsx("th",{className:"py-3 px-4 text-right w-[15%] text-emerald-600 bg-emerald-50/50",children:""}),s.jsx("th",{className:"py-3 px-4 text-center w-[10%]",children:""}),s.jsx("th",{className:"py-3 px-4 text-right w-[15%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"p-8 text-center text-slate-400",children:" "})}):t.map((h,f)=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"py-3 px-4 font-bold text-slate-700",children:h.product_name}),s.jsx("td",{className:"py-3 px-4 text-right text-slate-600",children:Ve(h.total_revenue)}),s.jsx("td",{className:"py-3 px-4 text-right text-slate-400",children:Ve(h.total_cost)}),s.jsx("td",{className:"py-3 px-4 text-right font-black text-emerald-600 bg-emerald-50/30",children:Ve(h.net_profit)}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsxs("span",{className:`font-bold ${h.margin_rate>=30?"text-emerald-500":h.margin_rate<15?"text-red-500":"text-amber-500"}`,children:[h.margin_rate.toFixed(1),"%"]})}),s.jsx("td",{className:"py-3 px-4 text-right text-slate-500",children:h.total_quantity.toLocaleString()})]},f))})]})})]})]})};Wi.register(...jb);const Cue=()=>{const{showAlert:a}=Na(),[e,t]=H.useState("rfm"),[r,n]=H.useState(!0),[i,o]=H.useState("   ..."),[l,c]=H.useState(!1),[d,u]=H.useState(""),h=(ee,ne="  ...")=>{c(ee),u(ne)},[f,p]=H.useState([]),[g,b]=H.useState([]),[w,_]=H.useState(!1),[k,T]=H.useState({isOpen:!1,targetCustomers:[],mode:"sms"}),[D,I]=H.useState({isOpen:!1,targetCustomers:[]}),[O,P]=H.useState(null),V=H.useCallback(ee=>P(ee),[]),G=H.useCallback(()=>P(null),[]),Q=[{id:"rfm",label:"(RFM) ",icon:"group_work",color:"text-indigo-500"},{id:"repurchase",label:"AI  ",icon:"notifications_active",color:"text-rose-500"},{id:"behavior",label:"  ",icon:"history_edu",color:"text-teal-500"},{id:"membership",label:"  ",icon:"loyalty",color:"text-amber-500"}],$=H.useCallback(ee=>{e!==ee&&(_(!0),setTimeout(()=>{t(ee),setTimeout(()=>_(!1),200)},50))},[e]),ae=H.useCallback(async()=>{try{const ee=new Date().getFullYear(),[ne,re]=await Promise.all([Pa("get_rfm_analysis",{}),Pa("get_membership_sales_analysis",{year:ee})]);p(ne||[]),b(re||[])}catch(ee){console.error("Shared data load failed:",ee)}finally{n(!1)}},[]),J=H.useCallback((ee,ne="sms")=>{const re=Array.isArray(ee)?ee:[ee];T({isOpen:!0,targetCustomers:re,mode:ne})},[]),U=H.useCallback(()=>{T(ee=>({...ee,isOpen:!1}))},[]),F=H.useCallback(ee=>{I({isOpen:!0,targetCustomers:Array.isArray(ee)?ee:[ee]})},[]),W=H.useCallback(()=>{I(ee=>({...ee,isOpen:!1}))},[]);H.useEffect(()=>{ae()},[ae]);const K=H.useCallback(async()=>{n(!0),await ae()},[ae]);return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative",children:[r&&s.jsx("div",{className:"absolute inset-0 z-[100] bg-white/60 backdrop-blur-sm flex flex-col items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center animate-in zoom-in-95 duration-500 text-center px-6",children:[s.jsx("span",{className:"material-symbols-rounded text-6xl text-rose-500 animate-spin",children:"cyclone"}),s.jsx("div",{className:"mt-6 text-xl font-black text-slate-700",children:i}),s.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"      ."})]})}),l&&s.jsx("div",{className:"absolute inset-0 z-[90] bg-slate-900/5 backdrop-blur-[1px] flex flex-col items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-4 bg-white/90 backdrop-blur-md p-10 rounded-[2.5rem] shadow-2xl shadow-rose-200/40 border border-white/50 animate-in zoom-in-95 duration-300",children:[s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-rounded text-7xl text-rose-500 animate-spin",children:"progress_activity"}),s.jsx("span",{className:"material-symbols-rounded text-3xl text-rose-300 absolute inset-0 flex items-center justify-center",children:"psychology"})]}),s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("span",{className:"text-xl font-black text-slate-800",children:d}),s.jsxs("span",{className:"text-sm text-slate-500 mt-2",children:["      .",s.jsx("br",{}),"    ."]})]})]})}),w&&s.jsx("div",{className:"absolute inset-0 z-[80] bg-white/40 backdrop-blur-[1px] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white/90 backdrop-blur-sm px-6 py-4 rounded-2xl shadow-xl flex items-center gap-4 border border-slate-100",children:[s.jsx("span",{className:"material-symbols-rounded text-2xl animate-spin text-rose-500",children:"sync"}),s.jsx("span",{className:"text-base font-bold text-slate-700",children:"   ..."})]})}),s.jsxs("div",{className:r||l||w?"opacity-70 blur-[0.5px] pointer-events-none transition-all duration-300 flex flex-col h-full":"flex flex-col h-full transition-all duration-300",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-rose-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-rose-500 uppercase",children:"AI Customer Center"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-700 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["AI    ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Customer Intelligence"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"support_agent"}),"AI        ."]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{onClick:()=>window.location.reload(),className:"h-10 px-4 rounded-xl bg-white border border-slate-200 text-slate-600 font-bold hover:bg-slate-50 transition-all flex items-center gap-2 text-sm shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"})," "]})})]}),s.jsx("div",{className:"flex items-center gap-1 mt-6 border-b border-slate-200 overflow-x-auto custom-scrollbar",children:Q.map(ee=>s.jsxs("button",{onClick:()=>$(ee.id),className:`px-5 py-3 text-sm font-bold flex items-center gap-2 border-b-2 transition-all whitespace-nowrap rounded-t-lg
                                ${e===ee.id?`border-current ${ee.color.replace("text-","border-")} ${ee.color} bg-white shadow-sm`:"border-transparent text-slate-400 hover:text-slate-600 hover:bg-slate-50"}
                            `,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:ee.icon}),ee.label]},ee.id))})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 min-h-0 custom-scrollbar relative",children:s.jsxs("div",{children:[s.jsx("div",{style:{display:e==="rfm"?"block":"none"},children:s.jsx(Aue,{data:f,isLoading:r,onRefresh:K,isVisible:e==="rfm",showAlert:a,openSmsModal:J,openBatchMemoModal:F,openSummaryModal:V})}),s.jsx("div",{style:{display:e==="repurchase"?"block":"none"},children:s.jsx(Tue,{isVisible:e==="repurchase",showAlert:a,toggleProcessing:h,openSmsModal:J,openBatchMemoModal:F})}),s.jsx("div",{style:{display:e==="behavior"?"block":"none"},children:s.jsx(Mue,{isVisible:e==="behavior",showAlert:a,toggleProcessing:h})}),s.jsx("div",{style:{display:e==="membership"?"block":"none"},children:s.jsx(Eue,{data:g,isVisible:e==="membership"})})]})})]}),k.isOpen&&s.jsx(Iue,{customers:k.targetCustomers,mode:k.mode,onClose:U,showAlert:a}),D.isOpen&&s.jsx(Rue,{customers:D.targetCustomers,onClose:W,showAlert:a,onSuccess:K}),O&&s.jsx(Due,{customerId:O,onClose:G})]})},Aue=vr.memo(({data:a,isLoading:e,onRefresh:t,isVisible:r,showAlert:n,openSmsModal:i,openBatchMemoModal:o,openSummaryModal:l})=>{Fn();const[c,d]=H.useState("all"),[u,h]=H.useState(!1),[f,p]=H.useState(new Set),g=H.useCallback($=>{c!==$&&(h(!0),p(new Set),setTimeout(()=>{d($),h(!1)},300))},[c]),b=$=>g($.target.value),w=H.useMemo(()=>a?c==="all"?a:a.filter($=>$.rfm_segment.includes(c)):[],[a,c]),_=H.useMemo(()=>a?{champion:a.filter($=>$.rfm_segment.includes("Champions")).length,promising:a.filter($=>$.rfm_segment.includes("Promising")).length,atRisk:a.filter($=>$.rfm_segment.includes("At Risk")).length,hibernating:a.filter($=>$.rfm_segment.includes("Hibernating")).length,attention:a.filter($=>$.rfm_segment.includes("Need Attention")).length}:{champion:0,promising:0,atRisk:0,hibernating:0,attention:0},[a]),k=$=>l($),T=$=>i($,"sms"),D=$=>i($,"kakao"),I=()=>{f.size===w.length&&w.length>0?p(new Set):p(new Set(w.map($=>$.customer_id)))},O=$=>{const ae=new Set(f);ae.has($)?ae.delete($):ae.add($),p(ae)},P=()=>{if(f.size===0)return n("","  .");const $=a.filter(ae=>f.has(ae.customer_id));i($,"sms")},V=()=>{if(f.size===0)return n("","  .");const $=a.filter(ae=>f.has(ae.customer_id));i($,"kakao")},G=()=>{if(f.size===0)return n("","  .");const $=a.filter(ae=>f.has(ae.customer_id));o($)},Q=async($,ae)=>{try{await Pa("update_customer_level",{customerId:$,newLevel:ae}),n(" ",`  ${ae}() .`,"success"),t()}catch(J){console.error(J),n("","  : "+J)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[{key:"Champions",label:" ()",value:_.champion,icon:"",bg:"bg-amber-50 border-amber-200",activeBg:"bg-amber-500 border-amber-600 text-white",text:"text-amber-800"},{key:"Promising",label:"  (Promising)",value:_.promising,icon:"",bg:"bg-blue-50 border-blue-200",activeBg:"bg-blue-500 border-blue-600 text-white",text:"text-blue-800"},{key:"At Risk",label:"  (At Risk)",value:_.atRisk,icon:"",bg:"bg-rose-50 border-rose-200",activeBg:"bg-rose-500 border-rose-600 text-white",text:"text-rose-800"},{key:"Hibernating",label:"  (Hibernating)",value:_.hibernating,icon:"zzz",bg:"bg-slate-100 border-slate-300",activeBg:"bg-slate-700 border-slate-800 text-white",text:"text-slate-800"},{key:"Need Attention",label:" / ",value:_.attention,icon:"",bg:"bg-emerald-50 border-emerald-200",activeBg:"bg-emerald-500 border-emerald-600 text-white",text:"text-emerald-800"}].map(($,ae)=>{const J=c===$.key;return s.jsxs("button",{onClick:()=>g(J?"all":$.key),className:`p-4 rounded-2xl border transition-all flex flex-col items-center justify-center text-center shadow-sm relative group overflow-hidden
                                ${J?$.activeBg:`${$.bg} hover:shadow-md hover:scale-[1.02] active:scale-[0.98]`}
                                ${$.key==="At Risk"?"ring-2 ring-rose-300 ring-offset-2 animate-soft-pulse":""}`,children:[s.jsx("div",{className:`text-3xl mb-2 transition-transform group-hover:scale-110 ${J?"brightness-0 invert opacity-80":""}`,children:$.icon==="zzz"?s.jsx("span",{className:`material-symbols-rounded ${J?"text-white":"text-slate-400"}`,children:"snooze"}):$.icon}),s.jsx("div",{className:`text-[10px] font-bold uppercase mb-1 ${J?"text-white/80":"opacity-60"}`,children:$.label}),s.jsxs("div",{className:`text-xl font-black ${J?"text-white":$.text}`,children:[$.value.toLocaleString(),""]}),$.key==="At Risk"&&$.value>0&&s.jsx("div",{className:"absolute top-1 left-2",children:s.jsx("span",{className:"flex h-2 w-2 rounded-full bg-rose-500 ring-2 ring-white"})}),J&&s.jsx("div",{className:"absolute top-2 right-2 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-base animate-in zoom-in-50 duration-300",children:"check_circle"})})]},ae)})}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden flex flex-col h-[600px] relative",children:[s.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200 flex justify-between items-center shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h3",{className:"font-bold text-slate-700",children:"  "}),s.jsx("div",{className:"h-6 w-[1px] bg-slate-200"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-bold text-slate-400",children:[" ",f.size,""]}),s.jsxs("button",{onClick:P,disabled:f.size===0,className:"h-8 px-3 rounded-lg bg-indigo-50 text-indigo-600 font-bold hover:bg-indigo-100 disabled:opacity-30 transition-all flex items-center gap-1.5 text-[11px] border border-indigo-100",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"sms"}),"  SMS "]}),s.jsxs("button",{onClick:V,disabled:f.size===0,className:"h-8 px-3 rounded-lg bg-yellow-100 text-yellow-800 font-bold hover:bg-yellow-200 disabled:opacity-30 transition-all flex items-center gap-1.5 text-[11px] border border-yellow-200 shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"chat"}),"   "]}),s.jsxs("button",{onClick:G,disabled:f.size===0,className:"h-8 px-3 rounded-lg bg-slate-100 text-slate-700 font-bold hover:bg-slate-200 disabled:opacity-30 transition-all flex items-center gap-1.5 text-[11px] border border-slate-200",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"edit_note"}),"    "]})]})]}),s.jsxs("select",{value:c,onChange:b,className:"h-10 px-4 text-base font-bold text-slate-700 bg-white border border-slate-300 rounded-xl shadow-sm hover:border-indigo-400 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-100 transition-all outline-none",children:[s.jsx("option",{value:"all",children:"  "}),s.jsx("option",{value:"Champions",children:"  ()"}),s.jsx("option",{value:"Promising",children:"  "}),s.jsx("option",{value:"At Risk",children:"  "}),s.jsx("option",{value:"Hibernating",children:"  "}),s.jsx("option",{value:"Need Attention",children:" /"})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar relative",children:[u&&s.jsx("div",{className:"absolute inset-0 z-20 bg-white/60 backdrop-blur-[1px] flex items-center justify-center animate-in fade-in duration-200",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-3xl text-indigo-500 animate-spin",children:"sync"}),s.jsx("span",{className:"text-xs font-bold text-slate-500",children:"  ..."})]})}),s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-white shadow-sm sticky top-0 z-10",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-100",children:[s.jsx("th",{className:"py-3 px-4 w-[40px]",children:s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500",checked:w.length>0&&f.size===w.length,onChange:I})}),s.jsx("th",{className:"py-3 px-4 w-[12%]",children:""}),s.jsx("th",{className:"py-3 px-4 w-[15%]",children:""}),s.jsx("th",{className:"py-3 px-4 w-[10%] text-center",children:""}),s.jsx("th",{className:"py-3 px-4 w-[8%] text-center",children:""}),s.jsx("th",{className:"py-3 px-4 w-[12%] text-right",children:" "}),s.jsx("th",{className:"py-3 px-4 w-[10%] text-center",children:" "}),s.jsx("th",{className:"py-3 px-4 w-[10%] text-center",children:"RFM"}),s.jsx("th",{className:"py-3 px-4 w-[8%] text-center",children:" "}),s.jsx("th",{className:"py-3 px-4 w-[10%] text-center",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:e?s.jsx("tr",{children:s.jsx("td",{colSpan:"9",className:"h-64 text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl text-indigo-400 animate-spin mb-3",children:"cyclone"}),s.jsx("span",{className:"font-bold text-sm",children:"  ..."})]})})}):w.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"10",className:"p-12 text-center text-slate-400 font-bold",children:" ."})}):w.map($=>s.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${f.has($.customer_id)?"bg-indigo-50/30":""}`,children:[s.jsx("td",{className:"py-3 px-4",children:s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500",checked:f.has($.customer_id),onChange:()=>O($.customer_id)})}),s.jsx("td",{className:"py-3 px-4 font-bold text-slate-700",children:$.customer_name}),s.jsx("td",{className:"py-3 px-4 text-slate-500 font-mono text-xs",children:$.mobile_number}),s.jsx("td",{className:"py-3 px-4 text-center text-slate-600 text-xs",children:$.last_order_date}),s.jsx("td",{className:"py-3 px-4 text-center text-slate-600",children:$.total_orders.toLocaleString()}),s.jsx("td",{className:"py-3 px-4 text-right font-black text-slate-700",children:Ve($.total_amount)}),s.jsx("td",{className:"py-3 px-4 text-center font-bold text-indigo-500",children:$.membership_level||""}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold 
                                                ${$.rfm_segment.includes("Champions")?"bg-amber-100 text-amber-600":$.rfm_segment.includes("Promising")?"bg-blue-100 text-blue-600":$.rfm_segment.includes("At Risk")||$.rfm_segment.includes("Hibernating")?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"}`,children:$.rfm_segment.split("(")[0]})}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsxs("select",{className:"bg-slate-50 border border-slate-200 text-slate-600 text-xs rounded px-2 py-1",defaultValue:"",onChange:ae=>Q($.customer_id,ae.target.value),children:[s.jsx("option",{value:"",disabled:!0,children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"VIP",children:"VIP"}),s.jsx("option",{value:"VVP",children:"VVP"})]})}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsxs("div",{className:"flex justify-center gap-1",children:[s.jsx("button",{onClick:()=>k($.customer_id),className:"w-8 h-8 rounded bg-white border border-slate-200 text-indigo-500 hover:bg-slate-50 flex items-center justify-center transition-colors shadow-sm",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"visibility"})}),s.jsx("button",{onClick:()=>T($),className:"w-8 h-8 rounded bg-slate-50 border border-slate-200 text-slate-500 hover:bg-slate-100 flex items-center justify-center transition-colors shadow-sm",title:"SMS ",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"sms"})}),s.jsx("button",{onClick:()=>D($),className:"w-8 h-8 rounded bg-yellow-100 border border-yellow-200 text-yellow-800 hover:bg-yellow-200 flex items-center justify-center transition-colors shadow-sm",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"chat"})})]})})]},$.customer_id))})]})]})]})]})}),Tue=({isVisible:a,showAlert:e,toggleProcessing:t,openSmsModal:r,openBatchMemoModal:n})=>{const[i,o]=H.useState([]),[l,c]=H.useState(!1),[d,u]=H.useState(new Set),h=async()=>{t(!0,"AI        ..."),u(new Set);try{await new Promise(k=>setTimeout(k,1e3));const _=await Pa("get_ai_repurchase_analysis",{});o(_?.candidates||[]),c(!0)}catch(_){console.error(_),e(" ",_.toString())}finally{t(!1)}},f=()=>{d.size===i.length&&i.length>0?u(new Set):u(new Set(i.map((_,k)=>k)))},p=_=>{const k=new Set(d);k.has(_)?k.delete(_):k.add(_),u(k)},g=()=>{if(d.size===0)return e("","  .");const _=i.filter((k,T)=>d.has(T));r(_,"sms")},b=()=>{if(d.size===0)return e("","  .");const _=i.filter((k,T)=>d.has(T));r(_,"kakao")},w=()=>{if(d.size===0)return e("","  .");const _=i.filter((k,T)=>d.has(T));n(_)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-6 border-l-[6px] border-rose-500 shadow-sm flex flex-col md:flex-row gap-6",children:[s.jsx("div",{className:"shrink-0 relative",children:s.jsx("div",{className:"w-16 h-16 rounded-full bg-rose-50 border-2 border-rose-100 overflow-hidden",children:s.jsx("img",{src:"https://api.dicebear.com/7.x/bottts/svg?seed=jenny",alt:"AI",className:"w-full h-full"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-black text-slate-800 mb-1",children:"   (Alpha)"}),s.jsxs("p",{className:"text-sm text-slate-500 mb-4 leading-relaxed",children:["    ,        .",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-rose-400 font-bold",children:"*     ."})]}),s.jsxs("button",{onClick:h,className:"px-6 py-2 bg-rose-500 text-white font-bold rounded-lg hover:bg-rose-600 transition-colors shadow-lg shadow-rose-200 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"auto_awesome"})," AI   "]})]})]}),l&&s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden flex flex-col h-[500px] animate-in fade-in slide-in-from-bottom-4 duration-500",children:[s.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200 font-bold text-slate-700 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-rose-500",children:"recommend"}),"    "]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-bold text-slate-400 mr-2",children:[" ",d.size,""]}),s.jsxs("button",{onClick:g,disabled:d.size===0,className:"h-8 px-3 rounded-lg bg-rose-50 text-rose-600 font-bold hover:bg-rose-100 disabled:opacity-30 transition-all flex items-center gap-1.5 text-[11px] border border-rose-100",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"sms"}),"  SMS"]}),s.jsxs("button",{onClick:b,disabled:d.size===0,className:"h-8 px-3 rounded-lg bg-yellow-100 text-yellow-800 font-bold hover:bg-yellow-200 disabled:opacity-30 transition-all flex items-center gap-1.5 text-[11px] border border-yellow-200",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"chat"}),"  "]}),s.jsxs("button",{onClick:w,disabled:d.size===0,className:"h-8 px-3 rounded-lg bg-slate-100 text-slate-700 font-bold hover:bg-slate-200 disabled:opacity-30 transition-all flex items-center gap-1.5 text-[11px] border border-slate-200",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"edit_note"}),"  "]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-white shadow-sm sticky top-0 z-10",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-100",children:[s.jsx("th",{className:"py-3 px-4 w-[40px]",children:s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-rose-600 focus:ring-rose-500",checked:i.length>0&&d.size===i.length,onChange:f})}),s.jsx("th",{className:"py-3 px-4 w-[12%]",children:""}),s.jsx("th",{className:"py-3 px-4 w-[15%]",children:""}),s.jsx("th",{className:"py-3 px-4 w-[18%]",children:"  "}),s.jsx("th",{className:"py-3 px-4 w-[10%] text-center",children:""}),s.jsx("th",{className:"py-3 px-4 w-[10%] text-center",children:""}),s.jsx("th",{className:"py-3 px-4 w-[15%] text-center",children:" "}),s.jsx("th",{className:"py-3 px-4 w-[10%] text-center",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:i.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"p-8 text-center text-slate-400",children:"  ."})}):i.map((_,k)=>s.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${d.has(k)?"bg-rose-50/30":""}`,children:[s.jsx("td",{className:"py-3 px-4",children:s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-rose-600 focus:ring-rose-500",checked:d.has(k),onChange:()=>p(k)})}),s.jsx("td",{className:"py-3 px-4 font-bold text-slate-700",children:_.customer_name}),s.jsx("td",{className:"py-3 px-4 text-slate-500 font-mono text-xs",children:_.mobile_number}),s.jsx("td",{className:"py-3 px-4 text-slate-600",children:_.last_product||"-"}),s.jsxs("td",{className:"py-3 px-4 text-center text-slate-500",children:[_.avg_interval_days,""]}),s.jsx("td",{className:"py-3 px-4 text-center text-slate-500 text-xs",children:_.last_order_date}),s.jsx("td",{className:"py-3 px-4 text-center font-bold text-rose-500",children:_.predicted_days_remaining===0?" ":_.predicted_days_remaining>0?`${_.predicted_days_remaining} `:`${Math.abs(_.predicted_days_remaining)} `}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsxs("div",{className:"flex justify-center gap-1",children:[s.jsx("button",{onClick:()=>r(_,"sms"),className:"w-8 h-8 rounded bg-rose-50 text-rose-600 flex items-center justify-center hover:bg-rose-100 transition-colors shadow-sm",title:"SMS",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"sms"})}),s.jsx("button",{onClick:()=>r(_,"kakao"),className:"w-8 h-8 rounded bg-yellow-100 text-yellow-800 flex items-center justify-center hover:bg-yellow-200 transition-colors shadow-sm",title:"Kakao",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"chat"})})]})})]},k))})]})})]})]})},Mue=({isVisible:a,showAlert:e,toggleProcessing:t})=>{const[r,n]=H.useState(null),[i,o]=H.useState(!1),l=async()=>{t(!0,"AI        ...");try{const c=await _l(e,"get_ai_behavior_strategy",{});n(c),o(!0)}catch(c){console.error(c)}finally{t(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-6 border-l-[6px] border-teal-500 shadow-sm flex flex-col md:flex-row gap-6",children:[s.jsx("div",{className:"shrink-0",children:s.jsx("div",{className:"w-16 h-16 rounded-full bg-teal-50 border-2 border-teal-100 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-4xl text-teal-600 animate-pulse",children:"analytics"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-black text-slate-800 mb-1",children:"  AI   (Enterprise)"}),s.jsxs("p",{className:"text-sm text-slate-500 mb-4 leading-relaxed",children:["    ,  ,        .",s.jsx("br",{}),"           ."]}),s.jsxs("button",{onClick:l,className:"px-6 py-2 bg-teal-600 text-white font-bold rounded-lg hover:bg-teal-700 transition-colors shadow-lg shadow-teal-200 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"psychology_alt"})," AI    "]})]})]}),i&&r&&s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[s.jsx("div",{className:"xl:col-span-2 space-y-6",children:s.jsxs("div",{className:"bg-white rounded-3xl p-8 border border-slate-100 shadow-sm relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 p-8",children:s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-1",children:"Business Health"}),s.jsxs("div",{className:`text-5xl font-black ${r.overall_health_score>70?"text-emerald-500":r.overall_health_score>40?"text-amber-500":"text-rose-500"}`,children:[r.overall_health_score,s.jsx("span",{className:"text-xl ml-1 text-slate-300",children:"/ 100"})]})]})}),s.jsxs("h3",{className:"text-2xl font-black text-slate-800 mb-6 flex items-center gap-3",children:[s.jsx("span",{className:"w-2 h-8 bg-teal-500 rounded-full"}),"  "]}),s.jsx("p",{className:"text-lg text-slate-600 leading-relaxed font-medium mb-8 pr-32",children:r.summary}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-5 bg-slate-50 rounded-2xl border border-slate-100 hover:border-teal-200 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-teal-600",children:[s.jsx("span",{className:"material-symbols-rounded",children:"trending_up"}),s.jsx("span",{className:"font-black text-sm uppercase",children:"Behavioral Trends"})]}),s.jsx("ul",{className:"space-y-2",children:r.behavioral_trends?.map((c,d)=>s.jsxs("li",{className:"text-sm text-slate-600 flex gap-2",children:[s.jsx("span",{className:"text-teal-400",children:""})," ",c]},d))})]}),s.jsxs("div",{className:"p-5 bg-rose-50/30 rounded-2xl border border-rose-100 hover:border-rose-200 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-rose-600",children:[s.jsx("span",{className:"material-symbols-rounded",children:"warning"}),s.jsx("span",{className:"font-black text-sm uppercase",children:"Critical Signals"})]}),s.jsx("ul",{className:"space-y-2",children:r.warning_signals?.map((c,d)=>s.jsxs("li",{className:"text-sm text-slate-600 flex gap-2",children:[s.jsx("span",{className:"text-rose-400",children:""})," ",c]},d))})]})]})]})}),s.jsx("div",{className:"xl:col-span-1",children:s.jsxs("div",{className:"bg-slate-900 rounded-3xl p-8 text-white shadow-2xl shadow-slate-200 h-full flex flex-col",children:[s.jsx("div",{className:"w-14 h-14 bg-indigo-500 rounded-2xl flex items-center justify-center mb-6 shadow-lg shadow-indigo-500/30",children:s.jsx("span",{className:"material-symbols-rounded text-white text-3xl",children:"lightbulb"})}),s.jsx("h3",{className:"text-xl font-black mb-4",children:"AI   "}),s.jsxs("div",{className:"flex-1 text-slate-300 leading-relaxed font-medium text-base whitespace-pre-wrap italic",children:['"',r.strategic_advice,'"']}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-white/10 text-xs text-slate-500 font-bold flex items-center justify-between",children:[s.jsx("span",{children:"Powered by Gemini 1.5 Pro"}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," Real-time Analysis"]})]})]})})]})]})},Eue=({data:a,isVisible:e})=>{const t=H.useRef(null),r=H.useRef(null);H.useEffect(()=>{e&&r.current&&r.current.resize()},[e]),H.useEffect(()=>{a&&t.current&&n(a)},[a,e]);const n=i=>{if(!t.current)return;r.current&&r.current.destroy();const o=t.current.getContext("2d");r.current=new Wi(o,{type:"doughnut",data:{labels:(i||[]).map(l=>l.membership_level),datasets:[{data:(i||[]).map(l=>l.total_amount),backgroundColor:["#3b82f6","#10b981","#f59e0b","#8b5cf6","#64748b"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})};return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full",children:[s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 flex flex-col h-[500px]",children:[s.jsx("h3",{className:"font-bold text-lg text-slate-700 mb-4",children:"   "}),s.jsx("div",{className:"flex-1 relative min-h-0",children:s.jsx("canvas",{ref:t})})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden flex flex-col h-[500px]",children:[s.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200 font-bold text-slate-700",children:"   "}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-white shadow-sm sticky top-0 z-10",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-100",children:[s.jsx("th",{className:"py-3 px-4 w-[25%] font-bold",children:""}),s.jsx("th",{className:"py-3 px-4 w-[25%] text-right font-bold",children:""}),s.jsx("th",{className:"py-3 px-4 w-[25%] text-right font-bold",children:""}),s.jsx("th",{className:"py-3 px-4 w-[25%] text-right font-bold",children:" (LTV)"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:!a||a.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"4",className:"p-8 text-center text-slate-400",children:" "})}):a.map((i,o)=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"py-3 px-4 font-bold text-slate-800",children:i.membership_level}),s.jsx("td",{className:"py-3 px-4 text-right text-slate-600",children:Ve(i.total_amount)}),s.jsxs("td",{className:"py-3 px-4 text-right text-slate-600",children:[i.customer_count.toLocaleString(),""]}),s.jsx("td",{className:"py-3 px-4 text-right font-black text-indigo-500",children:Ve(i.customer_count>0?Math.floor(i.total_amount/i.customer_count):0)})]},o))})]})})]})]})},Due=({customerId:a,onClose:e})=>{const[t,r]=H.useState(null),[n,i]=H.useState(!0);return H.useEffect(()=>{(async()=>{try{const l=await Pa("get_customer",{customerId:a});r(l)}catch(l){console.error(l)}finally{i(!1)}})()},[a]),s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-start bg-slate-50/50",children:[s.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"  "}),s.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 rounded-full p-1 hover:bg-slate-100 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"p-6",children:n?s.jsxs("div",{className:"py-10 flex flex-col items-center justify-center text-slate-400 gap-3",children:[s.jsx("span",{className:"material-symbols-rounded animate-spin text-3xl text-indigo-500",children:"sync"}),s.jsx("span",{className:"text-xs font-bold",children:"  ..."})]}):t?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-slate-100",children:[s.jsx("div",{className:"w-14 h-14 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-black text-xl border-2 border-white shadow-sm",children:t.customer_name?.[0]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-black text-xl text-slate-800",children:t.customer_name}),s.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-indigo-50 text-indigo-600 border border-indigo-100",children:t.membership_level})]}),s.jsxs("p",{className:"text-sm text-slate-500 font-mono mt-0.5",children:["ID: ",t.customer_id]})]})]}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("span",{className:"w-20 text-slate-400 font-bold shrink-0",children:""}),s.jsx("span",{className:"text-slate-700 font-medium font-mono",children:t.mobile_number||"-"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("span",{className:"w-20 text-slate-400 font-bold shrink-0",children:""}),s.jsx("span",{className:"text-slate-700 font-medium",children:t.join_date||"-"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("span",{className:"w-20 text-slate-400 font-bold shrink-0",children:""}),s.jsxs("div",{className:"flex-1 text-slate-700 font-medium",children:[t.zip_code&&s.jsx("span",{className:"text-xs bg-slate-100 px-1.5 py-0.5 rounded text-slate-500 mr-1",children:t.zip_code}),t.address_primary," ",t.address_detail]})]}),s.jsxs("div",{className:"pt-2",children:[s.jsx("span",{className:"text-xs font-bold text-slate-400 block mb-1",children:""}),s.jsx("div",{className:"bg-amber-50 rounded-lg p-3 text-amber-900 text-xs leading-relaxed border border-amber-100",children:t.memo||"  ."})]})]})]}):s.jsx("div",{className:"text-center py-10 text-slate-400",children:"   ."})}),s.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end",children:s.jsx("button",{onClick:e,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold shadow-sm shadow-indigo-200 transition-colors",children:""})})]})})},Iue=({customers:a,mode:e,onClose:t,showAlert:r})=>{const[n,i]=H.useState(e),[o,l]=H.useState(""),[c,d]=H.useState(!1),[u,h]=H.useState(!1),f=a.length>1,p=a[0],g=[{id:1,label:"  ()",content:"[],   .    ."},{id:2,label:" ",content:"[],   !    ."},{id:3,label:" ",content:"[],   .   !"},{id:4,label:"  ",content:"[],    .    ."}];H.useEffect(()=>{a.length!==0&&(o||b(n))},[a]);const b=k=>{l(k==="kakao"?`[] .
     .

( )`:"[] . ( )")},w=async()=>{if(!o.trim())return r(" ","  .");d(!0);const k=f?2e3:1e3;await new Promise(D=>setTimeout(D,k)),d(!1),d(!1);const T=f?`${a.length} `:"";r(" ",`${T} ${n==="kakao"?"":""} .`,"success"),t()},_=k=>{l(k),h(!1)};return s.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex h-[700px] max-h-[90vh]",children:[s.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-white",children:[s.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-xl ${n==="kakao"?"bg-yellow-100 text-yellow-800":"bg-indigo-100 text-indigo-600"}`,children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:n==="kakao"?"chat":"sms"})}),s.jsx("h3",{className:"font-bold text-lg text-slate-800",children:f?"  ":" "})]}),s.jsx("button",{onClick:t,className:"rounded-full p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"px-6 py-3 bg-indigo-600 text-white flex items-center justify-between shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded animate-pulse",children:"info"}),s.jsxs("div",{className:"text-xs leading-relaxed",children:[s.jsx("span",{className:"font-black underline decoration-white/50 underline-offset-2 text-[13px] mr-2",children:" "})," ",s.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded font-black text-white ml-0.5 mr-0.5",children:"[]"}),"  ,       ."]})]}),s.jsx("div",{className:"text-[10px] font-bold py-1 px-2 bg-white/20 rounded uppercase tracking-tighter",children:"smart logic"})]}),s.jsx("div",{className:"px-6 pt-5",children:s.jsxs("div",{className:"bg-slate-100 p-1 rounded-xl flex font-bold text-sm",children:[s.jsxs("button",{onClick:()=>{i("sms"),o||b("sms")},className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 transition-all ${n==="sms"?"bg-white text-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"sms"}),"  "]}),s.jsxs("button",{onClick:()=>{i("kakao"),o||b("kakao")},className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 transition-all ${n==="kakao"?"bg-yellow-400 text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"chat"}),"  "]})]})}),s.jsxs("div",{className:"p-6 flex-1 overflow-y-auto flex flex-col",children:[s.jsxs("div",{className:`mb-6 rounded-xl p-4 border flex items-center justify-between transition-colors ${f?"bg-indigo-50 border-indigo-100 shadow-sm shadow-indigo-100/50":"bg-slate-50 border-slate-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${f?"bg-indigo-600 text-white shadow-inner":"bg-white border border-slate-200 text-slate-400"}`,children:s.jsx("span",{className:"material-symbols-rounded",children:f?"groups":"person"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:f?"Recipient Group":"Recipient"}),s.jsx("div",{className:"font-bold text-slate-700 flex items-center gap-2",children:f?s.jsxs("span",{className:"text-indigo-600 font-black",children:[" ",a.length,"  "]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-800",children:p?.customer_name}),s.jsx("span",{className:"text-slate-400 font-normal font-mono text-sm",children:p?.mobile_number})]})})]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-1",children:[s.jsx("div",{className:"text-[10px] font-black px-2 py-0.5 rounded bg-white border border-slate-200 text-slate-500 uppercase tracking-tighter",children:n==="kakao"?"KakaoTalk":"SMS/LMS"}),f&&s.jsxs("span",{className:"text-[10px] font-bold text-rose-500 animate-pulse flex items-center gap-1",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-rose-500 rounded-full"})," LIVE BATCH MODE"]})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-end mb-2",children:[s.jsxs("label",{className:"text-sm font-black text-slate-700 flex items-center gap-2",children:[s.jsx("span",{className:"w-1 h-3.5 bg-indigo-600 rounded-full"}),"  "]}),s.jsxs("button",{onClick:()=>h(!u),className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-indigo-50 hover:bg-indigo-100 transition-colors border border-indigo-100 shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"auto_stories"}),u?" ":" "]})]}),s.jsxs("div",{className:`relative flex-1 rounded-2xl border transition-all flex flex-col shadow-inner
                                ${n==="kakao"?"bg-yellow-50/20 border-yellow-200 focus-within:border-yellow-400 focus-within:ring-4 focus-within:ring-yellow-400/10":"bg-white border-slate-300 focus-within:border-indigo-500 focus-within:ring-4 focus-within:ring-indigo-500/10"}
                            `,children:[s.jsx("textarea",{value:o,onChange:k=>l(k.target.value),className:"w-full h-full p-6 bg-transparent border-none outline-none resize-none font-sans text-slate-700 leading-relaxed text-[16px] custom-scrollbar placeholder:text-slate-300",placeholder:`   .
[]     .`}),s.jsxs("div",{className:"p-3 border-t border-black/5 flex justify-between items-center bg-slate-50/80 rounded-b-xl backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`text-[11px] font-bold px-2 py-1 rounded flex items-center gap-1.5 ${o.length>80?"bg-amber-100 text-amber-700":"bg-indigo-50 text-indigo-600"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"equalizer"}),new Blob([o]).size," BYTES",o.length>80&&n==="sms"&&s.jsx("span",{className:"ml-1 opacity-70 underline decoration-amber-300",children:"LMS "})]}),s.jsxs("div",{className:"text-[11px] font-bold text-slate-400 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"person_pin"})," : ",o.includes("[]")?"YES ()":"NO ()"]})]}),s.jsxs("button",{onClick:()=>l(""),className:"text-[11px] text-slate-400 hover:text-rose-500 font-bold flex items-center gap-1 transition-colors",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"delete_sweep"}),"  "]})]})]})]})]}),s.jsxs("div",{className:"p-5 border-t border-slate-100 flex justify-end gap-3 bg-slate-50/50",children:[s.jsx("button",{onClick:t,className:"px-6 py-3 bg-white border border-slate-300 text-slate-600 rounded-xl font-bold hover:bg-slate-50 transition-colors shadow-sm text-sm",children:""}),s.jsxs("button",{onClick:w,disabled:c,className:`px-8 py-3 rounded-xl font-black text-sm text-white shadow-xl transition-all flex items-center gap-3
                                ${c?"opacity-70 cursor-wait":"hover:scale-[1.02] active:scale-95"}
                                ${n==="kakao"?"bg-[#FAE100] hover:bg-[#FDD835] text-[#371D1E] shadow-yellow-200":"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-200"}
                            `,children:[c?s.jsx("span",{className:"material-symbols-rounded animate-spin",children:"progress_activity"}):s.jsx("span",{className:"material-symbols-rounded",children:"rocket_launch"}),c?" ...":`${n==="kakao"?" ":" "} ${f?" ":""} `]})]})]}),s.jsxs("div",{className:`${u?"w-80 border-l border-slate-200":"w-0"} bg-slate-50 transition-all duration-300 ease-in-out overflow-hidden flex flex-col`,children:[s.jsx("div",{className:"p-5 border-b border-slate-200 bg-white",children:s.jsxs("h4",{className:"font-black text-slate-700 flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"auto_awesome"})," "]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar",children:[s.jsx("div",{className:"p-3 bg-amber-50 rounded-xl border border-amber-100 text-[11px] text-amber-800 font-bold mb-4",children:"    . []    ."}),g.map(k=>s.jsxs("button",{onClick:()=>_(k.content),className:"w-full text-left bg-white p-4 rounded-xl border border-slate-200 hover:border-indigo-400 hover:shadow-lg transition-all group relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("span",{className:"material-symbols-rounded text-indigo-400 text-sm",children:"add_circle"})}),s.jsx("div",{className:"font-black text-slate-800 text-xs mb-1.5 group-hover:text-indigo-600",children:k.label}),s.jsx("div",{className:"text-[11px] text-slate-400 line-clamp-3 leading-relaxed font-medium",children:k.content})]},k.id))]}),s.jsx("div",{className:"p-4 border-t border-slate-200 bg-white",children:s.jsxs("button",{className:"w-full py-3 rounded-xl border-2 border-dashed border-slate-300 text-slate-500 font-black text-xs hover:bg-indigo-50 hover:border-indigo-300 hover:text-indigo-600 transition-all flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"edit_note"}),"   "]})})]})]})})},Rue=({customers:a,onClose:e,showAlert:t,onSuccess:r})=>{const[n,i]=H.useState(""),[o,l]=H.useState(!1),[c,d]=H.useState(!0),u=async()=>{if(!n.trim())return t("","   .");l(!0);try{const h=a.map(f=>f.customer_id);await Pa("update_customer_memo_batch",{customerIds:h,newMemo:n.trim(),append:c}),t("",`${a.length}    .`,"success"),r&&r(),e()}catch(h){console.error(h),t("","   : "+h)}finally{l(!1)}};return s.jsx("div",{className:"fixed inset-0 z-[150] bg-slate-900/40 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300",children:s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95 slide-in-from-bottom-8 duration-500",children:[s.jsxs("div",{className:"px-8 pt-8 pb-4 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[s.jsx("span",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded",children:"edit_note"})}),"   "]}),s.jsxs("p",{className:"text-sm text-slate-500 mt-2 font-medium",children:[" ",s.jsxs("span",{className:"text-indigo-600 font-black",children:[a.length,""]}),"     ."]})]}),s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full flex items-center justify-center text-slate-400 hover:bg-slate-100 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-100",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-3",children:[s.jsx("span",{className:"material-symbols-rounded text-base text-indigo-500",children:"groups"}),s.jsx("span",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Targets"})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-20 overflow-y-auto custom-scrollbar pr-2",children:a.map(h=>s.jsx("span",{className:"px-2 py-1 bg-white border border-slate-200 rounded-lg text-xs font-bold text-slate-600",children:h.customer_name},h.customer_id))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"text-sm font-black text-slate-700 flex items-center gap-2",children:[s.jsx("span",{className:"w-1 h-3.5 bg-indigo-600 rounded-full"})," "]}),s.jsx("textarea",{value:n,onChange:h=>i(h.target.value),className:"w-full h-40 p-5 rounded-3xl border border-slate-200 bg-slate-50 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all resize-none shadow-inner text-slate-700 leading-relaxed font-medium",placeholder:": []    /    "})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-indigo-50/50 rounded-2xl border border-indigo-100",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center transition-colors ${c?"bg-indigo-600 text-white":"bg-slate-200 text-slate-400"}`,children:s.jsx("span",{className:"material-symbols-rounded",children:c?"add_to_photos":"edit_square"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Update Mode"}),s.jsx("div",{className:"text-sm font-black text-slate-700",children:c?"  ":"  "})]})]}),s.jsx("button",{onClick:()=>d(!c),className:`px-4 py-2 rounded-xl text-xs font-black border transition-all ${c?"border-indigo-200 bg-white text-indigo-600 hover:bg-indigo-50":"border-slate-300 bg-white text-slate-600 hover:bg-slate-50"}`,children:" "})]})]}),s.jsxs("div",{className:"p-8 border-t border-slate-100 flex gap-3 bg-slate-50/50",children:[s.jsx("button",{onClick:e,className:"flex-1 py-4 rounded-2xl bg-white border border-slate-300 text-slate-600 font-bold hover:bg-slate-50 transition-all text-sm",children:""}),s.jsxs("button",{onClick:u,disabled:o||!n.trim(),className:"flex-[2] py-4 rounded-2xl bg-indigo-600 text-white font-black hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-xl shadow-indigo-100 text-sm flex items-center justify-center gap-2",children:[o?s.jsx("span",{className:"material-symbols-rounded animate-spin",children:"progress_activity"}):s.jsx("span",{className:"material-symbols-rounded",children:"save"}),o?" ...":"  "]})]})]})})};var Lue={value:()=>{}};function K_(){for(var a=0,e=arguments.length,t={},r;a<e;++a){if(!(r=arguments[a]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new Mw(t)}function Mw(a){this._=a}function Oue(a,e){return a.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}Mw.prototype=K_.prototype={constructor:Mw,on:function(a,e){var t=this._,r=Oue(a+"",t),n,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((n=(a=r[i]).type)&&(n=Pue(t[n],a.name)))return n;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<o;)if(n=(a=r[i]).type)t[n]=LL(t[n],a.name,e);else if(e==null)for(n in t)t[n]=LL(t[n],a.name,null);return this},copy:function(){var a={},e=this._;for(var t in e)a[t]=e[t].slice();return new Mw(a)},call:function(a,e){if((n=arguments.length-2)>0)for(var t=new Array(n),r=0,n,i;r<n;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(i=this._[a],r=0,n=i.length;r<n;++r)i[r].value.apply(e,t)},apply:function(a,e,t){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var r=this._[a],n=0,i=r.length;n<i;++n)r[n].value.apply(e,t)}};function Pue(a,e){for(var t=0,r=a.length,n;t<r;++t)if((n=a[t]).name===e)return n.value}function LL(a,e,t){for(var r=0,n=a.length;r<n;++r)if(a[r].name===e){a[r]=Lue,a=a.slice(0,r).concat(a.slice(r+1));break}return t!=null&&a.push({name:e,value:t}),a}var d4="http://www.w3.org/1999/xhtml";const OL={svg:"http://www.w3.org/2000/svg",xhtml:d4,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Q_(a){var e=a+="",t=e.indexOf(":");return t>=0&&(e=a.slice(0,t))!=="xmlns"&&(a=a.slice(t+1)),OL.hasOwnProperty(e)?{space:OL[e],local:a}:a}function Bue(a){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===d4&&e.documentElement.namespaceURI===d4?e.createElement(a):e.createElementNS(t,a)}}function zue(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}function iG(a){var e=Q_(a);return(e.local?zue:Bue)(e)}function Fue(){}function xT(a){return a==null?Fue:function(){return this.querySelector(a)}}function Vue(a){typeof a!="function"&&(a=xT(a));for(var e=this._groups,t=e.length,r=new Array(t),n=0;n<t;++n)for(var i=e[n],o=i.length,l=r[n]=new Array(o),c,d,u=0;u<o;++u)(c=i[u])&&(d=a.call(c,c.__data__,u,i))&&("__data__"in c&&(d.__data__=c.__data__),l[u]=d);return new ko(r,this._parents)}function Hue(a){return a==null?[]:Array.isArray(a)?a:Array.from(a)}function Uue(){return[]}function sG(a){return a==null?Uue:function(){return this.querySelectorAll(a)}}function Gue(a){return function(){return Hue(a.apply(this,arguments))}}function Wue(a){typeof a=="function"?a=Gue(a):a=sG(a);for(var e=this._groups,t=e.length,r=[],n=[],i=0;i<t;++i)for(var o=e[i],l=o.length,c,d=0;d<l;++d)(c=o[d])&&(r.push(a.call(c,c.__data__,d,o)),n.push(c));return new ko(r,n)}function oG(a){return function(){return this.matches(a)}}function lG(a){return function(e){return e.matches(a)}}var $ue=Array.prototype.find;function Yue(a){return function(){return $ue.call(this.children,a)}}function que(){return this.firstElementChild}function Xue(a){return this.select(a==null?que:Yue(typeof a=="function"?a:lG(a)))}var Zue=Array.prototype.filter;function Kue(){return Array.from(this.children)}function Que(a){return function(){return Zue.call(this.children,a)}}function Jue(a){return this.selectAll(a==null?Kue:Que(typeof a=="function"?a:lG(a)))}function ehe(a){typeof a!="function"&&(a=oG(a));for(var e=this._groups,t=e.length,r=new Array(t),n=0;n<t;++n)for(var i=e[n],o=i.length,l=r[n]=[],c,d=0;d<o;++d)(c=i[d])&&a.call(c,c.__data__,d,i)&&l.push(c);return new ko(r,this._parents)}function cG(a){return new Array(a.length)}function the(){return new ko(this._enter||this._groups.map(cG),this._parents)}function y2(a,e){this.ownerDocument=a.ownerDocument,this.namespaceURI=a.namespaceURI,this._next=null,this._parent=a,this.__data__=e}y2.prototype={constructor:y2,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,e){return this._parent.insertBefore(a,e)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};function ahe(a){return function(){return a}}function rhe(a,e,t,r,n,i){for(var o=0,l,c=e.length,d=i.length;o<d;++o)(l=e[o])?(l.__data__=i[o],r[o]=l):t[o]=new y2(a,i[o]);for(;o<c;++o)(l=e[o])&&(n[o]=l)}function nhe(a,e,t,r,n,i,o){var l,c,d=new Map,u=e.length,h=i.length,f=new Array(u),p;for(l=0;l<u;++l)(c=e[l])&&(f[l]=p=o.call(c,c.__data__,l,e)+"",d.has(p)?n[l]=c:d.set(p,c));for(l=0;l<h;++l)p=o.call(a,i[l],l,i)+"",(c=d.get(p))?(r[l]=c,c.__data__=i[l],d.delete(p)):t[l]=new y2(a,i[l]);for(l=0;l<u;++l)(c=e[l])&&d.get(f[l])===c&&(n[l]=c)}function ihe(a){return a.__data__}function she(a,e){if(!arguments.length)return Array.from(this,ihe);var t=e?nhe:rhe,r=this._parents,n=this._groups;typeof a!="function"&&(a=ahe(a));for(var i=n.length,o=new Array(i),l=new Array(i),c=new Array(i),d=0;d<i;++d){var u=r[d],h=n[d],f=h.length,p=ohe(a.call(u,u&&u.__data__,d,r)),g=p.length,b=l[d]=new Array(g),w=o[d]=new Array(g),_=c[d]=new Array(f);t(u,h,b,w,_,p,e);for(var k=0,T=0,D,I;k<g;++k)if(D=b[k]){for(k>=T&&(T=k+1);!(I=w[T])&&++T<g;);D._next=I||null}}return o=new ko(o,r),o._enter=l,o._exit=c,o}function ohe(a){return typeof a=="object"&&"length"in a?a:Array.from(a)}function lhe(){return new ko(this._exit||this._groups.map(cG),this._parents)}function che(a,e,t){var r=this.enter(),n=this,i=this.exit();return typeof a=="function"?(r=a(r),r&&(r=r.selection())):r=r.append(a+""),e!=null&&(n=e(n),n&&(n=n.selection())),t==null?i.remove():t(i),r&&n?r.merge(n).order():n}function dhe(a){for(var e=a.selection?a.selection():a,t=this._groups,r=e._groups,n=t.length,i=r.length,o=Math.min(n,i),l=new Array(n),c=0;c<o;++c)for(var d=t[c],u=r[c],h=d.length,f=l[c]=new Array(h),p,g=0;g<h;++g)(p=d[g]||u[g])&&(f[g]=p);for(;c<n;++c)l[c]=t[c];return new ko(l,this._parents)}function uhe(){for(var a=this._groups,e=-1,t=a.length;++e<t;)for(var r=a[e],n=r.length-1,i=r[n],o;--n>=0;)(o=r[n])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function hhe(a){a||(a=fhe);function e(h,f){return h&&f?a(h.__data__,f.__data__):!h-!f}for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i){for(var o=t[i],l=o.length,c=n[i]=new Array(l),d,u=0;u<l;++u)(d=o[u])&&(c[u]=d);c.sort(e)}return new ko(n,this._parents).order()}function fhe(a,e){return a<e?-1:a>e?1:a>=e?0:NaN}function phe(){var a=arguments[0];return arguments[0]=this,a.apply(null,arguments),this}function xhe(){return Array.from(this)}function mhe(){for(var a=this._groups,e=0,t=a.length;e<t;++e)for(var r=a[e],n=0,i=r.length;n<i;++n){var o=r[n];if(o)return o}return null}function ghe(){let a=0;for(const e of this)++a;return a}function vhe(){return!this.node()}function bhe(a){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length,l;i<o;++i)(l=n[i])&&a.call(l,l.__data__,i,n);return this}function yhe(a){return function(){this.removeAttribute(a)}}function whe(a){return function(){this.removeAttributeNS(a.space,a.local)}}function _he(a,e){return function(){this.setAttribute(a,e)}}function Nhe(a,e){return function(){this.setAttributeNS(a.space,a.local,e)}}function jhe(a,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(a):this.setAttribute(a,t)}}function She(a,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,t)}}function khe(a,e){var t=Q_(a);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?whe:yhe:typeof e=="function"?t.local?She:jhe:t.local?Nhe:_he)(t,e))}function dG(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function Che(a){return function(){this.style.removeProperty(a)}}function Ahe(a,e,t){return function(){this.style.setProperty(a,e,t)}}function The(a,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(a):this.style.setProperty(a,r,t)}}function Mhe(a,e,t){return arguments.length>1?this.each((e==null?Che:typeof e=="function"?The:Ahe)(a,e,t??"")):yx(this.node(),a)}function yx(a,e){return a.style.getPropertyValue(e)||dG(a).getComputedStyle(a,null).getPropertyValue(e)}function Ehe(a){return function(){delete this[a]}}function Dhe(a,e){return function(){this[a]=e}}function Ihe(a,e){return function(){var t=e.apply(this,arguments);t==null?delete this[a]:this[a]=t}}function Rhe(a,e){return arguments.length>1?this.each((e==null?Ehe:typeof e=="function"?Ihe:Dhe)(a,e)):this.node()[a]}function uG(a){return a.trim().split(/^|\s+/)}function mT(a){return a.classList||new hG(a)}function hG(a){this._node=a,this._names=uG(a.getAttribute("class")||"")}hG.prototype={add:function(a){var e=this._names.indexOf(a);e<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var e=this._names.indexOf(a);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};function fG(a,e){for(var t=mT(a),r=-1,n=e.length;++r<n;)t.add(e[r])}function pG(a,e){for(var t=mT(a),r=-1,n=e.length;++r<n;)t.remove(e[r])}function Lhe(a){return function(){fG(this,a)}}function Ohe(a){return function(){pG(this,a)}}function Phe(a,e){return function(){(e.apply(this,arguments)?fG:pG)(this,a)}}function Bhe(a,e){var t=uG(a+"");if(arguments.length<2){for(var r=mT(this.node()),n=-1,i=t.length;++n<i;)if(!r.contains(t[n]))return!1;return!0}return this.each((typeof e=="function"?Phe:e?Lhe:Ohe)(t,e))}function zhe(){this.textContent=""}function Fhe(a){return function(){this.textContent=a}}function Vhe(a){return function(){var e=a.apply(this,arguments);this.textContent=e??""}}function Hhe(a){return arguments.length?this.each(a==null?zhe:(typeof a=="function"?Vhe:Fhe)(a)):this.node().textContent}function Uhe(){this.innerHTML=""}function Ghe(a){return function(){this.innerHTML=a}}function Whe(a){return function(){var e=a.apply(this,arguments);this.innerHTML=e??""}}function $he(a){return arguments.length?this.each(a==null?Uhe:(typeof a=="function"?Whe:Ghe)(a)):this.node().innerHTML}function Yhe(){this.nextSibling&&this.parentNode.appendChild(this)}function qhe(){return this.each(Yhe)}function Xhe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zhe(){return this.each(Xhe)}function Khe(a){var e=typeof a=="function"?a:iG(a);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Qhe(){return null}function Jhe(a,e){var t=typeof a=="function"?a:iG(a),r=e==null?Qhe:typeof e=="function"?e:xT(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function efe(){var a=this.parentNode;a&&a.removeChild(this)}function tfe(){return this.each(efe)}function afe(){var a=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(a,this.nextSibling):a}function rfe(){var a=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(a,this.nextSibling):a}function nfe(a){return this.select(a?rfe:afe)}function ife(a){return arguments.length?this.property("__data__",a):this.node().__data__}function sfe(a){return function(e){a.call(this,e,this.__data__)}}function ofe(a){return a.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function lfe(a){return function(){var e=this.__on;if(e){for(var t=0,r=-1,n=e.length,i;t<n;++t)i=e[t],(!a.type||i.type===a.type)&&i.name===a.name?this.removeEventListener(i.type,i.listener,i.options):e[++r]=i;++r?e.length=r:delete this.__on}}}function cfe(a,e,t){return function(){var r=this.__on,n,i=sfe(e);if(r){for(var o=0,l=r.length;o<l;++o)if((n=r[o]).type===a.type&&n.name===a.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=i,n.options=t),n.value=e;return}}this.addEventListener(a.type,i,t),n={type:a.type,name:a.name,value:e,listener:i,options:t},r?r.push(n):this.__on=[n]}}function dfe(a,e,t){var r=ofe(a+""),n,i=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,d=l.length,u;c<d;++c)for(n=0,u=l[c];n<i;++n)if((o=r[n]).type===u.type&&o.name===u.name)return u.value}return}for(l=e?cfe:lfe,n=0;n<i;++n)this.each(l(r[n],e,t));return this}function xG(a,e,t){var r=dG(a),n=r.CustomEvent;typeof n=="function"?n=new n(e,t):(n=r.document.createEvent("Event"),t?(n.initEvent(e,t.bubbles,t.cancelable),n.detail=t.detail):n.initEvent(e,!1,!1)),a.dispatchEvent(n)}function ufe(a,e){return function(){return xG(this,a,e)}}function hfe(a,e){return function(){return xG(this,a,e.apply(this,arguments))}}function ffe(a,e){return this.each((typeof e=="function"?hfe:ufe)(a,e))}function*pfe(){for(var a=this._groups,e=0,t=a.length;e<t;++e)for(var r=a[e],n=0,i=r.length,o;n<i;++n)(o=r[n])&&(yield o)}var mG=[null];function ko(a,e){this._groups=a,this._parents=e}function Sb(){return new ko([[document.documentElement]],mG)}function xfe(){return this}ko.prototype=Sb.prototype={constructor:ko,select:Vue,selectAll:Wue,selectChild:Xue,selectChildren:Jue,filter:ehe,data:she,enter:the,exit:lhe,join:che,merge:dhe,selection:xfe,order:uhe,sort:hhe,call:phe,nodes:xhe,node:mhe,size:ghe,empty:vhe,each:bhe,attr:khe,style:Mhe,property:Rhe,classed:Bhe,text:Hhe,html:$he,raise:qhe,lower:Zhe,append:Khe,insert:Jhe,remove:tfe,clone:nfe,datum:ife,on:dfe,dispatch:ffe,[Symbol.iterator]:pfe};function Jf(a){return typeof a=="string"?new ko([[document.querySelector(a)]],[document.documentElement]):new ko([[a]],mG)}function mfe(a){let e;for(;e=a.sourceEvent;)a=e;return a}function PL(a,e){if(a=mfe(a),e===void 0&&(e=a.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=a.clientX,r.y=a.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var n=e.getBoundingClientRect();return[a.clientX-n.left-e.clientLeft,a.clientY-n.top-e.clientTop]}}return[a.pageX,a.pageY]}const gfe={passive:!1},Iv={capture:!0,passive:!1};function tk(a){a.stopImmediatePropagation()}function ix(a){a.preventDefault(),a.stopImmediatePropagation()}function vfe(a){var e=a.document.documentElement,t=Jf(a).on("dragstart.drag",ix,Iv);"onselectstart"in e?t.on("selectstart.drag",ix,Iv):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function bfe(a,e){var t=a.document.documentElement,r=Jf(a).on("dragstart.drag",null);e&&(r.on("click.drag",ix,Iv),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const iy=a=>()=>a;function u4(a,{sourceEvent:e,subject:t,target:r,identifier:n,active:i,x:o,y:l,dx:c,dy:d,dispatch:u}){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:n,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:u}})}u4.prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a};function yfe(a){return!a.ctrlKey&&!a.button}function wfe(){return this.parentNode}function _fe(a,e){return e??{x:a.x,y:a.y}}function Nfe(){return navigator.maxTouchPoints||"ontouchstart"in this}function jfe(){var a=yfe,e=wfe,t=_fe,r=Nfe,n={},i=K_("start","drag","end"),o=0,l,c,d,u,h=0;function f(D){D.on("mousedown.drag",p).filter(r).on("touchstart.drag",w).on("touchmove.drag",_,gfe).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(D,I){if(!(u||!a.call(this,D,I))){var O=T(this,e.call(this,D,I),D,I,"mouse");O&&(Jf(D.view).on("mousemove.drag",g,Iv).on("mouseup.drag",b,Iv),vfe(D.view),tk(D),d=!1,l=D.clientX,c=D.clientY,O("start",D))}}function g(D){if(ix(D),!d){var I=D.clientX-l,O=D.clientY-c;d=I*I+O*O>h}n.mouse("drag",D)}function b(D){Jf(D.view).on("mousemove.drag mouseup.drag",null),bfe(D.view,d),ix(D),n.mouse("end",D)}function w(D,I){if(a.call(this,D,I)){var O=D.changedTouches,P=e.call(this,D,I),V=O.length,G,Q;for(G=0;G<V;++G)(Q=T(this,P,D,I,O[G].identifier,O[G]))&&(tk(D),Q("start",D,O[G]))}}function _(D){var I=D.changedTouches,O=I.length,P,V;for(P=0;P<O;++P)(V=n[I[P].identifier])&&(ix(D),V("drag",D,I[P]))}function k(D){var I=D.changedTouches,O=I.length,P,V;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),P=0;P<O;++P)(V=n[I[P].identifier])&&(tk(D),V("end",D,I[P]))}function T(D,I,O,P,V,G){var Q=i.copy(),$=PL(G||O,I),ae,J,U;if((U=t.call(D,new u4("beforestart",{sourceEvent:O,target:f,identifier:V,active:o,x:$[0],y:$[1],dx:0,dy:0,dispatch:Q}),P))!=null)return ae=U.x-$[0]||0,J=U.y-$[1]||0,function F(W,K,ee){var ne=$,re;switch(W){case"start":n[V]=F,re=o++;break;case"end":delete n[V],--o;case"drag":$=PL(ee||K,I),re=o;break}Q.call(W,D,new u4(W,{sourceEvent:K,subject:U,target:f,identifier:V,active:re,x:$[0]+ae,y:$[1]+J,dx:$[0]-ne[0],dy:$[1]-ne[1],dispatch:Q}),P)}}return f.filter=function(D){return arguments.length?(a=typeof D=="function"?D:iy(!!D),f):a},f.container=function(D){return arguments.length?(e=typeof D=="function"?D:iy(D),f):e},f.subject=function(D){return arguments.length?(t=typeof D=="function"?D:iy(D),f):t},f.touchable=function(D){return arguments.length?(r=typeof D=="function"?D:iy(!!D),f):r},f.on=function(){var D=i.on.apply(i,arguments);return D===i?f:D},f.clickDistance=function(D){return arguments.length?(h=(D=+D)*D,f):Math.sqrt(h)},f}function gT(a,e,t){a.prototype=e.prototype=t,t.constructor=a}function gG(a,e){var t=Object.create(a.prototype);for(var r in e)t[r]=e[r];return t}function kb(){}var Rv=.7,w2=1/Rv,sx="\\s*([+-]?\\d+)\\s*",Lv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sfe=/^#([0-9a-f]{3,8})$/,kfe=new RegExp(`^rgb\\(${sx},${sx},${sx}\\)$`),Cfe=new RegExp(`^rgb\\(${vc},${vc},${vc}\\)$`),Afe=new RegExp(`^rgba\\(${sx},${sx},${sx},${Lv}\\)$`),Tfe=new RegExp(`^rgba\\(${vc},${vc},${vc},${Lv}\\)$`),Mfe=new RegExp(`^hsl\\(${Lv},${vc},${vc}\\)$`),Efe=new RegExp(`^hsla\\(${Lv},${vc},${vc},${Lv}\\)$`),BL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gT(kb,Ov,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:zL,formatHex:zL,formatHex8:Dfe,formatHsl:Ife,formatRgb:FL,toString:FL});function zL(){return this.rgb().formatHex()}function Dfe(){return this.rgb().formatHex8()}function Ife(){return vG(this).formatHsl()}function FL(){return this.rgb().formatRgb()}function Ov(a){var e,t;return a=(a+"").trim().toLowerCase(),(e=Sfe.exec(a))?(t=e[1].length,e=parseInt(e[1],16),t===6?VL(e):t===3?new Ys(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?sy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?sy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=kfe.exec(a))?new Ys(e[1],e[2],e[3],1):(e=Cfe.exec(a))?new Ys(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Afe.exec(a))?sy(e[1],e[2],e[3],e[4]):(e=Tfe.exec(a))?sy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Mfe.exec(a))?GL(e[1],e[2]/100,e[3]/100,1):(e=Efe.exec(a))?GL(e[1],e[2]/100,e[3]/100,e[4]):BL.hasOwnProperty(a)?VL(BL[a]):a==="transparent"?new Ys(NaN,NaN,NaN,0):null}function VL(a){return new Ys(a>>16&255,a>>8&255,a&255,1)}function sy(a,e,t,r){return r<=0&&(a=e=t=NaN),new Ys(a,e,t,r)}function Rfe(a){return a instanceof kb||(a=Ov(a)),a?(a=a.rgb(),new Ys(a.r,a.g,a.b,a.opacity)):new Ys}function h4(a,e,t,r){return arguments.length===1?Rfe(a):new Ys(a,e,t,r??1)}function Ys(a,e,t,r){this.r=+a,this.g=+e,this.b=+t,this.opacity=+r}gT(Ys,h4,gG(kb,{brighter(a){return a=a==null?w2:Math.pow(w2,a),new Ys(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=a==null?Rv:Math.pow(Rv,a),new Ys(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new Ys(e0(this.r),e0(this.g),e0(this.b),_2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:HL,formatHex:HL,formatHex8:Lfe,formatRgb:UL,toString:UL}));function HL(){return`#${Uf(this.r)}${Uf(this.g)}${Uf(this.b)}`}function Lfe(){return`#${Uf(this.r)}${Uf(this.g)}${Uf(this.b)}${Uf((isNaN(this.opacity)?1:this.opacity)*255)}`}function UL(){const a=_2(this.opacity);return`${a===1?"rgb(":"rgba("}${e0(this.r)}, ${e0(this.g)}, ${e0(this.b)}${a===1?")":`, ${a})`}`}function _2(a){return isNaN(a)?1:Math.max(0,Math.min(1,a))}function e0(a){return Math.max(0,Math.min(255,Math.round(a)||0))}function Uf(a){return a=e0(a),(a<16?"0":"")+a.toString(16)}function GL(a,e,t,r){return r<=0?a=e=t=NaN:t<=0||t>=1?a=e=NaN:e<=0&&(a=NaN),new bl(a,e,t,r)}function vG(a){if(a instanceof bl)return new bl(a.h,a.s,a.l,a.opacity);if(a instanceof kb||(a=Ov(a)),!a)return new bl;if(a instanceof bl)return a;a=a.rgb();var e=a.r/255,t=a.g/255,r=a.b/255,n=Math.min(e,t,r),i=Math.max(e,t,r),o=NaN,l=i-n,c=(i+n)/2;return l?(e===i?o=(t-r)/l+(t<r)*6:t===i?o=(r-e)/l+2:o=(e-t)/l+4,l/=c<.5?i+n:2-i-n,o*=60):l=c>0&&c<1?0:o,new bl(o,l,c,a.opacity)}function Ofe(a,e,t,r){return arguments.length===1?vG(a):new bl(a,e,t,r??1)}function bl(a,e,t,r){this.h=+a,this.s=+e,this.l=+t,this.opacity=+r}gT(bl,Ofe,gG(kb,{brighter(a){return a=a==null?w2:Math.pow(w2,a),new bl(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=a==null?Rv:Math.pow(Rv,a),new bl(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+(this.h<0)*360,e=isNaN(a)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,n=2*t-r;return new Ys(ak(a>=240?a-240:a+120,n,r),ak(a,n,r),ak(a<120?a+240:a-120,n,r),this.opacity)},clamp(){return new bl(WL(this.h),oy(this.s),oy(this.l),_2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const a=_2(this.opacity);return`${a===1?"hsl(":"hsla("}${WL(this.h)}, ${oy(this.s)*100}%, ${oy(this.l)*100}%${a===1?")":`, ${a})`}`}}));function WL(a){return a=(a||0)%360,a<0?a+360:a}function oy(a){return Math.max(0,Math.min(1,a||0))}function ak(a,e,t){return(a<60?e+(t-e)*a/60:a<180?t:a<240?e+(t-e)*(240-a)/60:e)*255}const bG=a=>()=>a;function Pfe(a,e){return function(t){return a+t*e}}function Bfe(a,e,t){return a=Math.pow(a,t),e=Math.pow(e,t)-a,t=1/t,function(r){return Math.pow(a+r*e,t)}}function zfe(a){return(a=+a)==1?yG:function(e,t){return t-e?Bfe(e,t,a):bG(isNaN(e)?t:e)}}function yG(a,e){var t=e-a;return t?Pfe(a,t):bG(isNaN(a)?e:a)}const $L=(function a(e){var t=zfe(e);function r(n,i){var o=t((n=h4(n)).r,(i=h4(i)).r),l=t(n.g,i.g),c=t(n.b,i.b),d=yG(n.opacity,i.opacity);return function(u){return n.r=o(u),n.g=l(u),n.b=c(u),n.opacity=d(u),n+""}}return r.gamma=a,r})(1);function Pu(a,e){return a=+a,e=+e,function(t){return a*(1-t)+e*t}}var f4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rk=new RegExp(f4.source,"g");function Ffe(a){return function(){return a}}function Vfe(a){return function(e){return a(e)+""}}function Hfe(a,e){var t=f4.lastIndex=rk.lastIndex=0,r,n,i,o=-1,l=[],c=[];for(a=a+"",e=e+"";(r=f4.exec(a))&&(n=rk.exec(e));)(i=n.index)>t&&(i=e.slice(t,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(n=n[0])?l[o]?l[o]+=n:l[++o]=n:(l[++o]=null,c.push({i:o,x:Pu(r,n)})),t=rk.lastIndex;return t<e.length&&(i=e.slice(t),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?Vfe(c[0].x):Ffe(e):(e=c.length,function(d){for(var u=0,h;u<e;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}var YL=180/Math.PI,p4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wG(a,e,t,r,n,i){var o,l,c;return(o=Math.sqrt(a*a+e*e))&&(a/=o,e/=o),(c=a*t+e*r)&&(t-=a*c,r-=e*c),(l=Math.sqrt(t*t+r*r))&&(t/=l,r/=l,c/=l),a*r<e*t&&(a=-a,e=-e,c=-c,o=-o),{translateX:n,translateY:i,rotate:Math.atan2(e,a)*YL,skewX:Math.atan(c)*YL,scaleX:o,scaleY:l}}var ly;function Ufe(a){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(a+"");return e.isIdentity?p4:wG(e.a,e.b,e.c,e.d,e.e,e.f)}function Gfe(a){return a==null||(ly||(ly=document.createElementNS("http://www.w3.org/2000/svg","g")),ly.setAttribute("transform",a),!(a=ly.transform.baseVal.consolidate()))?p4:(a=a.matrix,wG(a.a,a.b,a.c,a.d,a.e,a.f))}function _G(a,e,t,r){function n(d){return d.length?d.pop()+" ":""}function i(d,u,h,f,p,g){if(d!==h||u!==f){var b=p.push("translate(",null,e,null,t);g.push({i:b-4,x:Pu(d,h)},{i:b-2,x:Pu(u,f)})}else(h||f)&&p.push("translate("+h+e+f+t)}function o(d,u,h,f){d!==u?(d-u>180?u+=360:u-d>180&&(d+=360),f.push({i:h.push(n(h)+"rotate(",null,r)-2,x:Pu(d,u)})):u&&h.push(n(h)+"rotate("+u+r)}function l(d,u,h,f){d!==u?f.push({i:h.push(n(h)+"skewX(",null,r)-2,x:Pu(d,u)}):u&&h.push(n(h)+"skewX("+u+r)}function c(d,u,h,f,p,g){if(d!==h||u!==f){var b=p.push(n(p)+"scale(",null,",",null,")");g.push({i:b-4,x:Pu(d,h)},{i:b-2,x:Pu(u,f)})}else(h!==1||f!==1)&&p.push(n(p)+"scale("+h+","+f+")")}return function(d,u){var h=[],f=[];return d=a(d),u=a(u),i(d.translateX,d.translateY,u.translateX,u.translateY,h,f),o(d.rotate,u.rotate,h,f),l(d.skewX,u.skewX,h,f),c(d.scaleX,d.scaleY,u.scaleX,u.scaleY,h,f),d=u=null,function(p){for(var g=-1,b=f.length,w;++g<b;)h[(w=f[g]).i]=w.x(p);return h.join("")}}}var Wfe=_G(Ufe,"px, ","px)","deg)"),$fe=_G(Gfe,", ",")",")"),_x=0,Pg=0,$m=0,NG=1e3,N2,Bg,j2=0,m0=0,J_=0,Pv=typeof performance=="object"&&performance.now?performance:Date,jG=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};function vT(){return m0||(jG(Yfe),m0=Pv.now()+J_)}function Yfe(){m0=0}function S2(){this._call=this._time=this._next=null}S2.prototype=bT.prototype={constructor:S2,restart:function(a,e,t){if(typeof a!="function")throw new TypeError("callback is not a function");t=(t==null?vT():+t)+(e==null?0:+e),!this._next&&Bg!==this&&(Bg?Bg._next=this:N2=this,Bg=this),this._call=a,this._time=t,x4()},stop:function(){this._call&&(this._call=null,this._time=1/0,x4())}};function bT(a,e,t){var r=new S2;return r.restart(a,e,t),r}function qfe(){vT(),++_x;for(var a=N2,e;a;)(e=m0-a._time)>=0&&a._call.call(void 0,e),a=a._next;--_x}function qL(){m0=(j2=Pv.now())+J_,_x=Pg=0;try{qfe()}finally{_x=0,Zfe(),m0=0}}function Xfe(){var a=Pv.now(),e=a-j2;e>NG&&(J_-=e,j2=a)}function Zfe(){for(var a,e=N2,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),a=e,e=e._next):(t=e._next,e._next=null,e=a?a._next=t:N2=t);Bg=a,x4(r)}function x4(a){if(!_x){Pg&&(Pg=clearTimeout(Pg));var e=a-m0;e>24?(a<1/0&&(Pg=setTimeout(qL,a-Pv.now()-J_)),$m&&($m=clearInterval($m))):($m||(j2=Pv.now(),$m=setInterval(Xfe,NG)),_x=1,jG(qL))}}function XL(a,e,t){var r=new S2;return e=e==null?0:+e,r.restart(n=>{r.stop(),a(n+e)},e,t),r}var Kfe=K_("start","end","cancel","interrupt"),Qfe=[],SG=0,ZL=1,m4=2,Ew=3,KL=4,g4=5,Dw=6;function eN(a,e,t,r,n,i){var o=a.__transition;if(!o)a.__transition={};else if(t in o)return;Jfe(a,t,{name:e,index:r,group:n,on:Kfe,tween:Qfe,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:SG})}function yT(a,e){var t=Dl(a,e);if(t.state>SG)throw new Error("too late; already scheduled");return t}function Rc(a,e){var t=Dl(a,e);if(t.state>Ew)throw new Error("too late; already running");return t}function Dl(a,e){var t=a.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function Jfe(a,e,t){var r=a.__transition,n;r[e]=t,t.timer=bT(i,0,t.time);function i(d){t.state=ZL,t.timer.restart(o,t.delay,t.time),t.delay<=d&&o(d-t.delay)}function o(d){var u,h,f,p;if(t.state!==ZL)return c();for(u in r)if(p=r[u],p.name===t.name){if(p.state===Ew)return XL(o);p.state===KL?(p.state=Dw,p.timer.stop(),p.on.call("interrupt",a,a.__data__,p.index,p.group),delete r[u]):+u<e&&(p.state=Dw,p.timer.stop(),p.on.call("cancel",a,a.__data__,p.index,p.group),delete r[u])}if(XL(function(){t.state===Ew&&(t.state=KL,t.timer.restart(l,t.delay,t.time),l(d))}),t.state=m4,t.on.call("start",a,a.__data__,t.index,t.group),t.state===m4){for(t.state=Ew,n=new Array(f=t.tween.length),u=0,h=-1;u<f;++u)(p=t.tween[u].value.call(a,a.__data__,t.index,t.group))&&(n[++h]=p);n.length=h+1}}function l(d){for(var u=d<t.duration?t.ease.call(null,d/t.duration):(t.timer.restart(c),t.state=g4,1),h=-1,f=n.length;++h<f;)n[h].call(a,u);t.state===g4&&(t.on.call("end",a,a.__data__,t.index,t.group),c())}function c(){t.state=Dw,t.timer.stop(),delete r[e];for(var d in r)return;delete a.__transition}}function e0e(a,e){var t=a.__transition,r,n,i=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((r=t[o]).name!==e){i=!1;continue}n=r.state>m4&&r.state<g4,r.state=Dw,r.timer.stop(),r.on.call(n?"interrupt":"cancel",a,a.__data__,r.index,r.group),delete t[o]}i&&delete a.__transition}}function t0e(a){return this.each(function(){e0e(this,a)})}function a0e(a,e){var t,r;return function(){var n=Rc(this,a),i=n.tween;if(i!==t){r=t=i;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}n.tween=r}}function r0e(a,e,t){var r,n;if(typeof t!="function")throw new Error;return function(){var i=Rc(this,a),o=i.tween;if(o!==r){n=(r=o).slice();for(var l={name:e,value:t},c=0,d=n.length;c<d;++c)if(n[c].name===e){n[c]=l;break}c===d&&n.push(l)}i.tween=n}}function n0e(a,e){var t=this._id;if(a+="",arguments.length<2){for(var r=Dl(this.node(),t).tween,n=0,i=r.length,o;n<i;++n)if((o=r[n]).name===a)return o.value;return null}return this.each((e==null?a0e:r0e)(t,a,e))}function wT(a,e,t){var r=a._id;return a.each(function(){var n=Rc(this,r);(n.value||(n.value={}))[e]=t.apply(this,arguments)}),function(n){return Dl(n,r).value[e]}}function kG(a,e){var t;return(typeof e=="number"?Pu:e instanceof Ov?$L:(t=Ov(e))?(e=t,$L):Hfe)(a,e)}function i0e(a){return function(){this.removeAttribute(a)}}function s0e(a){return function(){this.removeAttributeNS(a.space,a.local)}}function o0e(a,e,t){var r,n=t+"",i;return function(){var o=this.getAttribute(a);return o===n?null:o===r?i:i=e(r=o,t)}}function l0e(a,e,t){var r,n=t+"",i;return function(){var o=this.getAttributeNS(a.space,a.local);return o===n?null:o===r?i:i=e(r=o,t)}}function c0e(a,e,t){var r,n,i;return function(){var o,l=t(this),c;return l==null?void this.removeAttribute(a):(o=this.getAttribute(a),c=l+"",o===c?null:o===r&&c===n?i:(n=c,i=e(r=o,l)))}}function d0e(a,e,t){var r,n,i;return function(){var o,l=t(this),c;return l==null?void this.removeAttributeNS(a.space,a.local):(o=this.getAttributeNS(a.space,a.local),c=l+"",o===c?null:o===r&&c===n?i:(n=c,i=e(r=o,l)))}}function u0e(a,e){var t=Q_(a),r=t==="transform"?$fe:kG;return this.attrTween(a,typeof e=="function"?(t.local?d0e:c0e)(t,r,wT(this,"attr."+a,e)):e==null?(t.local?s0e:i0e)(t):(t.local?l0e:o0e)(t,r,e))}function h0e(a,e){return function(t){this.setAttribute(a,e.call(this,t))}}function f0e(a,e){return function(t){this.setAttributeNS(a.space,a.local,e.call(this,t))}}function p0e(a,e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&f0e(a,i)),t}return n._value=e,n}function x0e(a,e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&h0e(a,i)),t}return n._value=e,n}function m0e(a,e){var t="attr."+a;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=Q_(a);return this.tween(t,(r.local?p0e:x0e)(r,e))}function g0e(a,e){return function(){yT(this,a).delay=+e.apply(this,arguments)}}function v0e(a,e){return e=+e,function(){yT(this,a).delay=e}}function b0e(a){var e=this._id;return arguments.length?this.each((typeof a=="function"?g0e:v0e)(e,a)):Dl(this.node(),e).delay}function y0e(a,e){return function(){Rc(this,a).duration=+e.apply(this,arguments)}}function w0e(a,e){return e=+e,function(){Rc(this,a).duration=e}}function _0e(a){var e=this._id;return arguments.length?this.each((typeof a=="function"?y0e:w0e)(e,a)):Dl(this.node(),e).duration}function N0e(a,e){if(typeof e!="function")throw new Error;return function(){Rc(this,a).ease=e}}function j0e(a){var e=this._id;return arguments.length?this.each(N0e(e,a)):Dl(this.node(),e).ease}function S0e(a,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Rc(this,a).ease=t}}function k0e(a){if(typeof a!="function")throw new Error;return this.each(S0e(this._id,a))}function C0e(a){typeof a!="function"&&(a=oG(a));for(var e=this._groups,t=e.length,r=new Array(t),n=0;n<t;++n)for(var i=e[n],o=i.length,l=r[n]=[],c,d=0;d<o;++d)(c=i[d])&&a.call(c,c.__data__,d,i)&&l.push(c);return new Dd(r,this._parents,this._name,this._id)}function A0e(a){if(a._id!==this._id)throw new Error;for(var e=this._groups,t=a._groups,r=e.length,n=t.length,i=Math.min(r,n),o=new Array(r),l=0;l<i;++l)for(var c=e[l],d=t[l],u=c.length,h=o[l]=new Array(u),f,p=0;p<u;++p)(f=c[p]||d[p])&&(h[p]=f);for(;l<r;++l)o[l]=e[l];return new Dd(o,this._parents,this._name,this._id)}function T0e(a){return(a+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function M0e(a,e,t){var r,n,i=T0e(e)?yT:Rc;return function(){var o=i(this,a),l=o.on;l!==r&&(n=(r=l).copy()).on(e,t),o.on=n}}function E0e(a,e){var t=this._id;return arguments.length<2?Dl(this.node(),t).on.on(a):this.each(M0e(t,a,e))}function D0e(a){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==a)return;e&&e.removeChild(this)}}function I0e(){return this.on("end.remove",D0e(this._id))}function R0e(a){var e=this._name,t=this._id;typeof a!="function"&&(a=xT(a));for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o)for(var l=r[o],c=l.length,d=i[o]=new Array(c),u,h,f=0;f<c;++f)(u=l[f])&&(h=a.call(u,u.__data__,f,l))&&("__data__"in u&&(h.__data__=u.__data__),d[f]=h,eN(d[f],e,t,f,d,Dl(u,t)));return new Dd(i,this._parents,e,t)}function L0e(a){var e=this._name,t=this._id;typeof a!="function"&&(a=sG(a));for(var r=this._groups,n=r.length,i=[],o=[],l=0;l<n;++l)for(var c=r[l],d=c.length,u,h=0;h<d;++h)if(u=c[h]){for(var f=a.call(u,u.__data__,h,c),p,g=Dl(u,t),b=0,w=f.length;b<w;++b)(p=f[b])&&eN(p,e,t,b,f,g);i.push(f),o.push(u)}return new Dd(i,o,e,t)}var O0e=Sb.prototype.constructor;function P0e(){return new O0e(this._groups,this._parents)}function B0e(a,e){var t,r,n;return function(){var i=yx(this,a),o=(this.style.removeProperty(a),yx(this,a));return i===o?null:i===t&&o===r?n:n=e(t=i,r=o)}}function CG(a){return function(){this.style.removeProperty(a)}}function z0e(a,e,t){var r,n=t+"",i;return function(){var o=yx(this,a);return o===n?null:o===r?i:i=e(r=o,t)}}function F0e(a,e,t){var r,n,i;return function(){var o=yx(this,a),l=t(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(a),yx(this,a))),o===c?null:o===r&&c===n?i:(n=c,i=e(r=o,l))}}function V0e(a,e){var t,r,n,i="style."+e,o="end."+i,l;return function(){var c=Rc(this,a),d=c.on,u=c.value[i]==null?l||(l=CG(e)):void 0;(d!==t||n!==u)&&(r=(t=d).copy()).on(o,n=u),c.on=r}}function H0e(a,e,t){var r=(a+="")=="transform"?Wfe:kG;return e==null?this.styleTween(a,B0e(a,r)).on("end.style."+a,CG(a)):typeof e=="function"?this.styleTween(a,F0e(a,r,wT(this,"style."+a,e))).each(V0e(this._id,a)):this.styleTween(a,z0e(a,r,e),t).on("end.style."+a,null)}function U0e(a,e,t){return function(r){this.style.setProperty(a,e.call(this,r),t)}}function G0e(a,e,t){var r,n;function i(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&U0e(a,o,t)),r}return i._value=e,i}function W0e(a,e,t){var r="style."+(a+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,G0e(a,e,t??""))}function $0e(a){return function(){this.textContent=a}}function Y0e(a){return function(){var e=a(this);this.textContent=e??""}}function q0e(a){return this.tween("text",typeof a=="function"?Y0e(wT(this,"text",a)):$0e(a==null?"":a+""))}function X0e(a){return function(e){this.textContent=a.call(this,e)}}function Z0e(a){var e,t;function r(){var n=a.apply(this,arguments);return n!==t&&(e=(t=n)&&X0e(n)),e}return r._value=a,r}function K0e(a){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(a==null)return this.tween(e,null);if(typeof a!="function")throw new Error;return this.tween(e,Z0e(a))}function Q0e(){for(var a=this._name,e=this._id,t=AG(),r=this._groups,n=r.length,i=0;i<n;++i)for(var o=r[i],l=o.length,c,d=0;d<l;++d)if(c=o[d]){var u=Dl(c,e);eN(c,a,t,d,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Dd(r,this._parents,a,t)}function J0e(){var a,e,t=this,r=t._id,n=t.size();return new Promise(function(i,o){var l={value:o},c={value:function(){--n===0&&i()}};t.each(function(){var d=Rc(this,r),u=d.on;u!==a&&(e=(a=u).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),d.on=e}),n===0&&i()})}var epe=0;function Dd(a,e,t,r){this._groups=a,this._parents=e,this._name=t,this._id=r}function AG(){return++epe}var sd=Sb.prototype;Dd.prototype={constructor:Dd,select:R0e,selectAll:L0e,selectChild:sd.selectChild,selectChildren:sd.selectChildren,filter:C0e,merge:A0e,selection:P0e,transition:Q0e,call:sd.call,nodes:sd.nodes,node:sd.node,size:sd.size,empty:sd.empty,each:sd.each,on:E0e,attr:u0e,attrTween:m0e,style:H0e,styleTween:W0e,text:q0e,textTween:K0e,remove:I0e,tween:n0e,delay:b0e,duration:_0e,ease:j0e,easeVarying:k0e,end:J0e,[Symbol.iterator]:sd[Symbol.iterator]};function tpe(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}var ape={time:null,delay:0,duration:250,ease:tpe};function rpe(a,e){for(var t;!(t=a.__transition)||!(t=t[e]);)if(!(a=a.parentNode))throw new Error(`transition ${e} not found`);return t}function npe(a){var e,t;a instanceof Dd?(e=a._id,a=a._name):(e=AG(),(t=ape).time=vT(),a=a==null?null:a+"");for(var r=this._groups,n=r.length,i=0;i<n;++i)for(var o=r[i],l=o.length,c,d=0;d<l;++d)(c=o[d])&&eN(c,a,e,d,o,t||rpe(c,e));return new Dd(r,this._parents,a,e)}Sb.prototype.interrupt=t0e;Sb.prototype.transition=npe;function ipe(a,e){var t,r=1;a==null&&(a=0),e==null&&(e=0);function n(){var i,o=t.length,l,c=0,d=0;for(i=0;i<o;++i)l=t[i],c+=l.x,d+=l.y;for(c=(c/o-a)*r,d=(d/o-e)*r,i=0;i<o;++i)l=t[i],l.x-=c,l.y-=d}return n.initialize=function(i){t=i},n.x=function(i){return arguments.length?(a=+i,n):a},n.y=function(i){return arguments.length?(e=+i,n):e},n.strength=function(i){return arguments.length?(r=+i,n):r},n}function spe(a){const e=+this._x.call(null,a),t=+this._y.call(null,a);return TG(this.cover(e,t),e,t,a)}function TG(a,e,t,r){if(isNaN(e)||isNaN(t))return a;var n,i=a._root,o={data:r},l=a._x0,c=a._y0,d=a._x1,u=a._y1,h,f,p,g,b,w,_,k;if(!i)return a._root=o,a;for(;i.length;)if((b=e>=(h=(l+d)/2))?l=h:d=h,(w=t>=(f=(c+u)/2))?c=f:u=f,n=i,!(i=i[_=w<<1|b]))return n[_]=o,a;if(p=+a._x.call(null,i.data),g=+a._y.call(null,i.data),e===p&&t===g)return o.next=i,n?n[_]=o:a._root=o,a;do n=n?n[_]=new Array(4):a._root=new Array(4),(b=e>=(h=(l+d)/2))?l=h:d=h,(w=t>=(f=(c+u)/2))?c=f:u=f;while((_=w<<1|b)===(k=(g>=f)<<1|p>=h));return n[k]=i,n[_]=o,a}function ope(a){var e,t,r=a.length,n,i,o=new Array(r),l=new Array(r),c=1/0,d=1/0,u=-1/0,h=-1/0;for(t=0;t<r;++t)isNaN(n=+this._x.call(null,e=a[t]))||isNaN(i=+this._y.call(null,e))||(o[t]=n,l[t]=i,n<c&&(c=n),n>u&&(u=n),i<d&&(d=i),i>h&&(h=i));if(c>u||d>h)return this;for(this.cover(c,d).cover(u,h),t=0;t<r;++t)TG(this,o[t],l[t],a[t]);return this}function lpe(a,e){if(isNaN(a=+a)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,n=this._x1,i=this._y1;if(isNaN(t))n=(t=Math.floor(a))+1,i=(r=Math.floor(e))+1;else{for(var o=n-t||1,l=this._root,c,d;t>a||a>=n||r>e||e>=i;)switch(d=(e<r)<<1|a<t,c=new Array(4),c[d]=l,l=c,o*=2,d){case 0:n=t+o,i=r+o;break;case 1:t=n-o,i=r+o;break;case 2:n=t+o,r=i-o;break;case 3:t=n-o,r=i-o;break}this._root&&this._root.length&&(this._root=l)}return this._x0=t,this._y0=r,this._x1=n,this._y1=i,this}function cpe(){var a=[];return this.visit(function(e){if(!e.length)do a.push(e.data);while(e=e.next)}),a}function dpe(a){return arguments.length?this.cover(+a[0][0],+a[0][1]).cover(+a[1][0],+a[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ns(a,e,t,r,n){this.node=a,this.x0=e,this.y0=t,this.x1=r,this.y1=n}function upe(a,e,t){var r,n=this._x0,i=this._y0,o,l,c,d,u=this._x1,h=this._y1,f=[],p=this._root,g,b;for(p&&f.push(new Ns(p,n,i,u,h)),t==null?t=1/0:(n=a-t,i=e-t,u=a+t,h=e+t,t*=t);g=f.pop();)if(!(!(p=g.node)||(o=g.x0)>u||(l=g.y0)>h||(c=g.x1)<n||(d=g.y1)<i))if(p.length){var w=(o+c)/2,_=(l+d)/2;f.push(new Ns(p[3],w,_,c,d),new Ns(p[2],o,_,w,d),new Ns(p[1],w,l,c,_),new Ns(p[0],o,l,w,_)),(b=(e>=_)<<1|a>=w)&&(g=f[f.length-1],f[f.length-1]=f[f.length-1-b],f[f.length-1-b]=g)}else{var k=a-+this._x.call(null,p.data),T=e-+this._y.call(null,p.data),D=k*k+T*T;if(D<t){var I=Math.sqrt(t=D);n=a-I,i=e-I,u=a+I,h=e+I,r=p.data}}return r}function hpe(a){if(isNaN(u=+this._x.call(null,a))||isNaN(h=+this._y.call(null,a)))return this;var e,t=this._root,r,n,i,o=this._x0,l=this._y0,c=this._x1,d=this._y1,u,h,f,p,g,b,w,_;if(!t)return this;if(t.length)for(;;){if((g=u>=(f=(o+c)/2))?o=f:c=f,(b=h>=(p=(l+d)/2))?l=p:d=p,e=t,!(t=t[w=b<<1|g]))return this;if(!t.length)break;(e[w+1&3]||e[w+2&3]||e[w+3&3])&&(r=e,_=w)}for(;t.data!==a;)if(n=t,!(t=t.next))return this;return(i=t.next)&&delete t.next,n?(i?n.next=i:delete n.next,this):e?(i?e[w]=i:delete e[w],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[_]=t:this._root=t),this):(this._root=i,this)}function fpe(a){for(var e=0,t=a.length;e<t;++e)this.remove(a[e]);return this}function ppe(){return this._root}function xpe(){var a=0;return this.visit(function(e){if(!e.length)do++a;while(e=e.next)}),a}function mpe(a){var e=[],t,r=this._root,n,i,o,l,c;for(r&&e.push(new Ns(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!a(r=t.node,i=t.x0,o=t.y0,l=t.x1,c=t.y1)&&r.length){var d=(i+l)/2,u=(o+c)/2;(n=r[3])&&e.push(new Ns(n,d,u,l,c)),(n=r[2])&&e.push(new Ns(n,i,u,d,c)),(n=r[1])&&e.push(new Ns(n,d,o,l,u)),(n=r[0])&&e.push(new Ns(n,i,o,d,u))}return this}function gpe(a){var e=[],t=[],r;for(this._root&&e.push(new Ns(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var n=r.node;if(n.length){var i,o=r.x0,l=r.y0,c=r.x1,d=r.y1,u=(o+c)/2,h=(l+d)/2;(i=n[0])&&e.push(new Ns(i,o,l,u,h)),(i=n[1])&&e.push(new Ns(i,u,l,c,h)),(i=n[2])&&e.push(new Ns(i,o,h,u,d)),(i=n[3])&&e.push(new Ns(i,u,h,c,d))}t.push(r)}for(;r=t.pop();)a(r.node,r.x0,r.y0,r.x1,r.y1);return this}function vpe(a){return a[0]}function bpe(a){return arguments.length?(this._x=a,this):this._x}function ype(a){return a[1]}function wpe(a){return arguments.length?(this._y=a,this):this._y}function _T(a,e,t){var r=new NT(e??vpe,t??ype,NaN,NaN,NaN,NaN);return a==null?r:r.addAll(a)}function NT(a,e,t,r,n,i){this._x=a,this._y=e,this._x0=t,this._y0=r,this._x1=n,this._y1=i,this._root=void 0}function QL(a){for(var e={data:a.data},t=e;a=a.next;)t=t.next={data:a.data};return e}var As=_T.prototype=NT.prototype;As.copy=function(){var a=new NT(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return a;if(!e.length)return a._root=QL(e),a;for(t=[{source:e,target:a._root=new Array(4)}];e=t.pop();)for(var n=0;n<4;++n)(r=e.source[n])&&(r.length?t.push({source:r,target:e.target[n]=new Array(4)}):e.target[n]=QL(r));return a};As.add=spe;As.addAll=ope;As.cover=lpe;As.data=cpe;As.extent=dpe;As.find=upe;As.remove=hpe;As.removeAll=fpe;As.root=ppe;As.size=xpe;As.visit=mpe;As.visitAfter=gpe;As.x=bpe;As.y=wpe;function t0(a){return function(){return a}}function qu(a){return(a()-.5)*1e-6}function _pe(a){return a.x+a.vx}function Npe(a){return a.y+a.vy}function jpe(a){var e,t,r,n=1,i=1;typeof a!="function"&&(a=t0(a==null?1:+a));function o(){for(var d,u=e.length,h,f,p,g,b,w,_=0;_<i;++_)for(h=_T(e,_pe,Npe).visitAfter(l),d=0;d<u;++d)f=e[d],b=t[f.index],w=b*b,p=f.x+f.vx,g=f.y+f.vy,h.visit(k);function k(T,D,I,O,P){var V=T.data,G=T.r,Q=b+G;if(V){if(V.index>f.index){var $=p-V.x-V.vx,ae=g-V.y-V.vy,J=$*$+ae*ae;J<Q*Q&&($===0&&($=qu(r),J+=$*$),ae===0&&(ae=qu(r),J+=ae*ae),J=(Q-(J=Math.sqrt(J)))/J*n,f.vx+=($*=J)*(Q=(G*=G)/(w+G)),f.vy+=(ae*=J)*Q,V.vx-=$*(Q=1-Q),V.vy-=ae*Q)}return}return D>p+Q||O<p-Q||I>g+Q||P<g-Q}}function l(d){if(d.data)return d.r=t[d.data.index];for(var u=d.r=0;u<4;++u)d[u]&&d[u].r>d.r&&(d.r=d[u].r)}function c(){if(e){var d,u=e.length,h;for(t=new Array(u),d=0;d<u;++d)h=e[d],t[h.index]=+a(h,d,e)}}return o.initialize=function(d,u){e=d,r=u,c()},o.iterations=function(d){return arguments.length?(i=+d,o):i},o.strength=function(d){return arguments.length?(n=+d,o):n},o.radius=function(d){return arguments.length?(a=typeof d=="function"?d:t0(+d),c(),o):a},o}function Spe(a){return a.index}function JL(a,e){var t=a.get(e);if(!t)throw new Error("node not found: "+e);return t}function kpe(a){var e=Spe,t=h,r,n=t0(30),i,o,l,c,d,u=1;a==null&&(a=[]);function h(w){return 1/Math.min(l[w.source.index],l[w.target.index])}function f(w){for(var _=0,k=a.length;_<u;++_)for(var T=0,D,I,O,P,V,G,Q;T<k;++T)D=a[T],I=D.source,O=D.target,P=O.x+O.vx-I.x-I.vx||qu(d),V=O.y+O.vy-I.y-I.vy||qu(d),G=Math.sqrt(P*P+V*V),G=(G-i[T])/G*w*r[T],P*=G,V*=G,O.vx-=P*(Q=c[T]),O.vy-=V*Q,I.vx+=P*(Q=1-Q),I.vy+=V*Q}function p(){if(o){var w,_=o.length,k=a.length,T=new Map(o.map((I,O)=>[e(I,O,o),I])),D;for(w=0,l=new Array(_);w<k;++w)D=a[w],D.index=w,typeof D.source!="object"&&(D.source=JL(T,D.source)),typeof D.target!="object"&&(D.target=JL(T,D.target)),l[D.source.index]=(l[D.source.index]||0)+1,l[D.target.index]=(l[D.target.index]||0)+1;for(w=0,c=new Array(k);w<k;++w)D=a[w],c[w]=l[D.source.index]/(l[D.source.index]+l[D.target.index]);r=new Array(k),g(),i=new Array(k),b()}}function g(){if(o)for(var w=0,_=a.length;w<_;++w)r[w]=+t(a[w],w,a)}function b(){if(o)for(var w=0,_=a.length;w<_;++w)i[w]=+n(a[w],w,a)}return f.initialize=function(w,_){o=w,d=_,p()},f.links=function(w){return arguments.length?(a=w,p(),f):a},f.id=function(w){return arguments.length?(e=w,f):e},f.iterations=function(w){return arguments.length?(u=+w,f):u},f.strength=function(w){return arguments.length?(t=typeof w=="function"?w:t0(+w),g(),f):t},f.distance=function(w){return arguments.length?(n=typeof w=="function"?w:t0(+w),b(),f):n},f}const Cpe=1664525,Ape=1013904223,eO=4294967296;function Tpe(){let a=1;return()=>(a=(Cpe*a+Ape)%eO)/eO}function Mpe(a){return a.x}function Epe(a){return a.y}var Dpe=10,Ipe=Math.PI*(3-Math.sqrt(5));function Rpe(a){var e,t=1,r=.001,n=1-Math.pow(r,1/300),i=0,o=.6,l=new Map,c=bT(h),d=K_("tick","end"),u=Tpe();a==null&&(a=[]);function h(){f(),d.call("tick",e),t<r&&(c.stop(),d.call("end",e))}function f(b){var w,_=a.length,k;b===void 0&&(b=1);for(var T=0;T<b;++T)for(t+=(i-t)*n,l.forEach(function(D){D(t)}),w=0;w<_;++w)k=a[w],k.fx==null?k.x+=k.vx*=o:(k.x=k.fx,k.vx=0),k.fy==null?k.y+=k.vy*=o:(k.y=k.fy,k.vy=0);return e}function p(){for(var b=0,w=a.length,_;b<w;++b){if(_=a[b],_.index=b,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var k=Dpe*Math.sqrt(.5+b),T=b*Ipe;_.x=k*Math.cos(T),_.y=k*Math.sin(T)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function g(b){return b.initialize&&b.initialize(a,u),b}return p(),e={tick:f,restart:function(){return c.restart(h),e},stop:function(){return c.stop(),e},nodes:function(b){return arguments.length?(a=b,p(),l.forEach(g),e):a},alpha:function(b){return arguments.length?(t=+b,e):t},alphaMin:function(b){return arguments.length?(r=+b,e):r},alphaDecay:function(b){return arguments.length?(n=+b,e):+n},alphaTarget:function(b){return arguments.length?(i=+b,e):i},velocityDecay:function(b){return arguments.length?(o=1-b,e):1-o},randomSource:function(b){return arguments.length?(u=b,l.forEach(g),e):u},force:function(b,w){return arguments.length>1?(w==null?l.delete(b):l.set(b,g(w)),e):l.get(b)},find:function(b,w,_){var k=0,T=a.length,D,I,O,P,V;for(_==null?_=1/0:_*=_,k=0;k<T;++k)P=a[k],D=b-P.x,I=w-P.y,O=D*D+I*I,O<_&&(V=P,_=O);return V},on:function(b,w){return arguments.length>1?(d.on(b,w),e):d.on(b)}}}function Lpe(){var a,e,t,r,n=t0(-30),i,o=1,l=1/0,c=.81;function d(p){var g,b=a.length,w=_T(a,Mpe,Epe).visitAfter(h);for(r=p,g=0;g<b;++g)e=a[g],w.visit(f)}function u(){if(a){var p,g=a.length,b;for(i=new Array(g),p=0;p<g;++p)b=a[p],i[b.index]=+n(b,p,a)}}function h(p){var g=0,b,w,_=0,k,T,D;if(p.length){for(k=T=D=0;D<4;++D)(b=p[D])&&(w=Math.abs(b.value))&&(g+=b.value,_+=w,k+=w*b.x,T+=w*b.y);p.x=k/_,p.y=T/_}else{b=p,b.x=b.data.x,b.y=b.data.y;do g+=i[b.data.index];while(b=b.next)}p.value=g}function f(p,g,b,w){if(!p.value)return!0;var _=p.x-e.x,k=p.y-e.y,T=w-g,D=_*_+k*k;if(T*T/c<D)return D<l&&(_===0&&(_=qu(t),D+=_*_),k===0&&(k=qu(t),D+=k*k),D<o&&(D=Math.sqrt(o*D)),e.vx+=_*p.value*r/D,e.vy+=k*p.value*r/D),!0;if(p.length||D>=l)return;(p.data!==e||p.next)&&(_===0&&(_=qu(t),D+=_*_),k===0&&(k=qu(t),D+=k*k),D<o&&(D=Math.sqrt(o*D)));do p.data!==e&&(T=i[p.data.index]*r/D,e.vx+=_*T,e.vy+=k*T);while(p=p.next)}return d.initialize=function(p,g){a=p,t=g,u()},d.strength=function(p){return arguments.length?(n=typeof p=="function"?p:t0(+p),u(),d):n},d.distanceMin=function(p){return arguments.length?(o=p*p,d):Math.sqrt(o)},d.distanceMax=function(p){return arguments.length?(l=p*p,d):Math.sqrt(l)},d.theta=function(p){return arguments.length?(c=p*p,d):Math.sqrt(c)},d}function zg(a,e,t){this.k=a,this.x=e,this.y=t}zg.prototype={constructor:zg,scale:function(a){return a===1?this:new zg(this.k*a,this.x,this.y)},translate:function(a,e){return a===0&e===0?this:new zg(this.k,this.x+this.k*a,this.y+this.k*e)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};zg.prototype;const Ope=()=>{const{showAlert:a}=Na(),[e,t]=H.useState([]),[r,n]=H.useState(!1),[i,o]=H.useState(""),[l,c]=H.useState(!1),[d,u]=H.useState(!1),[h,f]=H.useState(null),[p,g]=H.useState(""),[b,w]=H.useState(!1),[_,k]=H.useState(null),[T,D]=H.useState(""),[I,O]=H.useState(""),[P,V]=H.useState(!1),G=H.useRef(null),Q=H.useRef(null);H.useEffect(()=>{$()},[]);const $=async()=>{n(!0),o("   .     ...");try{const ee=await Pa("get_product_associations",{});t(ee||[])}catch(ee){console.error("Association Analysis Error:",ee),a("","    : "+ee)}finally{n(!1)}};H.useEffect(()=>{if(!e||e.length===0||!G.current){G.current&&(G.current.innerHTML="");return}ae()},[e]);const ae=()=>{const ee=G.current,ne=ee.clientWidth,re=ee.clientHeight||500;ee.innerHTML="";const Z=new Map,ie=[];e.forEach(Ce=>{Z.has(Ce.product_a)||Z.set(Ce.product_a,{id:Ce.product_a,group:1,value:0}),Z.has(Ce.product_b)||Z.set(Ce.product_b,{id:Ce.product_b,group:2,value:0}),Z.get(Ce.product_a).value++,Z.get(Ce.product_b).value++,ie.push({source:Ce.product_a,target:Ce.product_b,value:Ce.pair_count,weight:Ce.support_percent})});const de=Array.from(Z.values()),fe=Jf(ee).append("svg").attr("width",ne).attr("height",re).style("background","transparent"),he=Rpe(de).force("link",kpe(ie).id(Ce=>Ce.id).distance(150)).force("charge",Lpe().strength(-400)).force("center",ipe(ne/2,re/2)).force("collide",jpe().radius(Ce=>Ce.value*3+30)),ve=fe.append("g").attr("stroke","#94a3b8").attr("stroke-opacity",.6).selectAll("line").data(ie).join("line").attr("stroke-width",Ce=>Math.max(1,Math.sqrt(Ce.value))),Oe=Ce=>{const we=Ee=>{Ee.active||Ce.alphaTarget(.3).restart(),Ee.subject.fx=Ee.subject.x,Ee.subject.fy=Ee.subject.y},xe=Ee=>{Ee.subject.fx=Ee.x,Ee.subject.fy=Ee.y},be=Ee=>{Ee.active||Ce.alphaTarget(0),Ee.subject.fx=null,Ee.subject.fy=null};return jfe().on("start",we).on("drag",xe).on("end",be)},Se=fe.append("g").selectAll("g").data(de).join("g").call(Oe(he));Se.append("circle").attr("r",Ce=>Ce.value*2+8).attr("fill",Ce=>Ce.value>5?"#fbbf24":"#6366f1").attr("stroke","#fff").attr("stroke-width",2).style("cursor","pointer").style("filter","drop-shadow(0 4px 3px rgb(0 0 0 / 0.07))").on("mouseover",(Ce,we)=>{Jf(Ce.currentTarget).attr("stroke","#1e293b").attr("stroke-width",3),J(Ce,we,ie)}).on("mouseout",Ce=>{Jf(Ce.currentTarget).attr("stroke","#fff").attr("stroke-width",2),U()}).on("click",(Ce,we)=>{const xe=ie.filter(be=>be.source.id===we.id||be.target.id===we.id).sort((be,Ee)=>Ee.weight-be.weight)[0];if(xe){const be=xe.source.id===we.id?xe.target.id:xe.source.id;F(we.id,be)}}),Se.append("text").text(Ce=>Ce.id).attr("x",14).attr("y",5).style("font-size","12px").style("font-weight","600").style("fill","#334155").style("pointer-events","none").style("text-shadow","2px 2px 0 #fff, -2px -2px 0 #fff, 2px -2px 0 #fff, -2px 2px 0 #fff"),he.on("tick",()=>{ve.attr("x1",Ce=>Ce.source.x).attr("y1",Ce=>Ce.source.y).attr("x2",Ce=>Ce.target.x).attr("y2",Ce=>Ce.target.y),Se.attr("transform",Ce=>`translate(${Ce.x},${Ce.y})`)})},J=(ee,ne,re)=>{if(!Q.current)return;const Z=re.filter(ie=>ie.source.id===ne.id||ie.target.id===ne.id).length;Q.current.style.display="block",Q.current.style.left=ee.nativeEvent.offsetX+20+"px",Q.current.style.top=ee.nativeEvent.offsetY-20+"px",Q.current.innerHTML=`<strong>${ne.id}</strong><br> : ${Z}`},U=()=>{Q.current&&(Q.current.style.display="none")},F=async(ee,ne)=>{c(!0),u(!0),f(null),g("     (Lift & Confidence)  ...");try{g("    ...");const re=await _l(a,"get_ai_marketing_proposal",{p1:ee,p2:ne});f(re)}catch(re){console.error("AI Promo Error:",re),c(!1)}finally{u(!1)}},W=async(ee,ne,re,Z)=>{w(!0),V(!0),k(null),D(ee==="VIRAL"?"  ":"  (Action Plan)"),O(`${ne} + ${re} | : ${Z}`);try{const ie=await _l(a,"get_ai_detailed_plan",{planType:ee,p1:ne,p2:re,strategyTitle:Z});k(K(ie))}catch(ie){console.error("Detailed Plan Error:",ie),k(s.jsxs("div",{className:"text-red-600 p-4",children:[" : ",ie]}))}finally{V(!1)}},K=ee=>ee.split(`
`).map((re,Z)=>{if(re.startsWith("### "))return s.jsx("h4",{className:"mt-6 mb-3 text-lg font-bold text-indigo-700 bg-slate-50 p-3 rounded-lg border-l-4 border-indigo-500 text-center",children:re.replace("### ","")},Z);if(re.startsWith("## "))return s.jsx("h3",{className:"mt-8 mb-4 text-xl font-bold text-slate-800 border-b-2 border-slate-200 pb-2 text-center",children:re.replace("## ","")},Z);if(re.startsWith("- "))return s.jsxs("div",{className:"ml-4 mb-2 flex gap-2 text-slate-600",children:[s.jsx("span",{className:"text-slate-300",children:""}),re.replace("- ","").replace(/\*\*(.*?)\*\*/g,"$1")]},Z);if(re.match(/^\d+\./)){const ie=re.split(" "),de=ie.shift();return s.jsxs("div",{className:"mt-4 mb-2 font-bold text-slate-800 flex gap-2",children:[s.jsx("span",{className:"text-indigo-600",children:de}),ie.join(" ")]},Z)}return re.startsWith("|")?s.jsx("div",{className:"overflow-x-auto my-4 text-xs text-slate-500",children:"[   -    ]"},Z):s.jsx("p",{className:"mb-2 leading-relaxed text-slate-700",children:re.replace(/\*\*(.*?)\*\*/g,"$1")},Z)});return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-amber-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-amber-500 uppercase",children:"Market Intelligence"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Basket Analysis"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"hub"}),"         ."]})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 gap-6 px-6 lg:px-8 pb-8 min-h-0 overflow-hidden",children:[s.jsxs("div",{className:"flex-[2] bg-white rounded-[1.5rem] border border-slate-200 shadow-sm relative flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center bg-white/50 backdrop-blur-sm z-10",children:[s.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"bubble_chart"}),"  "]}),s.jsxs("div",{className:"text-xs font-medium text-slate-400 flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-amber-400"})," "]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-indigo-500"})," "]})]})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-50/30",children:[s.jsx("div",{className:"absolute inset-0 z-0",ref:G}),r&&s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white/80 z-20 backdrop-blur-sm",children:[s.jsx("span",{className:"material-symbols-rounded animate-spin text-4xl text-indigo-500 mb-4",children:"sync"}),s.jsx("p",{className:"text-slate-500 font-medium",children:i})]}),!r&&e.length===0&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-slate-400 z-10 pointer-events-none",children:"  ."}),s.jsx("div",{ref:Q,className:"absolute hidden bg-slate-900/90 text-white text-xs px-3 py-2 rounded-lg pointer-events-none z-30 shadow-xl backdrop-blur-md border border-slate-700/50"})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col gap-6 min-w-[350px] overflow-y-auto custom-scrollbar",children:[s.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-[1.5rem] p-6 text-white shadow-xl relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/20 rounded-full blur-3xl -translate-y-10 translate-x-10 group-hover:bg-indigo-500/30 transition-all duration-700"}),s.jsxs("div",{className:"flex items-center gap-2 mb-6 relative z-10",children:[s.jsx("span",{className:"material-symbols-rounded text-amber-400 text-2xl animate-pulse",children:"lightbulb"}),s.jsx("h3",{className:"text-lg font-bold",children:"In-Depth Insights"})]}),s.jsx("div",{className:"space-y-4 relative z-10",children:e.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-amber-400 mb-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-amber-400 animate-ping"}),"LIVE AI ANALYSIS"]}),s.jsxs("p",{className:"text-slate-200 leading-relaxed text-sm",children:["   ",s.jsx("strong",{className:"text-white bg-indigo-600/50 px-1 rounded mx-1",children:e[0].product_a}),"",s.jsx("strong",{className:"text-white bg-indigo-600/50 px-1 rounded mx-1",children:e[0].product_b}),"     ."]}),s.jsx("div",{className:"bg-white/10 border-l-4 border-amber-400 p-4 rounded-r-xl backdrop-blur-md",children:s.jsxs("p",{className:"text-sm font-medium text-amber-50 leading-relaxed",children:['"    ',s.jsx("strong",{className:"text-white",children:"  "}),'      ."']})})]}):s.jsx("p",{className:"text-slate-400 text-sm",children:"     ."})}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-white/10",children:[s.jsx("h4",{className:"text-xs font-bold text-slate-400 mb-3 uppercase tracking-wider",children:"Strategic Recommendations"}),s.jsxs("ul",{className:"space-y-3 text-sm text-slate-300",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-400 text-lg",children:"check_circle"}),s.jsxs("span",{children:["  ",s.jsx("strong",{className:"text-white",children:" "})," ."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-400 text-lg",children:"check_circle"}),s.jsxs("span",{children:["   ",s.jsx("strong",{className:"text-white",children:"   "})," ."]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-6 border border-slate-200 shadow-sm",children:[s.jsx("h4",{className:"text-sm font-bold text-slate-500 mb-4",children:"ANALYSIS SUMMARY"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 rounded-xl bg-slate-50",children:[s.jsx("span",{className:"text-sm text-slate-500 font-medium",children:" "}),s.jsx("span",{className:"text-sm font-black text-slate-800",children:r?"Loading...":"Complete"})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 rounded-xl bg-slate-50",children:[s.jsx("span",{className:"text-sm text-slate-500 font-medium",children:"  "}),s.jsx("span",{className:"text-sm font-black text-slate-800",children:"2 "})]})]})]})]})]}),l&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-violet-600 p-8 text-white relative flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-md",children:s.jsx("span",{className:"material-symbols-rounded text-3xl",children:"psychology"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"Jenny's AI Marketing Lab"}),s.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:"      ."})]})]}),s.jsx("button",{onClick:()=>c(!1),className:"absolute top-6 right-6 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-white",children:"close"})})]}),s.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar flex-1 relative",children:d?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[s.jsx("span",{className:"material-symbols-rounded text-6xl text-indigo-500 animate-pulse mb-6",children:"auto_awesome"}),s.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"AI    ..."}),s.jsx("p",{className:"text-slate-500",children:p})]}):h?s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-indigo-50 rounded-2xl p-5 border-l-4 border-indigo-500",children:[s.jsx("h4",{className:"text-xs font-bold text-indigo-400 uppercase tracking-widest mb-2",children:"Confidence Score"}),s.jsxs("p",{className:"text-slate-800 font-medium leading-relaxed",children:[s.jsx("strong",{className:"text-indigo-700",children:h.product_a}),"  ",s.jsxs("strong",{className:"text-indigo-700",children:[h.confidence_score,"%"]})," ",s.jsx("strong",{className:"text-indigo-700",children:h.product_b}),"  ."]})]}),s.jsxs("div",{className:"bg-pink-50 rounded-2xl p-5 border-l-4 border-pink-500",children:[s.jsx("h4",{className:"text-xs font-bold text-pink-400 uppercase tracking-widest mb-2",children:"Lift Score"}),s.jsxs("p",{className:"text-slate-800 font-medium leading-relaxed",children:[" (Lift) ",s.jsx("strong",{className:"text-pink-600",children:h.lift_score}),"       ."]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 mb-4",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"campaign"}),"  "]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.strategies.map((ee,ne)=>s.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 hover:shadow-lg hover:border-indigo-400 transition-all group",children:[s.jsx("div",{className:"flex justify-between items-start mb-3",children:s.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-black uppercase ${ne===0?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:ee.impact})}),s.jsx("h4",{className:"font-bold text-slate-800 mb-2 group-hover:text-indigo-600 transition-colors",children:ee.title}),s.jsx("p",{className:"text-sm text-slate-500 leading-relaxed mb-4",children:ee.description}),s.jsx("div",{className:"pt-4 border-t border-slate-100 flex gap-2",children:s.jsx("button",{onClick:()=>W(ne===0?"ACTION":"VIRAL",h.product_a,h.product_b,ee.title),className:"flex-1 py-2 rounded-xl bg-slate-800 text-white text-xs font-bold hover:bg-indigo-600 transition-colors",children:"  "})})]},ne))})]}),s.jsxs("div",{className:"bg-orange-50 rounded-2xl p-6 border border-orange-100",children:[s.jsxs("h4",{className:"flex items-center gap-2 text-sm font-bold text-orange-700 mb-4",children:[s.jsx("span",{className:"material-symbols-rounded",children:"magic_button"})," AI  "]}),s.jsx("ul",{className:"space-y-3",children:h.ad_copies.map((ee,ne)=>s.jsxs("li",{className:"flex gap-3 text-sm text-orange-900 font-medium",children:[s.jsx("span",{className:"text-orange-400",children:""}),ee]},ne))})]})]}):null})]})}),b&&s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-white/95 backdrop-blur-md animate-in zoom-in-95 duration-200",children:s.jsxs("div",{className:"w-full max-w-5xl h-full max-h-screen flex flex-col p-8 overflow-hidden",children:[s.jsxs("div",{className:"flex justify-between items-start mb-8 pb-6 border-b border-slate-200 shrink-0",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-black text-slate-800",children:T}),s.jsx("p",{className:"text-slate-500 mt-2 font-medium",children:I})]}),s.jsx("button",{onClick:()=>w(!1),className:"w-10 h-10 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-slate-600",children:"close"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-4",children:P?s.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[s.jsx("span",{className:"material-symbols-rounded animate-spin text-4xl mb-4 text-indigo-300",children:"sync"}),s.jsx("p",{children:"   ..."})]}):s.jsx("div",{className:"max-w-4xl mx-auto bg-white p-10 shadow-sm border border-slate-100 rounded-2xl",children:_})}),s.jsxs("div",{className:"shrink-0 pt-6 mt-4 border-t border-slate-100 flex justify-center gap-4",children:[s.jsxs("button",{className:"h-12 px-8 rounded-xl bg-indigo-600 text-white font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 transition-all flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"print"}),"  / PDF "]}),s.jsx("button",{onClick:()=>w(!1),className:"h-12 px-8 rounded-xl bg-slate-200 text-slate-700 font-bold hover:bg-slate-300 transition-all",children:""})]})]})})]})};var v4=function(a,e){return v4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},v4(a,e)};function Le(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");v4(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ppe=(function(){function a(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return a})(),Bpe=(function(){function a(){this.browser=new Ppe,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return a})(),Ba=new Bpe;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Ba.wxa=!0,Ba.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Ba.worker=!0:!Ba.hasGlobalWindow||"Deno"in window||typeof navigator<"u"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Node.js")>-1?(Ba.node=!0,Ba.svgSupported=!0):zpe(navigator.userAgent,Ba);function zpe(a,e){var t=e.browser,r=a.match(/Firefox\/([\d.]+)/),n=a.match(/MSIE\s([\d.]+)/)||a.match(/Trident\/.+?rv:(([\d.]+))/),i=a.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(a);r&&(t.firefox=!0,t.version=r[1]),n&&(t.ie=!0,t.version=n[1]),i&&(t.edge=!0,t.version=i[1],t.newEdge=+i[1].split(".")[0]>18),o&&(t.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11);var l=e.domSupported=typeof document<"u";if(l){var c=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in c||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in c)&&!("OTransition"in c),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}}var jT=12,MG="sans-serif",Id=jT+"px "+MG,Fpe=20,Vpe=100,Hpe="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function Upe(a){var e={};if(typeof JSON>"u")return e;for(var t=0;t<a.length;t++){var r=String.fromCharCode(t+32),n=(a.charCodeAt(t)-Fpe)/Vpe;e[r]=n}return e}var Gpe=Upe(Hpe),kl={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:(function(){var a,e;return function(t,r){if(!a){var n=kl.createCanvas();a=n&&n.getContext("2d")}if(a)return e!==r&&(e=a.font=r||Id),a.measureText(t);t=t||"",r=r||Id;var i=/((?:\d+)?\.?\d*)px/.exec(r),o=i&&+i[1]||jT,l=0;if(r.indexOf("mono")>=0)l=o*t.length;else for(var c=0;c<t.length;c++){var d=Gpe[t[c]];l+=d==null?o:d*o}return{width:l}}})(),loadImage:function(a,e,t){var r=new Image;return r.onload=e,r.onerror=t,r.src=a,r}},EG=kc(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(a,e){return a["[object "+e+"]"]=!0,a},{}),DG=kc(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(a,e){return a["[object "+e+"Array]"]=!0,a},{}),Hx=Object.prototype.toString,tN=Array.prototype,Wpe=tN.forEach,$pe=tN.filter,ST=tN.slice,Ype=tN.map,tO=(function(){}).constructor,cy=tO?tO.prototype:null,kT="__proto__",qpe=2311;function IG(){return qpe++}function CT(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];typeof console<"u"&&console.error.apply(console,a)}function $t(a){if(a==null||typeof a!="object")return a;var e=a,t=Hx.call(a);if(t==="[object Array]"){if(!iv(a)){e=[];for(var r=0,n=a.length;r<n;r++)e[r]=$t(a[r])}}else if(DG[t]){if(!iv(a)){var i=a.constructor;if(i.from)e=i.from(a);else{e=new i(a.length);for(var r=0,n=a.length;r<n;r++)e[r]=a[r]}}}else if(!EG[t]&&!iv(a)&&!Nx(a)){e={};for(var o in a)a.hasOwnProperty(o)&&o!==kT&&(e[o]=$t(a[o]))}return e}function _a(a,e,t){if(!Qt(e)||!Qt(a))return t?$t(e):a;for(var r in e)if(e.hasOwnProperty(r)&&r!==kT){var n=a[r],i=e[r];Qt(i)&&Qt(n)&&!rt(i)&&!rt(n)&&!Nx(i)&&!Nx(n)&&!aO(i)&&!aO(n)&&!iv(i)&&!iv(n)?_a(n,i,t):(t||!(r in a))&&(a[r]=$t(e[r]))}return a}function AT(a,e){for(var t=a[0],r=1,n=a.length;r<n;r++)t=_a(t,a[r],e);return t}function Je(a,e){if(Object.assign)Object.assign(a,e);else for(var t in e)e.hasOwnProperty(t)&&t!==kT&&(a[t]=e[t]);return a}function Kt(a,e,t){for(var r=Va(e),n=0,i=r.length;n<i;n++){var o=r[n];(t?e[o]!=null:a[o]==null)&&(a[o]=e[o])}return a}function ya(a,e){if(a){if(a.indexOf)return a.indexOf(e);for(var t=0,r=a.length;t<r;t++)if(a[t]===e)return t}return-1}function Xpe(a,e){var t=a.prototype;function r(){}r.prototype=e.prototype,a.prototype=new r;for(var n in t)t.hasOwnProperty(n)&&(a.prototype[n]=t[n]);a.prototype.constructor=a,a.superClass=e}function ti(a,e,t){if(a="prototype"in a?a.prototype:a,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n];i!=="constructor"&&(t?e[i]!=null:a[i]==null)&&(a[i]=e[i])}else Kt(a,e,t)}function ls(a){return!a||typeof a=="string"?!1:typeof a.length=="number"}function oe(a,e,t){if(a&&e)if(a.forEach&&a.forEach===Wpe)a.forEach(e,t);else if(a.length===+a.length)for(var r=0,n=a.length;r<n;r++)e.call(t,a[r],r,a);else for(var i in a)a.hasOwnProperty(i)&&e.call(t,a[i],i,a)}function it(a,e,t){if(!a)return[];if(!e)return TT(a);if(a.map&&a.map===Ype)return a.map(e,t);for(var r=[],n=0,i=a.length;n<i;n++)r.push(e.call(t,a[n],n,a));return r}function kc(a,e,t,r){if(a&&e){for(var n=0,i=a.length;n<i;n++)t=e.call(r,t,a[n],n,a);return t}}function hr(a,e,t){if(!a)return[];if(!e)return TT(a);if(a.filter&&a.filter===$pe)return a.filter(e,t);for(var r=[],n=0,i=a.length;n<i;n++)e.call(t,a[n],n,a)&&r.push(a[n]);return r}function C0(a,e,t){if(a&&e){for(var r=0,n=a.length;r<n;r++)if(e.call(t,a[r],r,a))return a[r]}}function Va(a){if(!a)return[];if(Object.keys)return Object.keys(a);var e=[];for(var t in a)a.hasOwnProperty(t)&&e.push(t);return e}function Zpe(a,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return function(){return a.apply(e,t.concat(ST.call(arguments)))}}var St=cy&&Ut(cy.bind)?cy.call.bind(cy.bind):Zpe;function va(a){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return a.apply(this,e.concat(ST.call(arguments)))}}function rt(a){return Array.isArray?Array.isArray(a):Hx.call(a)==="[object Array]"}function Ut(a){return typeof a=="function"}function jt(a){return typeof a=="string"}function b4(a){return Hx.call(a)==="[object String]"}function Xa(a){return typeof a=="number"}function Qt(a){var e=typeof a;return e==="function"||!!a&&e==="object"}function aO(a){return!!EG[Hx.call(a)]}function Zs(a){return!!DG[Hx.call(a)]}function Nx(a){return typeof a=="object"&&typeof a.nodeType=="number"&&typeof a.ownerDocument=="object"}function aN(a){return a.colorStops!=null}function Kpe(a){return a.image!=null}function Qpe(a){return Hx.call(a)==="[object RegExp]"}function ss(a){return a!==a}function Gi(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];for(var t=0,r=a.length;t<r;t++)if(a[t]!=null)return a[t]}function Pt(a,e){return a??e}function No(a,e,t){return a??e??t}function TT(a){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return ST.apply(a,e)}function rN(a){if(typeof a=="number")return[a,a,a,a];var e=a.length;return e===2?[a[0],a[1],a[0],a[1]]:e===3?[a[0],a[1],a[2],a[1]]:a}function cs(a,e){if(!a)throw new Error(e)}function Jo(a){return a==null?null:typeof a.trim=="function"?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var RG="__ec_primitive__";function k2(a){a[RG]=!0}function iv(a){return a[RG]}var Jpe=(function(){function a(){this.data={}}return a.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},a.prototype.has=function(e){return this.data.hasOwnProperty(e)},a.prototype.get=function(e){return this.data[e]},a.prototype.set=function(e,t){return this.data[e]=t,this},a.prototype.keys=function(){return Va(this.data)},a.prototype.forEach=function(e){var t=this.data;for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)},a})(),LG=typeof Map=="function";function exe(){return LG?new Map:new Jpe}var txe=(function(){function a(e){var t=rt(e);this.data=exe();var r=this;e instanceof a?e.each(n):e&&oe(e,n);function n(i,o){t?r.set(i,o):r.set(o,i)}}return a.prototype.hasKey=function(e){return this.data.has(e)},a.prototype.get=function(e){return this.data.get(e)},a.prototype.set=function(e,t){return this.data.set(e,t),t},a.prototype.each=function(e,t){this.data.forEach(function(r,n){e.call(t,r,n)})},a.prototype.keys=function(){var e=this.data.keys();return LG?Array.from(e):e},a.prototype.removeKey=function(e){this.data.delete(e)},a})();function Rt(a){return new txe(a)}function Bv(a,e){for(var t=new a.constructor(a.length+e.length),r=0;r<a.length;r++)t[r]=a[r];for(var n=a.length,r=0;r<e.length;r++)t[r+n]=e[r];return t}function nN(a,e){var t;if(Object.create)t=Object.create(a);else{var r=function(){};r.prototype=a,t=new r}return e&&Je(t,e),t}function OG(a){var e=a.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function Dt(a,e){return a.hasOwnProperty(e)}function Bn(){}var Iw=180/Math.PI;function A0(a,e){return a==null&&(a=0),e==null&&(e=0),[a,e]}function bs(a,e){return a[0]=e[0],a[1]=e[1],a}function kd(a){return[a[0],a[1]]}function MT(a,e,t){return a[0]=e,a[1]=t,a}function rO(a,e,t){return a[0]=e[0]+t[0],a[1]=e[1]+t[1],a}function y4(a,e,t,r){return a[0]=e[0]+t[0]*r,a[1]=e[1]+t[1]*r,a}function Gf(a,e,t){return a[0]=e[0]-t[0],a[1]=e[1]-t[1],a}function w4(a){return Math.sqrt(axe(a))}function axe(a){return a[0]*a[0]+a[1]*a[1]}function Rw(a,e,t){return a[0]=e[0]*t,a[1]=e[1]*t,a}function Ux(a,e){var t=w4(e);return t===0?(a[0]=0,a[1]=0):(a[0]=e[0]/t,a[1]=e[1]/t),a}function _4(a,e){return Math.sqrt((a[0]-e[0])*(a[0]-e[0])+(a[1]-e[1])*(a[1]-e[1]))}var Xu=_4;function rxe(a,e){return(a[0]-e[0])*(a[0]-e[0])+(a[1]-e[1])*(a[1]-e[1])}var a0=rxe;function Lw(a,e,t,r){return a[0]=e[0]+r*(t[0]-e[0]),a[1]=e[1]+r*(t[1]-e[1]),a}function zn(a,e,t){var r=e[0],n=e[1];return a[0]=t[0]*r+t[2]*n+t[4],a[1]=t[1]*r+t[3]*n+t[5],a}function Zu(a,e,t){return a[0]=Math.min(e[0],t[0]),a[1]=Math.min(e[1],t[1]),a}function Ku(a,e,t){return a[0]=Math.max(e[0],t[0]),a[1]=Math.max(e[1],t[1]),a}var pp=(function(){function a(e,t){this.target=e,this.topTarget=t&&t.topTarget}return a})(),nxe=(function(){function a(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return a.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new pp(t,e),"dragstart",e.event))},a.prototype._drag=function(e){var t=this._draggingTarget;if(t){var r=e.offsetX,n=e.offsetY,i=r-this._x,o=n-this._y;this._x=r,this._y=n,t.drift(i,o,e),this.handler.dispatchToElement(new pp(t,e),"drag",e.event);var l=this.handler.findHover(r,n,t).target,c=this._dropTarget;this._dropTarget=l,t!==l&&(c&&l!==c&&this.handler.dispatchToElement(new pp(c,e),"dragleave",e.event),l&&l!==c&&this.handler.dispatchToElement(new pp(l,e),"dragenter",e.event))}},a.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new pp(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new pp(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},a})(),il=(function(){function a(e){e&&(this._$eventProcessor=e)}return a.prototype.on=function(e,t,r,n){this._$handlers||(this._$handlers={});var i=this._$handlers;if(typeof t=="function"&&(n=r,r=t,t=null),!r||!e)return this;var o=this._$eventProcessor;t!=null&&o&&o.normalizeQuery&&(t=o.normalizeQuery(t)),i[e]||(i[e]=[]);for(var l=0;l<i[e].length;l++)if(i[e][l].h===r)return this;var c={h:r,query:t,ctx:n||this,callAtLast:r.zrEventfulCallAtLast},d=i[e].length-1,u=i[e][d];return u&&u.callAtLast?i[e].splice(d,0,c):i[e].push(c),this},a.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},a.prototype.off=function(e,t){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(t){if(r[e]){for(var n=[],i=0,o=r[e].length;i<o;i++)r[e][i].h!==t&&n.push(r[e][i]);r[e]=n}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},a.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var n=this._$handlers[e],i=this._$eventProcessor;if(n)for(var o=t.length,l=n.length,c=0;c<l;c++){var d=n[c];if(!(i&&i.filter&&d.query!=null&&!i.filter(e,d.query)))switch(o){case 0:d.h.call(d.ctx);break;case 1:d.h.call(d.ctx,t[0]);break;case 2:d.h.call(d.ctx,t[0],t[1]);break;default:d.h.apply(d.ctx,t);break}}return i&&i.afterTrigger&&i.afterTrigger(e),this},a.prototype.triggerWithContext=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var n=this._$handlers[e],i=this._$eventProcessor;if(n)for(var o=t.length,l=t[o-1],c=n.length,d=0;d<c;d++){var u=n[d];if(!(i&&i.filter&&u.query!=null&&!i.filter(e,u.query)))switch(o){case 0:u.h.call(l);break;case 1:u.h.call(l,t[0]);break;case 2:u.h.call(l,t[0],t[1]);break;default:u.h.apply(l,t.slice(1,o-1));break}}return i&&i.afterTrigger&&i.afterTrigger(e),this},a})(),ixe=Math.log(2);function N4(a,e,t,r,n,i){var o=r+"-"+n,l=a.length;if(i.hasOwnProperty(o))return i[o];if(e===1){var c=Math.round(Math.log((1<<l)-1&~n)/ixe);return a[t][c]}for(var d=r|1<<t,u=t+1;r&1<<u;)u++;for(var h=0,f=0,p=0;f<l;f++){var g=1<<f;g&n||(h+=(p%2?-1:1)*a[t][f]*N4(a,e-1,u,d,n|g,i),p++)}return i[o]=h,h}function nO(a,e){var t=[[a[0],a[1],1,0,0,0,-e[0]*a[0],-e[0]*a[1]],[0,0,0,a[0],a[1],1,-e[1]*a[0],-e[1]*a[1]],[a[2],a[3],1,0,0,0,-e[2]*a[2],-e[2]*a[3]],[0,0,0,a[2],a[3],1,-e[3]*a[2],-e[3]*a[3]],[a[4],a[5],1,0,0,0,-e[4]*a[4],-e[4]*a[5]],[0,0,0,a[4],a[5],1,-e[5]*a[4],-e[5]*a[5]],[a[6],a[7],1,0,0,0,-e[6]*a[6],-e[6]*a[7]],[0,0,0,a[6],a[7],1,-e[7]*a[6],-e[7]*a[7]]],r={},n=N4(t,8,0,0,0,r);if(n!==0){for(var i=[],o=0;o<8;o++)for(var l=0;l<8;l++)i[l]==null&&(i[l]=0),i[l]+=((o+l)%2?-1:1)*N4(t,7,o===0?1:0,1<<o,1<<l,r)/n*e[o];return function(c,d,u){var h=d*i[6]+u*i[7]+1;c[0]=(d*i[0]+u*i[1]+i[2])/h,c[1]=(d*i[3]+u*i[4]+i[5])/h}}}var C2="___zrEVENTSAVED",nk=[];function sxe(a,e,t,r,n){return j4(nk,e,r,n,!0)&&j4(a,t,nk[0],nk[1])}function oxe(a,e){a&&t(a),e&&t(e);function t(r){var n=r[C2];n&&(n.clearMarkers&&n.clearMarkers(),delete r[C2])}}function j4(a,e,t,r,n){if(e.getBoundingClientRect&&Ba.domSupported&&!PG(e)){var i=e[C2]||(e[C2]={}),o=lxe(e,i),l=cxe(o,i,n);if(l)return l(a,t,r),!0}return!1}function lxe(a,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var r=["left","right"],n=["top","bottom"],i=0;i<4;i++){var o=document.createElement("div"),l=o.style,c=i%2,d=(i>>1)%2;l.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[c]+":0",n[d]+":0",r[1-c]+":auto",n[1-d]+":auto",""].join("!important;"),a.appendChild(o),t.push(o)}return e.clearMarkers=function(){oe(t,function(u){u.parentNode&&u.parentNode.removeChild(u)})},t}function cxe(a,e,t){for(var r=t?"invTrans":"trans",n=e[r],i=e.srcCoords,o=[],l=[],c=!0,d=0;d<4;d++){var u=a[d].getBoundingClientRect(),h=2*d,f=u.left,p=u.top;o.push(f,p),c=c&&i&&f===i[h]&&p===i[h+1],l.push(a[d].offsetLeft,a[d].offsetTop)}return c&&n?n:(e.srcCoords=o,e[r]=t?nO(l,o):nO(o,l))}function PG(a){return a.nodeName.toUpperCase()==="CANVAS"}var dxe=/([&<>"'])/g,uxe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function _s(a){return a==null?"":(a+"").replace(dxe,function(e,t){return uxe[t]})}var hxe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ik=[],fxe=Ba.browser.firefox&&+Ba.browser.version.split(".")[0]<39;function S4(a,e,t,r){return t=t||{},r?iO(a,e,t):fxe&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):iO(a,e,t),t}function iO(a,e,t){if(Ba.domSupported&&a.getBoundingClientRect){var r=e.clientX,n=e.clientY;if(PG(a)){var i=a.getBoundingClientRect();t.zrX=r-i.left,t.zrY=n-i.top;return}else if(j4(ik,a,r,n)){t.zrX=ik[0],t.zrY=ik[1];return}}t.zrX=t.zrY=0}function ET(a){return a||window.event}function Go(a,e,t){if(e=ET(e),e.zrX!=null)return e;var r=e.type,n=r&&r.indexOf("touch")>=0;if(n){var o=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];o&&S4(a,o,e,t)}else{S4(a,e,e,t);var i=pxe(e);e.zrDelta=i?i/120:-(e.detail||0)/3}var l=e.button;return e.which==null&&l!==void 0&&hxe.test(e.type)&&(e.which=l&1?1:l&2?3:l&4?2:0),e}function pxe(a){var e=a.wheelDelta;if(e)return e;var t=a.deltaX,r=a.deltaY;if(t==null||r==null)return e;var n=Math.abs(r!==0?r:t),i=r>0?-1:r<0?1:t>0?-1:1;return 3*n*i}function k4(a,e,t,r){a.addEventListener(e,t,r)}function xxe(a,e,t,r){a.removeEventListener(e,t,r)}var Rd=function(a){a.preventDefault(),a.stopPropagation(),a.cancelBubble=!0};function sO(a){return a.which===2||a.which===3}var mxe=(function(){function a(){this._track=[]}return a.prototype.recognize=function(e,t,r){return this._doTrack(e,t,r),this._recognize(e)},a.prototype.clear=function(){return this._track.length=0,this},a.prototype._doTrack=function(e,t,r){var n=e.touches;if(n){for(var i={points:[],touches:[],target:t,event:e},o=0,l=n.length;o<l;o++){var c=n[o],d=S4(r,c,{});i.points.push([d.zrX,d.zrY]),i.touches.push(c)}this._track.push(i)}},a.prototype._recognize=function(e){for(var t in sk)if(sk.hasOwnProperty(t)){var r=sk[t](this._track,e);if(r)return r}},a})();function oO(a){var e=a[1][0]-a[0][0],t=a[1][1]-a[0][1];return Math.sqrt(e*e+t*t)}function gxe(a){return[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]}var sk={pinch:function(a,e){var t=a.length;if(t){var r=(a[t-1]||{}).points,n=(a[t-2]||{}).points||r;if(n&&n.length>1&&r&&r.length>1){var i=oO(r)/oO(n);!isFinite(i)&&(i=1),e.pinchScale=i;var o=gxe(r);return e.pinchX=o[0],e.pinchY=o[1],{type:"pinch",target:a[0].target,event:e}}}}};function Ii(){return[1,0,0,1,0,0]}function iN(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a}function sN(a,e){return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[4]=e[4],a[5]=e[5],a}function bc(a,e,t){var r=e[0]*t[0]+e[2]*t[1],n=e[1]*t[0]+e[3]*t[1],i=e[0]*t[2]+e[2]*t[3],o=e[1]*t[2]+e[3]*t[3],l=e[0]*t[4]+e[2]*t[5]+e[4],c=e[1]*t[4]+e[3]*t[5]+e[5];return a[0]=r,a[1]=n,a[2]=i,a[3]=o,a[4]=l,a[5]=c,a}function Cc(a,e,t){return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[4]=e[4]+t[0],a[5]=e[5]+t[1],a}function Ch(a,e,t,r){r===void 0&&(r=[0,0]);var n=e[0],i=e[2],o=e[4],l=e[1],c=e[3],d=e[5],u=Math.sin(t),h=Math.cos(t);return a[0]=n*h+l*u,a[1]=-n*u+l*h,a[2]=i*h+c*u,a[3]=-i*u+h*c,a[4]=h*(o-r[0])+u*(d-r[1])+r[0],a[5]=h*(d-r[1])-u*(o-r[0])+r[1],a}function DT(a,e,t){var r=t[0],n=t[1];return a[0]=e[0]*r,a[1]=e[1]*n,a[2]=e[2]*r,a[3]=e[3]*n,a[4]=e[4]*r,a[5]=e[5]*n,a}function Cl(a,e){var t=e[0],r=e[2],n=e[4],i=e[1],o=e[3],l=e[5],c=t*o-i*r;return c?(c=1/c,a[0]=o*c,a[1]=-i*c,a[2]=-r*c,a[3]=t*c,a[4]=(r*l-o*n)*c,a[5]=(i*n-t*l)*c,a):null}function vxe(a){var e=Ii();return sN(e,a),e}var Xt=(function(){function a(e,t){this.x=e||0,this.y=t||0}return a.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.set=function(e,t){return this.x=e,this.y=t,this},a.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},a.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},a.prototype.scale=function(e){this.x*=e,this.y*=e},a.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},a.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},a.prototype.dot=function(e){return this.x*e.x+this.y*e.y},a.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},a.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},a.prototype.distance=function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},a.prototype.distanceSquare=function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},a.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.transform=function(e){if(e){var t=this.x,r=this.y;return this.x=e[0]*t+e[2]*r+e[4],this.y=e[1]*t+e[3]*r+e[5],this}},a.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},a.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},a.set=function(e,t,r){e.x=t,e.y=r},a.copy=function(e,t){e.x=t.x,e.y=t.y},a.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},a.lenSquare=function(e){return e.x*e.x+e.y*e.y},a.dot=function(e,t){return e.x*t.x+e.y*t.y},a.add=function(e,t,r){e.x=t.x+r.x,e.y=t.y+r.y},a.sub=function(e,t,r){e.x=t.x-r.x,e.y=t.y-r.y},a.scale=function(e,t,r){e.x=t.x*r,e.y=t.y*r},a.scaleAndAdd=function(e,t,r,n){e.x=t.x+r.x*n,e.y=t.y+r.y*n},a.lerp=function(e,t,r,n){var i=1-n;e.x=i*t.x+n*r.x,e.y=i*t.y+n*r.y},a})(),Wf=Math.min,Xp=Math.max,C4=Math.abs,lO=["x","y"],bxe=["width","height"],af=new Xt,rf=new Xt,nf=new Xt,sf=new Xt,bo=BG(),Fg=bo.minTv,A4=bo.maxTv,sv=[0,0],Jt=(function(){function a(e,t,r,n){a.set(this,e,t,r,n)}return a.set=function(e,t,r,n,i){return n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),e.x=t,e.y=r,e.width=n,e.height=i,e},a.prototype.union=function(e){var t=Wf(e.x,this.x),r=Wf(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Xp(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=Xp(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=t,this.y=r},a.prototype.applyTransform=function(e){a.applyTransform(this,this,e)},a.prototype.calculateTransform=function(e){var t=this,r=e.width/t.width,n=e.height/t.height,i=Ii();return Cc(i,i,[-t.x,-t.y]),DT(i,i,[r,n]),Cc(i,i,[e.x,e.y]),i},a.prototype.intersect=function(e,t,r){return a.intersect(this,e,t,r)},a.intersect=function(e,t,r,n){r&&Xt.set(r,0,0);var i=n&&n.outIntersectRect||null,o=n&&n.clamp;if(i&&(i.x=i.y=i.width=i.height=NaN),!e||!t)return!1;e instanceof a||(e=a.set(yxe,e.x,e.y,e.width,e.height)),t instanceof a||(t=a.set(wxe,t.x,t.y,t.width,t.height));var l=!!r;bo.reset(n,l);var c=bo.touchThreshold,d=e.x+c,u=e.x+e.width-c,h=e.y+c,f=e.y+e.height-c,p=t.x+c,g=t.x+t.width-c,b=t.y+c,w=t.y+t.height-c;if(d>u||h>f||p>g||b>w)return!1;var _=!(u<p||g<d||f<b||w<h);return(l||i)&&(sv[0]=1/0,sv[1]=0,cO(d,u,p,g,0,l,i,o),cO(h,f,b,w,1,l,i,o),l&&Xt.copy(r,_?bo.useDir?bo.dirMinTv:Fg:A4)),_},a.contain=function(e,t,r){return t>=e.x&&t<=e.x+e.width&&r>=e.y&&r<=e.y+e.height},a.prototype.contain=function(e,t){return a.contain(this,e,t)},a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copy=function(e){a.copy(this,e)},a.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},a.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},a.prototype.isZero=function(){return this.width===0||this.height===0},a.create=function(e){return new a(e.x,e.y,e.width,e.height)},a.copy=function(e,t){return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e},a.applyTransform=function(e,t,r){if(!r){e!==t&&a.copy(e,t);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var n=r[0],i=r[3],o=r[4],l=r[5];e.x=t.x*n+o,e.y=t.y*i+l,e.width=t.width*n,e.height=t.height*i,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}af.x=nf.x=t.x,af.y=sf.y=t.y,rf.x=sf.x=t.x+t.width,rf.y=nf.y=t.y+t.height,af.transform(r),sf.transform(r),rf.transform(r),nf.transform(r),e.x=Wf(af.x,rf.x,nf.x,sf.x),e.y=Wf(af.y,rf.y,nf.y,sf.y);var c=Xp(af.x,rf.x,nf.x,sf.x),d=Xp(af.y,rf.y,nf.y,sf.y);e.width=c-e.x,e.height=d-e.y},a})(),yxe=new Jt(0,0,0,0),wxe=new Jt(0,0,0,0);function cO(a,e,t,r,n,i,o,l){var c=C4(e-t),d=C4(r-a),u=Wf(c,d),h=lO[n],f=lO[1-n],p=bxe[n];e<t||r<a?c<d?(i&&(A4[h]=-c),l&&(o[h]=e,o[p]=0)):(i&&(A4[h]=d),l&&(o[h]=a,o[p]=0)):(o&&(o[h]=Xp(a,t),o[p]=Wf(e,r)-o[h]),i&&(u<sv[0]||bo.useDir)&&(sv[0]=Wf(u,sv[0]),(c<d||!bo.bidirectional)&&(Fg[h]=c,Fg[f]=0,bo.useDir&&bo.calcDirMTV()),(c>=d||!bo.bidirectional)&&(Fg[h]=-d,Fg[f]=0,bo.useDir&&bo.calcDirMTV())))}function BG(){var a=0,e=new Xt,t=new Xt,r={minTv:new Xt,maxTv:new Xt,useDir:!1,dirMinTv:new Xt,touchThreshold:0,bidirectional:!0,negativeSize:!1,reset:function(i,o){r.touchThreshold=0,i&&i.touchThreshold!=null&&(r.touchThreshold=Xp(0,i.touchThreshold)),r.negativeSize=!1,o&&(r.minTv.set(1/0,1/0),r.maxTv.set(0,0),r.useDir=!1,i&&i.direction!=null&&(r.useDir=!0,r.dirMinTv.copy(r.minTv),t.copy(r.minTv),a=i.direction,r.bidirectional=i.bidirectional==null||!!i.bidirectional,r.bidirectional||e.set(Math.cos(a),Math.sin(a))))},calcDirMTV:function(){var i=r.minTv,o=r.dirMinTv,l=i.y*i.y+i.x*i.x,c=Math.sin(a),d=Math.cos(a),u=c*i.y+d*i.x;if(n(u)){n(i.x)&&n(i.y)&&o.set(0,0);return}if(t.x=l*d/u,t.y=l*c/u,n(t.x)&&n(t.y)){o.set(0,0);return}(r.bidirectional||e.dot(t)>0)&&t.len()<o.len()&&o.copy(t)}};function n(i){return C4(i)<1e-10}return r}var zG="silent";function _xe(a,e,t){return{type:a,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:Nxe}}function Nxe(){Rd(this.event)}var jxe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e})(il),Ym=(function(){function a(e,t){this.x=e,this.y=t}return a})(),Sxe=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],ok=new Jt(0,0,0,0),FG=(function(a){Le(e,a);function e(t,r,n,i,o){var l=a.call(this)||this;return l._hovered=new Ym(0,0),l.storage=t,l.painter=r,l.painterRoot=i,l._pointerSize=o,n=n||new jxe,l.proxy=null,l.setHandlerProxy(n),l._draggingMgr=new nxe(l),l}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(oe(Sxe,function(r){t.on&&t.on(r,this[r],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var r=t.zrX,n=t.zrY,i=VG(this,r,n),o=this._hovered,l=o.target;l&&!l.__zr&&(o=this.findHover(o.x,o.y),l=o.target);var c=this._hovered=i?new Ym(r,n):this.findHover(r,n),d=c.target,u=this.proxy;u.setCursor&&u.setCursor(d?d.cursor:"default"),l&&d!==l&&this.dispatchToElement(o,"mouseout",t),this.dispatchToElement(c,"mousemove",t),d&&d!==l&&this.dispatchToElement(c,"mouseover",t)},e.prototype.mouseout=function(t){var r=t.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new Ym(0,0)},e.prototype.dispatch=function(t,r){var n=this[t];n&&n.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var r=this.proxy;r.setCursor&&r.setCursor(t)},e.prototype.dispatchToElement=function(t,r,n){t=t||{};var i=t.target;if(!(i&&i.silent)){for(var o="on"+r,l=_xe(r,t,n);i&&(i[o]&&(l.cancelBubble=!!i[o].call(i,l)),i.trigger(r,l),i=i.__hostTarget?i.__hostTarget:i.parent,!l.cancelBubble););l.cancelBubble||(this.trigger(r,l),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(c){typeof c[o]=="function"&&c[o].call(c,l),c.trigger&&c.trigger(r,l)}))}},e.prototype.findHover=function(t,r,n){var i=this.storage.getDisplayList(),o=new Ym(t,r);if(dO(i,o,t,r,n),this._pointerSize&&!o.target){for(var l=[],c=this._pointerSize,d=c/2,u=new Jt(t-d,r-d,c,c),h=i.length-1;h>=0;h--){var f=i[h];f!==n&&!f.ignore&&!f.ignoreCoarsePointer&&(!f.parent||!f.parent.ignoreCoarsePointer)&&(ok.copy(f.getBoundingRect()),f.transform&&ok.applyTransform(f.transform),ok.intersect(u)&&l.push(f))}if(l.length)for(var p=4,g=Math.PI/12,b=Math.PI*2,w=0;w<d;w+=p)for(var _=0;_<b;_+=g){var k=t+w*Math.cos(_),T=r+w*Math.sin(_);if(dO(l,o,k,T,n),o.target)return o}}return o},e.prototype.processGesture=function(t,r){this._gestureMgr||(this._gestureMgr=new mxe);var n=this._gestureMgr;r==="start"&&n.clear();var i=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(r==="end"&&n.clear(),i){var o=i.type;t.gestureEvent=o;var l=new Ym;l.target=i.target,this.dispatchToElement(l,o,i.event)}},e})(il);oe(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(a){FG.prototype[a]=function(e){var t=e.zrX,r=e.zrY,n=VG(this,t,r),i,o;if((a!=="mouseup"||!n)&&(i=this.findHover(t,r),o=i.target),a==="mousedown")this._downEl=o,this._downPoint=[e.zrX,e.zrY],this._upEl=o;else if(a==="mouseup")this._upEl=o;else if(a==="click"){if(this._downEl!==this._upEl||!this._downPoint||Xu(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(i,a,e)}});function kxe(a,e,t){if(a[a.rectHover?"rectContain":"contain"](e,t)){for(var r=a,n=void 0,i=!1;r;){if(r.ignoreClip&&(i=!0),!i){var o=r.getClipPath();if(o&&!o.contain(e,t))return!1}r.silent&&(n=!0);var l=r.__hostTarget;r=l?r.ignoreHostSilent?null:l:r.parent}return n?zG:!0}return!1}function dO(a,e,t,r,n){for(var i=a.length-1;i>=0;i--){var o=a[i],l=void 0;if(o!==n&&!o.ignore&&(l=kxe(o,t,r))&&(!e.topTarget&&(e.topTarget=o),l!==zG)){e.target=o;break}}}function VG(a,e,t){var r=a.painter;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var HG=32,qm=7;function Cxe(a){for(var e=0;a>=HG;)e|=a&1,a>>=1;return a+e}function uO(a,e,t,r){var n=e+1;if(n===t)return 1;if(r(a[n++],a[e])<0){for(;n<t&&r(a[n],a[n-1])<0;)n++;Axe(a,e,n)}else for(;n<t&&r(a[n],a[n-1])>=0;)n++;return n-e}function Axe(a,e,t){for(t--;e<t;){var r=a[e];a[e++]=a[t],a[t--]=r}}function hO(a,e,t,r,n){for(r===e&&r++;r<t;r++){for(var i=a[r],o=e,l=r,c;o<l;)c=o+l>>>1,n(i,a[c])<0?l=c:o=c+1;var d=r-o;switch(d){case 3:a[o+3]=a[o+2];case 2:a[o+2]=a[o+1];case 1:a[o+1]=a[o];break;default:for(;d>0;)a[o+d]=a[o+d-1],d--}a[o]=i}}function lk(a,e,t,r,n,i){var o=0,l=0,c=1;if(i(a,e[t+n])>0){for(l=r-n;c<l&&i(a,e[t+n+c])>0;)o=c,c=(c<<1)+1,c<=0&&(c=l);c>l&&(c=l),o+=n,c+=n}else{for(l=n+1;c<l&&i(a,e[t+n-c])<=0;)o=c,c=(c<<1)+1,c<=0&&(c=l);c>l&&(c=l);var d=o;o=n-c,c=n-d}for(o++;o<c;){var u=o+(c-o>>>1);i(a,e[t+u])>0?o=u+1:c=u}return c}function ck(a,e,t,r,n,i){var o=0,l=0,c=1;if(i(a,e[t+n])<0){for(l=n+1;c<l&&i(a,e[t+n-c])<0;)o=c,c=(c<<1)+1,c<=0&&(c=l);c>l&&(c=l);var d=o;o=n-c,c=n-d}else{for(l=r-n;c<l&&i(a,e[t+n+c])>=0;)o=c,c=(c<<1)+1,c<=0&&(c=l);c>l&&(c=l),o+=n,c+=n}for(o++;o<c;){var u=o+(c-o>>>1);i(a,e[t+u])<0?c=u:o=u+1}return c}function Txe(a,e){var t=qm,r,n,i=0,o=[];r=[],n=[];function l(p,g){r[i]=p,n[i]=g,i+=1}function c(){for(;i>1;){var p=i-2;if(p>=1&&n[p-1]<=n[p]+n[p+1]||p>=2&&n[p-2]<=n[p]+n[p-1])n[p-1]<n[p+1]&&p--;else if(n[p]>n[p+1])break;u(p)}}function d(){for(;i>1;){var p=i-2;p>0&&n[p-1]<n[p+1]&&p--,u(p)}}function u(p){var g=r[p],b=n[p],w=r[p+1],_=n[p+1];n[p]=b+_,p===i-3&&(r[p+1]=r[p+2],n[p+1]=n[p+2]),i--;var k=ck(a[w],a,g,b,0,e);g+=k,b-=k,b!==0&&(_=lk(a[g+b-1],a,w,_,_-1,e),_!==0&&(b<=_?h(g,b,w,_):f(g,b,w,_)))}function h(p,g,b,w){var _=0;for(_=0;_<g;_++)o[_]=a[p+_];var k=0,T=b,D=p;if(a[D++]=a[T++],--w===0){for(_=0;_<g;_++)a[D+_]=o[k+_];return}if(g===1){for(_=0;_<w;_++)a[D+_]=a[T+_];a[D+w]=o[k];return}for(var I=t,O,P,V;;){O=0,P=0,V=!1;do if(e(a[T],o[k])<0){if(a[D++]=a[T++],P++,O=0,--w===0){V=!0;break}}else if(a[D++]=o[k++],O++,P=0,--g===1){V=!0;break}while((O|P)<I);if(V)break;do{if(O=ck(a[T],o,k,g,0,e),O!==0){for(_=0;_<O;_++)a[D+_]=o[k+_];if(D+=O,k+=O,g-=O,g<=1){V=!0;break}}if(a[D++]=a[T++],--w===0){V=!0;break}if(P=lk(o[k],a,T,w,0,e),P!==0){for(_=0;_<P;_++)a[D+_]=a[T+_];if(D+=P,T+=P,w-=P,w===0){V=!0;break}}if(a[D++]=o[k++],--g===1){V=!0;break}I--}while(O>=qm||P>=qm);if(V)break;I<0&&(I=0),I+=2}if(t=I,t<1&&(t=1),g===1){for(_=0;_<w;_++)a[D+_]=a[T+_];a[D+w]=o[k]}else{if(g===0)throw new Error;for(_=0;_<g;_++)a[D+_]=o[k+_]}}function f(p,g,b,w){var _=0;for(_=0;_<w;_++)o[_]=a[b+_];var k=p+g-1,T=w-1,D=b+w-1,I=0,O=0;if(a[D--]=a[k--],--g===0){for(I=D-(w-1),_=0;_<w;_++)a[I+_]=o[_];return}if(w===1){for(D-=g,k-=g,O=D+1,I=k+1,_=g-1;_>=0;_--)a[O+_]=a[I+_];a[D]=o[T];return}for(var P=t;;){var V=0,G=0,Q=!1;do if(e(o[T],a[k])<0){if(a[D--]=a[k--],V++,G=0,--g===0){Q=!0;break}}else if(a[D--]=o[T--],G++,V=0,--w===1){Q=!0;break}while((V|G)<P);if(Q)break;do{if(V=g-ck(o[T],a,p,g,g-1,e),V!==0){for(D-=V,k-=V,g-=V,O=D+1,I=k+1,_=V-1;_>=0;_--)a[O+_]=a[I+_];if(g===0){Q=!0;break}}if(a[D--]=o[T--],--w===1){Q=!0;break}if(G=w-lk(a[k],o,0,w,w-1,e),G!==0){for(D-=G,T-=G,w-=G,O=D+1,I=T+1,_=0;_<G;_++)a[O+_]=o[I+_];if(w<=1){Q=!0;break}}if(a[D--]=a[k--],--g===0){Q=!0;break}P--}while(V>=qm||G>=qm);if(Q)break;P<0&&(P=0),P+=2}if(t=P,t<1&&(t=1),w===1){for(D-=g,k-=g,O=D+1,I=k+1,_=g-1;_>=0;_--)a[O+_]=a[I+_];a[D]=o[T]}else{if(w===0)throw new Error;for(I=D-(w-1),_=0;_<w;_++)a[I+_]=o[_]}}return{mergeRuns:c,forceMergeRuns:d,pushRun:l}}function Ow(a,e,t,r){t||(t=0),r||(r=a.length);var n=r-t;if(!(n<2)){var i=0;if(n<HG){i=uO(a,t,r,e),hO(a,t,r,t+i,e);return}var o=Txe(a,e),l=Cxe(n);do{if(i=uO(a,t,r,e),i<l){var c=n;c>l&&(c=l),hO(a,t,t+c,t+i,e),i=c}o.pushRun(t,i),o.mergeRuns(),n-=i,t+=i}while(n!==0);o.forceMergeRuns()}}var yo=1,Vg=2,Hp=4,fO=!1;function dk(){fO||(fO=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function pO(a,e){return a.zlevel===e.zlevel?a.z===e.z?a.z2-e.z2:a.z-e.z:a.zlevel-e.zlevel}var Mxe=(function(){function a(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=pO}return a.prototype.traverse=function(e,t){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,t)},a.prototype.getDisplayList=function(e,t){t=t||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(t),r},a.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,r=this._displayList,n=0,i=t.length;n<i;n++)this._updateAndAddDisplayable(t[n],null,e);r.length=this._displayListLen,Ow(r,pO)},a.prototype._updateAndAddDisplayable=function(e,t,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var n=e.getClipPath(),i=t&&t.length,o=0,l=e.__clipPaths;if(!e.ignoreClip&&(i||n)){if(l||(l=e.__clipPaths=[]),i)for(var c=0;c<t.length;c++)l[o++]=t[c];for(var d=n,u=e;d;)d.parent=u,d.updateTransform(),l[o++]=d,u=d,d=d.getClipPath()}if(l&&(l.length=o),e.childrenRef){for(var h=e.childrenRef(),f=0;f<h.length;f++){var p=h[f];e.__dirty&&(p.__dirty|=yo),this._updateAndAddDisplayable(p,l,r)}e.__dirty=0}else{var g=e;isNaN(g.z)&&(dk(),g.z=0),isNaN(g.z2)&&(dk(),g.z2=0),isNaN(g.zlevel)&&(dk(),g.zlevel=0),this._displayList[this._displayListLen++]=g}var b=e.getDecalElement&&e.getDecalElement();b&&this._updateAndAddDisplayable(b,l,r);var w=e.getTextGuideLine();w&&this._updateAndAddDisplayable(w,l,r);var _=e.getTextContent();_&&this._updateAndAddDisplayable(_,l,r)}},a.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},a.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,r=e.length;t<r;t++)this.delRoot(e[t]);return}var n=ya(this._roots,e);n>=0&&this._roots.splice(n,1)},a.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},a.prototype.getRoots=function(){return this._roots},a.prototype.dispose=function(){this._displayList=null,this._roots=null},a})(),A2;A2=Ba.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(a){return setTimeout(a,16)};var ov={linear:function(a){return a},quadraticIn:function(a){return a*a},quadraticOut:function(a){return a*(2-a)},quadraticInOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)},cubicIn:function(a){return a*a*a},cubicOut:function(a){return--a*a*a+1},cubicInOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},quarticIn:function(a){return a*a*a*a},quarticOut:function(a){return 1- --a*a*a*a},quarticInOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},quinticIn:function(a){return a*a*a*a*a},quinticOut:function(a){return--a*a*a*a*a+1},quinticInOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},sinusoidalIn:function(a){return 1-Math.cos(a*Math.PI/2)},sinusoidalOut:function(a){return Math.sin(a*Math.PI/2)},sinusoidalInOut:function(a){return .5*(1-Math.cos(Math.PI*a))},exponentialIn:function(a){return a===0?0:Math.pow(1024,a-1)},exponentialOut:function(a){return a===1?1:1-Math.pow(2,-10*a)},exponentialInOut:function(a){return a===0?0:a===1?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)},circularIn:function(a){return 1-Math.sqrt(1-a*a)},circularOut:function(a){return Math.sqrt(1- --a*a)},circularInOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},elasticIn:function(a){var e,t=.1,r=.4;return a===0?0:a===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(a-=1))*Math.sin((a-e)*(2*Math.PI)/r)))},elasticOut:function(a){var e,t=.1,r=.4;return a===0?0:a===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*a)*Math.sin((a-e)*(2*Math.PI)/r)+1)},elasticInOut:function(a){var e,t=.1,r=.4;return a===0?0:a===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),(a*=2)<1?-.5*(t*Math.pow(2,10*(a-=1))*Math.sin((a-e)*(2*Math.PI)/r)):t*Math.pow(2,-10*(a-=1))*Math.sin((a-e)*(2*Math.PI)/r)*.5+1)},backIn:function(a){var e=1.70158;return a*a*((e+1)*a-e)},backOut:function(a){var e=1.70158;return--a*a*((e+1)*a+e)+1},backInOut:function(a){var e=2.5949095;return(a*=2)<1?.5*(a*a*((e+1)*a-e)):.5*((a-=2)*a*((e+1)*a+e)+2)},bounceIn:function(a){return 1-ov.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},bounceInOut:function(a){return a<.5?ov.bounceIn(a*2)*.5:ov.bounceOut(a*2-1)*.5+.5}},dy=Math.pow,ih=Math.sqrt,T2=1e-8,UG=1e-4,xO=ih(3),uy=1/3,sc=A0(),Xo=A0(),ox=A0();function Qu(a){return a>-T2&&a<T2}function GG(a){return a>T2||a<-T2}function bi(a,e,t,r,n){var i=1-n;return i*i*(i*a+3*n*e)+n*n*(n*r+3*i*t)}function mO(a,e,t,r,n){var i=1-n;return 3*(((e-a)*i+2*(t-e)*n)*i+(r-t)*n*n)}function M2(a,e,t,r,n,i){var o=r+3*(e-t)-a,l=3*(t-e*2+a),c=3*(e-a),d=a-n,u=l*l-3*o*c,h=l*c-9*o*d,f=c*c-3*l*d,p=0;if(Qu(u)&&Qu(h))if(Qu(l))i[0]=0;else{var g=-c/l;g>=0&&g<=1&&(i[p++]=g)}else{var b=h*h-4*u*f;if(Qu(b)){var w=h/u,g=-l/o+w,_=-w/2;g>=0&&g<=1&&(i[p++]=g),_>=0&&_<=1&&(i[p++]=_)}else if(b>0){var k=ih(b),T=u*l+1.5*o*(-h+k),D=u*l+1.5*o*(-h-k);T<0?T=-dy(-T,uy):T=dy(T,uy),D<0?D=-dy(-D,uy):D=dy(D,uy);var g=(-l-(T+D))/(3*o);g>=0&&g<=1&&(i[p++]=g)}else{var I=(2*u*l-3*o*h)/(2*ih(u*u*u)),O=Math.acos(I)/3,P=ih(u),V=Math.cos(O),g=(-l-2*P*V)/(3*o),_=(-l+P*(V+xO*Math.sin(O)))/(3*o),G=(-l+P*(V-xO*Math.sin(O)))/(3*o);g>=0&&g<=1&&(i[p++]=g),_>=0&&_<=1&&(i[p++]=_),G>=0&&G<=1&&(i[p++]=G)}}return p}function WG(a,e,t,r,n){var i=6*t-12*e+6*a,o=9*e+3*r-3*a-9*t,l=3*e-3*a,c=0;if(Qu(o)){if(GG(i)){var d=-l/i;d>=0&&d<=1&&(n[c++]=d)}}else{var u=i*i-4*o*l;if(Qu(u))n[0]=-i/(2*o);else if(u>0){var h=ih(u),d=(-i+h)/(2*o),f=(-i-h)/(2*o);d>=0&&d<=1&&(n[c++]=d),f>=0&&f<=1&&(n[c++]=f)}}return c}function gh(a,e,t,r,n,i){var o=(e-a)*n+a,l=(t-e)*n+e,c=(r-t)*n+t,d=(l-o)*n+o,u=(c-l)*n+l,h=(u-d)*n+d;i[0]=a,i[1]=o,i[2]=d,i[3]=h,i[4]=h,i[5]=u,i[6]=c,i[7]=r}function $G(a,e,t,r,n,i,o,l,c,d,u){var h,f=.005,p=1/0,g,b,w,_;sc[0]=c,sc[1]=d;for(var k=0;k<1;k+=.05)Xo[0]=bi(a,t,n,o,k),Xo[1]=bi(e,r,i,l,k),w=a0(sc,Xo),w<p&&(h=k,p=w);p=1/0;for(var T=0;T<32&&!(f<UG);T++)g=h-f,b=h+f,Xo[0]=bi(a,t,n,o,g),Xo[1]=bi(e,r,i,l,g),w=a0(Xo,sc),g>=0&&w<p?(h=g,p=w):(ox[0]=bi(a,t,n,o,b),ox[1]=bi(e,r,i,l,b),_=a0(ox,sc),b<=1&&_<p?(h=b,p=_):f*=.5);return u&&(u[0]=bi(a,t,n,o,h),u[1]=bi(e,r,i,l,h)),ih(p)}function Exe(a,e,t,r,n,i,o,l,c){for(var d=a,u=e,h=0,f=1/c,p=1;p<=c;p++){var g=p*f,b=bi(a,t,n,o,g),w=bi(e,r,i,l,g),_=b-d,k=w-u;h+=Math.sqrt(_*_+k*k),d=b,u=w}return h}function Ei(a,e,t,r){var n=1-r;return n*(n*a+2*r*e)+r*r*t}function T4(a,e,t,r){return 2*((1-r)*(e-a)+r*(t-e))}function Dxe(a,e,t,r,n){var i=a-2*e+t,o=2*(e-a),l=a-r,c=0;if(Qu(i)){if(GG(o)){var d=-l/o;d>=0&&d<=1&&(n[c++]=d)}}else{var u=o*o-4*i*l;if(Qu(u)){var d=-o/(2*i);d>=0&&d<=1&&(n[c++]=d)}else if(u>0){var h=ih(u),d=(-o+h)/(2*i),f=(-o-h)/(2*i);d>=0&&d<=1&&(n[c++]=d),f>=0&&f<=1&&(n[c++]=f)}}return c}function YG(a,e,t){var r=a+t-2*e;return r===0?.5:(a-e)/r}function zv(a,e,t,r,n){var i=(e-a)*r+a,o=(t-e)*r+e,l=(o-i)*r+i;n[0]=a,n[1]=i,n[2]=l,n[3]=l,n[4]=o,n[5]=t}function qG(a,e,t,r,n,i,o,l,c){var d,u=.005,h=1/0;sc[0]=o,sc[1]=l;for(var f=0;f<1;f+=.05){Xo[0]=Ei(a,t,n,f),Xo[1]=Ei(e,r,i,f);var p=a0(sc,Xo);p<h&&(d=f,h=p)}h=1/0;for(var g=0;g<32&&!(u<UG);g++){var b=d-u,w=d+u;Xo[0]=Ei(a,t,n,b),Xo[1]=Ei(e,r,i,b);var p=a0(Xo,sc);if(b>=0&&p<h)d=b,h=p;else{ox[0]=Ei(a,t,n,w),ox[1]=Ei(e,r,i,w);var _=a0(ox,sc);w<=1&&_<h?(d=w,h=_):u*=.5}}return c&&(c[0]=Ei(a,t,n,d),c[1]=Ei(e,r,i,d)),ih(h)}function Ixe(a,e,t,r,n,i,o){for(var l=a,c=e,d=0,u=1/o,h=1;h<=o;h++){var f=h*u,p=Ei(a,t,n,f),g=Ei(e,r,i,f),b=p-l,w=g-c;d+=Math.sqrt(b*b+w*w),l=p,c=g}return d}var Rxe=/cubic-bezier\(([0-9,\.e ]+)\)/;function IT(a){var e=a&&Rxe.exec(a);if(e){var t=e[1].split(","),r=+Jo(t[0]),n=+Jo(t[1]),i=+Jo(t[2]),o=+Jo(t[3]);if(isNaN(r+n+i+o))return;var l=[];return function(c){return c<=0?0:c>=1?1:M2(0,r,i,1,c,l)&&bi(0,n,o,1,l[0])}}}var Lxe=(function(){function a(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||Bn,this.ondestroy=e.ondestroy||Bn,this.onrestart=e.onrestart||Bn,e.easing&&this.setEasing(e.easing)}return a.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var r=this._life,n=e-this._startTime-this._pausedTime,i=n/r;i<0&&(i=0),i=Math.min(i,1);var o=this.easingFunc,l=o?o(i):i;if(this.onframe(l),i===1)if(this.loop){var c=n%r;this._startTime=e-c,this._pausedTime=0,this.onrestart()}else return!0;return!1},a.prototype.pause=function(){this._paused=!0},a.prototype.resume=function(){this._paused=!1},a.prototype.setEasing=function(e){this.easing=e,this.easingFunc=Ut(e)?e:ov[e]||IT(e)},a})(),XG=(function(){function a(e){this.value=e}return a})(),Oxe=(function(){function a(){this._len=0}return a.prototype.insert=function(e){var t=new XG(e);return this.insertEntry(t),t},a.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},a.prototype.remove=function(e){var t=e.prev,r=e.next;t?t.next=r:this.head=r,r?r.prev=t:this.tail=t,e.next=e.prev=null,this._len--},a.prototype.len=function(){return this._len},a.prototype.clear=function(){this.head=this.tail=null,this._len=0},a})(),jx=(function(){function a(e){this._list=new Oxe,this._maxSize=10,this._map={},this._maxSize=e}return a.prototype.put=function(e,t){var r=this._list,n=this._map,i=null;if(n[e]==null){var o=r.len(),l=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var c=r.head;r.remove(c),delete n[c.key],i=c.value,this._lastRemovedEntry=c}l?l.value=t:l=new XG(t),l.key=e,r.insertEntry(l),n[e]=l}return i},a.prototype.get=function(e){var t=this._map[e],r=this._list;if(t!=null)return t!==r.tail&&(r.remove(t),r.insertEntry(t)),t.value},a.prototype.clear=function(){this._list.clear(),this._map={}},a.prototype.len=function(){return this._list.len()},a})(),gO={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Nl(a){return a=Math.round(a),a<0?0:a>255?255:a}function Pxe(a){return a=Math.round(a),a<0?0:a>360?360:a}function Fv(a){return a<0?0:a>1?1:a}function uk(a){var e=a;return e.length&&e.charAt(e.length-1)==="%"?Nl(parseFloat(e)/100*255):Nl(parseInt(e,10))}function sh(a){var e=a;return e.length&&e.charAt(e.length-1)==="%"?Fv(parseFloat(e)/100):Fv(parseFloat(e))}function hk(a,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?a+(e-a)*t*6:t*2<1?e:t*3<2?a+(e-a)*(2/3-t)*6:a}function Ju(a,e,t){return a+(e-a)*t}function Uo(a,e,t,r,n){return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a}function M4(a,e){return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a}var ZG=new jx(20),hy=null;function xp(a,e){hy&&M4(hy,e),hy=ZG.put(a,hy||e.slice())}function qs(a,e){if(a){e=e||[];var t=ZG.get(a);if(t)return M4(e,t);a=a+"";var r=a.replace(/ /g,"").toLowerCase();if(r in gO)return M4(e,gO[r]),xp(a,e),e;var n=r.length;if(r.charAt(0)==="#"){if(n===4||n===5){var i=parseInt(r.slice(1,4),16);if(!(i>=0&&i<=4095)){Uo(e,0,0,0,1);return}return Uo(e,(i&3840)>>4|(i&3840)>>8,i&240|(i&240)>>4,i&15|(i&15)<<4,n===5?parseInt(r.slice(4),16)/15:1),xp(a,e),e}else if(n===7||n===9){var i=parseInt(r.slice(1,7),16);if(!(i>=0&&i<=16777215)){Uo(e,0,0,0,1);return}return Uo(e,(i&16711680)>>16,(i&65280)>>8,i&255,n===9?parseInt(r.slice(7),16)/255:1),xp(a,e),e}return}var o=r.indexOf("("),l=r.indexOf(")");if(o!==-1&&l+1===n){var c=r.substr(0,o),d=r.substr(o+1,l-(o+1)).split(","),u=1;switch(c){case"rgba":if(d.length!==4)return d.length===3?Uo(e,+d[0],+d[1],+d[2],1):Uo(e,0,0,0,1);u=sh(d.pop());case"rgb":if(d.length>=3)return Uo(e,uk(d[0]),uk(d[1]),uk(d[2]),d.length===3?u:sh(d[3])),xp(a,e),e;Uo(e,0,0,0,1);return;case"hsla":if(d.length!==4){Uo(e,0,0,0,1);return}return d[3]=sh(d[3]),E4(d,e),xp(a,e),e;case"hsl":if(d.length!==3){Uo(e,0,0,0,1);return}return E4(d,e),xp(a,e),e;default:return}}Uo(e,0,0,0,1)}}function E4(a,e){var t=(parseFloat(a[0])%360+360)%360/360,r=sh(a[1]),n=sh(a[2]),i=n<=.5?n*(r+1):n+r-n*r,o=n*2-i;return e=e||[],Uo(e,Nl(hk(o,i,t+1/3)*255),Nl(hk(o,i,t)*255),Nl(hk(o,i,t-1/3)*255),1),a.length===4&&(e[3]=a[3]),e}function Bxe(a){if(a){var e=a[0]/255,t=a[1]/255,r=a[2]/255,n=Math.min(e,t,r),i=Math.max(e,t,r),o=i-n,l=(i+n)/2,c,d;if(o===0)c=0,d=0;else{l<.5?d=o/(i+n):d=o/(2-i-n);var u=((i-e)/6+o/2)/o,h=((i-t)/6+o/2)/o,f=((i-r)/6+o/2)/o;e===i?c=f-h:t===i?c=1/3+u-f:r===i&&(c=2/3+h-u),c<0&&(c+=1),c>1&&(c-=1)}var p=[c*360,d,l];return a[3]!=null&&p.push(a[3]),p}}function D4(a,e){var t=qs(a);if(t){for(var r=0;r<3;r++)e<0?t[r]=t[r]*(1-e)|0:t[r]=(255-t[r])*e+t[r]|0,t[r]>255?t[r]=255:t[r]<0&&(t[r]=0);return yc(t,t.length===4?"rgba":"rgb")}}function fk(a,e,t){if(!(!(e&&e.length)||!(a>=0&&a<=1))){t=t||[];var r=a*(e.length-1),n=Math.floor(r),i=Math.ceil(r),o=e[n],l=e[i],c=r-n;return t[0]=Nl(Ju(o[0],l[0],c)),t[1]=Nl(Ju(o[1],l[1],c)),t[2]=Nl(Ju(o[2],l[2],c)),t[3]=Fv(Ju(o[3],l[3],c)),t}}function zxe(a,e,t){if(!(!(e&&e.length)||!(a>=0&&a<=1))){var r=a*(e.length-1),n=Math.floor(r),i=Math.ceil(r),o=qs(e[n]),l=qs(e[i]),c=r-n,d=yc([Nl(Ju(o[0],l[0],c)),Nl(Ju(o[1],l[1],c)),Nl(Ju(o[2],l[2],c)),Fv(Ju(o[3],l[3],c))],"rgba");return t?{color:d,leftIndex:n,rightIndex:i,value:r}:d}}function oh(a,e,t,r){var n=qs(a);if(a)return n=Bxe(n),e!=null&&(n[0]=Pxe(Ut(e)?e(n[0]):e)),t!=null&&(n[1]=sh(Ut(t)?t(n[1]):t)),r!=null&&(n[2]=sh(Ut(r)?r(n[2]):r)),yc(E4(n),"rgba")}function E2(a,e){var t=qs(a);if(t&&e!=null)return t[3]=Fv(e),yc(t,"rgba")}function yc(a,e){if(!(!a||!a.length)){var t=a[0]+","+a[1]+","+a[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+a[3]),e+"("+t+")"}}function D2(a,e){var t=qs(a);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}var vO=new jx(100);function I4(a){if(jt(a)){var e=vO.get(a);return e||(e=D4(a,-.1),vO.put(a,e)),e}else if(aN(a)){var t=Je({},a);return t.colorStops=it(a.colorStops,function(r){return{offset:r.offset,color:D4(r.color,-.1)}}),t}return a}var I2=Math.round;function Vv(a){var e;if(!a||a==="transparent")a="none";else if(typeof a=="string"&&a.indexOf("rgba")>-1){var t=qs(a);t&&(a="rgb("+t[0]+","+t[1]+","+t[2]+")",e=t[3])}return{color:a,opacity:e??1}}var bO=1e-4;function eh(a){return a<bO&&a>-bO}function fy(a){return I2(a*1e3)/1e3}function R4(a){return I2(a*1e4)/1e4}function Fxe(a){return"matrix("+fy(a[0])+","+fy(a[1])+","+fy(a[2])+","+fy(a[3])+","+R4(a[4])+","+R4(a[5])+")"}var Vxe={left:"start",right:"end",center:"middle",middle:"middle"};function Hxe(a,e,t){return t==="top"?a+=e/2:t==="bottom"&&(a-=e/2),a}function Uxe(a){return a&&(a.shadowBlur||a.shadowOffsetX||a.shadowOffsetY)}function Gxe(a){var e=a.style,t=a.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),t[0],t[1]].join(",")}function KG(a){return a&&!!a.image}function Wxe(a){return a&&!!a.svgElement}function RT(a){return KG(a)||Wxe(a)}function QG(a){return a.type==="linear"}function JG(a){return a.type==="radial"}function eW(a){return a&&(a.type==="linear"||a.type==="radial")}function oN(a){return"url(#"+a+")"}function tW(a){var e=a.getGlobalScale(),t=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(t)/Math.log(10)),1)}function aW(a){var e=a.x||0,t=a.y||0,r=(a.rotation||0)*Iw,n=Pt(a.scaleX,1),i=Pt(a.scaleY,1),o=a.skewX||0,l=a.skewY||0,c=[];return(e||t)&&c.push("translate("+e+"px,"+t+"px)"),r&&c.push("rotate("+r+")"),(n!==1||i!==1)&&c.push("scale("+n+","+i+")"),(o||l)&&c.push("skew("+I2(o*Iw)+"deg, "+I2(l*Iw)+"deg)"),c.join(" ")}var $xe=(function(){return Ba.hasGlobalWindow&&Ut(window.btoa)?function(a){return window.btoa(unescape(encodeURIComponent(a)))}:typeof Buffer<"u"?function(a){return Buffer.from(a).toString("base64")}:function(a){return null}})(),L4=Array.prototype.slice;function gd(a,e,t){return(e-a)*t+a}function pk(a,e,t,r){for(var n=e.length,i=0;i<n;i++)a[i]=gd(e[i],t[i],r);return a}function Yxe(a,e,t,r){for(var n=e.length,i=n&&e[0].length,o=0;o<n;o++){a[o]||(a[o]=[]);for(var l=0;l<i;l++)a[o][l]=gd(e[o][l],t[o][l],r)}return a}function py(a,e,t,r){for(var n=e.length,i=0;i<n;i++)a[i]=e[i]+t[i]*r;return a}function yO(a,e,t,r){for(var n=e.length,i=n&&e[0].length,o=0;o<n;o++){a[o]||(a[o]=[]);for(var l=0;l<i;l++)a[o][l]=e[o][l]+t[o][l]*r}return a}function qxe(a,e){for(var t=a.length,r=e.length,n=t>r?e:a,i=Math.min(t,r),o=n[i-1]||{color:[0,0,0,0],offset:0},l=i;l<Math.max(t,r);l++)n.push({offset:o.offset,color:o.color.slice()})}function Xxe(a,e,t){var r=a,n=e;if(!(!r.push||!n.push)){var i=r.length,o=n.length;if(i!==o){var l=i>o;if(l)r.length=o;else for(var c=i;c<o;c++)r.push(t===1?n[c]:L4.call(n[c]))}for(var d=r[0]&&r[0].length,c=0;c<r.length;c++)if(t===1)isNaN(r[c])&&(r[c]=n[c]);else for(var u=0;u<d;u++)isNaN(r[c][u])&&(r[c][u]=n[c][u])}}function lv(a){if(ls(a)){var e=a.length;if(ls(a[0])){for(var t=[],r=0;r<e;r++)t.push(L4.call(a[r]));return t}return L4.call(a)}return a}function Pw(a){return a[0]=Math.floor(a[0])||0,a[1]=Math.floor(a[1])||0,a[2]=Math.floor(a[2])||0,a[3]=a[3]==null?1:a[3],"rgba("+a.join(",")+")"}function Zxe(a){return ls(a&&a[0])?2:1}var xy=0,Bw=1,rW=2,Hg=3,O4=4,P4=5,wO=6;function _O(a){return a===O4||a===P4}function my(a){return a===Bw||a===rW}var Xm=[0,0,0,0],Kxe=(function(){function a(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return a.prototype.isFinished=function(){return this._finished},a.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},a.prototype.needsAnimate=function(){return this.keyframes.length>=1},a.prototype.getAdditiveTrack=function(){return this._additiveTrack},a.prototype.addKeyframe=function(e,t,r){this._needsSort=!0;var n=this.keyframes,i=n.length,o=!1,l=wO,c=t;if(ls(t)){var d=Zxe(t);l=d,(d===1&&!Xa(t[0])||d===2&&!Xa(t[0][0]))&&(o=!0)}else if(Xa(t)&&!ss(t))l=xy;else if(jt(t))if(!isNaN(+t))l=xy;else{var u=qs(t);u&&(c=u,l=Hg)}else if(aN(t)){var h=Je({},c);h.colorStops=it(t.colorStops,function(p){return{offset:p.offset,color:qs(p.color)}}),QG(t)?l=O4:JG(t)&&(l=P4),c=h}i===0?this.valType=l:(l!==this.valType||l===wO)&&(o=!0),this.discrete=this.discrete||o;var f={time:e,value:c,rawValue:t,percent:0};return r&&(f.easing=r,f.easingFunc=Ut(r)?r:ov[r]||IT(r)),n.push(f),f},a.prototype.prepare=function(e,t){var r=this.keyframes;this._needsSort&&r.sort(function(b,w){return b.time-w.time});for(var n=this.valType,i=r.length,o=r[i-1],l=this.discrete,c=my(n),d=_O(n),u=0;u<i;u++){var h=r[u],f=h.value,p=o.value;h.percent=h.time/e,l||(c&&u!==i-1?Xxe(f,p,n):d&&qxe(f.colorStops,p.colorStops))}if(!l&&n!==P4&&t&&this.needsAnimate()&&t.needsAnimate()&&n===t.valType&&!t._finished){this._additiveTrack=t;for(var g=r[0].value,u=0;u<i;u++)n===xy?r[u].additiveValue=r[u].value-g:n===Hg?r[u].additiveValue=py([],r[u].value,g,-1):my(n)&&(r[u].additiveValue=n===Bw?py([],r[u].value,g,-1):yO([],r[u].value,g,-1))}},a.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,n=r?"additiveValue":"value",i=this.valType,o=this.keyframes,l=o.length,c=this.propName,d=i===Hg,u,h=this._lastFr,f=Math.min,p,g;if(l===1)p=g=o[0];else{if(t<0)u=0;else if(t<this._lastFrP){var b=f(h+1,l-1);for(u=b;u>=0&&!(o[u].percent<=t);u--);u=f(u,l-2)}else{for(u=h;u<l&&!(o[u].percent>t);u++);u=f(u-1,l-2)}g=o[u+1],p=o[u]}if(p&&g){this._lastFr=u,this._lastFrP=t;var w=g.percent-p.percent,_=w===0?1:f((t-p.percent)/w,1);g.easingFunc&&(_=g.easingFunc(_));var k=r?this._additiveValue:d?Xm:e[c];if((my(i)||d)&&!k&&(k=this._additiveValue=[]),this.discrete)e[c]=_<1?p.rawValue:g.rawValue;else if(my(i))i===Bw?pk(k,p[n],g[n],_):Yxe(k,p[n],g[n],_);else if(_O(i)){var T=p[n],D=g[n],I=i===O4;e[c]={type:I?"linear":"radial",x:gd(T.x,D.x,_),y:gd(T.y,D.y,_),colorStops:it(T.colorStops,function(P,V){var G=D.colorStops[V];return{offset:gd(P.offset,G.offset,_),color:Pw(pk([],P.color,G.color,_))}}),global:D.global},I?(e[c].x2=gd(T.x2,D.x2,_),e[c].y2=gd(T.y2,D.y2,_)):e[c].r=gd(T.r,D.r,_)}else if(d)pk(k,p[n],g[n],_),r||(e[c]=Pw(k));else{var O=gd(p[n],g[n],_);r?this._additiveValue=O:e[c]=O}r&&this._addToTarget(e)}}},a.prototype._addToTarget=function(e){var t=this.valType,r=this.propName,n=this._additiveValue;t===xy?e[r]=e[r]+n:t===Hg?(qs(e[r],Xm),py(Xm,Xm,n,1),e[r]=Pw(Xm)):t===Bw?py(e[r],e[r],n,1):t===rW&&yO(e[r],e[r],n,1)},a})(),LT=(function(){function a(e,t,r,n){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&n){CT("Can' use additive animation on looped animation.");return}this._additiveAnimators=n,this._allowDiscrete=r}return a.prototype.getMaxTime=function(){return this._maxTime},a.prototype.getDelay=function(){return this._delay},a.prototype.getLoop=function(){return this._loop},a.prototype.getTarget=function(){return this._target},a.prototype.changeTarget=function(e){this._target=e},a.prototype.when=function(e,t,r){return this.whenWithKeys(e,t,Va(t),r)},a.prototype.whenWithKeys=function(e,t,r,n){for(var i=this._tracks,o=0;o<r.length;o++){var l=r[o],c=i[l];if(!c){c=i[l]=new Kxe(l);var d=void 0,u=this._getAdditiveTrack(l);if(u){var h=u.keyframes,f=h[h.length-1];d=f&&f.value,u.valType===Hg&&d&&(d=Pw(d))}else d=this._target[l];if(d==null)continue;e>0&&c.addKeyframe(0,lv(d),n),this._trackKeys.push(l)}c.addKeyframe(e,lv(t[l]),n)}return this._maxTime=Math.max(this._maxTime,e),this},a.prototype.pause=function(){this._clip.pause(),this._paused=!0},a.prototype.resume=function(){this._clip.resume(),this._paused=!1},a.prototype.isPaused=function(){return!!this._paused},a.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},a.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,r=0;r<t;r++)e[r].call(this)},a.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var r=0;r<t.length;r++)t[r].call(this)},a.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,r=0;r<t.length;r++)e[t[r]].setFinished()},a.prototype._getAdditiveTrack=function(e){var t,r=this._additiveAnimators;if(r)for(var n=0;n<r.length;n++){var i=r[n].getTrack(e);i&&(t=i)}return t},a.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,r=[],n=this._maxTime||0,i=0;i<this._trackKeys.length;i++){var o=this._trackKeys[i],l=this._tracks[o],c=this._getAdditiveTrack(o),d=l.keyframes,u=d.length;if(l.prepare(n,c),l.needsAnimate())if(!this._allowDiscrete&&l.discrete){var h=d[u-1];h&&(t._target[l.propName]=h.rawValue),l.setFinished()}else r.push(l)}if(r.length||this._force){var f=new Lxe({life:n,loop:this._loop,delay:this._delay||0,onframe:function(p){t._started=2;var g=t._additiveAnimators;if(g){for(var b=!1,w=0;w<g.length;w++)if(g[w]._clip){b=!0;break}b||(t._additiveAnimators=null)}for(var w=0;w<r.length;w++)r[w].step(t._target,p);var _=t._onframeCbs;if(_)for(var w=0;w<_.length;w++)_[w](t._target,p)},ondestroy:function(){t._doneCallback()}});this._clip=f,this.animation&&this.animation.addClip(f),e&&f.setEasing(e)}else this._doneCallback();return this}},a.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},a.prototype.delay=function(e){return this._delay=e,this},a.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},a.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},a.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},a.prototype.getClip=function(){return this._clip},a.prototype.getTrack=function(e){return this._tracks[e]},a.prototype.getTracks=function(){var e=this;return it(this._trackKeys,function(t){return e._tracks[t]})},a.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var r=this._tracks,n=this._trackKeys,i=0;i<e.length;i++){var o=r[e[i]];o&&!o.isFinished()&&(t?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var l=!0,i=0;i<n.length;i++)if(!r[n[i]].isFinished()){l=!1;break}return l&&this._abortedCallback(),l},a.prototype.saveTo=function(e,t,r){if(e){t=t||this._trackKeys;for(var n=0;n<t.length;n++){var i=t[n],o=this._tracks[i];if(!(!o||o.isFinished())){var l=o.keyframes,c=l[r?0:l.length-1];c&&(e[i]=lv(c.rawValue))}}}},a.prototype.__changeFinalValue=function(e,t){t=t||Va(e);for(var r=0;r<t.length;r++){var n=t[r],i=this._tracks[n];if(i){var o=i.keyframes;if(o.length>1){var l=o.pop();i.addKeyframe(l.time,e[n]),i.prepare(this._maxTime,i.getAdditiveTrack())}}}},a})();function Zp(){return new Date().getTime()}var Qxe=(function(a){Le(e,a);function e(t){var r=a.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,t=t||{},r.stage=t.stage||{},r}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var r=t.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(t){if(t.animation){var r=t.prev,n=t.next;r?r.next=n:this._head=n,n?n.prev=r:this._tail=r,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var r=t.getClip();r&&this.removeClip(r),t.animation=null},e.prototype.update=function(t){for(var r=Zp()-this._pausedTime,n=r-this._time,i=this._head;i;){var o=i.next,l=i.step(r,n);l&&(i.ondestroy(),this.removeClip(i)),i=o}this._time=r,t||(this.trigger("frame",n),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function r(){t._running&&(A2(r),!t._paused&&t.update())}A2(r)},e.prototype.start=function(){this._running||(this._time=Zp(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=Zp(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=Zp()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var r=t.next;t.prev=t.next=t.animation=null,t=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,r){r=r||{},this.start();var n=new LT(t,r.loop);return this.addAnimator(n),n},e})(il),Jxe=300,xk=Ba.domSupported,mk=(function(){var a=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=it(a,function(n){var i=n.replace("mouse","pointer");return t.hasOwnProperty(i)?i:n});return{mouse:a,touch:e,pointer:r}})(),NO={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},jO=!1;function B4(a){var e=a.pointerType;return e==="pen"||e==="touch"}function eme(a){a.touching=!0,a.touchTimer!=null&&(clearTimeout(a.touchTimer),a.touchTimer=null),a.touchTimer=setTimeout(function(){a.touching=!1,a.touchTimer=null},700)}function gk(a){a&&(a.zrByTouch=!0)}function tme(a,e){return Go(a.dom,new ame(a,e),!0)}function nW(a,e){for(var t=e,r=!1;t&&t.nodeType!==9&&!(r=t.domBelongToZr||t!==e&&t===a.painterRoot);)t=t.parentNode;return r}var ame=(function(){function a(e,t){this.stopPropagation=Bn,this.stopImmediatePropagation=Bn,this.preventDefault=Bn,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return a})(),ml={mousedown:function(a){a=Go(this.dom,a),this.__mayPointerCapture=[a.zrX,a.zrY],this.trigger("mousedown",a)},mousemove:function(a){a=Go(this.dom,a);var e=this.__mayPointerCapture;e&&(a.zrX!==e[0]||a.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",a)},mouseup:function(a){a=Go(this.dom,a),this.__togglePointerCapture(!1),this.trigger("mouseup",a)},mouseout:function(a){a=Go(this.dom,a);var e=a.toElement||a.relatedTarget;nW(this,e)||(this.__pointerCapturing&&(a.zrEventControl="no_globalout"),this.trigger("mouseout",a))},wheel:function(a){jO=!0,a=Go(this.dom,a),this.trigger("mousewheel",a)},mousewheel:function(a){jO||(a=Go(this.dom,a),this.trigger("mousewheel",a))},touchstart:function(a){a=Go(this.dom,a),gk(a),this.__lastTouchMoment=new Date,this.handler.processGesture(a,"start"),ml.mousemove.call(this,a),ml.mousedown.call(this,a)},touchmove:function(a){a=Go(this.dom,a),gk(a),this.handler.processGesture(a,"change"),ml.mousemove.call(this,a)},touchend:function(a){a=Go(this.dom,a),gk(a),this.handler.processGesture(a,"end"),ml.mouseup.call(this,a),+new Date-+this.__lastTouchMoment<Jxe&&ml.click.call(this,a)},pointerdown:function(a){ml.mousedown.call(this,a)},pointermove:function(a){B4(a)||ml.mousemove.call(this,a)},pointerup:function(a){ml.mouseup.call(this,a)},pointerout:function(a){B4(a)||ml.mouseout.call(this,a)}};oe(["click","dblclick","contextmenu"],function(a){ml[a]=function(e){e=Go(this.dom,e),this.trigger(a,e)}});var z4={pointermove:function(a){B4(a)||z4.mousemove.call(this,a)},pointerup:function(a){z4.mouseup.call(this,a)},mousemove:function(a){this.trigger("mousemove",a)},mouseup:function(a){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",a),e&&(a.zrEventControl="only_globalout",this.trigger("mouseout",a))}};function rme(a,e){var t=e.domHandlers;Ba.pointerEventsSupported?oe(mk.pointer,function(r){zw(e,r,function(n){t[r].call(a,n)})}):(Ba.touchEventsSupported&&oe(mk.touch,function(r){zw(e,r,function(n){t[r].call(a,n),eme(e)})}),oe(mk.mouse,function(r){zw(e,r,function(n){n=ET(n),e.touching||t[r].call(a,n)})}))}function nme(a,e){Ba.pointerEventsSupported?oe(NO.pointer,t):Ba.touchEventsSupported||oe(NO.mouse,t);function t(r){function n(i){i=ET(i),nW(a,i.target)||(i=tme(a,i),e.domHandlers[r].call(a,i))}zw(e,r,n,{capture:!0})}}function zw(a,e,t,r){a.mounted[e]=t,a.listenerOpts[e]=r,k4(a.domTarget,e,t,r)}function vk(a){var e=a.mounted;for(var t in e)e.hasOwnProperty(t)&&xxe(a.domTarget,t,e[t],a.listenerOpts[t]);a.mounted={}}var SO=(function(){function a(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return a})(),ime=(function(a){Le(e,a);function e(t,r){var n=a.call(this)||this;return n.__pointerCapturing=!1,n.dom=t,n.painterRoot=r,n._localHandlerScope=new SO(t,ml),xk&&(n._globalHandlerScope=new SO(document,z4)),rme(n,n._localHandlerScope),n}return e.prototype.dispose=function(){vk(this._localHandlerScope),xk&&vk(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,xk&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var r=this._globalHandlerScope;t?nme(this,r):vk(r)}},e})(il),iW=1;Ba.hasGlobalWindow&&(iW=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var R2=iW,F4=.4,V4="#333",H4="#ccc",sme="#eee",kO=iN,CO=5e-5;function of(a){return a>CO||a<-CO}var lf=[],mp=[],bk=Ii(),yk=Math.abs,jd=(function(){function a(){}return a.prototype.getLocalTransform=function(e){return a.getLocalTransform(this,e)},a.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},a.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},a.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},a.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},a.prototype.needLocalTransform=function(){return of(this.rotation)||of(this.x)||of(this.y)||of(this.scaleX-1)||of(this.scaleY-1)||of(this.skewX)||of(this.skewY)},a.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),r=this.transform;if(!(t||e)){r&&(kO(r),this.invTransform=null);return}r=r||Ii(),t?this.getLocalTransform(r):kO(r),e&&(t?bc(r,e,r):sN(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},a.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(lf);var r=lf[0]<0?-1:1,n=lf[1]<0?-1:1,i=((lf[0]-r)*t+r)/lf[0]||0,o=((lf[1]-n)*t+n)/lf[1]||0;e[0]*=i,e[1]*=i,e[2]*=o,e[3]*=o}this.invTransform=this.invTransform||Ii(),Cl(this.invTransform,e)},a.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},a.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],n=Math.atan2(e[1],e[0]),i=Math.PI/2+n-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(i),t=Math.sqrt(t),this.skewX=i,this.skewY=0,this.rotation=-n,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=r,this.originX=0,this.originY=0}},a.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||Ii(),bc(mp,e.invTransform,t),t=mp);var r=this.originX,n=this.originY;(r||n)&&(bk[4]=r,bk[5]=n,bc(mp,t,bk),mp[4]-=r,mp[5]-=n,t=mp),this.setLocalTransform(t)}},a.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},a.prototype.transformCoordToLocal=function(e,t){var r=[e,t],n=this.invTransform;return n&&zn(r,r,n),r},a.prototype.transformCoordToGlobal=function(e,t){var r=[e,t],n=this.transform;return n&&zn(r,r,n),r},a.prototype.getLineScale=function(){var e=this.transform;return e&&yk(e[0]-1)>1e-10&&yk(e[3]-1)>1e-10?Math.sqrt(yk(e[0]*e[3]-e[2]*e[1])):1},a.prototype.copyTransform=function(e){L2(this,e)},a.getLocalTransform=function(e,t){t=t||[];var r=e.originX||0,n=e.originY||0,i=e.scaleX,o=e.scaleY,l=e.anchorX,c=e.anchorY,d=e.rotation||0,u=e.x,h=e.y,f=e.skewX?Math.tan(e.skewX):0,p=e.skewY?Math.tan(-e.skewY):0;if(r||n||l||c){var g=r+l,b=n+c;t[4]=-g*i-f*b*o,t[5]=-b*o-p*g*i}else t[4]=t[5]=0;return t[0]=i,t[3]=o,t[1]=p*i,t[2]=f*o,d&&Ch(t,t,d),t[4]+=r+u,t[5]+=n+h,t},a.initDefaultProps=(function(){var e=a.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0})(),a})(),Ac=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function L2(a,e){for(var t=0;t<Ac.length;t++){var r=Ac[t];a[r]=e[r]}}function wc(a){gy||(gy=new jx(100)),a=a||Id;var e=gy.get(a);return e||(e={font:a,strWidthCache:new jx(500),asciiWidthMap:null,asciiWidthMapTried:!1,stWideCharWidth:kl.measureText("",a).width,asciiCharWidth:kl.measureText("a",a).width},gy.put(a,e)),e}var gy;function ome(a){if(!(wk>=AO)){a=a||Id;for(var e=[],t=+new Date,r=0;r<=127;r++)e[r]=kl.measureText(String.fromCharCode(r),a).width;var n=+new Date-t;return n>16?wk=AO:n>2&&wk++,e}}var wk=0,AO=5;function sW(a,e){return a.asciiWidthMapTried||(a.asciiWidthMap=ome(a.font),a.asciiWidthMapTried=!0),0<=e&&e<=127?a.asciiWidthMap!=null?a.asciiWidthMap[e]:a.asciiCharWidth:a.stWideCharWidth}function _c(a,e){var t=a.strWidthCache,r=t.get(e);return r==null&&(r=kl.measureText(e,a.font).width,t.put(e,r)),r}function TO(a,e,t,r){var n=_c(wc(e),a),i=Cb(e),o=Sx(0,n,t),l=r0(0,i,r),c=new Jt(o,l,n,i);return c}function lN(a,e,t,r){var n=((a||"")+"").split(`
`),i=n.length;if(i===1)return TO(n[0],e,t,r);for(var o=new Jt(0,0,0,0),l=0;l<n.length;l++){var c=TO(n[l],e,t,r);l===0?o.copy(c):o.union(c)}return o}function Sx(a,e,t,r){return t==="right"?r?a+=e:a-=e:t==="center"&&(r?a+=e/2:a-=e/2),a}function r0(a,e,t,r){return t==="middle"?r?a+=e/2:a-=e/2:t==="bottom"&&(r?a+=e:a-=e),a}function Cb(a){return wc(a).stWideCharWidth}function Al(a,e){return typeof a=="string"?a.lastIndexOf("%")>=0?parseFloat(a)/100*e:parseFloat(a):a}function O2(a,e,t){var r=e.position||"inside",n=e.distance!=null?e.distance:5,i=t.height,o=t.width,l=i/2,c=t.x,d=t.y,u="left",h="top";if(r instanceof Array)c+=Al(r[0],t.width),d+=Al(r[1],t.height),u=null,h=null;else switch(r){case"left":c-=n,d+=l,u="right",h="middle";break;case"right":c+=n+o,d+=l,h="middle";break;case"top":c+=o/2,d-=n,u="center",h="bottom";break;case"bottom":c+=o/2,d+=i+n,u="center";break;case"inside":c+=o/2,d+=l,u="center",h="middle";break;case"insideLeft":c+=n,d+=l,h="middle";break;case"insideRight":c+=o-n,d+=l,u="right",h="middle";break;case"insideTop":c+=o/2,d+=n,u="center";break;case"insideBottom":c+=o/2,d+=i-n,u="center",h="bottom";break;case"insideTopLeft":c+=n,d+=n;break;case"insideTopRight":c+=o-n,d+=n,u="right";break;case"insideBottomLeft":c+=n,d+=i-n,h="bottom";break;case"insideBottomRight":c+=o-n,d+=i-n,u="right",h="bottom";break}return a=a||{},a.x=c,a.y=d,a.align=u,a.verticalAlign=h,a}var _k="__zr_normal__",Nk=Ac.concat(["ignore"]),lme=kc(Ac,function(a,e){return a[e]=!0,a},{ignore:!1}),gp={},cme=new Jt(0,0,0,0),vy=[],cN=(function(){function a(e){this.id=IG(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return a.prototype._init=function(e){this.attr(e)},a.prototype.drift=function(e,t,r){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=e,n[5]+=t,this.decomposeTransform(),this.markRedraw()},a.prototype.beforeUpdate=function(){},a.prototype.afterUpdate=function(){},a.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},a.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,n=r.local,i=t.innerTransformable,o=void 0,l=void 0,c=!1;i.parent=n?this:null;var d=!1;i.copyTransform(t);var u=r.position!=null,h=r.autoOverflowArea,f=void 0;if((h||u)&&(f=cme,r.layoutRect?f.copy(r.layoutRect):f.copy(this.getBoundingRect()),n||f.applyTransform(this.transform)),u){this.calculateTextPosition?this.calculateTextPosition(gp,r,f):O2(gp,r,f),i.x=gp.x,i.y=gp.y,o=gp.align,l=gp.verticalAlign;var p=r.origin;if(p&&r.rotation!=null){var g=void 0,b=void 0;p==="center"?(g=f.width*.5,b=f.height*.5):(g=Al(p[0],f.width),b=Al(p[1],f.height)),d=!0,i.originX=-i.x+g+(n?0:f.x),i.originY=-i.y+b+(n?0:f.y)}}r.rotation!=null&&(i.rotation=r.rotation);var w=r.offset;w&&(i.x+=w[0],i.y+=w[1],d||(i.originX=-w[0],i.originY=-w[1]));var _=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={});if(h){var k=_.overflowRect=_.overflowRect||new Jt(0,0,0,0);i.getLocalTransform(vy),Cl(vy,vy),Jt.copy(k,f),k.applyTransform(vy)}else _.overflowRect=null;var T=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,D=void 0,I=void 0,O=void 0;T&&this.canBeInsideText()?(D=r.insideFill,I=r.insideStroke,(D==null||D==="auto")&&(D=this.getInsideTextFill()),(I==null||I==="auto")&&(I=this.getInsideTextStroke(D),O=!0)):(D=r.outsideFill,I=r.outsideStroke,(D==null||D==="auto")&&(D=this.getOutsideFill()),(I==null||I==="auto")&&(I=this.getOutsideStroke(D),O=!0)),D=D||"#000",(D!==_.fill||I!==_.stroke||O!==_.autoStroke||o!==_.align||l!==_.verticalAlign)&&(c=!0,_.fill=D,_.stroke=I,_.autoStroke=O,_.align=o,_.verticalAlign=l,t.setDefaultTextStyle(_)),t.__dirty|=yo,c&&t.dirtyStyle(!0)}},a.prototype.canBeInsideText=function(){return!0},a.prototype.getInsideTextFill=function(){return"#fff"},a.prototype.getInsideTextStroke=function(e){return"#000"},a.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?H4:V4},a.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),r=typeof t=="string"&&qs(t);r||(r=[255,255,255,1]);for(var n=r[3],i=this.__zr.isDarkMode(),o=0;o<3;o++)r[o]=r[o]*n+(i?0:255)*(1-n);return r[3]=1,yc(r,"rgba")},a.prototype.traverse=function(e,t){},a.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},Je(this.extra,t)):this[e]=t},a.prototype.hide=function(){this.ignore=!0,this.markRedraw()},a.prototype.show=function(){this.ignore=!1,this.markRedraw()},a.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(Qt(e))for(var r=e,n=Va(r),i=0;i<n.length;i++){var o=n[i];this.attrKV(o,e[o])}return this.markRedraw(),this},a.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,r=0;r<this.animators.length;r++){var n=this.animators[r],i=n.__fromStateTransition;if(!(n.getLoop()||i&&i!==_k)){var o=n.targetName,l=o?t[o]:t;n.saveTo(l)}}},a.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,Nk)},a.prototype._savePrimaryToNormal=function(e,t,r){for(var n=0;n<r.length;n++){var i=r[n];e[i]!=null&&!(i in t)&&(t[i]=this[i])}},a.prototype.hasState=function(){return this.currentStates.length>0},a.prototype.getState=function(e){return this.states[e]},a.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},a.prototype.clearStates=function(e){this.useState(_k,!1,e)},a.prototype.useState=function(e,t,r,n){var i=e===_k,o=this.hasState();if(!(!o&&i)){var l=this.currentStates,c=this.stateTransition;if(!(ya(l,e)>=0&&(t||l.length===1))){var d;if(this.stateProxy&&!i&&(d=this.stateProxy(e)),d||(d=this.states&&this.states[e]),!d&&!i){CT("State "+e+" not exists.");return}i||this.saveCurrentToNormalState(d);var u=!!(d&&d.hoverLayer||n);u&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,d,this._normalState,t,!r&&!this.__inHover&&c&&c.duration>0,c);var h=this._textContent,f=this._textGuide;return h&&h.useState(e,t,r,u),f&&f.useState(e,t,r,u),i?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~yo),d}}},a.prototype.useStates=function(e,t,r){if(!e.length)this.clearStates();else{var n=[],i=this.currentStates,o=e.length,l=o===i.length;if(l){for(var c=0;c<o;c++)if(e[c]!==i[c]){l=!1;break}}if(l)return;for(var c=0;c<o;c++){var d=e[c],u=void 0;this.stateProxy&&(u=this.stateProxy(d,e)),u||(u=this.states[d]),u&&n.push(u)}var h=n[o-1],f=!!(h&&h.hoverLayer||r);f&&this._toggleHoverLayerFlag(!0);var p=this._mergeStates(n),g=this.stateTransition;this.saveCurrentToNormalState(p),this._applyStateObj(e.join(","),p,this._normalState,!1,!t&&!this.__inHover&&g&&g.duration>0,g);var b=this._textContent,w=this._textGuide;b&&b.useStates(e,t,f),w&&w.useStates(e,t,f),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~yo)}},a.prototype.isSilent=function(){for(var e=this;e;){if(e.silent)return!0;var t=e.__hostTarget;e=t?e.ignoreHostSilent?null:t:e.parent}return!1},a.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},a.prototype.removeState=function(e){var t=ya(this.currentStates,e);if(t>=0){var r=this.currentStates.slice();r.splice(t,1),this.useStates(r)}},a.prototype.replaceState=function(e,t,r){var n=this.currentStates.slice(),i=ya(n,e),o=ya(n,t)>=0;i>=0?o?n.splice(i,1):n[i]=t:r&&!o&&n.push(t),this.useStates(n)},a.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},a.prototype._mergeStates=function(e){for(var t={},r,n=0;n<e.length;n++){var i=e[n];Je(t,i),i.textConfig&&(r=r||{},Je(r,i.textConfig))}return r&&(t.textConfig=r),t},a.prototype._applyStateObj=function(e,t,r,n,i,o){var l=!(t&&n);t&&t.textConfig?(this.textConfig=Je({},n?this.textConfig:r.textConfig),Je(this.textConfig,t.textConfig)):l&&r.textConfig&&(this.textConfig=r.textConfig);for(var c={},d=!1,u=0;u<Nk.length;u++){var h=Nk[u],f=i&&lme[h];t&&t[h]!=null?f?(d=!0,c[h]=t[h]):this[h]=t[h]:l&&r[h]!=null&&(f?(d=!0,c[h]=r[h]):this[h]=r[h])}if(!i)for(var u=0;u<this.animators.length;u++){var p=this.animators[u],g=p.targetName;p.getLoop()||p.__changeFinalValue(g?(t||r)[g]:t||r)}d&&this._transitionState(e,c,o)},a.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},a.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},a.prototype.getClipPath=function(){return this._clipPath},a.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},a.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},a.prototype.getTextContent=function(){return this._textContent},a.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new jd,this._attachComponent(e),this._textContent=e,this.markRedraw())},a.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),Je(this.textConfig,e),this.markRedraw()},a.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},a.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},a.prototype.getTextGuideLine=function(){return this._textGuide},a.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},a.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},a.prototype.markRedraw=function(){this.__dirty|=yo;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},a.prototype.dirty=function(){this.markRedraw()},a.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,r=this._textGuide;t&&(t.__inHover=e),r&&(r.__inHover=e)},a.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.addAnimator(t[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},a.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.removeAnimator(t[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},a.prototype.animate=function(e,t,r){var n=e?this[e]:this,i=new LT(n,t,r);return e&&(i.targetName=e),this.addAnimator(i,e),i},a.prototype.addAnimator=function(e,t){var r=this.__zr,n=this;e.during(function(){n.updateDuringAnimation(t)}).done(function(){var i=n.animators,o=ya(i,e);o>=0&&i.splice(o,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},a.prototype.updateDuringAnimation=function(e){this.markRedraw()},a.prototype.stopAnimation=function(e,t){for(var r=this.animators,n=r.length,i=[],o=0;o<n;o++){var l=r[o];!e||e===l.scope?l.stop(t):i.push(l)}return this.animators=i,this},a.prototype.animateTo=function(e,t,r){jk(this,e,t,r)},a.prototype.animateFrom=function(e,t,r){jk(this,e,t,r,!0)},a.prototype._transitionState=function(e,t,r,n){for(var i=jk(this,t,r,n),o=0;o<i.length;o++)i[o].__fromStateTransition=e},a.prototype.getBoundingRect=function(){return null},a.prototype.getPaintRect=function(){return null},a.initDefaultProps=(function(){var e=a.prototype;e.type="element",e.name="",e.ignore=e.silent=e.ignoreHostSilent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=yo;function t(r,n,i,o){Object.defineProperty(e,r,{get:function(){if(!this[n]){var c=this[n]=[];l(this,c)}return this[n]},set:function(c){this[i]=c[0],this[o]=c[1],this[n]=c,l(this,c)}});function l(c,d){Object.defineProperty(d,0,{get:function(){return c[i]},set:function(u){c[i]=u}}),Object.defineProperty(d,1,{get:function(){return c[o]},set:function(u){c[o]=u}})}}Object.defineProperty&&(t("position","_legacyPos","x","y"),t("scale","_legacyScale","scaleX","scaleY"),t("origin","_legacyOrigin","originX","originY"))})(),a})();ti(cN,il);ti(cN,jd);function jk(a,e,t,r,n){t=t||{};var i=[];oW(a,"",a,e,t,r,i,n);var o=i.length,l=!1,c=t.done,d=t.aborted,u=function(){l=!0,o--,o<=0&&(l?c&&c():d&&d())},h=function(){o--,o<=0&&(l?c&&c():d&&d())};o||c&&c(),i.length>0&&t.during&&i[0].during(function(g,b){t.during(b)});for(var f=0;f<i.length;f++){var p=i[f];u&&p.done(u),h&&p.aborted(h),t.force&&p.duration(t.duration),p.start(t.easing)}return i}function Sk(a,e,t){for(var r=0;r<t;r++)a[r]=e[r]}function dme(a){return ls(a[0])}function ume(a,e,t){if(ls(e[t]))if(ls(a[t])||(a[t]=[]),Zs(e[t])){var r=e[t].length;a[t].length!==r&&(a[t]=new e[t].constructor(r),Sk(a[t],e[t],r))}else{var n=e[t],i=a[t],o=n.length;if(dme(n))for(var l=n[0].length,c=0;c<o;c++)i[c]?Sk(i[c],n[c],l):i[c]=Array.prototype.slice.call(n[c]);else Sk(i,n,o);i.length=n.length}else a[t]=e[t]}function hme(a,e){return a===e||ls(a)&&ls(e)&&fme(a,e)}function fme(a,e){var t=a.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(a[r]!==e[r])return!1;return!0}function oW(a,e,t,r,n,i,o,l){for(var c=Va(r),d=n.duration,u=n.delay,h=n.additive,f=n.setToFinal,p=!Qt(i),g=a.animators,b=[],w=0;w<c.length;w++){var _=c[w],k=r[_];if(k!=null&&t[_]!=null&&(p||i[_]))if(Qt(k)&&!ls(k)&&!aN(k)){if(e){l||(t[_]=k,a.updateDuringAnimation(e));continue}oW(a,_,t[_],k,n,i&&i[_],o,l)}else b.push(_);else l||(t[_]=k,a.updateDuringAnimation(e),b.push(_))}var T=b.length;if(!h&&T)for(var D=0;D<g.length;D++){var I=g[D];if(I.targetName===e){var O=I.stopTracks(b);if(O){var P=ya(g,I);g.splice(P,1)}}}if(n.force||(b=hr(b,function($){return!hme(r[$],t[$])}),T=b.length),T>0||n.force&&!o.length){var V=void 0,G=void 0,Q=void 0;if(l){G={},f&&(V={});for(var D=0;D<T;D++){var _=b[D];G[_]=t[_],f?V[_]=r[_]:t[_]=r[_]}}else if(f){Q={};for(var D=0;D<T;D++){var _=b[D];Q[_]=lv(t[_]),ume(t,r,_)}}var I=new LT(t,!1,!1,h?hr(g,function(ae){return ae.targetName===e}):null);I.targetName=e,n.scope&&(I.scope=n.scope),f&&V&&I.whenWithKeys(0,V,b),Q&&I.whenWithKeys(0,Q,b),I.whenWithKeys(d??500,l?G:r,b).delay(u||0),a.addAnimator(I,e),o.push(I)}}var Gt=(function(a){Le(e,a);function e(t){var r=a.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var r=this._children,n=0;n<r.length;n++)if(r[n].name===t)return r[n]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,r){if(t&&t!==this&&t.parent!==this&&r&&r.parent===this){var n=this._children,i=n.indexOf(r);i>=0&&(n.splice(i,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,r){var n=ya(this._children,t);return n>=0&&this.replaceAt(r,n),this},e.prototype.replaceAt=function(t,r){var n=this._children,i=n[r];if(t&&t!==this&&t.parent!==this&&t!==i){n[r]=t,i.parent=null;var o=this.__zr;o&&i.removeSelfFromZr(o),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var r=this.__zr;r&&r!==t.__zr&&t.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(t){var r=this.__zr,n=this._children,i=ya(n,t);return i<0?this:(n.splice(i,1),t.parent=null,r&&t.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,r=this.__zr,n=0;n<t.length;n++){var i=t[n];r&&i.removeSelfFromZr(r),i.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,r){for(var n=this._children,i=0;i<n.length;i++){var o=n[i];t.call(r,o,i)}return this},e.prototype.traverse=function(t,r){for(var n=0;n<this._children.length;n++){var i=this._children[n],o=t.call(r,i);i.isGroup&&!o&&i.traverse(t,r)}return this},e.prototype.addSelfToZr=function(t){a.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++){var n=this._children[r];n.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){a.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++){var n=this._children[r];n.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var r=new Jt(0,0,0,0),n=t||this._children,i=[],o=null,l=0;l<n.length;l++){var c=n[l];if(!(c.ignore||c.invisible)){var d=c.getBoundingRect(),u=c.getLocalTransform(i);u?(Jt.applyTransform(r,d,u),o=o||r.clone(),o.union(r)):(o=o||d.clone(),o.union(d))}}return o||r},e})(cN);Gt.prototype.type="group";var Fw={},lW={};function pme(a){delete lW[a]}function xme(a){if(!a)return!1;if(typeof a=="string")return D2(a,1)<F4;if(a.colorStops){for(var e=a.colorStops,t=0,r=e.length,n=0;n<r;n++)t+=D2(e[n].color,1);return t/=r,t<F4}return!1}var mme=(function(){function a(e,t,r){var n=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=t,this.id=e;var i=new Mxe,o=r.renderer||"canvas";Fw[o]||(o=Va(Fw)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var l=new Fw[o](t,i,r,e),c=r.ssr||l.ssrOnly;this.storage=i,this.painter=l;var d=!Ba.node&&!Ba.worker&&!c?new ime(l.getViewportRoot(),l.root):null,u=r.useCoarsePointer,h=u==null||u==="auto"?Ba.touchEventsSupported:!!u,f=44,p;h&&(p=Pt(r.pointerSize,f)),this.handler=new FG(i,l,d,l.root,p),this.animation=new Qxe({stage:{update:c?null:function(){return n._flush(!0)}}}),c||this.animation.start()}return a.prototype.add=function(e){this._disposed||!e||(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},a.prototype.remove=function(e){this._disposed||!e||(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},a.prototype.configLayer=function(e,t){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh())},a.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=xme(e))},a.prototype.getBackgroundColor=function(){return this._backgroundColor},a.prototype.setDarkMode=function(e){this._darkMode=e},a.prototype.isDarkMode=function(){return this._darkMode},a.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},a.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},a.prototype.flush=function(){this._disposed||this._flush(!1)},a.prototype._flush=function(e){var t,r=Zp();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var n=Zp();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:n-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},a.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},a.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},a.prototype.refreshHover=function(){this._needsRefreshHover=!0},a.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},a.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},a.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},a.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},a.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},a.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},a.prototype.findHover=function(e,t){if(!this._disposed)return this.handler.findHover(e,t)},a.prototype.on=function(e,t,r){return this._disposed||this.handler.on(e,t,r),this},a.prototype.off=function(e,t){this._disposed||this.handler.off(e,t)},a.prototype.trigger=function(e,t){this._disposed||this.handler.trigger(e,t)},a.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof Gt&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},a.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,pme(this.id))},a})();function MO(a,e){var t=new mme(IG(),a,e);return lW[t.id]=t,t}function gme(a,e){Fw[a]=e}var U4;function vme(a){if(typeof U4=="function")return U4(a)}function bme(a){U4=a}var EO=1e-4,cW=20;function yme(a){return a.replace(/^\s+|\s+$/g,"")}var jo=Math.min,Pn=Math.max,cc=Math.abs;function ur(a,e,t,r){var n=e[0],i=e[1],o=t[0],l=t[1],c=i-n,d=l-o;if(c===0)return d===0?o:(o+l)/2;if(r)if(c>0){if(a<=n)return o;if(a>=i)return l}else{if(a>=n)return o;if(a<=i)return l}else{if(a===n)return o;if(a===i)return l}return(a-n)/c*d+o}var _t=wme;function wme(a,e,t){switch(a){case"center":case"middle":a="50%";break;case"left":case"top":a="0%";break;case"right":case"bottom":a="100%";break}return P2(a,e,t)}function P2(a,e,t){return jt(a)?yme(a).match(/%$/)?parseFloat(a)/100*e+(t||0):parseFloat(a):a==null?NaN:+a}function Yn(a,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),cW),a=(+a).toFixed(e),t?a:+a}function el(a){return a.sort(function(e,t){return e-t}),a}function dc(a){if(a=+a,isNaN(a))return 0;if(a>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(a*e)/e===a)return t}return _me(a)}function _me(a){var e=a.toString().toLowerCase(),t=e.indexOf("e"),r=t>0?+e.slice(t+1):0,n=t>0?t:e.length,i=e.indexOf("."),o=i<0?0:n-1-i;return Math.max(0,o-r)}function dW(a,e){var t=Math.log,r=Math.LN10,n=Math.floor(t(a[1]-a[0])/r),i=Math.round(t(cc(e[1]-e[0]))/r),o=Math.min(Math.max(-n+i,0),20);return isFinite(o)?o:20}function Nme(a,e){var t=kc(a,function(p,g){return p+(isNaN(g)?0:g)},0);if(t===0)return[];for(var r=Math.pow(10,e),n=it(a,function(p){return(isNaN(p)?0:p)/t*r*100}),i=r*100,o=it(n,function(p){return Math.floor(p)}),l=kc(o,function(p,g){return p+g},0),c=it(n,function(p,g){return p-o[g]});l<i;){for(var d=Number.NEGATIVE_INFINITY,u=null,h=0,f=c.length;h<f;++h)c[h]>d&&(d=c[h],u=h);++o[u],c[u]=0,++l}return it(o,function(p){return p/r})}function jme(a,e){var t=Math.max(dc(a),dc(e)),r=a+e;return t>cW?r:Yn(r,t)}var DO=9007199254740991;function uW(a){var e=Math.PI*2;return(a%e+e)%e}function Hv(a){return a>-EO&&a<EO}var Sme=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function T0(a){if(a instanceof Date)return a;if(jt(a)){var e=Sme.exec(a);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(a==null)return new Date(NaN);return new Date(Math.round(a))}function kme(a){return Math.pow(10,OT(a))}function OT(a){if(a===0)return 0;var e=Math.floor(Math.log(a)/Math.LN10);return a/Math.pow(10,e)>=10&&e++,e}function hW(a,e){var t=OT(a),r=Math.pow(10,t),n=a/r,i;return n<1.5?i=1:n<2.5?i=2:n<4?i=3:n<7?i=5:i=10,a=i*r,t>=-20?+a.toFixed(t<0?-t:0):a}function kk(a,e){var t=(a.length-1)*e+1,r=Math.floor(t),n=+a[r-1],i=t-r;return i?n+i*(a[r]-n):n}function IO(a){a.sort(function(c,d){return l(c,d,0)?-1:1});for(var e=-1/0,t=1,r=0;r<a.length;){for(var n=a[r].interval,i=a[r].close,o=0;o<2;o++)n[o]<=e&&(n[o]=e,i[o]=o?1:1-t),e=n[o],t=i[o];n[0]===n[1]&&i[0]*i[1]!==1?a.splice(r,1):r++}return a;function l(c,d,u){return c.interval[u]<d.interval[u]||c.interval[u]===d.interval[u]&&(c.close[u]-d.close[u]===(u?-1:1)||!u&&l(c,d,1))}}function Ld(a){var e=parseFloat(a);return e==a&&(e!==0||!jt(a)||a.indexOf("x")<=0)?e:NaN}function fW(a){return!isNaN(Ld(a))}function pW(){return Math.round(Math.random()*9)}function xW(a,e){return e===0?a:xW(e,a%e)}function RO(a,e){return a==null?e:e==null?a:a*e/xW(a,e)}var Cme="[ECharts] ",Ame=typeof console<"u"&&console.warn&&console.log;function Tme(a,e,t){Ame&&console[a](Cme+e)}function mW(a,e){Tme("error",a)}function or(a){throw new Error(a)}function LO(a,e,t){return(e-a)*t+a}var gW="series\0",vW="\0_ec_\0";function Rr(a){return a instanceof Array?a:a==null?[]:[a]}function g0(a,e,t){if(a){a[e]=a[e]||{},a.emphasis=a.emphasis||{},a.emphasis[e]=a.emphasis[e]||{};for(var r=0,n=t.length;r<n;r++){var i=t[r];!a.emphasis[e].hasOwnProperty(i)&&a[e].hasOwnProperty(i)&&(a.emphasis[e][i]=a[e][i])}}}var OO=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Gx(a){return Qt(a)&&!rt(a)&&!(a instanceof Date)?a.value:a}function Mme(a){return Qt(a)&&!(a instanceof Array)}function bW(a,e,t){var r=t==="normalMerge",n=t==="replaceMerge",i=t==="replaceAll";a=a||[],e=(e||[]).slice();var o=Rt();oe(e,function(c,d){if(!Qt(c)){e[d]=null;return}});var l=Eme(a,o,t);return(r||n)&&Dme(l,a,o,e),r&&Ime(l,e),r||n?Rme(l,e,n):i&&Lme(l,e),Ome(l),l}function Eme(a,e,t){var r=[];if(t==="replaceAll")return r;for(var n=0;n<a.length;n++){var i=a[n];i&&i.id!=null&&e.set(i.id,n),r.push({existing:t==="replaceMerge"||Uv(i)?null:i,newOption:null,keyInfo:null,brandNew:null})}return r}function Dme(a,e,t,r){oe(r,function(n,i){if(!(!n||n.id==null)){var o=cv(n.id),l=t.get(o);if(l!=null){var c=a[l];cs(!c.newOption,'Duplicated option on id "'+o+'".'),c.newOption=n,c.existing=e[l],r[i]=null}}})}function Ime(a,e){oe(e,function(t,r){if(!(!t||t.name==null))for(var n=0;n<a.length;n++){var i=a[n].existing;if(!a[n].newOption&&i&&(i.id==null||t.id==null)&&!Uv(t)&&!Uv(i)&&yW("name",i,t)){a[n].newOption=t,e[r]=null;return}}})}function Rme(a,e,t){oe(e,function(r){if(r){for(var n,i=0;(n=a[i])&&(n.newOption||Uv(n.existing)||n.existing&&r.id!=null&&!yW("id",r,n.existing));)i++;n?(n.newOption=r,n.brandNew=t):a.push({newOption:r,brandNew:t,existing:null,keyInfo:null}),i++}})}function Lme(a,e){oe(e,function(t){a.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function Ome(a){var e=Rt();oe(a,function(t){var r=t.existing;r&&e.set(r.id,t)}),oe(a,function(t){var r=t.newOption;cs(!r||r.id==null||!e.get(r.id)||e.get(r.id)===t,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,t),!t.keyInfo&&(t.keyInfo={})}),oe(a,function(t,r){var n=t.existing,i=t.newOption,o=t.keyInfo;if(Qt(i)){if(o.name=i.name!=null?cv(i.name):n?n.name:gW+r,n)o.id=cv(n.id);else if(i.id!=null)o.id=cv(i.id);else{var l=0;do o.id="\0"+o.name+"\0"+l++;while(e.get(o.id))}e.set(o.id,t)}})}function yW(a,e,t){var r=ui(e[a],null),n=ui(t[a],null);return r!=null&&n!=null&&r===n}function cv(a){return ui(a,"")}function ui(a,e){return a==null?e:jt(a)?a:Xa(a)||b4(a)?a+"":e}function PT(a){var e=a.name;return!!(e&&e.indexOf(gW))}function Uv(a){return a&&a.id!=null&&cv(a.id).indexOf(vW)===0}function Pme(a){return vW+a}function Bme(a,e,t){oe(a,function(r){var n=r.newOption;Qt(n)&&(r.keyInfo.mainType=e,r.keyInfo.subType=zme(e,n,r.existing,t))})}function zme(a,e,t,r){var n=e.type?e.type:t?t.subType:r.determineSubType(a,e);return n}function Fme(a,e){var t={},r={};return n(a||[],t),n(e||[],r,t),[i(t),i(r)];function n(o,l,c){for(var d=0,u=o.length;d<u;d++){var h=ui(o[d].seriesId,null);if(h==null)return;for(var f=Rr(o[d].dataIndex),p=c&&c[h],g=0,b=f.length;g<b;g++){var w=f[g];p&&p[w]?p[w]=null:(l[h]||(l[h]={}))[w]=1}}}function i(o,l){var c=[];for(var d in o)if(o.hasOwnProperty(d)&&o[d]!=null)if(l)c.push(+d);else{var u=i(o[d],!0);u.length&&c.push({seriesId:d,dataIndex:u})}return c}}function v0(a,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return rt(e.dataIndex)?it(e.dataIndex,function(t){return a.indexOfRawIndex(t)}):a.indexOfRawIndex(e.dataIndex);if(e.name!=null)return rt(e.name)?it(e.name,function(t){return a.indexOfName(t)}):a.indexOfName(e.name)}function Ea(){var a="__ec_inner_"+Vme++;return function(e){return e[a]||(e[a]={})}}var Vme=pW();function lx(a,e,t){var r=BT(e,t),n=r.mainTypeSpecified,i=r.queryOptionMap,o=r.others,l=o,c=t?t.defaultMainType:null;return!n&&c&&i.set(c,{}),i.each(function(d,u){var h=Wx(a,u,d,{useDefault:c===u,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});l[u+"Models"]=h.models,l[u+"Model"]=h.models[0]}),l}function BT(a,e){var t;if(jt(a)){var r={};r[a+"Index"]=0,t=r}else t=a;var n=Rt(),i={},o=!1;return oe(t,function(l,c){if(c==="dataIndex"||c==="dataIndexInside"){i[c]=l;return}var d=c.match(/^(\w+)(Index|Id|Name)$/)||[],u=d[1],h=(d[2]||"").toLowerCase();if(!(!u||!h||e&&e.includeMainTypes&&ya(e.includeMainTypes,u)<0)){o=o||!!u;var f=n.get(u)||n.set(u,{});f[h]=l}}),{mainTypeSpecified:o,queryOptionMap:n,others:i}}var yn={useDefault:!0,enableAll:!1,enableNone:!1},Hme={useDefault:!1,enableAll:!0,enableNone:!0};function Wx(a,e,t,r){r=r||yn;var n=t.index,i=t.id,o=t.name,l={models:null,specified:n!=null||i!=null||o!=null};if(!l.specified){var c=void 0;return l.models=r.useDefault&&(c=a.getComponent(e))?[c]:[],l}if(n==="none"||n===!1){if(r.enableNone)return l.models=[],l;n=-1}return n==="all"&&(r.enableAll?n=i=o=null:n=-1),l.models=a.queryComponents({mainType:e,index:n,id:i,name:o}),l}function wW(a,e,t){a.setAttribute?a.setAttribute(e,t):a[e]=t}function Ume(a,e){return a.getAttribute?a.getAttribute(e):a[e]}function Gme(a){return a==="auto"?Ba.domSupported?"html":"richText":a||"html"}function G4(a,e){var t=Rt(),r=[];return oe(a,function(n){var i=e(n);(t.get(i)||(r.push(i),t.set(i,[]))).push(n)}),{keys:r,buckets:t}}function _W(a,e,t,r,n){var i=e==null||e==="auto";if(r==null)return r;if(Xa(r)){var o=LO(t||0,r,n);return Yn(o,i?Math.max(dc(t||0),dc(r)):e)}else{if(jt(r))return n<1?t:r;for(var l=[],c=t,d=r,u=Math.max(c?c.length:0,d.length),h=0;h<u;++h){var f=a.getDimensionInfo(h);if(f&&f.type==="ordinal")l[h]=(n<1&&c?c:d)[h];else{var p=c&&c[h]?c[h]:0,g=d[h],o=LO(p,g,n);l[h]=Yn(o,i?Math.max(dc(p),dc(g)):e)}}return l}}var lh=(function(){function a(){}return a.prototype.reset=function(e,t,r,n){return this._list=e,this._step=n=n||1,this._idx=t,this._end=r??(n>0?e.length:0),this.item=null,this.key=NaN,this},a.prototype.next=function(){return(this._step>0?this._idx<this._end:this._idx>=this._end)?(this.item=this._list[this._idx],this.key=this._idx=this._idx+this._step,!0):!1},a})();function Ck(a){a.option=a.parentModel=a.ecModel=null}var Wme=".",cf="___EC__COMPONENT__CONTAINER___",NW="___EC__EXTENDED_CLASS___";function uc(a){var e={main:"",sub:""};if(a){var t=a.split(Wme);e.main=t[0]||"",e.sub=t[1]||""}return e}function $me(a){cs(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(a),'componentType "'+a+'" illegal')}function Yme(a){return!!(a&&a[NW])}function zT(a,e){a.$constructor=a,a.extend=function(t){var r=this,n;return qme(r)?n=(function(i){Le(o,i);function o(){return i.apply(this,arguments)||this}return o})(r):(n=function(){(t.$constructor||r).apply(this,arguments)},Xpe(n,this)),Je(n.prototype,t),n[NW]=!0,n.extend=this.extend,n.superCall=Kme,n.superApply=Qme,n.superClass=r,n}}function qme(a){return Ut(a)&&/^class\s/.test(Function.prototype.toString.call(a))}function jW(a,e){a.extend=e.extend}var Xme=Math.round(Math.random()*10);function Zme(a){var e=["__\0is_clz",Xme++].join("_");a.prototype[e]=!0,a.isInstance=function(t){return!!(t&&t[e])}}function Kme(a,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return this.superClass.prototype[e].apply(a,t)}function Qme(a,e,t){return this.superClass.prototype[e].apply(a,t)}function dN(a){var e={};a.registerClass=function(r){var n=r.type||r.prototype.type;if(n){$me(n),r.prototype.type=n;var i=uc(n);if(!i.sub)e[i.main]=r;else if(i.sub!==cf){var o=t(i);o[i.sub]=r}}return r},a.getClass=function(r,n,i){var o=e[r];if(o&&o[cf]&&(o=n?o[n]:null),i&&!o)throw new Error(n?"Component "+r+"."+(n||"")+" is used but not imported.":r+".type should be specified.");return o},a.getClassesByMainType=function(r){var n=uc(r),i=[],o=e[n.main];return o&&o[cf]?oe(o,function(l,c){c!==cf&&i.push(l)}):i.push(o),i},a.hasClass=function(r){var n=uc(r);return!!e[n.main]},a.getAllClassMainTypes=function(){var r=[];return oe(e,function(n,i){r.push(i)}),r},a.hasSubTypes=function(r){var n=uc(r),i=e[n.main];return i&&i[cf]};function t(r){var n=e[r.main];return(!n||!n[cf])&&(n=e[r.main]={},n[cf]=!0),n}}function b0(a,e){for(var t=0;t<a.length;t++)a[t][1]||(a[t][1]=a[t][0]);return e=e||!1,function(r,n,i){for(var o={},l=0;l<a.length;l++){var c=a[l][1];if(!(n&&ya(n,c)>=0||i&&ya(i,c)<0)){var d=r.getShallow(c,e);d!=null&&(o[a[l][0]]=d)}}return o}}var Jme=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],ege=b0(Jme),tge=(function(){function a(){}return a.prototype.getAreaStyle=function(e,t){return ege(this,e,t)},a})(),W4=new jx(50);function age(a){if(typeof a=="string"){var e=W4.get(a);return e&&e.image}else return a}function FT(a,e,t,r,n){if(a)if(typeof a=="string"){if(e&&e.__zrImageSrc===a||!t)return e;var i=W4.get(a),o={hostEl:t,cb:r,cbPayload:n};return i?(e=i.image,!uN(e)&&i.pending.push(o)):(e=kl.loadImage(a,PO,PO),e.__zrImageSrc=a,W4.put(a,e.__cachedImgObj={image:e,pending:[o]})),e}else return a;else return e}function PO(){var a=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<a.pending.length;e++){var t=a.pending[e],r=t.cb;r&&r(this,t.cbPayload),t.hostEl.dirty()}a.pending.length=0}function uN(a){return a&&a.width&&a.height}var Ak=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function rge(a,e,t,r,n,i){if(!t){a.text="",a.isTruncated=!1;return}var o=(e+"").split(`
`);i=SW(t,r,n,i);for(var l=!1,c={},d=0,u=o.length;d<u;d++)kW(c,o[d],i),o[d]=c.textLine,l=l||c.isTruncated;a.text=o.join(`
`),a.isTruncated=l}function SW(a,e,t,r){r=r||{};var n=Je({},r);t=Pt(t,"..."),n.maxIterations=Pt(r.maxIterations,2);var i=n.minChar=Pt(r.minChar,0),o=n.fontMeasureInfo=wc(e),l=o.asciiCharWidth;n.placeholder=Pt(r.placeholder,"");for(var c=a=Math.max(0,a-1),d=0;d<i&&c>=l;d++)c-=l;var u=_c(o,t);return u>c&&(t="",u=0),c=a-u,n.ellipsis=t,n.ellipsisWidth=u,n.contentWidth=c,n.containerWidth=a,n}function kW(a,e,t){var r=t.containerWidth,n=t.contentWidth,i=t.fontMeasureInfo;if(!r){a.textLine="",a.isTruncated=!1;return}var o=_c(i,e);if(o<=r){a.textLine=e,a.isTruncated=!1;return}for(var l=0;;l++){if(o<=n||l>=t.maxIterations){e+=t.ellipsis;break}var c=l===0?nge(e,n,i):o>0?Math.floor(e.length*n/o):0;e=e.substr(0,c),o=_c(i,e)}e===""&&(e=t.placeholder),a.textLine=e,a.isTruncated=!0}function nge(a,e,t){for(var r=0,n=0,i=a.length;n<i&&r<e;n++)r+=sW(t,a.charCodeAt(n));return n}function ige(a,e,t,r){var n=VT(a),i=e.overflow,o=e.padding,l=o?o[1]+o[3]:0,c=o?o[0]+o[2]:0,d=e.font,u=i==="truncate",h=Cb(d),f=Pt(e.lineHeight,h),p=e.lineOverflow==="truncate",g=!1,b=e.width;b==null&&t!=null&&(b=t-l);var w=e.height;w==null&&r!=null&&(w=r-c);var _;b!=null&&(i==="break"||i==="breakAll")?_=n?CW(n,e.font,b,i==="breakAll",0).lines:[]:_=n?n.split(`
`):[];var k=_.length*f;if(w==null&&(w=k),k>w&&p){var T=Math.floor(w/f);g=g||_.length>T,_=_.slice(0,T),k=_.length*f}if(n&&u&&b!=null)for(var D=SW(b,d,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),I={},O=0;O<_.length;O++)kW(I,_[O],D),_[O]=I.textLine,g=g||I.isTruncated;for(var P=w,V=0,G=wc(d),O=0;O<_.length;O++)V=Math.max(_c(G,_[O]),V);b==null&&(b=V);var Q=b;return P+=c,Q+=l,{lines:_,height:w,outerWidth:Q,outerHeight:P,lineHeight:f,calculatedLineHeight:h,contentWidth:V,contentHeight:k,width:b,isTruncated:g}}var sge=(function(){function a(){}return a})(),BO=(function(){function a(e){this.tokens=[],e&&(this.tokens=e)}return a})(),oge=(function(){function a(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return a})();function lge(a,e,t,r,n){var i=new oge,o=VT(a);if(!o)return i;var l=e.padding,c=l?l[1]+l[3]:0,d=l?l[0]+l[2]:0,u=e.width;u==null&&t!=null&&(u=t-c);var h=e.height;h==null&&r!=null&&(h=r-d);for(var f=e.overflow,p=(f==="break"||f==="breakAll")&&u!=null?{width:u,accumWidth:0,breakAll:f==="breakAll"}:null,g=Ak.lastIndex=0,b;(b=Ak.exec(o))!=null;){var w=b.index;w>g&&Tk(i,o.substring(g,w),e,p),Tk(i,b[2],e,p,b[1]),g=Ak.lastIndex}g<o.length&&Tk(i,o.substring(g,o.length),e,p);var _=[],k=0,T=0,D=f==="truncate",I=e.lineOverflow==="truncate",O={};function P(ve,Oe,Se){ve.width=Oe,ve.lineHeight=Se,k+=Se,T=Math.max(T,Oe)}e:for(var V=0;V<i.lines.length;V++){for(var G=i.lines[V],Q=0,$=0,ae=0;ae<G.tokens.length;ae++){var J=G.tokens[ae],U=J.styleName&&e.rich[J.styleName]||{},F=J.textPadding=U.padding,W=F?F[1]+F[3]:0,K=J.font=U.font||e.font;J.contentHeight=Cb(K);var ee=Pt(U.height,J.contentHeight);if(J.innerHeight=ee,F&&(ee+=F[0]+F[2]),J.height=ee,J.lineHeight=No(U.lineHeight,e.lineHeight,ee),J.align=U&&U.align||n,J.verticalAlign=U&&U.verticalAlign||"middle",I&&h!=null&&k+J.lineHeight>h){var ne=i.lines.length;ae>0?(G.tokens=G.tokens.slice(0,ae),P(G,$,Q),i.lines=i.lines.slice(0,V+1)):i.lines=i.lines.slice(0,V),i.isTruncated=i.isTruncated||i.lines.length<ne;break e}var re=U.width,Z=re==null||re==="auto";if(typeof re=="string"&&re.charAt(re.length-1)==="%")J.percentWidth=re,_.push(J),J.contentWidth=_c(wc(K),J.text);else{if(Z){var ie=U.backgroundColor,de=ie&&ie.image;de&&(de=age(de),uN(de)&&(J.width=Math.max(J.width,de.width*ee/de.height)))}var fe=D&&u!=null?u-$:null;fe!=null&&fe<J.width?!Z||fe<W?(J.text="",J.width=J.contentWidth=0):(rge(O,J.text,fe-W,K,e.ellipsis,{minChar:e.truncateMinChar}),J.text=O.text,i.isTruncated=i.isTruncated||O.isTruncated,J.width=J.contentWidth=_c(wc(K),J.text)):J.contentWidth=_c(wc(K),J.text)}J.width+=W,$+=J.width,U&&(Q=Math.max(Q,J.lineHeight))}P(G,$,Q)}i.outerWidth=i.width=Pt(u,T),i.outerHeight=i.height=Pt(h,k),i.contentHeight=k,i.contentWidth=T,i.outerWidth+=c,i.outerHeight+=d;for(var V=0;V<_.length;V++){var J=_[V],he=J.percentWidth;J.width=parseInt(he,10)/100*i.width}return i}function Tk(a,e,t,r,n){var i=e==="",o=n&&t.rich[n]||{},l=a.lines,c=o.font||t.font,d=!1,u,h;if(r){var f=o.padding,p=f?f[1]+f[3]:0;if(o.width!=null&&o.width!=="auto"){var g=Al(o.width,r.width)+p;l.length>0&&g+r.accumWidth>r.width&&(u=e.split(`
`),d=!0),r.accumWidth=g}else{var b=CW(e,c,r.width,r.breakAll,r.accumWidth);r.accumWidth=b.accumWidth+p,h=b.linesWidths,u=b.lines}}u||(u=e.split(`
`));for(var w=wc(c),_=0;_<u.length;_++){var k=u[_],T=new sge;if(T.styleName=n,T.text=k,T.isLineHolder=!k&&!i,typeof o.width=="number"?T.width=o.width:T.width=h?h[_]:_c(w,k),!_&&!d){var D=(l[l.length-1]||(l[0]=new BO)).tokens,I=D.length;I===1&&D[0].isLineHolder?D[0]=T:(k||!I||i)&&D.push(T)}else l.push(new BO([T]))}}function cge(a){var e=a.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var dge=kc(",&?/;] ".split(""),function(a,e){return a[e]=!0,a},{});function uge(a){return cge(a)?!!dge[a]:!0}function CW(a,e,t,r,n){for(var i=[],o=[],l="",c="",d=0,u=0,h=wc(e),f=0;f<a.length;f++){var p=a.charAt(f);if(p===`
`){c&&(l+=c,u+=d),i.push(l),o.push(u),l="",c="",d=0,u=0;continue}var g=sW(h,p.charCodeAt(0)),b=r?!1:!uge(p);if(i.length?u+g>t:n+u+g>t){u?(l||c)&&(b?(l||(l=c,c="",d=0,u=d),i.push(l),o.push(u-d),c+=p,d+=g,l="",u=d):(c&&(l+=c,c="",d=0),i.push(l),o.push(u),l=p,u=g)):b?(i.push(c),o.push(d),c=p,d=g):(i.push(p),o.push(g));continue}u+=g,b?(c+=p,d+=g):(c&&(l+=c,c="",d=0),l+=p)}return c&&(l+=c),l&&(i.push(l),o.push(u)),i.length===1&&(u+=n),{accumWidth:u,lines:i,linesWidths:o}}function zO(a,e,t,r,n,i){if(a.baseX=t,a.baseY=r,a.outerWidth=a.outerHeight=null,!!e){var o=e.width*2,l=e.height*2;Jt.set(FO,Sx(t,o,n),r0(r,l,i),o,l),Jt.intersect(e,FO,null,VO);var c=VO.outIntersectRect;a.outerWidth=c.width,a.outerHeight=c.height,a.baseX=Sx(c.x,c.width,n,!0),a.baseY=r0(c.y,c.height,i,!0)}}var FO=new Jt(0,0,0,0),VO={outIntersectRect:{},clamp:!0};function VT(a){return a!=null?a+="":a=""}function hge(a){var e=VT(a.text),t=a.font,r=_c(wc(t),e),n=Cb(t);return $4(a,r,n,null)}function $4(a,e,t,r){var n=new Jt(Sx(a.x||0,e,a.textAlign),r0(a.y||0,t,a.textBaseline),e,t),i=r??(AW(a)?a.lineWidth:0);return i>0&&(n.x-=i/2,n.y-=i/2,n.width+=i,n.height+=i),n}function AW(a){var e=a.stroke;return e!=null&&e!=="none"&&a.lineWidth>0}var Y4="__zr_style_"+Math.round(Math.random()*10),n0={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},hN={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};n0[Y4]=!0;var HO=["z","z2","invisible"],fge=["invisible"],rl=(function(a){Le(e,a);function e(t){return a.call(this,t)||this}return e.prototype._init=function(t){for(var r=Va(t),n=0;n<r.length;n++){var i=r[n];i==="style"?this.useStyle(t[i]):a.prototype.attrKV.call(this,i,t[i])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,r,n,i){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&pge(this,t,r)||o&&!o[0]&&!o[3])return!1;if(n&&this.__clipPaths&&this.__clipPaths.length){for(var l=0;l<this.__clipPaths.length;++l)if(this.__clipPaths[l].isZeroArea())return!1}if(i&&this.parent)for(var c=this.parent;c;){if(c.ignore)return!1;c=c.parent}return!0},e.prototype.contain=function(t,r){return this.rectContain(t,r)},e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.rectContain=function(t,r){var n=this.transformCoordToLocal(t,r),i=this.getBoundingRect();return i.contain(n[0],n[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,n=this.getBoundingRect(),i=this.style,o=i.shadowBlur||0,l=i.shadowOffsetX||0,c=i.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new Jt(0,0,0,0)),r?Jt.applyTransform(t,n,r):t.copy(n),(o||l||c)&&(t.width+=o*2+Math.abs(l),t.height+=o*2+Math.abs(c),t.x=Math.min(t.x,t.x+l-o),t.y=Math.min(t.y,t.y+c-o));var d=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-d),t.y=Math.floor(t.y-d),t.width=Math.ceil(t.width+1+d*2),t.height=Math.ceil(t.height+1+d*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new Jt(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,r){t!=="style"?a.prototype.attrKV.call(this,t,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(t,r){return typeof t=="string"?this.style[t]=r:Je(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=Vg,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&Vg)},e.prototype.styleUpdated=function(){this.__dirty&=~Vg},e.prototype.createStyle=function(t){return nN(n0,t)},e.prototype.useStyle=function(t){t[Y4]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[Y4]},e.prototype._innerSaveToNormal=function(t){a.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,r,HO)},e.prototype._applyStateObj=function(t,r,n,i,o,l){a.prototype._applyStateObj.call(this,t,r,n,i,o,l);var c=!(r&&i),d;if(r&&r.style?o?i?d=r.style:(d=this._mergeStyle(this.createStyle(),n.style),this._mergeStyle(d,r.style)):(d=this._mergeStyle(this.createStyle(),i?this.style:n.style),this._mergeStyle(d,r.style)):c&&(d=n.style),d)if(o){var u=this.style;if(this.style=this.createStyle(c?{}:u),c)for(var h=Va(u),f=0;f<h.length;f++){var p=h[f];p in d&&(d[p]=d[p],this.style[p]=u[p])}for(var g=Va(d),f=0;f<g.length;f++){var p=g[f];this.style[p]=this.style[p]}this._transitionState(t,{style:d},l,this.getAnimationStyleProps())}else this.useStyle(d);for(var b=this.__inHover?fge:HO,f=0;f<b.length;f++){var p=b[f];r&&r[p]!=null?this[p]=r[p]:c&&n[p]!=null&&(this[p]=n[p])}},e.prototype._mergeStates=function(t){for(var r=a.prototype._mergeStates.call(this,t),n,i=0;i<t.length;i++){var o=t[i];o.style&&(n=n||{},this._mergeStyle(n,o.style))}return n&&(r.style=n),r},e.prototype._mergeStyle=function(t,r){return Je(t,r),t},e.prototype.getAnimationStyleProps=function(){return hN},e.initDefaultProps=(function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=yo|Vg})(),e})(cN),Mk=new Jt(0,0,0,0),Ek=new Jt(0,0,0,0);function pge(a,e,t){return Mk.copy(a.getBoundingRect()),a.transform&&Mk.applyTransform(a.transform),Ek.width=e,Ek.height=t,!Mk.intersect(Ek)}var Us=Math.min,Gs=Math.max,Dk=Math.sin,Ik=Math.cos,df=Math.PI*2,by=A0(),yy=A0(),wy=A0();function fN(a,e,t){if(a.length!==0){for(var r=a[0],n=r[0],i=r[0],o=r[1],l=r[1],c=1;c<a.length;c++)r=a[c],n=Us(n,r[0]),i=Gs(i,r[0]),o=Us(o,r[1]),l=Gs(l,r[1]);e[0]=n,e[1]=o,t[0]=i,t[1]=l}}function UO(a,e,t,r,n,i){n[0]=Us(a,t),n[1]=Us(e,r),i[0]=Gs(a,t),i[1]=Gs(e,r)}var GO=[],WO=[];function xge(a,e,t,r,n,i,o,l,c,d){var u=WG,h=bi,f=u(a,t,n,o,GO);c[0]=1/0,c[1]=1/0,d[0]=-1/0,d[1]=-1/0;for(var p=0;p<f;p++){var g=h(a,t,n,o,GO[p]);c[0]=Us(g,c[0]),d[0]=Gs(g,d[0])}f=u(e,r,i,l,WO);for(var p=0;p<f;p++){var b=h(e,r,i,l,WO[p]);c[1]=Us(b,c[1]),d[1]=Gs(b,d[1])}c[0]=Us(a,c[0]),d[0]=Gs(a,d[0]),c[0]=Us(o,c[0]),d[0]=Gs(o,d[0]),c[1]=Us(e,c[1]),d[1]=Gs(e,d[1]),c[1]=Us(l,c[1]),d[1]=Gs(l,d[1])}function mge(a,e,t,r,n,i,o,l){var c=YG,d=Ei,u=Gs(Us(c(a,t,n),1),0),h=Gs(Us(c(e,r,i),1),0),f=d(a,t,n,u),p=d(e,r,i,h);o[0]=Us(a,n,f),o[1]=Us(e,i,p),l[0]=Gs(a,n,f),l[1]=Gs(e,i,p)}function gge(a,e,t,r,n,i,o,l,c){var d=Zu,u=Ku,h=Math.abs(n-i);if(h%df<1e-4&&h>1e-4){l[0]=a-t,l[1]=e-r,c[0]=a+t,c[1]=e+r;return}if(by[0]=Ik(n)*t+a,by[1]=Dk(n)*r+e,yy[0]=Ik(i)*t+a,yy[1]=Dk(i)*r+e,d(l,by,yy),u(c,by,yy),n=n%df,n<0&&(n=n+df),i=i%df,i<0&&(i=i+df),n>i&&!o?i+=df:n<i&&o&&(n+=df),o){var f=i;i=n,n=f}for(var p=0;p<i;p+=Math.PI/2)p>n&&(wy[0]=Ik(p)*t+a,wy[1]=Dk(p)*r+e,d(l,wy,l),u(c,wy,c))}var Br={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},uf=[],hf=[],ql=[],ku=[],Xl=[],Zl=[],Rk=Math.min,Lk=Math.max,ff=Math.cos,pf=Math.sin,od=Math.abs,q4=Math.PI,Lu=q4*2,Ok=typeof Float32Array<"u",Zm=[];function Pk(a){var e=Math.round(a/q4*1e8)/1e8;return e%2*q4}function pN(a,e){var t=Pk(a[0]);t<0&&(t+=Lu);var r=t-a[0],n=a[1];n+=r,!e&&n-t>=Lu?n=t+Lu:e&&t-n>=Lu?n=t-Lu:!e&&t>n?n=t+(Lu-Pk(t-n)):e&&t<n&&(n=t-(Lu-Pk(n-t))),a[0]=t,a[1]=n}var Tc=(function(){function a(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return a.prototype.increaseVersion=function(){this._version++},a.prototype.getVersion=function(){return this._version},a.prototype.setScale=function(e,t,r){r=r||0,r>0&&(this._ux=od(r/R2/e)||0,this._uy=od(r/R2/t)||0)},a.prototype.setDPR=function(e){this.dpr=e},a.prototype.setContext=function(e){this._ctx=e},a.prototype.getContext=function(){return this._ctx},a.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},a.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},a.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(Br.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},a.prototype.lineTo=function(e,t){var r=od(e-this._xi),n=od(t-this._yi),i=r>this._ux||n>this._uy;if(this.addData(Br.L,e,t),this._ctx&&i&&this._ctx.lineTo(e,t),i)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var o=r*r+n*n;o>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=o)}return this},a.prototype.bezierCurveTo=function(e,t,r,n,i,o){return this._drawPendingPt(),this.addData(Br.C,e,t,r,n,i,o),this._ctx&&this._ctx.bezierCurveTo(e,t,r,n,i,o),this._xi=i,this._yi=o,this},a.prototype.quadraticCurveTo=function(e,t,r,n){return this._drawPendingPt(),this.addData(Br.Q,e,t,r,n),this._ctx&&this._ctx.quadraticCurveTo(e,t,r,n),this._xi=r,this._yi=n,this},a.prototype.arc=function(e,t,r,n,i,o){this._drawPendingPt(),Zm[0]=n,Zm[1]=i,pN(Zm,o),n=Zm[0],i=Zm[1];var l=i-n;return this.addData(Br.A,e,t,r,r,n,l,0,o?0:1),this._ctx&&this._ctx.arc(e,t,r,n,i,o),this._xi=ff(i)*r+e,this._yi=pf(i)*r+t,this},a.prototype.arcTo=function(e,t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,r,n,i),this},a.prototype.rect=function(e,t,r,n){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,r,n),this.addData(Br.R,e,t,r,n),this},a.prototype.closePath=function(){this._drawPendingPt(),this.addData(Br.Z);var e=this._ctx,t=this._x0,r=this._y0;return e&&e.closePath(),this._xi=t,this._yi=r,this},a.prototype.fill=function(e){e&&e.fill(),this.toStatic()},a.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},a.prototype.len=function(){return this._len},a.prototype.setData=function(e){if(this._saveData){var t=e.length;!(this.data&&this.data.length===t)&&Ok&&(this.data=new Float32Array(t));for(var r=0;r<t;r++)this.data[r]=e[r];this._len=t}},a.prototype.appendPath=function(e){if(this._saveData){e instanceof Array||(e=[e]);for(var t=e.length,r=0,n=this._len,i=0;i<t;i++)r+=e[i].len();var o=this.data;if(Ok&&(o instanceof Float32Array||!o)&&(this.data=new Float32Array(n+r),n>0&&o))for(var l=0;l<n;l++)this.data[l]=o[l];for(var i=0;i<t;i++)for(var c=e[i].data,l=0;l<c.length;l++)this.data[n++]=c[l];this._len=n}},a.prototype.addData=function(e,t,r,n,i,o,l,c,d){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var h=0;h<arguments.length;h++)u[this._len++]=arguments[h]}},a.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},a.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},a.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,Ok&&this._len>11&&(this.data=new Float32Array(e)))}},a.prototype.getBoundingRect=function(){ql[0]=ql[1]=Xl[0]=Xl[1]=Number.MAX_VALUE,ku[0]=ku[1]=Zl[0]=Zl[1]=-Number.MAX_VALUE;var e=this.data,t=0,r=0,n=0,i=0,o;for(o=0;o<this._len;){var l=e[o++],c=o===1;switch(c&&(t=e[o],r=e[o+1],n=t,i=r),l){case Br.M:t=n=e[o++],r=i=e[o++],Xl[0]=n,Xl[1]=i,Zl[0]=n,Zl[1]=i;break;case Br.L:UO(t,r,e[o],e[o+1],Xl,Zl),t=e[o++],r=e[o++];break;case Br.C:xge(t,r,e[o++],e[o++],e[o++],e[o++],e[o],e[o+1],Xl,Zl),t=e[o++],r=e[o++];break;case Br.Q:mge(t,r,e[o++],e[o++],e[o],e[o+1],Xl,Zl),t=e[o++],r=e[o++];break;case Br.A:var d=e[o++],u=e[o++],h=e[o++],f=e[o++],p=e[o++],g=e[o++]+p;o+=1;var b=!e[o++];c&&(n=ff(p)*h+d,i=pf(p)*f+u),gge(d,u,h,f,p,g,b,Xl,Zl),t=ff(g)*h+d,r=pf(g)*f+u;break;case Br.R:n=t=e[o++],i=r=e[o++];var w=e[o++],_=e[o++];UO(n,i,n+w,i+_,Xl,Zl);break;case Br.Z:t=n,r=i;break}Zu(ql,ql,Xl),Ku(ku,ku,Zl)}return o===0&&(ql[0]=ql[1]=ku[0]=ku[1]=0),new Jt(ql[0],ql[1],ku[0]-ql[0],ku[1]-ql[1])},a.prototype._calculateLength=function(){var e=this.data,t=this._len,r=this._ux,n=this._uy,i=0,o=0,l=0,c=0;this._pathSegLen||(this._pathSegLen=[]);for(var d=this._pathSegLen,u=0,h=0,f=0;f<t;){var p=e[f++],g=f===1;g&&(i=e[f],o=e[f+1],l=i,c=o);var b=-1;switch(p){case Br.M:i=l=e[f++],o=c=e[f++];break;case Br.L:{var w=e[f++],_=e[f++],k=w-i,T=_-o;(od(k)>r||od(T)>n||f===t-1)&&(b=Math.sqrt(k*k+T*T),i=w,o=_);break}case Br.C:{var D=e[f++],I=e[f++],w=e[f++],_=e[f++],O=e[f++],P=e[f++];b=Exe(i,o,D,I,w,_,O,P,10),i=O,o=P;break}case Br.Q:{var D=e[f++],I=e[f++],w=e[f++],_=e[f++];b=Ixe(i,o,D,I,w,_,10),i=w,o=_;break}case Br.A:var V=e[f++],G=e[f++],Q=e[f++],$=e[f++],ae=e[f++],J=e[f++],U=J+ae;f+=1,g&&(l=ff(ae)*Q+V,c=pf(ae)*$+G),b=Lk(Q,$)*Rk(Lu,Math.abs(J)),i=ff(U)*Q+V,o=pf(U)*$+G;break;case Br.R:{l=i=e[f++],c=o=e[f++];var F=e[f++],W=e[f++];b=F*2+W*2;break}case Br.Z:{var k=l-i,T=c-o;b=Math.sqrt(k*k+T*T),i=l,o=c;break}}b>=0&&(d[h++]=b,u+=b)}return this._pathLen=u,u},a.prototype.rebuildPath=function(e,t){var r=this.data,n=this._ux,i=this._uy,o=this._len,l,c,d,u,h,f,p=t<1,g,b,w=0,_=0,k,T=0,D,I;if(!(p&&(this._pathSegLen||this._calculateLength(),g=this._pathSegLen,b=this._pathLen,k=t*b,!k)))e:for(var O=0;O<o;){var P=r[O++],V=O===1;switch(V&&(d=r[O],u=r[O+1],l=d,c=u),P!==Br.L&&T>0&&(e.lineTo(D,I),T=0),P){case Br.M:l=d=r[O++],c=u=r[O++],e.moveTo(d,u);break;case Br.L:{h=r[O++],f=r[O++];var G=od(h-d),Q=od(f-u);if(G>n||Q>i){if(p){var $=g[_++];if(w+$>k){var ae=(k-w)/$;e.lineTo(d*(1-ae)+h*ae,u*(1-ae)+f*ae);break e}w+=$}e.lineTo(h,f),d=h,u=f,T=0}else{var J=G*G+Q*Q;J>T&&(D=h,I=f,T=J)}break}case Br.C:{var U=r[O++],F=r[O++],W=r[O++],K=r[O++],ee=r[O++],ne=r[O++];if(p){var $=g[_++];if(w+$>k){var ae=(k-w)/$;gh(d,U,W,ee,ae,uf),gh(u,F,K,ne,ae,hf),e.bezierCurveTo(uf[1],hf[1],uf[2],hf[2],uf[3],hf[3]);break e}w+=$}e.bezierCurveTo(U,F,W,K,ee,ne),d=ee,u=ne;break}case Br.Q:{var U=r[O++],F=r[O++],W=r[O++],K=r[O++];if(p){var $=g[_++];if(w+$>k){var ae=(k-w)/$;zv(d,U,W,ae,uf),zv(u,F,K,ae,hf),e.quadraticCurveTo(uf[1],hf[1],uf[2],hf[2]);break e}w+=$}e.quadraticCurveTo(U,F,W,K),d=W,u=K;break}case Br.A:var re=r[O++],Z=r[O++],ie=r[O++],de=r[O++],fe=r[O++],he=r[O++],ve=r[O++],Oe=!r[O++],Se=ie>de?ie:de,Ce=od(ie-de)>.001,we=fe+he,xe=!1;if(p){var $=g[_++];w+$>k&&(we=fe+he*(k-w)/$,xe=!0),w+=$}if(Ce&&e.ellipse?e.ellipse(re,Z,ie,de,ve,fe,we,Oe):e.arc(re,Z,Se,fe,we,Oe),xe)break e;V&&(l=ff(fe)*ie+re,c=pf(fe)*de+Z),d=ff(we)*ie+re,u=pf(we)*de+Z;break;case Br.R:l=d=r[O],c=u=r[O+1],h=r[O++],f=r[O++];var be=r[O++],Ee=r[O++];if(p){var $=g[_++];if(w+$>k){var ze=k-w;e.moveTo(h,f),e.lineTo(h+Rk(ze,be),f),ze-=be,ze>0&&e.lineTo(h+be,f+Rk(ze,Ee)),ze-=Ee,ze>0&&e.lineTo(h+Lk(be-ze,0),f+Ee),ze-=be,ze>0&&e.lineTo(h,f+Lk(Ee-ze,0));break e}w+=$}e.rect(h,f,be,Ee);break;case Br.Z:if(p){var $=g[_++];if(w+$>k){var ae=(k-w)/$;e.lineTo(d*(1-ae)+l*ae,u*(1-ae)+c*ae);break e}w+=$}e.closePath(),d=l,u=c}}},a.prototype.clone=function(){var e=new a,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},a.prototype.canSave=function(){return!!this._saveData},a.CMD=Br,a.initDefaultProps=(function(){var e=a.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0})(),a})();function Bu(a,e,t,r,n,i,o){if(n===0)return!1;var l=n,c=0,d=a;if(o>e+l&&o>r+l||o<e-l&&o<r-l||i>a+l&&i>t+l||i<a-l&&i<t-l)return!1;if(a!==t)c=(e-r)/(a-t),d=(a*r-t*e)/(a-t);else return Math.abs(i-a)<=l/2;var u=c*i-o+d,h=u*u/(c*c+1);return h<=l/2*l/2}function vge(a,e,t,r,n,i,o,l,c,d,u){if(c===0)return!1;var h=c;if(u>e+h&&u>r+h&&u>i+h&&u>l+h||u<e-h&&u<r-h&&u<i-h&&u<l-h||d>a+h&&d>t+h&&d>n+h&&d>o+h||d<a-h&&d<t-h&&d<n-h&&d<o-h)return!1;var f=$G(a,e,t,r,n,i,o,l,d,u,null);return f<=h/2}function TW(a,e,t,r,n,i,o,l,c){if(o===0)return!1;var d=o;if(c>e+d&&c>r+d&&c>i+d||c<e-d&&c<r-d&&c<i-d||l>a+d&&l>t+d&&l>n+d||l<a-d&&l<t-d&&l<n-d)return!1;var u=qG(a,e,t,r,n,i,l,c,null);return u<=d/2}var $O=Math.PI*2;function wo(a){return a%=$O,a<0&&(a+=$O),a}var Km=Math.PI*2;function bge(a,e,t,r,n,i,o,l,c){if(o===0)return!1;var d=o;l-=a,c-=e;var u=Math.sqrt(l*l+c*c);if(u-d>t||u+d<t)return!1;if(Math.abs(r-n)%Km<1e-4)return!0;if(i){var h=r;r=wo(n),n=wo(h)}else r=wo(r),n=wo(n);r>n&&(n+=Km);var f=Math.atan2(c,l);return f<0&&(f+=Km),f>=r&&f<=n||f+Km>=r&&f+Km<=n}function vd(a,e,t,r,n,i){if(i>e&&i>r||i<e&&i<r||r===e)return 0;var o=(i-e)/(r-e),l=r<e?1:-1;(o===1||o===0)&&(l=r<e?.5:-.5);var c=o*(t-a)+a;return c===n?1/0:c>n?l:0}var Cu=Tc.CMD,xf=Math.PI*2,yge=1e-4;function wge(a,e){return Math.abs(a-e)<yge}var ys=[-1,-1,-1],Yo=[-1,-1];function _ge(){var a=Yo[0];Yo[0]=Yo[1],Yo[1]=a}function Nge(a,e,t,r,n,i,o,l,c,d){if(d>e&&d>r&&d>i&&d>l||d<e&&d<r&&d<i&&d<l)return 0;var u=M2(e,r,i,l,d,ys);if(u===0)return 0;for(var h=0,f=-1,p=void 0,g=void 0,b=0;b<u;b++){var w=ys[b],_=w===0||w===1?.5:1,k=bi(a,t,n,o,w);k<c||(f<0&&(f=WG(e,r,i,l,Yo),Yo[1]<Yo[0]&&f>1&&_ge(),p=bi(e,r,i,l,Yo[0]),f>1&&(g=bi(e,r,i,l,Yo[1]))),f===2?w<Yo[0]?h+=p<e?_:-_:w<Yo[1]?h+=g<p?_:-_:h+=l<g?_:-_:w<Yo[0]?h+=p<e?_:-_:h+=l<p?_:-_)}return h}function jge(a,e,t,r,n,i,o,l){if(l>e&&l>r&&l>i||l<e&&l<r&&l<i)return 0;var c=Dxe(e,r,i,l,ys);if(c===0)return 0;var d=YG(e,r,i);if(d>=0&&d<=1){for(var u=0,h=Ei(e,r,i,d),f=0;f<c;f++){var p=ys[f]===0||ys[f]===1?.5:1,g=Ei(a,t,n,ys[f]);g<o||(ys[f]<d?u+=h<e?p:-p:u+=i<h?p:-p)}return u}else{var p=ys[0]===0||ys[0]===1?.5:1,g=Ei(a,t,n,ys[0]);return g<o?0:i<e?p:-p}}function Sge(a,e,t,r,n,i,o,l){if(l-=e,l>t||l<-t)return 0;var c=Math.sqrt(t*t-l*l);ys[0]=-c,ys[1]=c;var d=Math.abs(r-n);if(d<1e-4)return 0;if(d>=xf-1e-4){r=0,n=xf;var u=i?1:-1;return o>=ys[0]+a&&o<=ys[1]+a?u:0}if(r>n){var h=r;r=n,n=h}r<0&&(r+=xf,n+=xf);for(var f=0,p=0;p<2;p++){var g=ys[p];if(g+a>o){var b=Math.atan2(l,g),u=i?1:-1;b<0&&(b=xf+b),(b>=r&&b<=n||b+xf>=r&&b+xf<=n)&&(b>Math.PI/2&&b<Math.PI*1.5&&(u=-u),f+=u)}}return f}function MW(a,e,t,r,n){for(var i=a.data,o=a.len(),l=0,c=0,d=0,u=0,h=0,f,p,g=0;g<o;){var b=i[g++],w=g===1;switch(b===Cu.M&&g>1&&(t||(l+=vd(c,d,u,h,r,n))),w&&(c=i[g],d=i[g+1],u=c,h=d),b){case Cu.M:u=i[g++],h=i[g++],c=u,d=h;break;case Cu.L:if(t){if(Bu(c,d,i[g],i[g+1],e,r,n))return!0}else l+=vd(c,d,i[g],i[g+1],r,n)||0;c=i[g++],d=i[g++];break;case Cu.C:if(t){if(vge(c,d,i[g++],i[g++],i[g++],i[g++],i[g],i[g+1],e,r,n))return!0}else l+=Nge(c,d,i[g++],i[g++],i[g++],i[g++],i[g],i[g+1],r,n)||0;c=i[g++],d=i[g++];break;case Cu.Q:if(t){if(TW(c,d,i[g++],i[g++],i[g],i[g+1],e,r,n))return!0}else l+=jge(c,d,i[g++],i[g++],i[g],i[g+1],r,n)||0;c=i[g++],d=i[g++];break;case Cu.A:var _=i[g++],k=i[g++],T=i[g++],D=i[g++],I=i[g++],O=i[g++];g+=1;var P=!!(1-i[g++]);f=Math.cos(I)*T+_,p=Math.sin(I)*D+k,w?(u=f,h=p):l+=vd(c,d,f,p,r,n);var V=(r-_)*D/T+_;if(t){if(bge(_,k,D,I,I+O,P,e,V,n))return!0}else l+=Sge(_,k,D,I,I+O,P,V,n);c=Math.cos(I+O)*T+_,d=Math.sin(I+O)*D+k;break;case Cu.R:u=c=i[g++],h=d=i[g++];var G=i[g++],Q=i[g++];if(f=u+G,p=h+Q,t){if(Bu(u,h,f,h,e,r,n)||Bu(f,h,f,p,e,r,n)||Bu(f,p,u,p,e,r,n)||Bu(u,p,u,h,e,r,n))return!0}else l+=vd(f,h,f,p,r,n),l+=vd(u,p,u,h,r,n);break;case Cu.Z:if(t){if(Bu(c,d,u,h,e,r,n))return!0}else l+=vd(c,d,u,h,r,n);c=u,d=h;break}}return!t&&!wge(d,h)&&(l+=vd(c,d,u,h,r,n)||0),l!==0}function kge(a,e,t){return MW(a,0,!1,e,t)}function Cge(a,e,t,r){return MW(a,e,!0,t,r)}var B2=Kt({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},n0),Age={style:Kt({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},hN.style)},Bk=Ac.concat(["invisible","culling","z","z2","zlevel","parent"]),Ia=(function(a){Le(e,a);function e(t){return a.call(this,t)||this}return e.prototype.update=function(){var t=this;a.prototype.update.call(this);var r=this.style;if(r.decal){var n=this._decalEl=this._decalEl||new e;n.buildPath===e.prototype.buildPath&&(n.buildPath=function(c){t.buildPath(c,t.shape)}),n.silent=!0;var i=n.style;for(var o in r)i[o]!==r[o]&&(i[o]=r[o]);i.fill=r.fill?r.decal:null,i.decal=null,i.shadowColor=null,r.strokeFirst&&(i.stroke=null);for(var l=0;l<Bk.length;++l)n[Bk[l]]=this[Bk[l]];n.__dirty|=yo}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var r=Va(t);this.shape=this.getDefaultShape();var n=this.getDefaultStyle();n&&this.useStyle(n);for(var i=0;i<r.length;i++){var o=r[i],l=t[o];o==="style"?this.style?Je(this.style,l):this.useStyle(l):o==="shape"?Je(this.shape,l):a.prototype.attrKV.call(this,o,l)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(jt(t)){var r=D2(t,0);return r>.5?V4:r>.2?sme:H4}else if(t)return H4}return V4},e.prototype.getInsideTextStroke=function(t){var r=this.style.fill;if(jt(r)){var n=this.__zr,i=!!(n&&n.isDarkMode()),o=D2(t,0)<F4;if(i===o)return r}},e.prototype.buildPath=function(t,r,n){},e.prototype.pathUpdated=function(){this.__dirty&=~Hp},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new Tc(!1)},e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return!(r==null||r==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,r=this.style,n=!t;if(n){var i=!1;this.path||(i=!0,this.createPathProxy());var o=this.path;(i||this.__dirty&Hp)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),t=o.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var l=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||n){l.copy(t);var c=r.strokeNoScale?this.getLineScale():1,d=r.lineWidth;if(!this.hasFill()){var u=this.strokeContainThreshold;d=Math.max(d,u??4)}c>1e-10&&(l.width+=d/c,l.height+=d/c,l.x-=d/c/2,l.y-=d/c/2)}return l}return t},e.prototype.contain=function(t,r){var n=this.transformCoordToLocal(t,r),i=this.getBoundingRect(),o=this.style;if(t=n[0],r=n[1],i.contain(t,r)){var l=this.path;if(this.hasStroke()){var c=o.lineWidth,d=o.strokeNoScale?this.getLineScale():1;if(d>1e-10&&(this.hasFill()||(c=Math.max(c,this.strokeContainThreshold)),Cge(l,c/d,t,r)))return!0}if(this.hasFill())return kge(l,t,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=Hp,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,r){t==="shape"?this.setShape(r):a.prototype.attrKV.call(this,t,r)},e.prototype.setShape=function(t,r){var n=this.shape;return n||(n=this.shape={}),typeof t=="string"?n[t]=r:Je(n,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&Hp)},e.prototype.createStyle=function(t){return nN(B2,t)},e.prototype._innerSaveToNormal=function(t){a.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.shape&&!r.shape&&(r.shape=Je({},this.shape))},e.prototype._applyStateObj=function(t,r,n,i,o,l){a.prototype._applyStateObj.call(this,t,r,n,i,o,l);var c=!(r&&i),d;if(r&&r.shape?o?i?d=r.shape:(d=Je({},n.shape),Je(d,r.shape)):(d=Je({},i?this.shape:n.shape),Je(d,r.shape)):c&&(d=n.shape),d)if(o){this.shape=Je({},this.shape);for(var u={},h=Va(d),f=0;f<h.length;f++){var p=h[f];typeof d[p]=="object"?this.shape[p]=d[p]:u[p]=d[p]}this._transitionState(t,{shape:u},l)}else this.shape=d,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var r=a.prototype._mergeStates.call(this,t),n,i=0;i<t.length;i++){var o=t[i];o.shape&&(n=n||{},this._mergeStyle(n,o.shape))}return n&&(r.shape=n),r},e.prototype.getAnimationStyleProps=function(){return Age},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var r=(function(i){Le(o,i);function o(l){var c=i.call(this,l)||this;return t.init&&t.init.call(c,l),c}return o.prototype.getDefaultStyle=function(){return $t(t.style)},o.prototype.getDefaultShape=function(){return $t(t.shape)},o})(e);for(var n in t)typeof t[n]=="function"&&(r.prototype[n]=t[n]);return r},e.initDefaultProps=(function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=yo|Vg|Hp})(),e})(rl),Tge=Kt({strokeFirst:!0,font:Id,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},B2),kx=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.hasStroke=function(){return AW(this.style)},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(t){return nN(Tge,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){return this._rect||(this._rect=hge(this.style)),this._rect},e.initDefaultProps=(function(){var t=e.prototype;t.dirtyRectTolerance=10})(),e})(rl);kx.prototype.type="tspan";var Mge=Kt({x:0,y:0},n0),Ege={style:Kt({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},hN.style)};function Dge(a){return!!(a&&typeof a!="string"&&a.width&&a.height)}var Li=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return nN(Mge,t)},e.prototype._getSize=function(t){var r=this.style,n=r[t];if(n!=null)return n;var i=Dge(r.image)?r.image:this.__image;if(!i)return 0;var o=t==="width"?"height":"width",l=r[o];return l==null?i[t]:i[t]/i[o]*l},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return Ege},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new Jt(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e})(rl);Li.prototype.type="image";function Ige(a,e){var t=e.x,r=e.y,n=e.width,i=e.height,o=e.r,l,c,d,u;n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),typeof o=="number"?l=c=d=u=o:o instanceof Array?o.length===1?l=c=d=u=o[0]:o.length===2?(l=d=o[0],c=u=o[1]):o.length===3?(l=o[0],c=u=o[1],d=o[2]):(l=o[0],c=o[1],d=o[2],u=o[3]):l=c=d=u=0;var h;l+c>n&&(h=l+c,l*=n/h,c*=n/h),d+u>n&&(h=d+u,d*=n/h,u*=n/h),c+d>i&&(h=c+d,c*=i/h,d*=i/h),l+u>i&&(h=l+u,l*=i/h,u*=i/h),a.moveTo(t+l,r),a.lineTo(t+n-c,r),c!==0&&a.arc(t+n-c,r+c,c,-Math.PI/2,0),a.lineTo(t+n,r+i-d),d!==0&&a.arc(t+n-d,r+i-d,d,0,Math.PI/2),a.lineTo(t+u,r+i),u!==0&&a.arc(t+u,r+i-u,u,Math.PI/2,Math.PI),a.lineTo(t,r+l),l!==0&&a.arc(t+l,r+l,l,Math.PI,Math.PI*1.5)}var Kp=Math.round;function xN(a,e,t){if(e){var r=e.x1,n=e.x2,i=e.y1,o=e.y2;a.x1=r,a.x2=n,a.y1=i,a.y2=o;var l=t&&t.lineWidth;return l&&(Kp(r*2)===Kp(n*2)&&(a.x1=a.x2=_o(r,l,!0)),Kp(i*2)===Kp(o*2)&&(a.y1=a.y2=_o(i,l,!0))),a}}function EW(a,e,t){if(e){var r=e.x,n=e.y,i=e.width,o=e.height;a.x=r,a.y=n,a.width=i,a.height=o;var l=t&&t.lineWidth;return l&&(a.x=_o(r,l,!0),a.y=_o(n,l,!0),a.width=Math.max(_o(r+i,l,!1)-a.x,i===0?0:1),a.height=Math.max(_o(n+o,l,!1)-a.y,o===0?0:1)),a}}function _o(a,e,t){if(!e)return a;var r=Kp(a*2);return(r+Kp(e))%2===0?r/2:(r+(t?1:-1))/2}var Rge=(function(){function a(){this.x=0,this.y=0,this.width=0,this.height=0}return a})(),Lge={},Ta=(function(a){Le(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Rge},e.prototype.buildPath=function(t,r){var n,i,o,l;if(this.subPixelOptimize){var c=EW(Lge,r,this.style);n=c.x,i=c.y,o=c.width,l=c.height,c.r=r.r,r=c}else n=r.x,i=r.y,o=r.width,l=r.height;r.r?Ige(t,r):t.rect(n,i,o,l)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e})(Ia);Ta.prototype.type="rect";var YO={fill:"#000"},qO=2,Kl={},Oge={style:Kt({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},hN.style)},Ja=(function(a){Le(e,a);function e(t){var r=a.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=YO,r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){a.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var r=this._children[t];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):a.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var r=this.innerTransformable;return r?r.getLocalTransform(t):a.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),a.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,zge(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){a.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=t},e.prototype.removeSelfFromZr=function(t){a.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new Jt(0,0,0,0),r=this._children,n=[],i=null,o=0;o<r.length;o++){var l=r[o],c=l.getBoundingRect(),d=l.getLocalTransform(n);d?(t.copy(c),t.applyTransform(d),i=i||t.clone(),i.union(t)):(i=i||c.clone(),i.union(c))}this._rect=i||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||YO},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,r){if(!r)return t;var n=r.rich,i=t.rich||n&&{};return Je(t,r),n&&i?(this._mergeRich(i,n),t.rich=i):i&&(t.rich=i),t},e.prototype._mergeRich=function(t,r){for(var n=Va(r),i=0;i<n.length;i++){var o=n[i];t[o]=t[o]||{},Je(t[o],r[o])}},e.prototype.getAnimationStyleProps=function(){return Oge},e.prototype._getOrCreateChild=function(t){var r=this._children[this._childCursor];return(!r||!(r instanceof t))&&(r=new t),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var t=this.style,r=t.font||Id,n=t.padding,i=this._defaultStyle,o=t.x||0,l=t.y||0,c=t.align||i.align||"left",d=t.verticalAlign||i.verticalAlign||"top";zO(Kl,i.overflowRect,o,l,c,d),o=Kl.baseX,l=Kl.baseY;var u=tP(t),h=ige(u,t,Kl.outerWidth,Kl.outerHeight),f=zk(t),p=!!t.backgroundColor,g=h.outerHeight,b=h.outerWidth,w=h.lines,_=h.lineHeight;this.isTruncated=!!h.isTruncated;var k=o,T=r0(l,h.contentHeight,d);if(f||n){var D=Sx(o,b,c),I=r0(l,g,d);f&&this._renderBackground(t,t,D,I,b,g)}T+=_/2,n&&(k=eP(o,c,n),d==="top"?T+=n[0]:d==="bottom"&&(T-=n[2]));for(var O=0,P=!1,V=!1,G=JO("fill"in t?t.fill:(V=!0,i.fill)),Q=QO("stroke"in t?t.stroke:!p&&(!i.autoStroke||V)?(O=qO,P=!0,i.stroke):null),$=t.textShadowBlur>0,ae=0;ae<w.length;ae++){var J=this._getOrCreateChild(kx),U=J.createStyle();J.useStyle(U),U.text=w[ae],U.x=k,U.y=T,U.textAlign=c,U.textBaseline="middle",U.opacity=t.opacity,U.strokeFirst=!0,$&&(U.shadowBlur=t.textShadowBlur||0,U.shadowColor=t.textShadowColor||"transparent",U.shadowOffsetX=t.textShadowOffsetX||0,U.shadowOffsetY=t.textShadowOffsetY||0),U.stroke=Q,U.fill=G,Q&&(U.lineWidth=t.lineWidth||O,U.lineDash=t.lineDash,U.lineDashOffset=t.lineDashOffset||0),U.font=r,ZO(U,t),T+=_,J.setBoundingRect($4(U,h.contentWidth,h.calculatedLineHeight,P?0:null))}},e.prototype._updateRichTexts=function(){var t=this.style,r=this._defaultStyle,n=t.align||r.align,i=t.verticalAlign||r.verticalAlign,o=t.x||0,l=t.y||0;zO(Kl,r.overflowRect,o,l,n,i),o=Kl.baseX,l=Kl.baseY;var c=tP(t),d=lge(c,t,Kl.outerWidth,Kl.outerHeight,n),u=d.width,h=d.outerWidth,f=d.outerHeight,p=t.padding;this.isTruncated=!!d.isTruncated;var g=Sx(o,h,n),b=r0(l,f,i),w=g,_=b;p&&(w+=p[3],_+=p[0]);var k=w+u;zk(t)&&this._renderBackground(t,t,g,b,h,f);for(var T=!!t.backgroundColor,D=0;D<d.lines.length;D++){for(var I=d.lines[D],O=I.tokens,P=O.length,V=I.lineHeight,G=I.width,Q=0,$=w,ae=k,J=P-1,U=void 0;Q<P&&(U=O[Q],!U.align||U.align==="left");)this._placeToken(U,t,V,_,$,"left",T),G-=U.width,$+=U.width,Q++;for(;J>=0&&(U=O[J],U.align==="right");)this._placeToken(U,t,V,_,ae,"right",T),G-=U.width,ae-=U.width,J--;for($+=(u-($-w)-(k-ae)-G)/2;Q<=J;)U=O[Q],this._placeToken(U,t,V,_,$+U.width/2,"center",T),$+=U.width,Q++;_+=V}},e.prototype._placeToken=function(t,r,n,i,o,l,c){var d=r.rich[t.styleName]||{};d.text=t.text;var u=t.verticalAlign,h=i+n/2;u==="top"?h=i+t.height/2:u==="bottom"&&(h=i+n-t.height/2);var f=!t.isLineHolder&&zk(d);f&&this._renderBackground(d,r,l==="right"?o-t.width:l==="center"?o-t.width/2:o,h-t.height/2,t.width,t.height);var p=!!d.backgroundColor,g=t.textPadding;g&&(o=eP(o,l,g),h-=t.height/2-g[0]-t.innerHeight/2);var b=this._getOrCreateChild(kx),w=b.createStyle();b.useStyle(w);var _=this._defaultStyle,k=!1,T=0,D=!1,I=JO("fill"in d?d.fill:"fill"in r?r.fill:(k=!0,_.fill)),O=QO("stroke"in d?d.stroke:"stroke"in r?r.stroke:!p&&!c&&(!_.autoStroke||k)?(T=qO,D=!0,_.stroke):null),P=d.textShadowBlur>0||r.textShadowBlur>0;w.text=t.text,w.x=o,w.y=h,P&&(w.shadowBlur=d.textShadowBlur||r.textShadowBlur||0,w.shadowColor=d.textShadowColor||r.textShadowColor||"transparent",w.shadowOffsetX=d.textShadowOffsetX||r.textShadowOffsetX||0,w.shadowOffsetY=d.textShadowOffsetY||r.textShadowOffsetY||0),w.textAlign=l,w.textBaseline="middle",w.font=t.font||Id,w.opacity=No(d.opacity,r.opacity,1),ZO(w,d),O&&(w.lineWidth=No(d.lineWidth,r.lineWidth,T),w.lineDash=Pt(d.lineDash,r.lineDash),w.lineDashOffset=r.lineDashOffset||0,w.stroke=O),I&&(w.fill=I),b.setBoundingRect($4(w,t.contentWidth,t.contentHeight,D?0:null))},e.prototype._renderBackground=function(t,r,n,i,o,l){var c=t.backgroundColor,d=t.borderWidth,u=t.borderColor,h=c&&c.image,f=c&&!h,p=t.borderRadius,g=this,b,w;if(f||t.lineHeight||d&&u){b=this._getOrCreateChild(Ta),b.useStyle(b.createStyle()),b.style.fill=null;var _=b.shape;_.x=n,_.y=i,_.width=o,_.height=l,_.r=p,b.dirtyShape()}if(f){var k=b.style;k.fill=c||null,k.fillOpacity=Pt(t.fillOpacity,1)}else if(h){w=this._getOrCreateChild(Li),w.onload=function(){g.dirtyStyle()};var T=w.style;T.image=c.image,T.x=n,T.y=i,T.width=o,T.height=l}if(d&&u){var k=b.style;k.lineWidth=d,k.stroke=u,k.strokeOpacity=Pt(t.strokeOpacity,1),k.lineDash=t.borderDash,k.lineDashOffset=t.borderDashOffset||0,b.strokeContainThreshold=0,b.hasFill()&&b.hasStroke()&&(k.strokeFirst=!0,k.lineWidth*=2)}var D=(b||w).style;D.shadowBlur=t.shadowBlur||0,D.shadowColor=t.shadowColor||"transparent",D.shadowOffsetX=t.shadowOffsetX||0,D.shadowOffsetY=t.shadowOffsetY||0,D.opacity=No(t.opacity,r.opacity,1)},e.makeFont=function(t){var r="";return IW(t)&&(r=[t.fontStyle,t.fontWeight,DW(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),r&&Jo(r)||t.textFont||t.font},e})(rl),Pge={left:!0,right:1,center:1},Bge={top:1,bottom:1,middle:1},XO=["fontStyle","fontWeight","fontSize","fontFamily"];function DW(a){return typeof a=="string"&&(a.indexOf("px")!==-1||a.indexOf("rem")!==-1||a.indexOf("em")!==-1)?a:isNaN(+a)?jT+"px":a+"px"}function ZO(a,e){for(var t=0;t<XO.length;t++){var r=XO[t],n=e[r];n!=null&&(a[r]=n)}}function IW(a){return a.fontSize!=null||a.fontFamily||a.fontWeight}function zge(a){return KO(a),oe(a.rich,KO),a}function KO(a){if(a){a.font=Ja.makeFont(a);var e=a.align;e==="middle"&&(e="center"),a.align=e==null||Pge[e]?e:"left";var t=a.verticalAlign;t==="center"&&(t="middle"),a.verticalAlign=t==null||Bge[t]?t:"top";var r=a.padding;r&&(a.padding=rN(a.padding))}}function QO(a,e){return a==null||e<=0||a==="transparent"||a==="none"?null:a.image||a.colorStops?"#000":a}function JO(a){return a==null||a==="none"?null:a.image||a.colorStops?"#000":a}function eP(a,e,t){return e==="right"?a-t[1]:e==="center"?a+t[3]/2-t[1]/2:a+t[3]}function tP(a){var e=a.text;return e!=null&&(e+=""),e}function zk(a){return!!(a.backgroundColor||a.lineHeight||a.borderWidth&&a.borderColor)}var na=Ea(),X4=function(a,e,t,r){if(r){var n=na(r);n.dataIndex=t,n.dataType=e,n.seriesIndex=a,n.ssrType="chart",r.type==="group"&&r.traverse(function(i){var o=na(i);o.seriesIndex=a,o.dataIndex=t,o.dataType=e,o.ssrType="chart"})}},aP=1,rP={},RW=Ea(),HT=Ea(),UT=0,Ab=1,mN=2,Cs=["emphasis","blur","select"],Gv=["normal","emphasis","blur","select"],$x=10,Fge=9,i0="highlight",Vw="downplay",z2="select",Z4="unselect",F2="toggleSelect",GT="selectchanged";function vp(a){return a!=null&&a!=="none"}function gN(a,e,t){a.onHoverStateChange&&(a.hoverState||0)!==t&&a.onHoverStateChange(e),a.hoverState=t}function LW(a){gN(a,"emphasis",mN)}function OW(a){a.hoverState===mN&&gN(a,"normal",UT)}function WT(a){gN(a,"blur",Ab)}function PW(a){a.hoverState===Ab&&gN(a,"normal",UT)}function Vge(a){a.selected=!0}function Hge(a){a.selected=!1}function nP(a,e,t){e(a,t)}function Hd(a,e,t){nP(a,e,t),a.isGroup&&a.traverse(function(r){nP(r,e,t)})}function V2(a,e){switch(e){case"emphasis":a.hoverState=mN;break;case"normal":a.hoverState=UT;break;case"blur":a.hoverState=Ab;break;case"select":a.selected=!0}}function Uge(a,e,t,r){for(var n=a.style,i={},o=0;o<e.length;o++){var l=e[o],c=n[l];i[l]=c??(r&&r[l])}for(var o=0;o<a.animators.length;o++){var d=a.animators[o];d.__fromStateTransition&&d.__fromStateTransition.indexOf(t)<0&&d.targetName==="style"&&d.saveTo(i,e)}return i}function Gge(a,e,t,r){var n=t&&ya(t,"select")>=0,i=!1;if(a instanceof Ia){var o=RW(a),l=n&&o.selectFill||o.normalFill,c=n&&o.selectStroke||o.normalStroke;if(vp(l)||vp(c)){r=r||{};var d=r.style||{};d.fill==="inherit"?(i=!0,r=Je({},r),d=Je({},d),d.fill=l):!vp(d.fill)&&vp(l)?(i=!0,r=Je({},r),d=Je({},d),d.fill=I4(l)):!vp(d.stroke)&&vp(c)&&(i||(r=Je({},r),d=Je({},d)),d.stroke=I4(c)),r.style=d}}if(r&&r.z2==null){i||(r=Je({},r));var u=a.z2EmphasisLift;r.z2=a.z2+(u??$x)}return r}function Wge(a,e,t){if(t&&t.z2==null){t=Je({},t);var r=a.z2SelectLift;t.z2=a.z2+(r??Fge)}return t}function $ge(a,e,t){var r=ya(a.currentStates,e)>=0,n=a.style.opacity,i=r?null:Uge(a,["opacity"],e,{opacity:1});t=t||{};var o=t.style||{};return o.opacity==null&&(t=Je({},t),o=Je({opacity:r?n:i.opacity*.1},o),t.style=o),t}function Fk(a,e){var t=this.states[a];if(this.style){if(a==="emphasis")return Gge(this,a,e,t);if(a==="blur")return $ge(this,a,t);if(a==="select")return Wge(this,a,t)}return t}function y0(a){a.stateProxy=Fk;var e=a.getTextContent(),t=a.getTextGuideLine();e&&(e.stateProxy=Fk),t&&(t.stateProxy=Fk)}function iP(a,e){!VW(a,e)&&!a.__highByOuter&&Hd(a,LW)}function sP(a,e){!VW(a,e)&&!a.__highByOuter&&Hd(a,OW)}function Od(a,e){a.__highByOuter|=1<<(e||0),Hd(a,LW)}function Pd(a,e){!(a.__highByOuter&=~(1<<(e||0)))&&Hd(a,OW)}function BW(a){Hd(a,WT)}function $T(a){Hd(a,PW)}function zW(a){Hd(a,Vge)}function FW(a){Hd(a,Hge)}function VW(a,e){return a.__highDownSilentOnTouch&&e.zrByTouch}function HW(a){var e=a.getModel(),t=[],r=[];e.eachComponent(function(n,i){var o=HT(i),l=n==="series",c=l?a.getViewOfSeriesModel(i):a.getViewOfComponentModel(i);!l&&r.push(c),o.isBlured&&(c.group.traverse(function(d){PW(d)}),l&&t.push(i)),o.isBlured=!1}),oe(r,function(n){n&&n.toggleBlurSeries&&n.toggleBlurSeries(t,!1,e)})}function K4(a,e,t,r){var n=r.getModel();t=t||"coordinateSystem";function i(d,u){for(var h=0;h<u.length;h++){var f=d.getItemGraphicEl(u[h]);f&&$T(f)}}if(a!=null&&!(!e||e==="none")){var o=n.getSeriesByIndex(a),l=o.coordinateSystem;l&&l.master&&(l=l.master);var c=[];n.eachSeries(function(d){var u=o===d,h=d.coordinateSystem;h&&h.master&&(h=h.master);var f=h&&l?h===l:u;if(!(t==="series"&&!u||t==="coordinateSystem"&&!f||e==="series"&&u)){var p=r.getViewOfSeriesModel(d);if(p.group.traverse(function(w){w.__highByOuter&&u&&e==="self"||WT(w)}),ls(e))i(d.getData(),e);else if(Qt(e))for(var g=Va(e),b=0;b<g.length;b++)i(d.getData(g[b]),e[g[b]]);c.push(d),HT(d).isBlured=!0}}),n.eachComponent(function(d,u){if(d!=="series"){var h=r.getViewOfComponentModel(u);h&&h.toggleBlurSeries&&h.toggleBlurSeries(c,!0,n)}})}}function Q4(a,e,t){if(!(a==null||e==null)){var r=t.getModel().getComponent(a,e);if(r){HT(r).isBlured=!0;var n=t.getViewOfComponentModel(r);!n||!n.focusBlurEnabled||n.group.traverse(function(i){WT(i)})}}}function Yge(a,e,t){var r=a.seriesIndex,n=a.getData(e.dataType);if(n){var i=v0(n,e);i=(rt(i)?i[0]:i)||0;var o=n.getItemGraphicEl(i);if(!o)for(var l=n.count(),c=0;!o&&c<l;)o=n.getItemGraphicEl(c++);if(o){var d=na(o);K4(r,d.focus,d.blurScope,t)}else{var u=a.get(["emphasis","focus"]),h=a.get(["emphasis","blurScope"]);u!=null&&K4(r,u,h,t)}}}function YT(a,e,t,r){var n={focusSelf:!1,dispatchers:null};if(a==null||a==="series"||e==null||t==null)return n;var i=r.getModel().getComponent(a,e);if(!i)return n;var o=r.getViewOfComponentModel(i);if(!o||!o.findHighDownDispatchers)return n;for(var l=o.findHighDownDispatchers(t),c,d=0;d<l.length;d++)if(na(l[d]).focus==="self"){c=!0;break}return{focusSelf:c,dispatchers:l}}function qge(a,e,t){var r=na(a),n=YT(r.componentMainType,r.componentIndex,r.componentHighDownName,t),i=n.dispatchers,o=n.focusSelf;i?(o&&Q4(r.componentMainType,r.componentIndex,t),oe(i,function(l){return iP(l,e)})):(K4(r.seriesIndex,r.focus,r.blurScope,t),r.focus==="self"&&Q4(r.componentMainType,r.componentIndex,t),iP(a,e))}function Xge(a,e,t){HW(t);var r=na(a),n=YT(r.componentMainType,r.componentIndex,r.componentHighDownName,t).dispatchers;n?oe(n,function(i){return sP(i,e)}):sP(a,e)}function Zge(a,e,t){if(e3(e)){var r=e.dataType,n=a.getData(r),i=v0(n,e);rt(i)||(i=[i]),a[e.type===F2?"toggleSelect":e.type===z2?"select":"unselect"](i,r)}}function oP(a){var e=a.getAllData();oe(e,function(t){var r=t.data,n=t.type;r.eachItemGraphicEl(function(i,o){a.isSelected(o,n)?zW(i):FW(i)})})}function Kge(a){var e=[];return a.eachSeries(function(t){var r=t.getAllData();oe(r,function(n){n.data;var i=n.type,o=t.getSelectedDataIndices();if(o.length>0){var l={dataIndex:o,seriesIndex:t.seriesIndex};i!=null&&(l.dataType=i),e.push(l)}})}),e}function s0(a,e,t){$f(a,!0),Hd(a,y0),J4(a,e,t)}function Qge(a){$f(a,!1)}function on(a,e,t,r){r?Qge(a):s0(a,e,t)}function J4(a,e,t){var r=na(a);e!=null?(r.focus=e,r.blurScope=t):r.focus&&(r.focus=null)}var lP=["emphasis","blur","select"],Jge={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function hi(a,e,t,r){t=t||"itemStyle";for(var n=0;n<lP.length;n++){var i=lP[n],o=e.getModel([i,t]),l=a.ensureState(i);l.style=r?r(o):o[Jge[t]]()}}function $f(a,e){var t=e===!1,r=a;a.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=a.highDownSilentOnTouch),(!t||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!t)}function Wv(a){return!!(a&&a.__highDownDispatcher)}function eve(a,e,t){var r=na(a);r.componentMainType=e.mainType,r.componentIndex=e.componentIndex,r.componentHighDownName=t}function tve(a){var e=rP[a];return e==null&&aP<=32&&(e=rP[a]=aP++),e}function e3(a){var e=a.type;return e===z2||e===Z4||e===F2}function cP(a){var e=a.type;return e===i0||e===Vw}function ave(a){var e=RW(a);e.normalFill=a.style.fill,e.normalStroke=a.style.stroke;var t=a.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var bp=Tc.CMD,rve=[[],[],[]],dP=Math.sqrt,nve=Math.atan2;function UW(a,e){if(e){var t=a.data,r=a.len(),n,i,o,l,c,d,u=bp.M,h=bp.C,f=bp.L,p=bp.R,g=bp.A,b=bp.Q;for(o=0,l=0;o<r;){switch(n=t[o++],l=o,i=0,n){case u:i=1;break;case f:i=1;break;case h:i=3;break;case b:i=2;break;case g:var w=e[4],_=e[5],k=dP(e[0]*e[0]+e[1]*e[1]),T=dP(e[2]*e[2]+e[3]*e[3]),D=nve(-e[1]/T,e[0]/k);t[o]*=k,t[o++]+=w,t[o]*=T,t[o++]+=_,t[o++]*=k,t[o++]*=T,t[o++]+=D,t[o++]+=D,o+=2,l=o;break;case p:d[0]=t[o++],d[1]=t[o++],zn(d,d,e),t[l++]=d[0],t[l++]=d[1],d[0]+=t[o++],d[1]+=t[o++],zn(d,d,e),t[l++]=d[0],t[l++]=d[1]}for(c=0;c<i;c++){var I=rve[c];I[0]=t[o++],I[1]=t[o++],zn(I,I,e),t[l++]=I[0],t[l++]=I[1]}}a.increaseVersion()}}var Vk=Math.sqrt,_y=Math.sin,Ny=Math.cos,Qm=Math.PI;function uP(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function t3(a,e){return(a[0]*e[0]+a[1]*e[1])/(uP(a)*uP(e))}function hP(a,e){return(a[0]*e[1]<a[1]*e[0]?-1:1)*Math.acos(t3(a,e))}function fP(a,e,t,r,n,i,o,l,c,d,u){var h=c*(Qm/180),f=Ny(h)*(a-t)/2+_y(h)*(e-r)/2,p=-1*_y(h)*(a-t)/2+Ny(h)*(e-r)/2,g=f*f/(o*o)+p*p/(l*l);g>1&&(o*=Vk(g),l*=Vk(g));var b=(n===i?-1:1)*Vk((o*o*(l*l)-o*o*(p*p)-l*l*(f*f))/(o*o*(p*p)+l*l*(f*f)))||0,w=b*o*p/l,_=b*-l*f/o,k=(a+t)/2+Ny(h)*w-_y(h)*_,T=(e+r)/2+_y(h)*w+Ny(h)*_,D=hP([1,0],[(f-w)/o,(p-_)/l]),I=[(f-w)/o,(p-_)/l],O=[(-1*f-w)/o,(-1*p-_)/l],P=hP(I,O);if(t3(I,O)<=-1&&(P=Qm),t3(I,O)>=1&&(P=0),P<0){var V=Math.round(P/Qm*1e6)/1e6;P=Qm*2+V%2*Qm}u.addData(d,k,T,o,l,D,P,h,i)}var ive=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,sve=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function ove(a){var e=new Tc;if(!a)return e;var t=0,r=0,n=t,i=r,o,l=Tc.CMD,c=a.match(ive);if(!c)return e;for(var d=0;d<c.length;d++){for(var u=c[d],h=u.charAt(0),f=void 0,p=u.match(sve)||[],g=p.length,b=0;b<g;b++)p[b]=parseFloat(p[b]);for(var w=0;w<g;){var _=void 0,k=void 0,T=void 0,D=void 0,I=void 0,O=void 0,P=void 0,V=t,G=r,Q=void 0,$=void 0;switch(h){case"l":t+=p[w++],r+=p[w++],f=l.L,e.addData(f,t,r);break;case"L":t=p[w++],r=p[w++],f=l.L,e.addData(f,t,r);break;case"m":t+=p[w++],r+=p[w++],f=l.M,e.addData(f,t,r),n=t,i=r,h="l";break;case"M":t=p[w++],r=p[w++],f=l.M,e.addData(f,t,r),n=t,i=r,h="L";break;case"h":t+=p[w++],f=l.L,e.addData(f,t,r);break;case"H":t=p[w++],f=l.L,e.addData(f,t,r);break;case"v":r+=p[w++],f=l.L,e.addData(f,t,r);break;case"V":r=p[w++],f=l.L,e.addData(f,t,r);break;case"C":f=l.C,e.addData(f,p[w++],p[w++],p[w++],p[w++],p[w++],p[w++]),t=p[w-2],r=p[w-1];break;case"c":f=l.C,e.addData(f,p[w++]+t,p[w++]+r,p[w++]+t,p[w++]+r,p[w++]+t,p[w++]+r),t+=p[w-2],r+=p[w-1];break;case"S":_=t,k=r,Q=e.len(),$=e.data,o===l.C&&(_+=t-$[Q-4],k+=r-$[Q-3]),f=l.C,V=p[w++],G=p[w++],t=p[w++],r=p[w++],e.addData(f,_,k,V,G,t,r);break;case"s":_=t,k=r,Q=e.len(),$=e.data,o===l.C&&(_+=t-$[Q-4],k+=r-$[Q-3]),f=l.C,V=t+p[w++],G=r+p[w++],t+=p[w++],r+=p[w++],e.addData(f,_,k,V,G,t,r);break;case"Q":V=p[w++],G=p[w++],t=p[w++],r=p[w++],f=l.Q,e.addData(f,V,G,t,r);break;case"q":V=p[w++]+t,G=p[w++]+r,t+=p[w++],r+=p[w++],f=l.Q,e.addData(f,V,G,t,r);break;case"T":_=t,k=r,Q=e.len(),$=e.data,o===l.Q&&(_+=t-$[Q-4],k+=r-$[Q-3]),t=p[w++],r=p[w++],f=l.Q,e.addData(f,_,k,t,r);break;case"t":_=t,k=r,Q=e.len(),$=e.data,o===l.Q&&(_+=t-$[Q-4],k+=r-$[Q-3]),t+=p[w++],r+=p[w++],f=l.Q,e.addData(f,_,k,t,r);break;case"A":T=p[w++],D=p[w++],I=p[w++],O=p[w++],P=p[w++],V=t,G=r,t=p[w++],r=p[w++],f=l.A,fP(V,G,t,r,O,P,T,D,I,f,e);break;case"a":T=p[w++],D=p[w++],I=p[w++],O=p[w++],P=p[w++],V=t,G=r,t+=p[w++],r+=p[w++],f=l.A,fP(V,G,t,r,O,P,T,D,I,f,e);break}}(h==="z"||h==="Z")&&(f=l.Z,e.addData(f),t=n,r=i),o=f}return e.toStatic(),e}var GW=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e})(Ia);function WW(a){return a.setData!=null}function $W(a,e){var t=ove(a),r=Je({},e);return r.buildPath=function(n){var i=WW(n);if(i&&n.canSave()){n.appendPath(t);var o=n.getContext();o&&n.rebuildPath(o,1)}else{var o=i?n.getContext():n;o&&t.rebuildPath(o,1)}},r.applyTransform=function(n){UW(t,n),this.dirtyShape()},r}function YW(a,e){return new GW($W(a,e))}function lve(a,e){var t=$W(a,e),r=(function(n){Le(i,n);function i(o){var l=n.call(this,o)||this;return l.applyTransform=t.applyTransform,l.buildPath=t.buildPath,l}return i})(GW);return r}function cve(a,e){for(var t=[],r=a.length,n=0;n<r;n++){var i=a[n];t.push(i.getUpdatedPathProxy(!0))}var o=new Ia(e);return o.createPathProxy(),o.buildPath=function(l){if(WW(l)){l.appendPath(t);var c=l.getContext();c&&l.rebuildPath(c,1)}},o}function qT(a,e){e=e||{};var t=new Ia;return a.shape&&t.setShape(a.shape),t.setStyle(a.style),e.bakeTransform?UW(t.path,a.getComputedTransform()):e.toLocal?t.setLocalTransform(a.getComputedTransform()):t.copyTransform(a),t.buildPath=a.buildPath,t.applyTransform=t.applyTransform,t.z=a.z,t.z2=a.z2,t.zlevel=a.zlevel,t}var dve=(function(){function a(){this.cx=0,this.cy=0,this.r=0}return a})(),Ud=(function(a){Le(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new dve},e.prototype.buildPath=function(t,r){t.moveTo(r.cx+r.r,r.cy),t.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e})(Ia);Ud.prototype.type="circle";var uve=(function(){function a(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return a})(),vN=(function(a){Le(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new uve},e.prototype.buildPath=function(t,r){var n=.5522848,i=r.cx,o=r.cy,l=r.rx,c=r.ry,d=l*n,u=c*n;t.moveTo(i-l,o),t.bezierCurveTo(i-l,o-u,i-d,o-c,i,o-c),t.bezierCurveTo(i+d,o-c,i+l,o-u,i+l,o),t.bezierCurveTo(i+l,o+u,i+d,o+c,i,o+c),t.bezierCurveTo(i-d,o+c,i-l,o+u,i-l,o),t.closePath()},e})(Ia);vN.prototype.type="ellipse";var qW=Math.PI,Hk=qW*2,mf=Math.sin,yp=Math.cos,hve=Math.acos,Ji=Math.atan2,pP=Math.abs,dv=Math.sqrt,Ug=Math.max,Ql=Math.min,xl=1e-4;function fve(a,e,t,r,n,i,o,l){var c=t-a,d=r-e,u=o-n,h=l-i,f=h*c-u*d;if(!(f*f<xl))return f=(u*(e-i)-h*(a-n))/f,[a+f*c,e+f*d]}function jy(a,e,t,r,n,i,o){var l=a-t,c=e-r,d=(o?i:-i)/dv(l*l+c*c),u=d*c,h=-d*l,f=a+u,p=e+h,g=t+u,b=r+h,w=(f+g)/2,_=(p+b)/2,k=g-f,T=b-p,D=k*k+T*T,I=n-i,O=f*b-g*p,P=(T<0?-1:1)*dv(Ug(0,I*I*D-O*O)),V=(O*T-k*P)/D,G=(-O*k-T*P)/D,Q=(O*T+k*P)/D,$=(-O*k+T*P)/D,ae=V-w,J=G-_,U=Q-w,F=$-_;return ae*ae+J*J>U*U+F*F&&(V=Q,G=$),{cx:V,cy:G,x0:-u,y0:-h,x1:V*(n/I-1),y1:G*(n/I-1)}}function pve(a){var e;if(rt(a)){var t=a.length;if(!t)return a;t===1?e=[a[0],a[0],0,0]:t===2?e=[a[0],a[0],a[1],a[1]]:t===3?e=a.concat(a[2]):e=a}else e=[a,a,a,a];return e}function xve(a,e){var t,r=Ug(e.r,0),n=Ug(e.r0||0,0),i=r>0,o=n>0;if(!(!i&&!o)){if(i||(r=n,n=0),n>r){var l=r;r=n,n=l}var c=e.startAngle,d=e.endAngle;if(!(isNaN(c)||isNaN(d))){var u=e.cx,h=e.cy,f=!!e.clockwise,p=pP(d-c),g=p>Hk&&p%Hk;if(g>xl&&(p=g),!(r>xl))a.moveTo(u,h);else if(p>Hk-xl)a.moveTo(u+r*yp(c),h+r*mf(c)),a.arc(u,h,r,c,d,!f),n>xl&&(a.moveTo(u+n*yp(d),h+n*mf(d)),a.arc(u,h,n,d,c,f));else{var b=void 0,w=void 0,_=void 0,k=void 0,T=void 0,D=void 0,I=void 0,O=void 0,P=void 0,V=void 0,G=void 0,Q=void 0,$=void 0,ae=void 0,J=void 0,U=void 0,F=r*yp(c),W=r*mf(c),K=n*yp(d),ee=n*mf(d),ne=p>xl;if(ne){var re=e.cornerRadius;re&&(t=pve(re),b=t[0],w=t[1],_=t[2],k=t[3]);var Z=pP(r-n)/2;if(T=Ql(Z,_),D=Ql(Z,k),I=Ql(Z,b),O=Ql(Z,w),G=P=Ug(T,D),Q=V=Ug(I,O),(P>xl||V>xl)&&($=r*yp(d),ae=r*mf(d),J=n*yp(c),U=n*mf(c),p<qW)){var ie=fve(F,W,J,U,$,ae,K,ee);if(ie){var de=F-ie[0],fe=W-ie[1],he=$-ie[0],ve=ae-ie[1],Oe=1/mf(hve((de*he+fe*ve)/(dv(de*de+fe*fe)*dv(he*he+ve*ve)))/2),Se=dv(ie[0]*ie[0]+ie[1]*ie[1]);G=Ql(P,(r-Se)/(Oe+1)),Q=Ql(V,(n-Se)/(Oe-1))}}}if(!ne)a.moveTo(u+F,h+W);else if(G>xl){var Ce=Ql(_,G),we=Ql(k,G),xe=jy(J,U,F,W,r,Ce,f),be=jy($,ae,K,ee,r,we,f);a.moveTo(u+xe.cx+xe.x0,h+xe.cy+xe.y0),G<P&&Ce===we?a.arc(u+xe.cx,h+xe.cy,G,Ji(xe.y0,xe.x0),Ji(be.y0,be.x0),!f):(Ce>0&&a.arc(u+xe.cx,h+xe.cy,Ce,Ji(xe.y0,xe.x0),Ji(xe.y1,xe.x1),!f),a.arc(u,h,r,Ji(xe.cy+xe.y1,xe.cx+xe.x1),Ji(be.cy+be.y1,be.cx+be.x1),!f),we>0&&a.arc(u+be.cx,h+be.cy,we,Ji(be.y1,be.x1),Ji(be.y0,be.x0),!f))}else a.moveTo(u+F,h+W),a.arc(u,h,r,c,d,!f);if(!(n>xl)||!ne)a.lineTo(u+K,h+ee);else if(Q>xl){var Ce=Ql(b,Q),we=Ql(w,Q),xe=jy(K,ee,$,ae,n,-we,f),be=jy(F,W,J,U,n,-Ce,f);a.lineTo(u+xe.cx+xe.x0,h+xe.cy+xe.y0),Q<V&&Ce===we?a.arc(u+xe.cx,h+xe.cy,Q,Ji(xe.y0,xe.x0),Ji(be.y0,be.x0),!f):(we>0&&a.arc(u+xe.cx,h+xe.cy,we,Ji(xe.y0,xe.x0),Ji(xe.y1,xe.x1),!f),a.arc(u,h,n,Ji(xe.cy+xe.y1,xe.cx+xe.x1),Ji(be.cy+be.y1,be.cx+be.x1),f),Ce>0&&a.arc(u+be.cx,h+be.cy,Ce,Ji(be.y1,be.x1),Ji(be.y0,be.x0),!f))}else a.lineTo(u+K,h+ee),a.arc(u,h,n,d,c,f)}a.closePath()}}}var mve=(function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return a})(),ds=(function(a){Le(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new mve},e.prototype.buildPath=function(t,r){xve(t,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e})(Ia);ds.prototype.type="sector";var gve=(function(){function a(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return a})(),Tb=(function(a){Le(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new gve},e.prototype.buildPath=function(t,r){var n=r.cx,i=r.cy,o=Math.PI*2;t.moveTo(n+r.r,i),t.arc(n,i,r.r,0,o,!1),t.moveTo(n+r.r0,i),t.arc(n,i,r.r0,0,o,!0)},e})(Ia);Tb.prototype.type="ring";function vve(a,e,t,r){var n=[],i=[],o=[],l=[],c,d,u,h;if(r){u=[1/0,1/0],h=[-1/0,-1/0];for(var f=0,p=a.length;f<p;f++)Zu(u,u,a[f]),Ku(h,h,a[f]);Zu(u,u,r[0]),Ku(h,h,r[1])}for(var f=0,p=a.length;f<p;f++){var g=a[f];if(t)c=a[f?f-1:p-1],d=a[(f+1)%p];else if(f===0||f===p-1){n.push(kd(a[f]));continue}else c=a[f-1],d=a[f+1];Gf(i,d,c),Rw(i,i,e);var b=_4(g,c),w=_4(g,d),_=b+w;_!==0&&(b/=_,w/=_),Rw(o,i,-b),Rw(l,i,w);var k=rO([],g,o),T=rO([],g,l);r&&(Ku(k,k,u),Zu(k,k,h),Ku(T,T,u),Zu(T,T,h)),n.push(k),n.push(T)}return t&&n.push(n.shift()),n}function XW(a,e,t){var r=e.smooth,n=e.points;if(n&&n.length>=2){if(r){var i=vve(n,r,t,e.smoothConstraint);a.moveTo(n[0][0],n[0][1]);for(var o=n.length,l=0;l<(t?o:o-1);l++){var c=i[l*2],d=i[l*2+1],u=n[(l+1)%o];a.bezierCurveTo(c[0],c[1],d[0],d[1],u[0],u[1])}}else{a.moveTo(n[0][0],n[0][1]);for(var l=1,h=n.length;l<h;l++)a.lineTo(n[l][0],n[l][1])}t&&a.closePath()}}var bve=(function(){function a(){this.points=null,this.smooth=0,this.smoothConstraint=null}return a})(),us=(function(a){Le(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new bve},e.prototype.buildPath=function(t,r){XW(t,r,!0)},e})(Ia);us.prototype.type="polygon";var yve=(function(){function a(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return a})(),$i=(function(a){Le(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new yve},e.prototype.buildPath=function(t,r){XW(t,r,!1)},e})(Ia);$i.prototype.type="polyline";var wve={},_ve=(function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a})(),qn=(function(a){Le(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new _ve},e.prototype.buildPath=function(t,r){var n,i,o,l;if(this.subPixelOptimize){var c=xN(wve,r,this.style);n=c.x1,i=c.y1,o=c.x2,l=c.y2}else n=r.x1,i=r.y1,o=r.x2,l=r.y2;var d=r.percent;d!==0&&(t.moveTo(n,i),d<1&&(o=n*(1-d)+o*d,l=i*(1-d)+l*d),t.lineTo(o,l))},e.prototype.pointAt=function(t){var r=this.shape;return[r.x1*(1-t)+r.x2*t,r.y1*(1-t)+r.y2*t]},e})(Ia);qn.prototype.type="line";var Hs=[],Nve=(function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return a})();function xP(a,e,t){var r=a.cpx2,n=a.cpy2;return r!=null||n!=null?[(t?mO:bi)(a.x1,a.cpx1,a.cpx2,a.x2,e),(t?mO:bi)(a.y1,a.cpy1,a.cpy2,a.y2,e)]:[(t?T4:Ei)(a.x1,a.cpx1,a.x2,e),(t?T4:Ei)(a.y1,a.cpy1,a.y2,e)]}var Mb=(function(a){Le(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Nve},e.prototype.buildPath=function(t,r){var n=r.x1,i=r.y1,o=r.x2,l=r.y2,c=r.cpx1,d=r.cpy1,u=r.cpx2,h=r.cpy2,f=r.percent;f!==0&&(t.moveTo(n,i),u==null||h==null?(f<1&&(zv(n,c,o,f,Hs),c=Hs[1],o=Hs[2],zv(i,d,l,f,Hs),d=Hs[1],l=Hs[2]),t.quadraticCurveTo(c,d,o,l)):(f<1&&(gh(n,c,u,o,f,Hs),c=Hs[1],u=Hs[2],o=Hs[3],gh(i,d,h,l,f,Hs),d=Hs[1],h=Hs[2],l=Hs[3]),t.bezierCurveTo(c,d,u,h,o,l)))},e.prototype.pointAt=function(t){return xP(this.shape,t,!1)},e.prototype.tangentAt=function(t){var r=xP(this.shape,t,!0);return Ux(r,r)},e})(Ia);Mb.prototype.type="bezier-curve";var jve=(function(){function a(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a})(),bN=(function(a){Le(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new jve},e.prototype.buildPath=function(t,r){var n=r.cx,i=r.cy,o=Math.max(r.r,0),l=r.startAngle,c=r.endAngle,d=r.clockwise,u=Math.cos(l),h=Math.sin(l);t.moveTo(u*o+n,h*o+i),t.arc(n,i,o,l,c,!d)},e})(Ia);bN.prototype.type="arc";var yN=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,r=this.shapeChanged(),n=0;n<t.length;n++)r=r||t[n].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],r=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(r[0],r[1],t[n].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,r){for(var n=r.paths||[],i=0;i<n.length;i++)n[i].buildPath(t,n[i].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],r=0;r<t.length;r++)t[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Ia.prototype.getBoundingRect.call(this)},e})(Ia),ZW=(function(){function a(e){this.colorStops=e||[]}return a.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},a})(),Yx=(function(a){Le(e,a);function e(t,r,n,i,o,l){var c=a.call(this,o)||this;return c.x=t??0,c.y=r??0,c.x2=n??1,c.y2=i??0,c.type="linear",c.global=l||!1,c}return e})(ZW),KW=(function(a){Le(e,a);function e(t,r,n,i,o){var l=a.call(this,i)||this;return l.x=t??.5,l.y=r??.5,l.r=n??.5,l.type="radial",l.global=o||!1,l}return e})(ZW),Uk=Math.min,Sve=Math.max,Sy=Math.abs,gf=[0,0],vf=[0,0],Mi=BG(),ky=Mi.minTv,Cy=Mi.maxTv,QW=(function(){function a(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new Xt;for(var r=0;r<2;r++)this._axes[r]=new Xt;e&&this.fromBoundingRect(e,t)}return a.prototype.fromBoundingRect=function(e,t){var r=this._corners,n=this._axes,i=e.x,o=e.y,l=i+e.width,c=o+e.height;if(r[0].set(i,o),r[1].set(l,o),r[2].set(l,c),r[3].set(i,c),t)for(var d=0;d<4;d++)r[d].transform(t);Xt.sub(n[0],r[1],r[0]),Xt.sub(n[1],r[3],r[0]),n[0].normalize(),n[1].normalize();for(var d=0;d<2;d++)this._origin[d]=n[d].dot(r[0])},a.prototype.intersect=function(e,t,r){var n=!0,i=!t;return t&&Xt.set(t,0,0),Mi.reset(r,!i),!this._intersectCheckOneSide(this,e,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(e,this,i,-1)&&(n=!1,i)||!i&&!Mi.negativeSize&&Xt.copy(t,n?Mi.useDir?Mi.dirMinTv:ky:Cy),n},a.prototype._intersectCheckOneSide=function(e,t,r,n){for(var i=!0,o=0;o<2;o++){var l=e._axes[o];if(e._getProjMinMaxOnAxis(o,e._corners,gf),e._getProjMinMaxOnAxis(o,t._corners,vf),Mi.negativeSize||gf[1]<vf[0]||gf[0]>vf[1]){if(i=!1,Mi.negativeSize||r)return i;var c=Sy(vf[0]-gf[1]),d=Sy(gf[0]-vf[1]);Uk(c,d)>Cy.len()&&(c<d?Xt.scale(Cy,l,-c*n):Xt.scale(Cy,l,d*n))}else if(!r){var c=Sy(vf[0]-gf[1]),d=Sy(gf[0]-vf[1]);(Mi.useDir||Uk(c,d)<ky.len())&&((c<d||!Mi.bidirectional)&&(Xt.scale(ky,l,c*n),Mi.useDir&&Mi.calcDirMTV()),(c>=d||!Mi.bidirectional)&&(Xt.scale(ky,l,-d*n),Mi.useDir&&Mi.calcDirMTV()))}}return i},a.prototype._getProjMinMaxOnAxis=function(e,t,r){for(var n=this._axes[e],i=this._origin,o=t[0].dot(n)+i[e],l=o,c=o,d=1;d<t.length;d++){var u=t[d].dot(n)+i[e];l=Uk(u,l),c=Sve(u,c)}r[0]=l+Mi.touchThreshold,r[1]=c-Mi.touchThreshold,Mi.negativeSize=r[1]<r[0]},a})(),kve=[],Cve=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,r){r?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,r){r=r||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var r=this._cursor;r<this._displayables.length;r++)t&&t(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)t&&t(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var r=this._displayables[t];r.parent=this,r.update(),r.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var r=this._temporaryDisplayables[t];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new Jt(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var n=this._displayables[r],i=n.getBoundingRect().clone();n.needLocalTransform()&&i.applyTransform(n.getLocalTransform(kve)),t.union(i)}this._rect=t}return this._rect},e.prototype.contain=function(t,r){var n=this.transformCoordToLocal(t,r),i=this.getBoundingRect();if(i.contain(n[0],n[1]))for(var o=0;o<this._displayables.length;o++){var l=this._displayables[o];if(l.contain(t,r))return!0}return!1},e})(rl),JW=Ea();function qx(a,e,t,r,n){var i;if(e&&e.ecModel){var o=e.ecModel.getUpdatePayload();i=o&&o.animation}var l=e&&e.isAnimationEnabled(),c=a==="update";if(l){var d=void 0,u=void 0,h=void 0;r?(d=Pt(r.duration,200),u=Pt(r.easing,"cubicOut"),h=0):(d=e.getShallow(c?"animationDurationUpdate":"animationDuration"),u=e.getShallow(c?"animationEasingUpdate":"animationEasing"),h=e.getShallow(c?"animationDelayUpdate":"animationDelay")),i&&(i.duration!=null&&(d=i.duration),i.easing!=null&&(u=i.easing),i.delay!=null&&(h=i.delay)),Ut(h)&&(h=h(t,n)),Ut(d)&&(d=d(t));var f={duration:d||0,delay:h,easing:u};return f}else return null}function XT(a,e,t,r,n,i,o){var l=!1,c;Ut(n)?(o=i,i=n,n=null):Qt(n)&&(i=n.cb,o=n.during,l=n.isFrom,c=n.removeOpt,n=n.dataIndex);var d=a==="leave";d||e.stopAnimation("leave");var u=qx(a,r,n,d?c||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,n):null);if(u&&u.duration>0){var h=u.duration,f=u.delay,p=u.easing,g={duration:h,delay:f||0,easing:p,done:i,force:!!i||!!o,setToFinal:!d,scope:a,during:o};l?e.animateFrom(t,g):e.animateTo(t,g)}else e.stopAnimation(),!l&&e.attr(t),o&&o(1),i&&i()}function rr(a,e,t,r,n,i){XT("update",a,e,t,r,n,i)}function en(a,e,t,r,n,i){XT("enter",a,e,t,r,n,i)}function cx(a){if(!a.__zr)return!0;for(var e=0;e<a.animators.length;e++){var t=a.animators[e];if(t.scope==="leave")return!0}return!1}function vh(a,e,t,r,n,i){cx(a)||XT("leave",a,e,t,r,n,i)}function mP(a,e,t,r){a.removeTextContent(),a.removeTextGuideLine(),vh(a,{style:{opacity:0}},e,t,r)}function Cd(a,e,t){function r(){a.parent&&a.parent.remove(a)}a.isGroup?a.traverse(function(n){n.isGroup||mP(n,e,t,r)}):mP(a,e,t,r)}function nl(a){JW(a).oldStyle=a.style}function Ave(a){return JW(a).oldStyle}var a3={},da=["x","y"],Qn=["width","height"];function Tve(a){return Ia.extend(a)}var Mve=lve;function Eve(a,e){return Mve(a,e)}function Il(a,e){a3[a]=e}function H2(a){if(a3.hasOwnProperty(a))return a3[a]}function $v(a,e,t,r){var n=YW(a,e);return t&&(r==="center"&&(t=t$(t,n.getBoundingRect())),a$(n,t)),n}function e$(a,e,t){var r=new Li({style:{image:a,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(n){if(t==="center"){var i={width:n.width,height:n.height};r.setStyle(t$(e,i))}}});return r}function t$(a,e){var t=e.width/e.height,r=a.height*t,n;r<=a.width?n=a.height:(r=a.width,n=r/t);var i=a.x+a.width/2,o=a.y+a.height/2;return{x:i-r/2,y:o-n/2,width:r,height:n}}var Ko=cve;function a$(a,e){if(a.applyTransform){var t=a.getBoundingRect(),r=t.calculateTransform(e);a.applyTransform(r)}}function Cx(a,e){return xN(a,a,{lineWidth:e}),a}function Dve(a,e){return EW(a,a,e),a}var Hw=_o;function o0(a,e){for(var t=iN([]);a&&a!==e;)bc(t,a.getLocalTransform(),t),a=a.parent;return t}function jl(a,e,t){return e&&!ls(e)&&(e=jd.getLocalTransform(e)),t&&(e=Cl([],e)),zn([],a,e)}function wN(a,e,t){var r=e[4]===0||e[5]===0||e[0]===0?1:cc(2*e[4]/e[0]),n=e[4]===0||e[5]===0||e[2]===0?1:cc(2*e[4]/e[2]),i=[a==="left"?-r:a==="right"?r:0,a==="top"?-n:a==="bottom"?n:0];return i=jl(i,e,t),cc(i[0])>cc(i[1])?i[0]>0?"right":"left":i[1]>0?"bottom":"top"}function gP(a){return!a.isGroup}function Ive(a){return a.shape!=null}function Eb(a,e,t){if(!a||!e)return;function r(o){var l={};return o.traverse(function(c){gP(c)&&c.anid&&(l[c.anid]=c)}),l}function n(o){var l={x:o.x,y:o.y,rotation:o.rotation};return Ive(o)&&(l.shape=$t(o.shape)),l}var i=r(a);e.traverse(function(o){if(gP(o)&&o.anid){var l=i[o.anid];if(l){var c=n(o);o.attr(n(l)),rr(o,c,t,na(o).dataIndex)}}})}function r$(a,e){return it(a,function(t){var r=t[0];r=Pn(r,e.x),r=jo(r,e.x+e.width);var n=t[1];return n=Pn(n,e.y),n=jo(n,e.y+e.height),[r,n]})}function Rve(a,e){var t=Pn(a.x,e.x),r=jo(a.x+a.width,e.x+e.width),n=Pn(a.y,e.y),i=jo(a.y+a.height,e.y+e.height);if(r>=t&&i>=n)return{x:t,y:n,width:r-t,height:i-n}}function Db(a,e,t){var r=Je({rectHover:!0},e),n=r.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},a)return a.indexOf("image://")===0?(n.image=a.slice(8),Kt(n,t),new Li(r)):$v(a.replace("path://",""),r,t,"center")}function Gg(a,e,t,r,n){for(var i=0,o=n[n.length-1];i<n.length;i++){var l=n[i];if(n$(a,e,t,r,l[0],l[1],o[0],o[1]))return!0;o=l}}function n$(a,e,t,r,n,i,o,l){var c=t-a,d=r-e,u=o-n,h=l-i,f=Gk(u,h,c,d);if(Lve(f))return!1;var p=a-n,g=e-i,b=Gk(p,g,c,d)/f;if(b<0||b>1)return!1;var w=Gk(p,g,u,h)/f;return!(w<0||w>1)}function Gk(a,e,t,r){return a*r-t*e}function Lve(a){return a<=1e-6&&a>=-1e-6}function w0(a,e,t,r,n){return e==null||(Xa(e)?un[0]=un[1]=un[2]=un[3]=e:(un[0]=e[0],un[1]=e[1],un[2]=e[2],un[3]=e[3]),r&&(un[0]=Pn(0,un[0]),un[1]=Pn(0,un[1]),un[2]=Pn(0,un[2]),un[3]=Pn(0,un[3])),t&&(un[0]=-un[0],un[1]=-un[1],un[2]=-un[2],un[3]=-un[3]),vP(a,un,"x","width",3,1,n&&n[0]||0),vP(a,un,"y","height",0,2,n&&n[1]||0)),a}var un=[0,0,0,0];function vP(a,e,t,r,n,i,o){var l=e[i]+e[n],c=a[r];a[r]+=l,o=Pn(0,jo(o,c)),a[r]<o?(a[r]=o,a[t]+=e[n]>=0?-e[n]:e[i]>=0?c+e[i]:cc(l)>1e-8?(c-o)*e[n]/l:0):a[t]-=e[n]}function Gd(a){var e=a.itemTooltipOption,t=a.componentModel,r=a.itemName,n=jt(e)?{formatter:e}:e,i=t.mainType,o=t.componentIndex,l={componentType:i,name:r,$vars:["name"]};l[i+"Index"]=o;var c=a.formatterParamsExtra;c&&oe(Va(c),function(u){Dt(l,u)||(l[u]=c[u],l.$vars.push(u))});var d=na(a.el);d.componentMainType=i,d.componentIndex=o,d.tooltipConfig={name:r,option:Kt({content:r,encodeHTMLContent:!0,formatterParams:l},n)}}function r3(a,e){var t;a.isGroup&&(t=e(a)),t||a.traverse(e)}function Ah(a,e){if(a)if(rt(a))for(var t=0;t<a.length;t++)r3(a[t],e);else r3(a,e)}function ZT(a){return!a||cc(a[1])<Ay&&cc(a[2])<Ay||cc(a[0])<Ay&&cc(a[3])<Ay}var Ay=1e-5;function Yv(a,e){return a?Jt.copy(a,e):e.clone()}function KT(a,e){return e?sN(a||Ii(),e):void 0}function _0(a){return{z:a.get("z")||0,zlevel:a.get("zlevel")||0}}function i$(a){var e=-1/0,t=1/0;r3(a,function(i){r(i),r(i.getTextContent()),r(i.getTextGuideLine())});function r(i){if(!(!i||i.isGroup)){var o=i.currentStates;if(o.length)for(var l=0;l<o.length;l++)n(i.states[o[l]]);n(i)}}function n(i){if(i){var o=i.z2;o>e&&(e=o),o<t&&(t=o)}}return t>e&&(t=e=0),{min:t,max:e}}function _N(a,e,t){s$(a,e,t,-1/0)}function s$(a,e,t,r){if(a.ignoreModelZ)return r;var n=a.getTextContent(),i=a.getTextGuideLine(),o=a.isGroup;if(o)for(var l=a.childrenRef(),c=0;c<l.length;c++)r=Pn(s$(l[c],e,t,r),r);else a.z=e,a.zlevel=t,r=Pn(a.z2||0,r);if(n&&(n.z=e,n.zlevel=t,isFinite(r)&&(n.z2=r+2)),i){var d=a.textGuideLineConfig;i.z=e,i.zlevel=t,isFinite(r)&&(i.z2=r+(d&&d.showAbove?1:-1))}return r}Il("circle",Ud);Il("ellipse",vN);Il("sector",ds);Il("ring",Tb);Il("polygon",us);Il("polyline",$i);Il("rect",Ta);Il("line",qn);Il("bezierCurve",Mb);Il("arc",bN);const M0=Object.freeze(Object.defineProperty({__proto__:null,Arc:bN,BezierCurve:Mb,BoundingRect:Jt,Circle:Ud,CompoundPath:yN,Ellipse:vN,Group:Gt,Image:Li,IncrementalDisplayable:Cve,Line:qn,LinearGradient:Yx,OrientedBoundingRect:QW,Path:Ia,Point:Xt,Polygon:us,Polyline:$i,RadialGradient:KW,Rect:Ta,Ring:Tb,Sector:ds,Text:Ja,WH:Qn,XY:da,applyTransform:jl,calcZ2Range:i$,clipPointsByRect:r$,clipRectByRect:Rve,createIcon:Db,ensureCopyRect:Yv,ensureCopyTransform:KT,expandOrShrinkRect:w0,extendPath:Eve,extendShape:Tve,getShapeClass:H2,getTransform:o0,groupTransition:Eb,initProps:en,isBoundingRectAxisAligned:ZT,isElementRemoved:cx,lineLineIntersect:n$,linePolygonIntersect:Gg,makeImage:e$,makePath:$v,mergePath:Ko,registerShape:Il,removeElement:vh,removeElementWithFadeOut:Cd,resizePath:a$,retrieveZInfo:_0,setTooltipConfig:Gd,subPixelOptimize:Hw,subPixelOptimizeLine:Cx,subPixelOptimizeRect:Dve,transformDirection:wN,traverseElements:Ah,traverseUpdateZ:_N,updateProps:rr},Symbol.toStringTag,{value:"Module"}));var NN={};function o$(a,e){for(var t=0;t<Cs.length;t++){var r=Cs[t],n=e[r],i=a.ensureState(r);i.style=i.style||{},i.style.text=n}var o=a.currentStates.slice();a.clearStates(!0),a.setStyle({text:e.normal}),a.useStates(o,!0)}function n3(a,e,t){var r=a.labelFetcher,n=a.labelDataIndex,i=a.labelDimIndex,o=e.normal,l;r&&(l=r.getFormattedLabel(n,"normal",null,i,o&&o.get("formatter"),t!=null?{interpolatedValue:t}:null)),l==null&&(l=Ut(a.defaultText)?a.defaultText(n,a,t):a.defaultText);for(var c={normal:l},d=0;d<Cs.length;d++){var u=Cs[d],h=e[u];c[u]=Pt(r?r.getFormattedLabel(n,u,null,i,h&&h.get("formatter")):null,l)}return c}function ji(a,e,t,r){t=t||NN;for(var n=a instanceof Ja,i=!1,o=0;o<Gv.length;o++){var l=e[Gv[o]];if(l&&l.getShallow("show")){i=!0;break}}var c=n?a:a.getTextContent();if(i){n||(c||(c=new Ja,a.setTextContent(c)),a.stateProxy&&(c.stateProxy=a.stateProxy));var d=n3(t,e),u=e.normal,h=!!u.getShallow("show"),f=zr(u,r&&r.normal,t,!1,!n);f.text=d.normal,n||a.setTextConfig(U2(u,t,!1));for(var o=0;o<Cs.length;o++){var p=Cs[o],l=e[p];if(l){var g=c.ensureState(p),b=!!Pt(l.getShallow("show"),h);if(b!==h&&(g.ignore=!b),g.style=zr(l,r&&r[p],t,!0,!n),g.style.text=d[p],!n){var w=a.ensureState(p);w.textConfig=U2(l,t,!0)}}}c.silent=!!u.getShallow("silent"),c.style.x!=null&&(f.x=c.style.x),c.style.y!=null&&(f.y=c.style.y),c.ignore=!h,c.useStyle(f),c.dirty(),t.enableTextSetter&&(Xx(c).setLabelText=function(_){var k=n3(t,e,_);o$(c,k)})}else c&&(c.ignore=!0);a.dirty()}function fi(a,e){e=e||"label";for(var t={normal:a.getModel(e)},r=0;r<Cs.length;r++){var n=Cs[r];t[n]=a.getModel([n,e])}return t}function zr(a,e,t,r,n){var i={};return Ove(i,a,t,r,n),e&&Je(i,e),i}function U2(a,e,t){e=e||{};var r={},n,i=a.getShallow("rotate"),o=Pt(a.getShallow("distance"),t?null:5),l=a.getShallow("offset");return n=a.getShallow("position")||(t?null:"inside"),n==="outside"&&(n=e.defaultOutsidePosition||"top"),n!=null&&(r.position=n),l!=null&&(r.offset=l),i!=null&&(i*=Math.PI/180,r.rotation=i),o!=null&&(r.distance=o),r.outsideFill=a.get("color")==="inherit"?e.inheritColor||null:"auto",e.autoOverflowArea!=null&&(r.autoOverflowArea=e.autoOverflowArea),e.layoutRect!=null&&(r.layoutRect=e.layoutRect),r}function Ove(a,e,t,r,n){t=t||NN;var i=e.ecModel,o=i&&i.option.textStyle,l=Pve(e),c;if(l){c={};var d="richInheritPlainLabel",u=Pt(e.get(d),i?i.get(d):void 0);for(var h in l)if(l.hasOwnProperty(h)){var f=e.getModel(["rich",h]);_P(c[h]={},f,o,e,u,t,r,n,!1,!0)}}c&&(a.rich=c);var p=e.get("overflow");p&&(a.overflow=p);var g=e.get("lineOverflow");g&&(a.lineOverflow=g);var b=a,w=e.get("minMargin");if(w!=null)w=Xa(w)?w/2:0,b.margin=[w,w,w,w],b.__marginType=Qp.minMargin;else{var _=e.get("textMargin");_!=null&&(b.margin=rN(_),b.__marginType=Qp.textMargin)}_P(a,e,o,null,null,t,r,n,!0,!1)}function Pve(a){for(var e;a&&a!==a.ecModel;){var t=(a.option||NN).rich;if(t){e=e||{};for(var r=Va(t),n=0;n<r.length;n++){var i=r[n];e[i]=1}}a=a.parentModel}return e}var bP=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],yP=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],wP=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function _P(a,e,t,r,n,i,o,l,c,d){t=!o&&t||NN;var u=i&&i.inheritColor,h=e.getShallow("color"),f=e.getShallow("textBorderColor"),p=Pt(e.getShallow("opacity"),t.opacity);(h==="inherit"||h==="auto")&&(u?h=u:h=null),(f==="inherit"||f==="auto")&&(u?f=u:f=null),l||(h=h||t.color,f=f||t.textBorderColor),h!=null&&(a.fill=h),f!=null&&(a.stroke=f);var g=Pt(e.getShallow("textBorderWidth"),t.textBorderWidth);g!=null&&(a.lineWidth=g);var b=Pt(e.getShallow("textBorderType"),t.textBorderType);b!=null&&(a.lineDash=b);var w=Pt(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);w!=null&&(a.lineDashOffset=w),!o&&p==null&&!d&&(p=i&&i.defaultOpacity),p!=null&&(a.opacity=p),!o&&!l&&a.fill==null&&i.inheritColor&&(a.fill=i.inheritColor);for(var _=0;_<bP.length;_++){var k=bP[_],T=n!==!1&&r?No(e.getShallow(k),r.getShallow(k),t[k]):Pt(e.getShallow(k),t[k]);T!=null&&(a[k]=T)}for(var _=0;_<yP.length;_++){var k=yP[_],T=e.getShallow(k);T!=null&&(a[k]=T)}if(a.verticalAlign==null){var D=e.getShallow("baseline");D!=null&&(a.verticalAlign=D)}if(!c||!i.disableBox){for(var _=0;_<wP.length;_++){var k=wP[_],T=e.getShallow(k);T!=null&&(a[k]=T)}var I=e.getShallow("borderType");I!=null&&(a.borderDash=I),(a.backgroundColor==="auto"||a.backgroundColor==="inherit")&&u&&(a.backgroundColor=u),(a.borderColor==="auto"||a.borderColor==="inherit")&&u&&(a.borderColor=u)}}function QT(a,e){var t=e&&e.getModel("textStyle");return Jo([a.fontStyle||t&&t.getShallow("fontStyle")||"",a.fontWeight||t&&t.getShallow("fontWeight")||"",(a.fontSize||t&&t.getShallow("fontSize")||12)+"px",a.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var Xx=Ea();function l$(a,e,t,r){if(a){var n=Xx(a);n.prevValue=n.value,n.value=t;var i=e.normal;n.valueAnimation=i.get("valueAnimation"),n.valueAnimation&&(n.precision=i.get("precision"),n.defaultInterpolatedText=r,n.statesModels=e)}}function c$(a,e,t,r,n){var i=Xx(a);if(!i.valueAnimation||i.prevValue===i.value)return;var o=i.defaultInterpolatedText,l=Pt(i.interpolatedValue,i.prevValue),c=i.value;function d(u){var h=_W(t,i.precision,l,c,u);i.interpolatedValue=u===1?null:h;var f=n3({labelDataIndex:e,labelFetcher:n,defaultText:o?o(h):h+""},i.statesModels,h);o$(a,f)}a.percent=0,(i.prevValue==null?en:rr)(a,{percent:1},r,e,null,d)}var Qp={minMargin:1,textMargin:2},Bve=["textStyle","color"],Wk=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],$k=new Ja,zve=(function(){function a(){}return a.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(Bve):null)},a.prototype.getFont=function(){return QT({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},a.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<Wk.length;r++)t[Wk[r]]=this.getShallow(Wk[r]);return $k.useStyle(t),$k.update(),$k.getBoundingRect()},a})(),d$=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Fve=b0(d$),Vve=(function(){function a(){}return a.prototype.getLineStyle=function(e){return Fve(this,e)},a})(),u$=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Hve=b0(u$),Uve=(function(){function a(){}return a.prototype.getItemStyle=function(e,t){return Hve(this,e,t)},a})(),za=(function(){function a(e,t,r){this.parentModel=t,this.ecModel=r,this.option=e}return a.prototype.init=function(e,t,r){},a.prototype.mergeOption=function(e,t){_a(this.option,e,!0)},a.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},a.prototype.getShallow=function(e,t){var r=this.option,n=r==null?r:r[e];if(n==null&&!t){var i=this.parentModel;i&&(n=i.getShallow(e))}return n},a.prototype.getModel=function(e,t){var r=e!=null,n=r?this.parsePath(e):null,i=r?this._doGet(n):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(n)),new a(i,t,this.ecModel)},a.prototype.isEmpty=function(){return this.option==null},a.prototype.restoreData=function(){},a.prototype.clone=function(){var e=this.constructor;return new e($t(this.option))},a.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},a.prototype.resolveParentPath=function(e){return e},a.prototype.isAnimationEnabled=function(){if(!Ba.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},a.prototype._doGet=function(e,t){var r=this.option;if(!e)return r;for(var n=0;n<e.length&&!(e[n]&&(r=r&&typeof r=="object"?r[e[n]]:null,r==null));n++);return r==null&&t&&(r=t._doGet(this.resolveParentPath(e),t.parentModel)),r},a})();zT(za);Zme(za);ti(za,Vve);ti(za,Uve);ti(za,tge);ti(za,zve);var Gve=Math.round(Math.random()*10);function Zx(a){return[a||"",Gve++].join("_")}function Wve(a){var e={};a.registerSubTypeDefaulter=function(t,r){var n=uc(t);e[n.main]=r},a.determineSubType=function(t,r){var n=r.type;if(!n){var i=uc(t).main;a.hasSubTypes(t)&&e[i]&&(n=e[i](r))}return n}}function $ve(a,e){a.topologicalTravel=function(i,o,l,c){if(!i.length)return;var d=t(o),u=d.graph,h=d.noEntryList,f={};for(oe(i,function(k){f[k]=!0});h.length;){var p=h.pop(),g=u[p],b=!!f[p];b&&(l.call(c,p,g.originalDeps.slice()),delete f[p]),oe(g.successor,b?_:w)}oe(f,function(){var k="";throw new Error(k)});function w(k){u[k].entryCount--,u[k].entryCount===0&&h.push(k)}function _(k){f[k]=!0,w(k)}};function t(i){var o={},l=[];return oe(i,function(c){var d=r(o,c),u=d.originalDeps=e(c),h=n(u,i);d.entryCount=h.length,d.entryCount===0&&l.push(c),oe(h,function(f){ya(d.predecessor,f)<0&&d.predecessor.push(f);var p=r(o,f);ya(p.successor,f)<0&&p.successor.push(c)})}),{graph:o,noEntryList:l}}function r(i,o){return i[o]||(i[o]={predecessor:[],successor:[]}),i[o]}function n(i,o){var l=[];return oe(i,function(c){ya(o,c)>=0&&l.push(c)}),l}}function Th(a,e){return _a(_a({},a,!0),e,!0)}const Yve={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},qve={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var G2="ZH",JT="EN",dx=JT,Uw={},eM={},h$=Ba.domSupported?(function(){var a=(document.documentElement.lang||navigator.language||navigator.browserLanguage||dx).toUpperCase();return a.indexOf(G2)>-1?G2:dx})():dx;function f$(a,e){a=a.toUpperCase(),eM[a]=new za(e),Uw[a]=e}function Xve(a){if(jt(a)){var e=Uw[a.toUpperCase()]||{};return a===G2||a===JT?$t(e):_a($t(e),$t(Uw[dx]),!1)}else return _a($t(a),$t(Uw[dx]),!1)}function i3(a){return eM[a]}function Zve(){return eM[dx]}f$(JT,Yve);f$(G2,qve);var s3=null;function Kve(a){s3||(s3=a)}function Xn(){return s3}var tM=1e3,aM=tM*60,uv=aM*60,Qo=uv*24,NP=Qo*365,Qve={year:/({yyyy}|{yy})/,month:/({MMMM}|{MMM}|{MM}|{M})/,day:/({dd}|{d})/,hour:/({HH}|{H}|{hh}|{h})/,minute:/({mm}|{m})/,second:/({ss}|{s})/,millisecond:/({SSS}|{S})/},Gw={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}"},Jve="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}",Ty="{yyyy}-{MM}-{dd}",jP={year:"{yyyy}",month:"{yyyy}-{MM}",day:Ty,hour:Ty+" "+Gw.hour,minute:Ty+" "+Gw.minute,second:Ty+" "+Gw.second,millisecond:Jve},go=["year","month","day","hour","minute","second","millisecond"],ebe=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function tbe(a){return!jt(a)&&!Ut(a)?abe(a):a}function abe(a){a=a||{};var e={},t=!0;return oe(go,function(r){t&&(t=a[r]==null)}),oe(go,function(r,n){var i=a[r];e[r]={};for(var o=null,l=n;l>=0;l--){var c=go[l],d=Qt(i)&&!rt(i)?i[c]:i,u=void 0;rt(d)?(u=d.slice(),o=u[0]||""):jt(d)?(o=d,u=[o]):(o==null?o=Gw[r]:Qve[c].test(o)||(o=e[c][c][0]+" "+o),u=[o],t&&(u[1]="{primary|"+o+"}")),e[r][c]=u}}),e}function Au(a,e){return a+="","0000".substr(0,e-a.length)+a}function hv(a){switch(a){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return a}}function rbe(a){return a===hv(a)}function nbe(a){switch(a){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function jN(a,e,t,r){var n=T0(a),i=n[p$(t)](),o=n[rM(t)]()+1,l=Math.floor((o-1)/3)+1,c=n[nM(t)](),d=n["get"+(t?"UTC":"")+"Day"](),u=n[iM(t)](),h=(u-1)%12+1,f=n[sM(t)](),p=n[oM(t)](),g=n[lM(t)](),b=u>=12?"pm":"am",w=b.toUpperCase(),_=r instanceof za?r:i3(r||h$)||Zve(),k=_.getModel("time"),T=k.get("month"),D=k.get("monthAbbr"),I=k.get("dayOfWeek"),O=k.get("dayOfWeekAbbr");return(e||"").replace(/{a}/g,b+"").replace(/{A}/g,w+"").replace(/{yyyy}/g,i+"").replace(/{yy}/g,Au(i%100+"",2)).replace(/{Q}/g,l+"").replace(/{MMMM}/g,T[o-1]).replace(/{MMM}/g,D[o-1]).replace(/{MM}/g,Au(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,Au(c,2)).replace(/{d}/g,c+"").replace(/{eeee}/g,I[d]).replace(/{ee}/g,O[d]).replace(/{e}/g,d+"").replace(/{HH}/g,Au(u,2)).replace(/{H}/g,u+"").replace(/{hh}/g,Au(h+"",2)).replace(/{h}/g,h+"").replace(/{mm}/g,Au(f,2)).replace(/{m}/g,f+"").replace(/{ss}/g,Au(p,2)).replace(/{s}/g,p+"").replace(/{SSS}/g,Au(g,3)).replace(/{S}/g,g+"")}function ibe(a,e,t,r,n){var i=null;if(jt(t))i=t;else if(Ut(t)){var o={time:a.time,level:a.time.level},l=Xn();l&&l.makeAxisLabelFormatterParamBreak(o,a.break),i=t(a.value,e,o)}else{var c=a.time;if(c){var d=t[c.lowerTimeUnit][c.upperTimeUnit];i=d[Math.min(c.level,d.length-1)]||""}else{var u=Jp(a.value,n);i=t[u][u][0]}}return jN(new Date(a.value),i,n,r)}function Jp(a,e){var t=T0(a),r=t[rM(e)]()+1,n=t[nM(e)](),i=t[iM(e)](),o=t[sM(e)](),l=t[oM(e)](),c=t[lM(e)](),d=c===0,u=d&&l===0,h=u&&o===0,f=h&&i===0,p=f&&n===1,g=p&&r===1;return g?"year":p?"month":f?"day":h?"hour":u?"minute":d?"second":"millisecond"}function o3(a,e,t){switch(e){case"year":a[x$(t)](0);case"month":a[m$(t)](1);case"day":a[g$(t)](0);case"hour":a[v$(t)](0);case"minute":a[b$(t)](0);case"second":a[y$(t)](0)}return a}function p$(a){return a?"getUTCFullYear":"getFullYear"}function rM(a){return a?"getUTCMonth":"getMonth"}function nM(a){return a?"getUTCDate":"getDate"}function iM(a){return a?"getUTCHours":"getHours"}function sM(a){return a?"getUTCMinutes":"getMinutes"}function oM(a){return a?"getUTCSeconds":"getSeconds"}function lM(a){return a?"getUTCMilliseconds":"getMilliseconds"}function sbe(a){return a?"setUTCFullYear":"setFullYear"}function x$(a){return a?"setUTCMonth":"setMonth"}function m$(a){return a?"setUTCDate":"setDate"}function g$(a){return a?"setUTCHours":"setHours"}function v$(a){return a?"setUTCMinutes":"setMinutes"}function b$(a){return a?"setUTCSeconds":"setSeconds"}function y$(a){return a?"setUTCMilliseconds":"setMilliseconds"}function w$(a){if(!fW(a))return jt(a)?a:"-";var e=(a+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function _$(a,e){return a=(a||"").toLowerCase().replace(/-(.)/g,function(t,r){return r.toUpperCase()}),e&&a&&(a=a.charAt(0).toUpperCase()+a.slice(1)),a}var Ib=rN;function l3(a,e,t){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function n(u){return u&&Jo(u)?u:"-"}function i(u){return!!(u!=null&&!isNaN(u)&&isFinite(u))}var o=e==="time",l=a instanceof Date;if(o||l){var c=o?T0(a):a;if(isNaN(+c)){if(l)return"-"}else return jN(c,r,t)}if(e==="ordinal")return b4(a)?n(a):Xa(a)&&i(a)?a+"":"-";var d=Ld(a);return i(d)?w$(d):b4(a)?n(a):typeof a=="boolean"?a+"":"-"}var SP=["a","b","c","d","e","f","g"],Yk=function(a,e){return"{"+a+(e??"")+"}"};function N$(a,e,t){rt(e)||(e=[e]);var r=e.length;if(!r)return"";for(var n=e[0].$vars||[],i=0;i<n.length;i++){var o=SP[i];a=a.replace(Yk(o),Yk(o,0))}for(var l=0;l<r;l++)for(var c=0;c<n.length;c++){var d=e[l][n[c]];a=a.replace(Yk(SP[c],l),t?_s(d):d)}return a}function obe(a,e,t){return oe(e,function(r,n){a=a.replace("{"+n+"}",r)}),a}function lbe(a,e){var t=jt(a)?{color:a,extraCssText:e}:a||{},r=t.color,n=t.type;e=t.extraCssText;var i=t.renderMode||"html";if(!r)return"";if(i==="html")return n==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+_s(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+_s(r)+";"+(e||"")+'"></span>';var o=t.markerId||"markerX";return{renderMode:i,content:"{"+o+"|}  ",style:n==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function N0(a,e){return e=e||"transparent",jt(a)?a:Qt(a)&&a.colorStops&&(a.colorStops[0]||{}).color||e}function W2(a,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=a}else window.open(a,e)}var Ww={},qk={},Rb=(function(){function a(){this._normalMasterList=[],this._nonSeriesBoxMasterList=[]}return a.prototype.create=function(e,t){this._nonSeriesBoxMasterList=r(Ww),this._normalMasterList=r(qk);function r(n,i){var o=[];return oe(n,function(l,c){var d=l.create(e,t);o=o.concat(d||[])}),o}},a.prototype.update=function(e,t){oe(this._normalMasterList,function(r){r.update&&r.update(e,t)})},a.prototype.getCoordinateSystems=function(){return this._normalMasterList.concat(this._nonSeriesBoxMasterList)},a.register=function(e,t){if(e==="matrix"||e==="calendar"){Ww[e]=t;return}qk[e]=t},a.get=function(e){return qk[e]||Ww[e]},a})();function cbe(a){return!!Ww[a]}var c3={coord:1,coord2:2};function dbe(a){j$.set(a.fullType,{getCoord2:void 0}).getCoord2=a.getCoord2}var j$=Rt();function ube(a){var e=a.getShallow("coord",!0),t=c3.coord;if(e==null){var r=j$.get(a.type);r&&r.getCoord2&&(t=c3.coord2,e=r.getCoord2(a))}return{coord:e,from:t}}var oc={none:0,dataCoordSys:1,boxCoordSys:2};function S$(a,e){var t=a.getShallow("coordinateSystem"),r=a.getShallow("coordinateSystemUsage",!0),n=oc.none;if(t){var i=a.mainType==="series";r==null&&(r=i?"data":"box"),r==="data"?(n=oc.dataCoordSys,i||(n=oc.none)):r==="box"&&(n=oc.boxCoordSys,!i&&!cbe(t)&&(n=oc.none))}return{coordSysType:t,kind:n}}function Lb(a){var e=a.targetModel,t=a.coordSysType,r=a.coordSysProvider,n=a.isDefaultDataCoordSys;a.allowNotFound;var i=S$(e),o=i.kind,l=i.coordSysType;if(n&&o!==oc.dataCoordSys&&(o=oc.dataCoordSys,l=t),o===oc.none||l!==t)return!1;var c=r(t,e);return c?(o===oc.dataCoordSys?e.coordinateSystem=c:e.boxCoordinateSystem=c,!0):!1}var k$=function(a,e){var t=e.getReferringComponents(a,yn).models[0];return t&&t.coordinateSystem},$w=oe,C$=["left","right","top","bottom","width","height"],Yf=[["width","left","right"],["height","top","bottom"]];function cM(a,e,t,r,n){var i=0,o=0;r==null&&(r=1/0),n==null&&(n=1/0);var l=0;e.eachChild(function(c,d){var u=c.getBoundingRect(),h=e.childAt(d+1),f=h&&h.getBoundingRect(),p,g;if(a==="horizontal"){var b=u.width+(f?-f.x+u.x:0);p=i+b,p>r||c.newline?(i=0,p=b,o+=l+t,l=u.height):l=Math.max(l,u.height)}else{var w=u.height+(f?-f.y+u.y:0);g=o+w,g>n||c.newline?(i+=l+t,o=0,g=w,l=u.width):l=Math.max(l,u.width)}c.newline||(c.x=i,c.y=o,c.markRedraw(),a==="horizontal"?i=p+t:o=g+t)})}var l0=cM;va(cM,"vertical");va(cM,"horizontal");function A$(a,e){return{left:a.getShallow("left",e),top:a.getShallow("top",e),right:a.getShallow("right",e),bottom:a.getShallow("bottom",e),width:a.getShallow("width",e),height:a.getShallow("height",e)}}function hbe(a,e){var t=pi(a,e,{enableLayoutOnlyByCenter:!0}),r=a.getBoxLayoutParams(),n,i;if(t.type===Wg.point)i=t.refPoint,n=ln(r,{width:e.getWidth(),height:e.getHeight()});else{var o=a.get("center"),l=rt(o)?o:[o,o];n=ln(r,t.refContainer),i=t.boxCoordFrom===c3.coord2?t.refPoint:[_t(l[0],n.width)+n.x,_t(l[1],n.height)+n.y]}return{viewRect:n,center:i}}function T$(a,e){var t=hbe(a,e),r=t.viewRect,n=t.center,i=a.get("radius");rt(i)||(i=[0,i]);var o=_t(r.width,e.getWidth()),l=_t(r.height,e.getHeight()),c=Math.min(o,l),d=_t(i[0],c/2),u=_t(i[1],c/2);return{cx:n[0],cy:n[1],r0:d,r:u,viewRect:r}}function ln(a,e,t){t=Ib(t||0);var r=e.width,n=e.height,i=_t(a.left,r),o=_t(a.top,n),l=_t(a.right,r),c=_t(a.bottom,n),d=_t(a.width,r),u=_t(a.height,n),h=t[2]+t[0],f=t[1]+t[3],p=a.aspect;switch(isNaN(d)&&(d=r-l-f-i),isNaN(u)&&(u=n-c-h-o),p!=null&&(isNaN(d)&&isNaN(u)&&(p>r/n?d=r*.8:u=n*.8),isNaN(d)&&(d=p*u),isNaN(u)&&(u=d/p)),isNaN(i)&&(i=r-l-d-f),isNaN(o)&&(o=n-c-u-h),a.left||a.right){case"center":i=r/2-d/2-t[3];break;case"right":i=r-d-f;break}switch(a.top||a.bottom){case"middle":case"center":o=n/2-u/2-t[0];break;case"bottom":o=n-u-h;break}i=i||0,o=o||0,isNaN(d)&&(d=r-f-i-(l||0)),isNaN(u)&&(u=n-h-o-(c||0));var g=new Jt((e.x||0)+i+t[3],(e.y||0)+o+t[0],d,u);return g.margin=t,g}function M$(a,e,t){var r=a.getShallow("preserveAspect",!0);if(!r)return e;var n=e.width/e.height;if(Math.abs(Math.atan(t)-Math.atan(n))<1e-9)return e;var i=a.getShallow("preserveAspectAlign",!0),o=a.getShallow("preserveAspectVerticalAlign",!0),l={width:e.width,height:e.height},c=r==="cover";return n>t&&!c||n<t&&c?(l.width=e.height*t,i==="left"?l.left=0:i==="right"?l.right=0:l.left="center"):(l.height=e.width/t,o==="top"?l.top=0:o==="bottom"?l.bottom=0:l.top="middle"),ln(l,e)}var Wg={rect:1,point:2};function pi(a,e,t){var r,n,i,o=a.boxCoordinateSystem,l;if(o){var c=ube(a),d=c.coord,u=c.from;if(o.dataToLayout){i=Wg.rect,l=u;var h=o.dataToLayout(d);r=h.contentRect||h.rect}else t&&t.enableLayoutOnlyByCenter&&o.dataToPoint&&(i=Wg.point,l=u,n=o.dataToPoint(d))}return i==null&&(i=Wg.rect),i===Wg.rect&&(r||(r={x:0,y:0,width:e.getWidth(),height:e.getHeight()}),n=[r.x+r.width/2,r.y+r.height/2]),{type:i,refContainer:r,refPoint:n,boxCoordFrom:l}}function SN(a,e,t,r,n,i){var o=!n||!n.hv||n.hv[0],l=!n||!n.hv||n.hv[1],c=n&&n.boundingMode||"all";if(i=i||a,i.x=a.x,i.y=a.y,!o&&!l)return!1;var d;if(c==="raw")d=a.type==="group"?new Jt(0,0,+e.width||0,+e.height||0):a.getBoundingRect();else if(d=a.getBoundingRect(),a.needLocalTransform()){var u=a.getLocalTransform();d=d.clone(),d.applyTransform(u)}var h=ln(Kt({width:d.width,height:d.height},e),t,r),f=o?h.x-d.x:0,p=l?h.y-d.y:0;return c==="raw"?(i.x=f,i.y=p):(i.x+=f,i.y+=p),i===a&&a.markRedraw(),!0}function fbe(a,e){return a[Yf[e][0]]!=null||a[Yf[e][1]]!=null&&a[Yf[e][2]]!=null}function qv(a){var e=a.layoutMode||a.constructor.layoutMode;return Qt(e)?e:e?{type:e}:null}function Mc(a,e,t){var r=t&&t.ignoreSize;!rt(r)&&(r=[r,r]);var n=o(Yf[0],0),i=o(Yf[1],1);c(Yf[0],a,n),c(Yf[1],a,i);function o(d,u){var h={},f=0,p={},g=0,b=2;if($w(d,function(k){p[k]=a[k]}),$w(d,function(k){Dt(e,k)&&(h[k]=p[k]=e[k]),l(h,k)&&f++,l(p,k)&&g++}),r[u])return l(e,d[1])?p[d[2]]=null:l(e,d[2])&&(p[d[1]]=null),p;if(g===b||!f)return p;if(f>=b)return h;for(var w=0;w<d.length;w++){var _=d[w];if(!Dt(h,_)&&Dt(a,_)){h[_]=a[_];break}}return h}function l(d,u){return d[u]!=null&&d[u]!=="auto"}function c(d,u,h){$w(d,function(f){u[f]=h[f]})}}function E0(a){return E$({},a)}function E$(a,e){return e&&a&&$w(C$,function(t){Dt(e,t)&&(a[t]=e[t])}),a}var pbe=Ea(),Oa=(function(a){Le(e,a);function e(t,r,n){var i=a.call(this,t,r,n)||this;return i.uid=Zx("ec_cpt_model"),i}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n)},e.prototype.mergeDefaultAndTheme=function(t,r){var n=qv(this),i=n?E0(t):{},o=r.getTheme();_a(t,o.get(this.mainType)),_a(t,this.getDefaultOption()),n&&Mc(t,i,n)},e.prototype.mergeOption=function(t,r){_a(this.option,t,!0);var n=qv(this);n&&Mc(this.option,t,n)},e.prototype.optionUpdated=function(t,r){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!Yme(t))return t.defaultOption;var r=pbe(this);if(!r.defaultOption){for(var n=[],i=t;i;){var o=i.prototype.defaultOption;o&&n.push(o),i=i.superClass}for(var l={},c=n.length-1;c>=0;c--)l=_a(l,n[c],!0);r.defaultOption=l}return r.defaultOption},e.prototype.getReferringComponents=function(t,r){var n=t+"Index",i=t+"Id";return Wx(this.ecModel,t,{index:this.get(n,!0),id:this.get(i,!0)},r)},e.prototype.getBoxLayoutParams=function(){return A$(this,!1)},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=(function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0})(),e})(za);jW(Oa,za);dN(Oa);Wve(Oa);$ve(Oa,xbe);function xbe(a){var e=[];return oe(Oa.getClassesByMainType(a),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=it(e,function(t){return uc(t).main}),a!=="dataset"&&ya(e,"dataset")<=0&&e.unshift("dataset"),e}var Fe={color:{},darkColor:{},size:{}},In=Fe.color={theme:["#5070dd","#b6d634","#505372","#ff994d","#0ca8df","#ffd10a","#fb628b","#785db0","#3fbe95"],neutral00:"#fff",neutral05:"#f4f7fd",neutral10:"#e8ebf0",neutral15:"#dbdee4",neutral20:"#cfd2d7",neutral25:"#c3c5cb",neutral30:"#b7b9be",neutral35:"#aaacb2",neutral40:"#9ea0a5",neutral45:"#929399",neutral50:"#86878c",neutral55:"#797b7f",neutral60:"#6d6e73",neutral65:"#616266",neutral70:"#54555a",neutral75:"#48494d",neutral80:"#3c3c41",neutral85:"#303034",neutral90:"#232328",neutral95:"#17171b",neutral99:"#000",accent05:"#eff1f9",accent10:"#e0e4f2",accent15:"#d0d6ec",accent20:"#c0c9e6",accent25:"#b1bbdf",accent30:"#a1aed9",accent35:"#91a0d3",accent40:"#8292cc",accent45:"#7285c6",accent50:"#6578ba",accent55:"#5c6da9",accent60:"#536298",accent65:"#4a5787",accent70:"#404c76",accent75:"#374165",accent80:"#2e3654",accent85:"#252b43",accent90:"#1b2032",accent95:"#121521",transparent:"rgba(0,0,0,0)",highlight:"rgba(255,231,130,0.8)"};Je(In,{primary:In.neutral80,secondary:In.neutral70,tertiary:In.neutral60,quaternary:In.neutral50,disabled:In.neutral20,border:In.neutral30,borderTint:In.neutral20,borderShade:In.neutral40,background:In.neutral05,backgroundTint:"rgba(234,237,245,0.5)",backgroundTransparent:"rgba(255,255,255,0)",backgroundShade:In.neutral10,shadow:"rgba(0,0,0,0.2)",shadowTint:"rgba(129,130,136,0.2)",axisLine:In.neutral70,axisLineTint:In.neutral40,axisTick:In.neutral70,axisTickMinor:In.neutral60,axisLabel:In.neutral70,axisSplitLine:In.neutral15,axisMinorSplitLine:In.neutral05});for(var bf in In)if(In.hasOwnProperty(bf)){var kP=In[bf];bf==="theme"?Fe.darkColor.theme=In.theme.slice():bf==="highlight"?Fe.darkColor.highlight="rgba(255,231,130,0.4)":bf.indexOf("accent")===0?Fe.darkColor[bf]=oh(kP,null,function(a){return a*.5},function(a){return Math.min(1,1.3-a)}):Fe.darkColor[bf]=oh(kP,null,function(a){return a*.9},function(a){return 1-Math.pow(a,1.5)})}Fe.size={xxs:2,xs:5,s:10,m:15,l:20,xl:30,xxl:40,xxxl:50};var D$="";typeof navigator<"u"&&(D$=navigator.platform||"");var wp="rgba(0, 0, 0, 0.2)",I$=Fe.color.theme[0],mbe=oh(I$,null,null,.9);const gbe={darkMode:"auto",colorBy:"series",color:Fe.color.theme,gradientColor:[mbe,I$],aria:{decal:{decals:[{color:wp,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:wp,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:wp,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:wp,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:wp,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:wp,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:D$.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var R$=Rt(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),Ao="original",Ri="arrayRows",To="objectRows",Rl="keyedColumns",ch="typedArray",L$="unknown",Sl="column",D0="row",Hi={Must:1,Might:2,Not:3},O$=Ea();function vbe(a){O$(a).datasetMap=Rt()}function P$(a,e,t){var r={},n=uM(e);if(!n||!a)return r;var i=[],o=[],l=e.ecModel,c=O$(l).datasetMap,d=n.uid+"_"+t.seriesLayoutBy,u,h;a=a.slice(),oe(a,function(b,w){var _=Qt(b)?b:a[w]={name:b};_.type==="ordinal"&&u==null&&(u=w,h=g(_)),r[_.name]=[]});var f=c.get(d)||c.set(d,{categoryWayDim:h,valueWayDim:0});oe(a,function(b,w){var _=b.name,k=g(b);if(u==null){var T=f.valueWayDim;p(r[_],T,k),p(o,T,k),f.valueWayDim+=k}else if(u===w)p(r[_],0,k),p(i,0,k);else{var T=f.categoryWayDim;p(r[_],T,k),p(o,T,k),f.categoryWayDim+=k}});function p(b,w,_){for(var k=0;k<_;k++)b.push(w+k)}function g(b){var w=b.dimsDef;return w?w.length:1}return i.length&&(r.itemName=i),o.length&&(r.seriesName=o),r}function dM(a,e,t){var r={},n=uM(a);if(!n)return r;var i=e.sourceFormat,o=e.dimensionsDefine,l;(i===To||i===Rl)&&oe(o,function(u,h){(Qt(u)?u.name:u)==="name"&&(l=h)});var c=(function(){for(var u={},h={},f=[],p=0,g=Math.min(5,t);p<g;p++){var b=z$(e.data,i,e.seriesLayoutBy,o,e.startIndex,p);f.push(b);var w=b===Hi.Not;if(w&&u.v==null&&p!==l&&(u.v=p),(u.n==null||u.n===u.v||!w&&f[u.n]===Hi.Not)&&(u.n=p),_(u)&&f[u.n]!==Hi.Not)return u;w||(b===Hi.Might&&h.v==null&&p!==l&&(h.v=p),(h.n==null||h.n===h.v)&&(h.n=p))}function _(k){return k.v!=null&&k.n!=null}return _(u)?u:_(h)?h:null})();if(c){r.value=[c.v];var d=l??c.n;r.itemName=[d],r.seriesName=[d]}return r}function uM(a){var e=a.get("data",!0);if(!e)return Wx(a.ecModel,"dataset",{index:a.get("datasetIndex",!0),id:a.get("datasetId",!0)},yn).models[0]}function bbe(a){return!a.get("transform",!0)&&!a.get("fromTransformResult",!0)?[]:Wx(a.ecModel,"dataset",{index:a.get("fromDatasetIndex",!0),id:a.get("fromDatasetId",!0)},yn).models}function B$(a,e){return z$(a.data,a.sourceFormat,a.seriesLayoutBy,a.dimensionsDefine,a.startIndex,e)}function z$(a,e,t,r,n,i){var o,l=5;if(Zs(a))return Hi.Not;var c,d;if(r){var u=r[i];Qt(u)?(c=u.name,d=u.type):jt(u)&&(c=u)}if(d!=null)return d==="ordinal"?Hi.Must:Hi.Not;if(e===Ri){var h=a;if(t===D0){for(var f=h[i],p=0;p<(f||[]).length&&p<l;p++)if((o=D(f[n+p]))!=null)return o}else for(var p=0;p<h.length&&p<l;p++){var g=h[n+p];if(g&&(o=D(g[i]))!=null)return o}}else if(e===To){var b=a;if(!c)return Hi.Not;for(var p=0;p<b.length&&p<l;p++){var w=b[p];if(w&&(o=D(w[c]))!=null)return o}}else if(e===Rl){var _=a;if(!c)return Hi.Not;var f=_[c];if(!f||Zs(f))return Hi.Not;for(var p=0;p<f.length&&p<l;p++)if((o=D(f[p]))!=null)return o}else if(e===Ao)for(var k=a,p=0;p<k.length&&p<l;p++){var w=k[p],T=Gx(w);if(!rt(T))return Hi.Not;if((o=D(T[i]))!=null)return o}function D(I){var O=jt(I);if(I!=null&&Number.isFinite(Number(I))&&I!=="")return O?Hi.Might:Hi.Not;if(O&&I!=="-")return Hi.Must}return Hi.Not}var d3=Rt();function ybe(a,e){cs(d3.get(a)==null&&e),d3.set(a,e)}function wbe(a,e,t){var r=d3.get(e);if(!r)return t;var n=r(a);return n?t.concat(n):t}var CP=Ea(),_be=Ea(),hM=(function(){function a(){}return a.prototype.getColorFromPalette=function(e,t,r){var n=Rr(this.get("color",!0)),i=this.get("colorLayer",!0);return F$(this,CP,n,i,e,t,r)},a.prototype.clearColorPalette=function(){jbe(this,CP)},a})();function u3(a,e,t,r){var n=Rr(a.get(["aria","decal","decals"]));return F$(a,_be,n,null,e,t,r)}function Nbe(a,e){for(var t=a.length,r=0;r<t;r++)if(a[r].length>e)return a[r];return a[t-1]}function F$(a,e,t,r,n,i,o){i=i||a;var l=e(i),c=l.paletteIdx||0,d=l.paletteNameMap=l.paletteNameMap||{};if(d.hasOwnProperty(n))return d[n];var u=o==null||!r?t:Nbe(r,o);if(u=u||t,!(!u||!u.length)){var h=u[c];return n&&(d[n]=h),l.paletteIdx=(c+1)%u.length,h}}function jbe(a,e){e(a).paletteIdx=0,e(a).paletteNameMap={}}var My,Jm,AP,TP="\0_ec_inner",Sbe=1,fM=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.init=function(t,r,n,i,o,l){i=i||{},this.option=null,this._theme=new za(i),this._locale=new za(o),this._optionManager=l},e.prototype.setOption=function(t,r,n){var i=DP(r);this._optionManager.setOption(t,n,i),this._resetOption(null,i)},e.prototype.resetOption=function(t,r){return this._resetOption(t,DP(r))},e.prototype._resetOption=function(t,r){var n=!1,i=this._optionManager;if(!t||t==="recreate"){var o=i.mountOption(t==="recreate");!this.option||t==="recreate"?AP(this,o):(this.restoreData(),this._mergeOption(o,r)),n=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var l=i.getTimelineOption(this);l&&(n=!0,this._mergeOption(l,r))}if(!t||t==="recreate"||t==="media"){var c=i.getMediaOption(this);c.length&&oe(c,function(d){n=!0,this._mergeOption(d,r)},this)}return n},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,r){var n=this.option,i=this._componentsMap,o=this._componentsCount,l=[],c=Rt(),d=r&&r.replaceMergeMainTypeMap;vbe(this),oe(t,function(h,f){h!=null&&(Oa.hasClass(f)?f&&(l.push(f),c.set(f,!0)):n[f]=n[f]==null?$t(h):_a(n[f],h,!0))}),d&&d.each(function(h,f){Oa.hasClass(f)&&!c.get(f)&&(l.push(f),c.set(f,!0))}),Oa.topologicalTravel(l,Oa.getAllClassMainTypes(),u,this);function u(h){var f=wbe(this,h,Rr(t[h])),p=i.get(h),g=p?d&&d.get(h)?"replaceMerge":"normalMerge":"replaceAll",b=bW(p,f,g);Bme(b,h,Oa),n[h]=null,i.set(h,null),o.set(h,0);var w=[],_=[],k=0,T;oe(b,function(D,I){var O=D.existing,P=D.newOption;if(!P)O&&(O.mergeOption({},this),O.optionUpdated({},!1));else{var V=h==="series",G=Oa.getClass(h,D.keyInfo.subType,!V);if(!G)return;if(h==="tooltip"){if(T)return;T=!0}if(O&&O.constructor===G)O.name=D.keyInfo.name,O.mergeOption(P,this),O.optionUpdated(P,!1);else{var Q=Je({componentIndex:I},D.keyInfo);O=new G(P,this,this,Q),Je(O,Q),D.brandNew&&(O.__requireNewView=!0),O.init(P,this,this),O.optionUpdated(null,!0)}}O?(w.push(O.option),_.push(O),k++):(w.push(void 0),_.push(void 0))},this),n[h]=w,i.set(h,_),o.set(h,k),h==="series"&&My(this)}this._seriesIndices||My(this)},e.prototype.getOption=function(){var t=$t(this.option);return oe(t,function(r,n){if(Oa.hasClass(n)){for(var i=Rr(r),o=i.length,l=!1,c=o-1;c>=0;c--)i[c]&&!Uv(i[c])?l=!0:(i[c]=null,!l&&o--);i.length=o,t[n]=i}}),delete t[TP],t},e.prototype.setTheme=function(t){this._theme=new za(t),this._resetOption("recreate",null)},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,r){var n=this._componentsMap.get(t);if(n){var i=n[r||0];if(i)return i;if(r==null){for(var o=0;o<n.length;o++)if(n[o])return n[o]}}},e.prototype.queryComponents=function(t){var r=t.mainType;if(!r)return[];var n=t.index,i=t.id,o=t.name,l=this._componentsMap.get(r);if(!l||!l.length)return[];var c;return n!=null?(c=[],oe(Rr(n),function(d){l[d]&&c.push(l[d])})):i!=null?c=MP("id",i,l):o!=null?c=MP("name",o,l):c=hr(l,function(d){return!!d}),EP(c,t)},e.prototype.findComponents=function(t){var r=t.query,n=t.mainType,i=l(r),o=i?this.queryComponents(i):hr(this._componentsMap.get(n),function(d){return!!d});return c(EP(o,t));function l(d){var u=n+"Index",h=n+"Id",f=n+"Name";return d&&(d[u]!=null||d[h]!=null||d[f]!=null)?{mainType:n,index:d[u],id:d[h],name:d[f]}:null}function c(d){return t.filter?hr(d,t.filter):d}},e.prototype.eachComponent=function(t,r,n){var i=this._componentsMap;if(Ut(t)){var o=r,l=t;i.each(function(h,f){for(var p=0;h&&p<h.length;p++){var g=h[p];g&&l.call(o,f,g,g.componentIndex)}})}else for(var c=jt(t)?i.get(t):Qt(t)?this.findComponents(t):null,d=0;c&&d<c.length;d++){var u=c[d];u&&r.call(n,u,u.componentIndex)}},e.prototype.getSeriesByName=function(t){var r=ui(t,null);return hr(this._componentsMap.get("series"),function(n){return!!n&&r!=null&&n.name===r})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return hr(this._componentsMap.get("series"),function(r){return!!r&&r.subType===t})},e.prototype.getSeries=function(){return hr(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,r){Jm(this),oe(this._seriesIndices,function(n){var i=this._componentsMap.get("series")[n];t.call(r,i,n)},this)},e.prototype.eachRawSeries=function(t,r){oe(this._componentsMap.get("series"),function(n){n&&t.call(r,n,n.componentIndex)})},e.prototype.eachSeriesByType=function(t,r,n){Jm(this),oe(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];o.subType===t&&r.call(n,o,i)},this)},e.prototype.eachRawSeriesByType=function(t,r,n){return oe(this.getSeriesByType(t),r,n)},e.prototype.isSeriesFiltered=function(t){return Jm(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,r){Jm(this);var n=[];oe(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];t.call(r,o,i)&&n.push(i)},this),this._seriesIndices=n,this._seriesIndicesMap=Rt(n)},e.prototype.restoreData=function(t){My(this);var r=this._componentsMap,n=[];r.each(function(i,o){Oa.hasClass(o)&&n.push(o)}),Oa.topologicalTravel(n,Oa.getAllClassMainTypes(),function(i){oe(r.get(i),function(o){o&&(i!=="series"||!kbe(o,t))&&o.restoreData()})})},e.internalField=(function(){My=function(t){var r=t._seriesIndices=[];oe(t._componentsMap.get("series"),function(n){n&&r.push(n.componentIndex)}),t._seriesIndicesMap=Rt(r)},Jm=function(t){},AP=function(t,r){t.option={},t.option[TP]=Sbe,t._componentsMap=Rt({series:[]}),t._componentsCount=Rt();var n=r.aria;Qt(n)&&n.enabled==null&&(n.enabled=!0),Cbe(r,t._theme.option),_a(r,gbe,!1),t._mergeOption(r,null)}})(),e})(za);function kbe(a,e){if(e){var t=e.seriesIndex,r=e.seriesId,n=e.seriesName;return t!=null&&a.componentIndex!==t||r!=null&&a.id!==r||n!=null&&a.name!==n}}function Cbe(a,e){var t=a.color&&!a.colorLayer;oe(e,function(r,n){n==="colorLayer"&&t||n==="color"&&a.color||Oa.hasClass(n)||(typeof r=="object"?a[n]=a[n]?_a(a[n],r,!1):$t(r):a[n]==null&&(a[n]=r))})}function MP(a,e,t){if(rt(e)){var r=Rt();return oe(e,function(i){if(i!=null){var o=ui(i,null);o!=null&&r.set(i,!0)}}),hr(t,function(i){return i&&r.get(i[a])})}else{var n=ui(e,null);return hr(t,function(i){return i&&n!=null&&i[a]===n})}}function EP(a,e){return e.hasOwnProperty("subType")?hr(a,function(t){return t&&t.subType===e.subType}):a}function DP(a){var e=Rt();return a&&oe(Rr(a.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}ti(fM,hM);var Abe=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],V$=(function(){function a(e){oe(Abe,function(t){this[t]=St(e[t],e)},this)}return a})(),Tbe=/^(min|max)?(.+)$/,Mbe=(function(){function a(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return a.prototype.setOption=function(e,t,r){e&&(oe(Rr(e.series),function(o){o&&o.data&&Zs(o.data)&&k2(o.data)}),oe(Rr(e.dataset),function(o){o&&o.source&&Zs(o.source)&&k2(o.source)})),e=$t(e);var n=this._optionBackup,i=Ebe(e,t,!n);this._newBaseOption=i.baseOption,n?(i.timelineOptions.length&&(n.timelineOptions=i.timelineOptions),i.mediaList.length&&(n.mediaList=i.mediaList),i.mediaDefault&&(n.mediaDefault=i.mediaDefault)):this._optionBackup=i},a.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],$t(e?t.baseOption:this._newBaseOption)},a.prototype.getTimelineOption=function(e){var t,r=this._timelineOptions;if(r.length){var n=e.getComponent("timeline");n&&(t=$t(r[n.getCurrentIndex()]))}return t},a.prototype.getMediaOption=function(e){var t=this._api.getWidth(),r=this._api.getHeight(),n=this._mediaList,i=this._mediaDefault,o=[],l=[];if(!n.length&&!i)return l;for(var c=0,d=n.length;c<d;c++)Dbe(n[c].query,t,r)&&o.push(c);return!o.length&&i&&(o=[-1]),o.length&&!Rbe(o,this._currentMediaIndices)&&(l=it(o,function(u){return $t(u===-1?i.option:n[u].option)})),this._currentMediaIndices=o,l},a})();function Ebe(a,e,t){var r=[],n,i,o=a.baseOption,l=a.timeline,c=a.options,d=a.media,u=!!a.media,h=!!(c||l||o&&o.timeline);o?(i=o,i.timeline||(i.timeline=l)):((h||u)&&(a.options=a.media=null),i=a),u&&rt(d)&&oe(d,function(p){p&&p.option&&(p.query?r.push(p):n||(n=p))}),f(i),oe(c,function(p){return f(p)}),oe(r,function(p){return f(p.option)});function f(p){oe(e,function(g){g(p,t)})}return{baseOption:i,timelineOptions:c||[],mediaDefault:n,mediaList:r}}function Dbe(a,e,t){var r={width:e,height:t,aspectratio:e/t},n=!0;return oe(a,function(i,o){var l=o.match(Tbe);if(!(!l||!l[1]||!l[2])){var c=l[1],d=l[2].toLowerCase();Ibe(r[d],i,c)||(n=!1)}}),n}function Ibe(a,e,t){return t==="min"?a>=e:t==="max"?a<=e:a===e}function Rbe(a,e){return a.join(",")===e.join(",")}var pl=oe,Xv=Qt,IP=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Xk(a){var e=a&&a.itemStyle;if(e)for(var t=0,r=IP.length;t<r;t++){var n=IP[t],i=e.normal,o=e.emphasis;i&&i[n]&&(a[n]=a[n]||{},a[n].normal?_a(a[n].normal,i[n]):a[n].normal=i[n],i[n]=null),o&&o[n]&&(a[n]=a[n]||{},a[n].emphasis?_a(a[n].emphasis,o[n]):a[n].emphasis=o[n],o[n]=null)}}function as(a,e,t){if(a&&a[e]&&(a[e].normal||a[e].emphasis)){var r=a[e].normal,n=a[e].emphasis;r&&(t?(a[e].normal=a[e].emphasis=null,Kt(a[e],r)):a[e]=r),n&&(a.emphasis=a.emphasis||{},a.emphasis[e]=n,n.focus&&(a.emphasis.focus=n.focus),n.blurScope&&(a.emphasis.blurScope=n.blurScope))}}function $g(a){as(a,"itemStyle"),as(a,"lineStyle"),as(a,"areaStyle"),as(a,"label"),as(a,"labelLine"),as(a,"upperLabel"),as(a,"edgeLabel")}function Wn(a,e){var t=Xv(a)&&a[e],r=Xv(t)&&t.textStyle;if(r)for(var n=0,i=OO.length;n<i;n++){var o=OO[n];r.hasOwnProperty(o)&&(t[o]=r[o])}}function Wo(a){a&&($g(a),Wn(a,"label"),a.emphasis&&Wn(a.emphasis,"label"))}function Lbe(a){if(Xv(a)){Xk(a),$g(a),Wn(a,"label"),Wn(a,"upperLabel"),Wn(a,"edgeLabel"),a.emphasis&&(Wn(a.emphasis,"label"),Wn(a.emphasis,"upperLabel"),Wn(a.emphasis,"edgeLabel"));var e=a.markPoint;e&&(Xk(e),Wo(e));var t=a.markLine;t&&(Xk(t),Wo(t));var r=a.markArea;r&&Wo(r);var n=a.data;if(a.type==="graph"){n=n||a.nodes;var i=a.links||a.edges;if(i&&!Zs(i))for(var o=0;o<i.length;o++)Wo(i[o]);oe(a.categories,function(d){$g(d)})}if(n&&!Zs(n))for(var o=0;o<n.length;o++)Wo(n[o]);if(e=a.markPoint,e&&e.data)for(var l=e.data,o=0;o<l.length;o++)Wo(l[o]);if(t=a.markLine,t&&t.data)for(var c=t.data,o=0;o<c.length;o++)rt(c[o])?(Wo(c[o][0]),Wo(c[o][1])):Wo(c[o]);a.type==="gauge"?(Wn(a,"axisLabel"),Wn(a,"title"),Wn(a,"detail")):a.type==="treemap"?(as(a.breadcrumb,"itemStyle"),oe(a.levels,function(d){$g(d)})):a.type==="tree"&&$g(a.leaves)}}function ld(a){return rt(a)?a:a?[a]:[]}function RP(a){return(rt(a)?a[0]:a)||{}}function Obe(a,e){pl(ld(a.series),function(r){Xv(r)&&Lbe(r)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),pl(t,function(r){pl(ld(a[r]),function(n){n&&(Wn(n,"axisLabel"),Wn(n.axisPointer,"label"))})}),pl(ld(a.parallel),function(r){var n=r&&r.parallelAxisDefault;Wn(n,"axisLabel"),Wn(n&&n.axisPointer,"label")}),pl(ld(a.calendar),function(r){as(r,"itemStyle"),Wn(r,"dayLabel"),Wn(r,"monthLabel"),Wn(r,"yearLabel")}),pl(ld(a.radar),function(r){Wn(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),pl(ld(a.geo),function(r){Xv(r)&&(Wo(r),pl(ld(r.regions),function(n){Wo(n)}))}),pl(ld(a.timeline),function(r){Wo(r),as(r,"label"),as(r,"itemStyle"),as(r,"controlStyle",!0);var n=r.data;rt(n)&&oe(n,function(i){Qt(i)&&(as(i,"label"),as(i,"itemStyle"))})}),pl(ld(a.toolbox),function(r){as(r,"iconStyle"),pl(r.feature,function(n){as(n,"iconStyle")})}),Wn(RP(a.axisPointer),"label"),Wn(RP(a.tooltip).axisPointer,"label")}function Pbe(a,e){for(var t=e.split(","),r=a,n=0;n<t.length&&(r=r&&r[t[n]],r!=null);n++);return r}function Bbe(a,e,t,r){for(var n=e.split(","),i=a,o,l=0;l<n.length-1;l++)o=n[l],i[o]==null&&(i[o]={}),i=i[o];i[n[l]]==null&&(i[n[l]]=t)}function LP(a){a&&oe(zbe,function(e){e[0]in a&&!(e[1]in a)&&(a[e[1]]=a[e[0]])})}var zbe=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Fbe=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Zk=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function eg(a){var e=a&&a.itemStyle;if(e)for(var t=0;t<Zk.length;t++){var r=Zk[t][1],n=Zk[t][0];e[r]!=null&&(e[n]=e[r])}}function OP(a){a&&a.alignTo==="edge"&&a.margin!=null&&a.edgeDistance==null&&(a.edgeDistance=a.margin)}function PP(a){a&&a.downplay&&!a.blur&&(a.blur=a.downplay)}function Vbe(a){a&&a.focusNodeAdjacency!=null&&(a.emphasis=a.emphasis||{},a.emphasis.focus==null&&(a.emphasis.focus="adjacency"))}function H$(a,e){if(a)for(var t=0;t<a.length;t++)e(a[t]),a[t]&&H$(a[t].children,e)}function U$(a,e){Obe(a,e),a.series=Rr(a.series),oe(a.series,function(t){if(Qt(t)){var r=t.type;if(r==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(r==="pie"||r==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),OP(t.label);var n=t.data;if(n&&!Zs(n))for(var i=0;i<n.length;i++)OP(n[i]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(r==="gauge"){var o=Pbe(t,"pointer.color");o!=null&&Bbe(t,"itemStyle.color",o)}else if(r==="bar"){eg(t),eg(t.backgroundStyle),eg(t.emphasis);var n=t.data;if(n&&!Zs(n))for(var i=0;i<n.length;i++)typeof n[i]=="object"&&(eg(n[i]),eg(n[i]&&n[i].emphasis))}else if(r==="sunburst"){var l=t.highlightPolicy;l&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=l)),PP(t),H$(t.data,PP)}else r==="graph"||r==="sankey"?Vbe(t):r==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&Kt(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),LP(t)}}),a.dataRange&&(a.visualMap=a.dataRange),oe(Fbe,function(t){var r=a[t];r&&(rt(r)||(r=[r]),oe(r,function(n){LP(n)}))})}function Hbe(a){var e=Rt();a.eachSeries(function(t){var r=t.get("stack");if(r){var n=e.get(r)||e.set(r,[]),i=t.getData(),o={stackResultDimension:i.getCalculationInfo("stackResultDimension"),stackedOverDimension:i.getCalculationInfo("stackedOverDimension"),stackedDimension:i.getCalculationInfo("stackedDimension"),stackedByDimension:i.getCalculationInfo("stackedByDimension"),isStackedByIndex:i.getCalculationInfo("isStackedByIndex"),data:i,seriesModel:t};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;n.push(o)}}),e.each(function(t){if(t.length!==0){var r=t[0].seriesModel,n=r.get("stackOrder")||"seriesAsc";n==="seriesDesc"&&t.reverse(),oe(t,function(i,o){i.data.setCalculationInfo("stackedOnSeries",o>0?t[o-1].seriesModel:null)}),Ube(t)}})}function Ube(a){oe(a,function(e,t){var r=[],n=[NaN,NaN],i=[e.stackResultDimension,e.stackedOverDimension],o=e.data,l=e.isStackedByIndex,c=e.seriesModel.get("stackStrategy")||"samesign";o.modify(i,function(d,u,h){var f=o.get(e.stackedDimension,h);if(isNaN(f))return n;var p,g;l?g=o.getRawIndex(h):p=o.get(e.stackedByDimension,h);for(var b=NaN,w=t-1;w>=0;w--){var _=a[w];if(l||(g=_.data.rawIndexOf(_.stackedByDimension,p)),g>=0){var k=_.data.getByRawIndex(_.stackResultDimension,g);if(c==="all"||c==="positive"&&k>0||c==="negative"&&k<0||c==="samesign"&&f>=0&&k>0||c==="samesign"&&f<=0&&k<0){f=jme(f,k),b=k;break}}}return r[0]=f,r[1]=b,r})})}var kN=(function(){function a(e){this.data=e.data||(e.sourceFormat===Rl?{}:[]),this.sourceFormat=e.sourceFormat||L$,this.seriesLayoutBy=e.seriesLayoutBy||Sl,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var r=0;r<t.length;r++){var n=t[r];n.type==null&&B$(this,r)===Hi.Must&&(n.type="ordinal")}}return a})();function pM(a){return a instanceof kN}function h3(a,e,t){t=t||G$(a);var r=e.seriesLayoutBy,n=Wbe(a,t,r,e.sourceHeader,e.dimensions),i=new kN({data:a,sourceFormat:t,seriesLayoutBy:r,dimensionsDefine:n.dimensionsDefine,startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount,metaRawOption:$t(e)});return i}function xM(a){return new kN({data:a,sourceFormat:Zs(a)?ch:Ao})}function Gbe(a){return new kN({data:a.data,sourceFormat:a.sourceFormat,seriesLayoutBy:a.seriesLayoutBy,dimensionsDefine:$t(a.dimensionsDefine),startIndex:a.startIndex,dimensionsDetectedCount:a.dimensionsDetectedCount})}function G$(a){var e=L$;if(Zs(a))e=ch;else if(rt(a)){a.length===0&&(e=Ri);for(var t=0,r=a.length;t<r;t++){var n=a[t];if(n!=null){if(rt(n)||Zs(n)){e=Ri;break}else if(Qt(n)){e=To;break}}}}else if(Qt(a)){for(var i in a)if(Dt(a,i)&&ls(a[i])){e=Rl;break}}return e}function Wbe(a,e,t,r,n){var i,o;if(!a)return{dimensionsDefine:BP(n),startIndex:o,dimensionsDetectedCount:i};if(e===Ri){var l=a;r==="auto"||r==null?zP(function(d){d!=null&&d!=="-"&&(jt(d)?o==null&&(o=1):o=0)},t,l,10):o=Xa(r)?r:r?1:0,!n&&o===1&&(n=[],zP(function(d,u){n[u]=d!=null?d+"":""},t,l,1/0)),i=n?n.length:t===D0?l.length:l[0]?l[0].length:null}else if(e===To)n||(n=$be(a));else if(e===Rl)n||(n=[],oe(a,function(d,u){n.push(u)}));else if(e===Ao){var c=Gx(a[0]);i=rt(c)&&c.length||1}return{startIndex:o,dimensionsDefine:BP(n),dimensionsDetectedCount:i}}function $be(a){for(var e=0,t;e<a.length&&!(t=a[e++]););if(t)return Va(t)}function BP(a){if(a){var e=Rt();return it(a,function(t,r){t=Qt(t)?t:{name:t};var n={name:t.name,displayName:t.displayName,type:t.type};if(n.name==null)return n;n.name+="",n.displayName==null&&(n.displayName=n.name);var i=e.get(n.name);return i?n.name+="-"+i.count++:e.set(n.name,{count:1}),n})}}function zP(a,e,t,r){if(e===D0)for(var n=0;n<t.length&&n<r;n++)a(t[n]?t[n][0]:null,n);else for(var i=t[0]||[],n=0;n<i.length&&n<r;n++)a(i[n],n)}function W$(a){var e=a.sourceFormat;return e===To||e===Rl}var yf,wf,_f,Nf,FP,VP,$$=(function(){function a(e,t){var r=pM(e)?e:xM(e);this._source=r;var n=this._data=r.data,i=r.sourceFormat;r.seriesLayoutBy,i===ch&&(this._offset=0,this._dimSize=t,this._data=n),VP(this,n,r)}return a.prototype.getSource=function(){return this._source},a.prototype.count=function(){return 0},a.prototype.getItem=function(e,t){},a.prototype.appendData=function(e){},a.prototype.clean=function(){},a.protoInitialize=(function(){var e=a.prototype;e.pure=!1,e.persistent=!0})(),a.internalField=(function(){var e;VP=function(o,l,c){var d=c.sourceFormat,u=c.seriesLayoutBy,h=c.startIndex,f=c.dimensionsDefine,p=FP[mM(d,u)];if(Je(o,p),d===ch)o.getItem=t,o.count=n,o.fillStorage=r;else{var g=Y$(d,u);o.getItem=St(g,null,l,h,f);var b=q$(d,u);o.count=St(b,null,l,h,f)}};var t=function(o,l){o=o-this._offset,l=l||[];for(var c=this._data,d=this._dimSize,u=d*o,h=0;h<d;h++)l[h]=c[u+h];return l},r=function(o,l,c,d){for(var u=this._data,h=this._dimSize,f=0;f<h;f++){for(var p=d[f],g=p[0]==null?1/0:p[0],b=p[1]==null?-1/0:p[1],w=l-o,_=c[f],k=0;k<w;k++){var T=u[k*h+f];_[o+k]=T,T<g&&(g=T),T>b&&(b=T)}p[0]=g,p[1]=b}},n=function(){return this._data?this._data.length/this._dimSize:0};FP=(e={},e[Ri+"_"+Sl]={pure:!0,appendData:i},e[Ri+"_"+D0]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[To]={pure:!0,appendData:i},e[Rl]={pure:!0,appendData:function(o){var l=this._data;oe(o,function(c,d){for(var u=l[d]||(l[d]=[]),h=0;h<(c||[]).length;h++)u.push(c[h])})}},e[Ao]={appendData:i},e[ch]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},e);function i(o){for(var l=0;l<o.length;l++)this._data.push(o[l])}})(),a})(),Ey=function(a){rt(a)||mW("series.data or dataset.source must be an array.")};yf={},yf[Ri+"_"+Sl]=Ey,yf[Ri+"_"+D0]=Ey,yf[To]=Ey,yf[Rl]=function(a,e){for(var t=0;t<e.length;t++){var r=e[t].name;r==null&&mW("dimension name must not be null/undefined.")}},yf[Ao]=Ey;var HP=function(a,e,t,r){return a[r]},Ybe=(wf={},wf[Ri+"_"+Sl]=function(a,e,t,r){return a[r+e]},wf[Ri+"_"+D0]=function(a,e,t,r,n){r+=e;for(var i=n||[],o=a,l=0;l<o.length;l++){var c=o[l];i[l]=c?c[r]:null}return i},wf[To]=HP,wf[Rl]=function(a,e,t,r,n){for(var i=n||[],o=0;o<t.length;o++){var l=t[o].name,c=l!=null?a[l]:null;i[o]=c?c[r]:null}return i},wf[Ao]=HP,wf);function Y$(a,e){var t=Ybe[mM(a,e)];return t}var UP=function(a,e,t){return a.length},qbe=(_f={},_f[Ri+"_"+Sl]=function(a,e,t){return Math.max(0,a.length-e)},_f[Ri+"_"+D0]=function(a,e,t){var r=a[0];return r?Math.max(0,r.length-e):0},_f[To]=UP,_f[Rl]=function(a,e,t){var r=t[0].name,n=r!=null?a[r]:null;return n?n.length:0},_f[Ao]=UP,_f);function q$(a,e){var t=qbe[mM(a,e)];return t}var Kk=function(a,e,t){return a[e]},Xbe=(Nf={},Nf[Ri]=Kk,Nf[To]=function(a,e,t){return a[t]},Nf[Rl]=Kk,Nf[Ao]=function(a,e,t){var r=Gx(a);return r instanceof Array?r[e]:r},Nf[ch]=Kk,Nf);function X$(a){var e=Xbe[a];return e}function mM(a,e){return a===Ri?a+"_"+e:a}function Ax(a,e,t){if(a){var r=a.getRawDataItem(e);if(r!=null){var n=a.getStore(),i=n.getSource().sourceFormat;if(t!=null){var o=a.getDimensionIndex(t),l=n.getDimensionProperty(o);return X$(i)(r,o,l)}else{var c=r;return i===Ao&&(c=Gx(r)),c}}}}var Zbe=/\{@(.+?)\}/g,CN=(function(){function a(){}return a.prototype.getDataParams=function(e,t){var r=this.getData(t),n=this.getRawValue(e,t),i=r.getRawIndex(e),o=r.getName(e),l=r.getRawDataItem(e),c=r.getItemVisual(e,"style"),d=c&&c[r.getItemVisual(e,"drawType")||"fill"],u=c&&c.stroke,h=this.mainType,f=h==="series",p=r.userOutput&&r.userOutput.get();return{componentType:h,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:f?this.subType:null,seriesIndex:this.seriesIndex,seriesId:f?this.id:null,seriesName:f?this.name:null,name:o,dataIndex:i,data:l,dataType:t,value:n,color:d,borderColor:u,dimensionNames:p?p.fullDimensions:null,encode:p?p.encode:null,$vars:["seriesName","name","value"]}},a.prototype.getFormattedLabel=function(e,t,r,n,i,o){t=t||"normal";var l=this.getData(r),c=this.getDataParams(e,r);if(o&&(c.value=o.interpolatedValue),n!=null&&rt(c.value)&&(c.value=c.value[n]),!i){var d=l.getItemModel(e);i=d.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if(Ut(i))return c.status=t,c.dimensionIndex=n,i(c);if(jt(i)){var u=N$(i,c);return u.replace(Zbe,function(h,f){var p=f.length,g=f;g.charAt(0)==="["&&g.charAt(p-1)==="]"&&(g=+g.slice(1,p-1));var b=Ax(l,e,g);if(o&&rt(o.interpolatedValue)){var w=l.getDimensionIndex(g);w>=0&&(b=o.interpolatedValue[w])}return b!=null?b+"":""})}},a.prototype.getRawValue=function(e,t){return Ax(this.getData(t),e)},a.prototype.formatTooltip=function(e,t,r){},a})();function GP(a){var e,t;return Qt(a)?a.type&&(t=a):e=a,{text:e,frag:t}}function fv(a){return new Kbe(a)}var Kbe=(function(){function a(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return a.prototype.perform=function(e){var t=this._upstream,r=e&&e.skip;if(this._dirty&&t){var n=this.context;n.data=n.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var i;this._plan&&!r&&(i=this._plan(this.context));var o=u(this._modBy),l=this._modDataCount||0,c=u(e&&e.modBy),d=e&&e.modDataCount||0;(o!==c||l!==d)&&(i="reset");function u(k){return!(k>=1)&&(k=1),k}var h;(this._dirty||i==="reset")&&(this._dirty=!1,h=this._doReset(r)),this._modBy=c,this._modDataCount=d;var f=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var p=this._dueIndex,g=Math.min(f!=null?this._dueIndex+f:1/0,this._dueEnd);if(!r&&(h||p<g)){var b=this._progress;if(rt(b))for(var w=0;w<b.length;w++)this._doProgress(b[w],p,g,c,d);else this._doProgress(b,p,g,c,d)}this._dueIndex=g;var _=this._settedOutputEnd!=null?this._settedOutputEnd:g;this._outputDueEnd=_}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},a.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},a.prototype._doProgress=function(e,t,r,n,i){WP.reset(t,r,n,i),this._callingProgress=e,this._callingProgress({start:t,end:r,count:r-t,next:WP.next},this.context)},a.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,r;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(r=t.forceFirstProgress,t=t.progress),rt(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var n=this._downstream;return n&&n.dirty(),r},a.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},a.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},a.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},a.prototype.getUpstream=function(){return this._upstream},a.prototype.getDownstream=function(){return this._downstream},a.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},a})(),WP=(function(){var a,e,t,r,n,i={reset:function(c,d,u,h){e=c,a=d,t=u,r=h,n=Math.ceil(r/t),i.next=t>1&&r>0?l:o}};return i;function o(){return e<a?e++:null}function l(){var c=e%n*t+Math.ceil(e/n),d=e>=a?null:c<r?c:e;return e++,d}})();function dh(a,e){var t=e&&e.type;return t==="ordinal"?a:(t==="time"&&!Xa(a)&&a!=null&&a!=="-"&&(a=+T0(a)),a==null||a===""?NaN:Number(a))}var Qbe=Rt({number:function(a){return parseFloat(a)},time:function(a){return+T0(a)},trim:function(a){return jt(a)?Jo(a):a}});function Z$(a){return Qbe.get(a)}var K$={lt:function(a,e){return a<e},lte:function(a,e){return a<=e},gt:function(a,e){return a>e},gte:function(a,e){return a>=e}},Jbe=(function(){function a(e,t){if(!Xa(t)){var r="";or(r)}this._opFn=K$[e],this._rvalFloat=Ld(t)}return a.prototype.evaluate=function(e){return Xa(e)?this._opFn(e,this._rvalFloat):this._opFn(Ld(e),this._rvalFloat)},a})(),Q$=(function(){function a(e,t){var r=e==="desc";this._resultLT=r?1:-1,t==null&&(t=r?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return a.prototype.evaluate=function(e,t){var r=Xa(e)?e:Ld(e),n=Xa(t)?t:Ld(t),i=isNaN(r),o=isNaN(n);if(i&&(r=this._incomparable),o&&(n=this._incomparable),i&&o){var l=jt(e),c=jt(t);l&&(r=c?e:0),c&&(n=l?t:0)}return r<n?this._resultLT:r>n?-this._resultLT:0},a})(),e1e=(function(){function a(e,t){this._rval=t,this._isEQ=e,this._rvalTypeof=typeof t,this._rvalFloat=Ld(t)}return a.prototype.evaluate=function(e){var t=e===this._rval;if(!t){var r=typeof e;r!==this._rvalTypeof&&(r==="number"||this._rvalTypeof==="number")&&(t=Ld(e)===this._rvalFloat)}return this._isEQ?t:!t},a})();function t1e(a,e){return a==="eq"||a==="ne"?new e1e(a==="eq",e):Dt(K$,a)?new Jbe(a,e):null}var a1e=(function(){function a(){}return a.prototype.getRawData=function(){throw new Error("not supported")},a.prototype.getRawDataItem=function(e){throw new Error("not supported")},a.prototype.cloneRawData=function(){},a.prototype.getDimensionInfo=function(e){},a.prototype.cloneAllDimensionInfo=function(){},a.prototype.count=function(){},a.prototype.retrieveValue=function(e,t){},a.prototype.retrieveValueFromItem=function(e,t){},a.prototype.convertValue=function(e,t){return dh(e,t)},a})();function r1e(a,e){var t=new a1e,r=a.data,n=t.sourceFormat=a.sourceFormat,i=a.startIndex,o="";a.seriesLayoutBy!==Sl&&or(o);var l=[],c={},d=a.dimensionsDefine;if(d)oe(d,function(b,w){var _=b.name,k={index:w,name:_,displayName:b.displayName};if(l.push(k),_!=null){var T="";Dt(c,_)&&or(T),c[_]=k}});else for(var u=0;u<a.dimensionsDetectedCount;u++)l.push({index:u});var h=Y$(n,Sl);e.__isBuiltIn&&(t.getRawDataItem=function(b){return h(r,i,l,b)},t.getRawData=St(n1e,null,a)),t.cloneRawData=St(i1e,null,a);var f=q$(n,Sl);t.count=St(f,null,r,i,l);var p=X$(n);t.retrieveValue=function(b,w){var _=h(r,i,l,b);return g(_,w)};var g=t.retrieveValueFromItem=function(b,w){if(b!=null){var _=l[w];if(_)return p(b,w,_.name)}};return t.getDimensionInfo=St(s1e,null,l,c),t.cloneAllDimensionInfo=St(o1e,null,l),t}function n1e(a){var e=a.sourceFormat;if(!gM(e)){var t="";or(t)}return a.data}function i1e(a){var e=a.sourceFormat,t=a.data;if(!gM(e)){var r="";or(r)}if(e===Ri){for(var n=[],i=0,o=t.length;i<o;i++)n.push(t[i].slice());return n}else if(e===To){for(var n=[],i=0,o=t.length;i<o;i++)n.push(Je({},t[i]));return n}}function s1e(a,e,t){if(t!=null){if(Xa(t)||!isNaN(t)&&!Dt(e,t))return a[t];if(Dt(e,t))return e[t]}}function o1e(a){return $t(a)}var J$=Rt();function l1e(a){a=$t(a);var e=a.type,t="";e||or(t);var r=e.split(":");r.length!==2&&or(t);var n=!1;r[0]==="echarts"&&(e=r[1],n=!0),a.__isBuiltIn=n,J$.set(e,a)}function c1e(a,e,t){var r=Rr(a),n=r.length,i="";n||or(i);for(var o=0,l=n;o<l;o++){var c=r[o];e=d1e(c,e),o!==l-1&&(e.length=Math.max(e.length,1))}return e}function d1e(a,e,t,r){var n="";e.length||or(n),Qt(a)||or(n);var i=a.type,o=J$.get(i);o||or(n);var l=it(e,function(d){return r1e(d,o)}),c=Rr(o.transform({upstream:l[0],upstreamList:l,config:$t(a.config)}));return it(c,function(d,u){var h="";Qt(d)||or(h),d.data||or(h);var f=G$(d.data);gM(f)||or(h);var p,g=e[0];if(g&&u===0&&!d.dimensions){var b=g.startIndex;b&&(d.data=g.data.slice(0,b).concat(d.data)),p={seriesLayoutBy:Sl,sourceHeader:b,dimensions:g.metaRawOption.dimensions}}else p={seriesLayoutBy:Sl,sourceHeader:0,dimensions:d.dimensions};return h3(d.data,p,null)})}function gM(a){return a===Ri||a===To}var AN="undefined",u1e=typeof Uint32Array===AN?Array:Uint32Array,h1e=typeof Uint16Array===AN?Array:Uint16Array,eY=typeof Int32Array===AN?Array:Int32Array,$P=typeof Float64Array===AN?Array:Float64Array,tY={float:$P,int:eY,ordinal:Array,number:Array,time:$P},Qk;function _p(a){return a>65535?u1e:h1e}function Np(){return[1/0,-1/0]}function f1e(a){var e=a.constructor;return e===Array?a.slice():new e(a)}function YP(a,e,t,r,n){var i=tY[t||"float"];if(n){var o=a[e],l=o&&o.length;if(l!==r){for(var c=new i(r),d=0;d<l;d++)c[d]=o[d];a[e]=c}}else a[e]=new i(r)}var f3=(function(){function a(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Rt()}return a.prototype.initData=function(e,t,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var n=e.getSource(),i=this.defaultDimValueGetter=Qk[n.sourceFormat];this._dimValueGetter=r||i,this._rawExtent=[],W$(n),this._dimensions=it(t,function(o){return{type:o.type,property:o.property}}),this._initDataFromProvider(0,e.count())},a.prototype.getProvider=function(){return this._provider},a.prototype.getSource=function(){return this._provider.getSource()},a.prototype.ensureCalculationDimension=function(e,t){var r=this._calcDimNameToIdx,n=this._dimensions,i=r.get(e);if(i!=null){if(n[i].type===t)return i}else i=n.length;return n[i]={type:t},r.set(e,i),this._chunks[i]=new tY[t||"float"](this._rawCount),this._rawExtent[i]=Np(),i},a.prototype.collectOrdinalMeta=function(e,t){var r=this._chunks[e],n=this._dimensions[e],i=this._rawExtent,o=n.ordinalOffset||0,l=r.length;o===0&&(i[e]=Np());for(var c=i[e],d=o;d<l;d++){var u=r[d]=t.parseAndCollect(r[d]);isNaN(u)||(c[0]=Math.min(u,c[0]),c[1]=Math.max(u,c[1]))}n.ordinalMeta=t,n.ordinalOffset=l,n.type="ordinal"},a.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],r=t.ordinalMeta;return r},a.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},a.prototype.appendData=function(e){var t=this._provider,r=this.count();t.appendData(e);var n=t.count();return t.persistent||(n+=r),r<n&&this._initDataFromProvider(r,n,!0),[r,n]},a.prototype.appendValues=function(e,t){for(var r=this._chunks,n=this._dimensions,i=n.length,o=this._rawExtent,l=this.count(),c=l+Math.max(e.length,t||0),d=0;d<i;d++){var u=n[d];YP(r,d,u.type,c,!0)}for(var h=[],f=l;f<c;f++)for(var p=f-l,g=0;g<i;g++){var u=n[g],b=Qk.arrayRows.call(this,e[p]||h,u.property,p,g);r[g][f]=b;var w=o[g];b<w[0]&&(w[0]=b),b>w[1]&&(w[1]=b)}return this._rawCount=this._count=c,{start:l,end:c}},a.prototype._initDataFromProvider=function(e,t,r){for(var n=this._provider,i=this._chunks,o=this._dimensions,l=o.length,c=this._rawExtent,d=it(o,function(k){return k.property}),u=0;u<l;u++){var h=o[u];c[u]||(c[u]=Np()),YP(i,u,h.type,t,r)}if(n.fillStorage)n.fillStorage(e,t,i,c);else for(var f=[],p=e;p<t;p++){f=n.getItem(p,f);for(var g=0;g<l;g++){var b=i[g],w=this._dimValueGetter(f,d[g],p,g);b[p]=w;var _=c[g];w<_[0]&&(_[0]=w),w>_[1]&&(_[1]=w)}}!n.persistent&&n.clean&&n.clean(),this._rawCount=this._count=t,this._extent=[]},a.prototype.count=function(){return this._count},a.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(t)]:NaN},a.prototype.getValues=function(e,t){var r=[],n=[];if(t==null){t=e,e=[];for(var i=0;i<this._dimensions.length;i++)n.push(i)}else n=e;for(var i=0,o=n.length;i<o;i++)r.push(this.get(n[i],t));return r},a.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var r=this._chunks[e];return r?r[t]:NaN},a.prototype.getSum=function(e){var t=this._chunks[e],r=0;if(t)for(var n=0,i=this.count();n<i;n++){var o=this.get(e,n);isNaN(o)||(r+=o)}return r},a.prototype.getMedian=function(e){var t=[];this.each([e],function(i){isNaN(i)||t.push(i)});var r=t.sort(function(i,o){return i-o}),n=this.count();return n===0?0:n%2===1?r[(n-1)/2]:(r[n/2]+r[n/2-1])/2},a.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,r=t[e];if(r!=null&&r<this._count&&r===e)return e;for(var n=0,i=this._count-1;n<=i;){var o=(n+i)/2|0;if(t[o]<e)n=o+1;else if(t[o]>e)i=o-1;else return o}return-1},a.prototype.getIndices=function(){var e,t=this._indices;if(t){var r=t.constructor,n=this._count;if(r===Array){e=new r(n);for(var i=0;i<n;i++)e[i]=t[i]}else e=new r(t.buffer,0,n)}else{var r=_p(this._rawCount);e=new r(this.count());for(var i=0;i<e.length;i++)e[i]=i}return e},a.prototype.filter=function(e,t){if(!this._count)return this;for(var r=this.clone(),n=r.count(),i=_p(r._rawCount),o=new i(n),l=[],c=e.length,d=0,u=e[0],h=r._chunks,f=0;f<n;f++){var p=void 0,g=r.getRawIndex(f);if(c===0)p=t(f);else if(c===1){var b=h[u][g];p=t(b,f)}else{for(var w=0;w<c;w++)l[w]=h[e[w]][g];l[w]=f,p=t.apply(null,l)}p&&(o[d++]=g)}return d<n&&(r._indices=o),r._count=d,r._extent=[],r._updateGetRawIdx(),r},a.prototype.selectRange=function(e){var t=this.clone(),r=t._count;if(!r)return this;var n=Va(e),i=n.length;if(!i)return this;var o=t.count(),l=_p(t._rawCount),c=new l(o),d=0,u=n[0],h=e[u][0],f=e[u][1],p=t._chunks,g=!1;if(!t._indices){var b=0;if(i===1){for(var w=p[n[0]],_=0;_<r;_++){var k=w[_];(k>=h&&k<=f||isNaN(k))&&(c[d++]=b),b++}g=!0}else if(i===2){for(var w=p[n[0]],T=p[n[1]],D=e[n[1]][0],I=e[n[1]][1],_=0;_<r;_++){var k=w[_],O=T[_];(k>=h&&k<=f||isNaN(k))&&(O>=D&&O<=I||isNaN(O))&&(c[d++]=b),b++}g=!0}}if(!g)if(i===1)for(var _=0;_<o;_++){var P=t.getRawIndex(_),k=p[n[0]][P];(k>=h&&k<=f||isNaN(k))&&(c[d++]=P)}else for(var _=0;_<o;_++){for(var V=!0,P=t.getRawIndex(_),G=0;G<i;G++){var Q=n[G],k=p[Q][P];(k<e[Q][0]||k>e[Q][1])&&(V=!1)}V&&(c[d++]=t.getRawIndex(_))}return d<o&&(t._indices=c),t._count=d,t._extent=[],t._updateGetRawIdx(),t},a.prototype.map=function(e,t){var r=this.clone(e);return this._updateDims(r,e,t),r},a.prototype.modify=function(e,t){this._updateDims(this,e,t)},a.prototype._updateDims=function(e,t,r){for(var n=e._chunks,i=[],o=t.length,l=e.count(),c=[],d=e._rawExtent,u=0;u<t.length;u++)d[t[u]]=Np();for(var h=0;h<l;h++){for(var f=e.getRawIndex(h),p=0;p<o;p++)c[p]=n[t[p]][f];c[o]=h;var g=r&&r.apply(null,c);if(g!=null){typeof g!="object"&&(i[0]=g,g=i);for(var u=0;u<g.length;u++){var b=t[u],w=g[u],_=d[b],k=n[b];k&&(k[f]=w),w<_[0]&&(_[0]=w),w>_[1]&&(_[1]=w)}}}},a.prototype.lttbDownSample=function(e,t){var r=this.clone([e],!0),n=r._chunks,i=n[e],o=this.count(),l=0,c=Math.floor(1/t),d=this.getRawIndex(0),u,h,f,p=new(_p(this._rawCount))(Math.min((Math.ceil(o/c)+2)*2,o));p[l++]=d;for(var g=1;g<o-1;g+=c){for(var b=Math.min(g+c,o-1),w=Math.min(g+c*2,o),_=(w+b)/2,k=0,T=b;T<w;T++){var D=this.getRawIndex(T),I=i[D];isNaN(I)||(k+=I)}k/=w-b;var O=g,P=Math.min(g+c,o),V=g-1,G=i[d];u=-1,f=O;for(var Q=-1,$=0,T=O;T<P;T++){var D=this.getRawIndex(T),I=i[D];if(isNaN(I)){$++,Q<0&&(Q=D);continue}h=Math.abs((V-_)*(I-G)-(V-T)*(k-G)),h>u&&(u=h,f=D)}$>0&&$<P-O&&(p[l++]=Math.min(Q,f),f=Math.max(Q,f)),p[l++]=f,d=f}return p[l++]=this.getRawIndex(o-1),r._count=l,r._indices=p,r.getRawIndex=this._getRawIdx,r},a.prototype.minmaxDownSample=function(e,t){for(var r=this.clone([e],!0),n=r._chunks,i=Math.floor(1/t),o=n[e],l=this.count(),c=new(_p(this._rawCount))(Math.ceil(l/i)*2),d=0,u=0;u<l;u+=i){var h=u,f=o[this.getRawIndex(h)],p=u,g=o[this.getRawIndex(p)],b=i;u+i>l&&(b=l-u);for(var w=0;w<b;w++){var _=this.getRawIndex(u+w),k=o[_];k<f&&(f=k,h=u+w),k>g&&(g=k,p=u+w)}var T=this.getRawIndex(h),D=this.getRawIndex(p);h<p?(c[d++]=T,c[d++]=D):(c[d++]=D,c[d++]=T)}return r._count=d,r._indices=c,r._updateGetRawIdx(),r},a.prototype.downSample=function(e,t,r,n){for(var i=this.clone([e],!0),o=i._chunks,l=[],c=Math.floor(1/t),d=o[e],u=this.count(),h=i._rawExtent[e]=Np(),f=new(_p(this._rawCount))(Math.ceil(u/c)),p=0,g=0;g<u;g+=c){c>u-g&&(c=u-g,l.length=c);for(var b=0;b<c;b++){var w=this.getRawIndex(g+b);l[b]=d[w]}var _=r(l),k=this.getRawIndex(Math.min(g+n(l,_)||0,u-1));d[k]=_,_<h[0]&&(h[0]=_),_>h[1]&&(h[1]=_),f[p++]=k}return i._count=p,i._indices=f,i._updateGetRawIdx(),i},a.prototype.each=function(e,t){if(this._count)for(var r=e.length,n=this._chunks,i=0,o=this.count();i<o;i++){var l=this.getRawIndex(i);switch(r){case 0:t(i);break;case 1:t(n[e[0]][l],i);break;case 2:t(n[e[0]][l],n[e[1]][l],i);break;default:for(var c=0,d=[];c<r;c++)d[c]=n[e[c]][l];d[c]=i,t.apply(null,d)}}},a.prototype.getDataExtent=function(e){var t=this._chunks[e],r=Np();if(!t)return r;var n=this.count(),i=!this._indices,o;if(i)return this._rawExtent[e].slice();if(o=this._extent[e],o)return o.slice();o=r;for(var l=o[0],c=o[1],d=0;d<n;d++){var u=this.getRawIndex(d),h=t[u];h<l&&(l=h),h>c&&(c=h)}return o=[l,c],this._extent[e]=o,o},a.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var r=[],n=this._chunks,i=0;i<n.length;i++)r.push(n[i][t]);return r},a.prototype.clone=function(e,t){var r=new a,n=this._chunks,i=e&&kc(e,function(l,c){return l[c]=!0,l},{});if(i)for(var o=0;o<n.length;o++)r._chunks[o]=i[o]?f1e(n[o]):n[o];else r._chunks=n;return this._copyCommonProps(r),t||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},a.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=$t(this._extent),e._rawExtent=$t(this._rawExtent)},a.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var r=this._indices.length;t=new e(r);for(var n=0;n<r;n++)t[n]=this._indices[n]}else t=new e(this._indices);return t}return null},a.prototype._getRawIdxIdentity=function(e){return e},a.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},a.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},a.internalField=(function(){function e(t,r,n,i){return dh(t[i],this._dimensions[i])}Qk={arrayRows:e,objectRows:function(t,r,n,i){return dh(t[r],this._dimensions[i])},keyedColumns:e,original:function(t,r,n,i){var o=t&&(t.value==null?t:t.value);return dh(o instanceof Array?o[i]:o,this._dimensions[i])},typedArray:function(t,r,n,i){return t[i]}}})(),a})(),aY=(function(){function a(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return a.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},a.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},a.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},a.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},a.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),r=!!t.length,n,i;if(Dy(e)){var o=e,l=void 0,c=void 0,d=void 0;if(r){var u=t[0];u.prepareSource(),d=u.getSource(),l=d.data,c=d.sourceFormat,i=[u._getVersionSign()]}else l=o.get("data",!0),c=Zs(l)?ch:Ao,i=[];var h=this._getSourceMetaRawOption()||{},f=d&&d.metaRawOption||{},p=Pt(h.seriesLayoutBy,f.seriesLayoutBy)||null,g=Pt(h.sourceHeader,f.sourceHeader),b=Pt(h.dimensions,f.dimensions),w=p!==f.seriesLayoutBy||!!g!=!!f.sourceHeader||b;n=w?[h3(l,{seriesLayoutBy:p,sourceHeader:g,dimensions:b},c)]:[]}else{var _=e;if(r){var k=this._applyTransform(t);n=k.sourceList,i=k.upstreamSignList}else{var T=_.get("source",!0);n=[h3(T,this._getSourceMetaRawOption(),null)],i=[]}}this._setLocalSource(n,i)},a.prototype._applyTransform=function(e){var t=this._sourceHost,r=t.get("transform",!0),n=t.get("fromTransformResult",!0);if(n!=null){var i="";e.length!==1&&XP(i)}var o,l=[],c=[];return oe(e,function(d){d.prepareSource();var u=d.getSource(n||0),h="";n!=null&&!u&&XP(h),l.push(u),c.push(d._getVersionSign())}),r?o=c1e(r,l,{datasetIndex:t.componentIndex}):n!=null&&(o=[Gbe(l[0])]),{sourceList:o,upstreamSignList:c}},a.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var r=e[t];if(r._isDirty()||this._upstreamSignList[t]!==r._getVersionSign())return!0}},a.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return t},a.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},a.prototype._innerGetDataStore=function(e,t,r){var n=0,i=this._storeList,o=i[n];o||(o=i[n]={});var l=o[r];if(!l){var c=this._getUpstreamSourceManagers()[0];Dy(this._sourceHost)&&c?l=c._innerGetDataStore(e,t,r):(l=new f3,l.initData(new $$(t,e.length),e)),o[r]=l}return l},a.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(Dy(e)){var t=uM(e);return t?[t.getSourceManager()]:[]}else return it(bbe(e),function(r){return r.getSourceManager()})},a.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,r,n;if(Dy(e))t=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),n=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var i=e;t=i.get("seriesLayoutBy",!0),r=i.get("sourceHeader",!0),n=i.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:r,dimensions:n}},a})();function qP(a){var e=a.option.transform;e&&k2(a.option.transform)}function Dy(a){return a.mainType==="series"}function XP(a){throw new Error(a)}var p1e="line-height:1";function rY(a){var e=a.lineHeight;return e==null?p1e:"line-height:"+_s(e+"")+"px"}function nY(a,e){var t=a.color||Fe.color.tertiary,r=a.fontSize||12,n=a.fontWeight||"400",i=a.color||Fe.color.secondary,o=a.fontSize||14,l=a.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+_s(r+"")+"px;color:"+_s(t)+";font-weight:"+_s(n+""),valueStyle:"font-size:"+_s(o+"")+"px;color:"+_s(i)+";font-weight:"+_s(l+"")}:{nameStyle:{fontSize:r,fill:t,fontWeight:n},valueStyle:{fontSize:o,fill:i,fontWeight:l}}}var x1e=[0,10,20,30],m1e=["",`
`,`

`,`


`];function Jn(a,e){return e.type=a,e}function p3(a){return a.type==="section"}function iY(a){return p3(a)?g1e:v1e}function sY(a){if(p3(a)){var e=0,t=a.blocks.length,r=t>1||t>0&&!a.noHeader;return oe(a.blocks,function(n){var i=sY(n);i>=e&&(e=i+ +(r&&(!i||p3(n)&&!n.noHeader)))}),e}return 0}function g1e(a,e,t,r){var n=e.noHeader,i=b1e(sY(e)),o=[],l=e.blocks||[];cs(!l||rt(l)),l=l||[];var c=a.orderMode;if(e.sortBlocks&&c){l=l.slice();var d={valueAsc:"asc",valueDesc:"desc"};if(Dt(d,c)){var u=new Q$(d[c],null);l.sort(function(b,w){return u.evaluate(b.sortParam,w.sortParam)})}else c==="seriesDesc"&&l.reverse()}oe(l,function(b,w){var _=e.valueFormatter,k=iY(b)(_?Je(Je({},a),{valueFormatter:_}):a,b,w>0?i.html:0,r);k!=null&&o.push(k)});var h=a.renderMode==="richText"?o.join(i.richText):x3(r,o.join(""),n?t:i.html);if(n)return h;var f=l3(e.header,"ordinal",a.useUTC),p=nY(r,a.renderMode).nameStyle,g=rY(r);return a.renderMode==="richText"?oY(a,f,p)+i.richText+h:x3(r,'<div style="'+p+";"+g+';">'+_s(f)+"</div>"+h,t)}function v1e(a,e,t,r){var n=a.renderMode,i=e.noName,o=e.noValue,l=!e.markerType,c=e.name,d=a.useUTC,u=e.valueFormatter||a.valueFormatter||function(D){return D=rt(D)?D:[D],it(D,function(I,O){return l3(I,rt(p)?p[O]:p,d)})};if(!(i&&o)){var h=l?"":a.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||Fe.color.secondary,n),f=i?"":l3(c,"ordinal",d),p=e.valueType,g=o?[]:u(e.value,e.dataIndex),b=!l||!i,w=!l&&i,_=nY(r,n),k=_.nameStyle,T=_.valueStyle;return n==="richText"?(l?"":h)+(i?"":oY(a,f,k))+(o?"":_1e(a,g,b,w,T)):x3(r,(l?"":h)+(i?"":y1e(f,!l,k))+(o?"":w1e(g,b,w,T)),t)}}function ZP(a,e,t,r,n,i){if(a){var o=iY(a),l={useUTC:n,renderMode:t,orderMode:r,markupStyleCreator:e,valueFormatter:a.valueFormatter};return o(l,a,0,i)}}function b1e(a){return{html:x1e[a],richText:m1e[a]}}function x3(a,e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0",i=rY(a);return'<div style="'+n+";"+i+';">'+e+r+"</div>"}function y1e(a,e,t){var r=e?"margin-left:2px":"";return'<span style="'+t+";"+r+'">'+_s(a)+"</span>"}function w1e(a,e,t,r){var n=t?"10px":"20px",i=e?"float:right;margin-left:"+n:"";return a=rt(a)?a:[a],'<span style="'+i+";"+r+'">'+it(a,function(o){return _s(o)}).join("&nbsp;&nbsp;")+"</span>"}function oY(a,e,t){return a.markupStyleCreator.wrapRichTextStyle(e,t)}function _1e(a,e,t,r,n){var i=[n],o=r?10:20;return t&&i.push({padding:[0,0,0,o],align:"right"}),a.markupStyleCreator.wrapRichTextStyle(rt(e)?e.join("  "):e,i)}function lY(a,e){var t=a.getData().getItemVisual(e,"style"),r=t[a.visualDrawType];return N0(r)}function cY(a,e){var t=a.get("padding");return t??(e==="richText"?[8,10]:10)}var Jk=(function(){function a(){this.richTextStyles={},this._nextStyleNameId=pW()}return a.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},a.prototype.makeTooltipMarker=function(e,t,r){var n=r==="richText"?this._generateStyleName():null,i=lbe({color:t,type:e,renderMode:r,markerId:n});return jt(i)?i:(this.richTextStyles[n]=i.style,i.content)},a.prototype.wrapRichTextStyle=function(e,t){var r={};rt(t)?oe(t,function(i){return Je(r,i)}):Je(r,t);var n=this._generateStyleName();return this.richTextStyles[n]=r,"{"+n+"|"+e+"}"},a})();function dY(a){var e=a.series,t=a.dataIndex,r=a.multipleSeries,n=e.getData(),i=n.mapDimensionsAll("defaultedTooltip"),o=i.length,l=e.getRawValue(t),c=rt(l),d=lY(e,t),u,h,f,p;if(o>1||c&&!o){var g=N1e(l,e,t,i,d);u=g.inlineValues,h=g.inlineValueTypes,f=g.blocks,p=g.inlineValues[0]}else if(o){var b=n.getDimensionInfo(i[0]);p=u=Ax(n,t,i[0]),h=b.type}else p=u=c?l[0]:l;var w=PT(e),_=w&&e.name||"",k=n.getName(t),T=r?_:k;return Jn("section",{header:_,noHeader:r||!w,sortParam:p,blocks:[Jn("nameValue",{markerType:"item",markerColor:d,name:T,noName:!Jo(T),value:u,valueType:h,dataIndex:t})].concat(f||[])})}function N1e(a,e,t,r,n){var i=e.getData(),o=kc(a,function(h,f,p){var g=i.getDimensionInfo(p);return h=h||g&&g.tooltip!==!1&&g.displayName!=null},!1),l=[],c=[],d=[];r.length?oe(r,function(h){u(Ax(i,t,h),h)}):oe(a,u);function u(h,f){var p=i.getDimensionInfo(f);!p||p.otherDims.tooltip===!1||(o?d.push(Jn("nameValue",{markerType:"subItem",markerColor:n,name:p.displayName,value:h,valueType:p.type})):(l.push(h),c.push(p.type)))}return{inlineValues:l,inlineValueTypes:c,blocks:d}}var Tu=Ea();function Iy(a,e){return a.getName(e)||a.getId(e)}var Yw="__universalTransitionEnabled",Fr=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,r,n){this.seriesIndex=this.componentIndex,this.dataTask=fv({count:S1e,reset:k1e}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n);var i=Tu(this).sourceManager=new aY(this);i.prepareSource();var o=this.getInitialData(t,n);QP(o,this),this.dataTask.context.data=o,Tu(this).dataBeforeProcessed=o,KP(this),this._initSelectedMapFromData(o)},e.prototype.mergeDefaultAndTheme=function(t,r){var n=qv(this),i=n?E0(t):{},o=this.subType;Oa.hasClass(o)&&(o+="Series"),_a(t,r.getTheme().get(this.subType)),_a(t,this.getDefaultOption()),g0(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&Mc(t,i,n)},e.prototype.mergeOption=function(t,r){t=_a(this.option,t,!0),this.fillDataTextStyle(t.data);var n=qv(this);n&&Mc(this.option,t,n);var i=Tu(this).sourceManager;i.dirty(),i.prepareSource();var o=this.getInitialData(t,r);QP(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,Tu(this).dataBeforeProcessed=o,KP(this),this._initSelectedMapFromData(o)},e.prototype.fillDataTextStyle=function(t){if(t&&!Zs(t))for(var r=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&g0(t[n],"label",r)},e.prototype.getInitialData=function(t,r){},e.prototype.appendData=function(t){var r=this.getRawData();r.appendData(t.data)},e.prototype.getData=function(t){var r=m3(this);if(r){var n=r.context.data;return t==null||!n.getLinkedData?n:n.getLinkedData(t)}else return Tu(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var r=m3(this);if(r){var n=r.context;n.outputData=t,r!==this.dataTask&&(n.data=t)}Tu(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return Rt(t)},e.prototype.getSourceManager=function(){return Tu(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return Tu(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.indicesOfNearest=function(t,r,n,i){var o=this.getData(),l=this.coordinateSystem,c=l&&l.getAxis(t);if(!l||!c)return[];var d=c.dataToCoord(n);i==null&&(i=1/0);var u=[],h=1/0,f=-1,p=0;return o.each(r,function(g,b){var w=c.dataToCoord(g),_=d-w,k=Math.abs(_);k<=i&&((k<h||k===h&&_>=0&&f<0)&&(h=k,f=_,p=0),_===f&&(u[p++]=b))}),u.length=p,u},e.prototype.formatTooltip=function(t,r,n){return dY({series:this,dataIndex:t,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(Ba.node&&!(t&&t.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,r,n){var i=this.ecModel,o=hM.prototype.getColorFromPalette.call(this,t,r,n);return o||(o=i.getColorFromPalette(t,r,n)),o},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,r){this._innerSelect(this.getData(r),t)},e.prototype.unselect=function(t,r){var n=this.option.selectedMap;if(n){var i=this.option.selectedMode,o=this.getData(r);if(i==="series"||n==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var l=0;l<t.length;l++){var c=t[l],d=Iy(o,c);n[d]=!1,this._selectedDataIndicesMap[d]=-1}}},e.prototype.toggleSelect=function(t,r){for(var n=[],i=0;i<t.length;i++)n[0]=t[i],this.isSelected(t[i],r)?this.unselect(n,r):this.select(n,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,r=Va(t),n=[],i=0;i<r.length;i++){var o=t[r[i]];o>=0&&n.push(o)}return n},e.prototype.isSelected=function(t,r){var n=this.option.selectedMap;if(!n)return!1;var i=this.getData(r);return(n==="all"||n[Iy(i,t)])&&!i.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[Yw])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,r){var n,i,o=this.option,l=o.selectedMode,c=r.length;if(!(!l||!c)){if(l==="series")o.selectedMap="all";else if(l==="multiple"){Qt(o.selectedMap)||(o.selectedMap={});for(var d=o.selectedMap,u=0;u<c;u++){var h=r[u],f=Iy(t,h);d[f]=!0,this._selectedDataIndicesMap[f]=t.getRawIndex(h)}}else if(l==="single"||l===!0){var p=r[c-1],f=Iy(t,p);o.selectedMap=(n={},n[f]=!0,n),this._selectedDataIndicesMap=(i={},i[f]=t.getRawIndex(p),i)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var r=[];t.hasItemOption&&t.each(function(n){var i=t.getRawDataItem(n);i&&i.selected&&r.push(n)}),r.length>0&&this._innerSelect(t,r)}},e.registerClass=function(t){return Oa.registerClass(t)},e.protoInitialize=(function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"})(),e})(Oa);ti(Fr,CN);ti(Fr,hM);jW(Fr,Oa);function KP(a){var e=a.name;PT(a)||(a.name=j1e(a)||e)}function j1e(a){var e=a.getRawData(),t=e.mapDimensionsAll("seriesName"),r=[];return oe(t,function(n){var i=e.getDimensionInfo(n);i.displayName&&r.push(i.displayName)}),r.join(" ")}function S1e(a){return a.model.getRawData().count()}function k1e(a){var e=a.model;return e.setData(e.getRawData().cloneShallow()),C1e}function C1e(a,e){e.outputData&&a.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function QP(a,e){oe(Bv(a.CHANGABLE_METHODS,a.DOWNSAMPLE_METHODS),function(t){a.wrapMethod(t,va(A1e,e))})}function A1e(a,e){var t=m3(a);return t&&t.setOutputEnd((e||this).count()),e}function m3(a){var e=(a.ecModel||{}).scheduler,t=e&&e.getPipeline(a.uid);if(t){var r=t.currentTask;if(r){var n=r.agentStubMap;n&&(r=n.get(a.uid))}return r}}var tn=(function(){function a(){this.group=new Gt,this.uid=Zx("viewComponent")}return a.prototype.init=function(e,t){},a.prototype.render=function(e,t,r,n){},a.prototype.dispose=function(e,t){},a.prototype.updateView=function(e,t,r,n){},a.prototype.updateLayout=function(e,t,r,n){},a.prototype.updateVisual=function(e,t,r,n){},a.prototype.toggleBlurSeries=function(e,t,r){},a.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},a})();zT(tn);dN(tn);function Kx(){var a=Ea();return function(e){var t=a(e),r=e.pipelineContext,n=!!t.large,i=!!t.progressiveRender,o=t.large=!!(r&&r.large),l=t.progressiveRender=!!(r&&r.progressiveRender);return(n!==o||i!==l)&&"reset"}}var uY=Ea(),T1e=Kx(),Mr=(function(){function a(){this.group=new Gt,this.uid=Zx("viewChart"),this.renderTask=fv({plan:M1e,reset:E1e}),this.renderTask.context={view:this}}return a.prototype.init=function(e,t){},a.prototype.render=function(e,t,r,n){},a.prototype.highlight=function(e,t,r,n){var i=e.getData(n&&n.dataType);i&&e9(i,n,"emphasis")},a.prototype.downplay=function(e,t,r,n){var i=e.getData(n&&n.dataType);i&&e9(i,n,"normal")},a.prototype.remove=function(e,t){this.group.removeAll()},a.prototype.dispose=function(e,t){},a.prototype.updateView=function(e,t,r,n){this.render(e,t,r,n)},a.prototype.updateLayout=function(e,t,r,n){this.render(e,t,r,n)},a.prototype.updateVisual=function(e,t,r,n){this.render(e,t,r,n)},a.prototype.eachRendered=function(e){Ah(this.group,e)},a.markUpdateMethod=function(e,t){uY(e).updateMethod=t},a.protoInitialize=(function(){var e=a.prototype;e.type="chart"})(),a})();function JP(a,e,t){a&&Wv(a)&&(e==="emphasis"?Od:Pd)(a,t)}function e9(a,e,t){var r=v0(a,e),n=e&&e.highlightKey!=null?tve(e.highlightKey):null;r!=null?oe(Rr(r),function(i){JP(a.getItemGraphicEl(i),t,n)}):a.eachItemGraphicEl(function(i){JP(i,t,n)})}zT(Mr);dN(Mr);function M1e(a){return T1e(a.model)}function E1e(a){var e=a.model,t=a.ecModel,r=a.api,n=a.payload,i=e.pipelineContext.progressiveRender,o=a.view,l=n&&uY(n).updateMethod,c=i?"incrementalPrepareRender":l&&o[l]?l:"render";return c!=="render"&&o[c](e,t,r,n),D1e[c]}var D1e={incrementalPrepareRender:{progress:function(a,e){e.view.incrementalRender(a,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(a,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},$2="\0__throttleOriginMethod",t9="\0__throttleRate",a9="\0__throttleType";function vM(a,e,t){var r,n=0,i=0,o=null,l,c,d,u;e=e||0;function h(){i=new Date().getTime(),o=null,a.apply(c,d||[])}var f=function(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];r=new Date().getTime(),c=this,d=p;var b=u||e,w=u||t;u=null,l=r-(w?n:i)-b,clearTimeout(o),w?o=setTimeout(h,b):l>=0?h():o=setTimeout(h,-l),n=r};return f.clear=function(){o&&(clearTimeout(o),o=null)},f.debounceNextCall=function(p){u=p},f}function Qx(a,e,t,r){var n=a[e];if(n){var i=n[$2]||n,o=n[a9],l=n[t9];if(l!==t||o!==r){if(t==null||!r)return a[e]=i;n=a[e]=vM(i,t,r==="debounce"),n[$2]=i,n[a9]=r,n[t9]=t}return n}}function Zv(a,e){var t=a[e];t&&t[$2]&&(t.clear&&t.clear(),a[e]=t[$2])}var r9=Ea(),n9={itemStyle:b0(u$,!0),lineStyle:b0(d$,!0)},I1e={lineStyle:"stroke",itemStyle:"fill"};function hY(a,e){var t=a.visualStyleMapper||n9[e];return t||(console.warn("Unknown style type '"+e+"'."),n9.itemStyle)}function fY(a,e){var t=a.visualDrawType||I1e[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var R1e={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,e){var t=a.getData(),r=a.visualStyleAccessPath||"itemStyle",n=a.getModel(r),i=hY(a,r),o=i(n),l=n.getShallow("decal");l&&(t.setVisual("decal",l),l.dirty=!0);var c=fY(a,r),d=o[c],u=Ut(d)?d:null,h=o.fill==="auto"||o.stroke==="auto";if(!o[c]||u||h){var f=a.getColorFromPalette(a.name,null,e.getSeriesCount());o[c]||(o[c]=f,t.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||Ut(o.fill)?f:o.fill,o.stroke=o.stroke==="auto"||Ut(o.stroke)?f:o.stroke}if(t.setVisual("style",o),t.setVisual("drawType",c),!e.isSeriesFiltered(a)&&u)return t.setVisual("colorFromPalette",!1),{dataEach:function(p,g){var b=a.getDataParams(g),w=Je({},o);w[c]=u(b),p.setItemVisual(g,"style",w)}}}},tg=new za,L1e={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,e){if(!(a.ignoreStyleOnData||e.isSeriesFiltered(a))){var t=a.getData(),r=a.visualStyleAccessPath||"itemStyle",n=hY(a,r),i=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(o,l){var c=o.getRawDataItem(l);if(c&&c[r]){tg.option=c[r];var d=n(tg),u=o.ensureUniqueItemVisual(l,"style");Je(u,d),tg.option.decal&&(o.setItemVisual(l,"decal",tg.option.decal),tg.option.decal.dirty=!0),i in d&&o.setItemVisual(l,"colorFromPalette",!1)}}:null}}}},O1e={performRawSeries:!0,overallReset:function(a){var e=Rt();a.eachSeries(function(t){var r=t.getColorBy();if(!t.isColorBySeries()){var n=t.type+"-"+r,i=e.get(n);i||(i={},e.set(n,i)),r9(t).scope=i}}),a.eachSeries(function(t){if(!(t.isColorBySeries()||a.isSeriesFiltered(t))){var r=t.getRawData(),n={},i=t.getData(),o=r9(t).scope,l=t.visualStyleAccessPath||"itemStyle",c=fY(t,l);i.each(function(d){var u=i.getRawIndex(d);n[u]=d}),r.each(function(d){var u=n[d],h=i.getItemVisual(u,"colorFromPalette");if(h){var f=i.ensureUniqueItemVisual(u,"style"),p=r.getName(d)||d+"",g=r.count();f[c]=t.getColorFromPalette(p,o,g)}})}})}},Ry=Math.PI;function P1e(a,e){e=e||{},Kt(e,{text:"loading",textColor:Fe.color.primary,fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255,255,255,0.8)",showSpinner:!0,color:Fe.color.theme[0],spinnerRadius:10,lineWidth:5,zlevel:0});var t=new Gt,r=new Ta({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(r);var n=new Ja({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),i=new Ta({style:{fill:"none"},textContent:n,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(i);var o;return e.showSpinner&&(o=new bN({shape:{startAngle:-Ry/2,endAngle:-Ry/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:Ry*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:Ry*3/2}).delay(300).start("circularInOut"),t.add(o)),t.resize=function(){var l=n.getBoundingRect().width,c=e.showSpinner?e.spinnerRadius:0,d=(a.getWidth()-c*2-(e.showSpinner&&l?10:0)-l)/2-(e.showSpinner&&l?0:5+l/2)+(e.showSpinner?0:l/2)+(l?0:c),u=a.getHeight()/2;e.showSpinner&&o.setShape({cx:d,cy:u}),i.setShape({x:d-c,y:u-c,width:c*2,height:c*2}),r.setShape({x:0,y:0,width:a.getWidth(),height:a.getHeight()})},t.resize(),t}var pY=(function(){function a(e,t,r,n){this._stageTaskMap=Rt(),this.ecInstance=e,this.api=t,r=this._dataProcessorHandlers=r.slice(),n=this._visualHandlers=n.slice(),this._allHandlers=r.concat(n)}return a.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(r){var n=r.overallTask;n&&n.dirty()})},a.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),n=r.context,i=!t&&r.progressiveEnabled&&(!n||n.progressiveRender)&&e.__idxInPipeline>r.blockIndex,o=i?r.step:null,l=n&&n.modDataCount,c=l!=null?Math.ceil(l/o):null;return{step:o,modBy:c,modDataCount:l}}},a.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},a.prototype.updateStreamModes=function(e,t){var r=this._pipelineMap.get(e.uid),n=e.getData(),i=n.count(),o=r.progressiveEnabled&&t.incrementalPrepareRender&&i>=r.threshold,l=e.get("large")&&i>=e.get("largeThreshold"),c=e.get("progressiveChunkMode")==="mod"?i:null;e.pipelineContext=r.context={progressiveRender:o,modDataCount:c,large:l}},a.prototype.restorePipelines=function(e){var t=this,r=t._pipelineMap=Rt();e.eachSeries(function(n){var i=n.getProgressive(),o=n.uid;r.set(o,{id:o,head:null,tail:null,threshold:n.getProgressiveThreshold(),progressiveEnabled:i&&!(n.preventIncremental&&n.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),t._pipe(n,n.dataTask)})},a.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),r=this.api;oe(this._allHandlers,function(n){var i=e.get(n.uid)||e.set(n.uid,{}),o="";cs(!(n.reset&&n.overallReset),o),n.reset&&this._createSeriesStageTask(n,i,t,r),n.overallReset&&this._createOverallStageTask(n,i,t,r)},this)},a.prototype.prepareView=function(e,t,r,n){var i=e.renderTask,o=i.context;o.model=t,o.ecModel=r,o.api=n,i.__block=!e.incrementalPrepareRender,this._pipe(t,i)},a.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},a.prototype.performVisualTasks=function(e,t,r){this._performStageTasks(this._visualHandlers,e,t,r)},a.prototype._performStageTasks=function(e,t,r,n){n=n||{};var i=!1,o=this;oe(e,function(c,d){if(!(n.visualType&&n.visualType!==c.visualType)){var u=o._stageTaskMap.get(c.uid),h=u.seriesTaskMap,f=u.overallTask;if(f){var p,g=f.agentStubMap;g.each(function(w){l(n,w)&&(w.dirty(),p=!0)}),p&&f.dirty(),o.updatePayload(f,r);var b=o.getPerformArgs(f,n.block);g.each(function(w){w.perform(b)}),f.perform(b)&&(i=!0)}else h&&h.each(function(w,_){l(n,w)&&w.dirty();var k=o.getPerformArgs(w,n.block);k.skip=!c.performRawSeries&&t.isSeriesFiltered(w.context.model),o.updatePayload(w,r),w.perform(k)&&(i=!0)})}});function l(c,d){return c.setDirty&&(!c.dirtyMap||c.dirtyMap.get(d.__pipeline.id))}this.unfinished=i||this.unfinished},a.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(r){t=r.dataTask.perform()||t}),this.unfinished=t||this.unfinished},a.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},a.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},a.prototype._createSeriesStageTask=function(e,t,r,n){var i=this,o=t.seriesTaskMap,l=t.seriesTaskMap=Rt(),c=e.seriesType,d=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(u):c?r.eachRawSeriesByType(c,u):d&&d(r,n).each(u);function u(h){var f=h.uid,p=l.set(f,o&&o.get(f)||fv({plan:H1e,reset:U1e,count:W1e}));p.context={model:h,ecModel:r,api:n,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:i},i._pipe(h,p)}},a.prototype._createOverallStageTask=function(e,t,r,n){var i=this,o=t.overallTask=t.overallTask||fv({reset:B1e});o.context={ecModel:r,api:n,overallReset:e.overallReset,scheduler:i};var l=o.agentStubMap,c=o.agentStubMap=Rt(),d=e.seriesType,u=e.getTargetSeries,h=!0,f=!1,p="";cs(!e.createOnAllSeries,p),d?r.eachRawSeriesByType(d,g):u?u(r,n).each(g):(h=!1,oe(r.getSeries(),g));function g(b){var w=b.uid,_=c.set(w,l&&l.get(w)||(f=!0,fv({reset:z1e,onDirty:V1e})));_.context={model:b,overallProgress:h},_.agent=o,_.__block=h,i._pipe(b,_)}f&&o.dirty()},a.prototype._pipe=function(e,t){var r=e.uid,n=this._pipelineMap.get(r);!n.head&&(n.head=t),n.tail&&n.tail.pipe(t),n.tail=t,t.__idxInPipeline=n.count++,t.__pipeline=n},a.wrapStageHandler=function(e,t){return Ut(e)&&(e={overallReset:e,seriesType:$1e(e)}),e.uid=Zx("stageHandler"),t&&(e.visualType=t),e},a})();function B1e(a){a.overallReset(a.ecModel,a.api,a.payload)}function z1e(a){return a.overallProgress&&F1e}function F1e(){this.agent.dirty(),this.getDownstream().dirty()}function V1e(){this.agent&&this.agent.dirty()}function H1e(a){return a.plan?a.plan(a.model,a.ecModel,a.api,a.payload):null}function U1e(a){a.useClearVisual&&a.data.clearAllVisual();var e=a.resetDefines=Rr(a.reset(a.model,a.ecModel,a.api,a.payload));return e.length>1?it(e,function(t,r){return xY(r)}):G1e}var G1e=xY(0);function xY(a){return function(e,t){var r=t.data,n=t.resetDefines[a];if(n&&n.dataEach)for(var i=e.start;i<e.end;i++)n.dataEach(r,i);else n&&n.progress&&n.progress(e,r)}}function W1e(a){return a.data.count()}function $1e(a){Y2=null;try{a(Kv,mY)}catch{}return Y2}var Kv={},mY={},Y2;gY(Kv,fM);gY(mY,V$);Kv.eachSeriesByType=Kv.eachRawSeriesByType=function(a){Y2=a};Kv.eachComponent=function(a){a.mainType==="series"&&a.subType&&(Y2=a.subType)};function gY(a,e){for(var t in e.prototype)a[t]=Bn}var qt=Fe.darkColor,Y1e=qt.background,ag=function(){return{axisLine:{lineStyle:{color:qt.axisLine}},splitLine:{lineStyle:{color:qt.axisSplitLine}},splitArea:{areaStyle:{color:[qt.backgroundTint,qt.backgroundTransparent]}},minorSplitLine:{lineStyle:{color:qt.axisMinorSplitLine}},axisLabel:{color:qt.axisLabel},axisName:{}}},i9={label:{color:qt.secondary},itemStyle:{borderColor:qt.borderTint},dividerLineStyle:{color:qt.border}},vY={darkMode:!0,color:qt.theme,backgroundColor:Y1e,axisPointer:{lineStyle:{color:qt.border},crossStyle:{color:qt.borderShade},label:{color:qt.tertiary}},legend:{textStyle:{color:qt.secondary},pageTextStyle:{color:qt.tertiary}},textStyle:{color:qt.secondary},title:{textStyle:{color:qt.primary},subtextStyle:{color:qt.quaternary}},toolbox:{iconStyle:{borderColor:qt.accent50}},tooltip:{backgroundColor:qt.neutral20,defaultBorderColor:qt.border,textStyle:{color:qt.tertiary}},dataZoom:{borderColor:qt.accent10,textStyle:{color:qt.tertiary},brushStyle:{color:qt.backgroundTint},handleStyle:{color:qt.neutral00,borderColor:qt.accent20},moveHandleStyle:{color:qt.accent40},emphasis:{handleStyle:{borderColor:qt.accent50}},dataBackground:{lineStyle:{color:qt.accent30},areaStyle:{color:qt.accent20}},selectedDataBackground:{lineStyle:{color:qt.accent50},areaStyle:{color:qt.accent30}}},visualMap:{textStyle:{color:qt.secondary},handleStyle:{borderColor:qt.neutral30}},timeline:{lineStyle:{color:qt.accent10},label:{color:qt.tertiary},controlStyle:{color:qt.accent30,borderColor:qt.accent30}},calendar:{itemStyle:{color:qt.neutral00,borderColor:qt.neutral20},dayLabel:{color:qt.tertiary},monthLabel:{color:qt.secondary},yearLabel:{color:qt.secondary}},matrix:{x:i9,y:i9,backgroundColor:{borderColor:qt.axisLine},body:{itemStyle:{borderColor:qt.borderTint}}},timeAxis:ag(),logAxis:ag(),valueAxis:ag(),categoryAxis:ag(),line:{symbol:"circle"},graph:{color:qt.theme},gauge:{title:{color:qt.secondary},axisLine:{lineStyle:{color:[[1,qt.neutral05]]}},axisLabel:{color:qt.axisLabel},detail:{color:qt.primary}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}},funnel:{itemStyle:{borderColor:qt.background}},radar:(function(){var a=ag();return a.axisName={color:qt.axisLabel},a.axisLine.lineStyle.color=qt.neutral20,a})(),treemap:{breadcrumb:{itemStyle:{color:qt.neutral20,textStyle:{color:qt.secondary}},emphasis:{itemStyle:{color:qt.neutral30}}}},sunburst:{itemStyle:{borderColor:qt.background}},map:{itemStyle:{borderColor:qt.border,areaColor:qt.neutral10},label:{color:qt.tertiary},emphasis:{label:{color:qt.primary},itemStyle:{areaColor:qt.highlight}},select:{label:{color:qt.primary},itemStyle:{areaColor:qt.highlight}}},geo:{itemStyle:{borderColor:qt.border,areaColor:qt.neutral10},emphasis:{label:{color:qt.primary},itemStyle:{areaColor:qt.highlight}},select:{label:{color:qt.primary},itemStyle:{color:qt.highlight}}}};vY.categoryAxis.splitLine.show=!1;var q1e=(function(){function a(){}return a.prototype.normalizeQuery=function(e){var t={},r={},n={};if(jt(e)){var i=uc(e);t.mainType=i.main||null,t.subType=i.sub||null}else{var o=["Index","Name","Id"],l={name:1,dataIndex:1,dataType:1};oe(e,function(c,d){for(var u=!1,h=0;h<o.length;h++){var f=o[h],p=d.lastIndexOf(f);if(p>0&&p===d.length-f.length){var g=d.slice(0,p);g!=="data"&&(t.mainType=g,t[f.toLowerCase()]=c,u=!0)}}l.hasOwnProperty(d)&&(r[d]=c,u=!0),u||(n[d]=c)})}return{cptQuery:t,dataQuery:r,otherQuery:n}},a.prototype.filter=function(e,t){var r=this.eventInfo;if(!r)return!0;var n=r.targetEl,i=r.packedEvent,o=r.model,l=r.view;if(!o||!l)return!0;var c=t.cptQuery,d=t.dataQuery;return u(c,o,"mainType")&&u(c,o,"subType")&&u(c,o,"index","componentIndex")&&u(c,o,"name")&&u(c,o,"id")&&u(d,i,"name")&&u(d,i,"dataIndex")&&u(d,i,"dataType")&&(!l.filterForExposedEvent||l.filterForExposedEvent(e,t.otherQuery,n,i));function u(h,f,p,g){return h[p]==null||f[g||p]===h[p]}},a.prototype.afterTrigger=function(){this.eventInfo=null},a})(),g3=["symbol","symbolSize","symbolRotate","symbolOffset"],s9=g3.concat(["symbolKeepAspect"]),X1e={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,e){var t=a.getData();if(a.legendIcon&&t.setVisual("legendIcon",a.legendIcon),!a.hasSymbolVisual)return;for(var r={},n={},i=!1,o=0;o<g3.length;o++){var l=g3[o],c=a.get(l);Ut(c)?(i=!0,n[l]=c):r[l]=c}if(r.symbol=r.symbol||a.defaultSymbol,t.setVisual(Je({legendIcon:a.legendIcon||r.symbol,symbolKeepAspect:a.get("symbolKeepAspect")},r)),e.isSeriesFiltered(a))return;var d=Va(n);function u(h,f){for(var p=a.getRawValue(f),g=a.getDataParams(f),b=0;b<d.length;b++){var w=d[b];h.setItemVisual(f,w,n[w](p,g))}}return{dataEach:i?u:null}}},Z1e={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,e){if(!a.hasSymbolVisual||e.isSeriesFiltered(a))return;var t=a.getData();function r(n,i){for(var o=n.getItemModel(i),l=0;l<s9.length;l++){var c=s9[l],d=o.getShallow(c,!0);d!=null&&n.setItemVisual(i,c,d)}}return{dataEach:t.hasItemOption?r:null}}};function bM(a,e,t){switch(t){case"color":var r=a.getItemVisual(e,"style");return r[a.getVisual("drawType")];case"opacity":return a.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return a.getItemVisual(e,t)}}function Ob(a,e){switch(e){case"color":var t=a.getVisual("style");return t[a.getVisual("drawType")];case"opacity":return a.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return a.getVisual(e)}}function bY(a,e,t,r){switch(t){case"color":var n=a.ensureUniqueItemVisual(e,"style");n[a.getVisual("drawType")]=r,a.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":a.ensureUniqueItemVisual(e,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":a.setItemVisual(e,t,r);break}}function yY(a,e){function t(r,n){var i=[];return r.eachComponent({mainType:"series",subType:a,query:n},function(o){i.push(o.seriesIndex)}),i}oe([[a+"ToggleSelect","toggleSelect"],[a+"Select","select"],[a+"UnSelect","unselect"]],function(r){e(r[0],function(n,i,o){n=Je({},n),o.dispatchAction(Je(n,{type:r[1],seriesIndex:t(i,n)}))})})}function jp(a,e,t,r,n){var i=a+e;t.isSilent(i)||r.eachComponent({mainType:"series",subType:"pie"},function(o){for(var l=o.seriesIndex,c=o.option.selectedMap,d=n.selected,u=0;u<d.length;u++)if(d[u].seriesIndex===l){var h=o.getData(),f=v0(h,n.fromActionPayload);t.trigger(i,{type:i,seriesId:o.id,name:rt(f)?h.getName(f[0]):h.getName(f),selected:jt(c)?c:Je({},c)})}})}function K1e(a,e,t){a.on("selectchanged",function(r){var n=t.getModel();r.isFromClick?(jp("map","selectchanged",e,n,r),jp("pie","selectchanged",e,n,r)):r.fromAction==="select"?(jp("map","selected",e,n,r),jp("pie","selected",e,n,r)):r.fromAction==="unselect"&&(jp("map","unselected",e,n,r),jp("pie","unselected",e,n,r))})}function qf(a,e,t){for(var r;a&&!(e(a)&&(r=a,t));)a=a.__hostTarget||a.parent;return r}var Q1e=Math.round(Math.random()*9),J1e=typeof Object.defineProperty=="function",eye=(function(){function a(){this._id="__ec_inner_"+Q1e++}return a.prototype.get=function(e){return this._guard(e)[this._id]},a.prototype.set=function(e,t){var r=this._guard(e);return J1e?Object.defineProperty(r,this._id,{value:t,enumerable:!1,configurable:!0}):r[this._id]=t,this},a.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},a.prototype.has=function(e){return!!this._guard(e)[this._id]},a.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},a})(),tye=Ia.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,e){var t=e.cx,r=e.cy,n=e.width/2,i=e.height/2;a.moveTo(t,r-i),a.lineTo(t+n,r+i),a.lineTo(t-n,r+i),a.closePath()}}),aye=Ia.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,e){var t=e.cx,r=e.cy,n=e.width/2,i=e.height/2;a.moveTo(t,r-i),a.lineTo(t+n,r),a.lineTo(t,r+i),a.lineTo(t-n,r),a.closePath()}}),rye=Ia.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(a,e){var t=e.x,r=e.y,n=e.width/5*3,i=Math.max(n,e.height),o=n/2,l=o*o/(i-o),c=r-i+o+l,d=Math.asin(l/o),u=Math.cos(d)*o,h=Math.sin(d),f=Math.cos(d),p=o*.6,g=o*.7;a.moveTo(t-u,c+l),a.arc(t,c,o,Math.PI-d,Math.PI*2+d),a.bezierCurveTo(t+u-h*p,c+l+f*p,t,r-g,t,r),a.bezierCurveTo(t,r-g,t-u+h*p,c+l+f*p,t-u,c+l),a.closePath()}}),nye=Ia.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(a,e){var t=e.height,r=e.width,n=e.x,i=e.y,o=r/3*2;a.moveTo(n,i),a.lineTo(n+o,i+t),a.lineTo(n,i+t/4*3),a.lineTo(n-o,i+t),a.lineTo(n,i),a.closePath()}}),iye={line:qn,rect:Ta,roundRect:Ta,square:Ta,circle:Ud,diamond:aye,pin:rye,arrow:nye,triangle:tye},sye={line:function(a,e,t,r,n){n.x1=a,n.y1=e+r/2,n.x2=a+t,n.y2=e+r/2},rect:function(a,e,t,r,n){n.x=a,n.y=e,n.width=t,n.height=r},roundRect:function(a,e,t,r,n){n.x=a,n.y=e,n.width=t,n.height=r,n.r=Math.min(t,r)/4},square:function(a,e,t,r,n){var i=Math.min(t,r);n.x=a,n.y=e,n.width=i,n.height=i},circle:function(a,e,t,r,n){n.cx=a+t/2,n.cy=e+r/2,n.r=Math.min(t,r)/2},diamond:function(a,e,t,r,n){n.cx=a+t/2,n.cy=e+r/2,n.width=t,n.height=r},pin:function(a,e,t,r,n){n.x=a+t/2,n.y=e+r/2,n.width=t,n.height=r},arrow:function(a,e,t,r,n){n.x=a+t/2,n.y=e+r/2,n.width=t,n.height=r},triangle:function(a,e,t,r,n){n.cx=a+t/2,n.cy=e+r/2,n.width=t,n.height=r}},q2={};oe(iye,function(a,e){q2[e]=new a});var oye=Ia.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(a,e,t){var r=O2(a,e,t),n=this.shape;return n&&n.symbolType==="pin"&&e.position==="inside"&&(r.y=t.y+t.height*.4),r},buildPath:function(a,e,t){var r=e.symbolType;if(r!=="none"){var n=q2[r];n||(r="rect",n=q2[r]),sye[r](e.x,e.y,e.width,e.height,n.shape),n.buildPath(a,n.shape,t)}}});function lye(a,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=a,t.fill=e||Fe.color.neutral00,t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=a:t.fill=a,this.markRedraw()}}function ei(a,e,t,r,n,i,o){var l=a.indexOf("empty")===0;l&&(a=a.substr(5,1).toLowerCase()+a.substr(6));var c;return a.indexOf("image://")===0?c=e$(a.slice(8),new Jt(e,t,r,n),o?"center":"cover"):a.indexOf("path://")===0?c=$v(a.slice(7),{},new Jt(e,t,r,n),o?"center":"cover"):c=new oye({shape:{symbolType:a,x:e,y:t,width:r,height:n}}),c.__isEmptyBrush=l,c.setColor=lye,i&&c.setColor(i),c}function Jx(a){return rt(a)||(a=[+a,+a]),[a[0]||0,a[1]||0]}function I0(a,e){if(a!=null)return rt(a)||(a=[a,a]),[_t(a[0],e[0])||0,_t(Pt(a[1],a[0]),e[1])||0]}function Xf(a){return isFinite(a)}function cye(a,e,t){var r=e.x==null?0:e.x,n=e.x2==null?1:e.x2,i=e.y==null?0:e.y,o=e.y2==null?0:e.y2;e.global||(r=r*t.width+t.x,n=n*t.width+t.x,i=i*t.height+t.y,o=o*t.height+t.y),r=Xf(r)?r:0,n=Xf(n)?n:1,i=Xf(i)?i:0,o=Xf(o)?o:0;var l=a.createLinearGradient(r,i,n,o);return l}function dye(a,e,t){var r=t.width,n=t.height,i=Math.min(r,n),o=e.x==null?.5:e.x,l=e.y==null?.5:e.y,c=e.r==null?.5:e.r;e.global||(o=o*r+t.x,l=l*n+t.y,c=c*i),o=Xf(o)?o:.5,l=Xf(l)?l:.5,c=c>=0&&Xf(c)?c:.5;var d=a.createRadialGradient(o,l,0,o,l,c);return d}function v3(a,e,t){for(var r=e.type==="radial"?dye(a,e,t):cye(a,e,t),n=e.colorStops,i=0;i<n.length;i++)r.addColorStop(n[i].offset,n[i].color);return r}function uye(a,e){if(a===e||!a&&!e)return!1;if(!a||!e||a.length!==e.length)return!0;for(var t=0;t<a.length;t++)if(a[t]!==e[t])return!0;return!1}function Ly(a){return parseInt(a,10)}function ex(a,e,t){var r=["width","height"][e],n=["clientWidth","clientHeight"][e],i=["paddingLeft","paddingTop"][e],o=["paddingRight","paddingBottom"][e];if(t[r]!=null&&t[r]!=="auto")return parseFloat(t[r]);var l=document.defaultView.getComputedStyle(a);return(a[n]||Ly(l[r])||Ly(a.style[r]))-(Ly(l[i])||0)-(Ly(l[o])||0)|0}function hye(a,e){return!a||a==="solid"||!(e>0)?null:a==="dashed"?[4*e,2*e]:a==="dotted"?[e]:Xa(a)?[a]:rt(a)?a:null}function yM(a){var e=a.style,t=e.lineDash&&e.lineWidth>0&&hye(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(t){var n=e.strokeNoScale&&a.getLineScale?a.getLineScale():1;n&&n!==1&&(t=it(t,function(i){return i/n}),r/=n)}return[t,r]}var fye=new Tc(!0);function X2(a){var e=a.stroke;return!(e==null||e==="none"||!(a.lineWidth>0))}function o9(a){return typeof a=="string"&&a!=="none"}function Z2(a){var e=a.fill;return e!=null&&e!=="none"}function l9(a,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=a.globalAlpha;a.globalAlpha=e.fillOpacity*e.opacity,a.fill(),a.globalAlpha=t}else a.fill()}function c9(a,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=a.globalAlpha;a.globalAlpha=e.strokeOpacity*e.opacity,a.stroke(),a.globalAlpha=t}else a.stroke()}function b3(a,e,t){var r=FT(e.image,e.__image,t);if(uN(r)){var n=a.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&n&&n.setTransform){var i=new DOMMatrix;i.translateSelf(e.x||0,e.y||0),i.rotateSelf(0,0,(e.rotation||0)*Iw),i.scaleSelf(e.scaleX||1,e.scaleY||1),n.setTransform(i)}return n}}function pye(a,e,t,r){var n,i=X2(t),o=Z2(t),l=t.strokePercent,c=l<1,d=!e.path;(!e.silent||c)&&d&&e.createPathProxy();var u=e.path||fye,h=e.__dirty;if(!r){var f=t.fill,p=t.stroke,g=o&&!!f.colorStops,b=i&&!!p.colorStops,w=o&&!!f.image,_=i&&!!p.image,k=void 0,T=void 0,D=void 0,I=void 0,O=void 0;(g||b)&&(O=e.getBoundingRect()),g&&(k=h?v3(a,f,O):e.__canvasFillGradient,e.__canvasFillGradient=k),b&&(T=h?v3(a,p,O):e.__canvasStrokeGradient,e.__canvasStrokeGradient=T),w&&(D=h||!e.__canvasFillPattern?b3(a,f,e):e.__canvasFillPattern,e.__canvasFillPattern=D),_&&(I=h||!e.__canvasStrokePattern?b3(a,p,e):e.__canvasStrokePattern,e.__canvasStrokePattern=I),g?a.fillStyle=k:w&&(D?a.fillStyle=D:o=!1),b?a.strokeStyle=T:_&&(I?a.strokeStyle=I:i=!1)}var P=e.getGlobalScale();u.setScale(P[0],P[1],e.segmentIgnoreThreshold);var V,G;a.setLineDash&&t.lineDash&&(n=yM(e),V=n[0],G=n[1]);var Q=!0;(d||h&Hp)&&(u.setDPR(a.dpr),c?u.setContext(null):(u.setContext(a),Q=!1),u.reset(),e.buildPath(u,e.shape,r),u.toStatic(),e.pathUpdated()),Q&&u.rebuildPath(a,c?l:1),V&&(a.setLineDash(V),a.lineDashOffset=G),r||(t.strokeFirst?(i&&c9(a,t),o&&l9(a,t)):(o&&l9(a,t),i&&c9(a,t))),V&&a.setLineDash([])}function xye(a,e,t){var r=e.__image=FT(t.image,e.__image,e,e.onload);if(!(!r||!uN(r))){var n=t.x||0,i=t.y||0,o=e.getWidth(),l=e.getHeight(),c=r.width/r.height;if(o==null&&l!=null?o=l*c:l==null&&o!=null?l=o/c:o==null&&l==null&&(o=r.width,l=r.height),t.sWidth&&t.sHeight){var d=t.sx||0,u=t.sy||0;a.drawImage(r,d,u,t.sWidth,t.sHeight,n,i,o,l)}else if(t.sx&&t.sy){var d=t.sx,u=t.sy,h=o-d,f=l-u;a.drawImage(r,d,u,h,f,n,i,o,l)}else a.drawImage(r,n,i,o,l)}}function mye(a,e,t){var r,n=t.text;if(n!=null&&(n+=""),n){a.font=t.font||Id,a.textAlign=t.textAlign,a.textBaseline=t.textBaseline;var i=void 0,o=void 0;a.setLineDash&&t.lineDash&&(r=yM(e),i=r[0],o=r[1]),i&&(a.setLineDash(i),a.lineDashOffset=o),t.strokeFirst?(X2(t)&&a.strokeText(n,t.x,t.y),Z2(t)&&a.fillText(n,t.x,t.y)):(Z2(t)&&a.fillText(n,t.x,t.y),X2(t)&&a.strokeText(n,t.x,t.y)),i&&a.setLineDash([])}}var d9=["shadowBlur","shadowOffsetX","shadowOffsetY"],u9=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function wY(a,e,t,r,n){var i=!1;if(!r&&(t=t||{},e===t))return!1;if(r||e.opacity!==t.opacity){$s(a,n),i=!0;var o=Math.max(Math.min(e.opacity,1),0);a.globalAlpha=isNaN(o)?n0.opacity:o}(r||e.blend!==t.blend)&&(i||($s(a,n),i=!0),a.globalCompositeOperation=e.blend||n0.blend);for(var l=0;l<d9.length;l++){var c=d9[l];(r||e[c]!==t[c])&&(i||($s(a,n),i=!0),a[c]=a.dpr*(e[c]||0))}return(r||e.shadowColor!==t.shadowColor)&&(i||($s(a,n),i=!0),a.shadowColor=e.shadowColor||n0.shadowColor),i}function h9(a,e,t,r,n){var i=Qv(e,n.inHover),o=r?null:t&&Qv(t,n.inHover)||{};if(i===o)return!1;var l=wY(a,i,o,r,n);if((r||i.fill!==o.fill)&&(l||($s(a,n),l=!0),o9(i.fill)&&(a.fillStyle=i.fill)),(r||i.stroke!==o.stroke)&&(l||($s(a,n),l=!0),o9(i.stroke)&&(a.strokeStyle=i.stroke)),(r||i.opacity!==o.opacity)&&(l||($s(a,n),l=!0),a.globalAlpha=i.opacity==null?1:i.opacity),e.hasStroke()){var c=i.lineWidth,d=c/(i.strokeNoScale&&e.getLineScale?e.getLineScale():1);a.lineWidth!==d&&(l||($s(a,n),l=!0),a.lineWidth=d)}for(var u=0;u<u9.length;u++){var h=u9[u],f=h[0];(r||i[f]!==o[f])&&(l||($s(a,n),l=!0),a[f]=i[f]||h[1])}return l}function gye(a,e,t,r,n){return wY(a,Qv(e,n.inHover),t&&Qv(t,n.inHover),r,n)}function _Y(a,e){var t=e.transform,r=a.dpr||1;t?a.setTransform(r*t[0],r*t[1],r*t[2],r*t[3],r*t[4],r*t[5]):a.setTransform(r,0,0,r,0,0)}function vye(a,e,t){for(var r=!1,n=0;n<a.length;n++){var i=a[n];r=r||i.isZeroArea(),_Y(e,i),e.beginPath(),i.buildPath(e,i.shape),e.clip()}t.allClipped=r}function bye(a,e){return a&&e?a[0]!==e[0]||a[1]!==e[1]||a[2]!==e[2]||a[3]!==e[3]||a[4]!==e[4]||a[5]!==e[5]:!(!a&&!e)}var f9=1,p9=2,x9=3,m9=4;function yye(a){var e=Z2(a),t=X2(a);return!(a.lineDash||!(+e^+t)||e&&typeof a.fill!="string"||t&&typeof a.stroke!="string"||a.strokePercent<1||a.strokeOpacity<1||a.fillOpacity<1)}function $s(a,e){e.batchFill&&a.fill(),e.batchStroke&&a.stroke(),e.batchFill="",e.batchStroke=""}function Qv(a,e){return e&&a.__hoverStyle||a.style}function NY(a,e){Zf(a,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Zf(a,e,t,r){var n=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=~yo,e.__isRendered=!1;return}var i=e.__clipPaths,o=t.prevElClipPaths,l=!1,c=!1;if((!o||uye(i,o))&&(o&&o.length&&($s(a,t),a.restore(),c=l=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),i&&i.length&&($s(a,t),a.save(),vye(i,a,t),l=!0),t.prevElClipPaths=i),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var d=t.prevEl;d||(c=l=!0);var u=e instanceof Ia&&e.autoBatch&&yye(e.style);l||bye(n,d.transform)?($s(a,t),_Y(a,e)):u||$s(a,t);var h=Qv(e,t.inHover);e instanceof Ia?(t.lastDrawType!==f9&&(c=!0,t.lastDrawType=f9),h9(a,e,d,c,t),(!u||!t.batchFill&&!t.batchStroke)&&a.beginPath(),pye(a,e,h,u),u&&(t.batchFill=h.fill||"",t.batchStroke=h.stroke||"")):e instanceof kx?(t.lastDrawType!==x9&&(c=!0,t.lastDrawType=x9),h9(a,e,d,c,t),mye(a,e,h)):e instanceof Li?(t.lastDrawType!==p9&&(c=!0,t.lastDrawType=p9),gye(a,e,d,c,t),xye(a,e,h)):e.getTemporalDisplayables&&(t.lastDrawType!==m9&&(c=!0,t.lastDrawType=m9),wye(a,e,t)),u&&r&&$s(a,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function wye(a,e,t){var r=e.getDisplayables(),n=e.getTemporalDisplayables();a.save();var i={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},o,l;for(o=e.getCursor(),l=r.length;o<l;o++){var c=r[o];c.beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),Zf(a,c,i,o===l-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),i.prevEl=c}for(var d=0,u=n.length;d<u;d++){var c=n[d];c.beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),Zf(a,c,i,d===u-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),i.prevEl=c}e.clearTemporalDisplayables(),e.notClear=!0,a.restore()}var e5=new eye,g9=new jx(100),v9=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Tx(a,e){if(a==="none")return null;var t=e.getDevicePixelRatio(),r=e.getZr(),n=r.painter.type==="svg";a.dirty&&e5.delete(a);var i=e5.get(a);if(i)return i;var o=Kt(a,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var l={repeat:"repeat"};return c(l),l.rotation=o.rotation,l.scaleX=l.scaleY=n?1:1/t,e5.set(a,l),a.dirty=!1,l;function c(d){for(var u=[t],h=!0,f=0;f<v9.length;++f){var p=o[v9[f]];if(p!=null&&!rt(p)&&!jt(p)&&!Xa(p)&&typeof p!="boolean"){h=!1;break}u.push(p)}var g;if(h){g=u.join(",")+(n?"-svg":"");var b=g9.get(g);b&&(n?d.svgElement=b:d.image=b)}var w=SY(o.dashArrayX),_=_ye(o.dashArrayY),k=jY(o.symbol),T=Nye(w),D=kY(_),I=!n&&kl.createCanvas(),O=n&&{tag:"g",attrs:{},key:"dcl",children:[]},P=G(),V;I&&(I.width=P.width*t,I.height=P.height*t,V=I.getContext("2d")),Q(),h&&g9.put(g,I||O),d.image=I,d.svgElement=O,d.svgWidth=P.width,d.svgHeight=P.height;function G(){for(var $=1,ae=0,J=T.length;ae<J;++ae)$=RO($,T[ae]);for(var U=1,ae=0,J=k.length;ae<J;++ae)U=RO(U,k[ae].length);$*=U;var F=D*T.length*k.length;return{width:Math.max(1,Math.min($,o.maxTileWidth)),height:Math.max(1,Math.min(F,o.maxTileHeight))}}function Q(){V&&(V.clearRect(0,0,I.width,I.height),o.backgroundColor&&(V.fillStyle=o.backgroundColor,V.fillRect(0,0,I.width,I.height)));for(var $=0,ae=0;ae<_.length;++ae)$+=_[ae];if($<=0)return;for(var J=-D,U=0,F=0,W=0;J<P.height;){if(U%2===0){for(var K=F/2%k.length,ee=0,ne=0,re=0;ee<P.width*2;){for(var Z=0,ae=0;ae<w[W].length;++ae)Z+=w[W][ae];if(Z<=0)break;if(ne%2===0){var ie=(1-o.symbolSize)*.5,de=ee+w[W][ne]*ie,fe=J+_[U]*ie,he=w[W][ne]*o.symbolSize,ve=_[U]*o.symbolSize,Oe=re/2%k[K].length;Se(de,fe,he,ve,k[K][Oe])}ee+=w[W][ne],++re,++ne,ne===w[W].length&&(ne=0)}++W,W===w.length&&(W=0)}J+=_[U],++F,++U,U===_.length&&(U=0)}function Se(Ce,we,xe,be,Ee){var ze=n?1:t,Ze=ei(Ee,Ce*ze,we*ze,xe*ze,be*ze,o.color,o.symbolKeepAspect);if(n){var Re=r.painter.renderOneToVNode(Ze);Re&&O.children.push(Re)}else NY(V,Ze)}}}}function jY(a){if(!a||a.length===0)return[["rect"]];if(jt(a))return[[a]];for(var e=!0,t=0;t<a.length;++t)if(!jt(a[t])){e=!1;break}if(e)return jY([a]);for(var r=[],t=0;t<a.length;++t)jt(a[t])?r.push([a[t]]):r.push(a[t]);return r}function SY(a){if(!a||a.length===0)return[[0,0]];if(Xa(a)){var e=Math.ceil(a);return[[e,e]]}for(var t=!0,r=0;r<a.length;++r)if(!Xa(a[r])){t=!1;break}if(t)return SY([a]);for(var n=[],r=0;r<a.length;++r)if(Xa(a[r])){var e=Math.ceil(a[r]);n.push([e,e])}else{var e=it(a[r],function(l){return Math.ceil(l)});e.length%2===1?n.push(e.concat(e)):n.push(e)}return n}function _ye(a){if(!a||typeof a=="object"&&a.length===0)return[0,0];if(Xa(a)){var e=Math.ceil(a);return[e,e]}var t=it(a,function(r){return Math.ceil(r)});return a.length%2?t.concat(t):t}function Nye(a){return it(a,function(e){return kY(e)})}function kY(a){for(var e=0,t=0;t<a.length;++t)e+=a[t];return a.length%2===1?e*2:e}function jye(a,e){a.eachRawSeries(function(t){if(!a.isSeriesFiltered(t)){var r=t.getData();r.hasItemVisual()&&r.each(function(o){var l=r.getItemVisual(o,"decal");if(l){var c=r.ensureUniqueItemVisual(o,"style");c.decal=Tx(l,e)}});var n=r.getVisual("decal");if(n){var i=r.getVisual("style");i.decal=Tx(n,e)}}})}var gl=new il,CY={};function Sye(a,e){CY[a]=e}function AY(a){return CY[a]}var TY={};function kye(a,e){TY[a]=e}function Cye(a){return TY[a]}var Aye=1,Tye=800,Mye=900,Eye=1e3,Dye=2e3,Iye=5e3,MY=1e3,Rye=1100,wM=2e3,EY=3e3,Lye=4e3,TN=4500,Oye=4600,Pye=5e3,Bye=6e3,DY=7e3,zye={PROCESSOR:{FILTER:Eye,SERIES_FILTER:Tye,STATISTIC:Iye},VISUAL:{LAYOUT:MY,PROGRESSIVE_LAYOUT:Rye,GLOBAL:wM,CHART:EY,POST_CHART_LAYOUT:Oye,COMPONENT:Lye,BRUSH:Pye,CHART_ITEM:TN,ARIA:Bye,DECAL:DY}},di="__flagInMainProcess",Oy="__mainProcessVersion",Ti="__pendingUpdate",t5="__needsUpdateStatus",b9=/^[a-zA-Z0-9_]+$/,a5="__connectUpdateStatus",y9=0,Fye=1,Vye=2;function IY(a){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return LY(this,a,e)}}function RY(a){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return LY(this,a,e)}}function LY(a,e,t){return t[0]=t[0]&&t[0].toLowerCase(),il.prototype[e].apply(a,t)}var OY=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e})(il),PY=OY.prototype;PY.on=RY("on");PY.off=RY("off");var jf,r5,Py,cd,By,n5,i5,Sp,kp,w9,_9,s5,N9,zy,j9,BY,Fo,S9,Cp,zY=(function(a){Le(e,a);function e(t,r,n){var i=a.call(this,new q1e)||this;i._chartsViews=[],i._chartsMap={},i._componentsViews=[],i._componentsMap={},i._pendingActions=[],n=n||{},i._dom=t;var o="canvas",l="auto",c=!1;i[Oy]=1,n.ssr&&bme(function(f){var p=na(f),g=p.dataIndex;if(g!=null){var b=Rt();return b.set("series_index",p.seriesIndex),b.set("data_index",g),p.ssrType&&b.set("ssr_type",p.ssrType),b}});var d=i._zr=MO(t,{renderer:n.renderer||o,devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height,ssr:n.ssr,useDirtyRect:Pt(n.useDirtyRect,c),useCoarsePointer:Pt(n.useCoarsePointer,l),pointerSize:n.pointerSize});i._ssr=n.ssr,i._throttledZrFlush=vM(St(d.flush,d),17),i._updateTheme(r),i._locale=Xve(n.locale||h$),i._coordSysMgr=new Rb;var u=i._api=j9(i);function h(f,p){return f.__prio-p.__prio}return Ow(Q2,h),Ow(_3,h),i._scheduler=new pY(i,u,_3,Q2),i._messageCenter=new OY,i._initEvents(),i.resize=St(i.resize,i),d.animation.on("frame",i._onframe,i),w9(d,i),_9(d,i),k2(i),i}return e.prototype._onframe=function(){if(!this._disposed){S9(this);var t=this._scheduler;if(this[Ti]){var r=this[Ti].silent;this[di]=!0,Cp(this);try{jf(this),cd.update.call(this,null,this[Ti].updateParams)}catch(c){throw this[di]=!1,this[Ti]=null,c}this._zr.flush(),this[di]=!1,this[Ti]=null,Sp.call(this,r),kp.call(this,r)}else if(t.unfinished){var n=Aye,i=this._model,o=this._api;t.unfinished=!1;do{var l=+new Date;t.performSeriesTasks(i),t.performDataProcessorTasks(i),n5(this,i),t.performVisualTasks(i),zy(this,this._model,o,"remain",{}),n-=+new Date-l}while(n>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,r,n){if(!this[di]){if(this._disposed){this.id;return}var i,o,l;if(Qt(r)&&(n=r.lazyUpdate,i=r.silent,o=r.replaceMerge,l=r.transition,r=r.notMerge),this[di]=!0,Cp(this),!this._model||r){var c=new Mbe(this._api),d=this._theme,u=this._model=new fM;u.scheduler=this._scheduler,u.ssr=this._ssr,u.init(null,null,null,d,this._locale,c)}this._model.setOption(t,{replaceMerge:o},N3);var h={seriesTransition:l,optionChanged:!0};if(n)this[Ti]={silent:i,updateParams:h},this[di]=!1,this.getZr().wakeUp();else{try{jf(this),cd.update.call(this,null,h)}catch(f){throw this[Ti]=null,this[di]=!1,f}this._ssr||this._zr.flush(),this[Ti]=null,this[di]=!1,Sp.call(this,i),kp.call(this,i)}}},e.prototype.setTheme=function(t,r){if(!this[di]){if(this._disposed){this.id;return}var n=this._model;if(n){var i=r&&r.silent,o=null;this[Ti]&&(i==null&&(i=this[Ti].silent),o=this[Ti].updateParams,this[Ti]=null),this[di]=!0,Cp(this);try{this._updateTheme(t),n.setTheme(this._theme),jf(this),cd.update.call(this,{type:"setTheme"},o)}catch(l){throw this[di]=!1,l}this[di]=!1,Sp.call(this,i),kp.call(this,i)}}},e.prototype._updateTheme=function(t){jt(t)&&(t=FY[t]),t&&(t=$t(t),t&&U$(t,!0),this._theme=t)},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Ba.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var r=this._zr.painter;return r.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){var t=this._zr,r=t.storage.getDisplayList();return oe(r,function(n){n.stopAnimation(null,!0)}),t.painter.toDataURL()},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var r=t.excludeComponents,n=this._model,i=[],o=this;oe(r,function(c){n.eachComponent({mainType:c},function(d){var u=o._componentsMap[d.__viewId];u.group.ignore||(i.push(u),u.group.ignore=!0)})});var l=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return oe(i,function(c){c.group.ignore=!1}),l},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var r=t.type==="svg",n=this.group,i=Math.min,o=Math.max,l=1/0;if(k9[n]){var c=l,d=l,u=-l,h=-l,f=[],p=t&&t.pixelRatio||this.getDevicePixelRatio();oe(pv,function(T,D){if(T.group===n){var I=r?T.getZr().painter.getSvgDom().innerHTML:T.renderToCanvas($t(t)),O=T.getDom().getBoundingClientRect();c=i(O.left,c),d=i(O.top,d),u=o(O.right,u),h=o(O.bottom,h),f.push({dom:I,left:O.left,top:O.top})}}),c*=p,d*=p,u*=p,h*=p;var g=u-c,b=h-d,w=kl.createCanvas(),_=MO(w,{renderer:r?"svg":"canvas"});if(_.resize({width:g,height:b}),r){var k="";return oe(f,function(T){var D=T.left-c,I=T.top-d;k+='<g transform="translate('+D+","+I+')">'+T.dom+"</g>"}),_.painter.getSvgRoot().innerHTML=k,t.connectedBackgroundColor&&_.painter.setBackgroundColor(t.connectedBackgroundColor),_.refreshImmediately(),_.painter.toDataURL()}else return t.connectedBackgroundColor&&_.add(new Ta({shape:{x:0,y:0,width:g,height:b},style:{fill:t.connectedBackgroundColor}})),oe(f,function(T){var D=new Li({style:{x:T.left*p-c,y:T.top*p-d,image:T.dom}});_.add(D)}),_.refreshImmediately(),w.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,r,n){return By(this,"convertToPixel",t,r,n)},e.prototype.convertToLayout=function(t,r,n){return By(this,"convertToLayout",t,r,n)},e.prototype.convertFromPixel=function(t,r,n){return By(this,"convertFromPixel",t,r,n)},e.prototype.containPixel=function(t,r){if(this._disposed){this.id;return}var n=this._model,i,o=lx(n,t);return oe(o,function(l,c){c.indexOf("Models")>=0&&oe(l,function(d){var u=d.coordinateSystem;if(u&&u.containPoint)i=i||!!u.containPoint(r);else if(c==="seriesModels"){var h=this._chartsMap[d.__viewId];h&&h.containPoint&&(i=i||h.containPoint(r,d))}},this)},this),!!i},e.prototype.getVisual=function(t,r){var n=this._model,i=lx(n,t,{defaultMainType:"series"}),o=i.seriesModel,l=o.getData(),c=i.hasOwnProperty("dataIndexInside")?i.dataIndexInside:i.hasOwnProperty("dataIndex")?l.indexOfRawIndex(i.dataIndex):null;return c!=null?bM(l,c,r):Ob(l,r)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;oe(Hye,function(n){var i=function(o){var l=t.getModel(),c=o.target,d,u=n==="globalout";if(u?d={}:c&&qf(c,function(b){var w=na(b);if(w&&w.dataIndex!=null){var _=w.dataModel||l.getSeriesByIndex(w.seriesIndex);return d=_&&_.getDataParams(w.dataIndex,w.dataType,c)||{},!0}else if(w.eventData)return d=Je({},w.eventData),!0},!0),d){var h=d.componentType,f=d.componentIndex;(h==="markLine"||h==="markPoint"||h==="markArea")&&(h="series",f=d.seriesIndex);var p=h&&f!=null&&l.getComponent(h,f),g=p&&t[p.mainType==="series"?"_chartsMap":"_componentsMap"][p.__viewId];d.event=o,d.type=n,t._$eventProcessor.eventInfo={targetEl:c,packedEvent:d,model:p,view:g},t.trigger(n,d)}};i.zrEventfulCallAtLast=!0,t._zr.on(n,i,t)});var r=this._messageCenter;oe(w3,function(n,i){r.on(i,function(o){t.trigger(i,o)})}),K1e(r,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&wW(this.getDom(),NM,"");var r=this,n=r._api,i=r._model;oe(r._componentsViews,function(o){o.dispose(i,n)}),oe(r._chartsViews,function(o){o.dispose(i,n)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete pv[r.id]},e.prototype.resize=function(t){if(!this[di]){if(this._disposed){this.id;return}this._zr.resize(t);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var n=r.resetOption("media"),i=t&&t.silent;this[Ti]&&(i==null&&(i=this[Ti].silent),n=!0,this[Ti]=null),this[di]=!0,Cp(this);try{n&&jf(this),cd.update.call(this,{type:"resize",animation:Je({duration:0},t&&t.animation)})}catch(o){throw this[di]=!1,o}this[di]=!1,Sp.call(this,i),kp.call(this,i)}}},e.prototype.showLoading=function(t,r){if(this._disposed){this.id;return}if(Qt(t)&&(r=t,t=""),t=t||"default",this.hideLoading(),!!j3[t]){var n=j3[t](this._api,r),i=this._zr;this._loadingFX=n,i.add(n)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var r=Je({},t);return r.type=y3[t.type],r},e.prototype.dispatchAction=function(t,r){if(this._disposed){this.id;return}if(Qt(r)||(r={silent:!!r}),!!K2[t.type]&&this._model){if(this[di]){this._pendingActions.push(t);return}var n=r.silent;i5.call(this,t,n);var i=r.flush;i?this._zr.flush():i!==!1&&Ba.browser.weChat&&this._throttledZrFlush(),Sp.call(this,n),kp.call(this,n)}},e.prototype.updateLabelLayout=function(){gl.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var r=t.seriesIndex,n=this.getModel(),i=n.getSeriesByIndex(r);i.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=(function(){jf=function(h){var f=h._scheduler;f.restorePipelines(h._model),f.prepareStageTasks(),r5(h,!0),r5(h,!1),f.plan()},r5=function(h,f){for(var p=h._model,g=h._scheduler,b=f?h._componentsViews:h._chartsViews,w=f?h._componentsMap:h._chartsMap,_=h._zr,k=h._api,T=0;T<b.length;T++)b[T].__alive=!1;f?p.eachComponent(function(O,P){O!=="series"&&D(P)}):p.eachSeries(D);function D(O){var P=O.__requireNewView;O.__requireNewView=!1;var V="_ec_"+O.id+"_"+O.type,G=!P&&w[V];if(!G){var Q=uc(O.type),$=f?tn.getClass(Q.main,Q.sub):Mr.getClass(Q.sub);G=new $,G.init(p,k),w[V]=G,b.push(G),_.add(G.group)}O.__viewId=G.__id=V,G.__alive=!0,G.__model=O,G.group.__ecComponentInfo={mainType:O.mainType,index:O.componentIndex},!f&&g.prepareView(G,O,p,k)}for(var T=0;T<b.length;){var I=b[T];I.__alive?T++:(!f&&I.renderTask.dispose(),_.remove(I.group),I.dispose(p,k),b.splice(T,1),w[I.__id]===I&&delete w[I.__id],I.__id=I.group.__ecComponentInfo=null)}},Py=function(h,f,p,g,b){var w=h._model;if(w.setUpdatePayload(p),!g){oe([].concat(h._componentsViews).concat(h._chartsViews),I);return}var _={};_[g+"Id"]=p[g+"Id"],_[g+"Index"]=p[g+"Index"],_[g+"Name"]=p[g+"Name"];var k={mainType:g,query:_};b&&(k.subType=b);var T=p.excludeSeriesId,D;T!=null&&(D=Rt(),oe(Rr(T),function(O){var P=ui(O,null);P!=null&&D.set(P,!0)})),w&&w.eachComponent(k,function(O){var P=D&&D.get(O.id)!=null;if(!P)if(cP(p))if(O instanceof Fr)p.type===i0&&!p.notBlur&&!O.get(["emphasis","disabled"])&&Yge(O,p,h._api);else{var V=YT(O.mainType,O.componentIndex,p.name,h._api),G=V.focusSelf,Q=V.dispatchers;p.type===i0&&G&&!p.notBlur&&Q4(O.mainType,O.componentIndex,h._api),Q&&oe(Q,function($){p.type===i0?Od($):Pd($)})}else e3(p)&&O instanceof Fr&&(Zge(O,p,h._api),oP(O),Fo(h))},h),w&&w.eachComponent(k,function(O){var P=D&&D.get(O.id)!=null;P||I(h[g==="series"?"_chartsMap":"_componentsMap"][O.__viewId])},h);function I(O){O&&O.__alive&&O[f]&&O[f](O.__model,w,h._api,p)}},cd={prepareAndUpdate:function(h){jf(this),cd.update.call(this,h,h&&{optionChanged:h.newOption!=null})},update:function(h,f){var p=this._model,g=this._api,b=this._zr,w=this._coordSysMgr,_=this._scheduler;if(p){p.setUpdatePayload(h),_.restoreData(p,h),_.performSeriesTasks(p),w.create(p,g),_.performDataProcessorTasks(p,h),n5(this,p),w.update(p,g),r(p),_.performVisualTasks(p,h);var k=p.get("backgroundColor")||"transparent";b.setBackgroundColor(k);var T=p.get("darkMode");T!=null&&T!=="auto"&&b.setDarkMode(T),s5(this,p,g,h,f),gl.trigger("afterupdate",p,g)}},updateTransform:function(h){var f=this,p=this._model,g=this._api;if(p){p.setUpdatePayload(h);var b=[];p.eachComponent(function(_,k){if(_!=="series"){var T=f.getViewOfComponentModel(k);if(T&&T.__alive)if(T.updateTransform){var D=T.updateTransform(k,p,g,h);D&&D.update&&b.push(T)}else b.push(T)}});var w=Rt();p.eachSeries(function(_){var k=f._chartsMap[_.__viewId];if(k.updateTransform){var T=k.updateTransform(_,p,g,h);T&&T.update&&w.set(_.uid,1)}else w.set(_.uid,1)}),r(p),this._scheduler.performVisualTasks(p,h,{setDirty:!0,dirtyMap:w}),zy(this,p,g,h,{},w),gl.trigger("afterupdate",p,g)}},updateView:function(h){var f=this._model;f&&(f.setUpdatePayload(h),Mr.markUpdateMethod(h,"updateView"),r(f),this._scheduler.performVisualTasks(f,h,{setDirty:!0}),s5(this,f,this._api,h,{}),gl.trigger("afterupdate",f,this._api))},updateVisual:function(h){var f=this,p=this._model;p&&(p.setUpdatePayload(h),p.eachSeries(function(g){g.getData().clearAllVisual()}),Mr.markUpdateMethod(h,"updateVisual"),r(p),this._scheduler.performVisualTasks(p,h,{visualType:"visual",setDirty:!0}),p.eachComponent(function(g,b){if(g!=="series"){var w=f.getViewOfComponentModel(b);w&&w.__alive&&w.updateVisual(b,p,f._api,h)}}),p.eachSeries(function(g){var b=f._chartsMap[g.__viewId];b.updateVisual(g,p,f._api,h)}),gl.trigger("afterupdate",p,this._api))},updateLayout:function(h){cd.update.call(this,h)}};function t(h,f,p,g,b){if(h._disposed){h.id;return}for(var w=h._model,_=h._coordSysMgr.getCoordinateSystems(),k,T=lx(w,p),D=0;D<_.length;D++){var I=_[D];if(I[f]&&(k=I[f](w,T,g,b))!=null)return k}}By=t,n5=function(h,f){var p=h._chartsMap,g=h._scheduler;f.eachSeries(function(b){g.updateStreamModes(b,p[b.__viewId])})},i5=function(h,f){var p=this,g=this.getModel(),b=h.type,w=h.escapeConnect,_=K2[b],k=(_.update||"update").split(":"),T=k.pop(),D=k[0]!=null&&uc(k[0]);this[di]=!0,Cp(this);var I=[h],O=!1;h.batch&&(O=!0,I=it(h.batch,function(W){return W=Kt(Je({},W),h),W.batch=null,W}));var P=[],V,G=[],Q=_.nonRefinedEventType,$=e3(h),ae=cP(h);if(ae&&HW(this._api),oe(I,function(W){var K=_.action(W,g,p._api);if(_.refineEvent?G.push(K):V=K,V=V||Je({},W),V.type=Q,P.push(V),ae){var ee=BT(h),ne=ee.queryOptionMap,re=ee.mainTypeSpecified,Z=re?ne.keys()[0]:"series";Py(p,T,W,Z),Fo(p)}else $?(Py(p,T,W,"series"),Fo(p)):D&&Py(p,T,W,D.main,D.sub)}),T!=="none"&&!ae&&!$&&!D)try{this[Ti]?(jf(this),cd.update.call(this,h),this[Ti]=null):cd[T].call(this,h)}catch(W){throw this[di]=!1,W}if(O?V={type:Q,escapeConnect:w,batch:P}:V=P[0],this[di]=!1,!f){var J=void 0;if(_.refineEvent){var U=_.refineEvent(G,h,g,this._api).eventContent;cs(Qt(U)),J=Kt({type:_.refinedEventType},U),J.fromAction=h.type,J.fromActionPayload=h,J.escapeConnect=!0}var F=this._messageCenter;F.trigger(V.type,V),J&&F.trigger(J.type,J)}},Sp=function(h){for(var f=this._pendingActions;f.length;){var p=f.shift();i5.call(this,p,h)}},kp=function(h){!h&&this.trigger("updated")},w9=function(h,f){h.on("rendered",function(p){f.trigger("rendered",p),h.animation.isFinished()&&!f[Ti]&&!f._scheduler.unfinished&&!f._pendingActions.length&&f.trigger("finished")})},_9=function(h,f){h.on("mouseover",function(p){var g=p.target,b=qf(g,Wv);b&&(qge(b,p,f._api),Fo(f))}).on("mouseout",function(p){var g=p.target,b=qf(g,Wv);b&&(Xge(b,p,f._api),Fo(f))}).on("click",function(p){var g=p.target,b=qf(g,function(k){return na(k).dataIndex!=null},!0);if(b){var w=b.selected?"unselect":"select",_=na(b);f._api.dispatchAction({type:w,dataType:_.dataType,dataIndexInside:_.dataIndex,seriesIndex:_.seriesIndex,isFromClick:!0})}})};function r(h){h.clearColorPalette(),h.eachSeries(function(f){f.clearColorPalette()})}function n(h){var f=[],p=[],g=!1;if(h.eachComponent(function(k,T){var D=T.get("zlevel")||0,I=T.get("z")||0,O=T.getZLevelKey();g=g||!!O,(k==="series"?p:f).push({zlevel:D,z:I,idx:T.componentIndex,type:k,key:O})}),g){var b=f.concat(p),w,_;Ow(b,function(k,T){return k.zlevel===T.zlevel?k.z-T.z:k.zlevel-T.zlevel}),oe(b,function(k){var T=h.getComponent(k.type,k.idx),D=k.zlevel,I=k.key;w!=null&&(D=Math.max(w,D)),I?(D===w&&I!==_&&D++,_=I):_&&(D===w&&D++,_=""),w=D,T.setZLevel(D)})}}s5=function(h,f,p,g,b){n(f),N9(h,f,p,g,b),oe(h._chartsViews,function(w){w.__alive=!1}),zy(h,f,p,g,b),oe(h._chartsViews,function(w){w.__alive||w.remove(f,p)})},N9=function(h,f,p,g,b,w){oe(w||h._componentsViews,function(_){var k=_.__model;d(k,_),_.render(k,f,p,g),c(k,_),u(k,_)})},zy=function(h,f,p,g,b,w){var _=h._scheduler;b=Je(b||{},{updatedSeries:f.getSeries()}),gl.trigger("series:beforeupdate",f,p,b);var k=!1;f.eachSeries(function(T){var D=h._chartsMap[T.__viewId];D.__alive=!0;var I=D.renderTask;_.updatePayload(I,g),d(T,D),w&&w.get(T.uid)&&I.dirty(),I.perform(_.getPerformArgs(I))&&(k=!0),D.group.silent=!!T.get("silent"),l(T,D),oP(T)}),_.unfinished=k||_.unfinished,gl.trigger("series:layoutlabels",f,p,b),gl.trigger("series:transition",f,p,b),f.eachSeries(function(T){var D=h._chartsMap[T.__viewId];c(T,D),u(T,D)}),o(h,f),gl.trigger("series:afterupdate",f,p,b)},Fo=function(h){h[t5]=!0,h.getZr().wakeUp()},Cp=function(h){h[Oy]=(h[Oy]+1)%1e3},S9=function(h){h[t5]&&(h.getZr().storage.traverse(function(f){cx(f)||i(f)}),h[t5]=!1)};function i(h){for(var f=[],p=h.currentStates,g=0;g<p.length;g++){var b=p[g];b==="emphasis"||b==="blur"||b==="select"||f.push(b)}h.selected&&h.states.select&&f.push("select"),h.hoverState===mN&&h.states.emphasis?f.push("emphasis"):h.hoverState===Ab&&h.states.blur&&f.push("blur"),h.useStates(f)}function o(h,f){var p=h._zr,g=p.storage,b=0;g.traverse(function(w){w.isGroup||b++}),b>f.get("hoverLayerThreshold")&&!Ba.node&&!Ba.worker&&f.eachSeries(function(w){if(!w.preventUsingHoverLayer){var _=h._chartsMap[w.__viewId];_.__alive&&_.eachRendered(function(k){k.states.emphasis&&(k.states.emphasis.hoverLayer=!0)})}})}function l(h,f){var p=h.get("blendMode")||null;f.eachRendered(function(g){g.isGroup||(g.style.blend=p)})}function c(h,f){if(!h.preventAutoZ){var p=_0(h);f.eachRendered(function(g){return _N(g,p.z,p.zlevel),!0})}}function d(h,f){f.eachRendered(function(p){if(!cx(p)){var g=p.getTextContent(),b=p.getTextGuideLine();p.stateTransition&&(p.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),b&&b.stateTransition&&(b.stateTransition=null),p.hasState()?(p.prevStates=p.currentStates,p.clearStates()):p.prevStates&&(p.prevStates=null)}})}function u(h,f){var p=h.getModel("stateAnimation"),g=h.isAnimationEnabled(),b=p.get("duration"),w=b>0?{duration:b,delay:p.get("delay"),easing:p.get("easing")}:null;f.eachRendered(function(_){if(_.states&&_.states.emphasis){if(cx(_))return;if(_ instanceof Ia&&ave(_),_.__dirty){var k=_.prevStates;k&&_.useStates(k)}if(g){_.stateTransition=w;var T=_.getTextContent(),D=_.getTextGuideLine();T&&(T.stateTransition=w),D&&(D.stateTransition=w)}_.__dirty&&i(_)}})}j9=function(h){return new((function(f){Le(p,f);function p(){return f!==null&&f.apply(this,arguments)||this}return p.prototype.getCoordinateSystems=function(){return h._coordSysMgr.getCoordinateSystems()},p.prototype.getComponentByElement=function(g){for(;g;){var b=g.__ecComponentInfo;if(b!=null)return h._model.getComponent(b.mainType,b.index);g=g.parent}},p.prototype.enterEmphasis=function(g,b){Od(g,b),Fo(h)},p.prototype.leaveEmphasis=function(g,b){Pd(g,b),Fo(h)},p.prototype.enterBlur=function(g){BW(g),Fo(h)},p.prototype.leaveBlur=function(g){$T(g),Fo(h)},p.prototype.enterSelect=function(g){zW(g),Fo(h)},p.prototype.leaveSelect=function(g){FW(g),Fo(h)},p.prototype.getModel=function(){return h.getModel()},p.prototype.getViewOfComponentModel=function(g){return h.getViewOfComponentModel(g)},p.prototype.getViewOfSeriesModel=function(g){return h.getViewOfSeriesModel(g)},p.prototype.getMainProcessVersion=function(){return h[Oy]},p})(V$))(h)},BY=function(h){function f(p,g){for(var b=0;b<p.length;b++){var w=p[b];w[a5]=g}}oe(y3,function(p,g){h._messageCenter.on(g,function(b){if(k9[h.group]&&h[a5]!==y9){if(b&&b.escapeConnect)return;var w=h.makeActionFromEvent(b),_=[];oe(pv,function(k){k!==h&&k.group===h.group&&_.push(k)}),f(_,y9),oe(_,function(k){k[a5]!==Fye&&k.dispatchAction(w)}),f(_,Vye)}})})}})(),e})(il),_M=zY.prototype;_M.on=IY("on");_M.off=IY("off");_M.one=function(a,e,t){var r=this;function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e&&e.apply&&e.apply(this,i),r.off(a,n)}this.on.call(this,a,n,t)};var Hye=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var K2={},y3={},w3={},_3=[],N3=[],Q2=[],FY={},j3={},pv={},k9={},Uye=+new Date-0,NM="_echarts_instance_";function VY(a,e,t){{var r=Gye(a);if(r)return r}var n=new zY(a,e,t);return n.id="ec_"+Uye++,pv[n.id]=n,wW(a,NM,n.id),BY(n),gl.trigger("afterinit",n),n}function Gye(a){return pv[Ume(a,NM)]}function HY(a,e){FY[a]=e}function UY(a){ya(N3,a)<0&&N3.push(a)}function GY(a,e){SM(_3,a,e,Dye)}function Wye(a){jM("afterinit",a)}function $ye(a){jM("afterupdate",a)}function jM(a,e){gl.on(a,e)}function Lc(a,e,t){var r,n,i,o,l;Ut(e)&&(t=e,e=""),Qt(a)?(r=a.type,n=a.event,o=a.update,l=a.publishNonRefinedEvent,t||(t=a.action),i=a.refineEvent):(r=a,n=e);function c(u){return u.toLowerCase()}n=c(n||r);var d=i?c(r):n;K2[r]||(cs(b9.test(r)&&b9.test(n)),i&&cs(n!==r),K2[r]={actionType:r,refinedEventType:n,nonRefinedEventType:d,update:o,action:t,refineEvent:i},w3[n]=1,i&&l&&(w3[d]=1),y3[d]=r)}function Yye(a,e){Rb.register(a,e)}function qye(a,e){SM(Q2,a,e,MY,"layout")}function R0(a,e){SM(Q2,a,e,EY,"visual")}var C9=[];function SM(a,e,t,r,n){if((Ut(e)||Qt(e))&&(t=e,e=r),!(ya(C9,t)>=0)){C9.push(t);var i=pY.wrapStageHandler(t,n);i.__prio=e,i.__raw=t,a.push(i)}}function WY(a,e){j3[a]=e}function $Y(a,e,t){var r=AY("registerMap");r&&r(a,e,t)}function Xye(a){var e=AY("getMap");return e&&e(a)}var Zye=l1e;R0(wM,R1e);R0(TN,L1e);R0(TN,O1e);R0(wM,X1e);R0(TN,Z1e);R0(DY,jye);UY(U$);GY(Mye,Hbe);WY("default",P1e);Lc({type:i0,event:i0,update:i0},Bn);Lc({type:Vw,event:Vw,update:Vw},Bn);Lc({type:z2,event:GT,update:z2,action:Bn,refineEvent:kM,publishNonRefinedEvent:!0});Lc({type:Z4,event:GT,update:Z4,action:Bn,refineEvent:kM,publishNonRefinedEvent:!0});Lc({type:F2,event:GT,update:F2,action:Bn,refineEvent:kM,publishNonRefinedEvent:!0});function kM(a,e,t,r){return{eventContent:{selected:Kge(t),isFromClick:e.isFromClick||!1}}}HY("default",{});HY("dark",vY);var A9=[],Kye={registerPreprocessor:UY,registerProcessor:GY,registerPostInit:Wye,registerPostUpdate:$ye,registerUpdateLifecycle:jM,registerAction:Lc,registerCoordinateSystem:Yye,registerLayout:qye,registerVisual:R0,registerTransform:Zye,registerLoading:WY,registerMap:$Y,registerImpl:Sye,PRIORITY:zye,ComponentModel:Oa,ComponentView:tn,SeriesModel:Fr,ChartView:Mr,registerComponentModel:function(a){Oa.registerClass(a)},registerComponentView:function(a){tn.registerClass(a)},registerSeriesModel:function(a){Fr.registerClass(a)},registerChartView:function(a){Mr.registerClass(a)},registerCustomSeries:function(a,e){kye(a,e)},registerSubTypeDefaulter:function(a,e){Oa.registerSubTypeDefaulter(a,e)},registerPainter:function(a,e){gme(a,e)}};function Sa(a){if(rt(a)){oe(a,function(e){Sa(e)});return}ya(A9,a)>=0||(A9.push(a),Ut(a)&&(a={install:a}),a.install(Kye))}function rg(a){return a==null?0:a.length||1}function T9(a){return a}var Bd=(function(){function a(e,t,r,n,i,o){this._old=e,this._new=t,this._oldKeyGetter=r||T9,this._newKeyGetter=n||T9,this.context=i,this._diffModeMultiple=o==="multiple"}return a.prototype.add=function(e){return this._add=e,this},a.prototype.update=function(e){return this._update=e,this},a.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},a.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},a.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},a.prototype.remove=function(e){return this._remove=e,this},a.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},a.prototype._executeOneToOne=function(){var e=this._old,t=this._new,r={},n=new Array(e.length),i=new Array(t.length);this._initIndexMap(e,null,n,"_oldKeyGetter"),this._initIndexMap(t,r,i,"_newKeyGetter");for(var o=0;o<e.length;o++){var l=n[o],c=r[l],d=rg(c);if(d>1){var u=c.shift();c.length===1&&(r[l]=c[0]),this._update&&this._update(u,o)}else d===1?(r[l]=null,this._update&&this._update(c,o)):this._remove&&this._remove(o)}this._performRestAdd(i,r)},a.prototype._executeMultiple=function(){var e=this._old,t=this._new,r={},n={},i=[],o=[];this._initIndexMap(e,r,i,"_oldKeyGetter"),this._initIndexMap(t,n,o,"_newKeyGetter");for(var l=0;l<i.length;l++){var c=i[l],d=r[c],u=n[c],h=rg(d),f=rg(u);if(h>1&&f===1)this._updateManyToOne&&this._updateManyToOne(u,d),n[c]=null;else if(h===1&&f>1)this._updateOneToMany&&this._updateOneToMany(u,d),n[c]=null;else if(h===1&&f===1)this._update&&this._update(u,d),n[c]=null;else if(h>1&&f>1)this._updateManyToMany&&this._updateManyToMany(u,d),n[c]=null;else if(h>1)for(var p=0;p<h;p++)this._remove&&this._remove(d[p]);else this._remove&&this._remove(d)}this._performRestAdd(o,n)},a.prototype._performRestAdd=function(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=t[n],o=rg(i);if(o>1)for(var l=0;l<o;l++)this._add&&this._add(i[l]);else o===1&&this._add&&this._add(i);t[n]=null}},a.prototype._initIndexMap=function(e,t,r,n){for(var i=this._diffModeMultiple,o=0;o<e.length;o++){var l="_ec_"+this[n](e[o],o);if(i||(r[o]=l),!!t){var c=t[l],d=rg(c);d===0?(t[l]=o,i&&r.push(l)):d===1?t[l]=[c,o]:c.push(o)}}},a})(),Qye=(function(){function a(e,t){this._encode=e,this._schema=t}return a.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},a.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},a})();function Jye(a,e){var t={},r=t.encode={},n=Rt(),i=[],o=[],l={};oe(a.dimensions,function(f){var p=a.getDimensionInfo(f),g=p.coordDim;if(g){var b=p.coordDimIndex;o5(r,g)[b]=f,p.isExtraCoord||(n.set(g,1),ewe(p.type)&&(i[0]=f),o5(l,g)[b]=a.getDimensionIndex(p.name)),p.defaultTooltip&&o.push(f)}R$.each(function(w,_){var k=o5(r,_),T=p.otherDims[_];T!=null&&T!==!1&&(k[T]=p.name)})});var c=[],d={};n.each(function(f,p){var g=r[p];d[p]=g[0],c=c.concat(g)}),t.dataDimsOnCoord=c,t.dataDimIndicesOnCoord=it(c,function(f){return a.getDimensionInfo(f).storeDimIndex}),t.encodeFirstDimNotExtra=d;var u=r.label;u&&u.length&&(i=u.slice());var h=r.tooltip;return h&&h.length?o=h.slice():o.length||(o=i.slice()),r.defaultedLabel=i,r.defaultedTooltip=o,t.userOutput=new Qye(l,e),t}function o5(a,e){return a.hasOwnProperty(e)||(a[e]=[]),a[e]}function J2(a){return a==="category"?"ordinal":a==="time"?"time":"float"}function ewe(a){return!(a==="ordinal"||a==="time")}var qw=(function(){function a(e){this.otherDims={},e!=null&&Je(this,e)}return a})(),twe=Ea(),awe={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},YY=(function(){function a(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return a.prototype.isDimensionOmitted=function(){return this._dimOmitted},a.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=ZY(this.source)))},a.prototype.getSourceDimensionIndex=function(e){return Pt(this._dimNameMap.get(e),-1)},a.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},a.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=W$(this.source),r=!KY(e),n="",i=[],o=0,l=0;o<e;o++){var c=void 0,d=void 0,u=void 0,h=this.dimensions[l];if(h&&h.storeDimIndex===o)c=t?h.name:null,d=h.type,u=h.ordinalMeta,l++;else{var f=this.getSourceDimension(o);f&&(c=t?f.name:null,d=f.type)}i.push({property:c,type:d,ordinalMeta:u}),t&&c!=null&&(!h||!h.isCalculationCoord)&&(n+=r?c.replace(/\`/g,"`1").replace(/\$/g,"`2"):c),n+="$",n+=awe[d]||"f",u&&(n+=u.uid),n+="$"}var p=this.source,g=[p.seriesLayoutBy,p.startIndex,n].join("$$");return{dimensions:i,hash:g}},a.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,r=0;t<this._fullDimCount;t++){var n=void 0,i=this.dimensions[r];if(i&&i.storeDimIndex===t)i.isCalculationCoord||(n=i.name),r++;else{var o=this.getSourceDimension(t);o&&(n=o.name)}e.push(n)}return e},a.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},a})();function qY(a){return a instanceof YY}function XY(a){for(var e=Rt(),t=0;t<(a||[]).length;t++){var r=a[t],n=Qt(r)?r.name:r;n!=null&&e.get(n)==null&&e.set(n,t)}return e}function ZY(a){var e=twe(a);return e.dimNameMap||(e.dimNameMap=XY(a.dimensionsDefine))}function KY(a){return a>30}var ng=Qt,Mu=it,rwe=typeof Int32Array>"u"?Array:Int32Array,nwe="e\0\0",M9=-1,iwe=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],swe=["_approximateExtent"],E9,Fy,ig,sg,l5,og,c5,Ss=(function(){function a(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r,n=!1;qY(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(n=!0,r=e),r=r||["x","y"];for(var i={},o=[],l={},c=!1,d={},u=0;u<r.length;u++){var h=r[u],f=jt(h)?new qw({name:h}):h instanceof qw?h:new qw(h),p=f.name;f.type=f.type||"float",f.coordDim||(f.coordDim=p,f.coordDimIndex=0);var g=f.otherDims=f.otherDims||{};o.push(p),i[p]=f,d[p]!=null&&(c=!0),f.createInvertedIndices&&(l[p]=[]);var b=u;Xa(f.storeDimIndex)&&(b=f.storeDimIndex),g.itemName===0&&(this._nameDimIdx=b),g.itemId===0&&(this._idDimIdx=b),n&&(f.storeDimIndex=u)}if(this.dimensions=o,this._dimInfos=i,this._initGetDimensionInfo(c),this.hostModel=t,this._invertedIndicesMap=l,this._dimOmitted){var w=this._dimIdxToName=Rt();oe(o,function(_){w.set(i[_].storeDimIndex,_)})}}return a.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var r=this._dimIdxToName.get(t);if(r!=null)return r;var n=this._schema.getSourceDimension(t);if(n)return n.name},a.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},a.prototype._recognizeDimIndex=function(e){if(Xa(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},a.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},a.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},a.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(r){return t.hasOwnProperty(r)?t[r]:void 0}:function(r){return t[r]}},a.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},a.prototype.mapDimension=function(e,t){var r=this._dimSummary;if(t==null)return r.encodeFirstDimNotExtra[e];var n=r.encode[e];return n?n[t]:null},a.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,r=t.encode[e];return(r||[]).slice()},a.prototype.getStore=function(){return this._store},a.prototype.initData=function(e,t,r){var n=this,i;if(e instanceof f3&&(i=e),!i){var o=this.dimensions,l=pM(e)||ls(e)?new $$(e,o.length):e;i=new f3;var c=Mu(o,function(d){return{type:n._dimInfos[d].type,property:d}});i.initData(l,c,r)}this._store=i,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,i.count()),this._dimSummary=Jye(this,this._schema),this.userOutput=this._dimSummary.userOutput},a.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},a.prototype.appendValues=function(e,t){var r=this._store.appendValues(e,t&&t.length),n=r.start,i=r.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var l=n;l<i;l++){var c=l-n;this._nameList[l]=t[c],o&&c5(this,l)}},a.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,r=0;r<t.length;r++){var n=this._dimInfos[t[r]];n.ordinalMeta&&e.collectOrdinalMeta(n.storeDimIndex,n.ordinalMeta)}},a.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==ch&&!e.fillStorage},a.prototype._doInit=function(e,t){if(!(e>=t)){var r=this._store,n=r.getProvider();this._updateOrdinalMeta();var i=this._nameList,o=this._idList,l=n.getSource().sourceFormat,c=l===Ao;if(c&&!n.pure)for(var d=[],u=e;u<t;u++){var h=n.getItem(u,d);if(!this.hasItemOption&&Mme(h)&&(this.hasItemOption=!0),h){var f=h.name;i[u]==null&&f!=null&&(i[u]=ui(f,null));var p=h.id;o[u]==null&&p!=null&&(o[u]=ui(p,null))}}if(this._shouldMakeIdFromName())for(var u=e;u<t;u++)c5(this,u);E9(this)}},a.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},a.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},a.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},a.prototype.setCalculationInfo=function(e,t){ng(e)?Je(this._calculationInfo,e):this._calculationInfo[e]=t},a.prototype.getName=function(e){var t=this.getRawIndex(e),r=this._nameList[t];return r==null&&this._nameDimIdx!=null&&(r=ig(this,this._nameDimIdx,t)),r==null&&(r=""),r},a.prototype._getCategory=function(e,t){var r=this._store.get(e,t),n=this._store.getOrdinalMeta(e);return n?n.categories[r]:r},a.prototype.getId=function(e){return Fy(this,this.getRawIndex(e))},a.prototype.count=function(){return this._store.count()},a.prototype.get=function(e,t){var r=this._store,n=this._dimInfos[e];if(n)return r.get(n.storeDimIndex,t)},a.prototype.getByRawIndex=function(e,t){var r=this._store,n=this._dimInfos[e];if(n)return r.getByRawIndex(n.storeDimIndex,t)},a.prototype.getIndices=function(){return this._store.getIndices()},a.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},a.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},a.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},a.prototype.getValues=function(e,t){var r=this,n=this._store;return rt(e)?n.getValues(Mu(e,function(i){return r._getStoreDimIndex(i)}),t):n.getValues(e)},a.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,r=0,n=t.length;r<n;r++)if(isNaN(this._store.get(t[r],e)))return!1;return!0},a.prototype.indexOfName=function(e){for(var t=0,r=this._store.count();t<r;t++)if(this.getName(t)===e)return t;return-1},a.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},a.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},a.prototype.rawIndexOf=function(e,t){var r=e&&this._invertedIndicesMap[e],n=r&&r[t];return n==null||isNaN(n)?M9:n},a.prototype.each=function(e,t,r){Ut(e)&&(r=t,t=e,e=[]);var n=r||this,i=Mu(sg(e),this._getStoreDimIndex,this);this._store.each(i,n?St(t,n):t)},a.prototype.filterSelf=function(e,t,r){Ut(e)&&(r=t,t=e,e=[]);var n=r||this,i=Mu(sg(e),this._getStoreDimIndex,this);return this._store=this._store.filter(i,n?St(t,n):t),this},a.prototype.selectRange=function(e){var t=this,r={},n=Va(e);return oe(n,function(i){var o=t._getStoreDimIndex(i);r[o]=e[i]}),this._store=this._store.selectRange(r),this},a.prototype.mapArray=function(e,t,r){Ut(e)&&(r=t,t=e,e=[]),r=r||this;var n=[];return this.each(e,function(){n.push(t&&t.apply(this,arguments))},r),n},a.prototype.map=function(e,t,r,n){var i=r||n||this,o=Mu(sg(e),this._getStoreDimIndex,this),l=og(this);return l._store=this._store.map(o,i?St(t,i):t),l},a.prototype.modify=function(e,t,r,n){var i=r||n||this,o=Mu(sg(e),this._getStoreDimIndex,this);this._store.modify(o,i?St(t,i):t)},a.prototype.downSample=function(e,t,r,n){var i=og(this);return i._store=this._store.downSample(this._getStoreDimIndex(e),t,r,n),i},a.prototype.minmaxDownSample=function(e,t){var r=og(this);return r._store=this._store.minmaxDownSample(this._getStoreDimIndex(e),t),r},a.prototype.lttbDownSample=function(e,t){var r=og(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),r},a.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},a.prototype.getItemModel=function(e){var t=this.hostModel,r=this.getRawDataItem(e);return new za(r,t,t&&t.ecModel)},a.prototype.diff=function(e){var t=this;return new Bd(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return Fy(e,r)},function(r){return Fy(t,r)})},a.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},a.prototype.setVisual=function(e,t){this._visual=this._visual||{},ng(e)?Je(this._visual,e):this._visual[e]=t},a.prototype.getItemVisual=function(e,t){var r=this._itemVisuals[e],n=r&&r[t];return n??this.getVisual(t)},a.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},a.prototype.ensureUniqueItemVisual=function(e,t){var r=this._itemVisuals,n=r[e];n||(n=r[e]={});var i=n[t];return i==null&&(i=this.getVisual(t),rt(i)?i=i.slice():ng(i)&&(i=Je({},i)),n[t]=i),i},a.prototype.setItemVisual=function(e,t,r){var n=this._itemVisuals[e]||{};this._itemVisuals[e]=n,ng(t)?Je(n,t):n[t]=r},a.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},a.prototype.setLayout=function(e,t){ng(e)?Je(this._layout,e):this._layout[e]=t},a.prototype.getLayout=function(e){return this._layout[e]},a.prototype.getItemLayout=function(e){return this._itemLayouts[e]},a.prototype.setItemLayout=function(e,t,r){this._itemLayouts[e]=r?Je(this._itemLayouts[e]||{},t):t},a.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},a.prototype.setItemGraphicEl=function(e,t){var r=this.hostModel&&this.hostModel.seriesIndex;X4(r,this.dataType,e,t),this._graphicEls[e]=t},a.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},a.prototype.eachItemGraphicEl=function(e,t){oe(this._graphicEls,function(r,n){r&&e&&e.call(t,r,n)})},a.prototype.cloneShallow=function(e){return e||(e=new a(this._schema?this._schema:Mu(this.dimensions,this._getDimInfo,this),this.hostModel)),l5(e,this),e._store=this._store,e},a.prototype.wrapMethod=function(e,t){var r=this[e];Ut(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var n=r.apply(this,arguments);return t.apply(this,[n].concat(TT(arguments)))})},a.internalField=(function(){E9=function(e){var t=e._invertedIndicesMap;oe(t,function(r,n){var i=e._dimInfos[n],o=i.ordinalMeta,l=e._store;if(o){r=t[n]=new rwe(o.categories.length);for(var c=0;c<r.length;c++)r[c]=M9;for(var c=0;c<l.count();c++)r[l.get(i.storeDimIndex,c)]=c}})},ig=function(e,t,r){return ui(e._getCategory(t,r),null)},Fy=function(e,t){var r=e._idList[t];return r==null&&e._idDimIdx!=null&&(r=ig(e,e._idDimIdx,t)),r==null&&(r=nwe+t),r},sg=function(e){return rt(e)||(e=e!=null?[e]:[]),e},og=function(e){var t=new a(e._schema?e._schema:Mu(e.dimensions,e._getDimInfo,e),e.hostModel);return l5(t,e),t},l5=function(e,t){oe(iwe.concat(t.__wrappedMethods||[]),function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e.__wrappedMethods=t.__wrappedMethods,oe(swe,function(r){e[r]=$t(t[r])}),e._calculationInfo=Je({},t._calculationInfo)},c5=function(e,t){var r=e._nameList,n=e._idList,i=e._nameDimIdx,o=e._idDimIdx,l=r[t],c=n[t];if(l==null&&i!=null&&(r[t]=l=ig(e,i,t)),c==null&&o!=null&&(n[t]=c=ig(e,o,t)),c==null&&l!=null){var d=e._nameRepeatCount,u=d[l]=(d[l]||0)+1;c=l,u>1&&(c+="__ec__"+u),n[t]=c}}})(),a})();function Pb(a,e){pM(a)||(a=xM(a)),e=e||{};var t=e.coordDimensions||[],r=e.dimensionsDefine||a.dimensionsDefine||[],n=Rt(),i=[],o=lwe(a,t,r,e.dimensionsCount),l=e.canOmitUnusedDimensions&&KY(o),c=r===a.dimensionsDefine,d=c?ZY(a):XY(r),u=e.encodeDefine;!u&&e.encodeDefaulter&&(u=e.encodeDefaulter(a,o));for(var h=Rt(u),f=new eY(o),p=0;p<f.length;p++)f[p]=-1;function g(G){var Q=f[G];if(Q<0){var $=r[G],ae=Qt($)?$:{name:$},J=new qw,U=ae.name;U!=null&&d.get(U)!=null&&(J.name=J.displayName=U),ae.type!=null&&(J.type=ae.type),ae.displayName!=null&&(J.displayName=ae.displayName);var F=i.length;return f[G]=F,J.storeDimIndex=G,i.push(J),J}return i[Q]}if(!l)for(var p=0;p<o;p++)g(p);h.each(function(G,Q){var $=Rr(G).slice();if($.length===1&&!jt($[0])&&$[0]<0){h.set(Q,!1);return}var ae=h.set(Q,[]);oe($,function(J,U){var F=jt(J)?d.get(J):J;F!=null&&F<o&&(ae[U]=F,w(g(F),Q,U))})});var b=0;oe(t,function(G){var Q,$,ae,J;if(jt(G))Q=G,J={};else{J=G,Q=J.name;var U=J.ordinalMeta;J.ordinalMeta=null,J=Je({},J),J.ordinalMeta=U,$=J.dimsDef,ae=J.otherDims,J.name=J.coordDim=J.coordDimIndex=J.dimsDef=J.otherDims=null}var F=h.get(Q);if(F!==!1){if(F=Rr(F),!F.length)for(var W=0;W<($&&$.length||1);W++){for(;b<o&&g(b).coordDim!=null;)b++;b<o&&F.push(b++)}oe(F,function(K,ee){var ne=g(K);if(c&&J.type!=null&&(ne.type=J.type),w(Kt(ne,J),Q,ee),ne.name==null&&$){var re=$[ee];!Qt(re)&&(re={name:re}),ne.name=ne.displayName=re.name,ne.defaultTooltip=re.defaultTooltip}ae&&Kt(ne.otherDims,ae)})}});function w(G,Q,$){R$.get(Q)!=null?G.otherDims[Q]=$:(G.coordDim=Q,G.coordDimIndex=$,n.set(Q,!0))}var _=e.generateCoord,k=e.generateCoordCount,T=k!=null;k=_?k||1:0;var D=_||"value";function I(G){G.name==null&&(G.name=G.coordDim)}if(l)oe(i,function(G){I(G)}),i.sort(function(G,Q){return G.storeDimIndex-Q.storeDimIndex});else for(var O=0;O<o;O++){var P=g(O),V=P.coordDim;V==null&&(P.coordDim=cwe(D,n,T),P.coordDimIndex=0,(!_||k<=0)&&(P.isExtraCoord=!0),k--),I(P),P.type==null&&(B$(a,O)===Hi.Must||P.isExtraCoord&&(P.otherDims.itemName!=null||P.otherDims.seriesName!=null))&&(P.type="ordinal")}return owe(i),new YY({source:a,dimensions:i,fullDimensionCount:o,dimensionOmitted:l})}function owe(a){for(var e=Rt(),t=0;t<a.length;t++){var r=a[t],n=r.name,i=e.get(n)||0;i>0&&(r.name=n+(i-1)),i++,e.set(n,i)}}function lwe(a,e,t,r){var n=Math.max(a.dimensionsDetectedCount||1,e.length,t.length,r||0);return oe(e,function(i){var o;Qt(i)&&(o=i.dimsDef)&&(n=Math.max(n,o.length))}),n}function cwe(a,e,t){if(t||e.hasKey(a)){for(var r=0;e.hasKey(a+r);)r++;a+=r}return e.set(a,!0),a}var dwe=(function(){function a(e){this.coordSysDims=[],this.axisMap=Rt(),this.categoryAxisMap=Rt(),this.coordSysName=e}return a})();function uwe(a){var e=a.get("coordinateSystem"),t=new dwe(e),r=hwe[e];if(r)return r(a,t,t.axisMap,t.categoryAxisMap),t}var hwe={cartesian2d:function(a,e,t,r){var n=a.getReferringComponents("xAxis",yn).models[0],i=a.getReferringComponents("yAxis",yn).models[0];e.coordSysDims=["x","y"],t.set("x",n),t.set("y",i),Ap(n)&&(r.set("x",n),e.firstCategoryDimIndex=0),Ap(i)&&(r.set("y",i),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(a,e,t,r){var n=a.getReferringComponents("singleAxis",yn).models[0];e.coordSysDims=["single"],t.set("single",n),Ap(n)&&(r.set("single",n),e.firstCategoryDimIndex=0)},polar:function(a,e,t,r){var n=a.getReferringComponents("polar",yn).models[0],i=n.findAxisModel("radiusAxis"),o=n.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",i),t.set("angle",o),Ap(i)&&(r.set("radius",i),e.firstCategoryDimIndex=0),Ap(o)&&(r.set("angle",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(a,e,t,r){e.coordSysDims=["lng","lat"]},parallel:function(a,e,t,r){var n=a.ecModel,i=n.getComponent("parallel",a.get("parallelIndex")),o=e.coordSysDims=i.dimensions.slice();oe(i.parallelAxisIndex,function(l,c){var d=n.getComponent("parallelAxis",l),u=o[c];t.set(u,d),Ap(d)&&(r.set(u,d),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=c))})},matrix:function(a,e,t,r){var n=a.getReferringComponents("matrix",yn).models[0];e.coordSysDims=["x","y"];var i=n.getDimensionModel("x"),o=n.getDimensionModel("y");t.set("x",i),t.set("y",o),r.set("x",i),r.set("y",o)}};function Ap(a){return a.get("type")==="category"}function fwe(a,e,t){t=t||{};var r=t.byIndex,n=t.stackedCoordDimension,i,o,l;pwe(e)?i=e:(o=e.schema,i=o.dimensions,l=e.store);var c=!!(a&&a.get("stack")),d,u,h,f;if(oe(i,function(k,T){jt(k)&&(i[T]=k={name:k}),c&&!k.isExtraCoord&&(!r&&!d&&k.ordinalMeta&&(d=k),!u&&k.type!=="ordinal"&&k.type!=="time"&&(!n||n===k.coordDim)&&(u=k))}),u&&!r&&!d&&(r=!0),u){h="__\0ecstackresult_"+a.id,f="__\0ecstackedover_"+a.id,d&&(d.createInvertedIndices=!0);var p=u.coordDim,g=u.type,b=0;oe(i,function(k){k.coordDim===p&&b++});var w={name:h,coordDim:p,coordDimIndex:b,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length},_={name:f,coordDim:f,coordDimIndex:b+1,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length+1};o?(l&&(w.storeDimIndex=l.ensureCalculationDimension(f,g),_.storeDimIndex=l.ensureCalculationDimension(h,g)),o.appendCalculationDimension(w),o.appendCalculationDimension(_)):(i.push(w),i.push(_))}return{stackedDimension:u&&u.name,stackedByDimension:d&&d.name,isStackedByIndex:r,stackedOverDimension:f,stackResultDimension:h}}function pwe(a){return!qY(a.schema)}function bh(a,e){return!!e&&e===a.getCalculationInfo("stackedDimension")}function QY(a,e){return bh(a,e)?a.getCalculationInfo("stackResultDimension"):e}function xwe(a,e){var t=a.get("coordinateSystem"),r=Rb.get(t),n;return e&&e.coordSysDims&&(n=it(e.coordSysDims,function(i){var o={name:i},l=e.axisMap.get(i);if(l){var c=l.get("type");o.type=J2(c)}return o})),n||(n=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),n}function mwe(a,e,t){var r,n;return t&&oe(a,function(i,o){var l=i.coordDim,c=t.categoryAxisMap.get(l);c&&(r==null&&(r=o),i.ordinalMeta=c.getOrdinalMeta(),e&&(i.createInvertedIndices=!0)),i.otherDims.itemName!=null&&(n=!0)}),!n&&r!=null&&(a[r].otherDims.itemName=0),r}function Wd(a,e,t){t=t||{};var r=e.getSourceManager(),n,i=!1;a?(i=!0,n=xM(a)):(n=r.getSource(),i=n.sourceFormat===Ao);var o=uwe(e),l=xwe(e,o),c=t.useEncodeDefaulter,d=Ut(c)?c:c?va(P$,l,e):null,u={coordDimensions:l,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:d,canOmitUnusedDimensions:!i},h=Pb(n,u),f=mwe(h.dimensions,t.createInvertedIndices,o),p=i?null:r.getSharedDataStore(h),g=fwe(e,{schema:h,store:p}),b=new Ss(h,e);b.setCalculationInfo(g);var w=f!=null&&gwe(n)?function(_,k,T,D){return D===f?T:this.defaultDimValueGetter(_,k,T,D)}:null;return b.hasItemOption=!1,b.initData(i?n:p,null,w),b}function gwe(a){if(a.sourceFormat===Ao){var e=vwe(a.data||[]);return!rt(Gx(e))}}function vwe(a){for(var e=0;e<a.length&&a[e]==null;)e++;return a[e]}function S3(a){return a.type==="interval"||a.type==="log"}function bwe(a,e,t,r,n){var i={},o=i.interval=hW(e/t);r!=null&&o<r&&(o=i.interval=r),n!=null&&o>n&&(o=i.interval=n);var l=i.intervalPrecision=Jv(o),c=i.niceTickExtent=[Yn(Math.ceil(a[0]/o)*o,l),Yn(Math.floor(a[1]/o)*o,l)];return ywe(c,a),i}function d5(a){var e=Math.pow(10,OT(a)),t=a/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,Yn(t*e)}function Jv(a){return dc(a)+2}function D9(a,e,t){a[e]=Math.max(Math.min(a[e],t[1]),t[0])}function ywe(a,e){!isFinite(a[0])&&(a[0]=e[0]),!isFinite(a[1])&&(a[1]=e[1]),D9(a,0,e),D9(a,1,e),a[0]>a[1]&&(a[0]=a[1])}function CM(a,e){return a>=e[0]&&a<=e[1]}var wwe=(function(){function a(){this.normalize=I9,this.scale=R9}return a.prototype.updateMethods=function(e){e.hasBreaks()?(this.normalize=St(e.normalize,e),this.scale=St(e.scale,e)):(this.normalize=I9,this.scale=R9)},a})();function I9(a,e){return e[1]===e[0]?.5:(a-e[0])/(e[1]-e[0])}function R9(a,e){return a*(e[1]-e[0])+e[0]}function k3(a,e,t){var r=Math.log(a);return[Math.log(t?e[0]:Math.max(0,e[0]))/r,Math.log(t?e[1]:Math.max(0,e[1]))/r]}var Mh=(function(){function a(e){this._calculator=new wwe,this._setting=e||{},this._extent=[1/0,-1/0];var t=Xn();t&&(this._brkCtx=t.createScaleBreakContext(),this._brkCtx.update(this._extent))}return a.prototype.getSetting=function(e){return this._setting[e]},a.prototype._innerUnionExtent=function(e){var t=this._extent;this._innerSetExtent(e[0]<t[0]?e[0]:t[0],e[1]>t[1]?e[1]:t[1])},a.prototype.unionExtentFromData=function(e,t){this._innerUnionExtent(e.getApproximateExtent(t))},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.setExtent=function(e,t){this._innerSetExtent(e,t)},a.prototype._innerSetExtent=function(e,t){var r=this._extent;isNaN(e)||(r[0]=e),isNaN(t)||(r[1]=t),this._brkCtx&&this._brkCtx.update(r)},a.prototype.setBreaksFromOption=function(e){var t=Xn();t&&this._innerSetBreak(t.parseAxisBreakOption(e,St(this.parse,this)))},a.prototype._innerSetBreak=function(e){this._brkCtx&&(this._brkCtx.setBreaks(e),this._calculator.updateMethods(this._brkCtx),this._brkCtx.update(this._extent))},a.prototype._innerGetBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},a.prototype.hasBreaks=function(){return this._brkCtx?this._brkCtx.hasBreaks():!1},a.prototype._getExtentSpanWithBreaks=function(){return this._brkCtx&&this._brkCtx.hasBreaks()?this._brkCtx.getExtentSpan():this._extent[1]-this._extent[0]},a.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},a.prototype.isBlank=function(){return this._isBlank},a.prototype.setBlank=function(e){this._isBlank=e},a})();dN(Mh);var _we=0,eb=(function(){function a(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++_we,this._onCollect=e.onCollect}return a.createByAxisModel=function(e){var t=e.option,r=t.data,n=r&&it(r,Nwe);return new a({categories:n,needCollect:!n,deduplication:t.dedplication!==!1})},a.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},a.prototype.parseAndCollect=function(e){var t,r=this._needCollect;if(!jt(e)&&!r)return e;if(r&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,this._onCollect&&this._onCollect(e,t),t;var n=this._getOrCreateMap();return t=n.get(e),t==null&&(r?(t=this.categories.length,this.categories[t]=e,n.set(e,t),this._onCollect&&this._onCollect(e,t)):t=NaN),t},a.prototype._getOrCreateMap=function(){return this._map||(this._map=Rt(this.categories))},a})();function Nwe(a){return Qt(a)&&a.value!=null?a.value:a+""}var Mx=(function(a){Le(e,a);function e(t){var r=a.call(this,t)||this;r.type="ordinal";var n=r.getSetting("ordinalMeta");return n||(n=new eb({})),rt(n)&&(n=new eb({categories:it(n,function(i){return Qt(i)?i.value:i})})),r._ordinalMeta=n,r._extent=r.getSetting("extent")||[0,n.categories.length-1],r}return e.prototype.parse=function(t){return t==null?NaN:jt(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return CM(t,this._extent)&&t>=0&&t<this._ordinalMeta.categories.length},e.prototype.normalize=function(t){return t=this._getTickNumber(t),this._calculator.normalize(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(this._calculator.scale(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],r=this._extent,n=r[0];n<=r[1];)t.push({value:n}),n++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=t.ordinalNumbers,n=this._ordinalNumbersByTick=[],i=this._ticksByOrdinalNumber=[],o=0,l=this._ordinalMeta.categories.length,c=Math.min(l,r.length);o<c;++o){var d=r[o];n[o]=d,i[d]=o}for(var u=0;o<l;++o){for(;i[u]!=null;)u++;n.push(u),i[u]=o}},e.prototype._getTickNumber=function(t){var r=this._ticksByOrdinalNumber;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getRawOrdinalNumber=function(t){var r=this._ordinalNumbersByTick;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var r=this.getRawOrdinalNumber(t.value),n=this._ordinalMeta.categories[r];return n==null?"":n+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e})(Mh);Mh.registerClass(Mx);var Eu=Yn,zd=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t==null||t===""?NaN:Number(t)},e.prototype.contain=function(t){return CM(t,this._extent)},e.prototype.normalize=function(t){return this._calculator.normalize(t,this._extent)},e.prototype.scale=function(t){return this._calculator.scale(t,this._extent)},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=Jv(t)},e.prototype.getTicks=function(t){t=t||{};var r=this._interval,n=this._extent,i=this._niceExtent,o=this._intervalPrecision,l=Xn(),c=[];if(!r)return c;if(t.breakTicks==="only_break"&&l)return l.addBreaksToTicks(c,this._brkCtx.breaks,this._extent),c;var d=1e4;n[0]<i[0]&&(t.expandToNicedExtent?c.push({value:Eu(i[0]-r,o)}):c.push({value:n[0]}));for(var u=function(g,b){return Math.round((b-g)/r)},h=i[0];h<=i[1];){if(c.push({value:h}),h=Eu(h+r,o),this._brkCtx){var f=this._brkCtx.calcNiceTickMultiple(h,u);f>=0&&(h=Eu(h+f*r,o))}if(c.length>0&&h===c[c.length-1].value)break;if(c.length>d)return[]}var p=c.length?c[c.length-1].value:i[1];return n[1]>p&&(t.expandToNicedExtent?c.push({value:Eu(p+r,o)}):c.push({value:n[1]})),l&&l.pruneTicksByBreak(t.pruneByBreak,c,this._brkCtx.breaks,function(g){return g.value},this._interval,this._extent),t.breakTicks!=="none"&&l&&l.addBreaksToTicks(c,this._brkCtx.breaks,this._extent),c},e.prototype.getMinorTicks=function(t){for(var r=this.getTicks({expandToNicedExtent:!0}),n=[],i=this.getExtent(),o=1;o<r.length;o++){var l=r[o],c=r[o-1];if(!(c.break||l.break)){for(var d=0,u=[],h=l.value-c.value,f=h/t,p=Jv(f);d<t-1;){var g=Eu(c.value+(d+1)*f,p);g>i[0]&&g<i[1]&&u.push(g),d++}var b=Xn();b&&b.pruneTicksByBreak("auto",u,this._getNonTransBreaks(),function(w){return w},this._interval,i),n.push(u)}}return n},e.prototype._getNonTransBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},e.prototype.getLabel=function(t,r){if(t==null)return"";var n=r&&r.precision;n==null?n=dc(t.value)||0:n==="auto"&&(n=this._intervalPrecision);var i=Eu(t.value,n,!0);return w$(i)},e.prototype.calcNiceTicks=function(t,r,n){t=t||5;var i=this._extent.slice(),o=this._getExtentSpanWithBreaks();if(isFinite(o)){o<0&&(o=-o,i.reverse(),this._innerSetExtent(i[0],i[1]),i=this._extent.slice());var l=bwe(i,o,t,r,n);this._intervalPrecision=l.intervalPrecision,this._interval=l.interval,this._niceExtent=l.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var r=this._extent.slice();if(r[0]===r[1])if(r[0]!==0){var n=Math.abs(r[0]);t.fixMax||(r[1]+=n/2),r[0]-=n/2}else r[1]=1;var i=r[1]-r[0];isFinite(i)||(r[0]=0,r[1]=1),this._innerSetExtent(r[0],r[1]),r=this._extent.slice(),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval,l=this._intervalPrecision;t.fixMin||(r[0]=Eu(Math.floor(r[0]/o)*o,l)),t.fixMax||(r[1]=Eu(Math.ceil(r[1]/o)*o,l)),this._innerSetExtent(r[0],r[1])},e.prototype.setNiceExtent=function(t,r){this._niceExtent=[t,r]},e.type="interval",e})(Mh);Mh.registerClass(zd);var JY=typeof Float32Array<"u",jwe=JY?Float32Array:Array;function hc(a){return rt(a)?JY?new Float32Array(a):a:new jwe(a)}var C3="__ec_stack_";function eq(a){return a.get("stack")||C3+a.seriesIndex}function AM(a){return a.dim+a.index}function Swe(a){var e=[],t=a.axis,r="axis0";if(t.type==="category"){for(var n=t.getBandWidth(),i=0;i<a.count;i++)e.push(Kt({bandWidth:n,axisKey:r,stackId:C3+i},a));for(var o=rq(e),l=[],i=0;i<a.count;i++){var c=o[r][C3+i];c.offsetCenter=c.offset+c.width/2,l.push(c)}return l}}function tq(a,e){var t=[];return e.eachSeriesByType(a,function(r){sq(r)&&t.push(r)}),t}function kwe(a){var e={};oe(a,function(c){var d=c.coordinateSystem,u=d.getBaseAxis();if(!(u.type!=="time"&&u.type!=="value"))for(var h=c.getData(),f=u.dim+"_"+u.index,p=h.getDimensionIndex(h.mapDimension(u.dim)),g=h.getStore(),b=0,w=g.count();b<w;++b){var _=g.get(p,b);e[f]?e[f].push(_):e[f]=[_]}});var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(n){n.sort(function(c,d){return c-d});for(var i=null,o=1;o<n.length;++o){var l=n[o]-n[o-1];l>0&&(i=i===null?l:Math.min(i,l))}t[r]=i}}return t}function aq(a){var e=kwe(a),t=[];return oe(a,function(r){var n=r.coordinateSystem,i=n.getBaseAxis(),o=i.getExtent(),l;if(i.type==="category")l=i.getBandWidth();else if(i.type==="value"||i.type==="time"){var c=i.dim+"_"+i.index,d=e[c],u=Math.abs(o[1]-o[0]),h=i.scale.getExtent(),f=Math.abs(h[1]-h[0]);l=d?u/f*d:u}else{var p=r.getData();l=Math.abs(o[1]-o[0])/p.count()}var g=_t(r.get("barWidth"),l),b=_t(r.get("barMaxWidth"),l),w=_t(r.get("barMinWidth")||(oq(r)?.5:1),l),_=r.get("barGap"),k=r.get("barCategoryGap"),T=r.get("defaultBarGap");t.push({bandWidth:l,barWidth:g,barMaxWidth:b,barMinWidth:w,barGap:_,barCategoryGap:k,defaultBarGap:T,axisKey:AM(i),stackId:eq(r)})}),rq(t)}function rq(a){var e={};oe(a,function(r,n){var i=r.axisKey,o=r.bandWidth,l=e[i]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:r.defaultBarGap||0,stacks:{}},c=l.stacks;e[i]=l;var d=r.stackId;c[d]||l.autoWidthCount++,c[d]=c[d]||{width:0,maxWidth:0};var u=r.barWidth;u&&!c[d].width&&(c[d].width=u,u=Math.min(l.remainedWidth,u),l.remainedWidth-=u);var h=r.barMaxWidth;h&&(c[d].maxWidth=h);var f=r.barMinWidth;f&&(c[d].minWidth=f);var p=r.barGap;p!=null&&(l.gap=p);var g=r.barCategoryGap;g!=null&&(l.categoryGap=g)});var t={};return oe(e,function(r,n){t[n]={};var i=r.stacks,o=r.bandWidth,l=r.categoryGap;if(l==null){var c=Va(i).length;l=Math.max(35-c*4,15)+"%"}var d=_t(l,o),u=_t(r.gap,1),h=r.remainedWidth,f=r.autoWidthCount,p=(h-d)/(f+(f-1)*u);p=Math.max(p,0),oe(i,function(_){var k=_.maxWidth,T=_.minWidth;if(_.width){var D=_.width;k&&(D=Math.min(D,k)),T&&(D=Math.max(D,T)),_.width=D,h-=D+u*D,f--}else{var D=p;k&&k<D&&(D=Math.min(k,h)),T&&T>D&&(D=T),D!==p&&(_.width=D,h-=D+u*D,f--)}}),p=(h-d)/(f+(f-1)*u),p=Math.max(p,0);var g=0,b;oe(i,function(_,k){_.width||(_.width=p),b=_,g+=_.width*(1+u)}),b&&(g-=b.width*u);var w=-g/2;oe(i,function(_,k){t[n][k]=t[n][k]||{bandWidth:o,offset:w,width:_.width},w+=_.width*(1+u)})}),t}function Cwe(a,e,t){if(a&&e){var r=a[AM(e)];return r}}function nq(a,e){var t=tq(a,e),r=aq(t);oe(t,function(n){var i=n.getData(),o=n.coordinateSystem,l=o.getBaseAxis(),c=eq(n),d=r[AM(l)][c],u=d.offset,h=d.width;i.setLayout({bandWidth:d.bandWidth,offset:u,size:h})})}function iq(a){return{seriesType:a,plan:Kx(),reset:function(e){if(sq(e)){var t=e.getData(),r=e.coordinateSystem,n=r.getBaseAxis(),i=r.getOtherAxis(n),o=t.getDimensionIndex(t.mapDimension(i.dim)),l=t.getDimensionIndex(t.mapDimension(n.dim)),c=e.get("showBackground",!0),d=t.mapDimension(i.dim),u=t.getCalculationInfo("stackResultDimension"),h=bh(t,d)&&!!t.getCalculationInfo("stackedOnSeries"),f=i.isHorizontal(),p=Awe(n,i),g=oq(e),b=e.get("barMinHeight")||0,w=u&&t.getDimensionIndex(u),_=t.getLayout("size"),k=t.getLayout("offset");return{progress:function(T,D){for(var I=T.count,O=g&&hc(I*3),P=g&&c&&hc(I*3),V=g&&hc(I),G=r.master.getRect(),Q=f?G.width:G.height,$,ae=D.getStore(),J=0;($=T.next())!=null;){var U=ae.get(h?w:o,$),F=ae.get(l,$),W=p,K=void 0;h&&(K=+U-ae.get(o,$));var ee=void 0,ne=void 0,re=void 0,Z=void 0;if(f){var ie=r.dataToPoint([U,F]);if(h){var de=r.dataToPoint([K,F]);W=de[0]}ee=W,ne=ie[1]+k,re=ie[0]-W,Z=_,Math.abs(re)<b&&(re=(re<0?-1:1)*b)}else{var ie=r.dataToPoint([F,U]);if(h){var de=r.dataToPoint([F,K]);W=de[1]}ee=ie[0]+k,ne=W,re=_,Z=ie[1]-W,Math.abs(Z)<b&&(Z=(Z<=0?-1:1)*b)}g?(O[J]=ee,O[J+1]=ne,O[J+2]=f?re:Z,P&&(P[J]=f?G.x:ee,P[J+1]=f?ne:G.y,P[J+2]=Q),V[$]=$):D.setItemLayout($,{x:ee,y:ne,width:re,height:Z}),J+=3}g&&D.setLayout({largePoints:O,largeDataIndices:V,largeBackgroundPoints:P,valueAxisHorizontal:f})}}}}}}function sq(a){return a.coordinateSystem&&a.coordinateSystem.type==="cartesian2d"}function oq(a){return a.pipelineContext&&a.pipelineContext.large}function Awe(a,e){var t=e.model.get("startValue");return t||(t=0),e.toGlobalCoord(e.dataToCoord(e.type==="log"?t>0?t:1:t))}var Twe=function(a,e,t,r){for(;t<r;){var n=t+r>>>1;a[n][1]<e?t=n+1:r=n}return t},TM=(function(a){Le(e,a);function e(t){var r=a.call(this,t)||this;return r.type="time",r}return e.prototype.getLabel=function(t){var r=this.getSetting("useUTC");return jN(t.value,jP[nbe(hv(this._minLevelUnit))]||jP.second,r,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,r,n){var i=this.getSetting("useUTC"),o=this.getSetting("locale");return ibe(t,r,n,o,i)},e.prototype.getTicks=function(t){t=t||{};var r=this._interval,n=this._extent,i=Xn(),o=[];if(!r)return o;var l=this.getSetting("useUTC");if(i&&t.breakTicks==="only_break")return Xn().addBreaksToTicks(o,this._brkCtx.breaks,this._extent),o;var c=Jp(n[1],l);o.push({value:n[0],time:{level:0,upperTimeUnit:c,lowerTimeUnit:c}});var d=Owe(this._minLevelUnit,this._approxInterval,l,n,this._getExtentSpanWithBreaks(),this._brkCtx);o=o.concat(d);var u=Jp(n[1],l);o.push({value:n[1],time:{level:0,upperTimeUnit:u,lowerTimeUnit:u}});var h=this.getSetting("useUTC"),f=go.length-1,p=0;return oe(o,function(g){f=Math.min(f,ya(go,g.time.upperTimeUnit)),p=Math.max(p,g.time.level)}),i&&Xn().pruneTicksByBreak(t.pruneByBreak,o,this._brkCtx.breaks,function(g){return g.value},this._approxInterval,this._extent),i&&t.breakTicks!=="none"&&Xn().addBreaksToTicks(o,this._brkCtx.breaks,this._extent,function(g){for(var b=Math.max(ya(go,Jp(g.vmin,h)),ya(go,Jp(g.vmax,h))),w=0,_=0;_<go.length;_++)if(!lq(go[_],g.vmin,g.vmax,h)){w=_;break}var k=Math.min(w,f),T=Math.max(k,b);return{level:p,lowerTimeUnit:go[T],upperTimeUnit:go[k]}}),o},e.prototype.calcNiceExtent=function(t){var r=this.getExtent();if(r[0]===r[1]&&(r[0]-=Qo,r[1]+=Qo),r[1]===-1/0&&r[0]===1/0){var n=new Date;r[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),r[0]=r[1]-Qo}this._innerSetExtent(r[0],r[1]),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,r,n){t=t||10;var i=this._getExtentSpanWithBreaks();this._approxInterval=i/t,r!=null&&this._approxInterval<r&&(this._approxInterval=r),n!=null&&this._approxInterval>n&&(this._approxInterval=n);var o=Vy.length,l=Math.min(Twe(Vy,this._approxInterval,0,o),o-1);this._interval=Vy[l][1],this._intervalPrecision=Jv(this._interval),this._minLevelUnit=Vy[Math.max(l-1,0)][0]},e.prototype.parse=function(t){return Xa(t)?t:+T0(t)},e.prototype.contain=function(t){return CM(t,this._extent)},e.prototype.normalize=function(t){return this._calculator.normalize(t,this._extent)},e.prototype.scale=function(t){return this._calculator.scale(t,this._extent)},e.type="time",e})(zd),Vy=[["second",tM],["minute",aM],["hour",uv],["quarter-day",uv*6],["half-day",uv*12],["day",Qo*1.2],["half-week",Qo*3.5],["week",Qo*7],["month",Qo*31],["quarter",Qo*95],["half-year",NP/2],["year",NP]];function lq(a,e,t,r){return o3(new Date(e),a,r).getTime()===o3(new Date(t),a,r).getTime()}function Mwe(a,e){return a/=Qo,a>16?16:a>7.5?7:a>3.5?4:a>1.5?2:1}function Ewe(a){var e=30*Qo;return a/=e,a>6?6:a>3?3:a>2?2:1}function Dwe(a){return a/=uv,a>12?12:a>6?6:a>3.5?4:a>2?2:1}function L9(a,e){return a/=e?aM:tM,a>30?30:a>20?20:a>15?15:a>10?10:a>5?5:a>2?2:1}function Iwe(a){return hW(a)}function Rwe(a,e,t){var r=Math.max(0,ya(go,e)-1);return o3(new Date(a),go[r],t).getTime()}function Lwe(a,e){var t=new Date(0);t[a](1);var r=t.getTime();t[a](1+e);var n=t.getTime()-r;return function(i,o){return Math.max(0,Math.round((o-i)/n))}}function Owe(a,e,t,r,n,i){var o=1e4,l=ebe,c=0;function d(J,U,F,W,K,ee,ne){for(var re=Lwe(K,J),Z=U,ie=new Date(Z);Z<F&&Z<=r[1]&&(ne.push({value:Z}),!(c++>o));)if(ie[K](ie[W]()+J),Z=ie.getTime(),i){var de=i.calcNiceTickMultiple(Z,re);de>0&&(ie[K](ie[W]()+de*J),Z=ie.getTime())}ne.push({value:Z,notAdd:!0})}function u(J,U,F){var W=[],K=!U.length;if(!lq(hv(J),r[0],r[1],t)){K&&(U=[{value:Rwe(r[0],J,t)},{value:r[1]}]);for(var ee=0;ee<U.length-1;ee++){var ne=U[ee].value,re=U[ee+1].value;if(ne!==re){var Z=void 0,ie=void 0,de=void 0,fe=!1;switch(J){case"year":Z=Math.max(1,Math.round(e/Qo/365)),ie=p$(t),de=sbe(t);break;case"half-year":case"quarter":case"month":Z=Ewe(e),ie=rM(t),de=x$(t);break;case"week":case"half-week":case"day":Z=Mwe(e),ie=nM(t),de=m$(t),fe=!0;break;case"half-day":case"quarter-day":case"hour":Z=Dwe(e),ie=iM(t),de=g$(t);break;case"minute":Z=L9(e,!0),ie=sM(t),de=v$(t);break;case"second":Z=L9(e,!1),ie=oM(t),de=b$(t);break;case"millisecond":Z=Iwe(e),ie=lM(t),de=y$(t);break}re>=r[0]&&ne<=r[1]&&d(Z,ne,re,ie,de,fe,W),J==="year"&&F.length>1&&ee===0&&F.unshift({value:F[0].value-Z})}}for(var ee=0;ee<W.length;ee++)F.push(W[ee])}}for(var h=[],f=[],p=0,g=0,b=0;b<l.length;++b){var w=hv(l[b]);if(rbe(l[b])){u(l[b],h[h.length-1]||[],f);var _=l[b+1]?hv(l[b+1]):null;if(w!==_){if(f.length){g=p,f.sort(function(J,U){return J.value-U.value});for(var k=[],T=0;T<f.length;++T){var D=f[T].value;(T===0||f[T-1].value!==D)&&(k.push(f[T]),D>=r[0]&&D<=r[1]&&p++)}var I=n/e;if(p>I*1.5&&g>I/1.5||(h.push(k),p>I||a===l[b]))break}f=[]}}}for(var O=hr(it(h,function(J){return hr(J,function(U){return U.value>=r[0]&&U.value<=r[1]&&!U.notAdd})}),function(J){return J.length>0}),P=[],V=O.length-1,b=0;b<O.length;++b)for(var G=O[b],Q=0;Q<G.length;++Q){var $=Jp(G[Q].value,t);P.push({value:G[Q].value,time:{level:V-b,upperTimeUnit:$,lowerTimeUnit:$}})}P.sort(function(J,U){return J.value-U.value});for(var ae=[],b=0;b<P.length;++b)(b===0||P[b].value!==P[b-1].value)&&ae.push(P[b]);return ae}Mh.registerClass(TM);var A3=Yn,Pwe=Math.floor,Bwe=Math.ceil,Hy=Math.pow,Uy=Math.log,cq=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new zd,t}return e.prototype.getTicks=function(t){t=t||{};var r=this._extent.slice(),n=this._originalScale.getExtent(),i=a.prototype.getTicks.call(this,t),o=this.base,l=this._originalScale._innerGetBreaks(),c=Xn();return it(i,function(d){var u=d.value,h=null,f=Hy(o,u);u===r[0]&&this._fixMin?h=n[0]:u===r[1]&&this._fixMax&&(h=n[1]);var p;if(c){var g=c.getTicksLogTransformBreak(d,o,l,Gy);p=g.vBreak,h==null&&(h=g.brkRoundingCriterion)}return h!=null&&(f=Gy(f,h)),{value:f,break:p}},this)},e.prototype._getNonTransBreaks=function(){return this._originalScale._innerGetBreaks()},e.prototype.setExtent=function(t,r){this._originalScale.setExtent(t,r);var n=k3(this.base,[t,r]);a.prototype.setExtent.call(this,n[0],n[1])},e.prototype.getExtent=function(){var t=this.base,r=a.prototype.getExtent.call(this);r[0]=Hy(t,r[0]),r[1]=Hy(t,r[1]);var n=this._originalScale.getExtent();return this._fixMin&&(r[0]=Gy(r[0],n[0])),this._fixMax&&(r[1]=Gy(r[1],n[1])),r},e.prototype.unionExtentFromData=function(t,r){this._originalScale.unionExtentFromData(t,r);var n=k3(this.base,t.getApproximateExtent(r),!0);this._innerUnionExtent(n)},e.prototype.calcNiceTicks=function(t){t=t||10;var r=this._extent.slice(),n=this._getExtentSpanWithBreaks();if(!(!isFinite(n)||n<=0)){var i=kme(n),o=t/n*i;for(o<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var l=[A3(Bwe(r[0]/i)*i),A3(Pwe(r[1]/i)*i)];this._interval=i,this._intervalPrecision=Jv(i),this._niceExtent=l}},e.prototype.calcNiceExtent=function(t){a.prototype.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.contain=function(t){return t=Uy(t)/Uy(this.base),a.prototype.contain.call(this,t)},e.prototype.normalize=function(t){return t=Uy(t)/Uy(this.base),a.prototype.normalize.call(this,t)},e.prototype.scale=function(t){return t=a.prototype.scale.call(this,t),Hy(this.base,t)},e.prototype.setBreaksFromOption=function(t){var r=Xn();if(r){var n=r.logarithmicParseBreaksFromOption(t,this.base,St(this.parse,this)),i=n.parsedOriginal,o=n.parsedLogged;this._originalScale._innerSetBreak(i),this._innerSetBreak(o)}},e.type="log",e})(zd);function Gy(a,e){return A3(a,dc(e))}Mh.registerClass(cq);var zwe=(function(){function a(e,t,r){this._prepareParams(e,t,r)}return a.prototype._prepareParams=function(e,t,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var n=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var i=t.get("min",!0);i==null&&(i=t.get("startValue",!0));var o=this._modelMinRaw=i;Ut(o)?this._modelMinNum=Wy(e,o({min:r[0],max:r[1]})):o!=="dataMin"&&(this._modelMinNum=Wy(e,o));var l=this._modelMaxRaw=t.get("max",!0);if(Ut(l)?this._modelMaxNum=Wy(e,l({min:r[0],max:r[1]})):l!=="dataMax"&&(this._modelMaxNum=Wy(e,l)),n)this._axisDataLen=t.getCategories().length;else{var c=t.get("boundaryGap"),d=rt(c)?c:[c||0,c||0];typeof d[0]=="boolean"||typeof d[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Al(d[0],1),Al(d[1],1)]}},a.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,r=this._dataMax,n=this._axisDataLen,i=this._boundaryGapInner,o=e?null:r-t||Math.abs(t),l=this._modelMinRaw==="dataMin"?t:this._modelMinNum,c=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,d=l!=null,u=c!=null;l==null&&(l=e?n?0:NaN:t-i[0]*o),c==null&&(c=e?n?n-1:NaN:r+i[1]*o),(l==null||!isFinite(l))&&(l=NaN),(c==null||!isFinite(c))&&(c=NaN);var h=ss(l)||ss(c)||e&&!n;this._needCrossZero&&(l>0&&c>0&&!d&&(l=0),l<0&&c<0&&!u&&(c=0));var f=this._determinedMin,p=this._determinedMax;return f!=null&&(l=f,d=!0),p!=null&&(c=p,u=!0),{min:l,max:c,minFixed:d,maxFixed:u,isBlank:h}},a.prototype.modifyDataMinMax=function(e,t){this[Vwe[e]]=t},a.prototype.setDeterminedMinMax=function(e,t){var r=Fwe[e];this[r]=t},a.prototype.freeze=function(){this.frozen=!0},a})(),Fwe={min:"_determinedMin",max:"_determinedMax"},Vwe={min:"_dataMin",max:"_dataMax"};function dq(a,e,t){var r=a.rawExtentInfo;return r||(r=new zwe(a,e,t),a.rawExtentInfo=r,r)}function Wy(a,e){return e==null?null:ss(e)?NaN:a.parse(e)}function uq(a,e){var t=a.type,r=dq(a,e,a.getExtent()).calculate();a.setBlank(r.isBlank);var n=r.min,i=r.max,o=e.ecModel;if(o&&t==="time"){var l=tq("bar",o),c=!1;if(oe(l,function(h){c=c||h.getBaseAxis()===e.axis}),c){var d=aq(l),u=Hwe(n,i,e,d);n=u.min,i=u.max}}return{extent:[n,i],fixMin:r.minFixed,fixMax:r.maxFixed}}function Hwe(a,e,t,r){var n=t.axis.getExtent(),i=Math.abs(n[1]-n[0]),o=Cwe(r,t.axis);if(o===void 0)return{min:a,max:e};var l=1/0;oe(o,function(p){l=Math.min(p.offset,l)});var c=-1/0;oe(o,function(p){c=Math.max(p.offset+p.width,c)}),l=Math.abs(l),c=Math.abs(c);var d=l+c,u=e-a,h=1-(l+c)/i,f=u/h-u;return e+=f*(c/d),a-=f*(l/d),{min:a,max:e}}function Ex(a,e){var t=e,r=uq(a,t),n=r.extent,i=t.get("splitNumber");a instanceof cq&&(a.base=t.get("logBase"));var o=a.type,l=t.get("interval"),c=o==="interval"||o==="time";a.setBreaksFromOption(fq(t)),a.setExtent(n[0],n[1]),a.calcNiceExtent({splitNumber:i,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:c?t.get("minInterval"):null,maxInterval:c?t.get("maxInterval"):null}),l!=null&&a.setInterval&&a.setInterval(l)}function MN(a,e){if(e=e||a.get("type"),e)switch(e){case"category":return new Mx({ordinalMeta:a.getOrdinalMeta?a.getOrdinalMeta():a.getCategories(),extent:[1/0,-1/0]});case"time":return new TM({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new(Mh.getClass(e)||zd)}}function Uwe(a){var e=a.scale.getExtent(),t=e[0],r=e[1];return!(t>0&&r>0||t<0&&r<0)}function em(a){var e=a.getLabelModel().get("formatter");if(a.type==="time"){var t=tbe(e);return function(n,i){return a.scale.getFormattedLabel(n,i,t)}}else{if(jt(e))return function(n){var i=a.scale.getLabel(n),o=e.replace("{value}",i??"");return o};if(Ut(e)){if(a.type==="category")return function(n,i){return e(e_(a,n),n.value-a.scale.getExtent()[0],null)};var r=Xn();return function(n,i){var o=null;return r&&(o=r.makeAxisLabelFormatterParamBreak(o,n.break)),e(e_(a,n),i,o)}}else return function(n){return a.scale.getLabel(n)}}}function e_(a,e){return a.type==="category"?a.scale.getLabel(e):e.value}function MM(a){var e=a.get("interval");return e??"auto"}function hq(a){return a.type==="category"&&MM(a.getLabelModel())===0}function t_(a,e){var t={};return oe(a.mapDimensionsAll(e),function(r){t[QY(a,r)]=!0}),Va(t)}function Gwe(a,e,t){e&&oe(t_(e,t),function(r){var n=e.getApproximateExtent(r);n[0]<a[0]&&(a[0]=n[0]),n[1]>a[1]&&(a[1]=n[1])})}function Dx(a){return a==="middle"||a==="center"}function tb(a){return a.getShallow("show")}function fq(a){var e=a.get("breaks",!0);if(e!=null)return!Xn()||!Wwe(a.axis)?void 0:e}function Wwe(a){return(a.dim==="x"||a.dim==="y"||a.dim==="z"||a.dim==="single")&&a.type!=="category"}var Bb=(function(){function a(){}return a.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},a.prototype.getCoordSysModel=function(){},a})(),$we=1e-8;function O9(a,e){return Math.abs(a-e)<$we}function Bf(a,e,t){var r=0,n=a[0];if(!n)return!1;for(var i=1;i<a.length;i++){var o=a[i];r+=vd(n[0],n[1],o[0],o[1],e,t),n=o}var l=a[0];return(!O9(n[0],l[0])||!O9(n[1],l[1]))&&(r+=vd(n[0],n[1],l[0],l[1],e,t)),r!==0}var Ywe=[];function u5(a,e){for(var t=0;t<a.length;t++)zn(a[t],a[t],e)}function P9(a,e,t,r){for(var n=0;n<a.length;n++){var i=a[n];r&&(i=r.project(i)),i&&isFinite(i[0])&&isFinite(i[1])&&(Zu(e,e,i),Ku(t,t,i))}}function qwe(a){for(var e=0,t=0,r=0,n=a.length,i=a[n-1][0],o=a[n-1][1],l=0;l<n;l++){var c=a[l][0],d=a[l][1],u=i*d-c*o;e+=u,t+=(i+c)*u,r+=(o+d)*u,i=c,o=d}return e?[t/e/3,r/e/3,e]:[a[0][0]||0,a[0][1]||0]}var pq=(function(){function a(e){this.name=e}return a.prototype.setCenter=function(e){this._center=e},a.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},a})(),B9=(function(){function a(e,t){this.type="polygon",this.exterior=e,this.interiors=t}return a})(),z9=(function(){function a(e){this.type="linestring",this.points=e}return a})(),xq=(function(a){Le(e,a);function e(t,r,n){var i=a.call(this,t)||this;return i.type="geoJSON",i.geometries=r,i._center=n&&[n[0],n[1]],i}return e.prototype.calcCenter=function(){for(var t=this.geometries,r,n=0,i=0;i<t.length;i++){var o=t[i],l=o.exterior,c=l&&l.length;c>n&&(r=o,n=c)}if(r)return qwe(r.exterior);var d=this.getBoundingRect();return[d.x+d.width/2,d.y+d.height/2]},e.prototype.getBoundingRect=function(t){var r=this._rect;if(r&&!t)return r;var n=[1/0,1/0],i=[-1/0,-1/0],o=this.geometries;return oe(o,function(l){l.type==="polygon"?P9(l.exterior,n,i,t):oe(l.points,function(c){P9(c,n,i,t)})}),isFinite(n[0])&&isFinite(n[1])&&isFinite(i[0])&&isFinite(i[1])||(n[0]=n[1]=i[0]=i[1]=0),r=new Jt(n[0],n[1],i[0]-n[0],i[1]-n[1]),t||(this._rect=r),r},e.prototype.contain=function(t){var r=this.getBoundingRect(),n=this.geometries;if(!r.contain(t[0],t[1]))return!1;e:for(var i=0,o=n.length;i<o;i++){var l=n[i];if(l.type==="polygon"){var c=l.exterior,d=l.interiors;if(Bf(c,t[0],t[1])){for(var u=0;u<(d?d.length:0);u++)if(Bf(d[u],t[0],t[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(t,r,n,i){var o=this.getBoundingRect(),l=o.width/o.height;n?i||(i=n/l):n=l*i;for(var c=new Jt(t,r,n,i),d=o.calculateTransform(c),u=this.geometries,h=0;h<u.length;h++){var f=u[h];f.type==="polygon"?(u5(f.exterior,d),oe(f.interiors,function(p){u5(p,d)})):oe(f.points,function(p){u5(p,d)})}o=this._rect,o.copy(c),this._center=[o.x+o.width/2,o.y+o.height/2]},e.prototype.cloneShallow=function(t){t==null&&(t=this.name);var r=new e(t,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},e})(pq),Xwe=(function(a){Le(e,a);function e(t,r){var n=a.call(this,t)||this;return n.type="geoSVG",n._elOnlyForCalculate=r,n}return e.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,r=t.getBoundingRect(),n=[r.x+r.width/2,r.y+r.height/2],i=iN(Ywe),o=t;o&&!o.isGeoSVGGraphicRoot;)bc(i,o.getLocalTransform(),i),o=o.parent;return Cl(i,i),zn(n,n,i),n},e})(pq);function Zwe(a){if(!a.UTF8Encoding)return a;var e=a,t=e.UTF8Scale;t==null&&(t=1024);var r=e.features;return oe(r,function(n){var i=n.geometry,o=i.encodeOffsets,l=i.coordinates;if(o)switch(i.type){case"LineString":i.coordinates=mq(l,o,t);break;case"Polygon":h5(l,o,t);break;case"MultiLineString":h5(l,o,t);break;case"MultiPolygon":oe(l,function(c,d){return h5(c,o[d],t)})}}),e.UTF8Encoding=!1,e}function h5(a,e,t){for(var r=0;r<a.length;r++)a[r]=mq(a[r],e[r],t)}function mq(a,e,t){for(var r=[],n=e[0],i=e[1],o=0;o<a.length;o+=2){var l=a.charCodeAt(o)-64,c=a.charCodeAt(o+1)-64;l=l>>1^-(l&1),c=c>>1^-(c&1),l+=n,c+=i,n=l,i=c,r.push([l/t,c/t])}return r}function Kwe(a,e){return a=Zwe(a),it(hr(a.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var r=t.properties,n=t.geometry,i=[];switch(n.type){case"Polygon":var o=n.coordinates;i.push(new B9(o[0],o.slice(1)));break;case"MultiPolygon":oe(n.coordinates,function(c){c[0]&&i.push(new B9(c[0],c.slice(1)))});break;case"LineString":i.push(new z9([n.coordinates]));break;case"MultiLineString":i.push(new z9(n.coordinates))}var l=new xq(r[e||"name"],i,r.cp);return l.properties=r,l})}var Qwe=Ea(),xv=Ea(),Tl={estimate:1,determine:2};function a_(a){return{out:{noPxChangeTryDetermine:[]},kind:a}}function gq(a,e){var t=it(e,function(r){return a.scale.parse(r)});return a.type==="time"&&t.length>0&&(t.sort(),t.unshift(t[0]),t.push(t[t.length-1])),t}function Jwe(a,e){var t=a.getLabelModel().get("customValues");if(t){var r=em(a),n=a.scale.getExtent(),i=gq(a,t),o=hr(i,function(l){return l>=n[0]&&l<=n[1]});return{labels:it(o,function(l){var c={value:l};return{formattedLabel:r(c),rawLabel:a.scale.getLabel(c),tickValue:l,time:void 0,break:void 0}})}}return a.type==="category"?t2e(a,e):r2e(a)}function e2e(a,e,t){var r=a.getTickModel().get("customValues");if(r){var n=a.scale.getExtent(),i=gq(a,r);return{ticks:hr(i,function(o){return o>=n[0]&&o<=n[1]})}}return a.type==="category"?a2e(a,e):{ticks:it(a.scale.getTicks(t),function(o){return o.value})}}function t2e(a,e){var t=a.getLabelModel(),r=vq(a,t,e);return!t.get("show")||a.scale.isBlank()?{labels:[]}:r}function vq(a,e,t){var r=i2e(a),n=MM(e),i=t.kind===Tl.estimate;if(!i){var o=yq(r,n);if(o)return o}var l,c;Ut(n)?l=Nq(a,n):(c=n==="auto"?s2e(a,t):n,l=_q(a,c));var d={labels:l,labelCategoryInterval:c};return i?t.out.noPxChangeTryDetermine.push(function(){return T3(r,n,d),!0}):T3(r,n,d),d}function a2e(a,e){var t=n2e(a),r=MM(e),n=yq(t,r);if(n)return n;var i,o;if((!e.get("show")||a.scale.isBlank())&&(i=[]),Ut(r))i=Nq(a,r,!0);else if(r==="auto"){var l=vq(a,a.getLabelModel(),a_(Tl.determine));o=l.labelCategoryInterval,i=it(l.labels,function(c){return c.tickValue})}else o=r,i=_q(a,o,!0);return T3(t,r,{ticks:i,tickCategoryInterval:o})}function r2e(a){var e=a.scale.getTicks(),t=em(a);return{labels:it(e,function(r,n){return{formattedLabel:t(r,n),rawLabel:a.scale.getLabel(r),tickValue:r.value,time:r.time,break:r.break}})}}var n2e=bq("axisTick"),i2e=bq("axisLabel");function bq(a){return function(t){return xv(t)[a]||(xv(t)[a]={list:[]})}}function yq(a,e){for(var t=0;t<a.list.length;t++)if(a.list[t].key===e)return a.list[t].value}function T3(a,e,t){return a.list.push({key:e,value:t}),t}function s2e(a,e){if(e.kind===Tl.estimate){var t=a.calculateCategoryInterval(e);return e.out.noPxChangeTryDetermine.push(function(){return xv(a).autoInterval=t,!0}),t}var r=xv(a).autoInterval;return r??(xv(a).autoInterval=a.calculateCategoryInterval(e))}function o2e(a,e){var t=e.kind,r=c2e(a),n=em(a),i=(r.axisRotate-r.labelRotate)/180*Math.PI,o=a.scale,l=o.getExtent(),c=o.count();if(l[1]-l[0]<1)return 0;var d=1,u=40;c>u&&(d=Math.max(1,Math.floor(c/u)));for(var h=l[0],f=a.dataToCoord(h+1)-a.dataToCoord(h),p=Math.abs(f*Math.cos(i)),g=Math.abs(f*Math.sin(i)),b=0,w=0;h<=l[1];h+=d){var _=0,k=0,T=lN(n({value:h}),r.font,"center","top");_=T.width*1.3,k=T.height*1.3,b=Math.max(b,_,7),w=Math.max(w,k,7)}var D=b/p,I=w/g;isNaN(D)&&(D=1/0),isNaN(I)&&(I=1/0);var O=Math.max(0,Math.floor(Math.min(D,I)));if(t===Tl.estimate)return e.out.noPxChangeTryDetermine.push(St(l2e,null,a,O,c)),O;var P=wq(a,O,c);return P??O}function l2e(a,e,t){return wq(a,e,t)==null}function wq(a,e,t){var r=Qwe(a.model),n=a.getExtent(),i=r.lastAutoInterval,o=r.lastTickCount;if(i!=null&&o!=null&&Math.abs(i-e)<=1&&Math.abs(o-t)<=1&&i>e&&r.axisExtent0===n[0]&&r.axisExtent1===n[1])return i;r.lastTickCount=t,r.lastAutoInterval=e,r.axisExtent0=n[0],r.axisExtent1=n[1]}function c2e(a){var e=a.getLabelModel();return{axisRotate:a.getRotate?a.getRotate():a.isHorizontal&&!a.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function _q(a,e,t){var r=em(a),n=a.scale,i=n.getExtent(),o=a.getLabelModel(),l=[],c=Math.max((e||0)+1,1),d=i[0],u=n.count();d!==0&&c>1&&u/c>2&&(d=Math.round(Math.ceil(d/c)*c));var h=hq(a),f=o.get("showMinLabel")||h,p=o.get("showMaxLabel")||h;f&&d!==i[0]&&b(i[0]);for(var g=d;g<=i[1];g+=c)b(g);p&&g-c!==i[1]&&b(i[1]);function b(w){var _={value:w};l.push(t?w:{formattedLabel:r(_),rawLabel:n.getLabel(_),tickValue:w,time:void 0,break:void 0})}return l}function Nq(a,e,t){var r=a.scale,n=em(a),i=[];return oe(r.getTicks(),function(o){var l=r.getLabel(o),c=o.value;e(o.value,l)&&i.push(t?c:{formattedLabel:n(o),rawLabel:l,tickValue:c,time:void 0,break:void 0})}),i}var F9=[0,1],Ll=(function(){function a(e,t,r){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=r||[0,0]}return a.prototype.contain=function(e){var t=this._extent,r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]);return e>=r&&e<=n},a.prototype.containData=function(e){return this.scale.contain(this.scale.parse(e))},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.getPixelPrecision=function(e){return dW(e||this.scale.getExtent(),this._extent)},a.prototype.setExtent=function(e,t){var r=this._extent;r[0]=e,r[1]=t},a.prototype.dataToCoord=function(e,t){var r=this._extent,n=this.scale;return e=n.normalize(n.parse(e)),this.onBand&&n.type==="ordinal"&&(r=r.slice(),V9(r,n.count())),ur(e,F9,r,t)},a.prototype.coordToData=function(e,t){var r=this._extent,n=this.scale;this.onBand&&n.type==="ordinal"&&(r=r.slice(),V9(r,n.count()));var i=ur(e,r,F9,t);return this.scale.scale(i)},a.prototype.pointToData=function(e,t){},a.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),r=e2e(this,t,{breakTicks:e.breakTicks,pruneByBreak:e.pruneByBreak}),n=r.ticks,i=it(n,function(l){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(l):l),tickValue:l}},this),o=t.get("alignWithLabel");return d2e(this,i,o,e.clamp),i},a.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var r=this.scale.getMinorTicks(t),n=it(r,function(i){return it(i,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return n},a.prototype.getViewLabels=function(e){return e=e||a_(Tl.determine),Jwe(this,e).labels},a.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},a.prototype.getTickModel=function(){return this.model.getModel("axisTick")},a.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),r=t[1]-t[0]+(this.onBand?1:0);r===0&&(r=1);var n=Math.abs(e[1]-e[0]);return Math.abs(n)/r},a.prototype.calculateCategoryInterval=function(e){return e=e||a_(Tl.determine),o2e(this,e)},a})();function V9(a,e){var t=a[1]-a[0],r=e,n=t/r/2;a[0]+=n,a[1]-=n}function d2e(a,e,t,r){var n=e.length;if(!a.onBand||t||!n)return;var i=a.getExtent(),o,l;if(n===1)e[0].coord=i[0],e[0].onBand=!0,o=e[1]={coord:i[1],tickValue:e[0].tickValue,onBand:!0};else{var c=e[n-1].tickValue-e[0].tickValue,d=(e[n-1].coord-e[0].coord)/c;oe(e,function(p){p.coord-=d/2,p.onBand=!0});var u=a.scale.getExtent();l=1+u[1]-e[n-1].tickValue,o={coord:e[n-1].coord+d*l,tickValue:u[1]+1,onBand:!0},e.push(o)}var h=i[0]>i[1];f(e[0].coord,i[0])&&(r?e[0].coord=i[0]:e.shift()),r&&f(i[0],e[0].coord)&&e.unshift({coord:i[0],onBand:!0}),f(i[1],o.coord)&&(r?o.coord=i[1]:e.pop()),r&&f(o.coord,i[1])&&e.push({coord:i[1],onBand:!0});function f(p,g){return p=Yn(p),g=Yn(g),h?p>g:p<g}}var lg=Math.PI*2,Sf=Tc.CMD,u2e=["top","right","bottom","left"];function h2e(a,e,t,r,n){var i=t.width,o=t.height;switch(a){case"top":r.set(t.x+i/2,t.y-e),n.set(0,-1);break;case"bottom":r.set(t.x+i/2,t.y+o+e),n.set(0,1);break;case"left":r.set(t.x-e,t.y+o/2),n.set(-1,0);break;case"right":r.set(t.x+i+e,t.y+o/2),n.set(1,0);break}}function f2e(a,e,t,r,n,i,o,l,c){o-=a,l-=e;var d=Math.sqrt(o*o+l*l);o/=d,l/=d;var u=o*t+a,h=l*t+e;if(Math.abs(r-n)%lg<1e-4)return c[0]=u,c[1]=h,d-t;if(i){var f=r;r=wo(n),n=wo(f)}else r=wo(r),n=wo(n);r>n&&(n+=lg);var p=Math.atan2(l,o);if(p<0&&(p+=lg),p>=r&&p<=n||p+lg>=r&&p+lg<=n)return c[0]=u,c[1]=h,d-t;var g=t*Math.cos(r)+a,b=t*Math.sin(r)+e,w=t*Math.cos(n)+a,_=t*Math.sin(n)+e,k=(g-o)*(g-o)+(b-l)*(b-l),T=(w-o)*(w-o)+(_-l)*(_-l);return k<T?(c[0]=g,c[1]=b,Math.sqrt(k)):(c[0]=w,c[1]=_,Math.sqrt(T))}function r_(a,e,t,r,n,i,o,l){var c=n-a,d=i-e,u=t-a,h=r-e,f=Math.sqrt(u*u+h*h);u/=f,h/=f;var p=c*u+d*h,g=p/f;l&&(g=Math.min(Math.max(g,0),1)),g*=f;var b=o[0]=a+g*u,w=o[1]=e+g*h;return Math.sqrt((b-n)*(b-n)+(w-i)*(w-i))}function jq(a,e,t,r,n,i,o){t<0&&(a=a+t,t=-t),r<0&&(e=e+r,r=-r);var l=a+t,c=e+r,d=o[0]=Math.min(Math.max(n,a),l),u=o[1]=Math.min(Math.max(i,e),c);return Math.sqrt((d-n)*(d-n)+(u-i)*(u-i))}var vl=[];function p2e(a,e,t){var r=jq(e.x,e.y,e.width,e.height,a.x,a.y,vl);return t.set(vl[0],vl[1]),r}function x2e(a,e,t){for(var r=0,n=0,i=0,o=0,l,c,d=1/0,u=e.data,h=a.x,f=a.y,p=0;p<u.length;){var g=u[p++];p===1&&(r=u[p],n=u[p+1],i=r,o=n);var b=d;switch(g){case Sf.M:i=u[p++],o=u[p++],r=i,n=o;break;case Sf.L:b=r_(r,n,u[p],u[p+1],h,f,vl,!0),r=u[p++],n=u[p++];break;case Sf.C:b=$G(r,n,u[p++],u[p++],u[p++],u[p++],u[p],u[p+1],h,f,vl),r=u[p++],n=u[p++];break;case Sf.Q:b=qG(r,n,u[p++],u[p++],u[p],u[p+1],h,f,vl),r=u[p++],n=u[p++];break;case Sf.A:var w=u[p++],_=u[p++],k=u[p++],T=u[p++],D=u[p++],I=u[p++];p+=1;var O=!!(1-u[p++]);l=Math.cos(D)*k+w,c=Math.sin(D)*T+_,p<=1&&(i=l,o=c);var P=(h-w)*T/k+w;b=f2e(w,_,T,D,D+I,O,P,f,vl),r=Math.cos(D+I)*k+w,n=Math.sin(D+I)*T+_;break;case Sf.R:i=r=u[p++],o=n=u[p++];var V=u[p++],G=u[p++];b=jq(i,o,V,G,h,f,vl);break;case Sf.Z:b=r_(r,n,i,o,h,f,vl,!0),r=i,n=o;break}b<d&&(d=b,t.set(vl[0],vl[1]))}return d}var wl=new Xt,qr=new Xt,Ln=new Xt,fc=new Xt,lc=new Xt;function H9(a,e){if(a){var t=a.getTextGuideLine(),r=a.getTextContent();if(r&&t){var n=a.textGuideLineConfig||{},i=[[0,0],[0,0],[0,0]],o=n.candidates||u2e,l=r.getBoundingRect().clone();l.applyTransform(r.getComputedTransform());var c=1/0,d=n.anchor,u=a.getComputedTransform(),h=u&&Cl([],u),f=e.get("length2")||0;d&&Ln.copy(d);for(var p=0;p<o.length;p++){var g=o[p];h2e(g,0,l,wl,fc),Xt.scaleAndAdd(qr,wl,fc,f),qr.transform(h);var b=a.getBoundingRect(),w=d?d.distance(qr):a instanceof Ia?x2e(qr,a.path,Ln):p2e(qr,b,Ln);w<c&&(c=w,qr.transform(u),Ln.transform(u),Ln.toArray(i[0]),qr.toArray(i[1]),wl.toArray(i[2]))}Sq(i,e.get("minTurnAngle")),t.setShape({points:i})}}}var n_=[],ws=new Xt;function Sq(a,e){if(e<=180&&e>0){e=e/180*Math.PI,wl.fromArray(a[0]),qr.fromArray(a[1]),Ln.fromArray(a[2]),Xt.sub(fc,wl,qr),Xt.sub(lc,Ln,qr);var t=fc.len(),r=lc.len();if(!(t<.001||r<.001)){fc.scale(1/t),lc.scale(1/r);var n=fc.dot(lc),i=Math.cos(e);if(i<n){var o=r_(qr.x,qr.y,Ln.x,Ln.y,wl.x,wl.y,n_,!1);ws.fromArray(n_),ws.scaleAndAdd(lc,o/Math.tan(Math.PI-e));var l=Ln.x!==qr.x?(ws.x-qr.x)/(Ln.x-qr.x):(ws.y-qr.y)/(Ln.y-qr.y);if(isNaN(l))return;l<0?Xt.copy(ws,qr):l>1&&Xt.copy(ws,Ln),ws.toArray(a[1])}}}}function m2e(a,e,t){if(t<=180&&t>0){t=t/180*Math.PI,wl.fromArray(a[0]),qr.fromArray(a[1]),Ln.fromArray(a[2]),Xt.sub(fc,qr,wl),Xt.sub(lc,Ln,qr);var r=fc.len(),n=lc.len();if(!(r<.001||n<.001)){fc.scale(1/r),lc.scale(1/n);var i=fc.dot(e),o=Math.cos(t);if(i<o){var l=r_(qr.x,qr.y,Ln.x,Ln.y,wl.x,wl.y,n_,!1);ws.fromArray(n_);var c=Math.PI/2,d=Math.acos(lc.dot(e)),u=c+d-t;if(u>=c)Xt.copy(ws,Ln);else{ws.scaleAndAdd(lc,l/Math.tan(Math.PI/2-u));var h=Ln.x!==qr.x?(ws.x-qr.x)/(Ln.x-qr.x):(ws.y-qr.y)/(Ln.y-qr.y);if(isNaN(h))return;h<0?Xt.copy(ws,qr):h>1&&Xt.copy(ws,Ln)}ws.toArray(a[1])}}}}function f5(a,e,t,r){var n=t==="normal",i=n?a:a.ensureState(t);i.ignore=e;var o=r.get("smooth");o&&o===!0&&(o=.3),i.shape=i.shape||{},o>0&&(i.shape.smooth=o);var l=r.getModel("lineStyle").getLineStyle();n?a.useStyle(l):i.style=l}function g2e(a,e){var t=e.smooth,r=e.points;if(r)if(a.moveTo(r[0][0],r[0][1]),t>0&&r.length>=3){var n=Xu(r[0],r[1]),i=Xu(r[1],r[2]);if(!n||!i){a.lineTo(r[1][0],r[1][1]),a.lineTo(r[2][0],r[2][1]);return}var o=Math.min(n,i)*t,l=Lw([],r[1],r[0],o/n),c=Lw([],r[1],r[2],o/i),d=Lw([],l,c,.5);a.bezierCurveTo(l[0],l[1],l[0],l[1],d[0],d[1]),a.bezierCurveTo(c[0],c[1],c[0],c[1],r[2][0],r[2][1])}else for(var u=1;u<r.length;u++)a.lineTo(r[u][0],r[u][1])}function EM(a,e,t){var r=a.getTextGuideLine(),n=a.getTextContent();if(!n){r&&a.removeTextGuideLine();return}for(var i=e.normal,o=i.get("show"),l=n.ignore,c=0;c<Gv.length;c++){var d=Gv[c],u=e[d],h=d==="normal";if(u){var f=u.get("show"),p=h?l:Pt(n.states[d]&&n.states[d].ignore,l);if(p||!Pt(f,o)){var g=h?r:r&&r.states[d];g&&(g.ignore=!0),r&&f5(r,!0,d,u);continue}r||(r=new $i,a.setTextGuideLine(r),!h&&(l||!o)&&f5(r,!0,"normal",e.normal),a.stateProxy&&(r.stateProxy=a.stateProxy)),f5(r,!1,d,u)}}if(r){Kt(r.style,t),r.style.fill=null;var b=i.get("showAbove"),w=a.textGuideLineConfig=a.textGuideLineConfig||{};w.showAbove=b||!1,r.buildPath=g2e}}function DM(a,e){e=e||"labelLine";for(var t={normal:a.getModel(e)},r=0;r<Cs.length;r++){var n=Cs[r];t[n]=a.getModel([n,e])}return t}var U9=["label","labelLine","layoutOption","priority","defaultAttr","marginForce","minMarginForce","marginDefault","suggestIgnore"],v2e=1,i_=2,kq=v2e|i_;function s_(a,e,t){t=t||kq,e?a.dirty|=t:a.dirty&=~t}function Cq(a,e){return e=e||kq,a.dirty==null||!!(a.dirty&e)}function Ec(a){if(a)return Cq(a)&&Aq(a,a.label,a),a}function Aq(a,e,t){var r=e.getComputedTransform();a.transform=KT(a.transform,r);var n=a.localRect=Yv(a.localRect,e.getBoundingRect()),i=e.style,o=i.margin,l=t&&t.marginForce,c=t&&t.minMarginForce,d=t&&t.marginDefault,u=i.__marginType;u==null&&d&&(o=d,u=Qp.textMargin);for(var h=0;h<4;h++)p5[h]=u===Qp.minMargin&&c&&c[h]!=null?c[h]:l&&l[h]!=null?l[h]:o?o[h]:0;u===Qp.textMargin&&w0(n,p5,!1,!1);var f=a.rect=Yv(a.rect,n);return r&&f.applyTransform(r),u===Qp.minMargin&&w0(f,p5,!1,!1),a.axisAligned=ZT(r),(a.label=a.label||{}).ignore=e.ignore,s_(a,!1),s_(a,!0,i_),a}var p5=[0,0,0,0];function b2e(a,e,t){return a.transform=KT(a.transform,t),a.localRect=Yv(a.localRect,e),a.rect=Yv(a.rect,e),t&&a.rect.applyTransform(t),a.axisAligned=ZT(t),a.obb=void 0,(a.label=a.label||{}).ignore=!1,a}function M3(a,e){if(a){a.label.x+=e.x,a.label.y+=e.y,a.label.markRedraw();var t=a.transform;t&&(t[4]+=e.x,t[5]+=e.y);var r=a.rect;r&&(r.x+=e.x,r.y+=e.y);var n=a.obb;n&&n.fromBoundingRect(a.localRect,t)}}function E3(a,e){for(var t=0;t<U9.length;t++){var r=U9[t];a[r]==null&&(a[r]=e[r])}return Ec(a)}function G9(a){var e=a.obb;return(!e||Cq(a,i_))&&(a.obb=e=e||new QW,e.fromBoundingRect(a.localRect,a.transform),s_(a,!1,i_)),e}function D3(a,e,t,r,n){var i=a.length,o=da[e],l=Qn[e];if(i<2)return!1;a.sort(function(P,V){return P.rect[o]-V.rect[o]});for(var c=0,d,u=!1,h=0;h<i;h++){var f=a[h],p=f.rect;d=p[o]-c,d<0&&(p[o]-=d,f.label[o]-=d,u=!0),c=p[o]+p[l]}var g=a[0],b=a[i-1],w,_;k(),w<0&&I(-w,.8),_<0&&I(_,.8),k(),T(w,_,1),T(_,w,-1),k(),w<0&&O(-w),_<0&&O(_);function k(){w=g.rect[o]-t,_=r-b.rect[o]-b.rect[l]}function T(P,V,G){if(P<0){var Q=Math.min(V,-P);if(Q>0){D(Q*G,0,i);var $=Q+P;$<0&&I(-$*G,1)}else I(-P*G,1)}}function D(P,V,G){P!==0&&(u=!0);for(var Q=V;Q<G;Q++){var $=a[Q],ae=$.rect;ae[o]+=P,$.label[o]+=P}}function I(P,V){for(var G=[],Q=0,$=1;$<i;$++){var ae=a[$-1].rect,J=Math.max(a[$].rect[o]-ae[o]-ae[l],0);G.push(J),Q+=J}if(Q){var U=Math.min(Math.abs(P)/Q,V);if(P>0)for(var $=0;$<i-1;$++){var F=G[$]*U;D(F,0,$+1)}else for(var $=i-1;$>0;$--){var F=G[$-1]*U;D(-F,$,i)}}}function O(P){var V=P<0?-1:1;P=Math.abs(P);for(var G=Math.ceil(P/(i-1)),Q=0;Q<i-1;Q++)if(V>0?D(G,0,Q+1):D(-G,i-Q-1,i),P-=G,P<=0)return}return u}function y2e(a){for(var e=0;e<a.length;e++){var t=a[e],r=t.defaultAttr,n=t.labelLine;t.label.attr("ignore",r.ignore),n&&n.attr("ignore",r.labelGuideIgnore)}}function Tq(a){var e=[];a.sort(function(d,u){return(u.suggestIgnore?1:0)-(d.suggestIgnore?1:0)||u.priority-d.priority});function t(d){if(!d.ignore){var u=d.ensureState("emphasis");u.ignore==null&&(u.ignore=!1)}d.ignore=!0}for(var r=0;r<a.length;r++){var n=Ec(a[r]);if(!n.label.ignore){for(var i=n.label,o=n.labelLine,l=!1,c=0;c<e.length;c++)if(EN(n,e[c],null,{touchThreshold:.05})){l=!0;break}l?(t(i),o&&t(o)):e.push(n)}}}function EN(a,e,t,r){return!a||!e||a.label&&a.label.ignore||e.label&&e.label.ignore||!a.rect.intersect(e.rect,t,r)?!1:a.axisAligned&&e.axisAligned?!0:G9(a).intersect(G9(e),t,r)}function w2e(a){if(a){for(var e=[],t=0;t<a.length;t++)e.push(a[t].slice());return e}}function _2e(a,e){var t=a.label,r=e&&e.getTextGuideLine();return{dataIndex:a.dataIndex,dataType:a.dataType,seriesIndex:a.seriesModel.seriesIndex,text:a.label.style.text,rect:a.hostRect,labelRect:a.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:w2e(r&&r.shape.points)}}var W9=["align","verticalAlign","width","height","fontSize"],vs=new jd,x5=Ea(),N2e=Ea();function $y(a,e,t){for(var r=0;r<t.length;r++){var n=t[r];e[n]!=null&&(a[n]=e[n])}}var Yy=["x","y","rotation"],j2e=(function(){function a(){this._labelList=[],this._chartViewList=[]}return a.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},a.prototype._addLabel=function(e,t,r,n,i){var o=n.style,l=n.__hostTarget,c=l.textConfig||{},d=n.getComputedTransform(),u=n.getBoundingRect().plain();Jt.applyTransform(u,u,d),d?vs.setLocalTransform(d):(vs.x=vs.y=vs.rotation=vs.originX=vs.originY=0,vs.scaleX=vs.scaleY=1),vs.rotation=wo(vs.rotation);var h=n.__hostTarget,f;if(h){f=h.getBoundingRect().plain();var p=h.getComputedTransform();Jt.applyTransform(f,f,p)}var g=f&&h.getTextGuideLine();this._labelList.push({label:n,labelLine:g,seriesModel:r,dataIndex:e,dataType:t,layoutOptionOrCb:i,layoutOption:null,rect:u,hostRect:f,priority:f?f.width*f.height:0,defaultAttr:{ignore:n.ignore,labelGuideIgnore:g&&g.ignore,x:vs.x,y:vs.y,scaleX:vs.scaleX,scaleY:vs.scaleY,rotation:vs.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:n.cursor,attachedPos:c.position,attachedRot:c.rotation}})},a.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var r=e.__model,n=r.get("labelLayout");(Ut(n)||Va(n).length)&&e.group.traverse(function(i){if(i.ignore)return!0;var o=i.getTextContent(),l=na(i);o&&!o.disableLabelLayout&&t._addLabel(l.dataIndex,l.dataType,r,o,n)})},a.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),r=e.getHeight();function n(T,D){return function(){H9(T,D)}}for(var i=0;i<this._labelList.length;i++){var o=this._labelList[i],l=o.label,c=l.__hostTarget,d=o.defaultAttr,u=void 0;Ut(o.layoutOptionOrCb)?u=o.layoutOptionOrCb(_2e(o,c)):u=o.layoutOptionOrCb,u=u||{},o.layoutOption=u;var h=Math.PI/180;c&&c.setTextConfig({local:!1,position:u.x!=null||u.y!=null?null:d.attachedPos,rotation:u.rotate!=null?u.rotate*h:d.attachedRot,offset:[u.dx||0,u.dy||0]});var f=!1;if(u.x!=null?(l.x=_t(u.x,t),l.setStyle("x",0),f=!0):(l.x=d.x,l.setStyle("x",d.style.x)),u.y!=null?(l.y=_t(u.y,r),l.setStyle("y",0),f=!0):(l.y=d.y,l.setStyle("y",d.style.y)),u.labelLinePoints){var p=c.getTextGuideLine();p&&(p.setShape({points:u.labelLinePoints}),f=!1)}var g=x5(l);g.needsUpdateLabelLine=f,l.rotation=u.rotate!=null?u.rotate*h:d.rotation,l.scaleX=d.scaleX,l.scaleY=d.scaleY;for(var b=0;b<W9.length;b++){var w=W9[b];l.setStyle(w,u[w]!=null?u[w]:d.style[w])}if(u.draggable){if(l.draggable=!0,l.cursor="move",c){var _=o.seriesModel;if(o.dataIndex!=null){var k=o.seriesModel.getData(o.dataType);_=k.getItemModel(o.dataIndex)}l.on("drag",n(c,_.getModel("labelLine")))}}else l.off("drag"),l.cursor=d.cursor}},a.prototype.layout=function(e){var t=e.getWidth(),r=e.getHeight(),n=[];oe(this._labelList,function(c){c.defaultAttr.ignore||n.push(E3({},c))});var i=hr(n,function(c){return c.layoutOption.moveOverlap==="shiftX"}),o=hr(n,function(c){return c.layoutOption.moveOverlap==="shiftY"});D3(i,0,0,t),D3(o,1,0,r);var l=hr(n,function(c){return c.layoutOption.hideOverlap});y2e(l),Tq(l)},a.prototype.processLabelsOverall=function(){var e=this;oe(this._chartViewList,function(t){var r=t.__model,n=t.ignoreLabelLineUpdate,i=r.isAnimationEnabled();t.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var l=!n,c=o.getTextContent();!l&&c&&(l=x5(c).needsUpdateLabelLine),l&&e._updateLabelLine(o,r),i&&e._animateLabels(o,r)})})},a.prototype._updateLabelLine=function(e,t){var r=e.getTextContent(),n=na(e),i=n.dataIndex;if(r&&i!=null){var o=t.getData(n.dataType),l=o.getItemModel(i),c={},d=o.getItemVisual(i,"style");if(d){var u=o.getVisual("drawType");c.stroke=d[u]}var h=l.getModel("labelLine");EM(e,DM(l),c),H9(e,h)}},a.prototype._animateLabels=function(e,t){var r=e.getTextContent(),n=e.getTextGuideLine();if(r&&(e.forceLabelAnimation||!r.ignore&&!r.invisible&&!e.disableLabelAnimation&&!cx(e))){var i=x5(r),o=i.oldLayout,l=na(e),c=l.dataIndex,d={x:r.x,y:r.y,rotation:r.rotation},u=t.getData(l.dataType);if(o){r.attr(o);var f=e.prevStates;f&&(ya(f,"select")>=0&&r.attr(i.oldLayoutSelect),ya(f,"emphasis")>=0&&r.attr(i.oldLayoutEmphasis)),rr(r,d,t,c)}else if(r.attr(d),!Xx(r).valueAnimation){var h=Pt(r.style.opacity,1);r.style.opacity=0,en(r,{style:{opacity:h}},t,c)}if(i.oldLayout=d,r.states.select){var p=i.oldLayoutSelect={};$y(p,d,Yy),$y(p,r.states.select,Yy)}if(r.states.emphasis){var g=i.oldLayoutEmphasis={};$y(g,d,Yy),$y(g,r.states.emphasis,Yy)}c$(r,c,u,t,t)}if(n&&!n.ignore&&!n.invisible){var i=N2e(n),o=i.oldLayout,b={points:n.shape.points};o?(n.attr({shape:o}),rr(n,{shape:b},t)):(n.setShape(b),n.style.strokePercent=0,en(n,{style:{strokePercent:1}},t)),i.oldLayout=b}},a})(),m5=Ea();function S2e(a){a.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){var n=m5(t).labelManager;n||(n=m5(t).labelManager=new j2e),n.clearLabels()}),a.registerUpdateLifecycle("series:layoutlabels",function(e,t,r){var n=m5(t).labelManager;r.updatedSeries.forEach(function(i){n.addLabelsOfSeries(t.getViewOfSeriesModel(i))}),n.updateLayoutConfig(t),n.layout(t),n.processLabelsOverall()})}var g5=Math.sin,v5=Math.cos,Mq=Math.PI,kf=Math.PI*2,k2e=180/Mq,Eq=(function(){function a(){}return a.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},a.prototype.moveTo=function(e,t){this._add("M",e,t)},a.prototype.lineTo=function(e,t){this._add("L",e,t)},a.prototype.bezierCurveTo=function(e,t,r,n,i,o){this._add("C",e,t,r,n,i,o)},a.prototype.quadraticCurveTo=function(e,t,r,n){this._add("Q",e,t,r,n)},a.prototype.arc=function(e,t,r,n,i,o){this.ellipse(e,t,r,r,0,n,i,o)},a.prototype.ellipse=function(e,t,r,n,i,o,l,c){var d=l-o,u=!c,h=Math.abs(d),f=eh(h-kf)||(u?d>=kf:-d>=kf),p=d>0?d%kf:d%kf+kf,g=!1;f?g=!0:eh(h)?g=!1:g=p>=Mq==!!u;var b=e+r*v5(o),w=t+n*g5(o);this._start&&this._add("M",b,w);var _=Math.round(i*k2e);if(f){var k=1/this._p,T=(u?1:-1)*(kf-k);this._add("A",r,n,_,1,+u,e+r*v5(o+T),t+n*g5(o+T)),k>.01&&this._add("A",r,n,_,0,+u,b,w)}else{var D=e+r*v5(l),I=t+n*g5(l);this._add("A",r,n,_,+g,+u,D,I)}},a.prototype.rect=function(e,t,r,n){this._add("M",e,t),this._add("l",r,0),this._add("l",0,n),this._add("l",-r,0),this._add("Z")},a.prototype.closePath=function(){this._d.length>0&&this._add("Z")},a.prototype._add=function(e,t,r,n,i,o,l,c,d){for(var u=[],h=this._p,f=1;f<arguments.length;f++){var p=arguments[f];if(isNaN(p)){this._invalid=!0;return}u.push(Math.round(p*h)/h)}this._d.push(e+u.join(" ")),this._start=e==="Z"},a.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},a.prototype.getStr=function(){return this._str},a})(),IM="none",C2e=Math.round;function A2e(a){var e=a.fill;return e!=null&&e!==IM}function T2e(a){var e=a.stroke;return e!=null&&e!==IM}var I3=["lineCap","miterLimit","lineJoin"],M2e=it(I3,function(a){return"stroke-"+a.toLowerCase()});function E2e(a,e,t,r){var n=e.opacity==null?1:e.opacity;if(t instanceof Li){a("opacity",n);return}if(A2e(e)){var i=Vv(e.fill);a("fill",i.color);var o=e.fillOpacity!=null?e.fillOpacity*i.opacity*n:i.opacity*n;o<1&&a("fill-opacity",o)}else a("fill",IM);if(T2e(e)){var l=Vv(e.stroke);a("stroke",l.color);var c=e.strokeNoScale?t.getLineScale():1,d=c?(e.lineWidth||0)/c:0,u=e.strokeOpacity!=null?e.strokeOpacity*l.opacity*n:l.opacity*n,h=e.strokeFirst;if(d!==1&&a("stroke-width",d),h&&a("paint-order",h?"stroke":"fill"),u<1&&a("stroke-opacity",u),e.lineDash){var f=yM(t),p=f[0],g=f[1];p&&(g=C2e(g||0),a("stroke-dasharray",p.join(",")),(g||r)&&a("stroke-dashoffset",g))}for(var b=0;b<I3.length;b++){var w=I3[b];if(e[w]!==B2[w]){var _=e[w]||B2[w];_&&a(M2e[b],_)}}}}var Dq="http://www.w3.org/2000/svg",Iq="http://www.w3.org/1999/xlink",D2e="http://www.w3.org/2000/xmlns/",I2e="http://www.w3.org/XML/1998/namespace",$9="ecmeta_";function Rq(a){return document.createElementNS(Dq,a)}function _i(a,e,t,r,n){return{tag:a,attrs:t||{},children:r,text:n,key:e}}function R2e(a,e){var t=[];if(e)for(var r in e){var n=e[r],i=r;n!==!1&&(n!==!0&&n!=null&&(i+='="'+n+'"'),t.push(i))}return"<"+a+" "+t.join(" ")+">"}function L2e(a){return"</"+a+">"}function RM(a,e){e=e||{};var t=e.newline?`
`:"";function r(n){var i=n.children,o=n.tag,l=n.attrs,c=n.text;return R2e(o,l)+(o!=="style"?_s(c):c||"")+(i?""+t+it(i,function(d){return r(d)}).join(t)+t:"")+L2e(o)}return r(a)}function O2e(a,e,t){t=t||{};var r=t.newline?`
`:"",n=" {"+r,i=r+"}",o=it(Va(a),function(c){return c+n+it(Va(a[c]),function(d){return d+":"+a[c][d]+";"}).join(r)+i}).join(r),l=it(Va(e),function(c){return"@keyframes "+c+n+it(Va(e[c]),function(d){return d+n+it(Va(e[c][d]),function(u){var h=e[c][d][u];return u==="d"&&(h='path("'+h+'")'),u+":"+h+";"}).join(r)+i}).join(r)+i}).join(r);return!o&&!l?"":["<![CDATA[",o,l,"]]>"].join(r)}function R3(a){return{zrId:a,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function Y9(a,e,t,r){return _i("svg","root",{width:a,height:e,xmlns:Dq,"xmlns:xlink":Iq,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+a+" "+e:!1},t)}var P2e=0;function Lq(){return P2e++}var q9={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Df="transform-origin";function B2e(a,e,t){var r=Je({},a.shape);Je(r,e),a.buildPath(t,r);var n=new Eq;return n.reset(tW(a)),t.rebuildPath(n,1),n.generateStr(),n.getStr()}function z2e(a,e){var t=e.originX,r=e.originY;(t||r)&&(a[Df]=t+"px "+r+"px")}var F2e={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Oq(a,e){var t=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[t]=a,t}function V2e(a,e,t){var r=a.shape.paths,n={},i,o;if(oe(r,function(c){var d=R3(t.zrId);d.animation=!0,DN(c,{},d,!0);var u=d.cssAnims,h=d.cssNodes,f=Va(u),p=f.length;if(p){o=f[p-1];var g=u[o];for(var b in g){var w=g[b];n[b]=n[b]||{d:""},n[b].d+=w.d||""}for(var _ in h){var k=h[_].animation;k.indexOf(o)>=0&&(i=k)}}}),!!i){e.d=!1;var l=Oq(n,t);return i.replace(o,l)}}function X9(a){return jt(a)?q9[a]?"cubic-bezier("+q9[a]+")":IT(a)?a:"":""}function DN(a,e,t,r){var n=a.animators,i=n.length,o=[];if(a instanceof yN){var l=V2e(a,e,t);if(l)o.push(l);else if(!i)return}else if(!i)return;for(var c={},d=0;d<i;d++){var u=n[d],h=[u.getMaxTime()/1e3+"s"],f=X9(u.getClip().easing),p=u.getDelay();f?h.push(f):h.push("linear"),p&&h.push(p/1e3+"s"),u.getLoop()&&h.push("infinite");var g=h.join(" ");c[g]=c[g]||[g,[]],c[g][1].push(u)}function b(k){var T=k[1],D=T.length,I={},O={},P={},V="animation-timing-function";function G(Se,Ce,we){for(var xe=Se.getTracks(),be=Se.getMaxTime(),Ee=0;Ee<xe.length;Ee++){var ze=xe[Ee];if(ze.needsAnimate()){var Ze=ze.keyframes,Re=ze.propName;if(we&&(Re=we(Re)),Re)for(var ut=0;ut<Ze.length;ut++){var vt=Ze[ut],yt=Math.round(vt.time/be*100)+"%",Ue=X9(vt.easing),Ye=vt.rawValue;(jt(Ye)||Xa(Ye))&&(Ce[yt]=Ce[yt]||{},Ce[yt][Re]=vt.rawValue,Ue&&(Ce[yt][V]=Ue))}}}}for(var Q=0;Q<D;Q++){var $=T[Q],ae=$.targetName;ae?ae==="shape"&&G($,O):!r&&G($,I)}for(var J in I){var U={};L2(U,a),Je(U,I[J]);var F=aW(U),W=I[J][V];P[J]=F?{transform:F}:{},z2e(P[J],U),W&&(P[J][V]=W)}var K,ee=!0;for(var J in O){P[J]=P[J]||{};var ne=!K,W=O[J][V];ne&&(K=new Tc);var re=K.len();K.reset(),P[J].d=B2e(a,O[J],K);var Z=K.len();if(!ne&&re!==Z){ee=!1;break}W&&(P[J][V]=W)}if(!ee)for(var J in P)delete P[J].d;if(!r)for(var Q=0;Q<D;Q++){var $=T[Q],ae=$.targetName;ae==="style"&&G($,P,function(xe){return F2e[xe]})}for(var ie=Va(P),de=!0,fe,Q=1;Q<ie.length;Q++){var he=ie[Q-1],ve=ie[Q];if(P[he][Df]!==P[ve][Df]){de=!1;break}fe=P[he][Df]}if(de&&fe){for(var J in P)P[J][Df]&&delete P[J][Df];e[Df]=fe}if(hr(ie,function(Se){return Va(P[Se]).length>0}).length){var Oe=Oq(P,t);return Oe+" "+k[0]+" both"}}for(var w in c){var l=b(c[w]);l&&o.push(l)}if(o.length){var _=t.zrId+"-cls-"+Lq();t.cssNodes["."+_]={animation:o.join(",")},e.class=_}}function H2e(a,e,t){if(!a.ignore)if(a.isSilent()){var r={"pointer-events":"none"};Z9(r,e,t)}else{var n=a.states.emphasis&&a.states.emphasis.style?a.states.emphasis.style:{},i=n.fill;if(!i){var o=a.style&&a.style.fill,l=a.states.select&&a.states.select.style&&a.states.select.style.fill,c=a.currentStates.indexOf("select")>=0&&l||o;c&&(i=I4(c))}var d=n.lineWidth;if(d){var u=!n.strokeNoScale&&a.transform?a.transform[0]:1;d=d/u}var r={cursor:"pointer"};i&&(r.fill=i),n.stroke&&(r.stroke=n.stroke),d&&(r["stroke-width"]=d),Z9(r,e,t)}}function Z9(a,e,t,r){var n=JSON.stringify(a),i=t.cssStyleCache[n];i||(i=t.zrId+"-cls-"+Lq(),t.cssStyleCache[n]=i,t.cssNodes["."+i+":hover"]=a),e.class=e.class?e.class+" "+i:i}var ab=Math.round;function Pq(a){return a&&jt(a.src)}function Bq(a){return a&&Ut(a.toDataURL)}function LM(a,e,t,r){E2e(function(n,i){var o=n==="fill"||n==="stroke";o&&eW(i)?Fq(e,a,n,r):o&&RT(i)?Vq(t,a,n,r):a[n]=i,o&&r.ssr&&i==="none"&&(a["pointer-events"]="visible")},e,t,!1),X2e(t,a,r)}function OM(a,e){var t=vme(e);t&&(t.each(function(r,n){r!=null&&(a[($9+n).toLowerCase()]=r+"")}),e.isSilent()&&(a[$9+"silent"]="true"))}function K9(a){return eh(a[0]-1)&&eh(a[1])&&eh(a[2])&&eh(a[3]-1)}function U2e(a){return eh(a[4])&&eh(a[5])}function PM(a,e,t){if(e&&!(U2e(e)&&K9(e))){var r=1e4;a.transform=K9(e)?"translate("+ab(e[4]*r)/r+" "+ab(e[5]*r)/r+")":Fxe(e)}}function Q9(a,e,t){for(var r=a.points,n=[],i=0;i<r.length;i++)n.push(ab(r[i][0]*t)/t),n.push(ab(r[i][1]*t)/t);e.points=n.join(" ")}function J9(a){return!a.smooth}function G2e(a){var e=it(a,function(t){return typeof t=="string"?[t,t]:t});return function(t,r,n){for(var i=0;i<e.length;i++){var o=e[i],l=t[o[0]];l!=null&&(r[o[1]]=ab(l*n)/n)}}}var W2e={circle:[G2e(["cx","cy","r"])],polyline:[Q9,J9],polygon:[Q9,J9]};function $2e(a){for(var e=a.animators,t=0;t<e.length;t++)if(e[t].targetName==="shape")return!0;return!1}function zq(a,e){var t=a.style,r=a.shape,n=W2e[a.type],i={},o=e.animation,l="path",c=a.style.strokePercent,d=e.compress&&tW(a)||4;if(n&&!e.willUpdate&&!(n[1]&&!n[1](r))&&!(o&&$2e(a))&&!(c<1)){l=a.type;var u=Math.pow(10,d);n[0](r,i,u)}else{var h=!a.path||a.shapeChanged();a.path||a.createPathProxy();var f=a.path;h&&(f.beginPath(),a.buildPath(f,a.shape),a.pathUpdated());var p=f.getVersion(),g=a,b=g.__svgPathBuilder;(g.__svgPathVersion!==p||!b||c!==g.__svgPathStrokePercent)&&(b||(b=g.__svgPathBuilder=new Eq),b.reset(d),f.rebuildPath(b,c),b.generateStr(),g.__svgPathVersion=p,g.__svgPathStrokePercent=c),i.d=b.getStr()}return PM(i,a.transform),LM(i,t,a,e),OM(i,a),e.animation&&DN(a,i,e),e.emphasis&&H2e(a,i,e),_i(l,a.id+"",i)}function Y2e(a,e){var t=a.style,r=t.image;if(r&&!jt(r)&&(Pq(r)?r=r.src:Bq(r)&&(r=r.toDataURL())),!!r){var n=t.x||0,i=t.y||0,o=t.width,l=t.height,c={href:r,width:o,height:l};return n&&(c.x=n),i&&(c.y=i),PM(c,a.transform),LM(c,t,a,e),OM(c,a),e.animation&&DN(a,c,e),_i("image",a.id+"",c)}}function q2e(a,e){var t=a.style,r=t.text;if(r!=null&&(r+=""),!(!r||isNaN(t.x)||isNaN(t.y))){var n=t.font||Id,i=t.x||0,o=Hxe(t.y||0,Cb(n),t.textBaseline),l=Vxe[t.textAlign]||t.textAlign,c={"dominant-baseline":"central","text-anchor":l};if(IW(t)){var d="",u=t.fontStyle,h=DW(t.fontSize);if(!parseFloat(h))return;var f=t.fontFamily||MG,p=t.fontWeight;d+="font-size:"+h+";font-family:"+f+";",u&&u!=="normal"&&(d+="font-style:"+u+";"),p&&p!=="normal"&&(d+="font-weight:"+p+";"),c.style=d}else c.style="font: "+n;return r.match(/\s/)&&(c["xml:space"]="preserve"),i&&(c.x=i),o&&(c.y=o),PM(c,a.transform),LM(c,t,a,e),OM(c,a),e.animation&&DN(a,c,e),_i("text",a.id+"",c,void 0,r)}}function e7(a,e){if(a instanceof Ia)return zq(a,e);if(a instanceof Li)return Y2e(a,e);if(a instanceof kx)return q2e(a,e)}function X2e(a,e,t){var r=a.style;if(Uxe(r)){var n=Gxe(a),i=t.shadowCache,o=i[n];if(!o){var l=a.getGlobalScale(),c=l[0],d=l[1];if(!c||!d)return;var u=r.shadowOffsetX||0,h=r.shadowOffsetY||0,f=r.shadowBlur,p=Vv(r.shadowColor),g=p.opacity,b=p.color,w=f/2/c,_=f/2/d,k=w+" "+_;o=t.zrId+"-s"+t.shadowIdx++,t.defs[o]=_i("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[_i("feDropShadow","",{dx:u/c,dy:h/d,stdDeviation:k,"flood-color":b,"flood-opacity":g})]),i[n]=o}e.filter=oN(o)}}function Fq(a,e,t,r){var n=a[t],i,o={gradientUnits:n.global?"userSpaceOnUse":"objectBoundingBox"};if(QG(n))i="linearGradient",o.x1=n.x,o.y1=n.y,o.x2=n.x2,o.y2=n.y2;else if(JG(n))i="radialGradient",o.cx=Pt(n.x,.5),o.cy=Pt(n.y,.5),o.r=Pt(n.r,.5);else return;for(var l=n.colorStops,c=[],d=0,u=l.length;d<u;++d){var h=R4(l[d].offset)*100+"%",f=l[d].color,p=Vv(f),g=p.color,b=p.opacity,w={offset:h};w["stop-color"]=g,b<1&&(w["stop-opacity"]=b),c.push(_i("stop",d+"",w))}var _=_i(i,"",o,c),k=RM(_),T=r.gradientCache,D=T[k];D||(D=r.zrId+"-g"+r.gradientIdx++,T[k]=D,o.id=D,r.defs[D]=_i(i,D,o,c)),e[t]=oN(D)}function Vq(a,e,t,r){var n=a.style[t],i=a.getBoundingRect(),o={},l=n.repeat,c=l==="no-repeat",d=l==="repeat-x",u=l==="repeat-y",h;if(KG(n)){var f=n.imageWidth,p=n.imageHeight,g=void 0,b=n.image;if(jt(b)?g=b:Pq(b)?g=b.src:Bq(b)&&(g=b.toDataURL()),typeof Image>"u"){var w="Image width/height must been given explictly in svg-ssr renderer.";cs(f,w),cs(p,w)}else if(f==null||p==null){var _=function(Q,$){if(Q){var ae=Q.elm,J=f||$.width,U=p||$.height;Q.tag==="pattern"&&(d?(U=1,J/=i.width):u&&(J=1,U/=i.height)),Q.attrs.width=J,Q.attrs.height=U,ae&&(ae.setAttribute("width",J),ae.setAttribute("height",U))}},k=FT(g,null,a,function(Q){c||_(O,Q),_(h,Q)});k&&k.width&&k.height&&(f=f||k.width,p=p||k.height)}h=_i("image","img",{href:g,width:f,height:p}),o.width=f,o.height=p}else n.svgElement&&(h=$t(n.svgElement),o.width=n.svgWidth,o.height=n.svgHeight);if(h){var T,D;c?T=D=1:d?(D=1,T=o.width/i.width):u?(T=1,D=o.height/i.height):o.patternUnits="userSpaceOnUse",T!=null&&!isNaN(T)&&(o.width=T),D!=null&&!isNaN(D)&&(o.height=D);var I=aW(n);I&&(o.patternTransform=I);var O=_i("pattern","",o,[h]),P=RM(O),V=r.patternCache,G=V[P];G||(G=r.zrId+"-p"+r.patternIdx++,V[P]=G,o.id=G,O=r.defs[G]=_i("pattern",G,o,[h])),e[t]=oN(G)}}function Z2e(a,e,t){var r=t.clipPathCache,n=t.defs,i=r[a.id];if(!i){i=t.zrId+"-c"+t.clipPathIdx++;var o={id:i};r[a.id]=i,n[i]=_i("clipPath",i,o,[zq(a,t)])}e["clip-path"]=oN(i)}function t7(a){return document.createTextNode(a)}function zf(a,e,t){a.insertBefore(e,t)}function a7(a,e){a.removeChild(e)}function r7(a,e){a.appendChild(e)}function Hq(a){return a.parentNode}function Uq(a){return a.nextSibling}function b5(a,e){a.textContent=e}var n7=58,K2e=120,Q2e=_i("","");function L3(a){return a===void 0}function ic(a){return a!==void 0}function J2e(a,e,t){for(var r={},n=e;n<=t;++n){var i=a[n].key;i!==void 0&&(r[i]=n)}return r}function Yg(a,e){var t=a.key===e.key,r=a.tag===e.tag;return r&&t}function rb(a){var e,t=a.children,r=a.tag;if(ic(r)){var n=a.elm=Rq(r);if(BM(Q2e,a),rt(t))for(e=0;e<t.length;++e){var i=t[e];i!=null&&r7(n,rb(i))}else ic(a.text)&&!Qt(a.text)&&r7(n,t7(a.text))}else a.elm=t7(a.text);return a.elm}function Gq(a,e,t,r,n){for(;r<=n;++r){var i=t[r];i!=null&&zf(a,rb(i),e)}}function o_(a,e,t,r){for(;t<=r;++t){var n=e[t];if(n!=null)if(ic(n.tag)){var i=Hq(n.elm);a7(i,n.elm)}else a7(a,n.elm)}}function BM(a,e){var t,r=e.elm,n=a&&a.attrs||{},i=e.attrs||{};if(n!==i){for(t in i){var o=i[t],l=n[t];l!==o&&(o===!0?r.setAttribute(t,""):o===!1?r.removeAttribute(t):t==="style"?r.style.cssText=o:t.charCodeAt(0)!==K2e?r.setAttribute(t,o):t==="xmlns:xlink"||t==="xmlns"?r.setAttributeNS(D2e,t,o):t.charCodeAt(3)===n7?r.setAttributeNS(I2e,t,o):t.charCodeAt(5)===n7?r.setAttributeNS(Iq,t,o):r.setAttribute(t,o))}for(t in n)t in i||r.removeAttribute(t)}}function e_e(a,e,t){for(var r=0,n=0,i=e.length-1,o=e[0],l=e[i],c=t.length-1,d=t[0],u=t[c],h,f,p,g;r<=i&&n<=c;)o==null?o=e[++r]:l==null?l=e[--i]:d==null?d=t[++n]:u==null?u=t[--c]:Yg(o,d)?(Up(o,d),o=e[++r],d=t[++n]):Yg(l,u)?(Up(l,u),l=e[--i],u=t[--c]):Yg(o,u)?(Up(o,u),zf(a,o.elm,Uq(l.elm)),o=e[++r],u=t[--c]):Yg(l,d)?(Up(l,d),zf(a,l.elm,o.elm),l=e[--i],d=t[++n]):(L3(h)&&(h=J2e(e,r,i)),f=h[d.key],L3(f)?zf(a,rb(d),o.elm):(p=e[f],p.tag!==d.tag?zf(a,rb(d),o.elm):(Up(p,d),e[f]=void 0,zf(a,p.elm,o.elm))),d=t[++n]);(r<=i||n<=c)&&(r>i?(g=t[c+1]==null?null:t[c+1].elm,Gq(a,g,t,n,c)):o_(a,e,r,i))}function Up(a,e){var t=e.elm=a.elm,r=a.children,n=e.children;a!==e&&(BM(a,e),L3(e.text)?ic(r)&&ic(n)?r!==n&&e_e(t,r,n):ic(n)?(ic(a.text)&&b5(t,""),Gq(t,null,n,0,n.length-1)):ic(r)?o_(t,r,0,r.length-1):ic(a.text)&&b5(t,""):a.text!==e.text&&(ic(r)&&o_(t,r,0,r.length-1),b5(t,e.text)))}function t_e(a,e){if(Yg(a,e))Up(a,e);else{var t=a.elm,r=Hq(t);rb(e),r!==null&&(zf(r,e.elm,Uq(t)),o_(r,[a],0,0))}return e}var a_e=0,r_e=(function(){function a(e,t,r){if(this.type="svg",this.refreshHover=i7(),this.configLayer=i7(),this.storage=t,this._opts=r=Je({},r),this.root=e,this._id="zr"+a_e++,this._oldVNode=Y9(r.width,r.height),e&&!r.ssr){var n=this._viewport=document.createElement("div");n.style.cssText="position:relative;overflow:hidden";var i=this._svgDom=this._oldVNode.elm=Rq("svg");BM(null,this._oldVNode),n.appendChild(i),e.appendChild(n)}this.resize(r.width,r.height)}return a.prototype.getType=function(){return this.type},a.prototype.getViewportRoot=function(){return this._viewport},a.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},a.prototype.getSvgDom=function(){return this._svgDom},a.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",t_e(this._oldVNode,e),this._oldVNode=e}},a.prototype.renderOneToVNode=function(e){return e7(e,R3(this._id))},a.prototype.renderToVNode=function(e){e=e||{};var t=this.storage.getDisplayList(!0),r=this._width,n=this._height,i=R3(this._id);i.animation=e.animation,i.willUpdate=e.willUpdate,i.compress=e.compress,i.emphasis=e.emphasis,i.ssr=this._opts.ssr;var o=[],l=this._bgVNode=n_e(r,n,this._backgroundColor,i);l&&o.push(l);var c=e.compress?null:this._mainVNode=_i("g","main",{},[]);this._paintList(t,i,c?c.children:o),c&&o.push(c);var d=it(Va(i.defs),function(f){return i.defs[f]});if(d.length&&o.push(_i("defs","defs",{},d)),e.animation){var u=O2e(i.cssNodes,i.cssAnims,{newline:!0});if(u){var h=_i("style","stl",{},[],u);o.push(h)}}return Y9(r,n,o,e.useViewBox)},a.prototype.renderToString=function(e){return e=e||{},RM(this.renderToVNode({animation:Pt(e.cssAnimation,!0),emphasis:Pt(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Pt(e.useViewBox,!0)}),{newline:!0})},a.prototype.setBackgroundColor=function(e){this._backgroundColor=e},a.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},a.prototype._paintList=function(e,t,r){for(var n=e.length,i=[],o=0,l,c,d=0,u=0;u<n;u++){var h=e[u];if(!h.invisible){var f=h.__clipPaths,p=f&&f.length||0,g=c&&c.length||0,b=void 0;for(b=Math.max(p-1,g-1);b>=0&&!(f&&c&&f[b]===c[b]);b--);for(var w=g-1;w>b;w--)o--,l=i[o-1];for(var _=b+1;_<p;_++){var k={};Z2e(f[_],k,t);var T=_i("g","clip-g-"+d++,k,[]);(l?l.children:r).push(T),i[o++]=T,l=T}c=f;var D=e7(h,t);D&&(l?l.children:r).push(D)}}},a.prototype.resize=function(e,t){var r=this._opts,n=this.root,i=this._viewport;if(e!=null&&(r.width=e),t!=null&&(r.height=t),n&&i&&(i.style.display="none",e=ex(n,0,r),t=ex(n,1,r),i.style.display=""),this._width!==e||this._height!==t){if(this._width=e,this._height=t,i){var o=i.style;o.width=e+"px",o.height=t+"px"}if(RT(this._backgroundColor))this.refresh();else{var l=this._svgDom;l&&(l.setAttribute("width",e),l.setAttribute("height",t));var c=this._bgVNode&&this._bgVNode.elm;c&&(c.setAttribute("width",e),c.setAttribute("height",t))}}},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},a.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},a.prototype.toDataURL=function(e){var t=this.renderToString(),r="data:image/svg+xml;";return e?(t=$xe(t),t&&r+"base64,"+t):r+"charset=UTF-8,"+encodeURIComponent(t)},a})();function i7(a){return function(){}}function n_e(a,e,t,r){var n;if(t&&t!=="none")if(n=_i("rect","bg",{width:a,height:e,x:"0",y:"0"}),eW(t))Fq({fill:t},n.attrs,"fill",r);else if(RT(t))Vq({style:{fill:t},dirty:Bn,getBoundingRect:function(){return{width:a,height:e}}},n.attrs,"fill",r);else{var i=Vv(t),o=i.color,l=i.opacity;n.attrs.fill=o,l<1&&(n.attrs["fill-opacity"]=l)}return n}function i_e(a){a.registerPainter("svg",r_e)}function s7(a,e,t){var r=kl.createCanvas(),n=e.getWidth(),i=e.getHeight(),o=r.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=n+"px",o.height=i+"px",r.setAttribute("data-zr-dom-id",a)),r.width=n*t,r.height=i*t,r}var y5=(function(a){Le(e,a);function e(t,r,n){var i=a.call(this)||this;i.motionBlur=!1,i.lastFrameAlpha=.7,i.dpr=1,i.virtual=!1,i.config={},i.incremental=!1,i.zlevel=0,i.maxRepaintRectCount=5,i.__dirty=!0,i.__firstTimePaint=!0,i.__used=!1,i.__drawIndex=0,i.__startIndex=0,i.__endIndex=0,i.__prevStartIndex=null,i.__prevEndIndex=null;var o;n=n||R2,typeof t=="string"?o=s7(t,r,n):Qt(t)&&(o=t,t=o.id),i.id=t,i.dom=o;var l=o.style;return l&&(OG(o),o.onselectstart=function(){return!1},l.padding="0",l.margin="0",l.borderWidth="0"),i.painter=r,i.dpr=n,i}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=s7("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,r,n,i){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],l=this.maxRepaintRectCount,c=!1,d=new Jt(0,0,0,0);function u(k){if(!(!k.isFinite()||k.isZero()))if(o.length===0){var T=new Jt(0,0,0,0);T.copy(k),o.push(T)}else{for(var D=!1,I=1/0,O=0,P=0;P<o.length;++P){var V=o[P];if(V.intersect(k)){var G=new Jt(0,0,0,0);G.copy(V),G.union(k),o[P]=G,D=!0;break}else if(c){d.copy(k),d.union(V);var Q=k.width*k.height,$=V.width*V.height,ae=d.width*d.height,J=ae-Q-$;J<I&&(I=J,O=P)}}if(c&&(o[O].union(k),D=!0),!D){var T=new Jt(0,0,0,0);T.copy(k),o.push(T)}c||(c=o.length>=l)}}for(var h=this.__startIndex;h<this.__endIndex;++h){var f=t[h];if(f){var p=f.shouldBePainted(n,i,!0,!0),g=f.__isRendered&&(f.__dirty&yo||!p)?f.getPrevPaintRect():null;g&&u(g);var b=p&&(f.__dirty&yo||!f.__isRendered)?f.getPaintRect():null;b&&u(b)}}for(var h=this.__prevStartIndex;h<this.__prevEndIndex;++h){var f=r[h],p=f&&f.shouldBePainted(n,i,!0,!0);if(f&&(!p||!f.__zr)&&f.__isRendered){var g=f.getPrevPaintRect();g&&u(g)}}var w;do{w=!1;for(var h=0;h<o.length;){if(o[h].isZero()){o.splice(h,1);continue}for(var _=h+1;_<o.length;)o[h].intersect(o[_])?(w=!0,o[h].union(o[_]),o.splice(_,1)):_++;h++}}while(w);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,r){var n=this.dpr,i=this.dom,o=i.style,l=this.domBack;o&&(o.width=t+"px",o.height=r+"px"),i.width=t*n,i.height=r*n,l&&(l.width=t*n,l.height=r*n,n!==1&&this.ctxBack.scale(n,n))},e.prototype.clear=function(t,r,n){var i=this.dom,o=this.ctx,l=i.width,c=i.height;r=r||this.clearColor;var d=this.motionBlur&&!t,u=this.lastFrameAlpha,h=this.dpr,f=this;d&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,l/h,c/h));var p=this.domBack;function g(b,w,_,k){if(o.clearRect(b,w,_,k),r&&r!=="transparent"){var T=void 0;if(aN(r)){var D=r.global||r.__width===_&&r.__height===k;T=D&&r.__canvasGradient||v3(o,r,{x:0,y:0,width:_,height:k}),r.__canvasGradient=T,r.__width=_,r.__height=k}else Kpe(r)&&(r.scaleX=r.scaleX||h,r.scaleY=r.scaleY||h,T=b3(o,r,{dirty:function(){f.setUnpainted(),f.painter.refresh()}}));o.save(),o.fillStyle=T||r,o.fillRect(b,w,_,k),o.restore()}d&&(o.save(),o.globalAlpha=u,o.drawImage(p,b,w,_,k),o.restore())}!n||d?g(0,0,l,c):n.length&&oe(n,function(b){g(b.x*h,b.y*h,b.width*h,b.height*h)})},e})(il),o7=1e5,Cf=314159,qy=.01,s_e=.001;function o_e(a){return a?a.__builtin__?!0:!(typeof a.resize!="function"||typeof a.refresh!="function"):!1}function l_e(a,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+a+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var c_e=(function(){function a(e,t,r,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var i=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=Je({},r||{}),this.dpr=r.devicePixelRatio||R2,this._singleCanvas=i,this.root=e;var o=e.style;o&&(OG(e),e.innerHTML=""),this.storage=t;var l=this._zlevelList;this._prevDisplayList=[];var c=this._layers;if(i){var u=e,h=u.width,f=u.height;r.width!=null&&(h=r.width),r.height!=null&&(f=r.height),this.dpr=r.devicePixelRatio||1,u.width=h*this.dpr,u.height=f*this.dpr,this._width=h,this._height=f;var p=new y5(u,this,this.dpr);p.__builtin__=!0,p.initContext(),c[Cf]=p,p.zlevel=Cf,l.push(Cf),this._domRoot=e}else{this._width=ex(e,0,r),this._height=ex(e,1,r);var d=this._domRoot=l_e(this._width,this._height);e.appendChild(d)}}return a.prototype.getType=function(){return"canvas"},a.prototype.isSingleCanvas=function(){return this._singleCanvas},a.prototype.getViewportRoot=function(){return this._domRoot},a.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},a.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),r=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,r,e,this._redrawId);for(var i=0;i<n.length;i++){var o=n[i],l=this._layers[o];if(!l.__builtin__&&l.refresh){var c=i===0?this._backgroundColor:null;l.refresh(c)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},a.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},a.prototype._paintHoverList=function(e){var t=e.length,r=this._hoverlayer;if(r&&r.clear(),!!t){for(var n={inHover:!0,viewWidth:this._width,viewHeight:this._height},i,o=0;o<t;o++){var l=e[o];l.__inHover&&(r||(r=this._hoverlayer=this.getLayer(o7)),i||(i=r.ctx,i.save()),Zf(i,l,n,o===t-1))}i&&i.restore()}},a.prototype.getHoverLayer=function(){return this.getLayer(o7)},a.prototype.paintOne=function(e,t){NY(e,t)},a.prototype._paintList=function(e,t,r,n){if(this._redrawId===n){r=r||!1,this._updateLayerStatus(e);var i=this._doPaintList(e,t,r),o=i.finished,l=i.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),l&&this._paintHoverList(e),o)this.eachLayer(function(d){d.afterBrush&&d.afterBrush()});else{var c=this;A2(function(){c._paintList(e,t,r,n)})}}},a.prototype._compositeManually=function(){var e=this.getLayer(Cf).ctx,t=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,t,r),this.eachBuiltinLayer(function(n){n.virtual&&e.drawImage(n.dom,0,0,t,r)})},a.prototype._doPaintList=function(e,t,r){for(var n=this,i=[],o=this._opts.useDirtyRect,l=0;l<this._zlevelList.length;l++){var c=this._zlevelList[l],d=this._layers[c];d.__builtin__&&d!==this._hoverlayer&&(d.__dirty||r)&&i.push(d)}for(var u=!0,h=!1,f=function(b){var w=i[b],_=w.ctx,k=o&&w.createRepaintRects(e,t,p._width,p._height),T=r?w.__startIndex:w.__drawIndex,D=!r&&w.incremental&&Date.now,I=D&&Date.now(),O=w.zlevel===p._zlevelList[0]?p._backgroundColor:null;if(w.__startIndex===w.__endIndex)w.clear(!1,O,k);else if(T===w.__startIndex){var P=e[T];(!P.incremental||!P.notClear||r)&&w.clear(!1,O,k)}T===-1&&(console.error("For some unknown reason. drawIndex is -1"),T=w.__startIndex);var V,G=function(J){var U={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(V=T;V<w.__endIndex;V++){var F=e[V];if(F.__inHover&&(h=!0),n._doPaintEl(F,w,o,J,U,V===w.__endIndex-1),D){var W=Date.now()-I;if(W>15)break}}U.prevElClipPaths&&_.restore()};if(k)if(k.length===0)V=w.__endIndex;else for(var Q=p.dpr,$=0;$<k.length;++$){var ae=k[$];_.save(),_.beginPath(),_.rect(ae.x*Q,ae.y*Q,ae.width*Q,ae.height*Q),_.clip(),G(ae),_.restore()}else _.save(),G(),_.restore();w.__drawIndex=V,w.__drawIndex<w.__endIndex&&(u=!1)},p=this,g=0;g<i.length;g++)f(g);return Ba.wxa&&oe(this._layers,function(b){b&&b.ctx&&b.ctx.draw&&b.ctx.draw()}),{finished:u,needsRefreshHover:h}},a.prototype._doPaintEl=function(e,t,r,n,i,o){var l=t.ctx;if(r){var c=e.getPaintRect();(!n||c&&c.intersect(n))&&(Zf(l,e,i,o),e.setPrevPaintRect(c))}else Zf(l,e,i,o)},a.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Cf);var r=this._layers[e];return r||(r=new y5("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?_a(r,this._layerConfig[e],!0):this._layerConfig[e-qy]&&_a(r,this._layerConfig[e-qy],!0),t&&(r.virtual=t),this.insertLayer(e,r),r.initContext()),r},a.prototype.insertLayer=function(e,t){var r=this._layers,n=this._zlevelList,i=n.length,o=this._domRoot,l=null,c=-1;if(!r[e]&&o_e(t)){if(i>0&&e>n[0]){for(c=0;c<i-1&&!(n[c]<e&&n[c+1]>e);c++);l=r[n[c]]}if(n.splice(c+1,0,e),r[e]=t,!t.virtual)if(l){var d=l.dom;d.nextSibling?o.insertBefore(t.dom,d.nextSibling):o.appendChild(t.dom)}else o.firstChild?o.insertBefore(t.dom,o.firstChild):o.appendChild(t.dom);t.painter||(t.painter=this)}},a.prototype.eachLayer=function(e,t){for(var r=this._zlevelList,n=0;n<r.length;n++){var i=r[n];e.call(t,this._layers[i],i)}},a.prototype.eachBuiltinLayer=function(e,t){for(var r=this._zlevelList,n=0;n<r.length;n++){var i=r[n],o=this._layers[i];o.__builtin__&&e.call(t,o,i)}},a.prototype.eachOtherLayer=function(e,t){for(var r=this._zlevelList,n=0;n<r.length;n++){var i=r[n],o=this._layers[i];o.__builtin__||e.call(t,o,i)}},a.prototype.getLayers=function(){return this._layers},a.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(h,f){h.__dirty=h.__used=!1});function t(h){i&&(i.__endIndex!==h&&(i.__dirty=!0),i.__endIndex=h)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var n=e[r];if(n.zlevel!==e[r-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}}var i=null,o=0,l,c;for(c=0;c<e.length;c++){var n=e[c],d=n.zlevel,u=void 0;l!==d&&(l=d,o=0),n.incremental?(u=this.getLayer(d+s_e,this._needsManuallyCompositing),u.incremental=!0,o=1):u=this.getLayer(d+(o>0?qy:0),this._needsManuallyCompositing),u.__builtin__||CT("ZLevel "+d+" has been used by unkown layer "+u.id),u!==i&&(u.__used=!0,u.__startIndex!==c&&(u.__dirty=!0),u.__startIndex=c,u.incremental?u.__drawIndex=-1:u.__drawIndex=c,t(c),i=u),n.__dirty&yo&&!n.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=c))}t(c),this.eachBuiltinLayer(function(h,f){!h.__used&&h.getElementCount()>0&&(h.__dirty=!0,h.__startIndex=h.__endIndex=h.__drawIndex=0),h.__dirty&&h.__drawIndex<0&&(h.__drawIndex=h.__startIndex)})},a.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},a.prototype._clearLayer=function(e){e.clear()},a.prototype.setBackgroundColor=function(e){this._backgroundColor=e,oe(this._layers,function(t){t.setUnpainted()})},a.prototype.configLayer=function(e,t){if(t){var r=this._layerConfig;r[e]?_a(r[e],t,!0):r[e]=t;for(var n=0;n<this._zlevelList.length;n++){var i=this._zlevelList[n];if(i===e||i===e+qy){var o=this._layers[i];_a(o,r[e],!0)}}}},a.prototype.delLayer=function(e){var t=this._layers,r=this._zlevelList,n=t[e];n&&(n.dom.parentNode.removeChild(n.dom),delete t[e],r.splice(ya(r,e),1))},a.prototype.resize=function(e,t){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var n=this._opts,i=this.root;if(e!=null&&(n.width=e),t!=null&&(n.height=t),e=ex(i,0,n),t=ex(i,1,n),r.style.display="",this._width!==e||t!==this._height){r.style.width=e+"px",r.style.height=t+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(Cf).resize(e,t)}return this},a.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},a.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},a.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[Cf].dom;var t=new y5("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var r=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var n=t.dom.width,i=t.dom.height;this.eachLayer(function(h){h.__builtin__?r.drawImage(h.dom,0,0,n,i):h.renderToCanvas&&(r.save(),h.renderToCanvas(r),r.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},l=this.storage.getDisplayList(!0),c=0,d=l.length;c<d;c++){var u=l[c];Zf(r,u,o,c===d-1)}return t.dom},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a})();function d_e(a){a.registerPainter("canvas",c_e)}var u_e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return Wd(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var r=new Gt,n=ei("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);r.add(n),n.setStyle(t.lineStyle);var i=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),l=i==="none"?"circle":i,c=t.itemHeight*.8,d=ei(l,(t.itemWidth-c)/2,(t.itemHeight-c)/2,c,c,t.itemStyle.fill);r.add(d),d.setStyle(t.itemStyle);var u=t.iconRotate==="inherit"?o:t.iconRotate||0;return d.rotation=u*Math.PI/180,d.setOrigin([t.itemWidth/2,t.itemHeight/2]),l.indexOf("empty")>-1&&(d.style.stroke=d.style.fill,d.style.fill=Fe.color.neutral00,d.style.lineWidth=2),r},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:6,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e})(Fr);function Ix(a,e){var t=a.mapDimensionsAll("defaultedLabel"),r=t.length;if(r===1){var n=Ax(a,e,t[0]);return n!=null?n+"":null}else if(r){for(var i=[],o=0;o<t.length;o++)i.push(Ax(a,e,t[o]));return i.join(" ")}}function Wq(a,e){var t=a.mapDimensionsAll("defaultedLabel");if(!rt(e))return e+"";for(var r=[],n=0;n<t.length;n++){var i=a.getDimensionIndex(t[n]);i>=0&&r.push(e[i])}return r.join(" ")}var zb=(function(a){Le(e,a);function e(t,r,n,i){var o=a.call(this)||this;return o.updateData(t,r,n,i),o}return e.prototype._createSymbol=function(t,r,n,i,o,l){this.removeAll();var c=ei(t,-1,-1,2,2,null,l);c.attr({z2:Pt(o,100),culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),c.drift=h_e,this._symbolType=t,this.add(c)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Od(this.childAt(0))},e.prototype.downplay=function(){Pd(this.childAt(0))},e.prototype.setZ=function(t,r){var n=this.childAt(0);n.zlevel=t,n.z=r},e.prototype.setDraggable=function(t,r){var n=this.childAt(0);n.draggable=t,n.cursor=!r&&t?"move":n.cursor},e.prototype.updateData=function(t,r,n,i){this.silent=!1;var o=t.getItemVisual(r,"symbol")||"circle",l=t.hostModel,c=e.getSymbolSize(t,r),d=e.getSymbolZ2(t,r),u=o!==this._symbolType,h=i&&i.disableAnimation;if(u){var f=t.getItemVisual(r,"symbolKeepAspect");this._createSymbol(o,t,r,c,d,f)}else{var p=this.childAt(0);p.silent=!1;var g={scaleX:c[0]/2,scaleY:c[1]/2};h?p.attr(g):rr(p,g,l,r),nl(p)}if(this._updateCommon(t,r,c,n,i),u){var p=this.childAt(0);if(!h){var g={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:p.style.opacity}};p.scaleX=p.scaleY=0,p.style.opacity=0,en(p,g,l,r)}}h&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,r,n,i,o){var l=this.childAt(0),c=t.hostModel,d,u,h,f,p,g,b,w,_;if(i&&(d=i.emphasisItemStyle,u=i.blurItemStyle,h=i.selectItemStyle,f=i.focus,p=i.blurScope,b=i.labelStatesModels,w=i.hoverScale,_=i.cursorStyle,g=i.emphasisDisabled),!i||t.hasItemOption){var k=i&&i.itemModel?i.itemModel:t.getItemModel(r),T=k.getModel("emphasis");d=T.getModel("itemStyle").getItemStyle(),h=k.getModel(["select","itemStyle"]).getItemStyle(),u=k.getModel(["blur","itemStyle"]).getItemStyle(),f=T.get("focus"),p=T.get("blurScope"),g=T.get("disabled"),b=fi(k),w=T.getShallow("scale"),_=k.getShallow("cursor")}var D=t.getItemVisual(r,"symbolRotate");l.attr("rotation",(D||0)*Math.PI/180||0);var I=I0(t.getItemVisual(r,"symbolOffset"),n);I&&(l.x=I[0],l.y=I[1]),_&&l.attr("cursor",_);var O=t.getItemVisual(r,"style"),P=O.fill;if(l instanceof Li){var V=l.style;l.useStyle(Je({image:V.image,x:V.x,y:V.y,width:V.width,height:V.height},O))}else l.__isEmptyBrush?l.useStyle(Je({},O)):l.useStyle(O),l.style.decal=null,l.setColor(P,o&&o.symbolInnerColor),l.style.strokeNoScale=!0;var G=t.getItemVisual(r,"liftZ"),Q=this._z2;G!=null?Q==null&&(this._z2=l.z2,l.z2+=G):Q!=null&&(l.z2=Q,this._z2=null);var $=o&&o.useNameLabel;ji(l,b,{labelFetcher:c,labelDataIndex:r,defaultText:ae,inheritColor:P,defaultOpacity:O.opacity});function ae(F){return $?t.getName(F):Ix(t,F)}this._sizeX=n[0]/2,this._sizeY=n[1]/2;var J=l.ensureState("emphasis");J.style=d,l.ensureState("select").style=h,l.ensureState("blur").style=u;var U=w==null||w===!0?Math.max(1.1,3/this._sizeY):isFinite(w)&&w>0?+w:1;J.scaleX=this._sizeX*U,J.scaleY=this._sizeY*U,this.setSymbolScale(1),on(this,f,p,g)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,r,n){var i=this.childAt(0),o=na(this).dataIndex,l=n&&n.animation;if(this.silent=i.silent=!0,n&&n.fadeLabel){var c=i.getTextContent();c&&vh(c,{style:{opacity:0}},r,{dataIndex:o,removeOpt:l,cb:function(){i.removeTextContent()}})}else i.removeTextContent();vh(i,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:o,cb:t,removeOpt:l})},e.getSymbolSize=function(t,r){return Jx(t.getItemVisual(r,"symbolSize"))},e.getSymbolZ2=function(t,r){return t.getItemVisual(r,"z2")},e})(Gt);function h_e(a,e){this.parent.drift(a,e)}function w5(a,e,t,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(t))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&a.getItemVisual(t,"symbol")!=="none"}function l7(a){return a!=null&&!Qt(a)&&(a={isIgnore:a}),a||{}}function c7(a){var e=a.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:fi(e),cursorStyle:e.get("cursor")}}var Fb=(function(){function a(e){this.group=new Gt,this._SymbolCtor=e||zb}return a.prototype.updateData=function(e,t){this._progressiveEls=null,t=l7(t);var r=this.group,n=e.hostModel,i=this._data,o=this._SymbolCtor,l=t.disableAnimation,c=c7(e),d={disableAnimation:l},u=t.getSymbolPoint||function(h){return e.getItemLayout(h)};i||r.removeAll(),e.diff(i).add(function(h){var f=u(h);if(w5(e,f,h,t)){var p=new o(e,h,c,d);p.setPosition(f),e.setItemGraphicEl(h,p),r.add(p)}}).update(function(h,f){var p=i.getItemGraphicEl(f),g=u(h);if(!w5(e,g,h,t)){r.remove(p);return}var b=e.getItemVisual(h,"symbol")||"circle",w=p&&p.getSymbolType&&p.getSymbolType();if(!p||w&&w!==b)r.remove(p),p=new o(e,h,c,d),p.setPosition(g);else{p.updateData(e,h,c,d);var _={x:g[0],y:g[1]};l?p.attr(_):rr(p,_,n)}r.add(p),e.setItemGraphicEl(h,p)}).remove(function(h){var f=i.getItemGraphicEl(h);f&&f.fadeOut(function(){r.remove(f)},n)}).execute(),this._getSymbolPoint=u,this._data=e},a.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(r,n){var i=e._getSymbolPoint(n);r.setPosition(i),r.markRedraw()})},a.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=c7(e),this._data=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(e,t,r){this._progressiveEls=[],r=l7(r);function n(c){c.isGroup||(c.incremental=!0,c.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var o=t.getItemLayout(i);if(w5(t,o,i,r)){var l=new this._SymbolCtor(t,i,this._seriesScope);l.traverse(n),l.setPosition(o),this.group.add(l),t.setItemGraphicEl(i,l),this._progressiveEls.push(l)}}},a.prototype.eachRendered=function(e){Ah(this._progressiveEls||this.group,e)},a.prototype.remove=function(e){var t=this.group,r=this._data;r&&e?r.eachItemGraphicEl(function(n){n.fadeOut(function(){t.remove(n)},r.hostModel)}):t.removeAll()},a})();function $q(a,e,t){var r=a.getBaseAxis(),n=a.getOtherAxis(r),i=f_e(n,t),o=r.dim,l=n.dim,c=e.mapDimension(l),d=e.mapDimension(o),u=l==="x"||l==="radius"?1:0,h=it(a.dimensions,function(g){return e.mapDimension(g)}),f=!1,p=e.getCalculationInfo("stackResultDimension");return bh(e,h[0])&&(f=!0,h[0]=p),bh(e,h[1])&&(f=!0,h[1]=p),{dataDimsForPoint:h,valueStart:i,valueAxisDim:l,baseAxisDim:o,stacked:!!f,valueDim:c,baseDim:d,baseDataOffset:u,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function f_e(a,e){var t=0,r=a.scale.getExtent();return e==="start"?t=r[0]:e==="end"?t=r[1]:Xa(e)&&!isNaN(e)?t=e:r[0]>0?t=r[0]:r[1]<0&&(t=r[1]),t}function Yq(a,e,t,r){var n=NaN;a.stacked&&(n=t.get(t.getCalculationInfo("stackedOverDimension"),r)),isNaN(n)&&(n=a.valueStart);var i=a.baseDataOffset,o=[];return o[i]=t.get(a.baseDim,r),o[1-i]=n,e.dataToPoint(o)}function p_e(a,e){var t=[];return e.diff(a).add(function(r){t.push({cmd:"+",idx:r})}).update(function(r,n){t.push({cmd:"=",idx:n,idx1:r})}).remove(function(r){t.push({cmd:"-",idx:r})}).execute(),t}function x_e(a,e,t,r,n,i,o,l){for(var c=p_e(a,e),d=[],u=[],h=[],f=[],p=[],g=[],b=[],w=$q(n,e,o),_=a.getLayout("points")||[],k=e.getLayout("points")||[],T=0;T<c.length;T++){var D=c[T],I=!0,O=void 0,P=void 0;switch(D.cmd){case"=":O=D.idx*2,P=D.idx1*2;var V=_[O],G=_[O+1],Q=k[P],$=k[P+1];(isNaN(V)||isNaN(G))&&(V=Q,G=$),d.push(V,G),u.push(Q,$),h.push(t[O],t[O+1]),f.push(r[P],r[P+1]),b.push(e.getRawIndex(D.idx1));break;case"+":var ae=D.idx,J=w.dataDimsForPoint,U=n.dataToPoint([e.get(J[0],ae),e.get(J[1],ae)]);P=ae*2,d.push(U[0],U[1]),u.push(k[P],k[P+1]);var F=Yq(w,n,e,ae);h.push(F[0],F[1]),f.push(r[P],r[P+1]),b.push(e.getRawIndex(ae));break;case"-":I=!1}I&&(p.push(D),g.push(g.length))}g.sort(function(he,ve){return b[he]-b[ve]});for(var W=d.length,K=hc(W),ee=hc(W),ne=hc(W),re=hc(W),Z=[],T=0;T<g.length;T++){var ie=g[T],de=T*2,fe=ie*2;K[de]=d[fe],K[de+1]=d[fe+1],ee[de]=u[fe],ee[de+1]=u[fe+1],ne[de]=h[fe],ne[de+1]=h[fe+1],re[de]=f[fe],re[de+1]=f[fe+1],Z[T]=p[ie]}return{current:K,next:ee,stackedOnCurrent:ne,stackedOnNext:re,status:Z}}var Du=Math.min,Iu=Math.max;function c0(a,e){return isNaN(a)||isNaN(e)}function O3(a,e,t,r,n,i,o,l,c){for(var d,u,h,f,p,g,b=t,w=0;w<r;w++){var _=e[b*2],k=e[b*2+1];if(b>=n||b<0)break;if(c0(_,k)){if(c){b+=i;continue}break}if(b===t)a[i>0?"moveTo":"lineTo"](_,k),h=_,f=k;else{var T=_-d,D=k-u;if(T*T+D*D<.5){b+=i;continue}if(o>0){for(var I=b+i,O=e[I*2],P=e[I*2+1];O===_&&P===k&&w<r;)w++,I+=i,b+=i,O=e[I*2],P=e[I*2+1],_=e[b*2],k=e[b*2+1],T=_-d,D=k-u;var V=w+1;if(c)for(;c0(O,P)&&V<r;)V++,I+=i,O=e[I*2],P=e[I*2+1];var G=.5,Q=0,$=0,ae=void 0,J=void 0;if(V>=r||c0(O,P))p=_,g=k;else{Q=O-d,$=P-u;var U=_-d,F=O-_,W=k-u,K=P-k,ee=void 0,ne=void 0;if(l==="x"){ee=Math.abs(U),ne=Math.abs(F);var re=Q>0?1:-1;p=_-re*ee*o,g=k,ae=_+re*ne*o,J=k}else if(l==="y"){ee=Math.abs(W),ne=Math.abs(K);var Z=$>0?1:-1;p=_,g=k-Z*ee*o,ae=_,J=k+Z*ne*o}else ee=Math.sqrt(U*U+W*W),ne=Math.sqrt(F*F+K*K),G=ne/(ne+ee),p=_-Q*o*(1-G),g=k-$*o*(1-G),ae=_+Q*o*G,J=k+$*o*G,ae=Du(ae,Iu(O,_)),J=Du(J,Iu(P,k)),ae=Iu(ae,Du(O,_)),J=Iu(J,Du(P,k)),Q=ae-_,$=J-k,p=_-Q*ee/ne,g=k-$*ee/ne,p=Du(p,Iu(d,_)),g=Du(g,Iu(u,k)),p=Iu(p,Du(d,_)),g=Iu(g,Du(u,k)),Q=_-p,$=k-g,ae=_+Q*ne/ee,J=k+$*ne/ee}a.bezierCurveTo(h,f,p,g,_,k),h=ae,f=J}else a.lineTo(_,k)}d=_,u=k,b+=i}return w}var qq=(function(){function a(){this.smooth=0,this.smoothConstraint=!0}return a})(),m_e=(function(a){Le(e,a);function e(t){var r=a.call(this,t)||this;return r.type="ec-polyline",r}return e.prototype.getDefaultStyle=function(){return{stroke:Fe.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new qq},e.prototype.buildPath=function(t,r){var n=r.points,i=0,o=n.length/2;if(r.connectNulls){for(;o>0&&c0(n[o*2-2],n[o*2-1]);o--);for(;i<o&&c0(n[i*2],n[i*2+1]);i++);}for(;i<o;)i+=O3(t,n,i,o,o,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},e.prototype.getPointOn=function(t,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n=this.path,i=n.data,o=Tc.CMD,l,c,d=r==="x",u=[],h=0;h<i.length;){var f=i[h++],p=void 0,g=void 0,b=void 0,w=void 0,_=void 0,k=void 0,T=void 0;switch(f){case o.M:l=i[h++],c=i[h++];break;case o.L:if(p=i[h++],g=i[h++],T=d?(t-l)/(p-l):(t-c)/(g-c),T<=1&&T>=0){var D=d?(g-c)*T+c:(p-l)*T+l;return d?[t,D]:[D,t]}l=p,c=g;break;case o.C:p=i[h++],g=i[h++],b=i[h++],w=i[h++],_=i[h++],k=i[h++];var I=d?M2(l,p,b,_,t,u):M2(c,g,w,k,t,u);if(I>0)for(var O=0;O<I;O++){var P=u[O];if(P<=1&&P>=0){var D=d?bi(c,g,w,k,P):bi(l,p,b,_,P);return d?[t,D]:[D,t]}}l=_,c=k;break}}},e})(Ia),g_e=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e})(qq),Xq=(function(a){Le(e,a);function e(t){var r=a.call(this,t)||this;return r.type="ec-polygon",r}return e.prototype.getDefaultShape=function(){return new g_e},e.prototype.buildPath=function(t,r){var n=r.points,i=r.stackedOnPoints,o=0,l=n.length/2,c=r.smoothMonotone;if(r.connectNulls){for(;l>0&&c0(n[l*2-2],n[l*2-1]);l--);for(;o<l&&c0(n[o*2],n[o*2+1]);o++);}for(;o<l;){var d=O3(t,n,o,l,l,1,r.smooth,c,r.connectNulls);O3(t,i,o+d-1,d,l,-1,r.stackedOnSmooth,c,r.connectNulls),o+=d+1,t.closePath()}},e})(Ia);function Zq(a,e,t,r,n){var i=a.getArea(),o=i.x,l=i.y,c=i.width,d=i.height,u=t.get(["lineStyle","width"])||0;o-=u/2,l-=u/2,c+=u,d+=u,c=Math.ceil(c),o!==Math.floor(o)&&(o=Math.floor(o),c++);var h=new Ta({shape:{x:o,y:l,width:c,height:d}});if(e){var f=a.getBaseAxis(),p=f.isHorizontal(),g=f.inverse;p?(g&&(h.shape.x+=c),h.shape.width=0):(g||(h.shape.y+=d),h.shape.height=0);var b=Ut(n)?function(w){n(w,h)}:null;en(h,{shape:{width:c,height:d,x:o,y:l}},t,null,r,b)}return h}function Kq(a,e,t){var r=a.getArea(),n=Yn(r.r0,1),i=Yn(r.r,1),o=new ds({shape:{cx:Yn(a.cx,1),cy:Yn(a.cy,1),r0:n,r:i,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var l=a.getBaseAxis().dim==="angle";l?o.shape.endAngle=r.startAngle:o.shape.r=n,en(o,{shape:{endAngle:r.endAngle,r:i}},t)}return o}function Vb(a,e,t,r,n){if(a){if(a.type==="polar")return Kq(a,e,t);if(a.type==="cartesian2d")return Zq(a,e,t,r,n)}else return null;return null}function yh(a,e){return a.type===e}function d7(a,e){if(a.length===e.length){for(var t=0;t<a.length;t++)if(a[t]!==e[t])return;return!0}}function u7(a){for(var e=1/0,t=1/0,r=-1/0,n=-1/0,i=0;i<a.length;){var o=a[i++],l=a[i++];isNaN(o)||(e=Math.min(o,e),r=Math.max(o,r)),isNaN(l)||(t=Math.min(l,t),n=Math.max(l,n))}return[[e,t],[r,n]]}function h7(a,e){var t=u7(a),r=t[0],n=t[1],i=u7(e),o=i[0],l=i[1];return Math.max(Math.abs(r[0]-o[0]),Math.abs(r[1]-o[1]),Math.abs(n[0]-l[0]),Math.abs(n[1]-l[1]))}function f7(a){return Xa(a)?a:a?.5:0}function v_e(a,e,t){if(!t.valueDim)return[];for(var r=e.count(),n=hc(r*2),i=0;i<r;i++){var o=Yq(t,a,e,i);n[i*2]=o[0],n[i*2+1]=o[1]}return n}function Ru(a,e,t,r,n){var i=t.getBaseAxis(),o=i.dim==="x"||i.dim==="radius"?0:1,l=[],c=0,d=[],u=[],h=[],f=[];if(n){for(c=0;c<a.length;c+=2){var p=e||a;!isNaN(p[c])&&!isNaN(p[c+1])&&f.push(a[c],a[c+1])}a=f}for(c=0;c<a.length-2;c+=2)switch(h[0]=a[c+2],h[1]=a[c+3],u[0]=a[c],u[1]=a[c+1],l.push(u[0],u[1]),r){case"end":d[o]=h[o],d[1-o]=u[1-o],l.push(d[0],d[1]);break;case"middle":var g=(u[o]+h[o])/2,b=[];d[o]=b[o]=g,d[1-o]=u[1-o],b[1-o]=h[1-o],l.push(d[0],d[1]),l.push(b[0],b[1]);break;default:d[o]=u[o],d[1-o]=h[1-o],l.push(d[0],d[1])}return l.push(a[c++],a[c++]),l}function b_e(a,e){var t=[],r=a.length,n,i;function o(u,h,f){var p=u.coord,g=(f-p)/(h.coord-p),b=zxe(g,[u.color,h.color]);return{coord:f,color:b}}for(var l=0;l<r;l++){var c=a[l],d=c.coord;if(d<0)n=c;else if(d>e){i?t.push(o(i,c,e)):n&&t.push(o(n,c,0),o(n,c,e));break}else n&&(t.push(o(n,c,0)),n=null),t.push(c),i=c}return t}function y_e(a,e,t){var r=a.getVisual("visualMeta");if(!(!r||!r.length||!a.count())&&e.type==="cartesian2d"){for(var n,i,o=r.length-1;o>=0;o--){var l=a.getDimensionInfo(r[o].dimension);if(n=l&&l.coordDim,n==="x"||n==="y"){i=r[o];break}}if(i){var c=e.getAxis(n),d=it(i.stops,function(T){return{coord:c.toGlobalCoord(c.dataToCoord(T.value)),color:T.color}}),u=d.length,h=i.outerColors.slice();u&&d[0].coord>d[u-1].coord&&(d.reverse(),h.reverse());var f=b_e(d,n==="x"?t.getWidth():t.getHeight()),p=f.length;if(!p&&u)return d[0].coord<0?h[1]?h[1]:d[u-1].color:h[0]?h[0]:d[0].color;var g=10,b=f[0].coord-g,w=f[p-1].coord+g,_=w-b;if(_<.001)return"transparent";oe(f,function(T){T.offset=(T.coord-b)/_}),f.push({offset:p?f[p-1].offset:.5,color:h[1]||"transparent"}),f.unshift({offset:p?f[0].offset:.5,color:h[0]||"transparent"});var k=new Yx(0,0,0,0,f,!0);return k[n]=b,k[n+"2"]=w,k}}}function w_e(a,e,t){var r=a.get("showAllSymbol"),n=r==="auto";if(!(r&&!n)){var i=t.getAxesByScale("ordinal")[0];if(i&&!(n&&__e(i,e))){var o=e.mapDimension(i.dim),l={};return oe(i.getViewLabels(),function(c){var d=i.scale.getRawOrdinalNumber(c.tickValue);l[d]=1}),function(c){return!l.hasOwnProperty(e.get(o,c))}}}}function __e(a,e){var t=a.getExtent(),r=Math.abs(t[1]-t[0])/a.scale.count();isNaN(r)&&(r=0);for(var n=e.count(),i=Math.max(1,Math.round(n/5)),o=0;o<n;o+=i)if(zb.getSymbolSize(e,o)[a.isHorizontal()?1:0]*1.5>r)return!1;return!0}function N_e(a,e){return isNaN(a)||isNaN(e)}function j_e(a){for(var e=a.length/2;e>0&&N_e(a[e*2-2],a[e*2-1]);e--);return e-1}function p7(a,e){return[a[e*2],a[e*2+1]]}function S_e(a,e,t){for(var r=a.length/2,n=t==="x"?0:1,i,o,l=0,c=-1,d=0;d<r;d++)if(o=a[d*2+n],!(isNaN(o)||isNaN(a[d*2+1-n]))){if(d===0){i=o;continue}if(i<=e&&o>=e||i>=e&&o<=e){c=d;break}l=d,i=o}return{range:[l,c],t:(e-i)/(o-i)}}function Qq(a){if(a.get(["endLabel","show"]))return!0;for(var e=0;e<Cs.length;e++)if(a.get([Cs[e],"endLabel","show"]))return!0;return!1}function _5(a,e,t,r){if(yh(e,"cartesian2d")){var n=r.getModel("endLabel"),i=n.get("valueAnimation"),o=r.getData(),l={lastFrameIndex:0},c=Qq(r)?function(p,g){a._endLabelOnDuring(p,g,o,l,i,n,e)}:null,d=e.getBaseAxis().isHorizontal(),u=Zq(e,t,r,function(){var p=a._endLabel;p&&t&&l.originalX!=null&&p.attr({x:l.originalX,y:l.originalY})},c);if(!r.get("clip",!0)){var h=u.shape,f=Math.max(h.width,h.height);d?(h.y-=f,h.height+=f*2):(h.x-=f,h.width+=f*2)}return c&&c(1,u),u}else return Kq(e,t,r)}function k_e(a,e){var t=e.getBaseAxis(),r=t.isHorizontal(),n=t.inverse,i=r?n?"right":"left":"center",o=r?"middle":n?"top":"bottom";return{normal:{align:a.get("align")||i,verticalAlign:a.get("verticalAlign")||o}}}var C_e=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.init=function(){var t=new Gt,r=new Fb;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=t,this._changePolyState=St(this._changePolyState,this)},e.prototype.render=function(t,r,n){var i=t.coordinateSystem,o=this.group,l=t.getData(),c=t.getModel("lineStyle"),d=t.getModel("areaStyle"),u=l.getLayout("points")||[],h=i.type==="polar",f=this._coordSys,p=this._symbolDraw,g=this._polyline,b=this._polygon,w=this._lineGroup,_=!r.ssr&&t.get("animation"),k=!d.isEmpty(),T=d.get("origin"),D=$q(i,l,T),I=k&&v_e(i,l,D),O=t.get("showSymbol"),P=t.get("connectNulls"),V=O&&!h&&w_e(t,l,i),G=this._data;G&&G.eachItemGraphicEl(function(he,ve){he.__temp&&(o.remove(he),G.setItemGraphicEl(ve,null))}),O||p.remove(),o.add(w);var Q=h?!1:t.get("step"),$;i&&i.getArea&&t.get("clip",!0)&&($=i.getArea(),$.width!=null?($.x-=.1,$.y-=.1,$.width+=.2,$.height+=.2):$.r0&&($.r0-=.5,$.r+=.5)),this._clipShapeForSymbol=$;var ae=y_e(l,i,n)||l.getVisual("style")[l.getVisual("drawType")];if(!(g&&f.type===i.type&&Q===this._step))O&&p.updateData(l,{isIgnore:V,clipShape:$,disableAnimation:!0,getSymbolPoint:function(he){return[u[he*2],u[he*2+1]]}}),_&&this._initSymbolLabelAnimation(l,i,$),Q&&(I&&(I=Ru(I,u,i,Q,P)),u=Ru(u,null,i,Q,P)),g=this._newPolyline(u),k?b=this._newPolygon(u,I):b&&(w.remove(b),b=this._polygon=null),h||this._initOrUpdateEndLabel(t,i,N0(ae)),w.setClipPath(_5(this,i,!0,t));else{k&&!b?b=this._newPolygon(u,I):b&&!k&&(w.remove(b),b=this._polygon=null),h||this._initOrUpdateEndLabel(t,i,N0(ae));var J=w.getClipPath();if(J){var U=_5(this,i,!1,t);en(J,{shape:U.shape},t)}else w.setClipPath(_5(this,i,!0,t));O&&p.updateData(l,{isIgnore:V,clipShape:$,disableAnimation:!0,getSymbolPoint:function(he){return[u[he*2],u[he*2+1]]}}),(!d7(this._stackedOnPoints,I)||!d7(this._points,u))&&(_?this._doUpdateAnimation(l,I,i,n,Q,T,P):(Q&&(I&&(I=Ru(I,u,i,Q,P)),u=Ru(u,null,i,Q,P)),g.setShape({points:u}),b&&b.setShape({points:u,stackedOnPoints:I})))}var F=t.getModel("emphasis"),W=F.get("focus"),K=F.get("blurScope"),ee=F.get("disabled");if(g.useStyle(Kt(c.getLineStyle(),{fill:"none",stroke:ae,lineJoin:"bevel"})),hi(g,t,"lineStyle"),g.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var ne=g.getState("emphasis").style;ne.lineWidth=+g.style.lineWidth+1}na(g).seriesIndex=t.seriesIndex,on(g,W,K,ee);var re=f7(t.get("smooth")),Z=t.get("smoothMonotone");if(g.setShape({smooth:re,smoothMonotone:Z,connectNulls:P}),b){var ie=l.getCalculationInfo("stackedOnSeries"),de=0;b.useStyle(Kt(d.getAreaStyle(),{fill:ae,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),ie&&(de=f7(ie.get("smooth"))),b.setShape({smooth:re,stackedOnSmooth:de,smoothMonotone:Z,connectNulls:P}),hi(b,t,"areaStyle"),na(b).seriesIndex=t.seriesIndex,on(b,W,K,ee)}var fe=this._changePolyState;l.eachItemGraphicEl(function(he){he&&(he.onHoverStateChange=fe)}),this._polyline.onHoverStateChange=fe,this._data=l,this._coordSys=i,this._stackedOnPoints=I,this._points=u,this._step=Q,this._valueOrigin=T,t.get("triggerLineEvent")&&(this.packEventData(t,g),b&&this.packEventData(t,b))},e.prototype.packEventData=function(t,r){na(r).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,r,n,i){var o=t.getData(),l=v0(o,i);if(this._changePolyState("emphasis"),!(l instanceof Array)&&l!=null&&l>=0){var c=o.getLayout("points"),d=o.getItemGraphicEl(l);if(!d){var u=c[l*2],h=c[l*2+1];if(isNaN(u)||isNaN(h)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(u,h))return;var f=t.get("zlevel")||0,p=t.get("z")||0;d=new zb(o,l),d.x=u,d.y=h,d.setZ(f,p);var g=d.getSymbolPath().getTextContent();g&&(g.zlevel=f,g.z=p,g.z2=this._polyline.z2+1),d.__temp=!0,o.setItemGraphicEl(l,d),d.stopSymbolAnimation(!0),this.group.add(d)}d.highlight()}else Mr.prototype.highlight.call(this,t,r,n,i)},e.prototype.downplay=function(t,r,n,i){var o=t.getData(),l=v0(o,i);if(this._changePolyState("normal"),l!=null&&l>=0){var c=o.getItemGraphicEl(l);c&&(c.__temp?(o.setItemGraphicEl(l,null),this.group.remove(c)):c.downplay())}else Mr.prototype.downplay.call(this,t,r,n,i)},e.prototype._changePolyState=function(t){var r=this._polygon;V2(this._polyline,t),r&&V2(r,t)},e.prototype._newPolyline=function(t){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new m_e({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},e.prototype._newPolygon=function(t,r){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Xq({shape:{points:t,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},e.prototype._initSymbolLabelAnimation=function(t,r,n){var i,o,l=r.getBaseAxis(),c=l.inverse;r.type==="cartesian2d"?(i=l.isHorizontal(),o=!1):r.type==="polar"&&(i=l.dim==="angle",o=!0);var d=t.hostModel,u=d.get("animationDuration");Ut(u)&&(u=u(null));var h=d.get("animationDelay")||0,f=Ut(h)?h(null):h;t.eachItemGraphicEl(function(p,g){var b=p;if(b){var w=[p.x,p.y],_=void 0,k=void 0,T=void 0;if(n)if(o){var D=n,I=r.pointToCoord(w);i?(_=D.startAngle,k=D.endAngle,T=-I[1]/180*Math.PI):(_=D.r0,k=D.r,T=I[0])}else{var O=n;i?(_=O.x,k=O.x+O.width,T=p.x):(_=O.y+O.height,k=O.y,T=p.y)}var P=k===_?0:(T-_)/(k-_);c&&(P=1-P);var V=Ut(h)?h(g):u*P+f,G=b.getSymbolPath(),Q=G.getTextContent();b.attr({scaleX:0,scaleY:0}),b.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:V}),Q&&Q.animateFrom({style:{opacity:0}},{duration:300,delay:V}),G.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,r,n){var i=t.getModel("endLabel");if(Qq(t)){var o=t.getData(),l=this._polyline,c=o.getLayout("points");if(!c){l.removeTextContent(),this._endLabel=null;return}var d=this._endLabel;d||(d=this._endLabel=new Ja({z2:200}),d.ignoreClip=!0,l.setTextContent(this._endLabel),l.disableLabelAnimation=!0);var u=j_e(c);u>=0&&(ji(l,fi(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:u,defaultText:function(h,f,p){return p!=null?Wq(o,p):Ix(o,h)},enableTextSetter:!0},k_e(i,r)),l.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,r,n,i,o,l,c){var d=this._endLabel,u=this._polyline;if(d){t<1&&i.originalX==null&&(i.originalX=d.x,i.originalY=d.y);var h=n.getLayout("points"),f=n.hostModel,p=f.get("connectNulls"),g=l.get("precision"),b=l.get("distance")||0,w=c.getBaseAxis(),_=w.isHorizontal(),k=w.inverse,T=r.shape,D=k?_?T.x:T.y+T.height:_?T.x+T.width:T.y,I=(_?b:0)*(k?-1:1),O=(_?0:-b)*(k?-1:1),P=_?"x":"y",V=S_e(h,D,P),G=V.range,Q=G[1]-G[0],$=void 0;if(Q>=1){if(Q>1&&!p){var ae=p7(h,G[0]);d.attr({x:ae[0]+I,y:ae[1]+O}),o&&($=f.getRawValue(G[0]))}else{var ae=u.getPointOn(D,P);ae&&d.attr({x:ae[0]+I,y:ae[1]+O});var J=f.getRawValue(G[0]),U=f.getRawValue(G[1]);o&&($=_W(n,g,J,U,V.t))}i.lastFrameIndex=G[0]}else{var F=t===1||i.lastFrameIndex>0?G[0]:0,ae=p7(h,F);o&&($=f.getRawValue(F)),d.attr({x:ae[0]+I,y:ae[1]+O})}if(o){var W=Xx(d);typeof W.setLabelText=="function"&&W.setLabelText($)}}},e.prototype._doUpdateAnimation=function(t,r,n,i,o,l,c){var d=this._polyline,u=this._polygon,h=t.hostModel,f=x_e(this._data,t,this._stackedOnPoints,r,this._coordSys,n,this._valueOrigin),p=f.current,g=f.stackedOnCurrent,b=f.next,w=f.stackedOnNext;if(o&&(g=Ru(f.stackedOnCurrent,f.current,n,o,c),p=Ru(f.current,null,n,o,c),w=Ru(f.stackedOnNext,f.next,n,o,c),b=Ru(f.next,null,n,o,c)),h7(p,b)>3e3||u&&h7(g,w)>3e3){d.stopAnimation(),d.setShape({points:b}),u&&(u.stopAnimation(),u.setShape({points:b,stackedOnPoints:w}));return}d.shape.__points=f.current,d.shape.points=p;var _={shape:{points:b}};f.current!==p&&(_.shape.__points=f.next),d.stopAnimation(),rr(d,_,h),u&&(u.setShape({points:p,stackedOnPoints:g}),u.stopAnimation(),rr(u,{shape:{stackedOnPoints:w}},h),d.shape.points!==u.shape.points&&(u.shape.points=d.shape.points));for(var k=[],T=f.status,D=0;D<T.length;D++){var I=T[D].cmd;if(I==="="){var O=t.getItemGraphicEl(T[D].idx1);O&&k.push({el:O,ptIdx:D})}}d.animators&&d.animators.length&&d.animators[0].during(function(){u&&u.dirtyShape();for(var P=d.shape.__points,V=0;V<k.length;V++){var G=k[V].el,Q=k[V].ptIdx*2;G.x=P[Q],G.y=P[Q+1],G.markRedraw()}})},e.prototype.remove=function(t){var r=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(i,o){i.__temp&&(r.remove(i),n.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e})(Mr);function Hb(a,e){return{seriesType:a,plan:Kx(),reset:function(t){var r=t.getData(),n=t.coordinateSystem,i=t.pipelineContext,o=e||i.large;if(n){var l=it(n.dimensions,function(p){return r.mapDimension(p)}).slice(0,2),c=l.length,d=r.getCalculationInfo("stackResultDimension");bh(r,l[0])&&(l[0]=d),bh(r,l[1])&&(l[1]=d);var u=r.getStore(),h=r.getDimensionIndex(l[0]),f=r.getDimensionIndex(l[1]);return c&&{progress:function(p,g){for(var b=p.end-p.start,w=o&&hc(b*c),_=[],k=[],T=p.start,D=0;T<p.end;T++){var I=void 0;if(c===1){var O=u.get(h,T);I=n.dataToPoint(O,null,k)}else _[0]=u.get(h,T),_[1]=u.get(f,T),I=n.dataToPoint(_,null,k);o?(w[D++]=I[0],w[D++]=I[1]):g.setItemLayout(T,I.slice())}o&&g.setLayout("points",w)}}}}}}var A_e={average:function(a){for(var e=0,t=0,r=0;r<a.length;r++)isNaN(a[r])||(e+=a[r],t++);return t===0?NaN:e/t},sum:function(a){for(var e=0,t=0;t<a.length;t++)e+=a[t]||0;return e},max:function(a){for(var e=-1/0,t=0;t<a.length;t++)a[t]>e&&(e=a[t]);return isFinite(e)?e:NaN},min:function(a){for(var e=1/0,t=0;t<a.length;t++)a[t]<e&&(e=a[t]);return isFinite(e)?e:NaN},nearest:function(a){return a[0]}},T_e=function(a){return Math.round(a.length/2)};function Jq(a){return{seriesType:a,reset:function(e,t,r){var n=e.getData(),i=e.get("sampling"),o=e.coordinateSystem,l=n.count();if(l>10&&o.type==="cartesian2d"&&i){var c=o.getBaseAxis(),d=o.getOtherAxis(c),u=c.getExtent(),h=r.getDevicePixelRatio(),f=Math.abs(u[1]-u[0])*(h||1),p=Math.round(l/f);if(isFinite(p)&&p>1){i==="lttb"?e.setData(n.lttbDownSample(n.mapDimension(d.dim),1/p)):i==="minmax"&&e.setData(n.minmaxDownSample(n.mapDimension(d.dim),1/p));var g=void 0;jt(i)?g=A_e[i]:Ut(i)&&(g=i),g&&e.setData(n.downSample(n.mapDimension(d.dim),1/p,g,T_e))}}}}}function M_e(a){a.registerChartView(C_e),a.registerSeriesModel(u_e),a.registerLayout(Hb("line",!0)),a.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),r=e.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",r)}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,Jq("line"))}var nb=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return Wd(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,r,n){var i=this.coordinateSystem;if(i&&i.clampData){var o=i.clampData(t),l=i.dataToPoint(o);if(n)oe(i.getAxes(),function(f,p){if(f.type==="category"&&r!=null){var g=f.getTicksCoords(),b=f.getTickModel().get("alignWithLabel"),w=o[p],_=r[p]==="x1"||r[p]==="y1";if(_&&!b&&(w+=1),g.length<2)return;if(g.length===2){l[p]=f.toGlobalCoord(f.getExtent()[_?1:0]);return}for(var k=void 0,T=void 0,D=1,I=0;I<g.length;I++){var O=g[I].coord,P=I===g.length-1?g[I-1].tickValue+D:g[I].tickValue;if(P===w){T=O;break}else if(P<w)k=O;else if(k!=null&&P>w){T=(O+k)/2;break}I===1&&(D=P-g[0].tickValue)}T==null&&(k?k&&(T=g[g.length-1].coord):T=g[0].coord),l[p]=f.toGlobalCoord(T)}});else{var c=this.getData(),d=c.getLayout("offset"),u=c.getLayout("size"),h=i.getBaseAxis().isHorizontal()?0:1;l[h]+=d+u/2}return l}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",defaultBarGap:"10%"},e})(Fr);Fr.registerClass(nb);var E_e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return Wd(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>t&&(t=r),t},e.prototype.brushSelector=function(t,r,n){return n.rect(r.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Th(nb.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:Fe.color.primary,borderWidth:2}},realtimeSort:!1}),e})(nb),D_e=(function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a})(),l_=(function(a){Le(e,a);function e(t){var r=a.call(this,t)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new D_e},e.prototype.buildPath=function(t,r){var n=r.cx,i=r.cy,o=Math.max(r.r0||0,0),l=Math.max(r.r,0),c=(l-o)*.5,d=o+c,u=r.startAngle,h=r.endAngle,f=r.clockwise,p=Math.PI*2,g=f?h-u<p:u-h<p;g||(u=h-(f?p:-p));var b=Math.cos(u),w=Math.sin(u),_=Math.cos(h),k=Math.sin(h);g?(t.moveTo(b*o+n,w*o+i),t.arc(b*d+n,w*d+i,c,-Math.PI+u,u,!f)):t.moveTo(b*l+n,w*l+i),t.arc(n,i,l,u,h,!f),t.arc(_*d+n,k*d+i,c,h-Math.PI*2,h-Math.PI,!f),o!==0&&t.arc(n,i,o,h,u,f)},e})(Ia);function I_e(a,e){e=e||{};var t=e.isRoundCap;return function(r,n,i){var o=n.position;if(!o||o instanceof Array)return O2(r,n,i);var l=a(o),c=n.distance!=null?n.distance:5,d=this.shape,u=d.cx,h=d.cy,f=d.r,p=d.r0,g=(f+p)/2,b=d.startAngle,w=d.endAngle,_=(b+w)/2,k=t?Math.abs(f-p)/2:0,T=Math.cos,D=Math.sin,I=u+f*T(b),O=h+f*D(b),P="left",V="top";switch(l){case"startArc":I=u+(p-c)*T(_),O=h+(p-c)*D(_),P="center",V="top";break;case"insideStartArc":I=u+(p+c)*T(_),O=h+(p+c)*D(_),P="center",V="bottom";break;case"startAngle":I=u+g*T(b)+Xy(b,c+k,!1),O=h+g*D(b)+Zy(b,c+k,!1),P="right",V="middle";break;case"insideStartAngle":I=u+g*T(b)+Xy(b,-c+k,!1),O=h+g*D(b)+Zy(b,-c+k,!1),P="left",V="middle";break;case"middle":I=u+g*T(_),O=h+g*D(_),P="center",V="middle";break;case"endArc":I=u+(f+c)*T(_),O=h+(f+c)*D(_),P="center",V="bottom";break;case"insideEndArc":I=u+(f-c)*T(_),O=h+(f-c)*D(_),P="center",V="top";break;case"endAngle":I=u+g*T(w)+Xy(w,c+k,!0),O=h+g*D(w)+Zy(w,c+k,!0),P="left",V="middle";break;case"insideEndAngle":I=u+g*T(w)+Xy(w,-c+k,!0),O=h+g*D(w)+Zy(w,-c+k,!0),P="right",V="middle";break;default:return O2(r,n,i)}return r=r||{},r.x=I,r.y=O,r.align=P,r.verticalAlign=V,r}}function R_e(a,e,t,r){if(Xa(r)){a.setTextConfig({rotation:r});return}else if(rt(e)){a.setTextConfig({rotation:0});return}var n=a.shape,i=n.clockwise?n.startAngle:n.endAngle,o=n.clockwise?n.endAngle:n.startAngle,l=(i+o)/2,c,d=t(e);switch(d){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":c=l;break;case"startAngle":case"insideStartAngle":c=i;break;case"endAngle":case"insideEndAngle":c=o;break;default:a.setTextConfig({rotation:0});return}var u=Math.PI*1.5-c;d==="middle"&&u>Math.PI/2&&u<Math.PI*1.5&&(u-=Math.PI),a.setTextConfig({rotation:u})}function Xy(a,e,t){return e*Math.sin(a)*(t?-1:1)}function Zy(a,e,t){return e*Math.cos(a)*(t?1:-1)}function pc(a,e,t){var r=a.get("borderRadius");if(r==null)return t?{cornerRadius:0}:null;rt(r)||(r=[r,r,r,r]);var n=Math.abs(e.r||0-e.r0||0);return{cornerRadius:it(r,function(i){return Al(i,n)})}}var N5=Math.max,j5=Math.min;function L_e(a,e){var t=a.getArea&&a.getArea();if(yh(a,"cartesian2d")){var r=a.getBaseAxis();if(r.type!=="category"||!r.onBand){var n=e.getLayout("bandWidth");r.isHorizontal()?(t.x-=n,t.width+=n*2):(t.y-=n,t.height+=n*2)}}return t}var O_e=(function(a){Le(e,a);function e(){var t=a.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,r,n,i){this._model=t,this._removeOnRenderedListener(n),this._updateDrawMode(t);var o=t.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,r,n):this._renderNormal(t,r,n,i))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,r){this._progressiveEls=[],this._incrementalRenderLarge(t,r)},e.prototype.eachRendered=function(t){Ah(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t,r,n,i){var o=this.group,l=t.getData(),c=this._data,d=t.coordinateSystem,u=d.getBaseAxis(),h;d.type==="cartesian2d"?h=u.isHorizontal():d.type==="polar"&&(h=u.dim==="angle");var f=t.isAnimationEnabled()?t:null,p=P_e(t,d);p&&this._enableRealtimeSort(p,l,n);var g=t.get("clip",!0)||p,b=L_e(d,l);o.removeClipPath();var w=t.get("roundCap",!0),_=t.get("showBackground",!0),k=t.getModel("backgroundStyle"),T=k.get("borderRadius")||0,D=[],I=this._backgroundEls,O=i&&i.isInitSort,P=i&&i.type==="changeAxisOrder";function V($){var ae=Ky[d.type](l,$);if(!ae)return null;var J=G_e(d,h,ae);return J.useStyle(k.getItemStyle()),d.type==="cartesian2d"?J.setShape("r",T):J.setShape("cornerRadius",T),D[$]=J,J}l.diff(c).add(function($){var ae=l.getItemModel($),J=Ky[d.type](l,$,ae);if(J&&(_&&V($),!(!l.hasValue($)||!b7[d.type](J)))){var U=!1;g&&(U=x7[d.type](b,J));var F=m7[d.type](t,l,$,J,h,f,u.model,!1,w);p&&(F.forceLabelAnimation=!0),y7(F,l,$,ae,J,t,h,d.type==="polar"),O?F.attr({shape:J}):p?g7(p,f,F,J,$,h,!1,!1):en(F,{shape:J},t,$),l.setItemGraphicEl($,F),o.add(F),F.ignore=U}}).update(function($,ae){var J=l.getItemModel($),U=Ky[d.type](l,$,J);if(U){if(_){var F=void 0;I.length===0?F=V(ae):(F=I[ae],F.useStyle(k.getItemStyle()),d.type==="cartesian2d"?F.setShape("r",T):F.setShape("cornerRadius",T),D[$]=F);var W=Ky[d.type](l,$),K=tX(h,W,d);rr(F,{shape:K},f,$)}var ee=c.getItemGraphicEl(ae);if(!l.hasValue($)||!b7[d.type](U)){o.remove(ee);return}var ne=!1;g&&(ne=x7[d.type](b,U),ne&&o.remove(ee));var re=ee&&(ee.type==="sector"&&w||ee.type==="sausage"&&!w);if(re&&(ee&&Cd(ee,t,ae),ee=null),ee?nl(ee):ee=m7[d.type](t,l,$,U,h,f,u.model,!0,w),p&&(ee.forceLabelAnimation=!0),P){var Z=ee.getTextContent();if(Z){var ie=Xx(Z);ie.prevValue!=null&&(ie.prevValue=ie.value)}}else y7(ee,l,$,J,U,t,h,d.type==="polar");O?ee.attr({shape:U}):p?g7(p,f,ee,U,$,h,!0,P):rr(ee,{shape:U},t,$,null),l.setItemGraphicEl($,ee),ee.ignore=ne,o.add(ee)}}).remove(function($){var ae=c.getItemGraphicEl($);ae&&Cd(ae,t,$)}).execute();var G=this._backgroundGroup||(this._backgroundGroup=new Gt);G.removeAll();for(var Q=0;Q<D.length;++Q)G.add(D[Q]);o.add(G),this._backgroundEls=D,this._data=l},e.prototype._renderLarge=function(t,r,n){this._clear(),_7(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,r){this._removeBackground(),_7(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var r=t.get("clip",!0)&&Vb(t.coordinateSystem,!1,t),n=this.group;r?n.setClipPath(r):n.removeClipPath()},e.prototype._enableRealtimeSort=function(t,r,n){var i=this;if(r.count()){var o=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,t,n),this._isFirstFrame=!1;else{var l=function(c){var d=r.getItemGraphicEl(c),u=d&&d.shape;return u&&Math.abs(o.isHorizontal()?u.height:u.width)||0};this._onRendered=function(){i._updateSortWithinSameData(r,l,o,n)},n.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,r,n){var i=[];return t.each(t.mapDimension(r.dim),function(o,l){var c=n(l);c=c??NaN,i.push({dataIndex:l,mappedValue:c,ordinalNumber:o})}),i.sort(function(o,l){return l.mappedValue-o.mappedValue}),{ordinalNumbers:it(i,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,r,n){for(var i=n.scale,o=t.mapDimension(n.dim),l=Number.MAX_VALUE,c=0,d=i.getOrdinalMeta().categories.length;c<d;++c){var u=t.rawIndexOf(o,i.getRawOrdinalNumber(c)),h=u<0?Number.MIN_VALUE:r(t.indexOfRawIndex(u));if(h>l)return!0;l=h}return!1},e.prototype._isOrderDifferentInView=function(t,r){for(var n=r.scale,i=n.getExtent(),o=Math.max(0,i[0]),l=Math.min(i[1],n.getOrdinalMeta().categories.length-1);o<=l;++o)if(t.ordinalNumbers[o]!==n.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(t,r,n,i){if(this._isOrderChangedWithinSameData(t,r,n)){var o=this._dataSort(t,n,r);this._isOrderDifferentInView(o,n)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(t,r,n){var i=r.baseAxis,o=this._dataSort(t,i,function(l){return t.get(t.mapDimension(r.otherAxis.dim),l)});n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:o})},e.prototype.remove=function(t,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(t,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var r=this.group,n=this._data;t&&t.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(i){Cd(i,t,na(i).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e})(Mr),x7={cartesian2d:function(a,e){var t=e.width<0?-1:1,r=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var n=a.x+a.width,i=a.y+a.height,o=N5(e.x,a.x),l=j5(e.x+e.width,n),c=N5(e.y,a.y),d=j5(e.y+e.height,i),u=l<o,h=d<c;return e.x=u&&o>n?l:o,e.y=h&&c>i?d:c,e.width=u?0:l-o,e.height=h?0:d-c,t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),u||h},polar:function(a,e){var t=e.r0<=e.r?1:-1;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}var n=j5(e.r,a.r),i=N5(e.r0,a.r0);e.r=n,e.r0=i;var o=n-i<0;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}return o}},m7={cartesian2d:function(a,e,t,r,n,i,o,l,c){var d=new Ta({shape:Je({},r),z2:1});if(d.__dataIndex=t,d.name="item",i){var u=d.shape,h=n?"height":"width";u[h]=0}return d},polar:function(a,e,t,r,n,i,o,l,c){var d=!n&&c?l_:ds,u=new d({shape:r,z2:1});u.name="item";var h=eX(n);if(u.calculateTextPosition=I_e(h,{isRoundCap:d===l_}),i){var f=u.shape,p=n?"r":"endAngle",g={};f[p]=n?r.r0:r.startAngle,g[p]=r[p],(l?rr:en)(u,{shape:g},i)}return u}};function P_e(a,e){var t=a.get("realtimeSort",!0),r=e.getBaseAxis();if(t&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function g7(a,e,t,r,n,i,o,l){var c,d;i?(d={x:r.x,width:r.width},c={y:r.y,height:r.height}):(d={y:r.y,height:r.height},c={x:r.x,width:r.width}),l||(o?rr:en)(t,{shape:c},e,n,null);var u=e?a.baseAxis.model:null;(o?rr:en)(t,{shape:d},u,n)}function v7(a,e){for(var t=0;t<e.length;t++)if(!isFinite(a[e[t]]))return!0;return!1}var B_e=["x","y","width","height"],z_e=["cx","cy","r","startAngle","endAngle"],b7={cartesian2d:function(a){return!v7(a,B_e)},polar:function(a){return!v7(a,z_e)}},Ky={cartesian2d:function(a,e,t){var r=a.getItemLayout(e);if(!r)return null;var n=t?V_e(t,r):0,i=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+i*n/2,y:r.y+o*n/2,width:r.width-i*n,height:r.height-o*n}},polar:function(a,e,t){var r=a.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function F_e(a){return a.startAngle!=null&&a.endAngle!=null&&a.startAngle===a.endAngle}function eX(a){return(function(e){var t=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+t;default:return r}}})(a)}function y7(a,e,t,r,n,i,o,l){var c=e.getItemVisual(t,"style");if(l){if(!i.get("roundCap")){var u=a.shape,h=pc(r.getModel("itemStyle"),u,!0);Je(u,h),a.setShape(u)}}else{var d=r.get(["itemStyle","borderRadius"])||0;a.setShape("r",d)}a.useStyle(c);var f=r.getShallow("cursor");f&&a.attr("cursor",f);var p=l?o?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":o?n.height>=0?"bottom":"top":n.width>=0?"right":"left",g=fi(r);ji(a,g,{labelFetcher:i,labelDataIndex:t,defaultText:Ix(i.getData(),t),inheritColor:c.fill,defaultOpacity:c.opacity,defaultOutsidePosition:p});var b=a.getTextContent();if(l&&b){var w=r.get(["label","position"]);a.textConfig.inside=w==="middle"?!0:null,R_e(a,w==="outside"?p:w,eX(o),r.get(["label","rotate"]))}l$(b,g,i.getRawValue(t),function(k){return Wq(e,k)});var _=r.getModel(["emphasis"]);on(a,_.get("focus"),_.get("blurScope"),_.get("disabled")),hi(a,r),F_e(n)&&(a.style.fill="none",a.style.stroke="none",oe(a.states,function(k){k.style&&(k.style.fill=k.style.stroke="none")}))}function V_e(a,e){var t=a.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var r=a.get(["itemStyle","borderWidth"])||0,n=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),i=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,n,i)}var H_e=(function(){function a(){}return a})(),w7=(function(a){Le(e,a);function e(t){var r=a.call(this,t)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new H_e},e.prototype.buildPath=function(t,r){for(var n=r.points,i=this.baseDimIdx,o=1-this.baseDimIdx,l=[],c=[],d=this.barWidth,u=0;u<n.length;u+=3)c[i]=d,c[o]=n[u+2],l[i]=n[u+i],l[o]=n[u+o],t.rect(l[0],l[1],c[0],c[1])},e})(Ia);function _7(a,e,t,r){var n=a.getData(),i=n.getLayout("valueAxisHorizontal")?1:0,o=n.getLayout("largeDataIndices"),l=n.getLayout("size"),c=a.getModel("backgroundStyle"),d=n.getLayout("largeBackgroundPoints");if(d){var u=new w7({shape:{points:d},incremental:!!r,silent:!0,z2:0});u.baseDimIdx=i,u.largeDataIndices=o,u.barWidth=l,u.useStyle(c.getItemStyle()),e.add(u),t&&t.push(u)}var h=new w7({shape:{points:n.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=i,h.largeDataIndices=o,h.barWidth=l,e.add(h),h.useStyle(n.getVisual("style")),h.style.stroke=null,na(h).seriesIndex=a.seriesIndex,a.get("silent")||(h.on("mousedown",N7),h.on("mousemove",N7)),t&&t.push(h)}var N7=vM(function(a){var e=this,t=U_e(e,a.offsetX,a.offsetY);na(e).dataIndex=t>=0?t:null},30,!1);function U_e(a,e,t){for(var r=a.baseDimIdx,n=1-r,i=a.shape.points,o=a.largeDataIndices,l=[],c=[],d=a.barWidth,u=0,h=i.length/3;u<h;u++){var f=u*3;if(c[r]=d,c[n]=i[f+2],l[r]=i[f+r],l[n]=i[f+n],c[n]<0&&(l[n]+=c[n],c[n]=-c[n]),e>=l[0]&&e<=l[0]+c[0]&&t>=l[1]&&t<=l[1]+c[1])return o[u]}return-1}function tX(a,e,t){if(yh(t,"cartesian2d")){var r=e,n=t.getArea();return{x:a?r.x:n.x,y:a?n.y:r.y,width:a?r.width:n.width,height:a?n.height:r.height}}else{var n=t.getArea(),i=e;return{cx:n.cx,cy:n.cy,r0:a?n.r0:i.r0,r:a?n.r:i.r,startAngle:a?i.startAngle:0,endAngle:a?i.endAngle:Math.PI*2}}}function G_e(a,e,t){var r=a.type==="polar"?ds:Ta;return new r({shape:tX(e,t,a),silent:!0,z2:0})}function W_e(a){a.registerChartView(O_e),a.registerSeriesModel(E_e),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,va(nq,"bar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,iq("bar")),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,Jq("bar")),a.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},function(n){e.sortInfo&&n.axis.setCategorySortInfo(e.sortInfo)})})}var j7=Math.PI*2,Qy=Math.PI/180;function $_e(a,e,t){e.eachSeriesByType(a,function(r){var n=r.getData(),i=n.mapDimension("value"),o=T$(r,t),l=o.cx,c=o.cy,d=o.r,u=o.r0,h=o.viewRect,f=-r.get("startAngle")*Qy,p=r.get("endAngle"),g=r.get("padAngle")*Qy;p=p==="auto"?f-j7:-p*Qy;var b=r.get("minAngle")*Qy,w=b+g,_=0;n.each(i,function(K){!isNaN(K)&&_++});var k=n.getSum(i),T=Math.PI/(k||_)*2,D=r.get("clockwise"),I=r.get("roseType"),O=r.get("stillShowZeroSum"),P=n.getDataExtent(i);P[0]=0;var V=D?1:-1,G=[f,p],Q=V*g/2;pN(G,!D),f=G[0],p=G[1];var $=aX(r);$.startAngle=f,$.endAngle=p,$.clockwise=D,$.cx=l,$.cy=c,$.r=d,$.r0=u;var ae=Math.abs(p-f),J=ae,U=0,F=f;if(n.setLayout({viewRect:h,r:d}),n.each(i,function(K,ee){var ne;if(isNaN(K)){n.setItemLayout(ee,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:D,cx:l,cy:c,r0:u,r:I?NaN:d});return}I!=="area"?ne=k===0&&O?T:K*T:ne=ae/_,ne<w?(ne=w,J-=w):U+=K;var re=F+V*ne,Z=0,ie=0;g>ne?(Z=F+V*ne/2,ie=Z):(Z=F+Q,ie=re-Q),n.setItemLayout(ee,{angle:ne,startAngle:Z,endAngle:ie,clockwise:D,cx:l,cy:c,r0:u,r:I?ur(K,P,[u,d]):d}),F=re}),J<j7&&_)if(J<=.001){var W=ae/_;n.each(i,function(K,ee){if(!isNaN(K)){var ne=n.getItemLayout(ee);ne.angle=W;var re=0,Z=0;W<g?(re=f+V*(ee+1/2)*W,Z=re):(re=f+V*ee*W+Q,Z=f+V*(ee+1)*W-Q),ne.startAngle=re,ne.endAngle=Z}})}else T=J/U,F=f,n.each(i,function(K,ee){if(!isNaN(K)){var ne=n.getItemLayout(ee),re=ne.angle===w?w:K*T,Z=0,ie=0;re<g?(Z=F+V*re/2,ie=Z):(Z=F+Q,ie=F+V*re-Q),ne.startAngle=Z,ne.endAngle=ie,F+=V*re}})})}var aX=Ea();function tm(a){return{seriesType:a,reset:function(e,t){var r=t.findComponents({mainType:"legend"});if(!(!r||!r.length)){var n=e.getData();n.filterSelf(function(i){for(var o=n.getName(i),l=0;l<r.length;l++)if(!r[l].isSelected(o))return!1;return!0})}}}}var Y_e=Math.PI/180;function S7(a,e,t,r,n,i,o,l,c,d){if(a.length<2)return;function u(b){for(var w=b.rB,_=w*w,k=0;k<b.list.length;k++){var T=b.list[k],D=Math.abs(T.label.y-t),I=r+T.len,O=I*I,P=Math.sqrt(Math.abs((1-D*D/_)*O)),V=e+(P+T.len2)*n,G=V-T.label.x,Q=T.targetTextWidth-G*n;rX(T,Q,!0),T.label.x=V}}function h(b){for(var w={list:[],maxY:0},_={list:[],maxY:0},k=0;k<b.length;k++)if(b[k].labelAlignTo==="none"){var T=b[k],D=T.label.y>t?_:w,I=Math.abs(T.label.y-t);if(I>=D.maxY){var O=T.label.x-e-T.len2*n,P=r+T.len,V=Math.abs(O)<P?Math.sqrt(I*I/(1-O*O/P/P)):P;D.rB=V,D.maxY=I}D.list.push(T)}u(w),u(_)}for(var f=a.length,p=0;p<f;p++)if(a[p].position==="outer"&&a[p].labelAlignTo==="labelLine"){var g=a[p].label.x-d;a[p].linePoints[1][0]+=g,a[p].label.x=d}D3(a,1,c,c+o)&&h(a)}function q_e(a,e,t,r,n,i,o,l){for(var c=[],d=[],u=Number.MAX_VALUE,h=-Number.MAX_VALUE,f=0;f<a.length;f++){var p=a[f].label;S5(a[f])||(p.x<e?(u=Math.min(u,p.x),c.push(a[f])):(h=Math.max(h,p.x),d.push(a[f])))}for(var f=0;f<a.length;f++){var g=a[f];if(!S5(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var p=g.label,b=g.linePoints,w=void 0;g.labelAlignTo==="edge"?p.x<e?w=b[2][0]-g.labelDistance-o-g.edgeDistance:w=o+n-g.edgeDistance-b[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?p.x<e?w=u-o-g.bleedMargin:w=o+n-h-g.bleedMargin:p.x<e?w=p.x-o-g.bleedMargin:w=o+n-p.x-g.bleedMargin,g.targetTextWidth=w,rX(g,w,!1)}}S7(d,e,t,r,1,n,i,o,l,h),S7(c,e,t,r,-1,n,i,o,l,u);for(var f=0;f<a.length;f++){var g=a[f];if(!S5(g)&&g.linePoints){var p=g.label,b=g.linePoints,_=g.labelAlignTo==="edge",k=p.style.padding,T=k?k[1]+k[3]:0,D=p.style.backgroundColor?0:T,I=g.rect.width+D,O=b[1][0]-b[2][0];_?p.x<e?b[2][0]=o+g.edgeDistance+I+g.labelDistance:b[2][0]=o+n-g.edgeDistance-I-g.labelDistance:(p.x<e?b[2][0]=p.x+g.labelDistance:b[2][0]=p.x-g.labelDistance,b[1][0]=b[2][0]+O),b[1][1]=b[2][1]=p.y}}}function rX(a,e,t){if(a.labelStyleWidth==null){var r=a.label,n=r.style,i=a.rect,o=n.backgroundColor,l=n.padding,c=l?l[1]+l[3]:0,d=n.overflow,u=i.width+(o?0:c);if(e<u||t){if(d&&d.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-c);var h=r.getBoundingRect();r.setStyle("width",Math.ceil(h.width)),r.setStyle("backgroundColor",o)}else{var f=e-c,p=e<u?f:t?f>a.unconstrainedWidth?null:f:null;r.setStyle("width",p)}nX(i,r)}}}function nX(a,e){k7.rect=a,Aq(k7,e,X_e)}var X_e={minMarginForce:[null,0,null,0],marginDefault:[1,0,1,0]},k7={};function S5(a){return a.position==="center"}function Z_e(a){var e=a.getData(),t=[],r,n,i=!1,o=(a.get("minShowLabelAngle")||0)*Y_e,l=e.getLayout("viewRect"),c=e.getLayout("r"),d=l.width,u=l.x,h=l.y,f=l.height;function p(O){O.ignore=!0}function g(O){if(!O.ignore)return!0;for(var P in O.states)if(O.states[P].ignore===!1)return!0;return!1}e.each(function(O){var P=e.getItemGraphicEl(O),V=P.shape,G=P.getTextContent(),Q=P.getTextGuideLine(),$=e.getItemModel(O),ae=$.getModel("label"),J=ae.get("position")||$.get(["emphasis","label","position"]),U=ae.get("distanceToLabelLine"),F=ae.get("alignTo"),W=_t(ae.get("edgeDistance"),d),K=ae.get("bleedMargin");K==null&&(K=Math.min(d,f)>200?10:2);var ee=$.getModel("labelLine"),ne=ee.get("length");ne=_t(ne,d);var re=ee.get("length2");if(re=_t(re,d),Math.abs(V.endAngle-V.startAngle)<o){oe(G.states,p),G.ignore=!0,Q&&(oe(Q.states,p),Q.ignore=!0);return}if(g(G)){var Z=(V.startAngle+V.endAngle)/2,ie=Math.cos(Z),de=Math.sin(Z),fe,he,ve,Oe;r=V.cx,n=V.cy;var Se=J==="inside"||J==="inner";if(J==="center")fe=V.cx,he=V.cy,Oe="center";else{var Ce=(Se?(V.r+V.r0)/2*ie:V.r*ie)+r,we=(Se?(V.r+V.r0)/2*de:V.r*de)+n;if(fe=Ce+ie*3,he=we+de*3,!Se){var xe=Ce+ie*(ne+c-V.r),be=we+de*(ne+c-V.r),Ee=xe+(ie<0?-1:1)*re,ze=be;F==="edge"?fe=ie<0?u+W:u+d-W:fe=Ee+(ie<0?-U:U),he=ze,ve=[[Ce,we],[xe,be],[Ee,ze]]}Oe=Se?"center":F==="edge"?ie>0?"right":"left":ie>0?"left":"right"}var Ze=Math.PI,Re=0,ut=ae.get("rotate");if(Xa(ut))Re=ut*(Ze/180);else if(J==="center")Re=0;else if(ut==="radial"||ut===!0){var vt=ie<0?-Z+Ze:-Z;Re=vt}else if(ut==="tangential"&&J!=="outside"&&J!=="outer"){var yt=Math.atan2(ie,de);yt<0&&(yt=Ze*2+yt);var Ue=de>0;Ue&&(yt=Ze+yt),Re=yt-Ze}if(i=!!Re,G.x=fe,G.y=he,G.rotation=Re,G.setStyle({verticalAlign:"middle"}),Se){G.setStyle({align:Oe});var Ht=G.states.select;Ht&&(Ht.x+=G.x,Ht.y+=G.y)}else{var Ye=new Jt(0,0,0,0);nX(Ye,G),t.push({label:G,labelLine:Q,position:J,len:ne,len2:re,minTurnAngle:ee.get("minTurnAngle"),maxSurfaceAngle:ee.get("maxSurfaceAngle"),surfaceNormal:new Xt(ie,de),linePoints:ve,textAlign:Oe,labelDistance:U,labelAlignTo:F,edgeDistance:W,bleedMargin:K,rect:Ye,unconstrainedWidth:Ye.width,labelStyleWidth:G.style.width})}P.setTextConfig({inside:Se})}}),!i&&a.get("avoidLabelOverlap")&&q_e(t,r,n,c,d,f,u,h);for(var b=0;b<t.length;b++){var w=t[b],_=w.label,k=w.labelLine,T=isNaN(_.x)||isNaN(_.y);if(_){_.setStyle({align:w.textAlign}),T&&(oe(_.states,p),_.ignore=!0);var D=_.states.select;D&&(D.x+=_.x,D.y+=_.y)}if(k){var I=w.linePoints;T||!I?(oe(k.states,p),k.ignore=!0):(Sq(I,w.minTurnAngle),m2e(I,w.surfaceNormal,w.maxSurfaceAngle),k.setShape({points:I}),_.__hostTarget.textGuideLineConfig={anchor:new Xt(I[0][0],I[0][1])})}}}var K_e=(function(a){Le(e,a);function e(t,r,n){var i=a.call(this)||this;i.z2=2;var o=new Ja;return i.setTextContent(o),i.updateData(t,r,n,!0),i}return e.prototype.updateData=function(t,r,n,i){var o=this,l=t.hostModel,c=t.getItemModel(r),d=c.getModel("emphasis"),u=t.getItemLayout(r),h=Je(pc(c.getModel("itemStyle"),u,!0),u);if(isNaN(h.startAngle)){o.setShape(h);return}if(i){o.setShape(h);var f=l.getShallow("animationType");l.ecModel.ssr?(en(o,{scaleX:0,scaleY:0},l,{dataIndex:r,isFrom:!0}),o.originX=h.cx,o.originY=h.cy):f==="scale"?(o.shape.r=u.r0,en(o,{shape:{r:u.r}},l,r)):n!=null?(o.setShape({startAngle:n,endAngle:n}),en(o,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},l,r)):(o.shape.endAngle=u.startAngle,rr(o,{shape:{endAngle:u.endAngle}},l,r))}else nl(o),rr(o,{shape:h},l,r);o.useStyle(t.getItemVisual(r,"style")),hi(o,c);var p=(u.startAngle+u.endAngle)/2,g=l.get("selectedOffset"),b=Math.cos(p)*g,w=Math.sin(p)*g,_=c.getShallow("cursor");_&&o.attr("cursor",_),this._updateLabel(l,t,r),o.ensureState("emphasis").shape=Je({r:u.r+(d.get("scale")&&d.get("scaleSize")||0)},pc(d.getModel("itemStyle"),u)),Je(o.ensureState("select"),{x:b,y:w,shape:pc(c.getModel(["select","itemStyle"]),u)}),Je(o.ensureState("blur"),{shape:pc(c.getModel(["blur","itemStyle"]),u)});var k=o.getTextGuideLine(),T=o.getTextContent();k&&Je(k.ensureState("select"),{x:b,y:w}),Je(T.ensureState("select"),{x:b,y:w}),on(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},e.prototype._updateLabel=function(t,r,n){var i=this,o=r.getItemModel(n),l=o.getModel("labelLine"),c=r.getItemVisual(n,"style"),d=c&&c.fill,u=c&&c.opacity;ji(i,fi(o),{labelFetcher:r.hostModel,labelDataIndex:n,inheritColor:d,defaultOpacity:u,defaultText:t.getFormattedLabel(n,"normal")||r.getName(n)});var h=i.getTextContent();i.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var f=o.get(["label","position"]);if(f!=="outside"&&f!=="outer")i.removeTextGuideLine();else{var p=this.getTextGuideLine();p||(p=new $i,this.setTextGuideLine(p)),EM(this,DM(o),{stroke:d,opacity:No(l.get(["lineStyle","opacity"]),u,1)})}},e})(ds),Q_e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,n,i){var o=t.getData(),l=this._data,c=this.group,d;if(!l&&o.count()>0){for(var u=o.getItemLayout(0),h=1;isNaN(u&&u.startAngle)&&h<o.count();++h)u=o.getItemLayout(h);u&&(d=u.startAngle)}if(this._emptyCircleSector&&c.remove(this._emptyCircleSector),o.count()===0&&t.get("showEmptyCircle")){var f=aX(t),p=new ds({shape:$t(f)});p.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=p,c.add(p)}o.diff(l).add(function(g){var b=new K_e(o,g,d);o.setItemGraphicEl(g,b),c.add(b)}).update(function(g,b){var w=l.getItemGraphicEl(b);w.updateData(o,g,d),w.off("click"),c.add(w),o.setItemGraphicEl(g,w)}).remove(function(g){var b=l.getItemGraphicEl(g);Cd(b,t,g)}).execute(),Z_e(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,r){var n=r.getData(),i=n.getItemLayout(0);if(i){var o=t[0]-i.cx,l=t[1]-i.cy,c=Math.sqrt(o*o+l*l);return c<=i.r&&c>=i.r0}},e.type="pie",e})(Mr);function am(a,e,t){e=rt(e)&&{coordDimensions:e}||Je({encodeDefine:a.getEncode()},e);var r=a.getSource(),n=Pb(r,e).dimensions,i=new Ss(n,a);return i.initData(r,t),i}var rm=(function(){function a(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return a.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},a.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},a.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},a.prototype.getItemVisual=function(e,t){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,t)},a})(),J_e=Ea(),iX=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new rm(St(this.getData,this),St(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){a.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return am(this,{coordDimensions:["value"],encodeDefaulter:va(dM,this)})},e.prototype.getDataParams=function(t){var r=this.getData(),n=J_e(r),i=n.seats;if(!i){var o=[];r.each(r.mapDimension("value"),function(c){o.push(c)}),i=n.seats=Nme(o,r.hostModel.get("percentPrecision"))}var l=a.prototype.getDataParams.call(this,t);return l.percent=i[t]||0,l.$vars.push("percent"),l},e.prototype._defaultLabelLine=function(t){g0(t,"labelLine",["show"]);var r=t.labelLine,n=t.emphasis.labelLine;r.show=r.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"50%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,coordinateSystemUsage:"box",left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:30,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e})(Fr);dbe({fullType:iX.type,getCoord2:function(a){return a.getShallow("center")}});function eNe(a){return{seriesType:a,reset:function(e,t){var r=e.getData();r.filterSelf(function(n){var i=r.mapDimension("value"),o=r.get(i,n);return!(Xa(o)&&!isNaN(o)&&o<0)})}}}function tNe(a){a.registerChartView(Q_e),a.registerSeriesModel(iX),yY("pie",a.registerAction),a.registerLayout(va($_e,"pie")),a.registerProcessor(tm("pie")),a.registerProcessor(eNe("pie"))}var aNe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return Wd(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(t,r,n){return n.point(r.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar","matrix"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:Fe.color.primary}},universalTransition:{divideShape:"clone"}},e})(Fr),sX=4,rNe=(function(){function a(){}return a})(),nNe=(function(a){Le(e,a);function e(t){var r=a.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.getDefaultShape=function(){return new rNe},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,r){var n=r.points,i=r.size,o=this.symbolProxy,l=o.shape,c=t.getContext?t.getContext():t,d=c&&i[0]<sX,u=this.softClipShape,h;if(d){this._ctx=c;return}for(this._ctx=null,h=this._off;h<n.length;){var f=n[h++],p=n[h++];isNaN(f)||isNaN(p)||u&&!u.contain(f,p)||(l.x=f-i[0]/2,l.y=p-i[1]/2,l.width=i[0],l.height=i[1],o.buildPath(t,l,!0))}this.incremental&&(this._off=h,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,r=t.points,n=t.size,i=this._ctx,o=this.softClipShape,l;if(i){for(l=this._off;l<r.length;){var c=r[l++],d=r[l++];isNaN(c)||isNaN(d)||o&&!o.contain(c,d)||i.fillRect(c-n[0]/2,d-n[1]/2,n[0],n[1])}this.incremental&&(this._off=l,this.notClear=!0)}},e.prototype.findDataIndex=function(t,r){for(var n=this.shape,i=n.points,o=n.size,l=Math.max(o[0],4),c=Math.max(o[1],4),d=i.length/2-1;d>=0;d--){var u=d*2,h=i[u]-l/2,f=i[u+1]-c/2;if(t>=h&&r>=f&&t<=h+l&&r<=f+c)return d}return-1},e.prototype.contain=function(t,r){var n=this.transformCoordToLocal(t,r),i=this.getBoundingRect();if(t=n[0],r=n[1],i.contain(t,r)){var o=this.hoverDataIdx=this.findDataIndex(t,r);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,n=r.points,i=r.size,o=i[0],l=i[1],c=1/0,d=1/0,u=-1/0,h=-1/0,f=0;f<n.length;){var p=n[f++],g=n[f++];c=Math.min(p,c),u=Math.max(p,u),d=Math.min(g,d),h=Math.max(g,h)}t=this._rect=new Jt(c-o/2,d-l/2,u-c+o,h-d+l)}return t},e})(Ia),iNe=(function(){function a(){this.group=new Gt}return a.prototype.updateData=function(e,t){this._clear();var r=this._create();r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,t)},a.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var n=(r.endIndex-r.startIndex)*2,i=r.startIndex*4*2;t=new Float32Array(t.buffer,i,n)}r.setShape("points",t),r.reset()})},a.prototype.incrementalPrepareUpdate=function(e){this._clear()},a.prototype.incrementalUpdate=function(e,t,r){var n=this._newAdded[0],i=t.getLayout("points"),o=n&&n.shape.points;if(o&&o.length<2e4){var l=o.length,c=new Float32Array(l+i.length);c.set(o),c.set(i,l),n.endIndex=e.end,n.setShape({points:c})}else{this._newAdded=[];var d=this._create();d.startIndex=e.start,d.endIndex=e.end,d.incremental=!0,d.setShape({points:i}),this._setCommon(d,t,r)}},a.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},a.prototype._create=function(){var e=new nNe({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},a.prototype._setCommon=function(e,t,r){var n=t.hostModel;r=r||{};var i=t.getVisual("symbolSize");e.setShape("size",i instanceof Array?i:[i,i]),e.softClipShape=r.clipShape||null,e.symbolProxy=ei(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var o=e.shape.size[0]<sX;e.useStyle(n.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var l=t.getVisual("style"),c=l&&l.fill;c&&e.setColor(c);var d=na(e);d.seriesIndex=n.seriesIndex,e.on("mousemove",function(u){d.dataIndex=null;var h=e.hoverDataIdx;h>=0&&(d.dataIndex=h+(e.startIndex||0))})},a.prototype.remove=function(){this._clear()},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a})(),sNe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=t.getData(),o=this._updateSymbolDraw(i,t);o.updateData(i,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,n){var i=t.getData(),o=this._updateSymbolDraw(i,t);o.incrementalPrepareUpdate(i),this._finished=!1},e.prototype.incrementalRender=function(t,r,n){this._symbolDraw.incrementalUpdate(t,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=t.end===r.getData().count()},e.prototype.updateTransform=function(t,r,n){var i=t.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var o=Hb("").reset(t,r,n);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(t.get("clip",!0)){var r=t.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,r){var n=this._symbolDraw,i=r.pipelineContext,o=i.large;return(!n||o!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=o?new iNe:new Fb,this._isLargeDraw=o,this.group.removeAll()),this.group.add(n.group),n},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e})(Mr),oX={left:0,right:0,top:0,bottom:0},c_=["25%","25%"],oNe=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.mergeDefaultAndTheme=function(t,r){var n=E0(t.outerBounds);a.prototype.mergeDefaultAndTheme.apply(this,arguments),n&&t.outerBounds&&Mc(t.outerBounds,n)},e.prototype.mergeOption=function(t,r){a.prototype.mergeOption.apply(this,arguments),this.option.outerBounds&&t.outerBounds&&Mc(this.option.outerBounds,t.outerBounds)},e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"15%",top:65,right:"10%",bottom:80,containLabel:!1,outerBoundsMode:"auto",outerBounds:oX,outerBoundsContain:"all",outerBoundsClampWidth:c_[0],outerBoundsClampHeight:c_[1],backgroundColor:Fe.color.transparent,borderWidth:1,borderColor:Fe.color.neutral30},e})(Oa),P3=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",yn).models[0]},e.type="cartesian2dAxis",e})(Oa);ti(P3,Bb);var lX={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:Fe.color.axisLine,width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15],breakLine:!0},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12,color:Fe.color.axisLabel,textMargin:[0,3]},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:Fe.color.axisSplitLine,width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:[Fe.color.backgroundTint,Fe.color.backgroundTransparent]}},breakArea:{show:!0,itemStyle:{color:Fe.color.neutral00,borderColor:Fe.color.border,borderWidth:1,borderType:[3,3],opacity:.6},zigzagAmplitude:4,zigzagMinSpan:4,zigzagMaxSpan:20,zigzagZ:100,expandOnClick:!0},breakLabelLayout:{moveOverlap:"auto"}},lNe=_a({boundaryGap:!0,deduplication:null,jitter:0,jitterOverlap:!0,jitterMargin:2,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto",show:"auto"},axisLabel:{interval:"auto"}},lX),zM=_a({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:Fe.color.axisMinorSplitLine,width:1}}},lX),cNe=_a({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},zM),dNe=Kt({logBase:10},zM);const cX={category:lNe,value:zM,time:cNe,log:dNe};var uNe={value:1,category:1,time:1,log:1},B3=null;function hNe(a){B3||(B3=a)}function Ub(){return B3}function Rx(a,e,t,r){oe(uNe,function(n,i){var o=_a(_a({},cX[i],!0),r,!0),l=(function(c){Le(d,c);function d(){var u=c!==null&&c.apply(this,arguments)||this;return u.type=e+"Axis."+i,u}return d.prototype.mergeDefaultAndTheme=function(u,h){var f=qv(this),p=f?E0(u):{},g=h.getTheme();_a(u,g.get(i+"Axis")),_a(u,this.getDefaultOption()),u.type=C7(u),f&&Mc(u,p,f)},d.prototype.optionUpdated=function(){var u=this.option;u.type==="category"&&(this.__ordinalMeta=eb.createByAxisModel(this))},d.prototype.getCategories=function(u){var h=this.option;if(h.type==="category")return u?h.data:this.__ordinalMeta.categories},d.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},d.prototype.updateAxisBreaks=function(u){var h=Ub();return h?h.updateModelAxisBreak(this,u):{breaks:[]}},d.type=e+"Axis."+i,d.defaultOption=o,d})(t);a.registerComponentModel(l)}),a.registerSubTypeDefaulter(e+"Axis",C7)}function C7(a){return a.type||(a.data?"category":"value")}var fNe=(function(){function a(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return a.prototype.getAxis=function(e){return this._axes[e]},a.prototype.getAxes=function(){return it(this._dimList,function(e){return this._axes[e]},this)},a.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),hr(this.getAxes(),function(t){return t.scale.type===e})},a.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},a})(),z3=["x","y"];function A7(a){return(a.type==="interval"||a.type==="time")&&!a.hasBreaks()}var pNe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=z3,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!A7(t)||!A7(r))){var n=t.getExtent(),i=r.getExtent(),o=this.dataToPoint([n[0],i[0]]),l=this.dataToPoint([n[1],i[1]]),c=n[1]-n[0],d=i[1]-i[0];if(!(!c||!d)){var u=(l[0]-o[0])/c,h=(l[1]-o[1])/d,f=o[0]-n[0]*u,p=o[1]-i[0]*h,g=this._transform=[u,0,0,h,f,p];this._invTransform=Cl([],g)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var r=this.getAxis("x"),n=this.getAxis("y");return r.contain(r.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,r){var n=this.dataToPoint(t),i=this.dataToPoint(r),o=this.getArea(),l=new Jt(n[0],n[1],i[0]-n[0],i[1]-n[1]);return o.intersect(l)},e.prototype.dataToPoint=function(t,r,n){n=n||[];var i=t[0],o=t[1];if(this._transform&&i!=null&&isFinite(i)&&o!=null&&isFinite(o))return zn(n,t,this._transform);var l=this.getAxis("x"),c=this.getAxis("y");return n[0]=l.toGlobalCoord(l.dataToCoord(i,r)),n[1]=c.toGlobalCoord(c.dataToCoord(o,r)),n},e.prototype.clampData=function(t,r){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,o=n.getExtent(),l=i.getExtent(),c=n.parse(t[0]),d=i.parse(t[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(o[0],o[1]),c),Math.max(o[0],o[1])),r[1]=Math.min(Math.max(Math.min(l[0],l[1]),d),Math.max(l[0],l[1])),r},e.prototype.pointToData=function(t,r,n){if(n=n||[],this._invTransform)return zn(n,t,this._invTransform);var i=this.getAxis("x"),o=this.getAxis("y");return n[0]=i.coordToData(i.toLocalCoord(t[0]),r),n[1]=o.coordToData(o.toLocalCoord(t[1]),r),n},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1])-t,o=Math.min(n[0],n[1])-t,l=Math.max(r[0],r[1])-i+t,c=Math.max(n[0],n[1])-o+t;return new Jt(i,o,l,c)},e})(fNe),dX=(function(a){Le(e,a);function e(t,r,n,i,o){var l=a.call(this,t,r,n)||this;return l.index=0,l.type=i||"value",l.position=o||"bottom",l}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),t&&r[0]>r[1]&&r.reverse(),r},e.prototype.pointToData=function(t,r){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),r)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e})(Ll),IN="expandAxisBreak",uX="collapseAxisBreak",hX="toggleAxisBreak",FM="axisbreakchanged",xNe={type:IN,event:FM,update:"update",refineEvent:VM},mNe={type:uX,event:FM,update:"update",refineEvent:VM},gNe={type:hX,event:FM,update:"update",refineEvent:VM};function VM(a,e,t,r){var n=[];return oe(a,function(i){n=n.concat(i.eventBreaks)}),{eventContent:{breaks:n}}}function vNe(a){a.registerAction(xNe,e),a.registerAction(mNe,e),a.registerAction(gNe,e);function e(t,r){var n=[],i=lx(r,t);function o(l,c){oe(i[l],function(d){var u=d.updateAxisBreaks(t);oe(u.breaks,function(h){var f;n.push(Kt((f={},f[c]=d.componentIndex,f),h))})})}return o("xAxisModels","xAxisIndex"),o("yAxisModels","yAxisIndex"),o("singleAxisModels","singleAxisIndex"),{eventBreaks:n}}}var th=Math.PI,bNe=[[1,2,1,2],[5,3,5,3],[8,3,8,3]],yNe=[[0,1,0,1],[0,3,0,3],[0,3,0,3]],Lx=Ea(),fX=Ea(),pX=(function(){function a(e){this.recordMap={},this.resolveAxisNameOverlap=e}return a.prototype.ensureRecord=function(e){var t=e.axis.dim,r=e.componentIndex,n=this.recordMap,i=n[t]||(n[t]=[]);return i[r]||(i[r]={ready:{}})},a})();function wNe(a,e,t,r){var n=t.axis,i=e.ensureRecord(t),o=[],l,c=HM(a.axisName)&&Dx(a.nameLocation);oe(r,function(g){var b=Ec(g);if(!(!b||b.label.ignore)){o.push(b);var w=i.transGroup;c&&(w.transform?Cl(cg,w.transform):iN(cg),b.transform&&bc(cg,cg,b.transform),Jt.copy(Jy,b.localRect),Jy.applyTransform(cg),l?l.union(Jy):Jt.copy(l=new Jt(0,0,0,0),Jy))}});var d=Math.abs(i.dirVec.x)>.1?"x":"y",u=i.transGroup[d];if(o.sort(function(g,b){return Math.abs(g.label[d]-u)-Math.abs(b.label[d]-u)}),c&&l){var h=n.getExtent(),f=Math.min(h[0],h[1]),p=Math.max(h[0],h[1])-f;l.union(new Jt(f,0,p,1))}i.stOccupiedRect=l,i.labelInfoList=o}var cg=Ii(),Jy=new Jt(0,0,0,0),xX=function(a,e,t,r,n,i){if(Dx(a.nameLocation)){var o=i.stOccupiedRect;o&&mX(b2e({},o,i.transGroup.transform),r,n)}else gX(i.labelInfoList,i.dirVec,r,n)};function mX(a,e,t){var r=new Xt;EN(a,e,r,{direction:Math.atan2(t.y,t.x),bidirectional:!1,touchThreshold:.05})&&M3(e,r)}function gX(a,e,t,r){for(var n=Xt.dot(r,e)>=0,i=0,o=a.length;i<o;i++){var l=a[n?i:o-1-i];l.label.ignore||mX(l,t,r)}}var ks=(function(){function a(e,t,r,n){this.group=new Gt,this._axisModel=e,this._api=t,this._local={},this._shared=n||new pX(xX),this._resetCfgDetermined(r)}return a.prototype.updateCfg=function(e){var t=this._cfg.raw;t.position=e.position,t.labelOffset=e.labelOffset,this._resetCfgDetermined(t)},a.prototype.__getRawCfg=function(){return this._cfg.raw},a.prototype._resetCfgDetermined=function(e){var t=this._axisModel,r=t.getDefaultOption?t.getDefaultOption():{},n=Pt(e.axisName,t.get("name")),i=t.get("nameMoveOverlap");(i==null||i==="auto")&&(i=Pt(e.defaultNameMoveOverlap,!0));var o={raw:e,position:e.position,rotation:e.rotation,nameDirection:Pt(e.nameDirection,1),tickDirection:Pt(e.tickDirection,1),labelDirection:Pt(e.labelDirection,1),labelOffset:Pt(e.labelOffset,0),silent:Pt(e.silent,!0),axisName:n,nameLocation:No(t.get("nameLocation"),r.nameLocation,"end"),shouldNameMoveOverlap:HM(n)&&i,optionHideOverlap:t.get(["axisLabel","hideOverlap"]),showMinorTicks:t.get(["minorTick","show"])};this._cfg=o;var l=new Gt({x:o.position[0],y:o.position[1],rotation:o.rotation});l.updateTransform(),this._transformGroup=l;var c=this._shared.ensureRecord(t);c.transGroup=this._transformGroup,c.dirVec=new Xt(Math.cos(-o.rotation),Math.sin(-o.rotation))},a.prototype.build=function(e,t){var r=this;return e||(e={axisLine:!0,axisTickLabelEstimate:!1,axisTickLabelDetermine:!0,axisName:!0}),oe(_Ne,function(n){e[n]&&NNe[n](r._cfg,r._local,r._shared,r._axisModel,r.group,r._transformGroup,r._api,t||{})}),this},a.innerTextLayout=function(e,t,r){var n=uW(t-e),i,o;return Hv(n)?(o=r>0?"top":"bottom",i="center"):Hv(n-th)?(o=r>0?"bottom":"top",i="center"):(o="middle",n>0&&n<th?i=r>0?"right":"left":i=r>0?"left":"right"),{rotation:n,textAlign:i,textVerticalAlign:o}},a.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},a.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},a})(),_Ne=["axisLine","axisTickLabelEstimate","axisTickLabelDetermine","axisName"],NNe={axisLine:function(a,e,t,r,n,i,o){var l=r.get(["axisLine","show"]);if(l==="auto"&&(l=!0,a.raw.axisLineAutoShow!=null&&(l=!!a.raw.axisLineAutoShow)),!!l){var c=r.axis.getExtent(),d=i.transform,u=[c[0],0],h=[c[1],0],f=u[0]>h[0];d&&(zn(u,u,d),zn(h,h,d));var p=Je({lineCap:"round"},r.getModel(["axisLine","lineStyle"]).getLineStyle()),g={strokeContainThreshold:a.raw.strokeContainThreshold||5,silent:!0,z2:1,style:p};if(r.get(["axisLine","breakLine"])&&r.axis.scale.hasBreaks())Ub().buildAxisBreakLine(r,n,i,g);else{var b=new qn(Je({shape:{x1:u[0],y1:u[1],x2:h[0],y2:h[1]}},g));Cx(b.shape,b.style.lineWidth),b.anid="line",n.add(b)}var w=r.get(["axisLine","symbol"]);if(w!=null){var _=r.get(["axisLine","symbolSize"]);jt(w)&&(w=[w,w]),(jt(_)||Xa(_))&&(_=[_,_]);var k=I0(r.get(["axisLine","symbolOffset"])||0,_),T=_[0],D=_[1];oe([{rotate:a.rotation+Math.PI/2,offset:k[0],r:0},{rotate:a.rotation-Math.PI/2,offset:k[1],r:Math.sqrt((u[0]-h[0])*(u[0]-h[0])+(u[1]-h[1])*(u[1]-h[1]))}],function(I,O){if(w[O]!=="none"&&w[O]!=null){var P=ei(w[O],-T/2,-D/2,T,D,p.stroke,!0),V=I.r+I.offset,G=f?h:u;P.attr({rotation:I.rotate,x:G[0]+V*Math.cos(a.rotation),y:G[1]-V*Math.sin(a.rotation),silent:!0,z2:11}),n.add(P)}})}}},axisTickLabelEstimate:function(a,e,t,r,n,i,o,l){var c=M7(e,n,l);c&&T7(a,e,t,r,n,i,o,Tl.estimate)},axisTickLabelDetermine:function(a,e,t,r,n,i,o,l){var c=M7(e,n,l);c&&T7(a,e,t,r,n,i,o,Tl.determine);var d=CNe(a,n,i,r);kNe(a,e.labelLayoutList,d),ANe(a,n,i,r,a.tickDirection)},axisName:function(a,e,t,r,n,i,o,l){var c=t.ensureRecord(r);e.nameEl&&(n.remove(e.nameEl),e.nameEl=c.nameLayout=c.nameLocation=null);var d=a.axisName;if(HM(d)){var u=a.nameLocation,h=a.nameDirection,f=r.getModel("nameTextStyle"),p=r.get("nameGap")||0,g=r.axis.getExtent(),b=r.axis.inverse?-1:1,w=new Xt(0,0),_=new Xt(0,0);u==="start"?(w.x=g[0]-b*p,_.x=-b):u==="end"?(w.x=g[1]+b*p,_.x=b):(w.x=(g[0]+g[1])/2,w.y=a.labelOffset+h*p,_.y=h);var k=Ii();_.transform(Ch(k,k,a.rotation));var T=r.get("nameRotate");T!=null&&(T=T*th/180);var D,I;Dx(u)?D=ks.innerTextLayout(a.rotation,T??a.rotation,h):(D=jNe(a.rotation,u,T||0,g),I=a.raw.axisNameAvailableWidth,I!=null&&(I=Math.abs(I/Math.sin(D.rotation)),!isFinite(I)&&(I=null)));var O=f.getFont(),P=r.get("nameTruncate",!0)||{},V=P.ellipsis,G=Gi(a.raw.nameTruncateMaxWidth,P.maxWidth,I),Q=l.nameMarginLevel||0,$=new Ja({x:w.x,y:w.y,rotation:D.rotation,silent:ks.isLabelSilent(r),style:zr(f,{text:d,font:O,overflow:"truncate",width:G,ellipsis:V,fill:f.getTextColor()||r.get(["axisLine","lineStyle","color"]),align:f.get("align")||D.textAlign,verticalAlign:f.get("verticalAlign")||D.textVerticalAlign}),z2:1});if(Gd({el:$,componentModel:r,itemName:d}),$.__fullText=d,$.anid="name",r.get("triggerEvent")){var ae=ks.makeAxisEventDataBase(r);ae.targetType="axisName",ae.name=d,na($).eventData=ae}i.add($),$.updateTransform(),e.nameEl=$;var J=c.nameLayout=Ec({label:$,priority:$.z2,defaultAttr:{ignore:$.ignore},marginDefault:Dx(u)?bNe[Q]:yNe[Q]});if(c.nameLocation=u,n.add($),$.decomposeTransform(),a.shouldNameMoveOverlap&&J){var U=t.ensureRecord(r);t.resolveAxisNameOverlap(a,t,r,J,_,U)}}}};function T7(a,e,t,r,n,i,o,l){bX(e)||TNe(a,e,n,l,r,o);var c=e.labelLayoutList;MNe(a,r,c,i),INe(r,a.rotation,c);var d=a.optionHideOverlap;SNe(r,c,d),d&&Tq(hr(c,function(u){return u&&!u.label.ignore})),wNe(a,t,r,c)}function jNe(a,e,t,r){var n=uW(t-a),i,o,l=r[0]>r[1],c=e==="start"&&!l||e!=="start"&&l;return Hv(n-th/2)?(o=c?"bottom":"top",i="center"):Hv(n-th*1.5)?(o=c?"top":"bottom",i="center"):(o="middle",n<th*1.5&&n>th/2?i=c?"left":"right":i=c?"right":"left"),{rotation:n,textAlign:i,textVerticalAlign:o}}function SNe(a,e,t){if(hq(a.axis))return;function r(l,c,d){var u=Ec(e[c]),h=Ec(e[d]);if(!(!u||!h)){if(l===!1||u.suggestIgnore){qg(u.label);return}if(h.suggestIgnore){qg(h.label);return}var f=.1;if(!t){var p=[0,0,0,0];u=E3({marginForce:p},u),h=E3({marginForce:p},h)}EN(u,h,null,{touchThreshold:f})&&qg(l?h.label:u.label)}}var n=a.get(["axisLabel","showMinLabel"]),i=a.get(["axisLabel","showMaxLabel"]),o=e.length;r(n,0,1),r(i,o-1,o-2)}function kNe(a,e,t){a.showMinorTicks||oe(e,function(r){if(r&&r.label.ignore)for(var n=0;n<t.length;n++){var i=t[n],o=fX(i),l=Lx(r.label);if(o.tickValue!=null&&!o.onBand&&o.tickValue===l.tickValue){qg(i);return}}})}function qg(a){a&&(a.ignore=!0)}function vX(a,e,t,r,n){for(var i=[],o=[],l=[],c=0;c<a.length;c++){var d=a[c].coord;o[0]=d,o[1]=0,l[0]=d,l[1]=t,e&&(zn(o,o,e),zn(l,l,e));var u=new qn({shape:{x1:o[0],y1:o[1],x2:l[0],y2:l[1]},style:r,z2:2,autoBatch:!0,silent:!0});Cx(u.shape,u.style.lineWidth),u.anid=n+"_"+a[c].tickValue,i.push(u);var h=fX(u);h.onBand=!!a[c].onBand,h.tickValue=a[c].tickValue}return i}function CNe(a,e,t,r){var n=r.axis,i=r.getModel("axisTick"),o=i.get("show");if(o==="auto"&&(o=!0,a.raw.axisTickAutoShow!=null&&(o=!!a.raw.axisTickAutoShow)),!o||n.scale.isBlank())return[];for(var l=i.getModel("lineStyle"),c=a.tickDirection*i.get("length"),d=n.getTicksCoords(),u=vX(d,t.transform,c,Kt(l.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),h=0;h<u.length;h++)e.add(u[h]);return u}function ANe(a,e,t,r,n){var i=r.axis,o=r.getModel("minorTick");if(!(!a.showMinorTicks||i.scale.isBlank())){var l=i.getMinorTicksCoords();if(l.length)for(var c=o.getModel("lineStyle"),d=n*o.get("length"),u=Kt(c.getLineStyle(),Kt(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),h=0;h<l.length;h++)for(var f=vX(l[h],t.transform,d,u,"minorticks_"+h),p=0;p<f.length;p++)e.add(f[p])}}function M7(a,e,t){if(bX(a)){var r=a.axisLabelsCreationContext,n=r.out.noPxChangeTryDetermine;if(t.noPxChange){for(var i=!0,o=0;o<n.length;o++)i=i&&n[o]();if(i)return!1}n.length&&(e.remove(a.labelGroup),F3(a,null,null,null))}return!0}function TNe(a,e,t,r,n,i){var o=n.axis,l=Gi(a.raw.axisLabelShow,n.get(["axisLabel","show"])),c=new Gt;t.add(c);var d=a_(r);if(!l||o.scale.isBlank()){F3(e,[],c,d);return}var u=n.getModel("axisLabel"),h=o.getViewLabels(d),f=(Gi(a.raw.labelRotate,u.get("rotate"))||0)*th/180,p=ks.innerTextLayout(a.rotation,f,a.labelDirection),g=n.getCategories&&n.getCategories(!0),b=[],w=n.get("triggerEvent"),_=1/0,k=-1/0;oe(h,function(D,I){var O,P=o.scale.type==="ordinal"?o.scale.getRawOrdinalNumber(D.tickValue):D.tickValue,V=D.formattedLabel,G=D.rawLabel,Q=u;if(g&&g[P]){var $=g[P];Qt($)&&$.textStyle&&(Q=new za($.textStyle,u,n.ecModel))}var ae=Q.getTextColor()||n.get(["axisLine","lineStyle","color"]),J=Q.getShallow("align",!0)||p.textAlign,U=Pt(Q.getShallow("alignMinLabel",!0),J),F=Pt(Q.getShallow("alignMaxLabel",!0),J),W=Q.getShallow("verticalAlign",!0)||Q.getShallow("baseline",!0)||p.textVerticalAlign,K=Pt(Q.getShallow("verticalAlignMinLabel",!0),W),ee=Pt(Q.getShallow("verticalAlignMaxLabel",!0),W),ne=10+(((O=D.time)===null||O===void 0?void 0:O.level)||0);_=Math.min(_,ne),k=Math.max(k,ne);var re=new Ja({x:0,y:0,rotation:0,silent:ks.isLabelSilent(n),z2:ne,style:zr(Q,{text:V,align:I===0?U:I===h.length-1?F:J,verticalAlign:I===0?K:I===h.length-1?ee:W,fill:Ut(ae)?ae(o.type==="category"?G:o.type==="value"?P+"":P,I):ae})});re.anid="label_"+P;var Z=Lx(re);if(Z.break=D.break,Z.tickValue=P,Z.layoutRotation=p.rotation,Gd({el:re,componentModel:n,itemName:V,formatterParamsExtra:{isTruncated:function(){return re.isTruncated},value:G,tickIndex:I}}),w){var ie=ks.makeAxisEventDataBase(n);ie.targetType="axisLabel",ie.value=G,ie.tickIndex=I,D.break&&(ie.break={start:D.break.parsedBreak.vmin,end:D.break.parsedBreak.vmax}),o.type==="category"&&(ie.dataIndex=P),na(re).eventData=ie,D.break&&DNe(n,i,re,D.break)}b.push(re),c.add(re)});var T=it(b,function(D){return{label:D,priority:Lx(D).break?D.z2+(k-_+1):D.z2,defaultAttr:{ignore:D.ignore}}});F3(e,T,c,d)}function bX(a){return!!a.labelLayoutList}function F3(a,e,t,r){a.labelLayoutList=e,a.labelGroup=t,a.axisLabelsCreationContext=r}function MNe(a,e,t,r){var n=e.get(["axisLabel","margin"]);oe(t,function(i,o){var l=Ec(i);if(l){var c=l.label,d=Lx(c);l.suggestIgnore=c.ignore,c.ignore=!1,L2(dd,ENe),dd.x=e.axis.dataToCoord(d.tickValue),dd.y=a.labelOffset+a.labelDirection*n,dd.rotation=d.layoutRotation,r.add(dd),dd.updateTransform(),r.remove(dd),dd.decomposeTransform(),L2(c,dd),c.markRedraw(),s_(l,!0),Ec(l)}})}var dd=new Ta,ENe=new Ta;function HM(a){return!!a}function DNe(a,e,t,r){t.on("click",function(n){var i={type:IN,breaks:[{start:r.parsedBreak.breakOption.start,end:r.parsedBreak.breakOption.end}]};i[a.axis.dim+"AxisIndex"]=a.componentIndex,e.dispatchAction(i)})}function INe(a,e,t){var r=Xn();if(r){var n=r.retrieveAxisBreakPairs(t,function(o){return o&&Lx(o.label).break},!0),i=a.get(["breakLabelLayout","moveOverlap"],!0);(i===!0||i==="auto")&&oe(n,function(o){Ub().adjustBreakLabelPair(a.axis.inverse,e,[Ec(t[o[0]]),Ec(t[o[1]])])})}}function d_(a,e,t){t=t||{};var r=e.axis,n={},i=r.getAxesOnZeroOf()[0],o=r.position,l=i?"onZero":o,c=r.dim,d=[a.x,a.x+a.width,a.y,a.y+a.height],u={left:0,right:1,top:0,bottom:1,onZero:2},h=e.get("offset")||0,f=c==="x"?[d[2]-h,d[3]+h]:[d[0]-h,d[1]+h];if(i){var p=i.toGlobalCoord(i.dataToCoord(0));f[u.onZero]=Math.max(Math.min(p,f[1]),f[0])}n.position=[c==="y"?f[u[l]]:d[0],c==="x"?f[u[l]]:d[3]],n.rotation=Math.PI/2*(c==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};n.labelDirection=n.tickDirection=n.nameDirection=g[o],n.labelOffset=i?f[u[o]]-f[u.onZero]:0,e.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),Gi(t.labelInside,e.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var b=e.get(["axisLabel","rotate"]);return n.labelRotate=l==="top"?-b:b,n.z2=1,n}function RNe(a){return a.coordinateSystem&&a.coordinateSystem.type==="cartesian2d"}function E7(a){var e={xAxisModel:null,yAxisModel:null};return oe(e,function(t,r){var n=r.replace(/Model$/,""),i=a.getReferringComponents(n,yn).models[0];e[r]=i}),e}function LNe(a,e,t,r,n,i){for(var o=d_(a,t),l=!1,c=!1,d=0;d<e.length;d++)S3(e[d].getOtherAxis(t.axis).scale)&&(l=c=!0,t.axis.type==="category"&&t.axis.onBand&&(c=!1));return o.axisLineAutoShow=l,o.axisTickAutoShow=c,o.defaultNameMoveOverlap=i,new ks(t,r,o,n)}function ONe(a,e,t){var r=d_(e,t);a.updateCfg(r)}function yX(a,e,t){var r=zd.prototype,n=r.getTicks.call(t),i=r.getTicks.call(t,{expandToNicedExtent:!0}),o=n.length-1,l=r.getInterval.call(t),c=uq(a,e),d=c.extent,u=c.fixMin,h=c.fixMax;a.type==="log"&&(d=k3(a.base,d,!0)),a.setBreaksFromOption(fq(e)),a.setExtent(d[0],d[1]),a.calcNiceExtent({splitNumber:o,fixMin:u,fixMax:h});var f=r.getExtent.call(a);u&&(d[0]=f[0]),h&&(d[1]=f[1]);var p=r.getInterval.call(a),g=d[0],b=d[1];if(u&&h)p=(b-g)/o;else if(u)for(b=d[0]+p*o;b<d[1]&&isFinite(b)&&isFinite(d[1]);)p=d5(p),b=d[0]+p*o;else if(h)for(g=d[1]-p*o;g>d[0]&&isFinite(g)&&isFinite(d[0]);)p=d5(p),g=d[1]-p*o;else{var w=a.getTicks().length-1;w>o&&(p=d5(p));var _=p*o;b=Math.ceil(d[1]/p)*p,g=Yn(b-_),g<0&&d[0]>=0?(g=0,b=Yn(_)):b>0&&d[1]<=0&&(b=0,g=-Yn(_))}var k=(n[0].value-i[0].value)/l,T=(n[o].value-i[o].value)/l;r.setExtent.call(a,g+p*k,b+p*T),r.setInterval.call(a,p),(k||T)&&r.setNiceExtent.call(a,g+p,b-p)}var D7=[[3,1],[0,2]],PNe=(function(){function a(e,t,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=z3,this._initCartesian(e,t,r),this.model=e}return a.prototype.getRect=function(){return this._rect},a.prototype.update=function(e,t){var r=this._axesMap;this._updateScale(e,this.model);function n(o){var l,c=Va(o),d=c.length;if(d){for(var u=[],h=d-1;h>=0;h--){var f=+c[h],p=o[f],g=p.model,b=p.scale;S3(b)&&g.get("alignTicks")&&g.get("interval")==null?u.push(p):(Ex(b,g),S3(b)&&(l=p))}u.length&&(l||(l=u.pop(),Ex(l.scale,l.model)),oe(u,function(w){yX(w.scale,w.model,l.scale)}))}}n(r.x),n(r.y);var i={};oe(r.x,function(o){I7(r,"y",o,i)}),oe(r.y,function(o){I7(r,"x",o,i)}),this.resize(this.model,t)},a.prototype.resize=function(e,t,r){var n=pi(e,t),i=this._rect=ln(e.getBoxLayoutParams(),n.refContainer),o=this._axesMap,l=this._coordsList,c=e.get("containLabel");if(V3(o,i),!r){var d=FNe(i,l,o,c,t),u=void 0;if(c)H3?(H3(this._axesList,i),V3(o,i)):u=O7(i.clone(),"axisLabel",null,i,o,d,n);else{var h=VNe(e,i,n),f=h.outerBoundsRect,p=h.parsedOuterBoundsContain,g=h.outerBoundsClamp;f&&(u=O7(f,p,g,i,o,d,n))}wX(i,o,Tl.determine,null,u,n)}oe(this._coordsList,function(b){b.calcAffineTransform()})},a.prototype.getAxis=function(e,t){var r=this._axesMap[e];if(r!=null)return r[t||0]},a.prototype.getAxes=function(){return this._axesList.slice()},a.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var r="x"+e+"y"+t;return this._coordsMap[r]}Qt(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var n=0,i=this._coordsList;n<i.length;n++)if(i[n].getAxis("x").index===e||i[n].getAxis("y").index===t)return i[n]},a.prototype.getCartesians=function(){return this._coordsList.slice()},a.prototype.convertToPixel=function(e,t,r){var n=this._findConvertTarget(t);return n.cartesian?n.cartesian.dataToPoint(r):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(r)):null},a.prototype.convertFromPixel=function(e,t,r){var n=this._findConvertTarget(t);return n.cartesian?n.cartesian.pointToData(r):n.axis?n.axis.coordToData(n.axis.toLocalCoord(r)):null},a.prototype._findConvertTarget=function(e){var t=e.seriesModel,r=e.xAxisModel||t&&t.getReferringComponents("xAxis",yn).models[0],n=e.yAxisModel||t&&t.getReferringComponents("yAxis",yn).models[0],i=e.gridModel,o=this._coordsList,l,c;if(t)l=t.coordinateSystem,ya(o,l)<0&&(l=null);else if(r&&n)l=this.getCartesian(r.componentIndex,n.componentIndex);else if(r)c=this.getAxis("x",r.componentIndex);else if(n)c=this.getAxis("y",n.componentIndex);else if(i){var d=i.coordinateSystem;d===this&&(l=this._coordsList[0])}return{cartesian:l,axis:c}},a.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},a.prototype._initCartesian=function(e,t,r){var n=this,i=this,o={left:!1,right:!1,top:!1,bottom:!1},l={x:{},y:{}},c={x:0,y:0};if(t.eachComponent("xAxis",d("x"),this),t.eachComponent("yAxis",d("y"),this),!c.x||!c.y){this._axesMap={},this._axesList=[];return}this._axesMap=l,oe(l.x,function(u,h){oe(l.y,function(f,p){var g="x"+h+"y"+p,b=new pNe(g);b.master=n,b.model=e,n._coordsMap[g]=b,n._coordsList.push(b),b.addAxis(u),b.addAxis(f)})});function d(u){return function(h,f){if(k5(h,e)){var p=h.get("position");u==="x"?p!=="top"&&p!=="bottom"&&(p=o.bottom?"top":"bottom"):p!=="left"&&p!=="right"&&(p=o.left?"right":"left"),o[p]=!0;var g=new dX(u,MN(h),[0,0],h.get("type"),p),b=g.type==="category";g.onBand=b&&h.get("boundaryGap"),g.inverse=h.get("inverse"),h.axis=g,g.model=h,g.grid=i,g.index=f,i._axesList.push(g),l[u][f]=g,c[u]++}}}},a.prototype._updateScale=function(e,t){oe(this._axesList,function(n){if(n.scale.setExtent(1/0,-1/0),n.type==="category"){var i=n.model.get("categorySortInfo");n.scale.setSortInfo(i)}}),e.eachSeries(function(n){if(RNe(n)){var i=E7(n),o=i.xAxisModel,l=i.yAxisModel;if(!k5(o,t)||!k5(l,t))return;var c=this.getCartesian(o.componentIndex,l.componentIndex),d=n.getData(),u=c.getAxis("x"),h=c.getAxis("y");r(d,u),r(d,h)}},this);function r(n,i){oe(t_(n,i.dim),function(o){i.scale.unionExtentFromData(n,o)})}},a.prototype.getTooltipAxes=function(e){var t=[],r=[];return oe(this.getCartesians(),function(n){var i=e!=null&&e!=="auto"?n.getAxis(e):n.getBaseAxis(),o=n.getOtherAxis(i);ya(t,i)<0&&t.push(i),ya(r,o)<0&&r.push(o)}),{baseAxes:t,otherAxes:r}},a.create=function(e,t){var r=[];return e.eachComponent("grid",function(n,i){var o=new a(n,e,t);o.name="grid_"+i,o.resize(n,t,!0),n.coordinateSystem=o,r.push(o)}),e.eachSeries(function(n){Lb({targetModel:n,coordSysType:"cartesian2d",coordSysProvider:i});function i(){var o=E7(n),l=o.xAxisModel,c=o.yAxisModel,d=l.getCoordSysModel(),u=d.coordinateSystem;return u.getCartesian(l.componentIndex,c.componentIndex)}}),r},a.dimensions=z3,a})();function k5(a,e){return a.getCoordSysModel()===e}function I7(a,e,t,r){t.getAxesOnZeroOf=function(){return i?[i]:[]};var n=a[e],i,o=t.model,l=o.get(["axisLine","onZero"]),c=o.get(["axisLine","onZeroAxisIndex"]);if(!l)return;if(c!=null)R7(n[c])&&(i=n[c]);else for(var d in n)if(n.hasOwnProperty(d)&&R7(n[d])&&!r[u(n[d])]){i=n[d];break}i&&(r[u(i)]=!0);function u(h){return h.dim+"_"+h.index}}function R7(a){return a&&a.type!=="category"&&a.type!=="time"&&Uwe(a)}function BNe(a,e){var t=a.getExtent(),r=t[0]+t[1];a.toGlobalCoord=a.dim==="x"?function(n){return n+e}:function(n){return r-n+e},a.toLocalCoord=a.dim==="x"?function(n){return n-e}:function(n){return r-n+e}}function V3(a,e){oe(a.x,function(t){return L7(t,e.x,e.width)}),oe(a.y,function(t){return L7(t,e.y,e.height)})}function L7(a,e,t){var r=[0,t],n=a.inverse?1:0;a.setExtent(r[n],r[1-n]),BNe(a,e)}var H3;function zNe(a){H3=a}function O7(a,e,t,r,n,i,o){wX(r,n,Tl.estimate,e,!1,o);var l=[0,0,0,0];d(0),d(1),u(r,0,NaN),u(r,1,NaN);var c=C0(l,function(f){return f>0})==null;return w0(r,l,!0,!0,t),V3(n,r),c;function d(f){oe(n[da[f]],function(p){if(tb(p.model)){var g=i.ensureRecord(p.model),b=g.labelInfoList;if(b)for(var w=0;w<b.length;w++){var _=b[w],k=p.scale.normalize(Lx(_.label).tickValue);k=f===1?1-k:k,u(_.rect,f,k),u(_.rect,1-f,NaN)}var T=g.nameLayout;if(T){var k=Dx(g.nameLocation)?.5:NaN;u(T.rect,f,k),u(T.rect,1-f,NaN)}}})}function u(f,p,g){var b=a[da[p]]-f[da[p]],w=f[Qn[p]]+f[da[p]]-(a[Qn[p]]+a[da[p]]);b=h(b,1-g),w=h(w,g);var _=D7[p][0],k=D7[p][1];l[_]=Pn(l[_],b),l[k]=Pn(l[k],w)}function h(f,p){return f>0&&!ss(p)&&p>1e-4&&(f/=p),f}}function FNe(a,e,t,r,n){var i=new pX(HNe);return oe(t,function(o){return oe(o,function(l){if(tb(l.model)){var c=!r;l.axisBuilder=LNe(a,e,l.model,n,i,c)}})}),i}function wX(a,e,t,r,n,i){var o=t===Tl.determine;oe(e,function(d){return oe(d,function(u){tb(u.model)&&(ONe(u.axisBuilder,a,u.model),u.axisBuilder.build(o?{axisTickLabelDetermine:!0}:{axisTickLabelEstimate:!0},{noPxChange:n}))})});var l={x:0,y:0};c(0),c(1);function c(d){l[da[1-d]]=a[Qn[d]]<=i.refContainer[Qn[d]]*.5?0:1-d===1?2:1}oe(e,function(d,u){return oe(d,function(h){tb(h.model)&&((r==="all"||o)&&h.axisBuilder.build({axisName:!0},{nameMarginLevel:l[u]}),o&&h.axisBuilder.build({axisLine:!0}))})})}function VNe(a,e,t){var r,n=a.get("outerBoundsMode",!0);n==="same"?r=e.clone():(n==null||n==="auto")&&(r=ln(a.get("outerBounds",!0)||oX,t.refContainer));var i=a.get("outerBoundsContain",!0),o;i==null||i==="auto"||ya(["all","axisLabel"],i)<0?o="all":o=i;var l=[P2(Pt(a.get("outerBoundsClampWidth",!0),c_[0]),e.width),P2(Pt(a.get("outerBoundsClampHeight",!0),c_[1]),e.height)];return{outerBoundsRect:r,parsedOuterBoundsContain:o,outerBoundsClamp:l}}var HNe=function(a,e,t,r,n,i){var o=t.axis.dim==="x"?"y":"x";xX(a,e,t,r,n,i),Dx(a.nameLocation)||oe(e.recordMap[o],function(l){l&&l.labelInfoList&&l.dirVec&&gX(l.labelInfoList,l.dirVec,r,n)})};function UNe(a,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return GNe(t,a,e),t.seriesInvolved&&$Ne(t,a),t}function GNe(a,e,t){var r=e.getComponent("tooltip"),n=e.getComponent("axisPointer"),i=n.get("link",!0)||[],o=[];oe(t.getCoordinateSystems(),function(l){if(!l.axisPointerEnabled)return;var c=ib(l.model),d=a.coordSysAxesInfo[c]={};a.coordSysMap[c]=l;var u=l.model,h=u.getModel("tooltip",r);if(oe(l.getAxes(),va(b,!1,null)),l.getTooltipAxes&&r&&h.get("show")){var f=h.get("trigger")==="axis",p=h.get(["axisPointer","type"])==="cross",g=l.getTooltipAxes(h.get(["axisPointer","axis"]));(f||p)&&oe(g.baseAxes,va(b,p?"cross":!0,f)),p&&oe(g.otherAxes,va(b,"cross",!1))}function b(w,_,k){var T=k.model.getModel("axisPointer",n),D=T.get("show");if(!(!D||D==="auto"&&!w&&!U3(T))){_==null&&(_=T.get("triggerTooltip")),T=w?WNe(k,h,n,e,w,_):T;var I=T.get("snap"),O=T.get("triggerEmphasis"),P=ib(k.model),V=_||I||k.type==="category",G=a.axesInfo[P]={key:P,axis:k,coordSys:l,axisPointerModel:T,triggerTooltip:_,triggerEmphasis:O,involveSeries:V,snap:I,useHandle:U3(T),seriesModels:[],linkGroup:null};d[P]=G,a.seriesInvolved=a.seriesInvolved||V;var Q=YNe(i,k);if(Q!=null){var $=o[Q]||(o[Q]={axesInfo:{}});$.axesInfo[P]=G,$.mapper=i[Q].mapper,G.linkGroup=$}}}})}function WNe(a,e,t,r,n,i){var o=e.getModel("axisPointer"),l=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],c={};oe(l,function(f){c[f]=$t(o.get(f))}),c.snap=a.type!=="category"&&!!i,o.get("type")==="cross"&&(c.type="line");var d=c.label||(c.label={});if(d.show==null&&(d.show=!1),n==="cross"){var u=o.get(["label","show"]);if(d.show=u??!0,!i){var h=c.lineStyle=o.get("crossStyle");h&&Kt(d,h.textStyle)}}return a.model.getModel("axisPointer",new za(c,t,r))}function $Ne(a,e){e.eachSeries(function(t){var r=t.coordinateSystem,n=t.get(["tooltip","trigger"],!0),i=t.get(["tooltip","show"],!0);!r||!r.model||n==="none"||n===!1||n==="item"||i===!1||t.get(["axisPointer","show"],!0)===!1||oe(a.coordSysAxesInfo[ib(r.model)],function(o){var l=o.axis;r.getAxis(l.dim)===l&&(o.seriesModels.push(t),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=t.getData().count())})})}function YNe(a,e){for(var t=e.model,r=e.dim,n=0;n<a.length;n++){var i=a[n]||{};if(C5(i[r+"AxisId"],t.id)||C5(i[r+"AxisIndex"],t.componentIndex)||C5(i[r+"AxisName"],t.name))return n}}function C5(a,e){return a==="all"||rt(a)&&ya(a,e)>=0||a===e}function qNe(a){var e=UM(a);if(e){var t=e.axisPointerModel,r=e.axis.scale,n=t.option,i=t.get("status"),o=t.get("value");o!=null&&(o=r.parse(o));var l=U3(t);i==null&&(n.status=l?"show":"hide");var c=r.getExtent().slice();c[0]>c[1]&&c.reverse(),(o==null||o>c[1])&&(o=c[1]),o<c[0]&&(o=c[0]),n.value=o,l&&(n.status=e.axis.scale.isBlank()?"hide":"show")}}function UM(a){var e=(a.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[ib(a)]}function XNe(a){var e=UM(a);return e&&e.axisPointerModel}function U3(a){return!!a.get(["handle","show"])}function ib(a){return a.type+"||"+a.id}var P7={},L0=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n,i){this.axisPointerClass&&qNe(t),a.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,n,!0)},e.prototype.updateAxisPointer=function(t,r,n,i){this._doUpdateAxisPointerClass(t,n,!1)},e.prototype.remove=function(t,r){var n=this._axisPointer;n&&n.remove(r)},e.prototype.dispose=function(t,r){this._disposeAxisPointer(r),a.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,r,n){var i=e.getAxisPointerClass(this.axisPointerClass);if(i){var o=XNe(t);o?(this._axisPointer||(this._axisPointer=new i)).render(t,o,r,n):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,r){P7[t]=r},e.getAxisPointerClass=function(t){return t&&P7[t]},e.type="axis",e})(tn),G3=Ea();function _X(a,e,t,r){var n=t.axis;if(!n.scale.isBlank()){var i=t.getModel("splitArea"),o=i.getModel("areaStyle"),l=o.get("color"),c=r.coordinateSystem.getRect(),d=n.getTicksCoords({tickModel:i,clamp:!0,breakTicks:"none",pruneByBreak:"preserve_extent_bound"});if(d.length){var u=l.length,h=G3(a).splitAreaColors,f=Rt(),p=0;if(h)for(var g=0;g<d.length;g++){var b=h.get(d[g].tickValue);if(b!=null){p=(b+(u-1)*g)%u;break}}var w=n.toGlobalCoord(d[0].coord),_=o.getAreaStyle();l=rt(l)?l:[l];for(var g=1;g<d.length;g++){var k=n.toGlobalCoord(d[g].coord),T=void 0,D=void 0,I=void 0,O=void 0;n.isHorizontal()?(T=w,D=c.y,I=k-T,O=c.height,w=T+I):(T=c.x,D=w,I=c.width,O=k-D,w=D+O);var P=d[g-1].tickValue;P!=null&&f.set(P,p),e.add(new Ta({anid:P!=null?"area_"+P:null,shape:{x:T,y:D,width:I,height:O},style:Kt({fill:l[p]},_),autoBatch:!0,silent:!0})),p=(p+1)%u}G3(a).splitAreaColors=f}}}function NX(a){G3(a).splitAreaColors=null}var ZNe=["splitArea","splitLine","minorSplitLine","breakArea"],jX=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,r,n,i){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Gt,this.group.add(this._axisGroup),!!tb(t)){this._axisGroup.add(t.axis.axisBuilder.group),oe(ZNe,function(c){t.get([c,"show"])&&KNe[c](this,this._axisGroup,t,t.getCoordSysModel(),n)},this);var l=i&&i.type==="changeAxisOrder"&&i.isInitSort;l||Eb(o,this._axisGroup,t),a.prototype.render.call(this,t,r,n,i)}},e.prototype.remove=function(){NX(this)},e.type="cartesianAxis",e})(L0),KNe={splitLine:function(a,e,t,r,n){var i=t.axis;if(!i.scale.isBlank()){var o=t.getModel("splitLine"),l=o.getModel("lineStyle"),c=l.get("color"),d=o.get("showMinLine")!==!1,u=o.get("showMaxLine")!==!1;c=rt(c)?c:[c];for(var h=r.coordinateSystem.getRect(),f=i.isHorizontal(),p=0,g=i.getTicksCoords({tickModel:o,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),b=[],w=[],_=l.getLineStyle(),k=0;k<g.length;k++){var T=i.toGlobalCoord(g[k].coord);if(!(k===0&&!d||k===g.length-1&&!u)){var D=g[k].tickValue;f?(b[0]=T,b[1]=h.y,w[0]=T,w[1]=h.y+h.height):(b[0]=h.x,b[1]=T,w[0]=h.x+h.width,w[1]=T);var I=p++%c.length,O=new qn({anid:D!=null?"line_"+D:null,autoBatch:!0,shape:{x1:b[0],y1:b[1],x2:w[0],y2:w[1]},style:Kt({stroke:c[I]},_),silent:!0});Cx(O.shape,_.lineWidth),e.add(O)}}}},minorSplitLine:function(a,e,t,r,n){var i=t.axis,o=t.getModel("minorSplitLine"),l=o.getModel("lineStyle"),c=r.coordinateSystem.getRect(),d=i.isHorizontal(),u=i.getMinorTicksCoords();if(u.length)for(var h=[],f=[],p=l.getLineStyle(),g=0;g<u.length;g++)for(var b=0;b<u[g].length;b++){var w=i.toGlobalCoord(u[g][b].coord);d?(h[0]=w,h[1]=c.y,f[0]=w,f[1]=c.y+c.height):(h[0]=c.x,h[1]=w,f[0]=c.x+c.width,f[1]=w);var _=new qn({anid:"minor_line_"+u[g][b].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:f[0],y2:f[1]},style:p,silent:!0});Cx(_.shape,p.lineWidth),e.add(_)}},splitArea:function(a,e,t,r,n){_X(a,e,t,r)},breakArea:function(a,e,t,r,n){var i=Ub(),o=t.axis.scale;i&&o.type!=="ordinal"&&i.rectCoordBuildBreakAxis(e,a,t,r.coordinateSystem.getRect(),n)}},SX=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e})(jX),QNe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=SX.type,t}return e.type="yAxis",e})(jX),JNe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,r){this.group.removeAll(),t.get("show")&&this.group.add(new Ta({shape:t.coordinateSystem.getRect(),style:Kt({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e})(tn),B7={offset:0};function kX(a){a.registerComponentView(JNe),a.registerComponentModel(oNe),a.registerCoordinateSystem("cartesian2d",PNe),Rx(a,"x",P3,B7),Rx(a,"y",P3,B7),a.registerComponentView(SX),a.registerComponentView(QNe),a.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function eje(a,e){var t=a.coordinateSystem,r=t&&t.type,n=t&&t.getBaseAxis&&t.getBaseAxis(),i=n&&n.scale&&n.scale.type,o=r==="cartesian2d"&&i==="ordinal"||r==="single",l=e.model.get("jitter")>0;return o&&l}var tje=Ea();function z7(a,e,t,r){if(a instanceof dX){var n=a.scale.type;if(n!=="category"&&n!=="ordinal")return t}var i=a.model,o=i.get("jitter"),l=i.get("jitterOverlap"),c=i.get("jitterMargin")||0,d=a.scale.type==="ordinal"?a.getBandWidth():null;return o>0?l?CX(t,o,d,r):aje(a,e,t,r,o,c):t}function CX(a,e,t,r){if(t===null)return a+(Math.random()-.5)*e;var n=t-r*2,i=Math.min(Math.max(0,e),n);return a+(Math.random()-.5)*i}function aje(a,e,t,r,n,i){var o=tje(a);o.items||(o.items=[]);var l=o.items,c=F7(l,e,t,r,n,i,1),d=F7(l,e,t,r,n,i,-1),u=Math.abs(c-t)<Math.abs(d-t)?c:d,h=a.scale.type==="ordinal"?a.getBandWidth():null,f=Math.abs(u-t);return f>n/2||h&&f>h/2-r?CX(t,n,h,r):(l.push({fixedCoord:e,floatCoord:u,r}),u)}function F7(a,e,t,r,n,i,o){for(var l=t,c=0;c<a.length;c++){var d=a[c],u=e-d.fixedCoord,h=l-d.floatCoord,f=u*u+h*h,p=r+d.r+i;if(f<p*p){var g=d.floatCoord+Math.sqrt(p*p-u*u)*o;if(Math.abs(g-t)>n/2)return Number.MAX_VALUE;if(o===1&&g>l||o===-1&&g<l){l=g,c=-1;continue}}}return l}function rje(a){a.eachSeriesByType("scatter",function(e){var t=e.coordinateSystem;if(t&&(t.type==="cartesian2d"||t.type==="single")){var r=t.getBaseAxis?t.getBaseAxis():null,n=r&&eje(e,r);if(n){var i=e.getData();i.each(function(o){var l=r.dim,c=r.orient,d=c==="horizontal"&&r.type!=="category"||c==="vertical"&&r.type==="category",u=i.getItemLayout(o),h=i.getItemVisual(o,"symbolSize"),f=h instanceof Array?(h[1]+h[0])/2:h;if(l==="y"||l==="single"&&d){var p=z7(r,u[0],u[1],f/2);i.setItemLayout(o,[u[0],p])}else if(l==="x"||l==="single"&&!d){var p=z7(r,u[1],u[0],f/2);i.setItemLayout(o,[p,u[1]])}})}}})}function nje(a){Sa(kX),a.registerSeriesModel(aNe),a.registerChartView(sNe),a.registerLayout(Hb("scatter"))}function ije(a){a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,rje)}function sje(a){a.eachSeriesByType("radar",function(e){var t=e.getData(),r=[],n=e.coordinateSystem;if(n){var i=n.getIndicatorAxes();oe(i,function(o,l){t.each(t.mapDimension(i[l].dim),function(c,d){r[d]=r[d]||[];var u=n.dataToPoint(c,l);r[d][l]=V7(u)?u:H7(n)})}),t.each(function(o){var l=C0(r[o],function(c){return V7(c)})||H7(n);r[o].push(l.slice()),t.setItemLayout(o,r[o])})}})}function V7(a){return!isNaN(a[0])&&!isNaN(a[1])}function H7(a){return[a.cx,a.cy]}function oje(a){var e=a.polar;if(e){rt(e)||(e=[e]);var t=[];oe(e,function(r,n){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),a.radar=a.radar||[],rt(a.radar)||(a.radar=[a.radar]),a.radar.push(r)):t.push(r)}),a.polar=t}oe(a.series,function(r){r&&r.type==="radar"&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var lje=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=t.coordinateSystem,o=this.group,l=t.getData(),c=this._data;function d(f,p){var g=f.getItemVisual(p,"symbol")||"circle";if(g!=="none"){var b=Jx(f.getItemVisual(p,"symbolSize")),w=ei(g,-1,-1,2,2),_=f.getItemVisual(p,"symbolRotate")||0;return w.attr({style:{strokeNoScale:!0},z2:100,scaleX:b[0]/2,scaleY:b[1]/2,rotation:_*Math.PI/180||0}),w}}function u(f,p,g,b,w,_){g.removeAll();for(var k=0;k<p.length-1;k++){var T=d(b,w);T&&(T.__dimIdx=k,f[k]?(T.setPosition(f[k]),M0[_?"initProps":"updateProps"](T,{x:p[k][0],y:p[k][1]},t,w)):T.setPosition(p[k]),g.add(T))}}function h(f){return it(f,function(p){return[i.cx,i.cy]})}l.diff(c).add(function(f){var p=l.getItemLayout(f);if(p){var g=new us,b=new $i,w={shape:{points:p}};g.shape.points=h(p),b.shape.points=h(p),en(g,w,t,f),en(b,w,t,f);var _=new Gt,k=new Gt;_.add(b),_.add(g),_.add(k),u(b.shape.points,p,k,l,f,!0),l.setItemGraphicEl(f,_)}}).update(function(f,p){var g=c.getItemGraphicEl(p),b=g.childAt(0),w=g.childAt(1),_=g.childAt(2),k={shape:{points:l.getItemLayout(f)}};k.shape.points&&(u(b.shape.points,k.shape.points,_,l,f,!1),nl(w),nl(b),rr(b,k,t),rr(w,k,t),l.setItemGraphicEl(f,g))}).remove(function(f){o.remove(c.getItemGraphicEl(f))}).execute(),l.eachItemGraphicEl(function(f,p){var g=l.getItemModel(p),b=f.childAt(0),w=f.childAt(1),_=f.childAt(2),k=l.getItemVisual(p,"style"),T=k.fill;o.add(f),b.useStyle(Kt(g.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:T})),hi(b,g,"lineStyle"),hi(w,g,"areaStyle");var D=g.getModel("areaStyle"),I=D.isEmpty()&&D.parentModel.isEmpty();w.ignore=I,oe(["emphasis","select","blur"],function(P){var V=g.getModel([P,"areaStyle"]),G=V.isEmpty()&&V.parentModel.isEmpty();w.ensureState(P).ignore=G&&I;var Q=g.getModel([P,"lineStyle"]).getLineStyle();b.ensureState(P).style=Q;var $=V.getAreaStyle();w.ensureState(P).style=$;var ae=g.getModel([P,"itemStyle"]).getItemStyle();_.eachChild(function(J){J.ensureState(P).style=$t(ae)})}),w.useStyle(Kt(g.getModel("areaStyle").getAreaStyle(),{fill:T,opacity:.7,decal:k.decal}));var O=g.getModel("emphasis");_.eachChild(function(P){if(P instanceof Li){var V=P.style;P.useStyle(Je({image:V.image,x:V.x,y:V.y,width:V.width,height:V.height},k))}else P.useStyle(k),P.setColor(T),P.style.strokeNoScale=!0;var G=l.getStore().get(l.getDimensionIndex(P.__dimIdx),p);(G==null||isNaN(G))&&(G=""),ji(P,fi(g),{labelFetcher:l.hostModel,labelDataIndex:p,labelDimIndex:P.__dimIdx,defaultText:G,inheritColor:T,defaultOpacity:k.opacity})}),on(f,O.get("focus"),O.get("blurScope"),O.get("disabled"))}),this._data=l},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e})(Mr),cje=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new rm(St(this.getData,this),St(this.getRawData,this))},e.prototype.getInitialData=function(t,r){return am(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,r,n){var i=this.getData(),o=this.coordinateSystem,l=o.getIndicatorAxes(),c=this.getData().getName(t),d=c===""?this.name:c,u=lY(this,t);return Jn("section",{header:d,sortBlocks:!0,blocks:it(l,function(h){var f=i.get(i.mapDimension(h.dim),t);return Jn("nameValue",{markerType:"subItem",markerColor:u,name:h.name,value:f,sortParam:f})})})},e.prototype.getTooltipPosition=function(t){if(t!=null){for(var r=this.getData(),n=this.coordinateSystem,i=r.getValues(it(n.dimensions,function(d){return r.mapDimension(d)}),t),o=0,l=i.length;o<l;o++)if(!isNaN(i[o])){var c=n.getIndicatorAxes();return n.coordToPoint(c[o].dataToCoord(i[o]),o)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e})(Fr),dg=cX.value;function ew(a,e){return Kt({show:e},a)}var dje=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),r=this.get("splitNumber"),n=this.get("scale"),i=this.get("axisLine"),o=this.get("axisTick"),l=this.get("axisLabel"),c=this.get("axisName"),d=this.get(["axisName","show"]),u=this.get(["axisName","formatter"]),h=this.get("axisNameGap"),f=this.get("triggerEvent"),p=it(this.get("indicator")||[],function(g){g.max!=null&&g.max>0&&!g.min?g.min=0:g.min!=null&&g.min<0&&!g.max&&(g.max=0);var b=c;g.color!=null&&(b=Kt({color:g.color},c));var w=_a($t(g),{boundaryGap:t,splitNumber:r,scale:n,axisLine:i,axisTick:o,axisLabel:l,name:g.text,showName:d,nameLocation:"end",nameGap:h,nameTextStyle:b,triggerEvent:f},!1);if(jt(u)){var _=w.name;w.name=u.replace("{value}",_??"")}else Ut(u)&&(w.name=u(w.name,w));var k=new za(w,null,this.ecModel);return ti(k,Bb.prototype),k.mainType="radar",k.componentIndex=this.componentIndex,k},this);this._indicatorModels=p},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"50%",startAngle:90,axisName:{show:!0,color:Fe.color.axisLabel},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:_a({lineStyle:{color:Fe.color.neutral20}},dg.axisLine),axisLabel:ew(dg.axisLabel,!1),axisTick:ew(dg.axisTick,!1),splitLine:ew(dg.splitLine,!0),splitArea:ew(dg.splitArea,!0),indicator:[]},e})(Oa),uje=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=this.group;i.removeAll(),this._buildAxes(t,n),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t,r){var n=t.coordinateSystem,i=n.getIndicatorAxes(),o=it(i,function(l){var c=l.model.get("showName")?l.name:"",d=new ks(l.model,r,{axisName:c,position:[n.cx,n.cy],rotation:l.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return d});oe(o,function(l){l.build(),this.group.add(l.group)},this)},e.prototype._buildSplitLineAndArea=function(t){var r=t.coordinateSystem,n=r.getIndicatorAxes();if(!n.length)return;var i=t.get("shape"),o=t.getModel("splitLine"),l=t.getModel("splitArea"),c=o.getModel("lineStyle"),d=l.getModel("areaStyle"),u=o.get("show"),h=l.get("show"),f=c.get("color"),p=d.get("color"),g=rt(f)?f:[f],b=rt(p)?p:[p],w=[],_=[];function k(F,W,K){var ee=K%W.length;return F[ee]=F[ee]||[],ee}if(i==="circle")for(var T=n[0].getTicksCoords(),D=r.cx,I=r.cy,O=0;O<T.length;O++){if(u){var P=k(w,g,O);w[P].push(new Ud({shape:{cx:D,cy:I,r:T[O].coord}}))}if(h&&O<T.length-1){var P=k(_,b,O);_[P].push(new Tb({shape:{cx:D,cy:I,r0:T[O].coord,r:T[O+1].coord}}))}}else for(var V,G=it(n,function(F,W){var K=F.getTicksCoords();return V=V==null?K.length-1:Math.min(K.length-1,V),it(K,function(ee){return r.coordToPoint(ee.coord,W)})}),Q=[],O=0;O<=V;O++){for(var $=[],ae=0;ae<n.length;ae++)$.push(G[ae][O]);if($[0]&&$.push($[0].slice()),u){var P=k(w,g,O);w[P].push(new $i({shape:{points:$}}))}if(h&&Q){var P=k(_,b,O-1);_[P].push(new us({shape:{points:$.concat(Q)}}))}Q=$.slice().reverse()}var J=c.getLineStyle(),U=d.getAreaStyle();oe(_,function(F,W){this.group.add(Ko(F,{style:Kt({stroke:"none",fill:b[W%b.length]},U),silent:!0}))},this),oe(w,function(F,W){this.group.add(Ko(F,{style:Kt({fill:"none",stroke:g[W%g.length]},J),silent:!0}))},this)},e.type="radar",e})(tn),hje=(function(a){Le(e,a);function e(t,r,n){var i=a.call(this,t,r,n)||this;return i.type="value",i.angle=0,i.name="",i}return e})(Ll),fje=(function(){function a(e,t,r){this.dimensions=[],this._model=e,this._indicatorAxes=it(e.getIndicatorModels(),function(n,i){var o="indicator_"+i,l=new hje(o,new zd);return l.name=n.get("name"),l.model=n,n.axis=l,this.dimensions.push(o),l},this),this.resize(e,r)}return a.prototype.getIndicatorAxes=function(){return this._indicatorAxes},a.prototype.dataToPoint=function(e,t){var r=this._indicatorAxes[t];return this.coordToPoint(r.dataToCoord(e),t)},a.prototype.coordToPoint=function(e,t){var r=this._indicatorAxes[t],n=r.angle,i=this.cx+e*Math.cos(n),o=this.cy-e*Math.sin(n);return[i,o]},a.prototype.pointToData=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,n=Math.sqrt(t*t+r*r);t/=n,r/=n;for(var i=Math.atan2(-r,t),o=1/0,l,c=-1,d=0;d<this._indicatorAxes.length;d++){var u=this._indicatorAxes[d],h=Math.abs(i-u.angle);h<o&&(l=u,c=d,o=h)}return[c,+(l&&l.coordToData(n))]},a.prototype.resize=function(e,t){var r=pi(e,t).refContainer,n=e.get("center"),i=Math.min(r.width,r.height)/2;this.cx=_t(n[0],r.width)+r.x,this.cy=_t(n[1],r.height)+r.y,this.startAngle=e.get("startAngle")*Math.PI/180;var o=e.get("radius");(jt(o)||Xa(o))&&(o=[0,o]),this.r0=_t(o[0],i),this.r=_t(o[1],i),oe(this._indicatorAxes,function(l,c){l.setExtent(this.r0,this.r);var d=this.startAngle+c*Math.PI*2/this._indicatorAxes.length;d=Math.atan2(Math.sin(d),Math.cos(d)),l.angle=d},this)},a.prototype.update=function(e,t){var r=this._indicatorAxes,n=this._model;oe(r,function(l){l.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(l,c){if(!(l.get("coordinateSystem")!=="radar"||e.getComponent("radar",l.get("radarIndex"))!==n)){var d=l.getData();oe(r,function(u){u.scale.unionExtentFromData(d,d.mapDimension(u.dim))})}},this);var i=n.get("splitNumber"),o=new zd;o.setExtent(0,i),o.setInterval(1),oe(r,function(l,c){yX(l.scale,l.model,o)})},a.prototype.convertToPixel=function(e,t,r){return console.warn("Not implemented."),null},a.prototype.convertFromPixel=function(e,t,r){return console.warn("Not implemented."),null},a.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},a.create=function(e,t){var r=[];return e.eachComponent("radar",function(n){var i=new a(n,e,t);r.push(i),n.coordinateSystem=i}),e.eachSeriesByType("radar",function(n){n.get("coordinateSystem")==="radar"&&(n.coordinateSystem=r[n.get("radarIndex")||0])}),r},a.dimensions=[],a})();function pje(a){a.registerCoordinateSystem("radar",fje),a.registerComponentModel(dje),a.registerComponentView(uje),a.registerVisual({seriesType:"radar",reset:function(e){var t=e.getData();t.each(function(r){t.setItemVisual(r,"legendIcon","roundRect")}),t.setVisual("legendIcon","roundRect")}})}function xje(a){Sa(pje),a.registerChartView(lje),a.registerSeriesModel(cje),a.registerLayout(sje),a.registerProcessor(tm("radar")),a.registerPreprocessor(oje)}var GM=Ea();function mje(a,e,t){GM(a)[e]=t}function gje(a,e,t){var r=GM(a),n=r[e];n===t&&(r[e]=null)}function U7(a,e){return!!GM(a)[e]}Lc({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Bn);var vje={axisPointer:1,tooltip:1,brush:1};function AX(a,e,t){var r=e.getComponentByElement(a.topTarget);if(!r||r===t||vje.hasOwnProperty(r.mainType))return!1;var n=r.coordinateSystem;if(!n||n.model===t)return!1;var i=_0(r),o=_0(t);return!((i.zlevel-o.zlevel||i.z-o.z)<=0)}var O0=(function(a){Le(e,a);function e(t){var r=a.call(this)||this;r._zr=t;var n=St(r._mousedownHandler,r),i=St(r._mousemoveHandler,r),o=St(r._mouseupHandler,r),l=St(r._mousewheelHandler,r),c=St(r._pinchHandler,r);return r.enable=function(d,u){var h=u.zInfo,f=_0(h.component),p=f.z,g=f.zlevel,b={component:h.component,z:p,zlevel:g,z2:Pt(h.z2,-1/0)},w=Je({},u.triggerInfo);this._opt=Kt(Je({},u),{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0,zInfoParsed:b,triggerInfo:w}),d==null&&(d=!0),(!this._enabled||this._controlType!==d)&&(this._enabled=!0,this.disable(),(d===!0||d==="move"||d==="pan")&&(hg(t,"mousedown",n,b),hg(t,"mousemove",i,b),hg(t,"mouseup",o,b)),(d===!0||d==="scale"||d==="zoom")&&(hg(t,"mousewheel",l,b),hg(t,"pinch",c,b)))},r.disable=function(){this._enabled=!1,fg(t,"mousedown",n),fg(t,"mousemove",i),fg(t,"mouseup",o),fg(t,"mousewheel",l),fg(t,"pinch",c)},r}return e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype._checkPointer=function(t,r,n){var i=this._opt,o=i.zInfoParsed;if(AX(t,i.api,o.component))return!1;var l=i.triggerInfo,c=l.roamTrigger,d=!1;return c==="global"&&(d=!0),d||(d=l.isInSelf(t,r,n)),d&&l.isInClip&&!l.isInClip(t,r,n)&&(d=!1),d},e.prototype._decideCursorStyle=function(t,r,n,i){var o=t.target;if(!o&&this._checkPointer(t,r,n))return"grab";if(i)return o&&o.cursor||"default"},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!(sO(t)||ug(t))){for(var r=t.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var n=t.offsetX,i=t.offsetY;this._checkPointer(t,n,i)&&(this._x=n,this._y=i,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){var r=this._zr;if(!(t.gestureEvent==="pinch"||U7(r,"globalPan")||ug(t))){var n=t.offsetX,i=t.offsetY;if(!this._dragging||!Xw("moveOnMouseMove",t,this._opt)){var o=this._decideCursorStyle(t,n,i,!1);o&&r.setCursorStyle(o);return}r.setCursorStyle("grabbing");var l=this._x,c=this._y,d=n-l,u=i-c;this._x=n,this._y=i,this._opt.preventDefaultMouseMove&&Rd(t.event),t.__ecRoamConsumed=!0,G7(this,"pan","moveOnMouseMove",t,{dx:d,dy:u,oldX:l,oldY:c,newX:n,newY:i,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){if(!ug(t)){var r=this._zr;if(!sO(t)){this._dragging=!1;var n=this._decideCursorStyle(t,t.offsetX,t.offsetY,!0);n&&r.setCursorStyle(n)}}},e.prototype._mousewheelHandler=function(t){if(!ug(t)){var r=Xw("zoomOnMouseWheel",t,this._opt),n=Xw("moveOnMouseWheel",t,this._opt),i=t.wheelDelta,o=Math.abs(i),l=t.offsetX,c=t.offsetY;if(!(i===0||!r&&!n)){if(r){var d=o>3?1.4:o>1?1.2:1.1,u=i>0?d:1/d;this._checkTriggerMoveZoom(this,"zoom","zoomOnMouseWheel",t,{scale:u,originX:l,originY:c,isAvailableBehavior:null})}if(n){var h=Math.abs(i),f=(i>0?1:-1)*(h>3?.4:h>1?.15:.05);this._checkTriggerMoveZoom(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:f,originX:l,originY:c,isAvailableBehavior:null})}}}},e.prototype._pinchHandler=function(t){if(!(U7(this._zr,"globalPan")||ug(t))){var r=t.pinchScale>1?1.1:1/1.1;this._checkTriggerMoveZoom(this,"zoom",null,t,{scale:r,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},e.prototype._checkTriggerMoveZoom=function(t,r,n,i,o){t._checkPointer(i,o.originX,o.originY)&&(Rd(i.event),i.__ecRoamConsumed=!0,G7(t,r,n,i,o))},e})(il);function ug(a){return a.__ecRoamConsumed}var bje=Ea();function RN(a){var e=bje(a);return e.roam=e.roam||{},e.uniform=e.uniform||{},e}function hg(a,e,t,r){for(var n=RN(a),i=n.roam,o=i[e]=i[e]||[],l=0;l<o.length;l++){var c=o[l].zInfoParsed;if((c.zlevel-r.zlevel||c.z-r.z||c.z2-r.z2)<=0)break}o.splice(l,0,{listener:t,zInfoParsed:r}),yje(a,e)}function fg(a,e,t){for(var r=RN(a),n=r.roam[e]||[],i=0;i<n.length;i++)if(n[i].listener===t){n.splice(i,1),n.length||wje(a,e);return}}function yje(a,e){var t=RN(a);t.uniform[e]||a.on(e,t.uniform[e]=function(r){var n=t.roam[e];if(n)for(var i=0;i<n.length;i++)n[i].listener(r)})}function wje(a,e){var t=RN(a),r=t.uniform;r[e]&&(a.off(e,r[e]),r[e]=null)}function G7(a,e,t,r,n){n.isAvailableBehavior=St(Xw,null,t,r),a.trigger(e,n)}function Xw(a,e,t){var r=t[a];return!a||r&&(!jt(r)||e.event[r+"Key"])}function WM(a,e,t){var r=a.target;r.x+=e,r.y+=t,r.dirty()}function $M(a,e,t,r){var n=a.target,i=a.zoomLimit,o=a.zoom=a.zoom||1;o*=e,o=YM(o,i);var l=o/a.zoom;a.zoom=o,MX(n,t,r,l),n.dirty()}function TX(a,e,t,r,n,i){var o=new Jt(0,0,0,0);r.enable(a.get("roam"),{api:e,zInfo:{component:a},triggerInfo:{roamTrigger:a.get("roamTrigger"),isInSelf:function(d,u,h){return o.copy(t.getBoundingRect()),o.applyTransform(t.getComputedTransform()),o.contain(u,h)},isInClip:function(d,u,h){return!i||i.contain(u,h)}}}),n.zoomLimit=a.get("scaleLimit");var l=a.coordinateSystem;n.zoom=l?l.getZoom():1;var c=a.subType+"Roam";r.off("pan").off("zoom").on("pan",function(d){WM(n,d.dx,d.dy),e.dispatchAction({seriesId:a.id,type:c,dx:d.dx,dy:d.dy})}).on("zoom",function(d){$M(n,d.scale,d.originX,d.originY),e.dispatchAction({seriesId:a.id,type:c,zoom:d.scale,originX:d.originX,originY:d.originY}),e.updateLabelLayout()})}function W7(a,e){return a.pointToProjected?a.pointToProjected(e):a.pointToData(e)}function LN(a,e,t){var r=a.getZoom(),n=a.getCenter(),i=e.zoom,o=a.projectedToPoint?a.projectedToPoint(n):a.dataToPoint(n);return e.dx!=null&&e.dy!=null&&(o[0]-=e.dx,o[1]-=e.dy,a.setCenter(W7(a,o))),i!=null&&(i=YM(r*i,t)/r,MX(a,e.originX,e.originY,i),a.updateTransform(),a.setCenter(W7(a,o)),a.setZoom(i*r)),{center:a.getCenter(),zoom:a.getZoom()}}function MX(a,e,t,r){a.x-=(e-a.x)*(r-1),a.y-=(t-a.y)*(r-1),a.scaleX*=r,a.scaleY*=r}function YM(a,e){if(e){var t=e.min||0,r=e.max||1/0;a=Math.max(Math.min(r,a),t)}return a}function EX(a){if(jt(a)){var e=new DOMParser;a=e.parseFromString(a,"text/xml")}var t=a;for(t.nodeType===9&&(t=t.firstChild);t.nodeName.toLowerCase()!=="svg"||t.nodeType!==1;)t=t.nextSibling;return t}var A5,u_={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},$7=Va(u_),h_={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Y7=Va(h_),_je=(function(){function a(){this._defs={},this._root=null}return a.prototype.parse=function(e,t){t=t||{};var r=EX(e);this._defsUsePending=[];var n=new Gt;this._root=n;var i=[],o=r.getAttribute("viewBox")||"",l=parseFloat(r.getAttribute("width")||t.width),c=parseFloat(r.getAttribute("height")||t.height);isNaN(l)&&(l=null),isNaN(c)&&(c=null),fo(r,n,null,!0,!1);for(var d=r.firstChild;d;)this._parseNode(d,n,i,null,!1,!1),d=d.nextSibling;Sje(this._defs,this._defsUsePending),this._defsUsePending=[];var u,h;if(o){var f=ON(o);f.length>=4&&(u={x:parseFloat(f[0]||0),y:parseFloat(f[1]||0),width:parseFloat(f[2]),height:parseFloat(f[3])})}if(u&&l!=null&&c!=null&&(h=IX(u,{x:0,y:0,width:l,height:c}),!t.ignoreViewBox)){var p=n;n=new Gt,n.add(p),p.scaleX=p.scaleY=h.scale,p.x=h.x,p.y=h.y}return!t.ignoreRootClip&&l!=null&&c!=null&&n.setClipPath(new Ta({shape:{x:0,y:0,width:l,height:c}})),{root:n,width:l,height:c,viewBoxRect:u,viewBoxTransform:h,named:i}},a.prototype._parseNode=function(e,t,r,n,i,o){var l=e.nodeName.toLowerCase(),c,d=n;if(l==="defs"&&(i=!0),l==="text"&&(o=!0),l==="defs"||l==="switch")c=t;else{if(!i){var u=A5[l];if(u&&Dt(A5,l)){c=u.call(this,e,t);var h=e.getAttribute("name");if(h){var f={name:h,namedFrom:null,svgNodeTagLower:l,el:c};r.push(f),l==="g"&&(d=f)}else n&&r.push({name:n.name,namedFrom:n,svgNodeTagLower:l,el:c});t.add(c)}}var p=q7[l];if(p&&Dt(q7,l)){var g=p.call(this,e),b=e.getAttribute("id");b&&(this._defs[b]=g)}}if(c&&c.isGroup)for(var w=e.firstChild;w;)w.nodeType===1?this._parseNode(w,c,r,d,i,o):w.nodeType===3&&o&&this._parseText(w,c),w=w.nextSibling},a.prototype._parseText=function(e,t){var r=new kx({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Vo(t,r),fo(e,r,this._defsUsePending,!1,!1),Nje(r,t);var n=r.style,i=n.fontSize;i&&i<9&&(n.fontSize=9,r.scaleX*=i/9,r.scaleY*=i/9);var o=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");n.font=o;var l=r.getBoundingRect();return this._textX+=l.width,t.add(r),r},a.internalField=(function(){A5={g:function(e,t){var r=new Gt;return Vo(t,r),fo(e,r,this._defsUsePending,!1,!1),r},rect:function(e,t){var r=new Ta;return Vo(t,r),fo(e,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(e,t){var r=new Ud;return Vo(t,r),fo(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),r.silent=!0,r},line:function(e,t){var r=new qn;return Vo(t,r),fo(e,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(e,t){var r=new vN;return Vo(t,r),fo(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(e,t){var r=e.getAttribute("points"),n;r&&(n=K7(r));var i=new us({shape:{points:n||[]},silent:!0});return Vo(t,i),fo(e,i,this._defsUsePending,!1,!1),i},polyline:function(e,t){var r=e.getAttribute("points"),n;r&&(n=K7(r));var i=new $i({shape:{points:n||[]},silent:!0});return Vo(t,i),fo(e,i,this._defsUsePending,!1,!1),i},image:function(e,t){var r=new Li;return Vo(t,r),fo(e,r,this._defsUsePending,!1,!1),r.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),r.silent=!0,r},text:function(e,t){var r=e.getAttribute("x")||"0",n=e.getAttribute("y")||"0",i=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(i),this._textY=parseFloat(n)+parseFloat(o);var l=new Gt;return Vo(t,l),fo(e,l,this._defsUsePending,!1,!0),l},tspan:function(e,t){var r=e.getAttribute("x"),n=e.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),n!=null&&(this._textY=parseFloat(n));var i=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0",l=new Gt;return Vo(t,l),fo(e,l,this._defsUsePending,!1,!0),this._textX+=parseFloat(i),this._textY+=parseFloat(o),l},path:function(e,t){var r=e.getAttribute("d")||"",n=YW(r);return Vo(t,n),fo(e,n,this._defsUsePending,!1,!1),n.silent=!0,n}}})(),a})(),q7={lineargradient:function(a){var e=parseInt(a.getAttribute("x1")||"0",10),t=parseInt(a.getAttribute("y1")||"0",10),r=parseInt(a.getAttribute("x2")||"10",10),n=parseInt(a.getAttribute("y2")||"0",10),i=new Yx(e,t,r,n);return X7(a,i),Z7(a,i),i},radialgradient:function(a){var e=parseInt(a.getAttribute("cx")||"0",10),t=parseInt(a.getAttribute("cy")||"0",10),r=parseInt(a.getAttribute("r")||"0",10),n=new KW(e,t,r);return X7(a,n),Z7(a,n),n}};function X7(a,e){var t=a.getAttribute("gradientUnits");t==="userSpaceOnUse"&&(e.global=!0)}function Z7(a,e){for(var t=a.firstChild;t;){if(t.nodeType===1&&t.nodeName.toLocaleLowerCase()==="stop"){var r=t.getAttribute("offset"),n=void 0;r&&r.indexOf("%")>0?n=parseInt(r,10)/100:r?n=parseFloat(r):n=0;var i={};DX(t,i,i);var o=i.stopColor||t.getAttribute("stop-color")||"#000000",l=i.stopOpacity||t.getAttribute("stop-opacity");if(l){var c=qs(o),d=c&&c[3];d&&(c[3]*=sh(l),o=yc(c,"rgba"))}e.colorStops.push({offset:n,color:o})}t=t.nextSibling}}function Vo(a,e){a&&a.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),Kt(e.__inheritedStyle,a.__inheritedStyle))}function K7(a){for(var e=ON(a),t=[],r=0;r<e.length;r+=2){var n=parseFloat(e[r]),i=parseFloat(e[r+1]);t.push([n,i])}return t}function fo(a,e,t,r,n){var i=e,o=i.__inheritedStyle=i.__inheritedStyle||{},l={};a.nodeType===1&&(Aje(a,e),DX(a,o,l),r||Tje(a,o,l)),i.style=i.style||{},o.fill!=null&&(i.style.fill=Q7(i,"fill",o.fill,t)),o.stroke!=null&&(i.style.stroke=Q7(i,"stroke",o.stroke,t)),oe(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(c){o[c]!=null&&(i.style[c]=parseFloat(o[c]))}),oe(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(c){o[c]!=null&&(i.style[c]=o[c])}),n&&(i.__selfStyle=l),o.lineDash&&(i.style.lineDash=it(ON(o.lineDash),function(c){return parseFloat(c)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(i.invisible=!0),o.display==="none"&&(i.ignore=!0)}function Nje(a,e){var t=e.__selfStyle;if(t){var r=t.textBaseline,n=r;!r||r==="auto"||r==="baseline"?n="alphabetic":r==="before-edge"||r==="text-before-edge"?n="top":r==="after-edge"||r==="text-after-edge"?n="bottom":(r==="central"||r==="mathematical")&&(n="middle"),a.style.textBaseline=n}var i=e.__inheritedStyle;if(i){var o=i.textAlign,l=o;o&&(o==="middle"&&(l="center"),a.style.textAlign=l)}}var jje=/^url\(\s*#(.*?)\)/;function Q7(a,e,t,r){var n=t&&t.match(jje);if(n){var i=Jo(n[1]);r.push([a,e,i]);return}return t==="none"&&(t=null),t}function Sje(a,e){for(var t=0;t<e.length;t++){var r=e[t];r[0].style[r[1]]=a[r[2]]}}var kje=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function ON(a){return a.match(kje)||[]}var Cje=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,T5=Math.PI/180;function Aje(a,e){var t=a.getAttribute("transform");if(t){t=t.replace(/,/g," ");var r=[],n=null;t.replace(Cje,function(h,f,p){return r.push(f,p),""});for(var i=r.length-1;i>0;i-=2){var o=r[i],l=r[i-1],c=ON(o);switch(n=n||Ii(),l){case"translate":Cc(n,n,[parseFloat(c[0]),parseFloat(c[1]||"0")]);break;case"scale":DT(n,n,[parseFloat(c[0]),parseFloat(c[1]||c[0])]);break;case"rotate":Ch(n,n,-parseFloat(c[0])*T5,[parseFloat(c[1]||"0"),parseFloat(c[2]||"0")]);break;case"skewX":var d=Math.tan(parseFloat(c[0])*T5);bc(n,[1,0,d,1,0,0],n);break;case"skewY":var u=Math.tan(parseFloat(c[0])*T5);bc(n,[1,u,0,1,0,0],n);break;case"matrix":n[0]=parseFloat(c[0]),n[1]=parseFloat(c[1]),n[2]=parseFloat(c[2]),n[3]=parseFloat(c[3]),n[4]=parseFloat(c[4]),n[5]=parseFloat(c[5]);break}}e.setLocalTransform(n)}}var J7=/([^\s:;]+)\s*:\s*([^:;]+)/g;function DX(a,e,t){var r=a.getAttribute("style");if(r){J7.lastIndex=0;for(var n;(n=J7.exec(r))!=null;){var i=n[1],o=Dt(u_,i)?u_[i]:null;o&&(e[o]=n[2]);var l=Dt(h_,i)?h_[i]:null;l&&(t[l]=n[2])}}}function Tje(a,e,t){for(var r=0;r<$7.length;r++){var n=$7[r],i=a.getAttribute(n);i!=null&&(e[u_[n]]=i)}for(var r=0;r<Y7.length;r++){var n=Y7[r],i=a.getAttribute(n);i!=null&&(t[h_[n]]=i)}}function IX(a,e){var t=e.width/a.width,r=e.height/a.height,n=Math.min(t,r);return{scale:n,x:-(a.x+a.width/2)*n+(e.x+e.width/2),y:-(a.y+a.height/2)*n+(e.y+e.height/2)}}function Mje(a,e){var t=new _je;return t.parse(a,e)}var Eje=Rt(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Dje=(function(){function a(e,t){this.type="geoSVG",this._usedGraphicMap=Rt(),this._freedGraphics=[],this._mapName=e,this._parsedXML=EX(t)}return a.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=Rje(e.named),r=t.regions,n=t.regionsMap;this._regions=r,this._regionsMap=n}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},a.prototype._buildGraphic=function(e){var t,r;try{t=e&&Mje(e,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=t.root,cs(r!=null)}catch(w){throw new Error(`Invalid svg format
`+w.message)}var n=new Gt;n.add(r),n.isGeoSVGGraphicRoot=!0;var i=t.width,o=t.height,l=t.viewBoxRect,c=this._boundingRect;if(!c){var d=void 0,u=void 0,h=void 0,f=void 0;if(i!=null?(d=0,h=i):l&&(d=l.x,h=l.width),o!=null?(u=0,f=o):l&&(u=l.y,f=l.height),d==null||u==null){var p=r.getBoundingRect();d==null&&(d=p.x,h=p.width),u==null&&(u=p.y,f=p.height)}c=this._boundingRect=new Jt(d,u,h,f)}if(l){var g=IX(l,c);r.scaleX=r.scaleY=g.scale,r.x=g.x,r.y=g.y}n.setClipPath(new Ta({shape:c.plain()}));var b=[];return oe(t.named,function(w){Eje.get(w.svgNodeTagLower)!=null&&(b.push(w),Ije(w.el))}),{root:n,boundingRect:c,named:b}},a.prototype.useGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,r),r)},a.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);r&&(t.removeKey(e),this._freedGraphics.push(r))},a})();function Ije(a){a.silent=!1,a.isGroup&&a.traverse(function(e){e.silent=!1})}function Rje(a){var e=[],t=Rt();return oe(a,function(r){if(r.namedFrom==null){var n=new Xwe(r.name,r.el);e.push(n),t.set(r.name,n)}}),{regions:e,regionsMap:t}}var W3=[126,25],eB="",If=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var Af=0;Af<If.length;Af++)for(var Tp=0;Tp<If[Af].length;Tp++)If[Af][Tp][0]/=10.5,If[Af][Tp][1]/=-10.5/.75,If[Af][Tp][0]+=W3[0],If[Af][Tp][1]+=W3[1];function Lje(a,e){if(a==="china"){for(var t=0;t<e.length;t++)if(e[t].name===eB)return;e.push(new xq(eB,it(If,function(r){return{type:"polygon",exterior:r}}),W3))}}var Oje={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function Pje(a,e){if(a==="china"){var t=Oje[e.name];if(t){var r=e.getCenter();r[0]+=t[0]/10.5,r[1]+=-t[1]/(10.5/.75),e.setCenter(r)}}}var Bje=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function zje(a,e){a==="china"&&e.name===""&&e.geometries.push({type:"polygon",exterior:Bje[0]})}var Fje="name",Vje=(function(){function a(e,t,r){this.type="geoJSON",this._parsedMap=Rt(),this._mapName=e,this._specialAreas=r,this._geoJSON=Uje(t)}return a.prototype.load=function(e,t){t=t||Fje;var r=this._parsedMap.get(t);if(!r){var n=this._parseToRegions(t);r=this._parsedMap.set(t,{regions:n,boundingRect:Hje(n)})}var i=Rt(),o=[];return oe(r.regions,function(l){var c=l.name;e&&Dt(e,c)&&(l=l.cloneShallow(c=e[c])),o.push(l),i.set(c,l)}),{regions:o,boundingRect:r.boundingRect||new Jt(0,0,0,0),regionsMap:i}},a.prototype._parseToRegions=function(e){var t=this._mapName,r=this._geoJSON,n;try{n=r?Kwe(r,e):[]}catch(i){throw new Error(`Invalid geoJson format
`+i.message)}return Lje(t,n),oe(n,function(i){var o=i.name;Pje(t,i),zje(t,i);var l=this._specialAreas&&this._specialAreas[o];l&&i.transformTo(l.left,l.top,l.width,l.height)},this),n},a.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},a})();function Hje(a){for(var e,t=0;t<a.length;t++){var r=a[t].getBoundingRect();e=e||r.clone(),e.union(r)}return e}function Uje(a){return jt(a)?typeof JSON<"u"&&JSON.parse?JSON.parse(a):new Function("return ("+a+");")():a}var pg=Rt();const Fd={registerMap:function(a,e,t){if(e.svg){var r=new Dje(a,e.svg);pg.set(a,r)}else{var n=e.geoJson||e.geoJSON;n&&!e.features?t=e.specialAreas:n=e;var r=new Vje(a,n,t);pg.set(a,r)}},getGeoResource:function(a){return pg.get(a)},getMapForUser:function(a){var e=pg.get(a);return e&&e.type==="geoJSON"&&e.getMapForUser()},load:function(a,e,t){var r=pg.get(a);if(r)return r.load(e,t)}};var qM=["rect","circle","line","ellipse","polygon","polyline","path"],Gje=Rt(qM),Wje=Rt(qM.concat(["g"])),$je=Rt(qM.concat(["g"])),RX=Ea();function tw(a){var e=a.getItemStyle(),t=a.get("areaColor");return t!=null&&(e.fill=t),e}function tB(a){var e=a.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var LX=(function(){function a(e){var t=this.group=new Gt,r=this._transformGroup=new Gt;t.add(r),this.uid=Zx("ec_map_draw"),this._controller=new O0(e.getZr()),this._controllerHost={target:r},r.add(this._regionsGroup=new Gt),r.add(this._svgGroup=new Gt)}return a.prototype.draw=function(e,t,r,n,i){var o=e.mainType==="geo",l=e.getData&&e.getData();o&&t.eachComponent({mainType:"series",subType:"map"},function(T){!l&&T.getHostGeoModel()===e&&(l=T.getData())});var c=e.coordinateSystem,d=this._regionsGroup,u=this._transformGroup,h=c.getTransformInfo(),f=h.raw,p=h.roam,g=!d.childAt(0)||i,b=e.getShallow("clip",!0),w;b?(w=c.getViewRect().clone(),this.group.setClipPath(new Ta({shape:w.clone()}))):this.group.removeClipPath(),g?(u.x=p.x,u.y=p.y,u.scaleX=p.scaleX,u.scaleY=p.scaleY,u.dirty()):rr(u,p,e);var _=l&&l.getVisual("visualMeta")&&l.getVisual("visualMeta").length>0,k={api:r,geo:c,mapOrGeoModel:e,data:l,isVisualEncodedByVisualMap:_,isGeo:o,transformInfoRaw:f};c.resourceType==="geoJSON"?this._buildGeoJSON(k):c.resourceType==="geoSVG"&&this._buildSVG(k),this._updateController(e,w,t,r),this._updateMapSelectHandler(e,d,r,n)},a.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=Rt(),r=Rt(),n=this._regionsGroup,i=e.transformInfoRaw,o=e.mapOrGeoModel,l=e.data,c=e.geo.projection,d=c&&c.stream;function u(p,g){return g&&(p=g(p)),p&&[p[0]*i.scaleX+i.x,p[1]*i.scaleY+i.y]}function h(p){for(var g=[],b=!d&&c&&c.project,w=0;w<p.length;++w){var _=u(p[w],b);_&&g.push(_)}return g}function f(p){return{shape:{points:h(p)}}}n.removeAll(),oe(e.geo.regions,function(p){var g=p.name,b=t.get(g),w=r.get(g)||{},_=w.dataIdx,k=w.regionModel;if(!b){b=t.set(g,new Gt),n.add(b),_=l?l.indexOfName(g):null,k=e.isGeo?o.getRegionModel(g):l?l.getItemModel(_):null;var T=k.get("silent",!0);T!=null&&(b.silent=T),r.set(g,{dataIdx:_,regionModel:k})}var D=[],I=[];oe(p.geometries,function(V){if(V.type==="polygon"){var G=[V.exterior].concat(V.interiors||[]);d&&(G=oB(G,d)),oe(G,function($){D.push(new us(f($)))})}else{var Q=V.points;d&&(Q=oB(Q,d,!0)),oe(Q,function($){I.push(new $i(f($)))})}});var O=u(p.getCenter(),c&&c.project);function P(V,G){if(V.length){var Q=new yN({culling:!0,segmentIgnoreThreshold:1,shape:{paths:V}});b.add(Q),aB(e,Q,_,k),rB(e,Q,g,k,o,_,O),G&&(tB(Q),oe(Q.states,tB))}}P(D),P(I,!0)}),t.each(function(p,g){var b=r.get(g),w=b.dataIdx,_=b.regionModel;nB(e,p,g,_,o,w),iB(e,p,g,_,o),sB(e,p,g,_,o)},this)},a.prototype._buildSVG=function(e){var t=e.geo.map,r=e.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var n=this._svgDispatcherMap=Rt(),i=!1;oe(this._svgGraphicRecord.named,function(o){var l=o.name,c=e.mapOrGeoModel,d=e.data,u=o.svgNodeTagLower,h=o.el,f=d?d.indexOfName(l):null,p=c.getRegionModel(l);Gje.get(u)!=null&&h instanceof rl&&aB(e,h,f,p),h instanceof rl&&(h.culling=!0);var g=p.get("silent",!0);if(g!=null&&(h.silent=g),h.z2EmphasisLift=0,!o.namedFrom&&($je.get(u)!=null&&rB(e,h,l,p,c,f,null),nB(e,h,l,p,c,f),iB(e,h,l,p,c),Wje.get(u)!=null)){var b=sB(e,h,l,p,c);b==="self"&&(i=!0);var w=n.get(l)||n.set(l,[]);w.push(h)}},this),this._enableBlurEntireSVG(i,e)},a.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var r=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),n=r.opacity;this._svgGraphicRecord.root.traverse(function(i){if(!i.isGroup){y0(i);var o=i.ensureState("blur").style||{};o.opacity==null&&n!=null&&(o.opacity=n),i.ensureState("emphasis")}})}},a.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},a.prototype.findHighDownDispatchers=function(e,t){if(e==null)return[];var r=t.coordinateSystem;if(r.resourceType==="geoJSON"){var n=this._regionsGroupByName;if(n){var i=n.get(e);return i?[i]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},a.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},a.prototype._useSVG=function(e){var t=Fd.getGeoResource(e);if(t&&t.type==="geoSVG"){var r=t.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=e}},a.prototype._freeSVG=function(){var e=this._svgMapName;if(e!=null){var t=Fd.getGeoResource(e);t&&t.type==="geoSVG"&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},a.prototype._updateController=function(e,t,r,n){var i=e.coordinateSystem,o=this._controller,l=this._controllerHost;l.zoomLimit=e.get("scaleLimit"),l.zoom=i.getZoom(),o.enable(e.get("roam")||!1,{api:n,zInfo:{component:e},triggerInfo:{roamTrigger:e.get("roamTrigger"),isInSelf:function(u,h,f){return i.containPoint([h,f])},isInClip:function(u,h,f){return!t||t.contain(h,f)}}});var c=e.mainType;function d(){var u={type:"geoRoam",componentType:c};return u[c+"Id"]=e.id,u}o.off("pan").on("pan",function(u){this._mouseDownFlag=!1,WM(l,u.dx,u.dy),n.dispatchAction(Je(d(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),o.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,$M(l,u.scale,u.originX,u.originY),n.dispatchAction(Je(d(),{totalZoom:l.zoom,zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this)},a.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var t=e.getTextContent();t&&(t.ignore=RX(t).ignore)})},a.prototype._updateMapSelectHandler=function(e,t,r,n){var i=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",function(){i._mouseDownFlag=!0}),t.on("click",function(o){i._mouseDownFlag&&(i._mouseDownFlag=!1)}))},a})();function aB(a,e,t,r){var n=r.getModel("itemStyle"),i=r.getModel(["emphasis","itemStyle"]),o=r.getModel(["blur","itemStyle"]),l=r.getModel(["select","itemStyle"]),c=tw(n),d=tw(i),u=tw(l),h=tw(o),f=a.data;if(f){var p=f.getItemVisual(t,"style"),g=f.getItemVisual(t,"decal");a.isVisualEncodedByVisualMap&&p.fill&&(c.fill=p.fill),g&&(c.decal=Tx(g,a.api))}e.setStyle(c),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=d,e.ensureState("select").style=u,e.ensureState("blur").style=h,y0(e)}function rB(a,e,t,r,n,i,o){var l=a.data,c=a.isGeo,d=l&&isNaN(l.get(l.mapDimension("value"),i)),u=l&&l.getItemLayout(i);if(c||d||u&&u.showLabel){var h=c?t:i,f=void 0;(!l||i>=0)&&(f=n);var p=o?{normal:{align:"center",verticalAlign:"middle"}}:null;ji(e,fi(r),{labelFetcher:f,labelDataIndex:h,defaultText:t},p);var g=e.getTextContent();if(g&&(RX(g).ignore=g.ignore,e.textConfig&&o)){var b=e.getBoundingRect().clone();e.textConfig.layoutRect=b,e.textConfig.position=[(o[0]-b.x)/b.width*100+"%",(o[1]-b.y)/b.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function nB(a,e,t,r,n,i){a.data?a.data.setItemGraphicEl(i,e):na(e).eventData={componentType:"geo",componentIndex:n.componentIndex,geoIndex:n.componentIndex,name:t,region:r&&r.option||{}}}function iB(a,e,t,r,n){a.data||Gd({el:e,componentModel:n,itemName:t,itemTooltipOption:r.get("tooltip")})}function sB(a,e,t,r,n){e.highDownSilentOnTouch=!!n.get("selectedMode");var i=r.getModel("emphasis"),o=i.get("focus");return on(e,o,i.get("blurScope"),i.get("disabled")),a.isGeo&&eve(e,n,t),o}function oB(a,e,t){var r=[],n;function i(){n=[]}function o(){n.length&&(r.push(n),n=[])}var l=e({polygonStart:i,polygonEnd:o,lineStart:i,lineEnd:o,point:function(c,d){isFinite(c)&&isFinite(d)&&n.push([c,d])},sphere:function(){}});return!t&&l.polygonStart(),oe(a,function(c){l.lineStart();for(var d=0;d<c.length;d++)l.point(c[d][0],c[d][1]);l.lineEnd()}),!t&&l.polygonEnd(),r}var Yje=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n,i){if(!(i&&i.type==="mapToggleSelect"&&i.from===this.uid)){var o=this.group;if(o.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&i&&i.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),i&&i.type==="geoRoam"&&i.componentType==="series"&&i.seriesId===t.id){var l=this._mapDraw;l&&o.add(l.group)}else if(t.needsDrawMap){var l=this._mapDraw||new LX(n);o.add(l.group),l.draw(t,r,n,this,i),this._mapDraw=l}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(t,r,n)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,r,n){var i=t.originalData,o=this.group;i.each(i.mapDimension("value"),function(l,c){if(!isNaN(l)){var d=i.getItemLayout(c);if(!(!d||!d.point)){var u=d.point,h=d.offset,f=new Ud({style:{fill:t.getData().getVisual("style").fill},shape:{cx:u[0]+h*9,cy:u[1],r:3},silent:!0,z2:8+(h?0:$x+1)});if(!h){var p=t.mainSeries.getData(),g=i.getName(c),b=p.indexOfName(g),w=i.getItemModel(c),_=w.getModel("label"),k=p.getItemGraphicEl(b);ji(f,fi(w),{labelFetcher:{getFormattedLabel:function(T,D){return t.getFormattedLabel(b,D)}},defaultText:g}),f.disableLabelAnimation=!0,_.get("position")||f.setTextConfig({position:"bottom"}),k.onHoverStateChange=function(T){V2(f,T)}}o.add(f)}}})},e.type="map",e})(Mr),qje=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.needsDrawMap=!1,t.seriesGroup=[],t.getTooltipPosition=function(r){if(r!=null){var n=this.getData().getName(r),i=this.coordinateSystem,o=i.getRegion(n);return o&&i.dataToPoint(o.getCenter())}},t}return e.prototype.getInitialData=function(t){for(var r=am(this,{coordDimensions:["value"],encodeDefaulter:va(dM,this)}),n=Rt(),i=[],o=0,l=r.count();o<l;o++){var c=r.getName(o);n.set(c,o)}var d=Fd.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return oe(d.regions,function(u){var h=u.name,f=n.get(h),p=u.properties&&u.properties.echartsStyle,g;f==null?(g={name:h},i.push(g)):g=r.getRawDataItem(f),p&&_a(g,p)}),r.appendData(i),r},e.prototype.getHostGeoModel=function(){if(S$(this).kind!==oc.boxCoordSys)return this.getReferringComponents("geo",{useDefault:!1,enableAll:!1,enableNone:!1}).models[0]},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var r=this.getData();return r.get(r.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var r=this.getData();return r.getItemModel(r.indexOfName(t))},e.prototype.formatTooltip=function(t,r,n){for(var i=this.getData(),o=this.getRawValue(t),l=i.getName(t),c=this.seriesGroup,d=[],u=0;u<c.length;u++){var h=c[u].originalData.indexOfName(l),f=i.mapDimension("value");isNaN(c[u].originalData.get(f,h))||d.push(c[u].name)}return Jn("section",{header:d.join(", "),noHeader:!d.length,blocks:[Jn("nameValue",{name:l,value:o})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var r=t.icon||"roundRect",n=ei(r,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return n.setStyle(t.itemStyle),n.style.stroke="none",r.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill=Fe.color.neutral00,n.style.lineWidth=2),n},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:Fe.color.tertiary},itemStyle:{borderWidth:.5,borderColor:Fe.color.border,areaColor:Fe.color.background},emphasis:{label:{show:!0,color:Fe.color.primary},itemStyle:{areaColor:Fe.color.highlight}},select:{label:{show:!0,color:Fe.color.primary},itemStyle:{color:Fe.color.highlight}},nameProperty:"name"},e})(Fr);function Xje(a,e){var t={};return oe(a,function(r){r.each(r.mapDimension("value"),function(n,i){var o="ec-"+r.getName(i);t[o]=t[o]||[],isNaN(n)||t[o].push(n)})}),a[0].map(a[0].mapDimension("value"),function(r,n){for(var i="ec-"+a[0].getName(n),o=0,l=1/0,c=-1/0,d=t[i].length,u=0;u<d;u++)l=Math.min(l,t[i][u]),c=Math.max(c,t[i][u]),o+=t[i][u];var h;return e==="min"?h=l:e==="max"?h=c:e==="average"?h=o/d:h=o,d===0?NaN:h})}function Zje(a){var e={};a.eachSeriesByType("map",function(t){var r=t.getHostGeoModel(),n=r?"o"+r.id:"i"+t.getMapType();(e[n]=e[n]||[]).push(t)}),oe(e,function(t,r){for(var n=Xje(it(t,function(o){return o.getData()}),t[0].get("mapValueCalculation")),i=0;i<t.length;i++)t[i].originalData=t[i].getData();for(var i=0;i<t.length;i++)t[i].seriesGroup=t,t[i].needsDrawMap=i===0&&!t[i].getHostGeoModel(),t[i].setData(n.cloneShallow()),t[i].mainSeries=t[0]})}function Kje(a){var e={};a.eachSeriesByType("map",function(t){var r=t.getMapType();if(!(t.getHostGeoModel()||e[r])){var n={};oe(t.seriesGroup,function(o){var l=o.coordinateSystem,c=o.originalData;o.get("showLegendSymbol")&&a.getComponent("legend")&&c.each(c.mapDimension("value"),function(d,u){var h=c.getName(u),f=l.getRegion(h);if(!(!f||isNaN(d))){var p=n[h]||0,g=l.dataToPoint(f.getCenter());n[h]=p+1,c.setItemLayout(u,{point:g,offset:p})}})});var i=t.getData();i.each(function(o){var l=i.getName(o),c=i.getItemLayout(o)||{};c.showLabel=!n[l],i.setItemLayout(o,c)}),e[r]=!0}})}var lB=zn,P0=(function(a){Le(e,a);function e(t,r){var n=a.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new jd,n._rawTransformable=new jd,n.name=t,n._opt=r,n}return e.prototype.setBoundingRect=function(t,r,n,i){return this._rect=new Jt(t,r,n,i),this._updateCenterAndZoom(),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,r,n,i){this._transformTo(t,r,n,i),this._viewRect=new Jt(t,r,n,i)},e.prototype._transformTo=function(t,r,n,i){var o=this.getBoundingRect(),l=this._rawTransformable;l.transform=o.calculateTransform(new Jt(t,r,n,i));var c=l.parent;l.parent=null,l.decomposeTransform(),l.parent=c,this._updateTransform()},e.prototype.setCenter=function(t){var r=this._opt;r&&r.api&&r.ecModel&&r.ecModel.getShallow("legacyViewCoordSysCenterBase")&&t&&(t=[_t(t[0],r.api.getWidth()),_t(t[1],r.api.getWidth())]),this._centerOption=$t(t),this._updateCenterAndZoom()},e.prototype.setZoom=function(t){this._zoom=YM(t||1,this.zoomLimit),this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect(),r=t.x+t.width/2,n=t.y+t.height/2;return[r,n]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._centerOption,r=this._rect;t&&r&&(this._center=[_t(t[0],r.width,r.x),_t(t[1],r.height,r.y)]);var n=this._rawTransformable.getLocalTransform(),i=this._roamTransformable,o=this.getDefaultCenter(),l=this.getCenter(),c=this.getZoom();l=zn([],l,n),o=zn([],o,n),i.originX=l[0],i.originY=l[1],i.x=o[0]-l[0],i.y=o[1]-l[1],i.scaleX=i.scaleY=c,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,r=this._rawTransformable;r.parent=t,t.updateTransform(),r.updateTransform(),sN(this.transform||(this.transform=[]),r.transform||Ii()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],Cl(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,r=this._roamTransformable,n=new jd;return n.transform=r.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,r,n){var i=r?this._rawTransform:this.transform;return n=n||[],i?lB(n,t,i):bs(n,t)},e.prototype.pointToData=function(t,r,n){n=n||[];var i=this.invTransform;return i?lB(n,t,i):(n[0]=t[0],n[1]=t[1],n)},e.prototype.convertToPixel=function(t,r,n){var i=cB(r);return i===this?i.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,r,n){var i=cB(r);return i===this?i.pointToData(n):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e})(jd);function cB(a){var e=a.seriesModel;return e?e.coordinateSystem:null}var Qje={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},OX=["lng","lat"],$3=(function(a){Le(e,a);function e(t,r,n){var i=a.call(this,t,{api:n.api,ecModel:n.ecModel})||this;i.dimensions=OX,i.type="geo",i._nameCoordMap=Rt(),i.map=r;var o=n.projection,l=Fd.load(r,n.nameMap,n.nameProperty),c=Fd.getGeoResource(r);i.resourceType=c?c.type:null;var d=i.regions=l.regions,u=Qje[c.type];i._regionsMap=l.regionsMap,i.regions=l.regions,i.projection=o;var h;if(o)for(var f=0;f<d.length;f++){var p=d[f].getBoundingRect(o);h=h||p.clone(),h.union(p)}else h=l.boundingRect;return i.setBoundingRect(h.x,h.y,h.width,h.height),i.aspectScale=o?1:Pt(n.aspectScale,u.aspectScale),i._invertLongitute=o?!1:u.invertLongitute,i}return e.prototype._transformTo=function(t,r,n,i){var o=this.getBoundingRect(),l=this._invertLongitute;o=o.clone(),l&&(o.y=-o.y-o.height);var c=this._rawTransformable;c.transform=o.calculateTransform(new Jt(t,r,n,i));var d=c.parent;c.parent=null,c.decomposeTransform(),c.parent=d,l&&(c.scaleY=-c.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var r=this.regions,n=0;n<r.length;n++){var i=r[n];if(i.type==="geoJSON"&&i.contain(t))return r[n]}},e.prototype.addGeoCoord=function(t,r){this._nameCoordMap.set(t,r)},e.prototype.getGeoCoord=function(t){var r=this._regionsMap.get(t);return this._nameCoordMap.get(t)||r&&r.getCenter()},e.prototype.dataToPoint=function(t,r,n){if(jt(t)&&(t=this.getGeoCoord(t)),t){var i=this.projection;return i&&(t=i.project(t)),t&&this.projectedToPoint(t,r,n)}},e.prototype.pointToData=function(t,r,n){var i=this.projection;return i&&(t=i.unproject(t)),t&&this.pointToProjected(t,n)},e.prototype.pointToProjected=function(t,r){return a.prototype.pointToData.call(this,t,0,r)},e.prototype.projectedToPoint=function(t,r,n){return a.prototype.dataToPoint.call(this,t,r,n)},e.prototype.convertToPixel=function(t,r,n){var i=dB(r);return i===this?i.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,r,n){var i=dB(r);return i===this?i.pointToData(n):null},e})(P0);ti($3,P0);function dB(a){var e=a.geoModel,t=a.seriesModel;return e?e.coordinateSystem:t?t.coordinateSystem||(t.getReferringComponents("geo",yn).models[0]||{}).coordinateSystem:null}function uB(a,e){var t=a.get("boundingCoords");if(t!=null){var r=t[0],n=t[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(n[0])&&isFinite(n[1])){var i=this.projection;if(i){var o=r[0],l=r[1],c=n[0],d=n[1];r=[1/0,1/0],n=[-1/0,-1/0];var u=function(I,O,P,V){for(var G=P-I,Q=V-O,$=0;$<=100;$++){var ae=$/100,J=i.project([I+G*ae,O+Q*ae]);Zu(r,r,J),Ku(n,n,J)}};u(o,l,c,l),u(c,l,c,d),u(c,d,o,d),u(o,d,c,l)}this.setBoundingRect(r[0],r[1],n[0]-r[0],n[1]-r[1])}}var h=this.getBoundingRect(),f=a.get("layoutCenter"),p=a.get("layoutSize"),g=pi(a,e).refContainer,b=h.width/h.height*this.aspectScale,w=!1,_,k;f&&p&&(_=[_t(f[0],g.width)+g.x,_t(f[1],g.height)+g.y],k=_t(p,Math.min(g.width,g.height)),!isNaN(_[0])&&!isNaN(_[1])&&!isNaN(k)&&(w=!0));var T;if(w)T={},b>1?(T.width=k,T.height=k/b):(T.height=k,T.width=k*b),T.y=_[1]-T.height/2,T.x=_[0]-T.width/2;else{var D=a.getBoxLayoutParams();D.aspect=b,T=ln(D,g),T=M$(a,T,b)}this.setViewRect(T.x,T.y,T.width,T.height),this.setCenter(a.get("center")),this.setZoom(a.get("zoom"))}function Jje(a,e){oe(e.get("geoCoord"),function(t,r){a.addGeoCoord(r,t)})}var eSe=(function(){function a(){this.dimensions=OX}return a.prototype.create=function(e,t){var r=[];function n(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}e.eachComponent("geo",function(o,l){var c=o.get("map"),d=new $3(c+l,c,Je({nameMap:o.get("nameMap"),api:t,ecModel:e},n(o)));d.zoomLimit=o.get("scaleLimit"),r.push(d),o.coordinateSystem=d,d.model=o,d.resize=uB,d.resize(o,t)}),e.eachSeries(function(o){Lb({targetModel:o,coordSysType:"geo",coordSysProvider:function(){var l=o.subType==="map"?o.getHostGeoModel():o.getReferringComponents("geo",yn).models[0];return l&&l.coordinateSystem},allowNotFound:!0})});var i={};return e.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var l=o.getMapType();i[l]=i[l]||[],i[l].push(o)}}),oe(i,function(o,l){var c=it(o,function(u){return u.get("nameMap")}),d=new $3(l,l,Je({nameMap:AT(c),api:t,ecModel:e},n(o[0])));d.zoomLimit=Gi.apply(null,it(o,function(u){return u.get("scaleLimit")})),r.push(d),d.resize=uB,d.resize(o[0],t),oe(o,function(u){u.coordinateSystem=d,Jje(d,u)})}),r},a.prototype.getFilledRegions=function(e,t,r,n){for(var i=(e||[]).slice(),o=Rt(),l=0;l<i.length;l++)o.set(i[l].name,i[l]);var c=Fd.load(t,r,n);return oe(c.regions,function(d){var u=d.name,h=o.get(u),f=d.properties&&d.properties.echartsStyle;h||(h={name:u},i.push(h)),f&&_a(h,f)}),i},a})(),PX=new eSe,tSe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n);var i=Fd.getGeoResource(t.map);if(i&&i.type==="geoJSON"){var o=t.itemStyle=t.itemStyle||{};"color"in o||(o.color=t.defaultItemStyleColor||Fe.color.backgroundTint)}g0(t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,r=this.option;r.regions=PX.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var n={};this._optionModelMap=kc(r.regions||[],function(i,o){var l=o.name;return l&&(i.set(l,new za(o,t,t.ecModel)),o.selected&&(n[l]=!0)),i},Rt()),r.selectedMap||(r.selectedMap=n)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new za(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,r){var n=this.getRegionModel(t),i=r==="normal"?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),o={name:t};if(Ut(i))return o.status=r,i(o);if(jt(i))return i.replace("{a}",t??"")},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var r=this.option,n=r.selectedMode;if(n){n!=="multiple"&&(r.selectedMap=null);var i=r.selectedMap||(r.selectedMap={});i[t]=!0}},e.prototype.unSelect=function(t){var r=this.option.selectedMap;r&&(r[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var r=this.option.selectedMap;return!!(r&&r[t])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:Fe.color.tertiary},itemStyle:{borderWidth:.5,borderColor:Fe.color.border},emphasis:{label:{show:!0,color:Fe.color.primary},itemStyle:{color:Fe.color.highlight}},select:{label:{show:!0,color:Fe.color.primary},itemStyle:{color:Fe.color.highlight}},regions:[]},e})(Oa),aSe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.focusBlurEnabled=!0,t}return e.prototype.init=function(t,r){this._api=r},e.prototype.render=function(t,r,n,i){if(this._model=t,!t.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new LX(n));var o=this._mapDraw;o.draw(t,r,n,this,i),o.group.on("click",this._handleRegionClick,this),o.group.silent=t.get("silent"),this.group.add(o.group),this.updateSelectStatus(t,r,n)},e.prototype._handleRegionClick=function(t){var r;qf(t.target,function(n){return(r=na(n).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},e.prototype.updateSelectStatus=function(t,r,n){var i=this;this._mapDraw.group.traverse(function(o){var l=na(o).eventData;if(l)return i._model.isSelected(l.name)?n.enterSelect(o):n.leaveSelect(o),!0})},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e})(tn);function rSe(a,e,t){Fd.registerMap(a,e,t)}function BX(a){a.registerCoordinateSystem("geo",PX),a.registerComponentModel(tSe),a.registerComponentView(aSe),a.registerImpl("registerMap",rSe),a.registerImpl("getMap",function(t){return Fd.getMapForUser(t)});function e(t,r){r.update="geo:updateSelectStatus",a.registerAction(r,function(n,i){var o={},l=[];return i.eachComponent({mainType:"geo",query:n},function(c){c[t](n.name);var d=c.coordinateSystem;oe(d.regions,function(h){o[h.name]=c.isSelected(h.name)||!1});var u=[];oe(o,function(h,f){o[f]&&u.push(f)}),l.push({geoIndex:c.componentIndex,name:u})}),{selected:o,allSelected:l,name:n.name}})}e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),a.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,r,n){var i=t.componentType;i||(t.geoId!=null?i="geo":t.seriesId!=null&&(i="series")),i||(i="series"),r.eachComponent({mainType:i,query:t},function(o){var l=o.coordinateSystem;if(l.type==="geo"){var c=LN(l,t,o.get("scaleLimit"));o.setCenter&&o.setCenter(c.center),o.setZoom&&o.setZoom(c.zoom),i==="series"&&oe(o.seriesGroup,function(d){d.setCenter(c.center),d.setZoom(c.zoom)})}})})}function nSe(a){Sa(BX),a.registerChartView(Yje),a.registerSeriesModel(qje),a.registerLayout(Kje),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,Zje),yY("map",a.registerAction)}function iSe(a){var e=a;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t=[e],r,n;r=t.pop();)if(n=r.children,r.isExpand&&n.length)for(var i=n.length,o=i-1;o>=0;o--){var l=n[o];l.hierNode={defaultAncestor:null,ancestor:l,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},t.push(l)}}function sSe(a,e){var t=a.isExpand?a.children:[],r=a.parentNode.children,n=a.hierNode.i?r[a.hierNode.i-1]:null;if(t.length){lSe(a);var i=(t[0].hierNode.prelim+t[t.length-1].hierNode.prelim)/2;n?(a.hierNode.prelim=n.hierNode.prelim+e(a,n),a.hierNode.modifier=a.hierNode.prelim-i):a.hierNode.prelim=i}else n&&(a.hierNode.prelim=n.hierNode.prelim+e(a,n));a.parentNode.hierNode.defaultAncestor=cSe(a,n,a.parentNode.hierNode.defaultAncestor||r[0],e)}function oSe(a){var e=a.hierNode.prelim+a.parentNode.hierNode.modifier;a.setLayout({x:e},!0),a.hierNode.modifier+=a.parentNode.hierNode.modifier}function hB(a){return arguments.length?a:hSe}function Xg(a,e){return a-=Math.PI/2,{x:e*Math.cos(a),y:e*Math.sin(a)}}function lSe(a){for(var e=a.children,t=e.length,r=0,n=0;--t>=0;){var i=e[t];i.hierNode.prelim+=r,i.hierNode.modifier+=r,n+=i.hierNode.change,r+=i.hierNode.shift+n}}function cSe(a,e,t,r){if(e){for(var n=a,i=a,o=i.parentNode.children[0],l=e,c=n.hierNode.modifier,d=i.hierNode.modifier,u=o.hierNode.modifier,h=l.hierNode.modifier;l=M5(l),i=E5(i),l&&i;){n=M5(n),o=E5(o),n.hierNode.ancestor=a;var f=l.hierNode.prelim+h-i.hierNode.prelim-d+r(l,i);f>0&&(uSe(dSe(l,a,t),a,f),d+=f,c+=f),h+=l.hierNode.modifier,d+=i.hierNode.modifier,c+=n.hierNode.modifier,u+=o.hierNode.modifier}l&&!M5(n)&&(n.hierNode.thread=l,n.hierNode.modifier+=h-c),i&&!E5(o)&&(o.hierNode.thread=i,o.hierNode.modifier+=d-u,t=a)}return t}function M5(a){var e=a.children;return e.length&&a.isExpand?e[e.length-1]:a.hierNode.thread}function E5(a){var e=a.children;return e.length&&a.isExpand?e[0]:a.hierNode.thread}function dSe(a,e,t){return a.hierNode.ancestor.parentNode===e.parentNode?a.hierNode.ancestor:t}function uSe(a,e,t){var r=t/(e.hierNode.i-a.hierNode.i);e.hierNode.change-=r,e.hierNode.shift+=t,e.hierNode.modifier+=t,e.hierNode.prelim+=t,a.hierNode.change+=r}function hSe(a,e){return a.parentNode===e.parentNode?1:2}var fSe=(function(){function a(){this.parentPoint=[],this.childPoints=[]}return a})(),pSe=(function(a){Le(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:Fe.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new fSe},e.prototype.buildPath=function(t,r){var n=r.childPoints,i=n.length,o=r.parentPoint,l=n[0],c=n[i-1];if(i===1){t.moveTo(o[0],o[1]),t.lineTo(l[0],l[1]);return}var d=r.orient,u=d==="TB"||d==="BT"?0:1,h=1-u,f=_t(r.forkPosition,1),p=[];p[u]=o[u],p[h]=o[h]+(c[h]-o[h])*f,t.moveTo(o[0],o[1]),t.lineTo(p[0],p[1]),t.moveTo(l[0],l[1]),p[u]=l[u],t.lineTo(p[0],p[1]),p[u]=c[u],t.lineTo(p[0],p[1]),t.lineTo(c[0],c[1]);for(var g=1;g<i-1;g++){var b=n[g];t.moveTo(b[0],b[1]),p[u]=b[u],t.lineTo(p[0],p[1])}},e})(Ia),xSe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._mainGroup=new Gt,t}return e.prototype.init=function(t,r){this._controller=new O0(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,r,n){var i=t.getData(),o=t.layoutInfo,l=this._mainGroup,c=t.get("layout");c==="radial"?(l.x=o.x+o.width/2,l.y=o.y+o.height/2):(l.x=o.x,l.y=o.y),this._updateViewCoordSys(t,n),this._updateController(t,null,r,n);var d=this._data;i.diff(d).add(function(u){fB(i,u)&&pB(i,u,null,l,t)}).update(function(u,h){var f=d.getItemGraphicEl(h);if(!fB(i,u)){f&&mB(d,h,f,l,t);return}pB(i,u,f,l,t)}).remove(function(u){var h=d.getItemGraphicEl(u);h&&mB(d,u,h,l,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),t.get("expandAndCollapse")===!0&&i.eachItemGraphicEl(function(u,h){u.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:h})})}),this._data=i},e.prototype._updateViewCoordSys=function(t,r){var n=t.getData(),i=[];n.each(function(h){var f=n.getItemLayout(h);f&&!isNaN(f.x)&&!isNaN(f.y)&&i.push([+f.x,+f.y])});var o=[],l=[];fN(i,o,l);var c=this._min,d=this._max;l[0]-o[0]===0&&(o[0]=c?c[0]:o[0]-1,l[0]=d?d[0]:l[0]+1),l[1]-o[1]===0&&(o[1]=c?c[1]:o[1]-1,l[1]=d?d[1]:l[1]+1);var u=t.coordinateSystem=new P0(null,{api:r,ecModel:t.ecModel});u.zoomLimit=t.get("scaleLimit"),u.setBoundingRect(o[0],o[1],l[0]-o[0],l[1]-o[1]),u.setCenter(t.get("center")),u.setZoom(t.get("zoom")),this.group.attr({x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY}),this._min=o,this._max=l},e.prototype._updateController=function(t,r,n,i){var o=this;TX(t,i,this.group,this._controller,this._controllerHost,r),this._controller.on("zoom",function(l){o._updateNodeAndLinkScale(t)})},e.prototype._updateNodeAndLinkScale=function(t){var r=t.getData(),n=this._getNodeGlobalScale(t);r.eachItemGraphicEl(function(i,o){i.setSymbolScale(n)})},e.prototype._getNodeGlobalScale=function(t){var r=t.coordinateSystem;if(r.type!=="view")return 1;var n=this._nodeScaleRatio,i=r.scaleX||1,o=r.getZoom(),l=(o-1)*n+1;return l/i},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e})(Mr);function fB(a,e){var t=a.getItemLayout(e);return t&&!isNaN(t.x)&&!isNaN(t.y)}function pB(a,e,t,r,n){var i=!t,o=a.tree.getNodeByDataIndex(e),l=o.getModel(),c=o.getVisual("style").fill,d=o.isExpand===!1&&o.children.length!==0?c:Fe.color.neutral00,u=a.tree.root,h=o.parentNode===u?o:o.parentNode||o,f=a.getItemGraphicEl(h.dataIndex),p=h.getLayout(),g=f?{x:f.__oldX,y:f.__oldY,rawX:f.__radialOldRawX,rawY:f.__radialOldRawY}:p,b=o.getLayout();i?(t=new zb(a,e,null,{symbolInnerColor:d,useNameLabel:!0}),t.x=g.x,t.y=g.y):t.updateData(a,e,null,{symbolInnerColor:d,useNameLabel:!0}),t.__radialOldRawX=t.__radialRawX,t.__radialOldRawY=t.__radialRawY,t.__radialRawX=b.rawX,t.__radialRawY=b.rawY,r.add(t),a.setItemGraphicEl(e,t),t.__oldX=t.x,t.__oldY=t.y,rr(t,{x:b.x,y:b.y},n);var w=t.getSymbolPath();if(n.get("layout")==="radial"){var _=u.children[0],k=_.getLayout(),T=_.children.length,D=void 0,I=void 0;if(b.x===k.x&&o.isExpand===!0&&_.children.length){var O={x:(_.children[0].getLayout().x+_.children[T-1].getLayout().x)/2,y:(_.children[0].getLayout().y+_.children[T-1].getLayout().y)/2};D=Math.atan2(O.y-k.y,O.x-k.x),D<0&&(D=Math.PI*2+D),I=O.x<k.x,I&&(D=D-Math.PI)}else D=Math.atan2(b.y-k.y,b.x-k.x),D<0&&(D=Math.PI*2+D),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(I=b.x<k.x,I&&(D=D-Math.PI)):(I=b.x>k.x,I||(D=D-Math.PI));var P=I?"left":"right",V=l.getModel("label"),G=V.get("rotate"),Q=G*(Math.PI/180),$=w.getTextContent();$&&(w.setTextConfig({position:V.get("position")||P,rotation:G==null?-D:Q,origin:"center"}),$.setStyle("verticalAlign","middle"))}var ae=l.get(["emphasis","focus"]),J=ae==="relative"?Bv(o.getAncestorsIndices(),o.getDescendantIndices()):ae==="ancestor"?o.getAncestorsIndices():ae==="descendant"?o.getDescendantIndices():null;J&&(na(t).focus=J),mSe(n,o,u,t,g,p,b,r),t.__edge&&(t.onHoverStateChange=function(U){if(U!=="blur"){var F=o.parentNode&&a.getItemGraphicEl(o.parentNode.dataIndex);F&&F.hoverState===Ab||V2(t.__edge,U)}})}function mSe(a,e,t,r,n,i,o,l){var c=e.getModel(),d=a.get("edgeShape"),u=a.get("layout"),h=a.getOrient(),f=a.get(["lineStyle","curveness"]),p=a.get("edgeForkPosition"),g=c.getModel("lineStyle").getLineStyle(),b=r.__edge;if(d==="curve")e.parentNode&&e.parentNode!==t&&(b||(b=r.__edge=new Mb({shape:Y3(u,h,f,n,n)})),rr(b,{shape:Y3(u,h,f,i,o)},a));else if(d==="polyline"&&u==="orthogonal"&&e!==t&&e.children&&e.children.length!==0&&e.isExpand===!0){for(var w=e.children,_=[],k=0;k<w.length;k++){var T=w[k].getLayout();_.push([T.x,T.y])}b||(b=r.__edge=new pSe({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:h,forkPosition:p}})),rr(b,{shape:{parentPoint:[o.x,o.y],childPoints:_}},a)}b&&!(d==="polyline"&&!e.isExpand)&&(b.useStyle(Kt({strokeNoScale:!0,fill:null},g)),hi(b,c,"lineStyle"),y0(b),l.add(b))}function xB(a,e,t,r,n){var i=e.tree.root,o=zX(i,a),l=o.source,c=o.sourceLayout,d=e.getItemGraphicEl(a.dataIndex);if(d){var u=e.getItemGraphicEl(l.dataIndex),h=u.__edge,f=d.__edge||(l.isExpand===!1||l.children.length===1?h:void 0),p=r.get("edgeShape"),g=r.get("layout"),b=r.get("orient"),w=r.get(["lineStyle","curveness"]);f&&(p==="curve"?vh(f,{shape:Y3(g,b,w,c,c),style:{opacity:0}},r,{cb:function(){t.remove(f)},removeOpt:n}):p==="polyline"&&r.get("layout")==="orthogonal"&&vh(f,{shape:{parentPoint:[c.x,c.y],childPoints:[[c.x,c.y]]},style:{opacity:0}},r,{cb:function(){t.remove(f)},removeOpt:n}))}}function zX(a,e){for(var t=e.parentNode===a?e:e.parentNode||e,r;r=t.getLayout(),r==null;)t=t.parentNode===a?t:t.parentNode||t;return{source:t,sourceLayout:r}}function mB(a,e,t,r,n){var i=a.tree.getNodeByDataIndex(e),o=a.tree.root,l=zX(o,i).sourceLayout,c={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};vh(t,{x:l.x+1,y:l.y+1},n,{cb:function(){r.remove(t),a.setItemGraphicEl(e,null)},removeOpt:c}),t.fadeOut(null,a.hostModel,{fadeLabel:!0,animation:c}),i.children.forEach(function(d){xB(d,a,r,n,c)}),xB(i,a,r,n,c)}function Y3(a,e,t,r,n){var i,o,l,c,d,u,h,f;if(a==="radial"){d=r.rawX,h=r.rawY,u=n.rawX,f=n.rawY;var p=Xg(d,h),g=Xg(d,h+(f-h)*t),b=Xg(u,f+(h-f)*t),w=Xg(u,f);return{x1:p.x||0,y1:p.y||0,x2:w.x||0,y2:w.y||0,cpx1:g.x||0,cpy1:g.y||0,cpx2:b.x||0,cpy2:b.y||0}}else d=r.x,h=r.y,u=n.x,f=n.y,(e==="LR"||e==="RL")&&(i=d+(u-d)*t,o=h,l=u+(d-u)*t,c=f),(e==="TB"||e==="BT")&&(i=d,o=h+(f-h)*t,l=u,c=f+(h-f)*t);return{x1:d,y1:h,x2:u,y2:f,cpx1:i,cpy1:o,cpx2:l,cpy2:c}}var tl=Ea();function FX(a){var e=a.mainData,t=a.datas;t||(t={main:e},a.datasAttr={main:"data"}),a.datas=a.mainData=null,VX(e,t,a),oe(t,function(r){oe(e.TRANSFERABLE_METHODS,function(n){r.wrapMethod(n,va(gSe,a))})}),e.wrapMethod("cloneShallow",va(bSe,a)),oe(e.CHANGABLE_METHODS,function(r){e.wrapMethod(r,va(vSe,a))}),cs(t[e.dataType]===e)}function gSe(a,e){if(_Se(this)){var t=Je({},tl(this).datas);t[this.dataType]=e,VX(e,t,a)}else XM(e,this.dataType,tl(this).mainData,a);return e}function vSe(a,e){return a.struct&&a.struct.update(),e}function bSe(a,e){return oe(tl(e).datas,function(t,r){t!==e&&XM(t.cloneShallow(),r,e,a)}),e}function ySe(a){var e=tl(this).mainData;return a==null||e==null?e:tl(e).datas[a]}function wSe(){var a=tl(this).mainData;return a==null?[{data:a}]:it(Va(tl(a).datas),function(e){return{type:e,data:tl(a).datas[e]}})}function _Se(a){return tl(a).mainData===a}function VX(a,e,t){tl(a).datas={},oe(e,function(r,n){XM(r,n,a,t)})}function XM(a,e,t,r){tl(t).datas[e]=a,tl(a).mainData=t,a.dataType=e,r.struct&&(a[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=a),a.getLinkedData=ySe,a.getLinkedDataAll=wSe}var NSe=(function(){function a(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return a.prototype.isRemoved=function(){return this.dataIndex<0},a.prototype.eachNode=function(e,t,r){Ut(e)&&(r=t,t=e,e=null),e=e||{},jt(e)&&(e={order:e});var n=e.order||"preorder",i=this[e.attr||"children"],o;n==="preorder"&&(o=t.call(r,this));for(var l=0;!o&&l<i.length;l++)i[l].eachNode(e,t,r);n==="postorder"&&t.call(r,this)},a.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var r=0;r<this.children.length;r++){var n=this.children[r];n.updateDepthAndHeight(e+1),n.height>t&&(t=n.height)}this.height=t+1},a.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,r=this.children,n=r.length;t<n;t++){var i=r[t].getNodeById(e);if(i)return i}},a.prototype.contains=function(e){if(e===this)return!0;for(var t=0,r=this.children,n=r.length;t<n;t++){var i=r[t].contains(e);if(i)return i}},a.prototype.getAncestors=function(e){for(var t=[],r=e?this:this.parentNode;r;)t.push(r),r=r.parentNode;return t.reverse(),t},a.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},a.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(t){e.push(t.dataIndex)}),e},a.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},a.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},a.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},a.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostTree,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},a.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},a.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},a.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},a.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},a.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},a.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},a.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},a.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},a})(),ZM=(function(){function a(e){this.type="tree",this._nodes=[],this.hostModel=e}return a.prototype.eachNode=function(e,t,r){this.root.eachNode(e,t,r)},a.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},a.prototype.getNodeById=function(e){return this.root.getNodeById(e)},a.prototype.update=function(){for(var e=this.data,t=this._nodes,r=0,n=t.length;r<n;r++)t[r].dataIndex=-1;for(var r=0,n=e.count();r<n;r++)t[e.getRawIndex(r)].dataIndex=r},a.prototype.clearLayouts=function(){this.data.clearItemLayouts()},a.createTree=function(e,t,r){var n=new a(t),i=[],o=1;l(e);function l(u,h){var f=u.value;o=Math.max(o,rt(f)?f.length:1),i.push(u);var p=new NSe(ui(u.name,""),n);h?jSe(p,h):n.root=p,n._nodes.push(p);var g=u.children;if(g)for(var b=0;b<g.length;b++)l(g[b],p)}n.root.updateDepthAndHeight(0);var c=Pb(i,{coordDimensions:["value"],dimensionsCount:o}).dimensions,d=new Ss(c,t);return d.initData(i),r&&r(d),FX({mainData:d,struct:n,structAttr:"tree"}),n.update(),n},a})();function jSe(a,e){var t=e.children;a.parentNode!==e&&(t.push(a),a.parentNode=e)}function sb(a,e,t){if(a&&ya(e,a.type)>=0){var r=t.getData().tree.root,n=a.targetNode;if(jt(n)&&(n=r.getNodeById(n)),n&&r.contains(n))return{node:n};var i=a.targetNodeId;if(i!=null&&(n=r.getNodeById(i)))return{node:n}}}function HX(a){for(var e=[];a;)a=a.parentNode,a&&e.push(a);return e.reverse()}function KM(a,e){var t=HX(a);return ya(t,e)>=0}function PN(a,e){for(var t=[];a;){var r=a.dataIndex;t.push({name:a.name,dataIndex:r,value:e.getRawValue(r)}),a=a.parentNode}return t.reverse(),t}var SSe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t){var r={name:t.name,children:t.data},n=t.leaves||{},i=new za(n,this,this.ecModel),o=ZM.createTree(r,this,l);function l(h){h.wrapMethod("getItemModel",function(f,p){var g=o.getNodeByDataIndex(p);return g&&g.children.length&&g.isExpand||(f.parentModel=i),f})}var c=0;o.eachNode("preorder",function(h){h.depth>c&&(c=h.depth)});var d=t.expandAndCollapse,u=d&&t.initialTreeDepth>=0?t.initialTreeDepth:c;return o.root.eachNode("preorder",function(h){var f=h.hostTree.data.getRawDataItem(h.dataIndex);h.isExpand=f&&f.collapsed!=null?!f.collapsed:h.depth<=u}),o.data},e.prototype.getOrient=function(){var t=this.get("orient");return t==="horizontal"?t="LR":t==="vertical"&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,r,n){for(var i=this.getData().tree,o=i.root.children[0],l=i.getNodeByDataIndex(t),c=l.getValue(),d=l.name;l&&l!==o;)d=l.parentNode.name+"."+d,l=l.parentNode;return Jn("nameValue",{name:d,value:c,noValue:isNaN(c)||c==null})},e.prototype.getDataParams=function(t){var r=a.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=PN(n,this),r.collapsed=!n.isExpand,r},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystemUsage:"box",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,roamTrigger:"global",nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:Fe.color.borderTint,width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e})(Fr);function kSe(a,e,t){for(var r=[a],n=[],i;i=r.pop();)if(n.push(i),i.isExpand){var o=i.children;if(o.length)for(var l=0;l<o.length;l++)r.push(o[l])}for(;i=n.pop();)e(i,t)}function xg(a,e){for(var t=[a],r;r=t.pop();)if(e(r),r.isExpand){var n=r.children;if(n.length)for(var i=n.length-1;i>=0;i--)t.push(n[i])}}function CSe(a,e){a.eachSeriesByType("tree",function(t){ASe(t,e)})}function ASe(a,e){var t=pi(a,e).refContainer,r=ln(a.getBoxLayoutParams(),t);a.layoutInfo=r;var n=a.get("layout"),i=0,o=0,l=null;n==="radial"?(i=2*Math.PI,o=Math.min(r.height,r.width)/2,l=hB(function(D,I){return(D.parentNode===I.parentNode?1:2)/D.depth})):(i=r.width,o=r.height,l=hB());var c=a.getData().tree.root,d=c.children[0];if(d){iSe(c),kSe(d,sSe,l),c.hierNode.modifier=-d.hierNode.prelim,xg(d,oSe);var u=d,h=d,f=d;xg(d,function(D){var I=D.getLayout().x;I<u.getLayout().x&&(u=D),I>h.getLayout().x&&(h=D),D.depth>f.depth&&(f=D)});var p=u===h?1:l(u,h)/2,g=p-u.getLayout().x,b=0,w=0,_=0,k=0;if(n==="radial")b=i/(h.getLayout().x+p+g),w=o/(f.depth-1||1),xg(d,function(D){_=(D.getLayout().x+g)*b,k=(D.depth-1)*w;var I=Xg(_,k);D.setLayout({x:I.x,y:I.y,rawX:_,rawY:k},!0)});else{var T=a.getOrient();T==="RL"||T==="LR"?(w=o/(h.getLayout().x+p+g),b=i/(f.depth-1||1),xg(d,function(D){k=(D.getLayout().x+g)*w,_=T==="LR"?(D.depth-1)*b:i-(D.depth-1)*b,D.setLayout({x:_,y:k},!0)})):(T==="TB"||T==="BT")&&(b=i/(h.getLayout().x+p+g),w=o/(f.depth-1||1),xg(d,function(D){_=(D.getLayout().x+g)*b,k=T==="TB"?(D.depth-1)*w:o-(D.depth-1)*w,D.setLayout({x:_,y:k},!0)}))}}}function TSe(a){a.eachSeriesByType("tree",function(e){var t=e.getData(),r=t.tree;r.eachNode(function(n){var i=n.getModel(),o=i.getModel("itemStyle").getItemStyle(),l=t.ensureUniqueItemVisual(n.dataIndex,"style");Je(l,o)})})}function MSe(a){a.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(r){var n=e.dataIndex,i=r.getData().tree,o=i.getNodeByDataIndex(n);o.isExpand=!o.isExpand})}),a.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t,r){t.eachComponent({mainType:"series",subType:"tree",query:e},function(n){var i=n.coordinateSystem,o=LN(i,e,n.get("scaleLimit"));n.setCenter(o.center),n.setZoom(o.zoom)})})}function ESe(a){a.registerChartView(xSe),a.registerSeriesModel(SSe),a.registerLayout(CSe),a.registerVisual(TSe),MSe(a)}var gB=["treemapZoomToNode","treemapRender","treemapMove"];function DSe(a){for(var e=0;e<gB.length;e++)a.registerAction({type:gB[e],update:"updateView"},Bn);a.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,r){r.eachComponent({mainType:"series",subType:"treemap",query:t},n);function n(i,o){var l=["treemapZoomToNode","treemapRootToNode"],c=sb(t,l,i);if(c){var d=i.getViewRoot();d&&(t.direction=KM(d,c.node)?"rollUp":"drillDown"),i.resetViewRoot(c.node)}}})}function UX(a){var e=a.getData(),t=e.tree,r={};t.eachNode(function(n){for(var i=n;i&&i.depth>1;)i=i.parentNode;var o=u3(a.ecModel,i.name||i.dataIndex+"",r);n.setVisual("decal",o)})}var ISe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.preventUsingHoverLayer=!0,t}return e.prototype.getInitialData=function(t,r){var n={name:t.name,children:t.data};GX(n);var i=t.levels||[],o=this.designatedVisualItemStyle={},l=new za({itemStyle:o},this,r);i=t.levels=RSe(i,r);var c=it(i||[],function(h){return new za(h,l,r)},this),d=ZM.createTree(n,this,u);function u(h){h.wrapMethod("getItemModel",function(f,p){var g=d.getNodeByDataIndex(p),b=g?c[g.depth]:null;return f.parentModel=b||l,f})}return d.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,r,n){var i=this.getData(),o=this.getRawValue(t),l=i.getName(t);return Jn("nameValue",{name:l,value:o})},e.prototype.getDataParams=function(t){var r=a.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=PN(n,this),r.treePathInfo=r.treeAncestors,r},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},Je(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var r=this._idIndexMap;r||(r=this._idIndexMap=Rt(),this._idIndexMapCount=0);var n=r.get(t);return n==null&&r.set(t,n=this._idIndexMapCount++),n},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){UX(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,coordinateSystemUsage:"box",left:Fe.size.l,top:Fe.size.xxxl,right:Fe.size.l,bottom:Fe.size.xxxl,sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:{max:5,min:.2},roam:!0,roamTrigger:"global",nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",bottom:Fe.size.m,emptyItemWidth:25,itemStyle:{color:Fe.color.backgroundShade,textStyle:{color:Fe.color.secondary}},emphasis:{itemStyle:{color:Fe.color.background}}},label:{show:!0,distance:0,padding:5,position:"inside",color:Fe.color.neutral00,overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:Fe.color.neutral00,borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e})(Fr);function GX(a){var e=0;oe(a.children,function(r){GX(r);var n=r.value;rt(n)&&(n=n[0]),e+=n});var t=a.value;rt(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),rt(a.value)?a.value[0]=t:a.value=t}function RSe(a,e){var t=Rr(e.get("color")),r=Rr(e.get(["aria","decal","decals"]));if(t){a=a||[];var n,i;oe(a,function(l){var c=new za(l),d=c.get("color"),u=c.get("decal");(c.get(["itemStyle","color"])||d&&d!=="none")&&(n=!0),(c.get(["itemStyle","decal"])||u&&u!=="none")&&(i=!0)});var o=a[0]||(a[0]={});return n||(o.color=t.slice()),!i&&r&&(o.decal=r.slice()),a}}var LSe=8,vB=8,D5=5,OSe=(function(){function a(e){this.group=new Gt,e.add(this.group)}return a.prototype.render=function(e,t,r,n){var i=e.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!i.get("show")||!r)){var l=i.getModel("itemStyle"),c=i.getModel("emphasis"),d=l.getModel("textStyle"),u=c.getModel(["itemStyle","textStyle"]),h=pi(e,t).refContainer,f={left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},p={emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]},g=ln(f,h);this._prepare(r,p,d),this._renderContent(e,p,g,l,c,d,u,n),SN(o,f,h)}},a.prototype._prepare=function(e,t,r){for(var n=e;n;n=n.parentNode){var i=ui(n.getModel().get("name"),""),o=r.getTextRect(i),l=Math.max(o.width+LSe*2,t.emptyItemWidth);t.totalWidth+=l+vB,t.renderList.push({node:n,text:i,width:l})}},a.prototype._renderContent=function(e,t,r,n,i,o,l,c){for(var d=0,u=t.emptyItemWidth,h=e.get(["breadcrumb","height"]),f=t.totalWidth,p=t.renderList,g=i.getModel("itemStyle").getItemStyle(),b=p.length-1;b>=0;b--){var w=p[b],_=w.node,k=w.width,T=w.text;f>r.width&&(f-=k-u,k=u,T=null);var D=new us({shape:{points:PSe(d,0,k,h,b===p.length-1,b===0)},style:Kt(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new Ja({style:zr(o,{text:T})}),textConfig:{position:"inside"},z2:$x*1e4,onclick:va(c,_)});D.disableLabelAnimation=!0,D.getTextContent().ensureState("emphasis").style=zr(l,{text:T}),D.ensureState("emphasis").style=g,on(D,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(D),BSe(D,e,_),d+=k+vB}},a.prototype.remove=function(){this.group.removeAll()},a})();function PSe(a,e,t,r,n,i){var o=[[n?a:a-D5,e],[a+t,e],[a+t,e+r],[n?a:a-D5,e+r]];return!i&&o.splice(2,0,[a+t+D5,e+r/2]),!n&&o.push([a,e+r/2]),o}function BSe(a,e,t){na(a).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:t&&t.dataIndex,name:t&&t.name},treePathInfo:t&&PN(t,e)}}var zSe=(function(){function a(){this._storage=[],this._elExistsMap={}}return a.prototype.add=function(e,t,r,n,i){return this._elExistsMap[e.id]?!1:(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:r,delay:n,easing:i}),!0)},a.prototype.finished=function(e){return this._finishedCallback=e,this},a.prototype.start=function(){for(var e=this,t=this._storage.length,r=function(){t--,t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},n=0,i=this._storage.length;n<i;n++){var o=this._storage[n];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:r,aborted:r})}return this},a})();function FSe(){return new zSe}var q3=Gt,bB=Ta,yB=3,wB="label",_B="upperLabel",VSe=$x*10,HSe=$x*2,USe=$x*3,Rf=b0([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),NB=function(a){var e=Rf(a);return e.stroke=e.fill=e.lineWidth=null,e},f_=Ea(),GSe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._state="ready",t._storage=mg(),t}return e.prototype.render=function(t,r,n,i){var o=r.findComponents({mainType:"series",subType:"treemap",query:i});if(!(ya(o,t)<0)){this.seriesModel=t,this.api=n,this.ecModel=r;var l=["treemapZoomToNode","treemapRootToNode"],c=sb(i,l,t),d=i&&i.type,u=t.layoutInfo,h=!this._oldTree,f=this._storage,p=d==="treemapRootToNode"&&c&&f?{rootNodeGroup:f.nodeGroup[c.node.getRawIndex()],direction:i.direction}:null,g=this._giveContainerGroup(u),b=t.get("animation"),w=this._doRender(g,t,p);b&&!h&&(!d||d==="treemapZoomToNode"||d==="treemapRootToNode")?this._doAnimation(g,w,t,p):w.renderFinally(),this._resetController(n),this._renderBreadcrumb(t,n,c)}},e.prototype._giveContainerGroup=function(t){var r=this._containerGroup;return r||(r=this._containerGroup=new q3,this._initEvents(r),this.group.add(r)),r.x=t.x,r.y=t.y,r},e.prototype._doRender=function(t,r,n){var i=r.getData().tree,o=this._oldTree,l=mg(),c=mg(),d=this._storage,u=[];function h(k,T,D,I){return WSe(r,c,d,n,l,u,k,T,D,I)}b(i.root?[i.root]:[],o&&o.root?[o.root]:[],t,i===o||!o,0);var f=w(d);if(this._oldTree=i,this._storage=c,this._controllerHost){var p=this.seriesModel.layoutInfo,g=i.root.getLayout();g.width===p.width&&g.height===p.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:l,willDeleteEls:f,renderFinally:_};function b(k,T,D,I,O){I?(T=k,oe(k,function(G,Q){!G.isRemoved()&&V(Q,Q)})):new Bd(T,k,P,P).add(V).update(V).remove(va(V,null)).execute();function P(G){return G.getId()}function V(G,Q){var $=G!=null?k[G]:null,ae=Q!=null?T[Q]:null,J=h($,ae,D,O);J&&b($&&$.viewChildren||[],ae&&ae.viewChildren||[],J,I,O+1)}}function w(k){var T=mg();return k&&oe(k,function(D,I){var O=T[I];oe(D,function(P){P&&(O.push(P),f_(P).willDelete=!0)})}),T}function _(){oe(f,function(k){oe(k,function(T){T.parent&&T.parent.remove(T)})}),oe(u,function(k){k.invisible=!0,k.dirty()})}},e.prototype._doAnimation=function(t,r,n,i){var o=n.get("animationDurationUpdate"),l=n.get("animationEasing"),c=(Ut(o)?0:o)||0,d=(Ut(l)?null:l)||"cubicOut",u=FSe();oe(r.willDeleteEls,function(h,f){oe(h,function(p,g){if(!p.invisible){var b=p.parent,w,_=f_(b);if(i&&i.direction==="drillDown")w=b===i.rootNodeGroup?{shape:{x:0,y:0,width:_.nodeWidth,height:_.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var k=0,T=0;_.willDelete||(k=_.nodeWidth/2,T=_.nodeHeight/2),w=f==="nodeGroup"?{x:k,y:T,style:{opacity:0}}:{shape:{x:k,y:T,width:0,height:0},style:{opacity:0}}}w&&u.add(p,w,c,0,d)}})}),oe(this._storage,function(h,f){oe(h,function(p,g){var b=r.lastsForAnimation[f][g],w={};b&&(p instanceof Gt?b.oldX!=null&&(w.x=p.x,w.y=p.y,p.x=b.oldX,p.y=b.oldY):(b.oldShape&&(w.shape=Je({},p.shape),p.setShape(b.oldShape)),b.fadein?(p.setStyle("opacity",0),w.style={opacity:1}):p.style.opacity!==1&&(w.style={opacity:1})),u.add(p,w,c,0,d))})},this),this._state="animating",u.finished(St(function(){this._state="ready",r.renderFinally()},this)).start()},e.prototype._resetController=function(t){var r=this,n=this._controller,i=this._controllerHost;i||(this._controllerHost={target:this.group},i=this._controllerHost);var o=this.seriesModel;n||(n=this._controller=new O0(t.getZr()),n.on("pan",St(this._onPan,this)),n.on("zoom",St(this._onZoom,this))),n.enable(o.get("roam"),{api:t,zInfo:{component:o},triggerInfo:{roamTrigger:o.get("roamTrigger"),isInSelf:function(l,c,d){var u=r._containerGroup;return u?u.getBoundingRect().contain(c-u.x,d-u.y):!1}}}),i.zoomLimit=o.get("scaleLimit"),i.zoom=o.get("zoom")},e.prototype._clearController=function(){var t=this._controller;this._controllerHost=null,t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if(this._state!=="animating"&&(Math.abs(t.dx)>yB||Math.abs(t.dy)>yB)){var r=this.seriesModel.getData().tree.root;if(!r)return;var n=r.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t.dx,y:n.y+t.dy,width:n.width,height:n.height}})}},e.prototype._onZoom=function(t){var r=t.originX,n=t.originY,i=t.scale;if(this._state!=="animating"){var o=this.seriesModel.getData().tree.root;if(!o)return;var l=o.getLayout();if(!l)return;var c=new Jt(l.x,l.y,l.width,l.height),d=null,u=this._controllerHost;d=u.zoomLimit;var h=u.zoom=u.zoom||1;if(h*=i,d){var f=d.min||0,p=d.max||1/0;h=Math.max(Math.min(p,h),f)}var g=h/u.zoom;u.zoom=h;var b=this.seriesModel.layoutInfo;r-=b.x,n-=b.y;var w=Ii();Cc(w,w,[-r,-n]),DT(w,w,[g,g]),Cc(w,w,[r,n]),c.applyTransform(w),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:c.x,y:c.y,width:c.width,height:c.height}})}},e.prototype._initEvents=function(t){var r=this;t.on("click",function(n){if(r._state==="ready"){var i=r.seriesModel.get("nodeClick",!0);if(i){var o=r.findTarget(n.offsetX,n.offsetY);if(o){var l=o.node;if(l.getLayout().isLeafRoot)r._rootToNode(o);else if(i==="zoomToNode")r._zoomToNode(o);else if(i==="link"){var c=l.hostTree.data.getItemModel(l.dataIndex),d=c.get("link",!0),u=c.get("target",!0)||"blank";d&&W2(d,u)}}}}},this)},e.prototype._renderBreadcrumb=function(t,r,n){var i=this;n||(n=t.get("leafDepth",!0)!=null?{node:t.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),n||(n={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new OSe(this.group))).render(t,r,n.node,function(o){i._state!=="animating"&&(KM(t.getViewRoot(),o)?i._rootToNode({node:o}):i._zoomToNode({node:o}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=mg(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,r){var n,i=this.seriesModel.getViewRoot();return i.eachNode({attr:"viewChildren",order:"preorder"},function(o){var l=this._storage.background[o.getRawIndex()];if(l){var c=l.transformCoordToLocal(t,r),d=l.shape;if(d.x<=c[0]&&c[0]<=d.x+d.width&&d.y<=c[1]&&c[1]<=d.y+d.height)n={node:o,offsetX:c[0],offsetY:c[1]};else return!1}},this),n},e.type="treemap",e})(Mr);function mg(){return{nodeGroup:[],background:[],content:[]}}function WSe(a,e,t,r,n,i,o,l,c,d){if(!o)return;var u=o.getLayout(),h=a.getData(),f=o.getModel();if(h.setItemGraphicEl(o.dataIndex,null),!u||!u.isInView)return;var p=u.width,g=u.height,b=u.borderWidth,w=u.invisible,_=o.getRawIndex(),k=l&&l.getRawIndex(),T=o.viewChildren,D=u.upperHeight,I=T&&T.length,O=f.getModel("itemStyle"),P=f.getModel(["emphasis","itemStyle"]),V=f.getModel(["blur","itemStyle"]),G=f.getModel(["select","itemStyle"]),Q=O.get("borderRadius")||0,$=he("nodeGroup",q3);if(!$)return;if(c.add($),$.x=u.x||0,$.y=u.y||0,$.markRedraw(),f_($).nodeWidth=p,f_($).nodeHeight=g,u.isAboveViewRoot)return $;var ae=he("background",bB,d,HSe);ae&&re($,ae,I&&u.upperLabelHeight);var J=f.getModel("emphasis"),U=J.get("focus"),F=J.get("blurScope"),W=J.get("disabled"),K=U==="ancestor"?o.getAncestorsIndices():U==="descendant"?o.getDescendantIndices():U;if(I)Wv($)&&$f($,!1),ae&&($f(ae,!W),h.setItemGraphicEl(o.dataIndex,ae),J4(ae,K,F));else{var ee=he("content",bB,d,USe);ee&&Z($,ee),ae.disableMorphing=!0,ae&&Wv(ae)&&$f(ae,!1),$f($,!W),h.setItemGraphicEl(o.dataIndex,$);var ne=f.getShallow("cursor");ne&&ee.attr("cursor",ne),J4($,K,F)}return $;function re(Se,Ce,we){var xe=na(Ce);if(xe.dataIndex=o.dataIndex,xe.seriesIndex=a.seriesIndex,Ce.setShape({x:0,y:0,width:p,height:g,r:Q}),w)ie(Ce);else{Ce.invisible=!1;var be=o.getVisual("style"),Ee=be.stroke,ze=NB(O);ze.fill=Ee;var Ze=Rf(P);Ze.fill=P.get("borderColor");var Re=Rf(V);Re.fill=V.get("borderColor");var ut=Rf(G);if(ut.fill=G.get("borderColor"),we){var vt=p-2*b;de(Ce,Ee,be.opacity,{x:b,y:0,width:vt,height:D})}else Ce.removeTextContent();Ce.setStyle(ze),Ce.ensureState("emphasis").style=Ze,Ce.ensureState("blur").style=Re,Ce.ensureState("select").style=ut,y0(Ce)}Se.add(Ce)}function Z(Se,Ce){var we=na(Ce);we.dataIndex=o.dataIndex,we.seriesIndex=a.seriesIndex;var xe=Math.max(p-2*b,0),be=Math.max(g-2*b,0);if(Ce.culling=!0,Ce.setShape({x:b,y:b,width:xe,height:be,r:Q}),w)ie(Ce);else{Ce.invisible=!1;var Ee=o.getVisual("style"),ze=Ee.fill,Ze=NB(O);Ze.fill=ze,Ze.decal=Ee.decal;var Re=Rf(P),ut=Rf(V),vt=Rf(G);de(Ce,ze,Ee.opacity,null),Ce.setStyle(Ze),Ce.ensureState("emphasis").style=Re,Ce.ensureState("blur").style=ut,Ce.ensureState("select").style=vt,y0(Ce)}Se.add(Ce)}function ie(Se){!Se.invisible&&i.push(Se)}function de(Se,Ce,we,xe){var be=f.getModel(xe?_B:wB),Ee=ui(f.get("name"),null),ze=be.getShallow("show");ji(Se,fi(f,xe?_B:wB),{defaultText:ze?Ee:null,inheritColor:Ce,defaultOpacity:we,labelFetcher:a,labelDataIndex:o.dataIndex});var Ze=Se.getTextContent();if(Ze){var Re=Ze.style,ut=rN(Re.padding||0);xe&&(Se.setTextConfig({layoutRect:xe}),Ze.disableLabelLayout=!0),Ze.beforeUpdate=function(){var yt=Math.max((xe?xe.width:Se.shape.width)-ut[1]-ut[3],0),Ue=Math.max((xe?xe.height:Se.shape.height)-ut[0]-ut[2],0);(Re.width!==yt||Re.height!==Ue)&&Ze.setStyle({width:yt,height:Ue})},Re.truncateMinChar=2,Re.lineOverflow="truncate",fe(Re,xe,u);var vt=Ze.getState("emphasis");fe(vt?vt.style:null,xe,u)}}function fe(Se,Ce,we){var xe=Se?Se.text:null;if(!Ce&&we.isLeafRoot&&xe!=null){var be=a.get("drillDownIcon",!0);Se.text=be?be+" "+xe:xe}}function he(Se,Ce,we,xe){var be=k!=null&&t[Se][k],Ee=n[Se];return be?(t[Se][k]=null,ve(Ee,be)):w||(be=new Ce,be instanceof rl&&(be.z2=$Se(we,xe)),Oe(Ee,be)),e[Se][_]=be}function ve(Se,Ce){var we=Se[_]={};Ce instanceof q3?(we.oldX=Ce.x,we.oldY=Ce.y):we.oldShape=Je({},Ce.shape)}function Oe(Se,Ce){var we=Se[_]={},xe=o.parentNode,be=Ce instanceof Gt;if(xe&&(!r||r.direction==="drillDown")){var Ee=0,ze=0,Ze=n.background[xe.getRawIndex()];!r&&Ze&&Ze.oldShape&&(Ee=Ze.oldShape.width,ze=Ze.oldShape.height),be?(we.oldX=0,we.oldY=ze):we.oldShape={x:Ee,y:ze,width:0,height:0}}we.fadein=!be}}function $Se(a,e){return a*VSe+e}var ob=oe,YSe=Qt,p_=-1,Ni=(function(){function a(e){var t=e.mappingMethod,r=e.type,n=this.option=$t(e);this.type=r,this.mappingMethod=t,this._normalizeData=ZSe[t];var i=a.visualHandlers[r];this.applyVisual=i.applyVisual,this.getColorMapper=i.getColorMapper,this._normalizedToVisual=i._normalizedToVisual[t],t==="piecewise"?(I5(n),qSe(n)):t==="category"?n.categories?XSe(n):I5(n,!0):(cs(t!=="linear"||n.dataExtent),I5(n))}return a.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},a.prototype.getNormalizer=function(){return St(this._normalizeData,this)},a.listVisualTypes=function(){return Va(a.visualHandlers)},a.isValidType=function(e){return a.visualHandlers.hasOwnProperty(e)},a.eachVisual=function(e,t,r){Qt(e)?oe(e,t,r):t.call(r,e)},a.mapVisual=function(e,t,r){var n,i=rt(e)?[]:Qt(e)?{}:(n=!0,null);return a.eachVisual(e,function(o,l){var c=t.call(r,o,l);n?i=c:i[l]=c}),i},a.retrieveVisuals=function(e){var t={},r;return e&&ob(a.visualHandlers,function(n,i){e.hasOwnProperty(i)&&(t[i]=e[i],r=!0)}),r?t:null},a.prepareVisualTypes=function(e){if(rt(e))e=e.slice();else if(YSe(e)){var t=[];ob(e,function(r,n){t.push(n)}),e=t}else return[];return e.sort(function(r,n){return n==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),e},a.dependsOn=function(e,t){return t==="color"?!!(e&&e.indexOf(t)===0):e===t},a.findPieceIndex=function(e,t,r){for(var n,i=1/0,o=0,l=t.length;o<l;o++){var c=t[o].value;if(c!=null){if(c===e||jt(c)&&c===e+"")return o;r&&f(c,o)}}for(var o=0,l=t.length;o<l;o++){var d=t[o],u=d.interval,h=d.close;if(u){if(u[0]===-1/0){if(rw(h[1],e,u[1]))return o}else if(u[1]===1/0){if(rw(h[0],u[0],e))return o}else if(rw(h[0],u[0],e)&&rw(h[1],e,u[1]))return o;r&&f(u[0],o),r&&f(u[1],o)}}if(r)return e===1/0?t.length-1:e===-1/0?0:n;function f(p,g){var b=Math.abs(p-e);b<i&&(i=b,n=g)}},a.visualHandlers={color:{applyVisual:gg("color"),getColorMapper:function(){var e=this.option;return St(e.mappingMethod==="category"?function(t,r){return!r&&(t=this._normalizeData(t)),Zg.call(this,t)}:function(t,r,n){var i=!!n;return!r&&(t=this._normalizeData(t)),n=fk(t,e.parsedVisual,n),i?n:yc(n,"rgba")},this)},_normalizedToVisual:{linear:function(e){return yc(fk(e,this.option.parsedVisual),"rgba")},category:Zg,piecewise:function(e,t){var r=Z3.call(this,t);return r==null&&(r=yc(fk(e,this.option.parsedVisual),"rgba")),r},fixed:Lf}},colorHue:aw(function(e,t){return oh(e,t)}),colorSaturation:aw(function(e,t){return oh(e,null,t)}),colorLightness:aw(function(e,t){return oh(e,null,null,t)}),colorAlpha:aw(function(e,t){return E2(e,t)}),decal:{applyVisual:gg("decal"),_normalizedToVisual:{linear:null,category:Zg,piecewise:null,fixed:null}},opacity:{applyVisual:gg("opacity"),_normalizedToVisual:X3([0,1])},liftZ:{applyVisual:gg("liftZ"),_normalizedToVisual:{linear:Lf,category:Lf,piecewise:Lf,fixed:Lf}},symbol:{applyVisual:function(e,t,r){var n=this.mapValueToVisual(e);r("symbol",n)},_normalizedToVisual:{linear:jB,category:Zg,piecewise:function(e,t){var r=Z3.call(this,t);return r==null&&(r=jB.call(this,e)),r},fixed:Lf}},symbolSize:{applyVisual:gg("symbolSize"),_normalizedToVisual:X3([0,1])}},a})();function qSe(a){var e=a.pieceList;a.hasSpecialVisual=!1,oe(e,function(t,r){t.originIndex=r,t.visual!=null&&(a.hasSpecialVisual=!0)})}function XSe(a){var e=a.categories,t=a.categoryMap={},r=a.visual;if(ob(e,function(o,l){t[o]=l}),!rt(r)){var n=[];Qt(r)?ob(r,function(o,l){var c=t[l];n[c??p_]=o}):n[p_]=r,r=WX(a,n)}for(var i=e.length-1;i>=0;i--)r[i]==null&&(delete t[e[i]],e.pop())}function I5(a,e){var t=a.visual,r=[];Qt(t)?ob(t,function(i){r.push(i)}):t!=null&&r.push(t);var n={color:1,symbol:1};!e&&r.length===1&&!n.hasOwnProperty(a.type)&&(r[1]=r[0]),WX(a,r)}function aw(a){return{applyVisual:function(e,t,r){var n=this.mapValueToVisual(e);r("color",a(t("color"),n))},_normalizedToVisual:X3([0,1])}}function jB(a){var e=this.option.visual;return e[Math.round(ur(a,[0,1],[0,e.length-1],!0))]||{}}function gg(a){return function(e,t,r){r(a,this.mapValueToVisual(e))}}function Zg(a){var e=this.option.visual;return e[this.option.loop&&a!==p_?a%e.length:a]}function Lf(){return this.option.visual[0]}function X3(a){return{linear:function(e){return ur(e,a,this.option.visual,!0)},category:Zg,piecewise:function(e,t){var r=Z3.call(this,t);return r==null&&(r=ur(e,a,this.option.visual,!0)),r},fixed:Lf}}function Z3(a){var e=this.option,t=e.pieceList;if(e.hasSpecialVisual){var r=Ni.findPieceIndex(a,t),n=t[r];if(n&&n.visual)return n.visual[this.type]}}function WX(a,e){return a.visual=e,a.type==="color"&&(a.parsedVisual=it(e,function(t){var r=qs(t);return r||[0,0,0,1]})),e}var ZSe={linear:function(a){return ur(a,this.option.dataExtent,[0,1],!0)},piecewise:function(a){var e=this.option.pieceList,t=Ni.findPieceIndex(a,e,!0);if(t!=null)return ur(t,[0,e.length-1],[0,1],!0)},category:function(a){var e=this.option.categories?this.option.categoryMap[a]:a;return e??p_},fixed:Bn};function rw(a,e,t){return a?e<=t:e<t}var KSe="itemStyle",$X=Ea();const QSe={seriesType:"treemap",reset:function(a){var e=a.getData().tree,t=e.root;t.isRemoved()||YX(t,{},a.getViewRoot().getAncestors(),a)}};function YX(a,e,t,r){var n=a.getModel(),i=a.getLayout(),o=a.hostTree.data;if(!(!i||i.invisible||!i.isInView)){var l=n.getModel(KSe),c=JSe(l,e,r),d=o.ensureUniqueItemVisual(a.dataIndex,"style"),u=l.get("borderColor"),h=l.get("borderColorSaturation"),f;h!=null&&(f=SB(c),u=eke(h,f)),d.stroke=u;var p=a.viewChildren;if(!p||!p.length)f=SB(c),d.fill=f;else{var g=tke(a,n,i,l,c,p);oe(p,function(b,w){if(b.depth>=t.length||b===t[b.depth]){var _=ake(n,c,b,w,g,r);YX(b,_,t,r)}})}}}function JSe(a,e,t){var r=Je({},e),n=t.designatedVisualItemStyle;return oe(["color","colorAlpha","colorSaturation"],function(i){n[i]=e[i];var o=a.get(i);n[i]=null,o!=null&&(r[i]=o)}),r}function SB(a){var e=R5(a,"color");if(e){var t=R5(a,"colorAlpha"),r=R5(a,"colorSaturation");return r&&(e=oh(e,null,null,r)),t&&(e=E2(e,t)),e}}function eke(a,e){return e!=null?oh(e,null,null,a):null}function R5(a,e){var t=a[e];if(t!=null&&t!=="none")return t}function tke(a,e,t,r,n,i){if(!(!i||!i.length)){var o=L5(e,"color")||n.color!=null&&n.color!=="none"&&(L5(e,"colorAlpha")||L5(e,"colorSaturation"));if(o){var l=e.get("visualMin"),c=e.get("visualMax"),d=t.dataExtent.slice();l!=null&&l<d[0]&&(d[0]=l),c!=null&&c>d[1]&&(d[1]=c);var u=e.get("colorMappingBy"),h={type:o.name,dataExtent:d,visual:o.range};h.type==="color"&&(u==="index"||u==="id")?(h.mappingMethod="category",h.loop=!0):h.mappingMethod="linear";var f=new Ni(h);return $X(f).drColorMappingBy=u,f}}}function L5(a,e){var t=a.get(e);return rt(t)&&t.length?{name:e,range:t}:null}function ake(a,e,t,r,n,i){var o=Je({},e);if(n){var l=n.type,c=l==="color"&&$X(n).drColorMappingBy,d=c==="index"?r:c==="id"?i.mapIdToIndex(t.getId()):t.getValue(a.get("visualDimension"));o[l]=n.mapValueToVisual(d)}return o}var lb=Math.max,x_=Math.min,kB=Gi,QM=oe,qX=["itemStyle","borderWidth"],rke=["itemStyle","gapWidth"],nke=["upperLabel","show"],ike=["upperLabel","height"];const ske={seriesType:"treemap",reset:function(a,e,t,r){var n=a.option,i=pi(a,t).refContainer,o=ln(a.getBoxLayoutParams(),i),l=n.size||[],c=_t(kB(o.width,l[0]),i.width),d=_t(kB(o.height,l[1]),i.height),u=r&&r.type,h=["treemapZoomToNode","treemapRootToNode"],f=sb(r,h,a),p=u==="treemapRender"||u==="treemapMove"?r.rootRect:null,g=a.getViewRoot(),b=HX(g);if(u!=="treemapMove"){var w=u==="treemapZoomToNode"?hke(a,f,g,c,d):p?[p.width,p.height]:[c,d],_=n.sort;_&&_!=="asc"&&_!=="desc"&&(_="desc");var k={squareRatio:n.squareRatio,sort:_,leafDepth:n.leafDepth};g.hostTree.clearLayouts();var T={x:0,y:0,width:w[0],height:w[1],area:w[0]*w[1]};g.setLayout(T),XX(g,k,!1,0),T=g.getLayout(),QM(b,function(I,O){var P=(b[O+1]||g).getValue();I.setLayout(Je({dataExtent:[P,P],borderWidth:0,upperHeight:0},T))})}var D=a.getData().tree.root;D.setLayout(fke(o,p,f),!0),a.setLayoutInfo(o),ZX(D,new Jt(-o.x,-o.y,t.getWidth(),t.getHeight()),b,g,0)}};function XX(a,e,t,r){var n,i;if(!a.isRemoved()){var o=a.getLayout();n=o.width,i=o.height;var l=a.getModel(),c=l.get(qX),d=l.get(rke)/2,u=KX(l),h=Math.max(c,u),f=c-d,p=h-d;a.setLayout({borderWidth:c,upperHeight:h,upperLabelHeight:u},!0),n=lb(n-2*f,0),i=lb(i-f-p,0);var g=n*i,b=oke(a,l,g,e,t,r);if(b.length){var w={x:f,y:p,width:n,height:i},_=x_(n,i),k=1/0,T=[];T.area=0;for(var D=0,I=b.length;D<I;){var O=b[D];T.push(O),T.area+=O.getLayout().area;var P=uke(T,_,e.squareRatio);P<=k?(D++,k=P):(T.area-=T.pop().getLayout().area,CB(T,_,w,d,!1),_=x_(w.width,w.height),T.length=T.area=0,k=1/0)}if(T.length&&CB(T,_,w,d,!0),!t){var V=l.get("childrenVisibleMin");V!=null&&g<V&&(t=!0)}for(var D=0,I=b.length;D<I;D++)XX(b[D],e,t,r+1)}}}function oke(a,e,t,r,n,i){var o=a.children||[],l=r.sort;l!=="asc"&&l!=="desc"&&(l=null);var c=r.leafDepth!=null&&r.leafDepth<=i;if(n&&!c)return a.viewChildren=[];o=hr(o,function(p){return!p.isRemoved()}),cke(o,l);var d=dke(e,o,l);if(d.sum===0)return a.viewChildren=[];if(d.sum=lke(e,t,d.sum,l,o),d.sum===0)return a.viewChildren=[];for(var u=0,h=o.length;u<h;u++){var f=o[u].getValue()/d.sum*t;o[u].setLayout({area:f})}return c&&(o.length&&a.setLayout({isLeafRoot:!0},!0),o.length=0),a.viewChildren=o,a.setLayout({dataExtent:d.dataExtent},!0),o}function lke(a,e,t,r,n){if(!r)return t;for(var i=a.get("visibleMin"),o=n.length,l=o,c=o-1;c>=0;c--){var d=n[r==="asc"?o-c-1:c].getValue();d/t*e<i&&(l=c,t-=d)}return r==="asc"?n.splice(0,o-l):n.splice(l,o-l),t}function cke(a,e){return e&&a.sort(function(t,r){var n=e==="asc"?t.getValue()-r.getValue():r.getValue()-t.getValue();return n===0?e==="asc"?t.dataIndex-r.dataIndex:r.dataIndex-t.dataIndex:n}),a}function dke(a,e,t){for(var r=0,n=0,i=e.length;n<i;n++)r+=e[n].getValue();var o=a.get("visualDimension"),l;return!e||!e.length?l=[NaN,NaN]:o==="value"&&t?(l=[e[e.length-1].getValue(),e[0].getValue()],t==="asc"&&l.reverse()):(l=[1/0,-1/0],QM(e,function(c){var d=c.getValue(o);d<l[0]&&(l[0]=d),d>l[1]&&(l[1]=d)})),{sum:r,dataExtent:l}}function uke(a,e,t){for(var r=0,n=1/0,i=0,o=void 0,l=a.length;i<l;i++)o=a[i].getLayout().area,o&&(o<n&&(n=o),o>r&&(r=o));var c=a.area*a.area,d=e*e*t;return c?lb(d*r/c,c/(d*n)):1/0}function CB(a,e,t,r,n){var i=e===t.width?0:1,o=1-i,l=["x","y"],c=["width","height"],d=t[l[i]],u=e?a.area/e:0;(n||u>t[c[o]])&&(u=t[c[o]]);for(var h=0,f=a.length;h<f;h++){var p=a[h],g={},b=u?p.getLayout().area/u:0,w=g[c[o]]=lb(u-2*r,0),_=t[l[i]]+t[c[i]]-d,k=h===f-1||_<b?_:b,T=g[c[i]]=lb(k-2*r,0);g[l[o]]=t[l[o]]+x_(r,w/2),g[l[i]]=d+x_(r,T/2),d+=k,p.setLayout(g,!0)}t[l[o]]+=u,t[c[o]]-=u}function hke(a,e,t,r,n){var i=(e||{}).node,o=[r,n];if(!i||i===t)return o;for(var l,c=r*n,d=c*a.option.zoomToNodeRatio;l=i.parentNode;){for(var u=0,h=l.children,f=0,p=h.length;f<p;f++)u+=h[f].getValue();var g=i.getValue();if(g===0)return o;d*=u/g;var b=l.getModel(),w=b.get(qX),_=Math.max(w,KX(b));d+=4*w*w+(3*w+_)*Math.pow(d,.5),d>DO&&(d=DO),i=l}d<c&&(d=c);var k=Math.pow(d/c,.5);return[r*k,n*k]}function fke(a,e,t){if(e)return{x:e.x,y:e.y};var r={x:0,y:0};if(!t)return r;var n=t.node,i=n.getLayout();if(!i)return r;for(var o=[i.width/2,i.height/2],l=n;l;){var c=l.getLayout();o[0]+=c.x,o[1]+=c.y,l=l.parentNode}return{x:a.width/2-o[0],y:a.height/2-o[1]}}function ZX(a,e,t,r,n){var i=a.getLayout(),o=t[n],l=o&&o===a;if(!(o&&!l||n===t.length&&a!==r)){a.setLayout({isInView:!0,invisible:!l&&!e.intersect(i),isAboveViewRoot:l},!0);var c=new Jt(e.x-i.x,e.y-i.y,e.width,e.height);QM(a.viewChildren||[],function(d){ZX(d,c,t,r,n+1)})}}function KX(a){return a.get(nke)?a.get(ike):0}function pke(a){a.registerSeriesModel(ISe),a.registerChartView(GSe),a.registerVisual(QSe),a.registerLayout(ske),DSe(a)}function xke(a){var e=a.findComponents({mainType:"legend"});!e||!e.length||a.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),n=t.getGraph(),i=n.data,o=r.mapArray(r.getName);i.filterSelf(function(l){var c=i.getItemModel(l),d=c.getShallow("category");if(d!=null){Xa(d)&&(d=o[d]);for(var u=0;u<e.length;u++)if(!e[u].isSelected(d))return!1}return!0})})}function mke(a){var e={};a.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),n=t.getData(),i={};r.each(function(o){var l=r.getName(o);i["ec-"+l]=o;var c=r.getItemModel(o),d=c.getModel("itemStyle").getItemStyle();d.fill||(d.fill=t.getColorFromPalette(l,e)),r.setItemVisual(o,"style",d);for(var u=["symbol","symbolSize","symbolKeepAspect"],h=0;h<u.length;h++){var f=c.getShallow(u[h],!0);f!=null&&r.setItemVisual(o,u[h],f)}}),r.count()&&n.each(function(o){var l=n.getItemModel(o),c=l.getShallow("category");if(c!=null){jt(c)&&(c=i["ec-"+c]);var d=r.getItemVisual(c,"style"),u=n.ensureUniqueItemVisual(o,"style");Je(u,d);for(var h=["symbol","symbolSize","symbolKeepAspect"],f=0;f<h.length;f++)n.setItemVisual(o,h[f],r.getItemVisual(c,h[f]))}})})}function nw(a){return a instanceof Array||(a=[a,a]),a}function gke(a){a.eachSeriesByType("graph",function(e){var t=e.getGraph(),r=e.getEdgeData(),n=nw(e.get("edgeSymbol")),i=nw(e.get("edgeSymbolSize"));r.setVisual("fromSymbol",n&&n[0]),r.setVisual("toSymbol",n&&n[1]),r.setVisual("fromSymbolSize",i&&i[0]),r.setVisual("toSymbolSize",i&&i[1]),r.setVisual("style",e.getModel("lineStyle").getLineStyle()),r.each(function(o){var l=r.getItemModel(o),c=t.getEdgeByIndex(o),d=nw(l.getShallow("symbol",!0)),u=nw(l.getShallow("symbolSize",!0)),h=l.getModel("lineStyle").getLineStyle(),f=r.ensureUniqueItemVisual(o,"style");switch(Je(f,h),f.stroke){case"source":{var p=c.node1.getVisual("style");f.stroke=p&&p.fill;break}case"target":{var p=c.node2.getVisual("style");f.stroke=p&&p.fill;break}}d[0]&&c.setVisual("fromSymbol",d[0]),d[1]&&c.setVisual("toSymbol",d[1]),u[0]&&c.setVisual("fromSymbolSize",u[0]),u[1]&&c.setVisual("toSymbolSize",u[1])})})}var K3="-->",BN=function(a){return a.get("autoCurveness")||null},QX=function(a,e){var t=BN(a),r=20,n=[];if(Xa(t))r=t;else if(rt(t)){a.__curvenessList=t;return}e>r&&(r=e);var i=r%2?r+2:r+3;n=[];for(var o=0;o<i;o++)n.push((o%2?o+1:o)/10*(o%2?-1:1));a.__curvenessList=n},cb=function(a,e,t){var r=[a.id,a.dataIndex].join("."),n=[e.id,e.dataIndex].join(".");return[t.uid,r,n].join(K3)},JX=function(a){var e=a.split(K3);return[e[0],e[2],e[1]].join(K3)},vke=function(a,e){var t=cb(a.node1,a.node2,e);return e.__edgeMap[t]},bke=function(a,e){var t=Q3(cb(a.node1,a.node2,e),e),r=Q3(cb(a.node2,a.node1,e),e);return t+r},Q3=function(a,e){var t=e.__edgeMap;return t[a]?t[a].length:0};function yke(a){BN(a)&&(a.__curvenessList=[],a.__edgeMap={},QX(a))}function wke(a,e,t,r){if(BN(t)){var n=cb(a,e,t),i=t.__edgeMap,o=i[JX(n)];i[n]&&!o?i[n].isForward=!0:o&&i[n]&&(o.isForward=!0,i[n].isForward=!1),i[n]=i[n]||[],i[n].push(r)}}function JM(a,e,t,r){var n=BN(e),i=rt(n);if(!n)return null;var o=vke(a,e);if(!o)return null;for(var l=-1,c=0;c<o.length;c++)if(o[c]===t){l=c;break}var d=bke(a,e);QX(e,d),a.lineStyle=a.lineStyle||{};var u=cb(a.node1,a.node2,e),h=e.__curvenessList,f=i||d%2?0:1;if(o.isForward)return h[f+l];var p=JX(u),g=Q3(p,e),b=h[l+g+f];return r?i?n&&n[0]===0?(g+f)%2?b:-b:((g%2?0:1)+f)%2?b:-b:(g+f)%2?b:-b:h[l+g+f]}function eZ(a){var e=a.coordinateSystem;if(!(e&&e.type!=="view")){var t=a.getGraph();t.eachNode(function(r){var n=r.getModel();r.setLayout([+n.get("x"),+n.get("y")])}),eE(t,a)}}function eE(a,e){a.eachEdge(function(t,r){var n=No(t.getModel().get(["lineStyle","curveness"]),-JM(t,e,r,!0),0),i=kd(t.node1.getLayout()),o=kd(t.node2.getLayout()),l=[i,o];+n&&l.push([(i[0]+o[0])/2-(i[1]-o[1])*n,(i[1]+o[1])/2-(o[0]-i[0])*n]),t.setLayout(l)})}function _ke(a,e){a.eachSeriesByType("graph",function(t){var r=t.get("layout"),n=t.coordinateSystem;if(n&&n.type!=="view"){var i=t.getData(),o=[];oe(n.dimensions,function(f){o=o.concat(i.mapDimensionsAll(f))});for(var l=0;l<i.count();l++){for(var c=[],d=!1,u=0;u<o.length;u++){var h=i.get(o[u],l);isNaN(h)||(d=!0),c.push(h)}d?i.setItemLayout(l,n.dataToPoint(c)):i.setItemLayout(l,[NaN,NaN])}eE(i.graph,t)}else(!r||r==="none")&&eZ(t)})}function Kg(a){var e=a.coordinateSystem;if(e.type!=="view")return 1;var t=a.option.nodeScaleRatio,r=e.scaleX,n=e.getZoom(),i=(n-1)*t+1;return i/r}function Qg(a){var e=a.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var AB=Math.PI,O5=[];function tE(a,e,t,r){var n=a.coordinateSystem;if(!(n&&n.type!=="view")){var i=n.getBoundingRect(),o=a.getData(),l=o.graph,c=i.width/2+i.x,d=i.height/2+i.y,u=Math.min(i.width,i.height)/2,h=o.count();if(o.setLayout({cx:c,cy:d}),!!h){if(t){var f=n.pointToData(r),p=f[0],g=f[1],b=[p-c,g-d];Ux(b,b),Rw(b,b,u),t.setLayout([c+b[0],d+b[1]],!0);var w=a.get(["circular","rotateLabel"]);tZ(t,w,c,d)}Nke[e](a,l,o,u,c,d,h),l.eachEdge(function(_,k){var T=No(_.getModel().get(["lineStyle","curveness"]),JM(_,a,k),0),D=kd(_.node1.getLayout()),I=kd(_.node2.getLayout()),O,P=(D[0]+I[0])/2,V=(D[1]+I[1])/2;+T&&(T*=3,O=[c*T+P*(1-T),d*T+V*(1-T)]),_.setLayout([D,I,O])})}}}var Nke={value:function(a,e,t,r,n,i,o){var l=0,c=t.getSum("value"),d=Math.PI*2/(c||o);e.eachNode(function(u){var h=u.getValue("value"),f=d*(c?h:1)/2;l+=f,u.setLayout([r*Math.cos(l)+n,r*Math.sin(l)+i]),l+=f})},symbolSize:function(a,e,t,r,n,i,o){var l=0;O5.length=o;var c=Kg(a);e.eachNode(function(h){var f=Qg(h);isNaN(f)&&(f=2),f<0&&(f=0),f*=c;var p=Math.asin(f/2/r);isNaN(p)&&(p=AB/2),O5[h.dataIndex]=p,l+=p*2});var d=(2*AB-l)/o/2,u=0;e.eachNode(function(h){var f=d+O5[h.dataIndex];u+=f,(!h.getLayout()||!h.getLayout().fixed)&&h.setLayout([r*Math.cos(u)+n,r*Math.sin(u)+i]),u+=f})}};function tZ(a,e,t,r){var n=a.getGraphicEl();if(n){var i=a.getModel(),o=i.get(["label","rotate"])||0,l=n.getSymbolPath();if(e){var c=a.getLayout(),d=Math.atan2(c[1]-r,c[0]-t);d<0&&(d=Math.PI*2+d);var u=c[0]<t;u&&(d=d-Math.PI);var h=u?"left":"right";l.setTextConfig({rotation:-d,position:h,origin:"center"});var f=l.ensureState("emphasis");Je(f.textConfig||(f.textConfig={}),{position:h})}else l.setTextConfig({rotation:o*=Math.PI/180})}}function jke(a){a.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&tE(e,"symbolSize")})}var Mp=y4;function Ske(a,e,t){for(var r=a,n=e,i=t.rect,o=i.width,l=i.height,c=[i.x+o/2,i.y+l/2],d=t.gravity==null?.1:t.gravity,u=0;u<r.length;u++){var h=r[u];h.p||(h.p=A0(o*(Math.random()-.5)+c[0],l*(Math.random()-.5)+c[1])),h.pp=kd(h.p),h.edges=null}var f=t.friction==null?.6:t.friction,p=f,g,b;return{warmUp:function(){p=f*.8},setFixed:function(w){r[w].fixed=!0},setUnfixed:function(w){r[w].fixed=!1},beforeStep:function(w){g=w},afterStep:function(w){b=w},step:function(w){g&&g(r,n);for(var _=[],k=r.length,T=0;T<n.length;T++){var D=n[T];if(!D.ignoreForceLayout){var I=D.n1,O=D.n2;Gf(_,O.p,I.p);var P=w4(_)-D.d,V=O.w/(I.w+O.w);isNaN(V)&&(V=0),Ux(_,_),!I.fixed&&Mp(I.p,I.p,_,V*P*p),!O.fixed&&Mp(O.p,O.p,_,-(1-V)*P*p)}}for(var T=0;T<k;T++){var G=r[T];G.fixed||(Gf(_,c,G.p),Mp(G.p,G.p,_,d*p))}for(var T=0;T<k;T++)for(var I=r[T],Q=T+1;Q<k;Q++){var O=r[Q];Gf(_,O.p,I.p);var P=w4(_);P===0&&(MT(_,Math.random()-.5,Math.random()-.5),P=1);var $=(I.rep+O.rep)/P/P;!I.fixed&&Mp(I.pp,I.pp,_,$),!O.fixed&&Mp(O.pp,O.pp,_,-$)}for(var ae=[],T=0;T<k;T++){var G=r[T];G.fixed||(Gf(ae,G.p,G.pp),Mp(G.p,G.p,ae,p),bs(G.pp,G.p))}p=p*.992;var J=p<.01;b&&b(r,n,J),w&&w(J)}}}function kke(a){a.eachSeriesByType("graph",function(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view"))if(e.get("layout")==="force"){var r=e.preservedPoints||{},n=e.getGraph(),i=n.data,o=n.edgeData,l=e.getModel("force"),c=l.get("initLayout");e.preservedPoints?i.each(function(T){var D=i.getId(T);i.setItemLayout(T,r[D]||[NaN,NaN])}):!c||c==="none"?eZ(e):c==="circular"&&tE(e,"value");var d=i.getDataExtent("value"),u=o.getDataExtent("value"),h=l.get("repulsion"),f=l.get("edgeLength"),p=rt(h)?h:[h,h],g=rt(f)?f:[f,f];g=[g[1],g[0]];var b=i.mapArray("value",function(T,D){var I=i.getItemLayout(D),O=ur(T,d,p);return isNaN(O)&&(O=(p[0]+p[1])/2),{w:O,rep:O,fixed:i.getItemModel(D).get("fixed"),p:!I||isNaN(I[0])||isNaN(I[1])?null:I}}),w=o.mapArray("value",function(T,D){var I=n.getEdgeByIndex(D),O=ur(T,u,g);isNaN(O)&&(O=(g[0]+g[1])/2);var P=I.getModel(),V=No(I.getModel().get(["lineStyle","curveness"]),-JM(I,e,D,!0),0);return{n1:b[I.node1.dataIndex],n2:b[I.node2.dataIndex],d:O,curveness:V,ignoreForceLayout:P.get("ignoreForceLayout")}}),_=t.getBoundingRect(),k=Ske(b,w,{rect:_,gravity:l.get("gravity"),friction:l.get("friction")});k.beforeStep(function(T,D){for(var I=0,O=T.length;I<O;I++)T[I].fixed&&bs(T[I].p,n.getNodeByIndex(I).getLayout())}),k.afterStep(function(T,D,I){for(var O=0,P=T.length;O<P;O++)T[O].fixed||n.getNodeByIndex(O).setLayout(T[O].p),r[i.getId(O)]=T[O].p;for(var O=0,P=D.length;O<P;O++){var V=D[O],G=n.getEdgeByIndex(O),Q=V.n1.p,$=V.n2.p,ae=G.getLayout();ae=ae?ae.slice():[],ae[0]=ae[0]||[],ae[1]=ae[1]||[],bs(ae[0],Q),bs(ae[1],$),+V.curveness&&(ae[2]=[(Q[0]+$[0])/2-(Q[1]-$[1])*V.curveness,(Q[1]+$[1])/2-($[0]-Q[0])*V.curveness]),G.setLayout(ae)}}),e.forceLayout=k,e.preservedPoints=r,k.step()}else e.forceLayout=null})}function Cke(a,e,t){var r=pi(a,e),n=Je(a.getBoxLayoutParams(),{aspect:t}),i=ln(n,r.refContainer);return M$(a,i,t)}function Ake(a,e){var t=[];return a.eachSeriesByType("graph",function(r){Lb({targetModel:r,coordSysType:"view",coordSysProvider:n,isDefaultDataCoordSys:!0});function n(){var i=r.getData(),o=i.mapArray(function(g){var b=i.getItemModel(g);return[+b.get("x"),+b.get("y")]}),l=[],c=[];fN(o,l,c),c[0]-l[0]===0&&(c[0]+=1,l[0]-=1),c[1]-l[1]===0&&(c[1]+=1,l[1]-=1);var d=(c[0]-l[0])/(c[1]-l[1]),u=Cke(r,e,d);isNaN(d)&&(l=[u.x,u.y],c=[u.x+u.width,u.y+u.height]);var h=c[0]-l[0],f=c[1]-l[1],p=new P0(null,{api:e,ecModel:a});return p.zoomLimit=r.get("scaleLimit"),p.setBoundingRect(l[0],l[1],h,f),p.setViewRect(u.x,u.y,u.width,u.height),p.setCenter(r.get("center")),p.setZoom(r.get("zoom")),t.push(p),p}}),t}var TB=qn.prototype,P5=Mb.prototype,aZ=(function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a})();(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e})(aZ);function B5(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var rZ=(function(a){Le(e,a);function e(t){var r=a.call(this,t)||this;return r.type="ec-line",r}return e.prototype.getDefaultStyle=function(){return{stroke:Fe.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new aZ},e.prototype.buildPath=function(t,r){B5(r)?TB.buildPath.call(this,t,r):P5.buildPath.call(this,t,r)},e.prototype.pointAt=function(t){return B5(this.shape)?TB.pointAt.call(this,t):P5.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var r=this.shape,n=B5(r)?[r.x2-r.x1,r.y2-r.y1]:P5.tangentAt.call(this,t);return Ux(n,n)},e})(Ia),z5=["fromSymbol","toSymbol"];function MB(a){return"_"+a+"Type"}function EB(a,e,t){var r=e.getItemVisual(t,a);if(!r||r==="none")return r;var n=e.getItemVisual(t,a+"Size"),i=e.getItemVisual(t,a+"Rotate"),o=e.getItemVisual(t,a+"Offset"),l=e.getItemVisual(t,a+"KeepAspect"),c=Jx(n),d=I0(o||0,c);return r+c+d+(i||"")+(l||"")}function DB(a,e,t){var r=e.getItemVisual(t,a);if(!(!r||r==="none")){var n=e.getItemVisual(t,a+"Size"),i=e.getItemVisual(t,a+"Rotate"),o=e.getItemVisual(t,a+"Offset"),l=e.getItemVisual(t,a+"KeepAspect"),c=Jx(n),d=I0(o||0,c),u=ei(r,-c[0]/2+d[0],-c[1]/2+d[1],c[0],c[1],null,l);return u.__specifiedRotation=i==null||isNaN(i)?void 0:+i*Math.PI/180||0,u.name=a,u}}function Tke(a){var e=new rZ({name:"line",subPixelOptimize:!0});return J3(e.shape,a),e}function J3(a,e){a.x1=e[0][0],a.y1=e[0][1],a.x2=e[1][0],a.y2=e[1][1],a.percent=1;var t=e[2];t?(a.cpx1=t[0],a.cpy1=t[1]):(a.cpx1=NaN,a.cpy1=NaN)}var aE=(function(a){Le(e,a);function e(t,r,n){var i=a.call(this)||this;return i._createLine(t,r,n),i}return e.prototype._createLine=function(t,r,n){var i=t.hostModel,o=t.getItemLayout(r),l=t.getItemVisual(r,"z2"),c=Tke(o);c.shape.percent=0,en(c,{z2:Pt(l,0),shape:{percent:1}},i,r),this.add(c),oe(z5,function(d){var u=DB(d,t,r);this.add(u),this[MB(d)]=EB(d,t,r)},this),this._updateCommonStl(t,r,n)},e.prototype.updateData=function(t,r,n){var i=t.hostModel,o=this.childOfName("line"),l=t.getItemLayout(r),c={shape:{}};J3(c.shape,l),rr(o,c,i,r),oe(z5,function(d){var u=EB(d,t,r),h=MB(d);if(this[h]!==u){this.remove(this.childOfName(d));var f=DB(d,t,r);this.add(f)}this[h]=u},this),this._updateCommonStl(t,r,n)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,r,n){var i=t.hostModel,o=this.childOfName("line"),l=n&&n.emphasisLineStyle,c=n&&n.blurLineStyle,d=n&&n.selectLineStyle,u=n&&n.labelStatesModels,h=n&&n.emphasisDisabled,f=n&&n.focus,p=n&&n.blurScope;if(!n||t.hasItemOption){var g=t.getItemModel(r),b=g.getModel("emphasis");l=b.getModel("lineStyle").getLineStyle(),c=g.getModel(["blur","lineStyle"]).getLineStyle(),d=g.getModel(["select","lineStyle"]).getLineStyle(),h=b.get("disabled"),f=b.get("focus"),p=b.get("blurScope"),u=fi(g)}var w=t.getItemVisual(r,"style"),_=w.stroke;o.useStyle(w),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=l,o.ensureState("blur").style=c,o.ensureState("select").style=d,oe(z5,function(O){var P=this.childOfName(O);if(P){P.setColor(_),P.style.opacity=w.opacity;for(var V=0;V<Cs.length;V++){var G=Cs[V],Q=o.getState(G);if(Q){var $=Q.style||{},ae=P.ensureState(G),J=ae.style||(ae.style={});$.stroke!=null&&(J[P.__isEmptyBrush?"stroke":"fill"]=$.stroke),$.opacity!=null&&(J.opacity=$.opacity)}}P.markRedraw()}},this);var k=i.getRawValue(r);ji(this,u,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(O,P){return i.getFormattedLabel(O,P,t.dataType)}},inheritColor:_||Fe.color.neutral99,defaultOpacity:w.opacity,defaultText:(k==null?t.getName(r):isFinite(k)?Yn(k):k)+""});var T=this.getTextContent();if(T){var D=u.normal;T.__align=T.style.align,T.__verticalAlign=T.style.verticalAlign,T.__position=D.get("position")||"middle";var I=D.get("distance");rt(I)||(I=[I,I]),T.__labelDistance=I}this.setTextConfig({position:null,local:!0,inside:!1}),on(this,f,p,h)},e.prototype.highlight=function(){Od(this)},e.prototype.downplay=function(){Pd(this)},e.prototype.updateLayout=function(t,r){this.setLinePoints(t.getItemLayout(r))},e.prototype.setLinePoints=function(t){var r=this.childOfName("line");J3(r.shape,t),r.dirty()},e.prototype.beforeUpdate=function(){var t=this,r=t.childOfName("fromSymbol"),n=t.childOfName("toSymbol"),i=t.getTextContent();if(!r&&!n&&(!i||i.ignore))return;for(var o=1,l=this.parent;l;)l.scaleX&&(o/=l.scaleX),l=l.parent;var c=t.childOfName("line");if(!this.__dirty&&!c.__dirty)return;var d=c.shape.percent,u=c.pointAt(0),h=c.pointAt(d),f=Gf([],h,u);Ux(f,f);function p(Q,$){var ae=Q.__specifiedRotation;if(ae==null){var J=c.tangentAt($);Q.attr("rotation",($===1?-1:1)*Math.PI/2-Math.atan2(J[1],J[0]))}else Q.attr("rotation",ae)}if(r&&(r.setPosition(u),p(r,0),r.scaleX=r.scaleY=o*d,r.markRedraw()),n&&(n.setPosition(h),p(n,1),n.scaleX=n.scaleY=o*d,n.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var g=void 0,b=void 0,w=i.__labelDistance,_=w[0]*o,k=w[1]*o,T=d/2,D=c.tangentAt(T),I=[D[1],-D[0]],O=c.pointAt(T);I[1]>0&&(I[0]=-I[0],I[1]=-I[1]);var P=D[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var V=-Math.atan2(D[1],D[0]);h[0]<u[0]&&(V=Math.PI+V),i.rotation=V}var G=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":G=-k,b="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":G=k,b="top";break;default:G=0,b="middle"}switch(i.__position){case"end":i.x=f[0]*_+h[0],i.y=f[1]*k+h[1],g=f[0]>.8?"left":f[0]<-.8?"right":"center",b=f[1]>.8?"top":f[1]<-.8?"bottom":"middle";break;case"start":i.x=-f[0]*_+u[0],i.y=-f[1]*k+u[1],g=f[0]>.8?"right":f[0]<-.8?"left":"center",b=f[1]>.8?"bottom":f[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=_*P+u[0],i.y=u[1]+G,g=D[0]<0?"right":"left",i.originX=-_*P,i.originY=-G;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=O[0],i.y=O[1]+G,g="center",i.originY=-G;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-_*P+h[0],i.y=h[1]+G,g=D[0]>=0?"right":"left",i.originX=_*P,i.originY=-G;break}i.scaleX=i.scaleY=o,i.setStyle({verticalAlign:i.__verticalAlign||b,align:i.__align||g})}},e})(Gt),rE=(function(){function a(e){this.group=new Gt,this._LineCtor=e||aE}return a.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var r=this,n=r.group,i=r._lineData;r._lineData=e,i||n.removeAll();var o=IB(e);e.diff(i).add(function(l){t._doAdd(e,l,o)}).update(function(l,c){t._doUpdate(i,e,c,l,o)}).remove(function(l){n.remove(i.getItemGraphicEl(l))}).execute()},a.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,r){t.updateLayout(e,r)},this)},a.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=IB(e),this._lineData=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function r(l){!l.isGroup&&!Mke(l)&&(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var n=e.start;n<e.end;n++){var i=t.getItemLayout(n);if(F5(i)){var o=new this._LineCtor(t,n,this._seriesScope);o.traverse(r),this.group.add(o),t.setItemGraphicEl(n,o),this._progressiveEls.push(o)}}},a.prototype.remove=function(){this.group.removeAll()},a.prototype.eachRendered=function(e){Ah(this._progressiveEls||this.group,e)},a.prototype._doAdd=function(e,t,r){var n=e.getItemLayout(t);if(F5(n)){var i=new this._LineCtor(e,t,r);e.setItemGraphicEl(t,i),this.group.add(i)}},a.prototype._doUpdate=function(e,t,r,n,i){var o=e.getItemGraphicEl(r);if(!F5(t.getItemLayout(n))){this.group.remove(o);return}o?o.updateData(t,n,i):o=new this._LineCtor(t,n,i),t.setItemGraphicEl(n,o),this.group.add(o)},a})();function Mke(a){return a.animators&&a.animators.length>0}function IB(a){var e=a.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:fi(e)}}function RB(a){return isNaN(a[0])||isNaN(a[1])}function F5(a){return a&&!RB(a[0])&&!RB(a[1])}var V5=[],H5=[],U5=[],Ep=Ei,G5=a0,LB=Math.abs;function OB(a,e,t){for(var r=a[0],n=a[1],i=a[2],o=1/0,l,c=t*t,d=.1,u=.1;u<=.9;u+=.1){V5[0]=Ep(r[0],n[0],i[0],u),V5[1]=Ep(r[1],n[1],i[1],u);var h=LB(G5(V5,e)-c);h<o&&(o=h,l=u)}for(var f=0;f<32;f++){var p=l+d;H5[0]=Ep(r[0],n[0],i[0],l),H5[1]=Ep(r[1],n[1],i[1],l),U5[0]=Ep(r[0],n[0],i[0],p),U5[1]=Ep(r[1],n[1],i[1],p);var h=G5(H5,e)-c;if(LB(h)<.01)break;var g=G5(U5,e)-c;d/=2,h<0?g>=0?l=l+d:l=l-d:g>=0?l=l-d:l=l+d}return l}function W5(a,e){var t=[],r=zv,n=[[],[],[]],i=[[],[]],o=[];e/=2,a.eachEdge(function(l,c){var d=l.getLayout(),u=l.getVisual("fromSymbol"),h=l.getVisual("toSymbol");d.__original||(d.__original=[kd(d[0]),kd(d[1])],d[2]&&d.__original.push(kd(d[2])));var f=d.__original;if(d[2]!=null){if(bs(n[0],f[0]),bs(n[1],f[2]),bs(n[2],f[1]),u&&u!=="none"){var p=Qg(l.node1),g=OB(n,f[0],p*e);r(n[0][0],n[1][0],n[2][0],g,t),n[0][0]=t[3],n[1][0]=t[4],r(n[0][1],n[1][1],n[2][1],g,t),n[0][1]=t[3],n[1][1]=t[4]}if(h&&h!=="none"){var p=Qg(l.node2),g=OB(n,f[1],p*e);r(n[0][0],n[1][0],n[2][0],g,t),n[1][0]=t[1],n[2][0]=t[2],r(n[0][1],n[1][1],n[2][1],g,t),n[1][1]=t[1],n[2][1]=t[2]}bs(d[0],n[0]),bs(d[1],n[2]),bs(d[2],n[1])}else{if(bs(i[0],f[0]),bs(i[1],f[1]),Gf(o,i[1],i[0]),Ux(o,o),u&&u!=="none"){var p=Qg(l.node1);y4(i[0],i[0],o,p*e)}if(h&&h!=="none"){var p=Qg(l.node2);y4(i[1],i[1],o,-p*e)}bs(d[0],i[0]),bs(d[1],i[1])}})}var nZ=Ea();function Eke(a){if(a)return nZ(a).bridge}function PB(a,e){a&&(nZ(a).bridge=e)}function BB(a){return a.type==="view"}var Dke=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){var n=new Fb,i=new rE,o=this.group,l=new Gt;this._controller=new O0(r.getZr()),this._controllerHost={target:l},l.add(n.group),l.add(i.group),o.add(l),this._symbolDraw=n,this._lineDraw=i,this._mainGroup=l,this._firstRender=!0},e.prototype.render=function(t,r,n){var i=this,o=t.coordinateSystem,l=!1;this._model=t,this._api=n,this._active=!0;var c=this._getThumbnailInfo();c&&c.bridge.reset(n);var d=this._symbolDraw,u=this._lineDraw;if(BB(o)){var h={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?this._mainGroup.attr(h):rr(this._mainGroup,h,t)}W5(t.getGraph(),Kg(t));var f=t.getData();d.updateData(f);var p=t.getEdgeData();u.updateData(p),this._updateNodeAndLinkScale(),this._updateController(null,t,n),clearTimeout(this._layoutTimeout);var g=t.forceLayout,b=t.get(["force","layoutAnimation"]);g&&(l=!0,this._startForceLayoutIteration(g,n,b));var w=t.get("layout");f.graph.eachNode(function(D){var I=D.dataIndex,O=D.getGraphicEl(),P=D.getModel();if(O){O.off("drag").off("dragend");var V=P.get("draggable");V&&O.on("drag",function(Q){switch(w){case"force":g.warmUp(),!i._layouting&&i._startForceLayoutIteration(g,n,b),g.setFixed(I),f.setItemLayout(I,[O.x,O.y]);break;case"circular":f.setItemLayout(I,[O.x,O.y]),D.setLayout({fixed:!0},!0),tE(t,"symbolSize",D,[Q.offsetX,Q.offsetY]),i.updateLayout(t);break;default:f.setItemLayout(I,[O.x,O.y]),eE(t.getGraph(),t),i.updateLayout(t);break}}).on("dragend",function(){g&&g.setUnfixed(I)}),O.setDraggable(V,!!P.get("cursor"));var G=P.get(["emphasis","focus"]);G==="adjacency"&&(na(O).focus=D.getAdjacentDataIndices())}}),f.graph.eachEdge(function(D){var I=D.getGraphicEl(),O=D.getModel().get(["emphasis","focus"]);I&&O==="adjacency"&&(na(I).focus={edge:[D.dataIndex],node:[D.node1.dataIndex,D.node2.dataIndex]})});var _=t.get("layout")==="circular"&&t.get(["circular","rotateLabel"]),k=f.getLayout("cx"),T=f.getLayout("cy");f.graph.eachNode(function(D){tZ(D,_,k,T)}),this._firstRender=!1,l||this._renderThumbnail(t,n,this._symbolDraw,this._lineDraw)},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,r,n){var i=this,o=!1;(function l(){t.step(function(c){i.updateLayout(i._model),(c||!o)&&(o=!0,i._renderThumbnail(i._model,r,i._symbolDraw,i._lineDraw)),(i._layouting=!c)&&(n?i._layoutTimeout=setTimeout(l,16):l())})})()},e.prototype._updateController=function(t,r,n){var i=this._controller,o=this._controllerHost,l=r.coordinateSystem;if(!BB(l)){i.disable();return}i.enable(r.get("roam"),{api:n,zInfo:{component:r},triggerInfo:{roamTrigger:r.get("roamTrigger"),isInSelf:function(c,d,u){return l.containPoint([d,u])},isInClip:function(c,d,u){return!t||t.contain(d,u)}}}),o.zoomLimit=r.get("scaleLimit"),o.zoom=l.getZoom(),i.off("pan").off("zoom").on("pan",function(c){n.dispatchAction({seriesId:r.id,type:"graphRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){n.dispatchAction({seriesId:r.id,type:"graphRoam",zoom:c.scale,originX:c.originX,originY:c.originY})})},e.prototype.updateViewOnPan=function(t,r,n){this._active&&(WM(this._controllerHost,n.dx,n.dy),this._updateThumbnailWindow())},e.prototype.updateViewOnZoom=function(t,r,n){this._active&&($M(this._controllerHost,n.zoom,n.originX,n.originY),this._updateNodeAndLinkScale(),W5(t.getGraph(),Kg(t)),this._lineDraw.updateLayout(),r.updateLabelLayout(),this._updateThumbnailWindow())},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,r=t.getData(),n=Kg(t);r.eachItemGraphicEl(function(i,o){i&&i.setSymbolScale(n)})},e.prototype.updateLayout=function(t){this._active&&(W5(t.getGraph(),Kg(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout())},e.prototype.remove=function(){this._active=!1,clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove(),this._controller&&this._controller.disable()},e.prototype._getThumbnailInfo=function(){var t=this._model,r=t.coordinateSystem;if(r.type==="view"){var n=Eke(t);if(n)return{bridge:n,coordSys:r}}},e.prototype._updateThumbnailWindow=function(){var t=this._getThumbnailInfo();t&&t.bridge.updateWindow(t.coordSys.transform,this._api)},e.prototype._renderThumbnail=function(t,r,n,i){var o=this._getThumbnailInfo();if(o){var l=new Gt,c=n.group.children(),d=i.group.children(),u=new Gt,h=new Gt;l.add(h),l.add(u);for(var f=0;f<c.length;f++){var p=c[f],g=p.children()[0],b=p.x,w=p.y,_=$t(g.shape),k=Je(_,{width:g.scaleX,height:g.scaleY,x:b-g.scaleX/2,y:w-g.scaleY/2}),T=$t(g.style),D=new g.constructor({shape:k,style:T,z2:151});h.add(D)}for(var f=0;f<d.length;f++){var p=d[f],I=p.children()[0],T=$t(I.style),k=$t(I.shape),O=new rZ({style:T,shape:k,z2:151});u.add(O)}o.bridge.renderContent({api:r,roamType:t.get("roam"),viewportRect:null,group:l,targetTrans:o.coordSys.transform})}},e.type="graph",e})(Mr);function Dp(a){return"_EC_"+a}var Ike=(function(){function a(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return a.prototype.isDirected=function(){return this._directed},a.prototype.addNode=function(e,t){e=e==null?""+t:""+e;var r=this._nodesMap;if(!r[Dp(e)]){var n=new Of(e,t);return n.hostGraph=this,this.nodes.push(n),r[Dp(e)]=n,n}},a.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},a.prototype.getNodeById=function(e){return this._nodesMap[Dp(e)]},a.prototype.addEdge=function(e,t,r){var n=this._nodesMap,i=this._edgesMap;if(Xa(e)&&(e=this.nodes[e]),Xa(t)&&(t=this.nodes[t]),e instanceof Of||(e=n[Dp(e)]),t instanceof Of||(t=n[Dp(t)]),!(!e||!t)){var o=e.id+"-"+t.id,l=new iZ(e,t,r);return l.hostGraph=this,this._directed&&(e.outEdges.push(l),t.inEdges.push(l)),e.edges.push(l),e!==t&&t.edges.push(l),this.edges.push(l),i[o]=l,l}},a.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},a.prototype.getEdge=function(e,t){e instanceof Of&&(e=e.id),t instanceof Of&&(t=t.id);var r=this._edgesMap;return this._directed?r[e+"-"+t]:r[e+"-"+t]||r[t+"-"+e]},a.prototype.eachNode=function(e,t){for(var r=this.nodes,n=r.length,i=0;i<n;i++)r[i].dataIndex>=0&&e.call(t,r[i],i)},a.prototype.eachEdge=function(e,t){for(var r=this.edges,n=r.length,i=0;i<n;i++)r[i].dataIndex>=0&&r[i].node1.dataIndex>=0&&r[i].node2.dataIndex>=0&&e.call(t,r[i],i)},a.prototype.breadthFirstTraverse=function(e,t,r,n){if(t instanceof Of||(t=this._nodesMap[Dp(t)]),!!t){for(var i=r==="out"?"outEdges":r==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!e.call(n,t,null))for(var l=[t];l.length;)for(var c=l.shift(),d=c[i],o=0;o<d.length;o++){var u=d[o],h=u.node1===c?u.node2:u.node1;if(!h.__visited){if(e.call(n,h,c))return;l.push(h),h.__visited=!0}}}},a.prototype.update=function(){for(var e=this.data,t=this.edgeData,r=this.nodes,n=this.edges,i=0,o=r.length;i<o;i++)r[i].dataIndex=-1;for(var i=0,o=e.count();i<o;i++)r[e.getRawIndex(i)].dataIndex=i;t.filterSelf(function(l){var c=n[t.getRawIndex(l)];return c.node1.dataIndex>=0&&c.node2.dataIndex>=0});for(var i=0,o=n.length;i<o;i++)n[i].dataIndex=-1;for(var i=0,o=t.count();i<o;i++)n[t.getRawIndex(i)].dataIndex=i},a.prototype.clone=function(){for(var e=new a(this._directed),t=this.nodes,r=this.edges,n=0;n<t.length;n++)e.addNode(t[n].id,t[n].dataIndex);for(var n=0;n<r.length;n++){var i=r[n];e.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return e},a})(),Of=(function(){function a(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e??"",this.dataIndex=t??-1}return a.prototype.degree=function(){return this.edges.length},a.prototype.inDegree=function(){return this.inEdges.length},a.prototype.outDegree=function(){return this.outEdges.length},a.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},a.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var r=this.edges[t];r.dataIndex<0||(e.edge.push(r.dataIndex),e.node.push(r.node1.dataIndex,r.node2.dataIndex))}return e},a.prototype.getTrajectoryDataIndices=function(){for(var e=Rt(),t=Rt(),r=0,n=this.edges.length;r<n;r++){var i=this.edges[r];if(!(i.dataIndex<0)){e.set(i.dataIndex,!0);for(var o=[i.node1],l=[i.node2],c=0;c<o.length;){var d=o[c];c++,t.set(d.dataIndex,!0);for(var u=d.inEdges,h=0,f=u.length,p=void 0,g=void 0;h<f;h++)p=u[h],g=p.dataIndex,g>=0&&!e.hasKey(g)&&(e.set(g,!0),o.push(p.node1))}for(c=0;c<l.length;){var b=l[c];c++,t.set(b.dataIndex,!0);for(var w=b.outEdges,h=0,_=w.length,k=void 0,T=void 0;h<_;h++)k=w[h],T=k.dataIndex,T>=0&&!e.hasKey(T)&&(e.set(T,!0),l.push(k.node2))}}}return{edge:e.keys(),node:t.keys()}},a})(),iZ=(function(){function a(e,t,r){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=r??-1}return a.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.edgeData.getItemModel(this.dataIndex);return r.getModel(e)}},a.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},a.prototype.getTrajectoryDataIndices=function(){var e=Rt(),t=Rt();e.set(this.dataIndex,!0);for(var r=[this.node1],n=[this.node2],i=0;i<r.length;){var o=r[i];i++,t.set(o.dataIndex,!0);for(var l=o.inEdges,c=0,d=l.length,u=void 0,h=void 0;c<d;c++)u=o.inEdges[c],h=u.dataIndex,h>=0&&!e.hasKey(h)&&(e.set(h,!0),r.push(u.node1))}for(i=0;i<n.length;){var f=n[i];i++,t.set(f.dataIndex,!0);for(var p=f.outEdges,c=0,d=p.length,g=void 0,b=void 0;c<d;c++)g=f.outEdges[c],b=g.dataIndex,b>=0&&!e.hasKey(b)&&(e.set(b,!0),n.push(g.node2))}return{edge:e.keys(),node:t.keys()}},a})();function sZ(a,e){return{getValue:function(t){var r=this[a][e];return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},setVisual:function(t,r){this.dataIndex>=0&&this[a][e].setItemVisual(this.dataIndex,t,r)},getVisual:function(t){return this[a][e].getItemVisual(this.dataIndex,t)},setLayout:function(t,r){this.dataIndex>=0&&this[a][e].setItemLayout(this.dataIndex,t,r)},getLayout:function(){return this[a][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[a][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[a][e].getRawIndex(this.dataIndex)}}}ti(Of,sZ("hostGraph","data"));ti(iZ,sZ("hostGraph","edgeData"));function nE(a,e,t,r,n){for(var i=new Ike(r),o=0;o<a.length;o++)i.addNode(Gi(a[o].id,a[o].name,o),o);for(var l=[],c=[],d=0,o=0;o<e.length;o++){var u=e[o],h=u.source,f=u.target;i.addEdge(h,f,d)&&(c.push(u),l.push(Gi(ui(u.id,null),h+" > "+f)),d++)}var p=t.get("coordinateSystem"),g;if(p==="cartesian2d"||p==="polar"||p==="matrix")g=Wd(a,t);else{var b=Rb.get(p),w=b?b.dimensions||[]:[];ya(w,"value")<0&&w.concat(["value"]);var _=Pb(a,{coordDimensions:w,encodeDefine:t.getEncode()}).dimensions;g=new Ss(_,t),g.initData(a)}var k=new Ss(["value"],t);return k.initData(c,l),n&&n(g,k),FX({mainData:g,struct:i,structAttr:"graph",datas:{node:g,edge:k},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}var Rke=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){a.prototype.init.apply(this,arguments);var r=this;function n(){return r._categoriesData}this.legendVisualProvider=new rm(n,n),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeOption=function(t){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(t){a.prototype.mergeDefaultAndTheme.apply(this,arguments),g0(t,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,r){var n=t.edges||t.links||[],i=t.data||t.nodes||[],o=this;if(i&&n){yke(this);var l=nE(i,n,this,!0,c);return oe(l.edges,function(d){wke(d.node1,d.node2,this,d.dataIndex)},this),l.data}function c(d,u){d.wrapMethod("getItemModel",function(g){var b=o._categoriesModels,w=g.getShallow("category"),_=b[w];return _&&(_.parentModel=g.parentModel,g.parentModel=_),g});var h=za.prototype.getModel;function f(g,b){var w=h.call(this,g,b);return w.resolveParentPath=p,w}u.wrapMethod("getItemModel",function(g){return g.resolveParentPath=p,g.getModel=f,g});function p(g){if(g&&(g[0]==="label"||g[1]==="label")){var b=g.slice();return g[0]==="label"?b[0]="edgeLabel":g[1]==="label"&&(b[1]="edgeLabel"),b}return g}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,r,n){if(n==="edge"){var i=this.getData(),o=this.getDataParams(t,n),l=i.graph.getEdgeByIndex(t),c=i.getName(l.node1.dataIndex),d=i.getName(l.node2.dataIndex),u=[];return c!=null&&u.push(c),d!=null&&u.push(d),Jn("nameValue",{name:u.join(" > "),value:o.value,noValue:o.value==null})}var h=dY({series:this,dataIndex:t,multipleSeries:r});return h},e.prototype._updateCategoriesData=function(){var t=it(this.option.categories||[],function(n){return n.value!=null?n:Je({value:0},n)}),r=new Ss(["value"],this);r.initData(t),this._categoriesData=r,this._categoriesModels=r.mapArray(function(n){return r.getItemModel(n)})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return a.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:Fe.color.neutral50,width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:Fe.color.primary}}},e})(Fr);function Lke(a){a.registerChartView(Dke),a.registerSeriesModel(Rke),a.registerProcessor(xke),a.registerVisual(mke),a.registerVisual(gke),a.registerLayout(_ke),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,jke),a.registerLayout(kke),a.registerCoordinateSystem("graphView",{dimensions:P0.dimensions,create:Ake}),a.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Bn),a.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Bn),a.registerAction({type:"graphRoam",event:"graphRoam",update:"none"},function(e,t,r){t.eachComponent({mainType:"series",query:e},function(n){var i=r.getViewOfSeriesModel(n);i&&(e.dx!=null&&e.dy!=null&&i.updateViewOnPan(n,r,e),e.zoom!=null&&e.originX!=null&&e.originY!=null&&i.updateViewOnZoom(n,r,e));var o=n.coordinateSystem,l=LN(o,e,n.get("scaleLimit"));n.setCenter&&n.setCenter(l.center),n.setZoom&&n.setZoom(l.zoom)})})}var zB=(function(a){Le(e,a);function e(t,r,n){var i=a.call(this)||this;na(i).dataType="node",i.z2=2;var o=new Ja;return i.setTextContent(o),i.updateData(t,r,n,!0),i}return e.prototype.updateData=function(t,r,n,i){var o=this,l=t.graph.getNodeByIndex(r),c=t.hostModel,d=l.getModel(),u=d.getModel("emphasis"),h=t.getItemLayout(r),f=Je(pc(d.getModel("itemStyle"),h,!0),h),p=this;if(isNaN(f.startAngle)){p.setShape(f);return}i?p.setShape(f):rr(p,{shape:f},c,r);var g=Je(pc(d.getModel("itemStyle"),h,!0),h);o.setShape(g),o.useStyle(t.getItemVisual(r,"style")),hi(o,d),this._updateLabel(c,d,l),t.setItemGraphicEl(r,p),hi(p,d,"itemStyle");var b=u.get("focus");on(this,b==="adjacency"?l.getAdjacentDataIndices():b,u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(t,r,n){var i=this.getTextContent(),o=n.getLayout(),l=(o.startAngle+o.endAngle)/2,c=Math.cos(l),d=Math.sin(l),u=r.getModel("label");i.ignore=!u.get("show");var h=fi(r),f=n.getVisual("style");ji(i,h,{labelFetcher:{getFormattedLabel:function(k,T,D,I,O,P){return t.getFormattedLabel(k,T,"node",I,No(O,h.normal&&h.normal.get("formatter"),r.get("name")),P)}},labelDataIndex:n.dataIndex,defaultText:n.dataIndex+"",inheritColor:f.fill,defaultOpacity:f.opacity,defaultOutsidePosition:"startArc"});var p=u.get("position")||"outside",g=u.get("distance")||0,b;p==="outside"?b=o.r+g:b=(o.r+o.r0)/2,this.textConfig={inside:p!=="outside"};var w=p!=="outside"?u.get("align")||"center":c>0?"left":"right",_=p!=="outside"?u.get("verticalAlign")||"middle":d>0?"top":"bottom";i.attr({x:c*b+o.cx,y:d*b+o.cy,rotation:0,style:{align:w,verticalAlign:_}})},e})(ds),Oke=(function(a){Le(e,a);function e(t,r,n,i){var o=a.call(this)||this;return na(o).dataType="edge",o.updateData(t,r,n,i,!0),o}return e.prototype.buildPath=function(t,r){t.moveTo(r.s1[0],r.s1[1]);var n=.7,i=r.clockwise;t.arc(r.cx,r.cy,r.r,r.sStartAngle,r.sEndAngle,!i),t.bezierCurveTo((r.cx-r.s2[0])*n+r.s2[0],(r.cy-r.s2[1])*n+r.s2[1],(r.cx-r.t1[0])*n+r.t1[0],(r.cy-r.t1[1])*n+r.t1[1],r.t1[0],r.t1[1]),t.arc(r.cx,r.cy,r.r,r.tStartAngle,r.tEndAngle,!i),t.bezierCurveTo((r.cx-r.t2[0])*n+r.t2[0],(r.cy-r.t2[1])*n+r.t2[1],(r.cx-r.s1[0])*n+r.s1[0],(r.cy-r.s1[1])*n+r.s1[1],r.s1[0],r.s1[1]),t.closePath()},e.prototype.updateData=function(t,r,n,i,o){var l=t.hostModel,c=r.graph.getEdgeByIndex(n),d=c.getLayout(),u=c.node1.getModel(),h=r.getItemModel(c.dataIndex),f=h.getModel("lineStyle"),p=h.getModel("emphasis"),g=p.get("focus"),b=Je(pc(u.getModel("itemStyle"),d,!0),d),w=this;if(isNaN(b.sStartAngle)||isNaN(b.tStartAngle)){w.setShape(b);return}o?(w.setShape(b),FB(w,c,t,f)):(nl(w),FB(w,c,t,f),rr(w,{shape:b},l,n)),on(this,g==="adjacency"?c.getAdjacentDataIndices():g,p.get("blurScope"),p.get("disabled")),hi(w,h,"lineStyle"),r.setItemGraphicEl(c.dataIndex,w)},e})(Ia);function FB(a,e,t,r){var n=e.node1,i=e.node2,o=a.style;a.setStyle(r.getLineStyle());var l=r.get("color");switch(l){case"source":o.fill=t.getItemVisual(n.dataIndex,"style").fill,o.decal=n.getVisual("style").decal;break;case"target":o.fill=t.getItemVisual(i.dataIndex,"style").fill,o.decal=i.getVisual("style").decal;break;case"gradient":var c=t.getItemVisual(n.dataIndex,"style").fill,d=t.getItemVisual(i.dataIndex,"style").fill;if(jt(c)&&jt(d)){var u=a.shape,h=(u.s1[0]+u.s2[0])/2,f=(u.s1[1]+u.s2[1])/2,p=(u.t1[0]+u.t2[0])/2,g=(u.t1[1]+u.t2[1])/2;o.fill=new Yx(h,f,p,g,[{offset:0,color:c},{offset:1,color:d}],!0)}break}}var Pke=Math.PI/180,Bke=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n){var i=t.getData(),o=this._data,l=this.group,c=-t.get("startAngle")*Pke;if(i.diff(o).add(function(u){var h=i.getItemLayout(u);if(h){var f=new zB(i,u,c);na(f).dataIndex=u,l.add(f)}}).update(function(u,h){var f=o.getItemGraphicEl(h),p=i.getItemLayout(u);if(!p){f&&Cd(f,t,h);return}f?f.updateData(i,u,c):f=new zB(i,u,c),l.add(f)}).remove(function(u){var h=o.getItemGraphicEl(u);h&&Cd(h,t,u)}).execute(),!o){var d=t.get("center");this.group.scaleX=.01,this.group.scaleY=.01,this.group.originX=_t(d[0],n.getWidth()),this.group.originY=_t(d[1],n.getHeight()),en(this.group,{scaleX:1,scaleY:1},t)}this._data=i,this.renderEdges(t,c)},e.prototype.renderEdges=function(t,r){var n=t.getData(),i=t.getEdgeData(),o=this._edgeData,l=this.group;i.diff(o).add(function(c){var d=new Oke(n,i,c,r);na(d).dataIndex=c,l.add(d)}).update(function(c,d){var u=o.getItemGraphicEl(d);u.updateData(n,i,c,r),l.add(u)}).remove(function(c){var d=o.getItemGraphicEl(c);d&&Cd(d,t,c)}).execute(),this._edgeData=i},e.prototype.dispose=function(){},e.type="chord",e})(Mr),zke=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this.legendVisualProvider=new rm(St(this.getData,this),St(this.getRawData,this))},e.prototype.mergeOption=function(t){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links)},e.prototype.getInitialData=function(t,r){var n=t.edges||t.links||[],i=t.data||t.nodes||[];if(i&&n){var o=nE(i,n,this,!0,l);return o.data}function l(c,d){var u=za.prototype.getModel;function h(p,g){var b=u.call(this,p,g);return b.resolveParentPath=f,b}d.wrapMethod("getItemModel",function(p){return p.resolveParentPath=f,p.getModel=h,p});function f(p){if(p&&(p[0]==="label"||p[1]==="label")){var g=p.slice();return p[0]==="label"?g[0]="edgeLabel":p[1]==="label"&&(g[1]="edgeLabel"),g}return p}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,r,n){var i=this.getDataParams(t,n);if(n==="edge"){var o=this.getData(),l=o.graph.getEdgeByIndex(t),c=o.getName(l.node1.dataIndex),d=o.getName(l.node2.dataIndex),u=[];return c!=null&&u.push(c),d!=null&&u.push(d),Jn("nameValue",{name:u.join(" > "),value:i.value,noValue:i.value==null})}return Jn("nameValue",{name:i.name,value:i.value,noValue:i.value==null})},e.prototype.getDataParams=function(t,r){var n=a.prototype.getDataParams.call(this,t,r);if(r==="node"){var i=this.getData(),o=this.getGraph().getNodeByIndex(t);if(n.name==null&&(n.name=i.getName(t)),n.value==null){var l=o.getLayout().value;n.value=l}}return n},e.type="series.chord",e.defaultOption={z:2,coordinateSystem:"none",legendHoverLink:!0,colorBy:"data",left:0,top:0,right:0,bottom:0,width:null,height:null,center:["50%","50%"],radius:["70%","80%"],clockwise:!0,startAngle:90,endAngle:"auto",minAngle:0,padAngle:3,itemStyle:{borderRadius:[0,0,5,5]},lineStyle:{width:0,color:"source",opacity:.2},label:{show:!0,position:"outside",distance:5},emphasis:{focus:"adjacency",lineStyle:{opacity:.5}}},e})(Fr),$5=Math.PI/180;function Fke(a,e){a.eachSeriesByType("chord",function(t){Vke(t,e)})}function Vke(a,e){var t=a.getData(),r=t.graph,n=a.getEdgeData(),i=n.count();if(i){var o=T$(a,e),l=o.cx,c=o.cy,d=o.r,u=o.r0,h=Math.max((a.get("padAngle")||0)*$5,0),f=Math.max((a.get("minAngle")||0)*$5,0),p=-a.get("startAngle")*$5,g=p+Math.PI*2,b=a.get("clockwise"),w=b?1:-1,_=[p,g];pN(_,!b);var k=_[0],T=_[1],D=T-k,I=t.getSum("value")===0&&n.getSum("value")===0,O=[],P=0;r.eachEdge(function(ee){var ne=I?1:ee.getValue("value");I&&(ne>0||f)&&(P+=2);var re=ee.node1.dataIndex,Z=ee.node2.dataIndex;O[re]=(O[re]||0)+ne,O[Z]=(O[Z]||0)+ne});var V=0;if(r.eachNode(function(ee){var ne=ee.getValue("value");isNaN(ne)||(O[ee.dataIndex]=Math.max(ne,O[ee.dataIndex]||0)),!I&&(O[ee.dataIndex]>0||f)&&P++,V+=O[ee.dataIndex]||0}),!(P===0||V===0)){h*P>=Math.abs(D)&&(h=Math.max(0,(Math.abs(D)-f*P)/P)),(h+f)*P>=Math.abs(D)&&(f=(Math.abs(D)-h*P)/P);var G=(D-h*P*w)/V,Q=0,$=0,ae=0;r.eachNode(function(ee){var ne=O[ee.dataIndex]||0,re=G*(V?ne:1)*w;Math.abs(re)<f?Q+=f-Math.abs(re):($+=Math.abs(re)-f,ae+=Math.abs(re)),ee.setLayout({angle:re,value:ne})});var J=!1;if(Q>$){var U=Q/$;r.eachNode(function(ee){var ne=ee.getLayout().angle;Math.abs(ne)>=f?ee.setLayout({angle:ne*U,ratio:U},!0):ee.setLayout({angle:f,ratio:f===0?1:ne/f},!0)})}else r.eachNode(function(ee){if(!J){var ne=ee.getLayout().angle,re=Math.min(ne/ae,1),Z=re*Q;ne-Z<f&&(J=!0)}});var F=Q;r.eachNode(function(ee){if(!(F<=0)){var ne=ee.getLayout().angle;if(ne>f&&f>0){var re=J?1:Math.min(ne/ae,1),Z=ne-f,ie=Math.min(Z,Math.min(F,Q*re));F-=ie,ee.setLayout({angle:ne-ie,ratio:(ne-ie)/ne},!0)}else f>0&&ee.setLayout({angle:f,ratio:ne===0?1:f/ne},!0)}});var W=k,K=[];r.eachNode(function(ee){var ne=Math.max(ee.getLayout().angle,f);ee.setLayout({cx:l,cy:c,r0:u,r:d,startAngle:W,endAngle:W+ne*w,clockwise:b},!0),K[ee.dataIndex]=W,W+=(ne+h)*w}),r.eachEdge(function(ee){var ne=I?1:ee.getValue("value"),re=G*(V?ne:1)*w,Z=ee.node1.dataIndex,ie=K[Z]||0,de=Math.abs((ee.node1.getLayout().ratio||1)*re),fe=ie+de*w,he=[l+u*Math.cos(ie),c+u*Math.sin(ie)],ve=[l+u*Math.cos(fe),c+u*Math.sin(fe)],Oe=ee.node2.dataIndex,Se=K[Oe]||0,Ce=Math.abs((ee.node2.getLayout().ratio||1)*re),we=Se+Ce*w,xe=[l+u*Math.cos(Se),c+u*Math.sin(Se)],be=[l+u*Math.cos(we),c+u*Math.sin(we)];ee.setLayout({s1:he,s2:ve,sStartAngle:ie,sEndAngle:fe,t1:xe,t2:be,tStartAngle:Se,tEndAngle:we,cx:l,cy:c,r:u,value:ne,clockwise:b}),K[Z]=fe,K[Oe]=we})}}}function Hke(a){a.registerChartView(Bke),a.registerSeriesModel(zke),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,Fke),a.registerProcessor(tm("chord"))}var Uke=(function(){function a(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return a})(),Gke=(function(a){Le(e,a);function e(t){var r=a.call(this,t)||this;return r.type="pointer",r}return e.prototype.getDefaultShape=function(){return new Uke},e.prototype.buildPath=function(t,r){var n=Math.cos,i=Math.sin,o=r.r,l=r.width,c=r.angle,d=r.x-n(c)*l*(l>=o/3?1:2),u=r.y-i(c)*l*(l>=o/3?1:2);c=r.angle-Math.PI/2,t.moveTo(d,u),t.lineTo(r.x+n(c)*l,r.y+i(c)*l),t.lineTo(r.x+n(r.angle)*o,r.y+i(r.angle)*o),t.lineTo(r.x-n(c)*l,r.y-i(c)*l),t.lineTo(d,u)},e})(Ia);function Wke(a,e){var t=a.get("center"),r=e.getWidth(),n=e.getHeight(),i=Math.min(r,n),o=_t(t[0],e.getWidth()),l=_t(t[1],e.getHeight()),c=_t(a.get("radius"),i/2);return{cx:o,cy:l,r:c}}function iw(a,e){var t=a==null?"":a+"";return e&&(jt(e)?t=e.replace("{value}",t):Ut(e)&&(t=e(a))),t}var $ke=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){this.group.removeAll();var i=t.get(["axisLine","lineStyle","color"]),o=Wke(t,n);this._renderMain(t,r,n,i,o),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,r,n,i,o){var l=this.group,c=t.get("clockwise"),d=-t.get("startAngle")/180*Math.PI,u=-t.get("endAngle")/180*Math.PI,h=t.getModel("axisLine"),f=h.get("roundCap"),p=f?l_:ds,g=h.get("show"),b=h.getModel("lineStyle"),w=b.get("width"),_=[d,u];pN(_,!c),d=_[0],u=_[1];for(var k=u-d,T=d,D=[],I=0;g&&I<i.length;I++){var O=Math.min(Math.max(i[I][0],0),1);u=d+k*O;var P=new p({shape:{startAngle:T,endAngle:u,cx:o.cx,cy:o.cy,clockwise:c,r0:o.r-w,r:o.r},silent:!0});P.setStyle({fill:i[I][1]}),P.setStyle(b.getLineStyle(["color","width"])),D.push(P),T=u}D.reverse(),oe(D,function(G){return l.add(G)});var V=function(G){if(G<=0)return i[0][1];var Q;for(Q=0;Q<i.length;Q++)if(i[Q][0]>=G&&(Q===0?0:i[Q-1][0])<G)return i[Q][1];return i[Q-1][1]};this._renderTicks(t,r,n,V,o,d,u,c,w),this._renderTitleAndDetail(t,r,n,V,o),this._renderAnchor(t,o),this._renderPointer(t,r,n,V,o,d,u,c,w)},e.prototype._renderTicks=function(t,r,n,i,o,l,c,d,u){for(var h=this.group,f=o.cx,p=o.cy,g=o.r,b=+t.get("min"),w=+t.get("max"),_=t.getModel("splitLine"),k=t.getModel("axisTick"),T=t.getModel("axisLabel"),D=t.get("splitNumber"),I=k.get("splitNumber"),O=_t(_.get("length"),g),P=_t(k.get("length"),g),V=l,G=(c-l)/D,Q=G/I,$=_.getModel("lineStyle").getLineStyle(),ae=k.getModel("lineStyle").getLineStyle(),J=_.get("distance"),U,F,W=0;W<=D;W++){if(U=Math.cos(V),F=Math.sin(V),_.get("show")){var K=J?J+u:u,ee=new qn({shape:{x1:U*(g-K)+f,y1:F*(g-K)+p,x2:U*(g-O-K)+f,y2:F*(g-O-K)+p},style:$,silent:!0});$.stroke==="auto"&&ee.setStyle({stroke:i(W/D)}),h.add(ee)}if(T.get("show")){var K=T.get("distance")+J,ne=iw(Yn(W/D*(w-b)+b),T.get("formatter")),re=i(W/D),Z=U*(g-O-K)+f,ie=F*(g-O-K)+p,de=T.get("rotate"),fe=0;de==="radial"?(fe=-V+2*Math.PI,fe>Math.PI/2&&(fe+=Math.PI)):de==="tangential"?fe=-V-Math.PI/2:Xa(de)&&(fe=de*Math.PI/180),fe===0?h.add(new Ja({style:zr(T,{text:ne,x:Z,y:ie,verticalAlign:F<-.8?"top":F>.8?"bottom":"middle",align:U<-.4?"left":U>.4?"right":"center"},{inheritColor:re}),silent:!0})):h.add(new Ja({style:zr(T,{text:ne,x:Z,y:ie,verticalAlign:"middle",align:"center"},{inheritColor:re}),silent:!0,originX:Z,originY:ie,rotation:fe}))}if(k.get("show")&&W!==D){var K=k.get("distance");K=K?K+u:u;for(var he=0;he<=I;he++){U=Math.cos(V),F=Math.sin(V);var ve=new qn({shape:{x1:U*(g-K)+f,y1:F*(g-K)+p,x2:U*(g-P-K)+f,y2:F*(g-P-K)+p},silent:!0,style:ae});ae.stroke==="auto"&&ve.setStyle({stroke:i((W+he/I)/D)}),h.add(ve),V+=Q}V-=Q}else V+=G}},e.prototype._renderPointer=function(t,r,n,i,o,l,c,d,u){var h=this.group,f=this._data,p=this._progressEls,g=[],b=t.get(["pointer","show"]),w=t.getModel("progress"),_=w.get("show"),k=t.getData(),T=k.mapDimension("value"),D=+t.get("min"),I=+t.get("max"),O=[D,I],P=[l,c];function V(Q,$){var ae=k.getItemModel(Q),J=ae.getModel("pointer"),U=_t(J.get("width"),o.r),F=_t(J.get("length"),o.r),W=t.get(["pointer","icon"]),K=J.get("offsetCenter"),ee=_t(K[0],o.r),ne=_t(K[1],o.r),re=J.get("keepAspect"),Z;return W?Z=ei(W,ee-U/2,ne-F,U,F,null,re):Z=new Gke({shape:{angle:-Math.PI/2,width:U,r:F,x:ee,y:ne}}),Z.rotation=-($+Math.PI/2),Z.x=o.cx,Z.y=o.cy,Z}function G(Q,$){var ae=w.get("roundCap"),J=ae?l_:ds,U=w.get("overlap"),F=U?w.get("width"):u/k.count(),W=U?o.r-F:o.r-(Q+1)*F,K=U?o.r:o.r-Q*F,ee=new J({shape:{startAngle:l,endAngle:$,cx:o.cx,cy:o.cy,clockwise:d,r0:W,r:K}});return U&&(ee.z2=ur(k.get(T,Q),[D,I],[100,0],!0)),ee}(_||b)&&(k.diff(f).add(function(Q){var $=k.get(T,Q);if(b){var ae=V(Q,l);en(ae,{rotation:-((isNaN(+$)?P[0]:ur($,O,P,!0))+Math.PI/2)},t),h.add(ae),k.setItemGraphicEl(Q,ae)}if(_){var J=G(Q,l),U=w.get("clip");en(J,{shape:{endAngle:ur($,O,P,U)}},t),h.add(J),X4(t.seriesIndex,k.dataType,Q,J),g[Q]=J}}).update(function(Q,$){var ae=k.get(T,Q);if(b){var J=f.getItemGraphicEl($),U=J?J.rotation:l,F=V(Q,U);F.rotation=U,rr(F,{rotation:-((isNaN(+ae)?P[0]:ur(ae,O,P,!0))+Math.PI/2)},t),h.add(F),k.setItemGraphicEl(Q,F)}if(_){var W=p[$],K=W?W.shape.endAngle:l,ee=G(Q,K),ne=w.get("clip");rr(ee,{shape:{endAngle:ur(ae,O,P,ne)}},t),h.add(ee),X4(t.seriesIndex,k.dataType,Q,ee),g[Q]=ee}}).execute(),k.each(function(Q){var $=k.getItemModel(Q),ae=$.getModel("emphasis"),J=ae.get("focus"),U=ae.get("blurScope"),F=ae.get("disabled");if(b){var W=k.getItemGraphicEl(Q),K=k.getItemVisual(Q,"style"),ee=K.fill;if(W instanceof Li){var ne=W.style;W.useStyle(Je({image:ne.image,x:ne.x,y:ne.y,width:ne.width,height:ne.height},K))}else W.useStyle(K),W.type!=="pointer"&&W.setColor(ee);W.setStyle($.getModel(["pointer","itemStyle"]).getItemStyle()),W.style.fill==="auto"&&W.setStyle("fill",i(ur(k.get(T,Q),O,[0,1],!0))),W.z2EmphasisLift=0,hi(W,$),on(W,J,U,F)}if(_){var re=g[Q];re.useStyle(k.getItemVisual(Q,"style")),re.setStyle($.getModel(["progress","itemStyle"]).getItemStyle()),re.z2EmphasisLift=0,hi(re,$),on(re,J,U,F)}}),this._progressEls=g)},e.prototype._renderAnchor=function(t,r){var n=t.getModel("anchor"),i=n.get("show");if(i){var o=n.get("size"),l=n.get("icon"),c=n.get("offsetCenter"),d=n.get("keepAspect"),u=ei(l,r.cx-o/2+_t(c[0],r.r),r.cy-o/2+_t(c[1],r.r),o,o,null,d);u.z2=n.get("showAbove")?1:0,u.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(u)}},e.prototype._renderTitleAndDetail=function(t,r,n,i,o){var l=this,c=t.getData(),d=c.mapDimension("value"),u=+t.get("min"),h=+t.get("max"),f=new Gt,p=[],g=[],b=t.isAnimationEnabled(),w=t.get(["pointer","showAbove"]);c.diff(this._data).add(function(_){p[_]=new Ja({silent:!0}),g[_]=new Ja({silent:!0})}).update(function(_,k){p[_]=l._titleEls[k],g[_]=l._detailEls[k]}).execute(),c.each(function(_){var k=c.getItemModel(_),T=c.get(d,_),D=new Gt,I=i(ur(T,[u,h],[0,1],!0)),O=k.getModel("title");if(O.get("show")){var P=O.get("offsetCenter"),V=o.cx+_t(P[0],o.r),G=o.cy+_t(P[1],o.r),Q=p[_];Q.attr({z2:w?0:2,style:zr(O,{x:V,y:G,text:c.getName(_),align:"center",verticalAlign:"middle"},{inheritColor:I})}),D.add(Q)}var $=k.getModel("detail");if($.get("show")){var ae=$.get("offsetCenter"),J=o.cx+_t(ae[0],o.r),U=o.cy+_t(ae[1],o.r),F=_t($.get("width"),o.r),W=_t($.get("height"),o.r),K=t.get(["progress","show"])?c.getItemVisual(_,"style").fill:I,Q=g[_],ee=$.get("formatter");Q.attr({z2:w?0:2,style:zr($,{x:J,y:U,text:iw(T,ee),width:isNaN(F)?null:F,height:isNaN(W)?null:W,align:"center",verticalAlign:"middle"},{inheritColor:K})}),l$(Q,{normal:$},T,function(re){return iw(re,ee)}),b&&c$(Q,_,c,t,{getFormattedLabel:function(re,Z,ie,de,fe,he){return iw(he?he.interpolatedValue:T,ee)}}),D.add(Q)}f.add(D)}),this.group.add(f),this._titleEls=p,this._detailEls=g},e.type="gauge",e})(Mr),Yke=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="itemStyle",t}return e.prototype.getInitialData=function(t,r){return am(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,Fe.color.neutral10]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:Fe.color.axisTick,width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:Fe.color.axisTickMinor,width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:Fe.color.axisLabel,fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:Fe.color.neutral00,borderWidth:0,borderColor:Fe.color.theme[0]}},title:{show:!0,offsetCenter:[0,"20%"],color:Fe.color.secondary,fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:Fe.color.transparent,borderWidth:0,borderColor:Fe.color.neutral40,width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:Fe.color.primary,fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e})(Fr);function qke(a){a.registerChartView($ke),a.registerSeriesModel(Yke)}var Xke=["itemStyle","opacity"],Zke=(function(a){Le(e,a);function e(t,r){var n=a.call(this)||this,i=n,o=new $i,l=new Ja;return i.setTextContent(l),n.setTextGuideLine(o),n.updateData(t,r,!0),n}return e.prototype.updateData=function(t,r,n){var i=this,o=t.hostModel,l=t.getItemModel(r),c=t.getItemLayout(r),d=l.getModel("emphasis"),u=l.get(Xke);u=u??1,n||nl(i),i.useStyle(t.getItemVisual(r,"style")),i.style.lineJoin="round",n?(i.setShape({points:c.points}),i.style.opacity=0,en(i,{style:{opacity:u}},o,r)):rr(i,{style:{opacity:u},shape:{points:c.points}},o,r),hi(i,l),this._updateLabel(t,r),on(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},e.prototype._updateLabel=function(t,r){var n=this,i=this.getTextGuideLine(),o=n.getTextContent(),l=t.hostModel,c=t.getItemModel(r),d=t.getItemLayout(r),u=d.label,h=t.getItemVisual(r,"style"),f=h.fill;ji(o,fi(c),{labelFetcher:t.hostModel,labelDataIndex:r,defaultOpacity:h.opacity,defaultText:t.getName(r)},{normal:{align:u.textAlign,verticalAlign:u.verticalAlign}});var p=c.getModel("label"),g=p.get("color"),b=g==="inherit"?f:null;n.setTextConfig({local:!0,inside:!!u.inside,insideStroke:b,outsideFill:b});var w=u.linePoints;i.setShape({points:w}),n.textGuideLineConfig={anchor:w?new Xt(w[0][0],w[0][1]):null},rr(o,{style:{x:u.x,y:u.y}},l,r),o.attr({rotation:u.rotation,originX:u.x,originY:u.y,z2:10}),EM(n,DM(c),{stroke:f})},e})(us),Kke=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,n){var i=t.getData(),o=this._data,l=this.group;i.diff(o).add(function(c){var d=new Zke(i,c);i.setItemGraphicEl(c,d),l.add(d)}).update(function(c,d){var u=o.getItemGraphicEl(d);u.updateData(i,c),l.add(u),i.setItemGraphicEl(c,u)}).remove(function(c){var d=o.getItemGraphicEl(c);Cd(d,t,c)}).execute(),this._data=i},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e})(Mr),Qke=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new rm(St(this.getData,this),St(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.getInitialData=function(t,r){return am(this,{coordDimensions:["value"],encodeDefaulter:va(dM,this)})},e.prototype._defaultLabelLine=function(t){g0(t,"labelLine",["show"]);var r=t.labelLine,n=t.emphasis.labelLine;r.show=r.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.prototype.getDataParams=function(t){var r=this.getData(),n=a.prototype.getDataParams.call(this,t),i=r.mapDimension("value"),o=r.getSum(i);return n.percent=o?+(r.get(i,t)/o*100).toFixed(2):0,n.$vars.push("percent"),n},e.type="series.funnel",e.defaultOption={coordinateSystemUsage:"box",z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:65,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:Fe.color.neutral00,borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:Fe.color.primary}}},e})(Fr);function Jke(a,e){for(var t=a.mapDimension("value"),r=a.mapArray(t,function(c){return c}),n=[],i=e==="ascending",o=0,l=a.count();o<l;o++)n[o]=o;return Ut(e)?n.sort(e):e!=="none"&&n.sort(function(c,d){return i?r[c]-r[d]:r[d]-r[c]}),n}function e5e(a){var e=a.hostModel,t=e.get("orient");a.each(function(r){var n=a.getItemModel(r),i=n.getModel("label"),o=i.get("position"),l=n.getModel("labelLine"),c=a.getItemLayout(r),d=c.points,u=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",h,f,p,g;if(u)o==="insideLeft"?(f=(d[0][0]+d[3][0])/2+5,p=(d[0][1]+d[3][1])/2,h="left"):o==="insideRight"?(f=(d[1][0]+d[2][0])/2-5,p=(d[1][1]+d[2][1])/2,h="right"):(f=(d[0][0]+d[1][0]+d[2][0]+d[3][0])/4,p=(d[0][1]+d[1][1]+d[2][1]+d[3][1])/4,h="center"),g=[[f,p],[f,p]];else{var b=void 0,w=void 0,_=void 0,k=void 0,T=l.get("length");o==="left"?(b=(d[3][0]+d[0][0])/2,w=(d[3][1]+d[0][1])/2,_=b-T,f=_-5,h="right"):o==="right"?(b=(d[1][0]+d[2][0])/2,w=(d[1][1]+d[2][1])/2,_=b+T,f=_+5,h="left"):o==="top"?(b=(d[3][0]+d[0][0])/2,w=(d[3][1]+d[0][1])/2,k=w-T,p=k-5,h="center"):o==="bottom"?(b=(d[1][0]+d[2][0])/2,w=(d[1][1]+d[2][1])/2,k=w+T,p=k+5,h="center"):o==="rightTop"?(b=t==="horizontal"?d[3][0]:d[1][0],w=t==="horizontal"?d[3][1]:d[1][1],t==="horizontal"?(k=w-T,p=k-5,h="center"):(_=b+T,f=_+5,h="top")):o==="rightBottom"?(b=d[2][0],w=d[2][1],t==="horizontal"?(k=w+T,p=k+5,h="center"):(_=b+T,f=_+5,h="bottom")):o==="leftTop"?(b=d[0][0],w=t==="horizontal"?d[0][1]:d[1][1],t==="horizontal"?(k=w-T,p=k-5,h="center"):(_=b-T,f=_-5,h="right")):o==="leftBottom"?(b=t==="horizontal"?d[1][0]:d[3][0],w=t==="horizontal"?d[1][1]:d[2][1],t==="horizontal"?(k=w+T,p=k+5,h="center"):(_=b-T,f=_-5,h="right")):(b=(d[1][0]+d[2][0])/2,w=(d[1][1]+d[2][1])/2,t==="horizontal"?(k=w+T,p=k+5,h="center"):(_=b+T,f=_+5,h="left")),t==="horizontal"?(_=b,f=_):(k=w,p=k),g=[[b,w],[_,k]]}c.label={linePoints:g,x:f,y:p,verticalAlign:"middle",textAlign:h,inside:u}})}function t5e(a,e){a.eachSeriesByType("funnel",function(t){var r=t.getData(),n=r.mapDimension("value"),i=t.get("sort"),o=pi(t,e),l=ln(t.getBoxLayoutParams(),o.refContainer),c=t.get("orient"),d=l.width,u=l.height,h=Jke(r,i),f=l.x,p=l.y,g=c==="horizontal"?[_t(t.get("minSize"),u),_t(t.get("maxSize"),u)]:[_t(t.get("minSize"),d),_t(t.get("maxSize"),d)],b=r.getDataExtent(n),w=t.get("min"),_=t.get("max");w==null&&(w=Math.min(b[0],0)),_==null&&(_=b[1]);var k=t.get("funnelAlign"),T=t.get("gap"),D=c==="horizontal"?d:u,I=(D-T*(r.count()-1))/r.count(),O=function(F,W){if(c==="horizontal"){var K=r.get(n,F)||0,ee=ur(K,[w,_],g,!0),ne=void 0;switch(k){case"top":ne=p;break;case"center":ne=p+(u-ee)/2;break;case"bottom":ne=p+(u-ee);break}return[[W,ne],[W,ne+ee]]}var re=r.get(n,F)||0,Z=ur(re,[w,_],g,!0),ie;switch(k){case"left":ie=f;break;case"center":ie=f+(d-Z)/2;break;case"right":ie=f+d-Z;break}return[[ie,W],[ie+Z,W]]};i==="ascending"&&(I=-I,T=-T,c==="horizontal"?f+=d:p+=u,h=h.reverse());for(var P=0;P<h.length;P++){var V=h[P],G=h[P+1],Q=r.getItemModel(V);if(c==="horizontal"){var $=Q.get(["itemStyle","width"]);$==null?$=I:($=_t($,d),i==="ascending"&&($=-$));var ae=O(V,f),J=O(G,f+$);f+=$+T,r.setItemLayout(V,{points:ae.concat(J.slice().reverse())})}else{var U=Q.get(["itemStyle","height"]);U==null?U=I:(U=_t(U,u),i==="ascending"&&(U=-U));var ae=O(V,p),J=O(G,p+U);p+=U+T,r.setItemLayout(V,{points:ae.concat(J.slice().reverse())})}}e5e(r)})}function a5e(a){a.registerChartView(Kke),a.registerSeriesModel(Qke),a.registerLayout(t5e),a.registerProcessor(tm("funnel"))}var r5e=.3,n5e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._dataGroup=new Gt,t._initialized=!1,t}return e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,r,n,i){this._progressiveEls=null;var o=this._dataGroup,l=t.getData(),c=this._data,d=t.coordinateSystem,u=d.dimensions,h=HB(t);l.diff(c).add(f).update(p).remove(g).execute();function f(w){var _=VB(l,o,w,u,d);Y5(_,l,w,h)}function p(w,_){var k=c.getItemGraphicEl(_),T=oZ(l,w,u,d);l.setItemGraphicEl(w,k),rr(k,{shape:{points:T}},t,w),nl(k),Y5(k,l,w,h)}function g(w){var _=c.getItemGraphicEl(w);o.remove(_)}if(!this._initialized){this._initialized=!0;var b=i5e(d,t,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(b)}this._data=l},e.prototype.incrementalPrepareRender=function(t,r,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,r,n){for(var i=r.getData(),o=r.coordinateSystem,l=o.dimensions,c=HB(r),d=this._progressiveEls=[],u=t.start;u<t.end;u++){var h=VB(i,this._dataGroup,u,l,o);h.incremental=!0,Y5(h,i,u,c),d.push(h)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e})(Mr);function i5e(a,e,t){var r=a.model,n=a.getRect(),i=new Ta({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),o=r.get("layout")==="horizontal"?"width":"height";return i.setShape(o,0),en(i,{shape:{width:n.width,height:n.height}},e,t),i}function oZ(a,e,t,r){for(var n=[],i=0;i<t.length;i++){var o=t[i],l=a.get(a.mapDimension(o),e);s5e(l,r.getAxis(o).type)||n.push(r.dataToPoint(l,o))}return n}function VB(a,e,t,r,n){var i=oZ(a,t,r,n),o=new $i({shape:{points:i},z2:10});return e.add(o),a.setItemGraphicEl(t,o),o}function HB(a){var e=a.get("smooth",!0);return e===!0&&(e=r5e),e=Ld(e),ss(e)&&(e=0),{smooth:e}}function Y5(a,e,t,r){a.useStyle(e.getItemVisual(t,"style")),a.style.fill=null,a.setShape("smooth",r.smooth);var n=e.getItemModel(t),i=n.getModel("emphasis");hi(a,n,"lineStyle"),on(a,i.get("focus"),i.get("blurScope"),i.get("disabled"))}function s5e(a,e){return e==="category"?a==null:a==null||isNaN(a)}var o5e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.getInitialData=function(t,r){return Wd(null,this,{useEncodeDefaulter:St(l5e,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var r=this.coordinateSystem,n=this.getData(),i=[];return r.eachActiveState(n,function(o,l){t===o&&i.push(n.getRawIndex(l))}),i},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e})(Fr);function l5e(a){var e=a.ecModel.getComponent("parallel",a.get("parallelIndex"));if(e){var t={};return oe(e.dimensions,function(r){var n=c5e(r);t[r]=n}),t}}function c5e(a){return+a.replace("dim","")}var d5e=["lineStyle","opacity"],u5e={seriesType:"parallel",reset:function(a,e){var t=a.coordinateSystem,r={normal:a.get(["lineStyle","opacity"]),active:a.get("activeOpacity"),inactive:a.get("inactiveOpacity")};return{progress:function(n,i){t.eachActiveState(i,function(o,l){var c=r[o];if(o==="normal"&&i.hasItemOption){var d=i.getItemModel(l).get(d5e,!0);d!=null&&(c=d)}var u=i.ensureUniqueItemVisual(l,"style");u.opacity=c},n.start,n.end)}}}};function h5e(a){f5e(a),p5e(a)}function f5e(a){if(!a.parallel){var e=!1;oe(a.series,function(t){t&&t.type==="parallel"&&(e=!0)}),e&&(a.parallel=[{}])}}function p5e(a){var e=Rr(a.parallelAxis);oe(e,function(t){if(Qt(t)){var r=t.parallelIndex||0,n=Rr(a.parallel)[r];n&&n.parallelAxisDefault&&_a(t,n.parallelAxisDefault,!1)}})}var x5e=5,m5e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){this._model=t,this._api=n,this._handlers||(this._handlers={},oe(g5e,function(i,o){n.getZr().on(o,this._handlers[o]=St(i,this))},this)),Qx(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,r){Zv(this,"_throttledDispatchExpand"),oe(this._handlers,function(n,i){r.getZr().off(i,n)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(Je({type:"parallelAxisExpand"},t))},e.type="parallel",e})(tn),g5e={mousedown:function(a){q5(this,"click")&&(this._mouseDownPoint=[a.offsetX,a.offsetY])},mouseup:function(a){var e=this._mouseDownPoint;if(q5(this,"click")&&e){var t=[a.offsetX,a.offsetY],r=Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2);if(r>x5e)return;var n=this._model.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]);n.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:n.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(a){if(!(this._mouseDownPoint||!q5(this,"mousemove"))){var e=this._model,t=e.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]),r=t.behavior;r==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand(r==="none"?null:{axisExpandWindow:t.axisExpandWindow,animation:r==="jump"?null:{duration:0}})}}};function q5(a,e){var t=a._model;return t.get("axisExpandable")&&t.get("axisExpandTriggerOn")===e}var v5e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){a.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var r=this.option;t&&_a(r,t,!0),this._initDimensions()},e.prototype.contains=function(t,r){var n=t.get("parallelIndex");return n!=null&&r.getComponent("parallel",n)===this},e.prototype.setAxisExpand=function(t){oe(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){t.hasOwnProperty(r)&&(this.option[r]=t[r])},this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],r=this.parallelAxisIndex=[],n=hr(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(i){return(i.get("parallelIndex")||0)===this.componentIndex},this);oe(n,function(i){t.push("dim"+i.get("dim")),r.push(i.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e})(Oa),b5e=(function(a){Le(e,a);function e(t,r,n,i,o){var l=a.call(this,t,r,n)||this;return l.type=i||"value",l.axisIndex=o,l}return e.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},e})(Ll);function wh(a,e,t,r,n,i){a=a||0;var o=t[1]-t[0];if(n!=null&&(n=Ip(n,[0,o])),i!=null&&(i=Math.max(i,n??0)),r==="all"){var l=Math.abs(e[1]-e[0]);l=Ip(l,[0,o]),n=i=Ip(l,[n,i]),r=0}e[0]=Ip(e[0],t),e[1]=Ip(e[1],t);var c=X5(e,r);e[r]+=a;var d=n||0,u=t.slice();c.sign<0?u[0]+=d:u[1]-=d,e[r]=Ip(e[r],u);var h;return h=X5(e,r),n!=null&&(h.sign!==c.sign||h.span<n)&&(e[1-r]=e[r]+c.sign*n),h=X5(e,r),i!=null&&h.span>i&&(e[1-r]=e[r]+h.sign*i),e}function X5(a,e){var t=a[e]-a[1-e];return{span:Math.abs(t),sign:t>0?-1:t<0?1:e?-1:1}}function Ip(a,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,a))}var Z5=oe,lZ=Math.min,cZ=Math.max,UB=Math.floor,y5e=Math.ceil,GB=Yn,w5e=Math.PI,_5e=(function(){function a(e,t,r){this.type="parallel",this._axesMap=Rt(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,r)}return a.prototype._init=function(e,t,r){var n=e.dimensions,i=e.parallelAxisIndex;Z5(n,function(o,l){var c=i[l],d=t.getComponent("parallelAxis",c),u=this._axesMap.set(o,new b5e(o,MN(d),[0,0],d.get("type"),c)),h=u.type==="category";u.onBand=h&&d.get("boundaryGap"),u.inverse=d.get("inverse"),d.axis=u,u.model=d,u.coordinateSystem=d.coordinateSystem=this},this)},a.prototype.update=function(e,t){this._updateAxesFromSeries(this._model,e)},a.prototype.containPoint=function(e){var t=this._makeLayoutInfo(),r=t.axisBase,n=t.layoutBase,i=t.pixelDimIndex,o=e[1-i],l=e[i];return o>=r&&o<=r+t.axisLength&&l>=n&&l<=n+t.layoutLength},a.prototype.getModel=function(){return this._model},a.prototype._updateAxesFromSeries=function(e,t){t.eachSeries(function(r){if(e.contains(r,t)){var n=r.getData();Z5(this.dimensions,function(i){var o=this._axesMap.get(i);o.scale.unionExtentFromData(n,n.mapDimension(i)),Ex(o.scale,o.model)},this)}},this)},a.prototype.resize=function(e,t){var r=pi(e,t).refContainer;this._rect=ln(e.getBoxLayoutParams(),r),this._layoutAxes()},a.prototype.getRect=function(){return this._rect},a.prototype._makeLayoutInfo=function(){var e=this._model,t=this._rect,r=["x","y"],n=["width","height"],i=e.get("layout"),o=i==="horizontal"?0:1,l=t[n[o]],c=[0,l],d=this.dimensions.length,u=sw(e.get("axisExpandWidth"),c),h=sw(e.get("axisExpandCount")||0,[0,d]),f=e.get("axisExpandable")&&d>3&&d>h&&h>1&&u>0&&l>0,p=e.get("axisExpandWindow"),g;if(p)g=sw(p[1]-p[0],c),p[1]=p[0]+g;else{g=sw(u*(h-1),c);var b=e.get("axisExpandCenter")||UB(d/2);p=[u*b-g/2],p[1]=p[0]+g}var w=(l-g)/(d-h);w<3&&(w=0);var _=[UB(GB(p[0]/u,1))+1,y5e(GB(p[1]/u,1))-1],k=w/u*p[0];return{layout:i,pixelDimIndex:o,layoutBase:t[r[o]],layoutLength:l,axisBase:t[r[1-o]],axisLength:t[n[1-o]],axisExpandable:f,axisExpandWidth:u,axisCollapseWidth:w,axisExpandWindow:p,axisCount:d,winInnerIndices:_,axisExpandWindow0Pos:k}},a.prototype._layoutAxes=function(){var e=this._rect,t=this._axesMap,r=this.dimensions,n=this._makeLayoutInfo(),i=n.layout;t.each(function(o){var l=[0,n.axisLength],c=o.inverse?1:0;o.setExtent(l[c],l[1-c])}),Z5(r,function(o,l){var c=(n.axisExpandable?j5e:N5e)(l,n),d={horizontal:{x:c.position,y:n.axisLength},vertical:{x:0,y:c.position}},u={horizontal:w5e/2,vertical:0},h=[d[i].x+e.x,d[i].y+e.y],f=u[i],p=Ii();Ch(p,p,f),Cc(p,p,h),this._axesLayout[o]={position:h,rotation:f,transform:p,axisNameAvailableWidth:c.axisNameAvailableWidth,axisLabelShow:c.axisLabelShow,nameTruncateMaxWidth:c.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},a.prototype.getAxis=function(e){return this._axesMap.get(e)},a.prototype.dataToPoint=function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},a.prototype.eachActiveState=function(e,t,r,n){r==null&&(r=0),n==null&&(n=e.count());var i=this._axesMap,o=this.dimensions,l=[],c=[];oe(o,function(w){l.push(e.mapDimension(w)),c.push(i.get(w).model)});for(var d=this.hasAxisBrushed(),u=r;u<n;u++){var h=void 0;if(!d)h="normal";else{h="active";for(var f=e.getValues(l,u),p=0,g=o.length;p<g;p++){var b=c[p].getActiveState(f[p]);if(b==="inactive"){h="inactive";break}}}t(h,u)}},a.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,t=this._axesMap,r=!1,n=0,i=e.length;n<i;n++)t.get(e[n]).model.getActiveState()!=="normal"&&(r=!0);return r},a.prototype.axisCoordToPoint=function(e,t){var r=this._axesLayout[t];return jl([e,0],r.transform)},a.prototype.getAxisLayout=function(e){return $t(this._axesLayout[e])},a.prototype.getSlidedAxisExpandWindow=function(e){var t=this._makeLayoutInfo(),r=t.pixelDimIndex,n=t.axisExpandWindow.slice(),i=n[1]-n[0],o=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:n};var l=e[r]-t.layoutBase-t.axisExpandWindow0Pos,c,d="slide",u=t.axisCollapseWidth,h=this._model.get("axisExpandSlideTriggerArea"),f=h[0]!=null;if(u)f&&u&&l<i*h[0]?(d="jump",c=l-i*h[2]):f&&u&&l>i*(1-h[0])?(d="jump",c=l-i*(1-h[2])):(c=l-i*h[1])>=0&&(c=l-i*(1-h[1]))<=0&&(c=0),c*=t.axisExpandWidth/u,c?wh(c,n,o,"all"):d="none";else{var p=n[1]-n[0],g=o[1]*l/p;n=[cZ(0,g-p/2)],n[1]=lZ(o[1],n[0]+p),n[0]=n[1]-p}return{axisExpandWindow:n,behavior:d}},a})();function sw(a,e){return lZ(cZ(a,e[0]),e[1])}function N5e(a,e){var t=e.layoutLength/(e.axisCount-1);return{position:t*a,axisNameAvailableWidth:t,axisLabelShow:!0}}function j5e(a,e){var t=e.layoutLength,r=e.axisExpandWidth,n=e.axisCount,i=e.axisCollapseWidth,o=e.winInnerIndices,l,c=i,d=!1,u;return a<o[0]?(l=a*i,u=i):a<=o[1]?(l=e.axisExpandWindow0Pos+a*r-e.axisExpandWindow[0],c=r,d=!0):(l=t-(n-1-a)*i,u=i),{position:l,axisNameAvailableWidth:c,axisLabelShow:d,nameTruncateMaxWidth:u}}function S5e(a,e){var t=[];return a.eachComponent("parallel",function(r,n){var i=new _5e(r,a,e);i.name="parallel_"+n,i.resize(r,e),r.coordinateSystem=i,i.model=r,t.push(i)}),a.eachSeries(function(r){if(r.get("coordinateSystem")==="parallel"){var n=r.getReferringComponents("parallel",yn).models[0];r.coordinateSystem=n.coordinateSystem}}),t}var k5e={create:S5e},eA=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.activeIntervals=[],t}return e.prototype.getAreaSelectStyle=function(){return b0([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var r=this.activeIntervals=$t(t);if(r)for(var n=r.length-1;n>=0;n--)el(r[n])},e.prototype.getActiveState=function(t){var r=this.activeIntervals;if(!r.length)return"normal";if(t==null||isNaN(+t))return"inactive";if(r.length===1){var n=r[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var i=0,o=r.length;i<o;i++)if(r[i][0]<=t&&t<=r[i][1])return"active";return"inactive"},e})(Oa);ti(eA,Bb);var j0=!0,db=Math.min,Ox=Math.max,C5e=Math.pow,A5e=1e4,T5e=6,M5e=6,WB="globalPan",E5e={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},D5e={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},$B={brushStyle:{lineWidth:2,stroke:Fe.color.backgroundTint,fill:Fe.color.borderTint},transformable:!0,brushMode:"single",removeOnClick:!1},I5e=0,iE=(function(a){Le(e,a);function e(t){var r=a.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=t,r.group=new Gt,r._uid="brushController_"+I5e++,oe(F5e,function(n,i){this._handlers[i]=St(n,this)},r),r}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var r=this._zr;this._enableGlobalPan||mje(r,WB,this._uid),oe(this._handlers,function(n,i){r.on(i,n)}),this._brushType=t.brushType,this._brushOption=_a($t($B),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;gje(t,WB,this._uid),oe(this._handlers,function(r,n){t.off(n,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var r=this._panels={};oe(t,function(n){r[n.panelId]=$t(n)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=it(t,function(f){return _a($t($B),f,!0)});var r="\0-brush-index-",n=this._covers,i=this._covers=[],o=this,l=this._creatingCover;return new Bd(n,t,d,c).add(u).update(u).remove(h).execute(),this;function c(f,p){return(f.id!=null?f.id:r+p)+"-"+f.brushType}function d(f,p){return c(f.__brushOption,p)}function u(f,p){var g=t[f];if(p!=null&&n[p]===l)i[f]=n[p];else{var b=i[f]=p!=null?(n[p].__brushOption=g,n[p]):uZ(o,dZ(o,g));sE(o,b)}}function h(f){n[f]!==l&&o.group.remove(n[f])}},e.prototype.unmount=function(){return this.enableBrush(!1),tA(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e})(il);function dZ(a,e){var t=zN[e.brushType].createCover(a,e);return t.__brushOption=e,fZ(t,e),a.group.add(t),t}function uZ(a,e){var t=oE(e);return t.endCreating&&(t.endCreating(a,e),fZ(e,e.__brushOption)),e}function hZ(a,e){var t=e.__brushOption;oE(e).updateCoverShape(a,e,t.range,t)}function fZ(a,e){var t=e.z;t==null&&(t=A5e),a.traverse(function(r){r.z=t,r.z2=t})}function sE(a,e){oE(e).updateCommon(a,e),hZ(a,e)}function oE(a){return zN[a.__brushOption.brushType]}function lE(a,e,t){var r=a._panels;if(!r)return j0;var n,i=a._transform;return oe(r,function(o){o.isTargetByCursor(e,t,i)&&(n=o)}),n}function pZ(a,e){var t=a._panels;if(!t)return j0;var r=e.__brushOption.panelId;return r!=null?t[r]:j0}function tA(a){var e=a._covers,t=e.length;return oe(e,function(r){a.group.remove(r)},a),e.length=0,!!t}function S0(a,e){var t=it(a._covers,function(r){var n=r.__brushOption,i=$t(n.range);return{brushType:n.brushType,panelId:n.panelId,range:i}});a.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function R5e(a){var e=a._track;if(!e.length)return!1;var t=e[e.length-1],r=e[0],n=t[0]-r[0],i=t[1]-r[1],o=C5e(n*n+i*i,.5);return o>T5e}function xZ(a){var e=a.length-1;return e<0&&(e=0),[a[0],a[e]]}function mZ(a,e,t,r){var n=new Gt;return n.add(new Ta({name:"main",style:cE(t),silent:!0,draggable:!0,cursor:"move",drift:va(YB,a,e,n,["n","s","w","e"]),ondragend:va(S0,e,{isEnd:!0})})),oe(r,function(i){n.add(new Ta({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:va(YB,a,e,n,i),ondragend:va(S0,e,{isEnd:!0})}))}),n}function gZ(a,e,t,r){var n=r.brushStyle.lineWidth||0,i=Ox(n,M5e),o=t[0][0],l=t[1][0],c=o-n/2,d=l-n/2,u=t[0][1],h=t[1][1],f=u-i+n/2,p=h-i+n/2,g=u-o,b=h-l,w=g+n,_=b+n;ud(a,e,"main",o,l,g,b),r.transformable&&(ud(a,e,"w",c,d,i,_),ud(a,e,"e",f,d,i,_),ud(a,e,"n",c,d,w,i),ud(a,e,"s",c,p,w,i),ud(a,e,"nw",c,d,i,i),ud(a,e,"ne",f,d,i,i),ud(a,e,"sw",c,p,i,i),ud(a,e,"se",f,p,i,i))}function aA(a,e){var t=e.__brushOption,r=t.transformable,n=e.childAt(0);n.useStyle(cE(t)),n.attr({silent:!r,cursor:r?"move":"default"}),oe([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var o=e.childOfName(i.join("")),l=i.length===1?rA(a,i[0]):O5e(a,i);o&&o.attr({silent:!r,invisible:!r,cursor:r?D5e[l]+"-resize":null})})}function ud(a,e,t,r,n,i,o){var l=e.childOfName(t);l&&l.setShape(B5e(dE(a,e,[[r,n],[r+i,n+o]])))}function cE(a){return Kt({strokeNoScale:!0},a.brushStyle)}function vZ(a,e,t,r){var n=[db(a,t),db(e,r)],i=[Ox(a,t),Ox(e,r)];return[[n[0],i[0]],[n[1],i[1]]]}function L5e(a){return o0(a.group)}function rA(a,e){var t={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},n=wN(t[e],L5e(a));return r[n]}function O5e(a,e){var t=[rA(a,e[0]),rA(a,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function YB(a,e,t,r,n,i){var o=t.__brushOption,l=a.toRectRange(o.range),c=bZ(e,n,i);oe(r,function(d){var u=E5e[d];l[u[0]][u[1]]+=c[u[0]]}),o.range=a.fromRectRange(vZ(l[0][0],l[1][0],l[0][1],l[1][1])),sE(e,t),S0(e,{isEnd:!1})}function P5e(a,e,t,r){var n=e.__brushOption.range,i=bZ(a,t,r);oe(n,function(o){o[0]+=i[0],o[1]+=i[1]}),sE(a,e),S0(a,{isEnd:!1})}function bZ(a,e,t){var r=a.group,n=r.transformCoordToLocal(e,t),i=r.transformCoordToLocal(0,0);return[n[0]-i[0],n[1]-i[1]]}function dE(a,e,t){var r=pZ(a,e);return r&&r!==j0?r.clipPath(t,a._transform):$t(t)}function B5e(a){var e=db(a[0][0],a[1][0]),t=db(a[0][1],a[1][1]),r=Ox(a[0][0],a[1][0]),n=Ox(a[0][1],a[1][1]);return{x:e,y:t,width:r-e,height:n-t}}function z5e(a,e,t){if(!(!a._brushType||V5e(a,e.offsetX,e.offsetY))){var r=a._zr,n=a._covers,i=lE(a,e,t);if(!a._dragging)for(var o=0;o<n.length;o++){var l=n[o].__brushOption;if(i&&(i===j0||l.panelId===i.panelId)&&zN[l.brushType].contain(n[o],t[0],t[1]))return}i&&r.setCursorStyle("crosshair")}}function nA(a){var e=a.event;e.preventDefault&&e.preventDefault()}function iA(a,e,t){return a.childOfName("main").contain(e,t)}function yZ(a,e,t,r){var n=a._creatingCover,i=a._creatingPanel,o=a._brushOption,l;if(a._track.push(t.slice()),R5e(a)||n){if(i&&!n){o.brushMode==="single"&&tA(a);var c=$t(o);c.brushType=qB(c.brushType,i),c.panelId=i===j0?null:i.panelId,n=a._creatingCover=dZ(a,c),a._covers.push(n)}if(n){var d=zN[qB(a._brushType,i)],u=n.__brushOption;u.range=d.getCreatingRange(dE(a,n,a._track)),r&&(uZ(a,n),d.updateCommon(a,n)),hZ(a,n),l={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&lE(a,e,t)&&tA(a)&&(l={isEnd:r,removeOnClick:!0});return l}function qB(a,e){return a==="auto"?e.defaultBrushType:a}var F5e={mousedown:function(a){if(this._dragging)XB(this,a);else if(!a.target||!a.target.draggable){nA(a);var e=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var t=this._creatingPanel=lE(this,a,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(a){var e=a.offsetX,t=a.offsetY,r=this.group.transformCoordToLocal(e,t);if(z5e(this,a,r),this._dragging){nA(a);var n=yZ(this,a,r,!1);n&&S0(this,n)}},mouseup:function(a){XB(this,a)}};function XB(a,e){if(a._dragging){nA(e);var t=e.offsetX,r=e.offsetY,n=a.group.transformCoordToLocal(t,r),i=yZ(a,e,n,!0);a._dragging=!1,a._track=[],a._creatingCover=null,i&&S0(a,i)}}function V5e(a,e,t){var r=a._zr;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var zN={lineX:ZB(0),lineY:ZB(1),rect:{createCover:function(a,e){function t(r){return r}return mZ({toRectRange:t,fromRectRange:t},a,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(a){var e=xZ(a);return vZ(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(a,e,t,r){gZ(a,e,t,r)},updateCommon:aA,contain:iA},polygon:{createCover:function(a,e){var t=new Gt;return t.add(new $i({name:"main",style:cE(e),silent:!0})),t},getCreatingRange:function(a){return a},endCreating:function(a,e){e.remove(e.childAt(0)),e.add(new us({name:"main",draggable:!0,drift:va(P5e,a,e),ondragend:va(S0,a,{isEnd:!0})}))},updateCoverShape:function(a,e,t,r){e.childAt(0).setShape({points:dE(a,e,t)})},updateCommon:aA,contain:iA}};function ZB(a){return{createCover:function(e,t){return mZ({toRectRange:function(r){var n=[r,[0,100]];return a&&n.reverse(),n},fromRectRange:function(r){return r[a]}},e,t,[[["w"],["e"]],[["n"],["s"]]][a])},getCreatingRange:function(e){var t=xZ(e),r=db(t[0][a],t[1][a]),n=Ox(t[0][a],t[1][a]);return[r,n]},updateCoverShape:function(e,t,r,n){var i,o=pZ(e,t);if(o!==j0&&o.getLinearBrushOtherExtent)i=o.getLinearBrushOtherExtent(a);else{var l=e._zr;i=[0,[l.getWidth(),l.getHeight()][1-a]]}var c=[r,i];a&&c.reverse(),gZ(e,t,c,n)},updateCommon:aA,contain:iA}}function wZ(a){return a=uE(a),function(e){return r$(e,a)}}function _Z(a,e){return a=uE(a),function(t){var r=e??t,n=r?a.width:a.height,i=r?a.x:a.y;return[i,i+(n||0)]}}function NZ(a,e,t){var r=uE(a);return function(n,i){return r.contain(i[0],i[1])&&!AX(n,e,t)}}function uE(a){return Jt.create(a)}var H5e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){a.prototype.init.apply(this,arguments),(this._brushController=new iE(r.getZr())).on("brush",St(this._onBrush,this))},e.prototype.render=function(t,r,n,i){if(!U5e(t,r,i)){this.axisModel=t,this.api=n,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Gt,this.group.add(this._axisGroup),!!t.get("show")){var l=W5e(t,r),c=l.coordinateSystem,d=t.getAreaSelectStyle(),u=d.width,h=t.axis.dim,f=c.getAxisLayout(h),p=Je({strokeContainThreshold:u},f),g=new ks(t,n,p);g.build(),this._axisGroup.add(g.group),this._refreshBrushController(p,d,t,l,u,n),Eb(o,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,r,n,i,o,l){var c=n.axis.getExtent(),d=c[1]-c[0],u=Math.min(30,Math.abs(d)*.1),h=Jt.create({x:c[0],y:-o/2,width:d,height:o});h.x-=u,h.width+=2*u,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:wZ(h),isTargetByCursor:NZ(h,l,i),getLinearBrushOtherExtent:_Z(h,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(G5e(n))},e.prototype._onBrush=function(t){var r=t.areas,n=this.axisModel,i=n.axis,o=it(r,function(l){return[i.coordToData(l.range[0],!0),i.coordToData(l.range[1],!0)]});(!n.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:o})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e})(tn);function U5e(a,e,t){return t&&t.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:t})[0]===a}function G5e(a){var e=a.axis;return it(a.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}function W5e(a,e){return e.getComponent("parallel",a.get("parallelIndex"))}var $5e={type:"axisAreaSelect",event:"axisAreaSelected"};function Y5e(a){a.registerAction($5e,function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(r){r.axis.model.setActiveIntervals(e.intervals)})}),a.registerAction("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(r){r.setAxisExpand(e)})})}var q5e={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function jZ(a){a.registerComponentView(m5e),a.registerComponentModel(v5e),a.registerCoordinateSystem("parallel",k5e),a.registerPreprocessor(h5e),a.registerComponentModel(eA),a.registerComponentView(H5e),Rx(a,"parallel",eA,q5e),Y5e(a)}function X5e(a){Sa(jZ),a.registerChartView(n5e),a.registerSeriesModel(o5e),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,u5e)}var Z5e=(function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return a})(),K5e=(function(a){Le(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Z5e},e.prototype.buildPath=function(t,r){var n=r.extent;t.moveTo(r.x1,r.y1),t.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(t.lineTo(r.x2+n,r.y2),t.bezierCurveTo(r.cpx2+n,r.cpy2,r.cpx1+n,r.cpy1,r.x1+n,r.y1)):(t.lineTo(r.x2,r.y2+n),t.bezierCurveTo(r.cpx2,r.cpy2+n,r.cpx1,r.cpy1+n,r.x1,r.y1+n)),t.closePath()},e.prototype.highlight=function(){Od(this)},e.prototype.downplay=function(){Pd(this)},e})(Ia),Q5e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._mainGroup=new Gt,t._focusAdjacencyDisabled=!1,t}return e.prototype.init=function(t,r){this._controller=new O0(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,r,n){var i=this,o=t.getGraph(),l=this._mainGroup,c=t.layoutInfo,d=c.width,u=c.height,h=t.getData(),f=t.getData("edge"),p=t.get("orient");this._model=t,l.removeAll(),l.x=c.x,l.y=c.y,this._updateViewCoordSys(t,n),TX(t,n,l,this._controller,this._controllerHost,null),o.eachEdge(function(g){var b=new K5e,w=na(b);w.dataIndex=g.dataIndex,w.seriesIndex=t.seriesIndex,w.dataType="edge";var _=g.getModel(),k=_.getModel("lineStyle"),T=k.get("curveness"),D=g.node1.getLayout(),I=g.node1.getModel(),O=I.get("localX"),P=I.get("localY"),V=g.node2.getLayout(),G=g.node2.getModel(),Q=G.get("localX"),$=G.get("localY"),ae=g.getLayout(),J,U,F,W,K,ee,ne,re;b.shape.extent=Math.max(1,ae.dy),b.shape.orient=p,p==="vertical"?(J=(O!=null?O*d:D.x)+ae.sy,U=(P!=null?P*u:D.y)+D.dy,F=(Q!=null?Q*d:V.x)+ae.ty,W=$!=null?$*u:V.y,K=J,ee=U*(1-T)+W*T,ne=F,re=U*T+W*(1-T)):(J=(O!=null?O*d:D.x)+D.dx,U=(P!=null?P*u:D.y)+ae.sy,F=Q!=null?Q*d:V.x,W=($!=null?$*u:V.y)+ae.ty,K=J*(1-T)+F*T,ee=U,ne=J*T+F*(1-T),re=W),b.setShape({x1:J,y1:U,x2:F,y2:W,cpx1:K,cpy1:ee,cpx2:ne,cpy2:re}),b.useStyle(k.getItemStyle()),KB(b.style,p,g);var Z=""+_.get("value"),ie=fi(_,"edgeLabel");ji(b,ie,{labelFetcher:{getFormattedLabel:function(he,ve,Oe,Se,Ce,we){return t.getFormattedLabel(he,ve,"edge",Se,No(Ce,ie.normal&&ie.normal.get("formatter"),Z),we)}},labelDataIndex:g.dataIndex,defaultText:Z}),b.setTextConfig({position:"inside"});var de=_.getModel("emphasis");hi(b,_,"lineStyle",function(he){var ve=he.getItemStyle();return KB(ve,p,g),ve}),l.add(b),f.setItemGraphicEl(g.dataIndex,b);var fe=de.get("focus");on(b,fe==="adjacency"?g.getAdjacentDataIndices():fe==="trajectory"?g.getTrajectoryDataIndices():fe,de.get("blurScope"),de.get("disabled"))}),o.eachNode(function(g){var b=g.getLayout(),w=g.getModel(),_=w.get("localX"),k=w.get("localY"),T=w.getModel("emphasis"),D=w.get(["itemStyle","borderRadius"])||0,I=new Ta({shape:{x:_!=null?_*d:b.x,y:k!=null?k*u:b.y,width:b.dx,height:b.dy,r:D},style:w.getModel("itemStyle").getItemStyle(),z2:10});ji(I,fi(w),{labelFetcher:{getFormattedLabel:function(P,V){return t.getFormattedLabel(P,V,"node")}},labelDataIndex:g.dataIndex,defaultText:g.id}),I.disableLabelAnimation=!0,I.setStyle("fill",g.getVisual("color")),I.setStyle("decal",g.getVisual("style").decal),hi(I,w),l.add(I),h.setItemGraphicEl(g.dataIndex,I),na(I).dataType="node";var O=T.get("focus");on(I,O==="adjacency"?g.getAdjacentDataIndices():O==="trajectory"?g.getTrajectoryDataIndices():O,T.get("blurScope"),T.get("disabled"))}),h.eachItemGraphicEl(function(g,b){var w=h.getItemModel(b);w.get("draggable")&&(g.drift=function(_,k){i._focusAdjacencyDisabled=!0,this.shape.x+=_,this.shape.y+=k,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:h.getRawIndex(b),localX:this.shape.x/d,localY:this.shape.y/u})},g.ondragend=function(){i._focusAdjacencyDisabled=!1},g.draggable=!0,g.cursor="move")}),!this._data&&t.isAnimationEnabled()&&l.setClipPath(J5e(l.getBoundingRect(),t,function(){l.removeClipPath()})),this._data=t.getData()},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._updateViewCoordSys=function(t,r){var n=t.layoutInfo,i=n.width,o=n.height,l=t.coordinateSystem=new P0(null,{api:r,ecModel:t.ecModel});l.zoomLimit=t.get("scaleLimit"),l.setBoundingRect(0,0,i,o),l.setCenter(t.get("center")),l.setZoom(t.get("zoom")),this._controllerHost.target.attr({x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY})},e.type="sankey",e})(Mr);function KB(a,e,t){switch(a.fill){case"source":a.fill=t.node1.getVisual("color"),a.decal=t.node1.getVisual("style").decal;break;case"target":a.fill=t.node2.getVisual("color"),a.decal=t.node2.getVisual("style").decal;break;case"gradient":var r=t.node1.getVisual("color"),n=t.node2.getVisual("color");jt(r)&&jt(n)&&(a.fill=new Yx(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:r,offset:0},{color:n,offset:1}]))}}function J5e(a,e,t){var r=new Ta({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return en(r,{shape:{width:a.width+20}},e,t),r}var eCe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){var n=t.edges||t.links||[],i=t.data||t.nodes||[],o=t.levels||[];this.levelModels=[];for(var l=this.levelModels,c=0;c<o.length;c++)o[c].depth!=null&&o[c].depth>=0&&(l[o[c].depth]=new za(o[c],this,r));var d=nE(i,n,this,!0,u);return d.data;function u(h,f){h.wrapMethod("getItemModel",function(p,g){var b=p.parentModel,w=b.getData().getItemLayout(g);if(w){var _=w.depth,k=b.levelModels[_];k&&(p.parentModel=k)}return p}),f.wrapMethod("getItemModel",function(p,g){var b=p.parentModel,w=b.getGraph().getEdgeByIndex(g),_=w.node1.getLayout();if(_){var k=_.depth,T=b.levelModels[k];T&&(p.parentModel=T)}return p})}},e.prototype.setNodePosition=function(t,r){var n=this.option.data||this.option.nodes,i=n[t];i.localX=r[0],i.localY=r[1]},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,r,n){function i(p){return isNaN(p)||p==null}if(n==="edge"){var o=this.getDataParams(t,n),l=o.data,c=o.value,d=l.source+" -- "+l.target;return Jn("nameValue",{name:d,value:c,noValue:i(c)})}else{var u=this.getGraph().getNodeByIndex(t),h=u.getLayout().value,f=this.getDataParams(t,n).data.name;return Jn("nameValue",{name:f!=null?f+"":null,value:h,noValue:i(h)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(t,r){var n=a.prototype.getDataParams.call(this,t,r);if(n.value==null&&r==="node"){var i=this.getGraph().getNodeByIndex(t),o=i.getLayout().value;n.value=o}return n},e.type="series.sankey",e.layoutMode="box",e.defaultOption={z:2,coordinateSystemUsage:"box",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,roam:!1,roamTrigger:"global",center:null,zoom:1,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:Fe.color.neutral50,opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:Fe.color.primary}},animationEasing:"linear",animationDuration:1e3},e})(Fr);function tCe(a,e){a.eachSeriesByType("sankey",function(t){var r=t.get("nodeWidth"),n=t.get("nodeGap"),i=pi(t,e).refContainer,o=ln(t.getBoxLayoutParams(),i);t.layoutInfo=o;var l=o.width,c=o.height,d=t.getGraph(),u=d.nodes,h=d.edges;rCe(u);var f=hr(u,function(w){return w.getLayout().value===0}),p=f.length!==0?0:t.get("layoutIterations"),g=t.get("orient"),b=t.get("nodeAlign");aCe(u,h,r,n,l,c,p,g,b)})}function aCe(a,e,t,r,n,i,o,l,c){nCe(a,e,t,n,i,l,c),lCe(a,e,i,n,r,o,l),gCe(a,l)}function rCe(a){oe(a,function(e){var t=uh(e.outEdges,m_),r=uh(e.inEdges,m_),n=e.getValue()||0,i=Math.max(t,r,n);e.setLayout({value:i},!0)})}function nCe(a,e,t,r,n,i,o){for(var l=[],c=[],d=[],u=[],h=0,f=0;f<e.length;f++)l[f]=1;for(var f=0;f<a.length;f++)c[f]=a[f].inEdges.length,c[f]===0&&d.push(a[f]);for(var p=-1;d.length;){for(var g=0;g<d.length;g++){var b=d[g],w=b.hostGraph.data.getRawDataItem(b.dataIndex),_=w.depth!=null&&w.depth>=0;_&&w.depth>p&&(p=w.depth),b.setLayout({depth:_?w.depth:h},!0),i==="vertical"?b.setLayout({dy:t},!0):b.setLayout({dx:t},!0);for(var k=0;k<b.outEdges.length;k++){var T=b.outEdges[k],D=e.indexOf(T);l[D]=0;var I=T.node2,O=a.indexOf(I);--c[O]===0&&u.indexOf(I)<0&&u.push(I)}}++h,d=u,u=[]}for(var f=0;f<l.length;f++)if(l[f]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var P=p>h-1?p:h-1;o&&o!=="left"&&iCe(a,o,i,P);var V=i==="vertical"?(n-t)/P:(r-t)/P;oCe(a,V,i)}function SZ(a){var e=a.hostGraph.data.getRawDataItem(a.dataIndex);return e.depth!=null&&e.depth>=0}function iCe(a,e,t,r){if(e==="right"){for(var n=[],i=a,o=0;i.length;){for(var l=0;l<i.length;l++){var c=i[l];c.setLayout({skNodeHeight:o},!0);for(var d=0;d<c.inEdges.length;d++){var u=c.inEdges[d];n.indexOf(u.node1)<0&&n.push(u.node1)}}i=n,n=[],++o}oe(a,function(h){SZ(h)||h.setLayout({depth:Math.max(0,r-h.getLayout().skNodeHeight)},!0)})}else e==="justify"&&sCe(a,r)}function sCe(a,e){oe(a,function(t){!SZ(t)&&!t.outEdges.length&&t.setLayout({depth:e},!0)})}function oCe(a,e,t){oe(a,function(r){var n=r.getLayout().depth*e;t==="vertical"?r.setLayout({y:n},!0):r.setLayout({x:n},!0)})}function lCe(a,e,t,r,n,i,o){var l=cCe(a,o);dCe(l,e,t,r,n,o),K5(l,n,t,r,o);for(var c=1;i>0;i--)c*=.99,uCe(l,c,o),K5(l,n,t,r,o),mCe(l,c,o),K5(l,n,t,r,o)}function cCe(a,e){var t=[],r=e==="vertical"?"y":"x",n=G4(a,function(i){return i.getLayout()[r]});return n.keys.sort(function(i,o){return i-o}),oe(n.keys,function(i){t.push(n.buckets.get(i))}),t}function dCe(a,e,t,r,n,i){var o=1/0;oe(a,function(l){var c=l.length,d=0;oe(l,function(h){d+=h.getLayout().value});var u=i==="vertical"?(r-(c-1)*n)/d:(t-(c-1)*n)/d;u<o&&(o=u)}),oe(a,function(l){oe(l,function(c,d){var u=c.getLayout().value*o;i==="vertical"?(c.setLayout({x:d},!0),c.setLayout({dx:u},!0)):(c.setLayout({y:d},!0),c.setLayout({dy:u},!0))})}),oe(e,function(l){var c=+l.getValue()*o;l.setLayout({dy:c},!0)})}function K5(a,e,t,r,n){var i=n==="vertical"?"x":"y";oe(a,function(o){o.sort(function(b,w){return b.getLayout()[i]-w.getLayout()[i]});for(var l,c,d,u=0,h=o.length,f=n==="vertical"?"dx":"dy",p=0;p<h;p++)c=o[p],d=u-c.getLayout()[i],d>0&&(l=c.getLayout()[i]+d,n==="vertical"?c.setLayout({x:l},!0):c.setLayout({y:l},!0)),u=c.getLayout()[i]+c.getLayout()[f]+e;var g=n==="vertical"?r:t;if(d=u-e-g,d>0){l=c.getLayout()[i]-d,n==="vertical"?c.setLayout({x:l},!0):c.setLayout({y:l},!0),u=l;for(var p=h-2;p>=0;--p)c=o[p],d=c.getLayout()[i]+c.getLayout()[f]+e-u,d>0&&(l=c.getLayout()[i]-d,n==="vertical"?c.setLayout({x:l},!0):c.setLayout({y:l},!0)),u=c.getLayout()[i]}})}function uCe(a,e,t){oe(a.slice().reverse(),function(r){oe(r,function(n){if(n.outEdges.length){var i=uh(n.outEdges,hCe,t)/uh(n.outEdges,m_);if(isNaN(i)){var o=n.outEdges.length;i=o?uh(n.outEdges,fCe,t)/o:0}if(t==="vertical"){var l=n.getLayout().x+(i-_h(n,t))*e;n.setLayout({x:l},!0)}else{var c=n.getLayout().y+(i-_h(n,t))*e;n.setLayout({y:c},!0)}}})})}function hCe(a,e){return _h(a.node2,e)*a.getValue()}function fCe(a,e){return _h(a.node2,e)}function pCe(a,e){return _h(a.node1,e)*a.getValue()}function xCe(a,e){return _h(a.node1,e)}function _h(a,e){return e==="vertical"?a.getLayout().x+a.getLayout().dx/2:a.getLayout().y+a.getLayout().dy/2}function m_(a){return a.getValue()}function uh(a,e,t){for(var r=0,n=a.length,i=-1;++i<n;){var o=+e(a[i],t);isNaN(o)||(r+=o)}return r}function mCe(a,e,t){oe(a,function(r){oe(r,function(n){if(n.inEdges.length){var i=uh(n.inEdges,pCe,t)/uh(n.inEdges,m_);if(isNaN(i)){var o=n.inEdges.length;i=o?uh(n.inEdges,xCe,t)/o:0}if(t==="vertical"){var l=n.getLayout().x+(i-_h(n,t))*e;n.setLayout({x:l},!0)}else{var c=n.getLayout().y+(i-_h(n,t))*e;n.setLayout({y:c},!0)}}})})}function gCe(a,e){var t=e==="vertical"?"x":"y";oe(a,function(r){r.outEdges.sort(function(n,i){return n.node2.getLayout()[t]-i.node2.getLayout()[t]}),r.inEdges.sort(function(n,i){return n.node1.getLayout()[t]-i.node1.getLayout()[t]})}),oe(a,function(r){var n=0,i=0;oe(r.outEdges,function(o){o.setLayout({sy:n},!0),n+=o.getLayout().dy}),oe(r.inEdges,function(o){o.setLayout({ty:i},!0),i+=o.getLayout().dy})})}function vCe(a){a.eachSeriesByType("sankey",function(e){var t=e.getGraph(),r=t.nodes,n=t.edges;if(r.length){var i=1/0,o=-1/0;oe(r,function(l){var c=l.getLayout().value;c<i&&(i=c),c>o&&(o=c)}),oe(r,function(l){var c=new Ni({type:"color",mappingMethod:"linear",dataExtent:[i,o],visual:e.get("color")}),d=c.mapValueToVisual(l.getLayout().value),u=l.getModel().get(["itemStyle","color"]);u!=null?(l.setVisual("color",u),l.setVisual("style",{fill:u})):(l.setVisual("color",d),l.setVisual("style",{fill:d}))})}n.length&&oe(n,function(l){var c=l.getModel().get("lineStyle");l.setVisual("style",c)})})}function bCe(a){a.registerChartView(Q5e),a.registerSeriesModel(eCe),a.registerLayout(tCe),a.registerVisual(vCe),a.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(r){r.setNodePosition(e.dataIndex,[e.localX,e.localY])})}),a.registerAction({type:"sankeyRoam",event:"sankeyRoam",update:"none"},function(e,t,r){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(n){var i=n.coordinateSystem,o=LN(i,e,n.get("scaleLimit"));n.setCenter(o.center),n.setZoom(o.zoom)})})}var kZ=(function(){function a(){}return a.prototype._hasEncodeRule=function(e){var t=this.getEncode();return t&&t.get(e)!=null},a.prototype.getInitialData=function(e,t){var r,n=t.getComponent("xAxis",this.get("xAxisIndex")),i=t.getComponent("yAxis",this.get("yAxisIndex")),o=n.get("type"),l=i.get("type"),c;o==="category"?(e.layout="horizontal",r=n.getOrdinalMeta(),c=!this._hasEncodeRule("x")):l==="category"?(e.layout="vertical",r=i.getOrdinalMeta(),c=!this._hasEncodeRule("y")):e.layout=e.layout||"horizontal";var d=["x","y"],u=e.layout==="horizontal"?0:1,h=this._baseAxisDim=d[u],f=d[1-u],p=[n,i],g=p[u].get("type"),b=p[1-u].get("type"),w=e.data;if(w&&c){var _=[];oe(w,function(D,I){var O;rt(D)?(O=D.slice(),D.unshift(I)):rt(D.value)?(O=Je({},D),O.value=O.value.slice(),D.value.unshift(I)):O=D,_.push(O)}),e.data=_}var k=this.defaultValueDimensions,T=[{name:h,type:J2(g),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:f,type:J2(b),dimsDef:k.slice()}];return am(this,{coordDimensions:T,dimensionsCount:k.length+1,encodeDefaulter:va(P$,T,this)})},a.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},a})(),CZ=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],t.visualDrawType="stroke",t}return e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:Fe.color.neutral00,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:Fe.color.shadow}},animationDuration:800},e})(Fr);ti(CZ,kZ,!0);var yCe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=t.getData(),o=this.group,l=this._data;this._data||o.removeAll();var c=t.get("layout")==="horizontal"?1:0;i.diff(l).add(function(d){if(i.hasValue(d)){var u=i.getItemLayout(d),h=QB(u,i,d,c,!0);i.setItemGraphicEl(d,h),o.add(h)}}).update(function(d,u){var h=l.getItemGraphicEl(u);if(!i.hasValue(d)){o.remove(h);return}var f=i.getItemLayout(d);h?(nl(h),AZ(f,h,i,d)):h=QB(f,i,d,c),o.add(h),i.setItemGraphicEl(d,h)}).remove(function(d){var u=l.getItemGraphicEl(d);u&&o.remove(u)}).execute(),this._data=i},e.prototype.remove=function(t){var r=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(i){i&&r.remove(i)})},e.type="boxplot",e})(Mr),wCe=(function(){function a(){}return a})(),_Ce=(function(a){Le(e,a);function e(t){var r=a.call(this,t)||this;return r.type="boxplotBoxPath",r}return e.prototype.getDefaultShape=function(){return new wCe},e.prototype.buildPath=function(t,r){var n=r.points,i=0;for(t.moveTo(n[i][0],n[i][1]),i++;i<4;i++)t.lineTo(n[i][0],n[i][1]);for(t.closePath();i<n.length;i++)t.moveTo(n[i][0],n[i][1]),i++,t.lineTo(n[i][0],n[i][1])},e})(Ia);function QB(a,e,t,r,n){var i=a.ends,o=new _Ce({shape:{points:n?NCe(i,r,a):i}});return AZ(a,o,e,t,n),o}function AZ(a,e,t,r,n){var i=t.hostModel,o=M0[n?"initProps":"updateProps"];o(e,{shape:{points:a.ends}},i,r),e.useStyle(t.getItemVisual(r,"style")),e.style.strokeNoScale=!0,e.z2=100;var l=t.getItemModel(r),c=l.getModel("emphasis");hi(e,l),on(e,c.get("focus"),c.get("blurScope"),c.get("disabled"))}function NCe(a,e,t){return it(a,function(r){return r=r.slice(),r[e]=t.initBaseline,r})}var mv=oe;function jCe(a){var e=SCe(a);mv(e,function(t){var r=t.seriesModels;r.length&&(kCe(t),mv(r,function(n,i){CCe(n,t.boxOffsetList[i],t.boxWidthList[i])}))})}function SCe(a){var e=[],t=[];return a.eachSeriesByType("boxplot",function(r){var n=r.getBaseAxis(),i=ya(t,n);i<0&&(i=t.length,t[i]=n,e[i]={axis:n,seriesModels:[]}),e[i].seriesModels.push(r)}),e}function kCe(a){var e=a.axis,t=a.seriesModels,r=t.length,n=a.boxWidthList=[],i=a.boxOffsetList=[],o=[],l;if(e.type==="category")l=e.getBandWidth();else{var c=0;mv(t,function(g){c=Math.max(c,g.getData().count())});var d=e.getExtent();l=Math.abs(d[1]-d[0])/c}mv(t,function(g){var b=g.get("boxWidth");rt(b)||(b=[b,b]),o.push([_t(b[0],l)||0,_t(b[1],l)||0])});var u=l*.8-2,h=u/r*.3,f=(u-h*(r-1))/r,p=f/2-u/2;mv(t,function(g,b){i.push(p),p+=h+f,n.push(Math.min(Math.max(f,o[b][0]),o[b][1]))})}function CCe(a,e,t){var r=a.coordinateSystem,n=a.getData(),i=t/2,o=a.get("layout")==="horizontal"?0:1,l=1-o,c=["x","y"],d=n.mapDimension(c[o]),u=n.mapDimensionsAll(c[l]);if(d==null||u.length<5)return;for(var h=0;h<n.count();h++){var f=n.get(d,h),p=T(f,u[2],h),g=T(f,u[0],h),b=T(f,u[1],h),w=T(f,u[3],h),_=T(f,u[4],h),k=[];D(k,b,!1),D(k,w,!0),k.push(g,b,_,w),I(k,g),I(k,_),I(k,p),n.setItemLayout(h,{initBaseline:p[l],ends:k})}function T(O,P,V){var G=n.get(P,V),Q=[];Q[o]=O,Q[l]=G;var $;return isNaN(O)||isNaN(G)?$=[NaN,NaN]:($=r.dataToPoint(Q),$[o]+=e),$}function D(O,P,V){var G=P.slice(),Q=P.slice();G[o]+=i,Q[o]-=i,V?O.push(G,Q):O.push(Q,G)}function I(O,P){var V=P.slice(),G=P.slice();V[o]-=i,G[o]+=i,O.push(V,G)}}function ACe(a,e){e=e||{};for(var t=[],r=[],n=e.boundIQR,i=n==="none"||n===0,o=0;o<a.length;o++){var l=el(a[o].slice()),c=kk(l,.25),d=kk(l,.5),u=kk(l,.75),h=l[0],f=l[l.length-1],p=(n??1.5)*(u-c),g=i?h:Math.max(h,c-p),b=i?f:Math.min(f,u+p),w=e.itemNameFormatter,_=Ut(w)?w({value:o}):jt(w)?w.replace("{value}",o+""):o+"";t.push([_,g,c,d,u,b]);for(var k=0;k<l.length;k++){var T=l[k];if(T<g||T>b){var D=[_,T];r.push(D)}}}return{boxData:t,outliers:r}}var TCe={type:"echarts:boxplot",transform:function(e){var t=e.upstream;if(t.sourceFormat!==Ri){var r="";or(r)}var n=ACe(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function MCe(a){a.registerSeriesModel(CZ),a.registerChartView(yCe),a.registerLayout(jCe),a.registerTransform(TCe)}var ECe=["itemStyle","borderColor"],DCe=["itemStyle","borderColor0"],ICe=["itemStyle","borderColorDoji"],RCe=["itemStyle","color"],LCe=["itemStyle","color0"];function hE(a,e){return e.get(a>0?RCe:LCe)}function fE(a,e){return e.get(a===0?ICe:a>0?ECe:DCe)}var OCe={seriesType:"candlestick",plan:Kx(),performRawSeries:!0,reset:function(a,e){if(!e.isSeriesFiltered(a)){var t=a.pipelineContext.large;return!t&&{progress:function(r,n){for(var i;(i=r.next())!=null;){var o=n.getItemModel(i),l=n.getItemLayout(i).sign,c=o.getItemStyle();c.fill=hE(l,o),c.stroke=fE(l,o)||c.fill;var d=n.ensureUniqueItemVisual(i,"style");Je(d,c)}}}}}},PCe=["color","borderColor"],BCe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,r,n){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,r,n,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,r):this._incrementalRenderNormal(t,r)},e.prototype.eachRendered=function(t){Ah(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t){var r=t.getData(),n=this._data,i=this.group,o=r.getLayout("isSimpleBox"),l=t.get("clip",!0),c=t.coordinateSystem,d=c.getArea&&c.getArea();this._data||i.removeAll(),r.diff(n).add(function(u){if(r.hasValue(u)){var h=r.getItemLayout(u);if(l&&JB(d,h))return;var f=Q5(h,u,!0);en(f,{shape:{points:h.ends}},t,u),J5(f,r,u,o),i.add(f),r.setItemGraphicEl(u,f)}}).update(function(u,h){var f=n.getItemGraphicEl(h);if(!r.hasValue(u)){i.remove(f);return}var p=r.getItemLayout(u);if(l&&JB(d,p)){i.remove(f);return}f?(rr(f,{shape:{points:p.ends}},t,u),nl(f)):f=Q5(p),J5(f,r,u,o),i.add(f),r.setItemGraphicEl(u,f)}).remove(function(u){var h=n.getItemGraphicEl(u);h&&i.remove(h)}).execute(),this._data=r},e.prototype._renderLarge=function(t){this._clear(),ez(t,this.group);var r=t.get("clip",!0)?Vb(t.coordinateSystem,!1,t):null;r?this.group.setClipPath(r):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,r){for(var n=r.getData(),i=n.getLayout("isSimpleBox"),o;(o=t.next())!=null;){var l=n.getItemLayout(o),c=Q5(l);J5(c,n,o,i),c.incremental=!0,this.group.add(c),this._progressiveEls.push(c)}},e.prototype._incrementalRenderLarge=function(t,r){ez(r,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e})(Mr),zCe=(function(){function a(){}return a})(),FCe=(function(a){Le(e,a);function e(t){var r=a.call(this,t)||this;return r.type="normalCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new zCe},e.prototype.buildPath=function(t,r){var n=r.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))},e})(Ia);function Q5(a,e,t){var r=a.ends;return new FCe({shape:{points:t?VCe(r,a):r},z2:100})}function JB(a,e){for(var t=!0,r=0;r<e.ends.length;r++)if(a.contain(e.ends[r][0],e.ends[r][1])){t=!1;break}return t}function J5(a,e,t,r){var n=e.getItemModel(t);a.useStyle(e.getItemVisual(t,"style")),a.style.strokeNoScale=!0,a.__simpleBox=r,hi(a,n);var i=e.getItemLayout(t).sign;oe(a.states,function(l,c){var d=n.getModel(c),u=hE(i,d),h=fE(i,d)||u,f=l.style||(l.style={});u&&(f.fill=u),h&&(f.stroke=h)});var o=n.getModel("emphasis");on(a,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function VCe(a,e){return it(a,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var HCe=(function(){function a(){}return a})(),eC=(function(a){Le(e,a);function e(t){var r=a.call(this,t)||this;return r.type="largeCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new HCe},e.prototype.buildPath=function(t,r){for(var n=r.points,i=0;i<n.length;)if(this.__sign===n[i++]){var o=n[i++];t.moveTo(o,n[i++]),t.lineTo(o,n[i++])}else i+=3},e})(Ia);function ez(a,e,t,r){var n=a.getData(),i=n.getLayout("largePoints"),o=new eC({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});e.add(o);var l=new eC({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});e.add(l);var c=new eC({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});e.add(c),tC(1,o,a),tC(-1,l,a),tC(0,c,a),r&&(o.incremental=!0,l.incremental=!0),t&&t.push(o,l)}function tC(a,e,t,r){var n=fE(a,t)||hE(a,t),i=t.getModel("itemStyle").getItemStyle(PCe);e.useStyle(i),e.style.fill=null,e.style.stroke=n}var TZ=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,r,n){var i=r.getItemLayout(t);return i&&n.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e})(Fr);ti(TZ,kZ,!0);function UCe(a){!a||!rt(a.series)||oe(a.series,function(e){Qt(e)&&e.type==="k"&&(e.type="candlestick")})}var GCe={seriesType:"candlestick",plan:Kx(),reset:function(a){var e=a.coordinateSystem,t=a.getData(),r=WCe(a,t),n=0,i=1,o=["x","y"],l=t.getDimensionIndex(t.mapDimension(o[n])),c=it(t.mapDimensionsAll(o[i]),t.getDimensionIndex,t),d=c[0],u=c[1],h=c[2],f=c[3];if(t.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),l<0||c.length<4)return;return{progress:a.pipelineContext.large?g:p};function p(b,w){for(var _,k=w.getStore();(_=b.next())!=null;){var T=k.get(l,_),D=k.get(d,_),I=k.get(u,_),O=k.get(h,_),P=k.get(f,_),V=Math.min(D,I),G=Math.max(D,I),Q=K(V,T),$=K(G,T),ae=K(O,T),J=K(P,T),U=[];ee(U,$,0),ee(U,Q,1),U.push(re(J),re($),re(ae),re(Q));var F=w.getItemModel(_),W=!!F.get(["itemStyle","borderColorDoji"]);w.setItemLayout(_,{sign:tz(k,_,D,I,u,W),initBaseline:D>I?$[i]:Q[i],ends:U,brushRect:ne(O,P,T)})}function K(Z,ie){var de=[];return de[n]=ie,de[i]=Z,isNaN(ie)||isNaN(Z)?[NaN,NaN]:e.dataToPoint(de)}function ee(Z,ie,de){var fe=ie.slice(),he=ie.slice();fe[n]=Hw(fe[n]+r/2,1,!1),he[n]=Hw(he[n]-r/2,1,!0),de?Z.push(fe,he):Z.push(he,fe)}function ne(Z,ie,de){var fe=K(Z,de),he=K(ie,de);return fe[n]-=r/2,he[n]-=r/2,{x:fe[0],y:fe[1],width:r,height:he[1]-fe[1]}}function re(Z){return Z[n]=Hw(Z[n],1),Z}}function g(b,w){for(var _=hc(b.count*4),k=0,T,D=[],I=[],O,P=w.getStore(),V=!!a.get(["itemStyle","borderColorDoji"]);(O=b.next())!=null;){var G=P.get(l,O),Q=P.get(d,O),$=P.get(u,O),ae=P.get(h,O),J=P.get(f,O);if(isNaN(G)||isNaN(ae)||isNaN(J)){_[k++]=NaN,k+=3;continue}_[k++]=tz(P,O,Q,$,u,V),D[n]=G,D[i]=ae,T=e.dataToPoint(D,null,I),_[k++]=T?T[0]:NaN,_[k++]=T?T[1]:NaN,D[i]=J,T=e.dataToPoint(D,null,I),_[k++]=T?T[1]:NaN}w.setLayout("largePoints",_)}}};function tz(a,e,t,r,n,i){var o;return t>r?o=-1:t<r?o=1:o=i?0:e>0?a.get(n,e-1)<=r?1:-1:1,o}function WCe(a,e){var t=a.getBaseAxis(),r,n=t.type==="category"?t.getBandWidth():(r=t.getExtent(),Math.abs(r[1]-r[0])/e.count()),i=_t(Pt(a.get("barMaxWidth"),n),n),o=_t(Pt(a.get("barMinWidth"),1),n),l=a.get("barWidth");return l!=null?_t(l,n):Math.max(Math.min(n/2,i),o)}function $Ce(a){a.registerChartView(BCe),a.registerSeriesModel(TZ),a.registerPreprocessor(UCe),a.registerVisual(OCe),a.registerLayout(GCe)}function az(a,e){var t=e.rippleEffectColor||e.color;a.eachChild(function(r){r.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?t:null,fill:e.brushType==="fill"?t:null}})})}var YCe=(function(a){Le(e,a);function e(t,r){var n=a.call(this)||this,i=new zb(t,r),o=new Gt;return n.add(i),n.add(o),n.updateData(t,r),n}return e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var r=t.symbolType,n=t.color,i=t.rippleNumber,o=this.childAt(1),l=0;l<i;l++){var c=ei(r,-1,-1,2,2,n);c.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var d=-l/i*t.period+t.effectOffset;c.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(d).start(),c.animateStyle(!0).when(t.period,{opacity:0}).delay(d).start(),o.add(c)}az(o,t)},e.prototype.updateEffectAnimation=function(t){for(var r=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale","rippleNumber"],o=0;o<i.length;o++){var l=i[o];if(r[l]!==t[l]){this.stopEffectAnimation(),this.startEffectAnimation(t);return}}az(n,t)},e.prototype.highlight=function(){Od(this)},e.prototype.downplay=function(){Pd(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,r){var n=this,i=t.hostModel;this.childAt(0).updateData(t,r);var o=this.childAt(1),l=t.getItemModel(r),c=t.getItemVisual(r,"symbol"),d=Jx(t.getItemVisual(r,"symbolSize")),u=t.getItemVisual(r,"style"),h=u&&u.fill,f=l.getModel("emphasis");o.setScale(d),o.traverse(function(w){w.setStyle("fill",h)});var p=I0(t.getItemVisual(r,"symbolOffset"),d);p&&(o.x=p[0],o.y=p[1]);var g=t.getItemVisual(r,"symbolRotate");o.rotation=(g||0)*Math.PI/180||0;var b={};b.showEffectOn=i.get("showEffectOn"),b.rippleScale=l.get(["rippleEffect","scale"]),b.brushType=l.get(["rippleEffect","brushType"]),b.period=l.get(["rippleEffect","period"])*1e3,b.effectOffset=r/t.count(),b.z=i.getShallow("z")||0,b.zlevel=i.getShallow("zlevel")||0,b.symbolType=c,b.color=h,b.rippleEffectColor=l.get(["rippleEffect","color"]),b.rippleNumber=l.get(["rippleEffect","number"]),b.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(b):this.startEffectAnimation(b),this._effectCfg=b):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(w){w==="emphasis"?b.showEffectOn!=="render"&&n.startEffectAnimation(b):w==="normal"&&b.showEffectOn!=="render"&&n.stopEffectAnimation()}),this._effectCfg=b,on(this,f.get("focus"),f.get("blurScope"),f.get("disabled"))},e.prototype.fadeOut=function(t){t&&t()},e})(Gt),qCe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._symbolDraw=new Fb(YCe)},e.prototype.render=function(t,r,n){var i=t.getData(),o=this._symbolDraw;o.updateData(i,{clipShape:this._getClipShape(t)}),this.group.add(o.group)},e.prototype._getClipShape=function(t){var r=t.coordinateSystem,n=r&&r.getArea&&r.getArea();return t.get("clip",!0)?n:null},e.prototype.updateTransform=function(t,r,n){var i=t.getData();this.group.dirty();var o=Hb("").reset(t,r,n);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var r=t.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=vxe(r.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e})(Mr),XCe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return Wd(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,r,n){return n.point(r.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e})(Fr);function ZCe(a){a.registerChartView(qCe),a.registerSeriesModel(XCe),a.registerLayout(Hb("effectScatter"))}var MZ=(function(a){Le(e,a);function e(t,r,n){var i=a.call(this)||this;return i.add(i.createLine(t,r,n)),i._updateEffectSymbol(t,r),i}return e.prototype.createLine=function(t,r,n){return new aE(t,r,n)},e.prototype._updateEffectSymbol=function(t,r){var n=t.getItemModel(r),i=n.getModel("effect"),o=i.get("symbolSize"),l=i.get("symbol");rt(o)||(o=[o,o]);var c=t.getItemVisual(r,"style"),d=i.get("color")||c&&c.stroke,u=this.childAt(1);this._symbolType!==l&&(this.remove(u),u=ei(l,-.5,-.5,1,1,d),u.z2=100,u.culling=!0,this.add(u)),u&&(u.setStyle("shadowColor",d),u.setStyle(i.getItemStyle(["color"])),u.scaleX=o[0],u.scaleY=o[1],u.setColor(d),this._symbolType=l,this._symbolScale=o,this._updateEffectAnimation(t,i,r))},e.prototype._updateEffectAnimation=function(t,r,n){var i=this.childAt(1);if(i){var o=t.getItemLayout(n),l=r.get("period")*1e3,c=r.get("loop"),d=r.get("roundTrip"),u=r.get("constantSpeed"),h=Gi(r.get("delay"),function(p){return p/t.count()*l/3});if(i.ignore=!0,this._updateAnimationPoints(i,o),u>0&&(l=this._getLineLength(i)/u*1e3),l!==this._period||c!==this._loop||d!==this._roundTrip){i.stopAnimation();var f=void 0;Ut(h)?f=h(n):f=h,i.__t>0&&(f=-l*i.__t),this._animateSymbol(i,l,f,c,d)}this._period=l,this._loop=c,this._roundTrip=d}},e.prototype._animateSymbol=function(t,r,n,i,o){if(r>0){t.__t=0;var l=this,c=t.animate("",i).when(o?r*2:r,{__t:o?2:1}).delay(n).during(function(){l._updateSymbolPosition(t)});i||c.done(function(){l.remove(t)}),c.start()}},e.prototype._getLineLength=function(t){return Xu(t.__p1,t.__cp1)+Xu(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,r){t.__p1=r[0],t.__p2=r[1],t.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},e.prototype.updateData=function(t,r,n){this.childAt(0).updateData(t,r,n),this._updateEffectSymbol(t,r)},e.prototype._updateSymbolPosition=function(t){var r=t.__p1,n=t.__p2,i=t.__cp1,o=t.__t<1?t.__t:2-t.__t,l=[t.x,t.y],c=l.slice(),d=Ei,u=T4;l[0]=d(r[0],i[0],n[0],o),l[1]=d(r[1],i[1],n[1],o);var h=t.__t<1?u(r[0],i[0],n[0],o):u(n[0],i[0],r[0],1-o),f=t.__t<1?u(r[1],i[1],n[1],o):u(n[1],i[1],r[1],1-o);t.rotation=-Math.atan2(f,h)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(t.__lastT!==void 0&&t.__lastT<t.__t?(t.scaleY=Xu(c,l)*1.05,o===1&&(l[0]=c[0]+(l[0]-c[0])/2,l[1]=c[1]+(l[1]-c[1])/2)):t.__lastT===1?t.scaleY=2*Xu(r,l):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=l[0],t.y=l[1]},e.prototype.updateLayout=function(t,r){this.childAt(0).updateLayout(t,r);var n=t.getItemModel(r).getModel("effect");this._updateEffectAnimation(t,n,r)},e})(Gt),EZ=(function(a){Le(e,a);function e(t,r,n){var i=a.call(this)||this;return i._createPolyline(t,r,n),i}return e.prototype._createPolyline=function(t,r,n){var i=t.getItemLayout(r),o=new $i({shape:{points:i}});this.add(o),this._updateCommonStl(t,r,n)},e.prototype.updateData=function(t,r,n){var i=t.hostModel,o=this.childAt(0),l={shape:{points:t.getItemLayout(r)}};rr(o,l,i,r),this._updateCommonStl(t,r,n)},e.prototype._updateCommonStl=function(t,r,n){var i=this.childAt(0),o=t.getItemModel(r),l=n&&n.emphasisLineStyle,c=n&&n.focus,d=n&&n.blurScope,u=n&&n.emphasisDisabled;if(!n||t.hasItemOption){var h=o.getModel("emphasis");l=h.getModel("lineStyle").getLineStyle(),u=h.get("disabled"),c=h.get("focus"),d=h.get("blurScope")}i.useStyle(t.getItemVisual(r,"style")),i.style.fill=null,i.style.strokeNoScale=!0;var f=i.ensureState("emphasis");f.style=l,on(this,c,d,u)},e.prototype.updateLayout=function(t,r){var n=this.childAt(0);n.setShape("points",t.getItemLayout(r))},e})(Gt),KCe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return e.prototype.createLine=function(t,r,n){return new EZ(t,r,n)},e.prototype._updateAnimationPoints=function(t,r){this._points=r;for(var n=[0],i=0,o=1;o<r.length;o++){var l=r[o-1],c=r[o];i+=Xu(l,c),n.push(i)}if(i===0){this._length=0;return}for(var o=0;o<n.length;o++)n[o]/=i;this._offsets=n,this._length=i},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var r=t.__t<1?t.__t:2-t.__t,n=this._points,i=this._offsets,o=n.length;if(i){var l=this._lastFrame,c;if(r<this._lastFramePercent){var d=Math.min(l+1,o-1);for(c=d;c>=0&&!(i[c]<=r);c--);c=Math.min(c,o-2)}else{for(c=l;c<o&&!(i[c]>r);c++);c=Math.min(c-1,o-2)}var u=(r-i[c])/(i[c+1]-i[c]),h=n[c],f=n[c+1];t.x=h[0]*(1-u)+u*f[0],t.y=h[1]*(1-u)+u*f[1];var p=t.__t<1?f[0]-h[0]:h[0]-f[0],g=t.__t<1?f[1]-h[1]:h[1]-f[1];t.rotation=-Math.atan2(g,p)-Math.PI/2,this._lastFrame=c,this._lastFramePercent=r,t.ignore=!1}},e})(MZ),QCe=(function(){function a(){this.polyline=!1,this.curveness=0,this.segs=[]}return a})(),JCe=(function(a){Le(e,a);function e(t){var r=a.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:Fe.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new QCe},e.prototype.buildPath=function(t,r){var n=r.segs,i=r.curveness,o;if(r.polyline)for(o=this._off;o<n.length;){var l=n[o++];if(l>0){t.moveTo(n[o++],n[o++]);for(var c=1;c<l;c++)t.lineTo(n[o++],n[o++])}}else for(o=this._off;o<n.length;){var d=n[o++],u=n[o++],h=n[o++],f=n[o++];if(t.moveTo(d,u),i>0){var p=(d+h)/2-(u-f)*i,g=(u+f)/2-(h-d)*i;t.quadraticCurveTo(p,g,h,f)}else t.lineTo(h,f)}this.incremental&&(this._off=o,this.notClear=!0)},e.prototype.findDataIndex=function(t,r){var n=this.shape,i=n.segs,o=n.curveness,l=this.style.lineWidth;if(n.polyline)for(var c=0,d=0;d<i.length;){var u=i[d++];if(u>0)for(var h=i[d++],f=i[d++],p=1;p<u;p++){var g=i[d++],b=i[d++];if(Bu(h,f,g,b,l,t,r))return c}c++}else for(var c=0,d=0;d<i.length;){var h=i[d++],f=i[d++],g=i[d++],b=i[d++];if(o>0){var w=(h+g)/2-(f-b)*o,_=(f+b)/2-(g-h)*o;if(TW(h,f,w,_,g,b,l,t,r))return c}else if(Bu(h,f,g,b,l,t,r))return c;c++}return-1},e.prototype.contain=function(t,r){var n=this.transformCoordToLocal(t,r),i=this.getBoundingRect();if(t=n[0],r=n[1],i.contain(t,r)){var o=this.hoverDataIdx=this.findDataIndex(t,r);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,n=r.segs,i=1/0,o=1/0,l=-1/0,c=-1/0,d=0;d<n.length;){var u=n[d++],h=n[d++];i=Math.min(u,i),l=Math.max(u,l),o=Math.min(h,o),c=Math.max(h,c)}t=this._rect=new Jt(i,o,l,c)}return t},e})(Ia),e4e=(function(){function a(){this.group=new Gt}return a.prototype.updateData=function(e){this._clear();var t=this._create();t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e)},a.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},a.prototype.incrementalUpdate=function(e,t){var r=this._newAdded[0],n=t.getLayout("linesPoints"),i=r&&r.shape.segs;if(i&&i.length<2e4){var o=i.length,l=new Float32Array(o+n.length);l.set(i),l.set(n,o),r.setShape({segs:l})}else{this._newAdded=[];var c=this._create();c.incremental=!0,c.setShape({segs:n}),this._setCommon(c,t),c.__startIndex=e.start}},a.prototype.remove=function(){this._clear()},a.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},a.prototype._create=function(){var e=new JCe({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},a.prototype._setCommon=function(e,t,r){var n=t.hostModel;e.setShape({polyline:n.get("polyline"),curveness:n.get(["lineStyle","curveness"])}),e.useStyle(n.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var i=t.getVisual("style");i&&i.stroke&&e.setStyle("stroke",i.stroke),e.setStyle("fill",null);var o=na(e);o.seriesIndex=n.seriesIndex,e.on("mousemove",function(l){o.dataIndex=null;var c=e.hoverDataIdx;c>0&&(o.dataIndex=c+e.__startIndex)})},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a})(),DZ={seriesType:"lines",plan:Kx(),reset:function(a){var e=a.coordinateSystem;if(e){var t=a.get("polyline"),r=a.pipelineContext.large;return{progress:function(n,i){var o=[];if(r){var l=void 0,c=n.end-n.start;if(t){for(var d=0,u=n.start;u<n.end;u++)d+=a.getLineCoordsCount(u);l=new Float32Array(c+d*2)}else l=new Float32Array(c*4);for(var h=0,f=[],u=n.start;u<n.end;u++){var p=a.getLineCoords(u,o);t&&(l[h++]=p);for(var g=0;g<p;g++)f=e.dataToPoint(o[g],!1,f),l[h++]=f[0],l[h++]=f[1]}i.setLayout("linesPoints",l)}else for(var u=n.start;u<n.end;u++){var b=i.getItemModel(u),p=a.getLineCoords(u,o),w=[];if(t)for(var _=0;_<p;_++)w.push(e.dataToPoint(o[_]));else{w[0]=e.dataToPoint(o[0]),w[1]=e.dataToPoint(o[1]);var k=b.get(["lineStyle","curveness"]);+k&&(w[2]=[(w[0][0]+w[1][0])/2-(w[0][1]-w[1][1])*k,(w[0][1]+w[1][1])/2-(w[1][0]-w[0][0])*k])}i.setItemLayout(u,w)}}}}}},t4e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=t.getData(),o=this._updateLineDraw(i,t),l=t.get("zlevel"),c=t.get(["effect","trailLength"]),d=n.getZr(),u=d.painter.getType()==="svg";u||d.painter.getLayer(l).clear(!0),this._lastZlevel!=null&&!u&&d.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&c>0&&(u||d.configLayer(l,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(c/10+.9,1),0)})),o.updateData(i);var h=t.get("clip",!0)&&Vb(t.coordinateSystem,!1,t);h?this.group.setClipPath(h):this.group.removeClipPath(),this._lastZlevel=l,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,n){var i=t.getData(),o=this._updateLineDraw(i,t);o.incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},e.prototype.incrementalRender=function(t,r,n){this._lineDraw.incrementalUpdate(t,r.getData()),this._finished=t.end===r.getData().count()},e.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},e.prototype.updateTransform=function(t,r,n){var i=t.getData(),o=t.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var l=DZ.reset(t,r,n);l.progress&&l.progress({start:0,end:i.count(),count:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},e.prototype._updateLineDraw=function(t,r){var n=this._lineDraw,i=this._showEffect(r),o=!!r.get("polyline"),l=r.pipelineContext,c=l.large;return(!n||i!==this._hasEffet||o!==this._isPolyline||c!==this._isLargeDraw)&&(n&&n.remove(),n=this._lineDraw=c?new e4e:new rE(o?i?KCe:EZ:i?MZ:aE),this._hasEffet=i,this._isPolyline=o,this._isLargeDraw=c),this.group.add(n.group),n},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var r=t.getZr(),n=r.painter.getType()==="svg";!n&&this._lastZlevel!=null&&r.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.type="lines",e})(Mr),a4e=typeof Uint32Array>"u"?Array:Uint32Array,r4e=typeof Float64Array>"u"?Array:Float64Array;function rz(a){var e=a.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(a.data=it(e,function(t){var r=[t[0].coord,t[1].coord],n={coords:r};return t[0].name&&(n.fromName=t[0].name),t[1].name&&(n.toName=t[1].name),AT([n,t[0],t[1]])}))}var n4e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.init=function(t){t.data=t.data||[],rz(t);var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count)),a.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(t){if(rz(t),t.data){var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count))}a.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var r=this._processFlatCoordsArray(t.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=Bv(this._flatCoords,r.flatCoords),this._flatCoordsOffset=Bv(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),t.data=new Float32Array(r.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var r=this.getData().getItemModel(t),n=r.option instanceof Array?r.option:r.getShallow("coords");return n},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,r){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[t*2],i=this._flatCoordsOffset[t*2+1],o=0;o<i;o++)r[o]=r[o]||[],r[o][0]=this._flatCoords[n+o*2],r[o][1]=this._flatCoords[n+o*2+1];return i}else{for(var l=this._getCoordsFromItemModel(t),o=0;o<l.length;o++)r[o]=r[o]||[],r[o][0]=l[o][0],r[o][1]=l[o][1];return l.length}},e.prototype._processFlatCoordsArray=function(t){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),Xa(t[0])){for(var n=t.length,i=new a4e(n),o=new r4e(n),l=0,c=0,d=0,u=0;u<n;){d++;var h=t[u++];i[c++]=l+r,i[c++]=h;for(var f=0;f<h;f++){var p=t[u++],g=t[u++];o[l++]=p,o[l++]=g}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,c),flatCoords:o,count:d}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,r){var n=new Ss(["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],function(i,o,l,c){if(i instanceof Array)return NaN;n.hasItemOption=!0;var d=i.value;if(d!=null)return d instanceof Array?d[c]:d}),n},e.prototype.formatTooltip=function(t,r,n){var i=this.getData(),o=i.getItemModel(t),l=o.get("name");if(l)return l;var c=o.get("fromName"),d=o.get("toName"),u=[];return c!=null&&u.push(c),d!=null&&u.push(d),Jn("nameValue",{name:u.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?1e4:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?2e4:this.get("progressiveThreshold"))},e.prototype.getZLevelKey=function(){var t=this.getModel("effect"),r=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&r>0?r+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e})(Fr);function ow(a){return a instanceof Array||(a=[a,a]),a}var i4e={seriesType:"lines",reset:function(a){var e=ow(a.get("symbol")),t=ow(a.get("symbolSize")),r=a.getData();r.setVisual("fromSymbol",e&&e[0]),r.setVisual("toSymbol",e&&e[1]),r.setVisual("fromSymbolSize",t&&t[0]),r.setVisual("toSymbolSize",t&&t[1]);function n(i,o){var l=i.getItemModel(o),c=ow(l.getShallow("symbol",!0)),d=ow(l.getShallow("symbolSize",!0));c[0]&&i.setItemVisual(o,"fromSymbol",c[0]),c[1]&&i.setItemVisual(o,"toSymbol",c[1]),d[0]&&i.setItemVisual(o,"fromSymbolSize",d[0]),d[1]&&i.setItemVisual(o,"toSymbolSize",d[1])}return{dataEach:r.hasItemOption?n:null}}};function s4e(a){a.registerChartView(t4e),a.registerSeriesModel(n4e),a.registerLayout(DZ),a.registerVisual(i4e)}var o4e=256,l4e=(function(){function a(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=kl.createCanvas();this.canvas=e}return a.prototype.update=function(e,t,r,n,i,o){var l=this._getBrush(),c=this._getGradient(i,"inRange"),d=this._getGradient(i,"outOfRange"),u=this.pointSize+this.blurSize,h=this.canvas,f=h.getContext("2d"),p=e.length;h.width=t,h.height=r;for(var g=0;g<p;++g){var b=e[g],w=b[0],_=b[1],k=b[2],T=n(k);f.globalAlpha=T,f.drawImage(l,w-u,_-u)}if(!h.width||!h.height)return h;for(var D=f.getImageData(0,0,h.width,h.height),I=D.data,O=0,P=I.length,V=this.minOpacity,G=this.maxOpacity,Q=G-V;O<P;){var T=I[O+3]/256,$=Math.floor(T*(o4e-1))*4;if(T>0){var ae=o(T)?c:d;T>0&&(T=T*Q+V),I[O++]=ae[$],I[O++]=ae[$+1],I[O++]=ae[$+2],I[O++]=ae[$+3]*T*256}else O+=4}return f.putImageData(D,0,0),h},a.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=kl.createCanvas()),t=this.pointSize+this.blurSize,r=t*2;e.width=r,e.height=r;var n=e.getContext("2d");return n.clearRect(0,0,r,r),n.shadowOffsetX=r,n.shadowBlur=this.blurSize,n.shadowColor=Fe.color.neutral99,n.beginPath(),n.arc(-t,t,this.pointSize,0,Math.PI*2,!0),n.closePath(),n.fill(),e},a.prototype._getGradient=function(e,t){for(var r=this._gradientPixels,n=r[t]||(r[t]=new Uint8ClampedArray(256*4)),i=[0,0,0,0],o=0,l=0;l<256;l++)e[t](l/255,!0,i),n[o++]=i[0],n[o++]=i[1],n[o++]=i[2],n[o++]=i[3];return n},a})();function c4e(a,e,t){var r=a[1]-a[0];e=it(e,function(o){return{interval:[(o.interval[0]-a[0])/r,(o.interval[1]-a[0])/r]}});var n=e.length,i=0;return function(o){var l;for(l=i;l<n;l++){var c=e[l].interval;if(c[0]<=o&&o<=c[1]){i=l;break}}if(l===n)for(l=i-1;l>=0;l--){var c=e[l].interval;if(c[0]<=o&&o<=c[1]){i=l;break}}return l>=0&&l<n&&t[l]}}function d4e(a,e){var t=a[1]-a[0];return e=[(e[0]-a[0])/t,(e[1]-a[0])/t],function(r){return r>=e[0]&&r<=e[1]}}function nz(a){var e=a.dimensions;return e[0]==="lng"&&e[1]==="lat"}var u4e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i;r.eachComponent("visualMap",function(l){l.eachTargetSeries(function(c){c===t&&(i=l)})}),this._progressiveEls=null,this.group.removeAll();var o=t.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"||o.type==="matrix"?this._renderOnGridLike(t,n,0,t.getData().count()):nz(o)&&this._renderOnGeo(o,t,i,n)},e.prototype.incrementalPrepareRender=function(t,r,n){this.group.removeAll()},e.prototype.incrementalRender=function(t,r,n,i){var o=r.coordinateSystem;o&&(nz(o)?this.render(r,n,i):(this._progressiveEls=[],this._renderOnGridLike(r,i,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){Ah(this._progressiveEls||this.group,t)},e.prototype._renderOnGridLike=function(t,r,n,i,o){var l=t.coordinateSystem,c=yh(l,"cartesian2d"),d=yh(l,"matrix"),u,h,f,p;if(c){var g=l.getAxis("x"),b=l.getAxis("y");u=g.getBandWidth()+.5,h=b.getBandWidth()+.5,f=g.scale.getExtent(),p=b.scale.getExtent()}for(var w=this.group,_=t.getData(),k=t.getModel(["emphasis","itemStyle"]).getItemStyle(),T=t.getModel(["blur","itemStyle"]).getItemStyle(),D=t.getModel(["select","itemStyle"]).getItemStyle(),I=t.get(["itemStyle","borderRadius"]),O=fi(t),P=t.getModel("emphasis"),V=P.get("focus"),G=P.get("blurScope"),Q=P.get("disabled"),$=c||d?[_.mapDimension("x"),_.mapDimension("y"),_.mapDimension("value")]:[_.mapDimension("time"),_.mapDimension("value")],ae=n;ae<i;ae++){var J=void 0,U=_.getItemVisual(ae,"style");if(c){var F=_.get($[0],ae),W=_.get($[1],ae);if(isNaN(_.get($[2],ae))||isNaN(F)||isNaN(W)||F<f[0]||F>f[1]||W<p[0]||W>p[1])continue;var K=l.dataToPoint([F,W]);J=new Ta({shape:{x:K[0]-u/2,y:K[1]-h/2,width:u,height:h},style:U})}else if(d){var ee=l.dataToLayout([_.get($[0],ae),_.get($[1],ae)]).rect;if(ss(ee.x))continue;J=new Ta({z2:1,shape:ee,style:U})}else{if(isNaN(_.get($[1],ae)))continue;var ne=l.dataToLayout([_.get($[0],ae)]),ee=ne.contentRect||ne.rect;if(ss(ee.x)||ss(ee.y))continue;J=new Ta({z2:1,shape:ee,style:U})}if(_.hasItemOption){var re=_.getItemModel(ae),Z=re.getModel("emphasis");k=Z.getModel("itemStyle").getItemStyle(),T=re.getModel(["blur","itemStyle"]).getItemStyle(),D=re.getModel(["select","itemStyle"]).getItemStyle(),I=re.get(["itemStyle","borderRadius"]),V=Z.get("focus"),G=Z.get("blurScope"),Q=Z.get("disabled"),O=fi(re)}J.shape.r=I;var ie=t.getRawValue(ae),de="-";ie&&ie[2]!=null&&(de=ie[2]+""),ji(J,O,{labelFetcher:t,labelDataIndex:ae,defaultOpacity:U.opacity,defaultText:de}),J.ensureState("emphasis").style=k,J.ensureState("blur").style=T,J.ensureState("select").style=D,on(J,V,G,Q),J.incremental=o,o&&(J.states.emphasis.hoverLayer=!0),w.add(J),_.setItemGraphicEl(ae,J),this._progressiveEls&&this._progressiveEls.push(J)}},e.prototype._renderOnGeo=function(t,r,n,i){var o=n.targetVisuals.inRange,l=n.targetVisuals.outOfRange,c=r.getData(),d=this._hmLayer||this._hmLayer||new l4e;d.blurSize=r.get("blurSize"),d.pointSize=r.get("pointSize"),d.minOpacity=r.get("minOpacity"),d.maxOpacity=r.get("maxOpacity");var u=t.getViewRect().clone(),h=t.getRoamTransform();u.applyTransform(h);var f=Math.max(u.x,0),p=Math.max(u.y,0),g=Math.min(u.width+u.x,i.getWidth()),b=Math.min(u.height+u.y,i.getHeight()),w=g-f,_=b-p,k=[c.mapDimension("lng"),c.mapDimension("lat"),c.mapDimension("value")],T=c.mapArray(k,function(P,V,G){var Q=t.dataToPoint([P,V]);return Q[0]-=f,Q[1]-=p,Q.push(G),Q}),D=n.getExtent(),I=n.type==="visualMap.continuous"?d4e(D,n.option.range):c4e(D,n.getPieceList(),n.option.selected);d.update(T,w,_,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:l.color.getColorMapper()},I);var O=new Li({style:{width:w,height:_,x:f,y:p,image:d.canvas},silent:!0});this.group.add(O)},e.type="heatmap",e})(Mr),h4e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return Wd(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=Rb.get(this.get("coordinateSystem"));if(t&&t.dimensions)return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar","matrix"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:Fe.color.primary}}},e})(Fr);function f4e(a){a.registerChartView(u4e),a.registerSeriesModel(h4e)}var p4e=["itemStyle","borderWidth"],iz=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],aC=new Ud,x4e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=this.group,o=t.getData(),l=this._data,c=t.coordinateSystem,d=c.getBaseAxis(),u=d.isHorizontal(),h=c.master.getRect(),f={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:c,coordSysExtent:[[h.x,h.x+h.width],[h.y,h.y+h.height]],isHorizontal:u,valueDim:iz[+u],categoryDim:iz[1-+u]};o.diff(l).add(function(g){if(o.hasValue(g)){var b=oz(o,g),w=sz(o,g,b,f),_=lz(o,f,w);o.setItemGraphicEl(g,_),i.add(_),dz(_,f,w)}}).update(function(g,b){var w=l.getItemGraphicEl(b);if(!o.hasValue(g)){i.remove(w);return}var _=oz(o,g),k=sz(o,g,_,f),T=BZ(o,k);w&&T!==w.__pictorialShapeStr&&(i.remove(w),o.setItemGraphicEl(g,null),w=null),w?_4e(w,f,k):w=lz(o,f,k,!0),o.setItemGraphicEl(g,w),w.__pictorialSymbolMeta=k,i.add(w),dz(w,f,k)}).remove(function(g){var b=l.getItemGraphicEl(g);b&&cz(l,g,b.__pictorialSymbolMeta.animationModel,b)}).execute();var p=t.get("clip",!0)?Vb(t.coordinateSystem,!1,t):null;return p?i.setClipPath(p):i.removeClipPath(),this._data=o,this.group},e.prototype.remove=function(t,r){var n=this.group,i=this._data;t.get("animation")?i&&i.eachItemGraphicEl(function(o){cz(i,na(o).dataIndex,t,o)}):n.removeAll()},e.type="pictorialBar",e})(Mr);function sz(a,e,t,r){var n=a.getItemLayout(e),i=t.get("symbolRepeat"),o=t.get("symbolClip"),l=t.get("symbolPosition")||"start",c=t.get("symbolRotate"),d=(c||0)*Math.PI/180||0,u=t.get("symbolPatternSize")||2,h=t.isAnimationEnabled(),f={dataIndex:e,layout:n,itemModel:t,symbolType:a.getItemVisual(e,"symbol")||"circle",style:a.getItemVisual(e,"style"),symbolClip:o,symbolRepeat:i,symbolRepeatDirection:t.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:d,animationModel:h?t:null,hoverScale:h&&t.get(["emphasis","scale"]),z2:t.getShallow("z",!0)||0};m4e(t,i,n,r,f),g4e(a,e,n,i,o,f.boundingLength,f.pxSign,u,r,f),v4e(t,f.symbolScale,d,r,f);var p=f.symbolSize,g=I0(t.get("symbolOffset"),p);return b4e(t,p,n,i,o,g,l,f.valueLineWidth,f.boundingLength,f.repeatCutLength,r,f),f}function m4e(a,e,t,r,n){var i=r.valueDim,o=a.get("symbolBoundingData"),l=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),c=l.toGlobalCoord(l.dataToCoord(0)),d=1-+(t[i.wh]<=0),u;if(rt(o)){var h=[rC(l,o[0])-c,rC(l,o[1])-c];h[1]<h[0]&&h.reverse(),u=h[d]}else o!=null?u=rC(l,o)-c:e?u=r.coordSysExtent[i.index][d]-c:u=t[i.wh];n.boundingLength=u,e&&(n.repeatCutLength=t[i.wh]);var f=i.xy==="x",p=l.inverse;n.pxSign=f&&!p||!f&&p?u>=0?1:-1:u>0?1:-1}function rC(a,e){return a.toGlobalCoord(a.dataToCoord(a.scale.parse(e)))}function g4e(a,e,t,r,n,i,o,l,c,d){var u=c.valueDim,h=c.categoryDim,f=Math.abs(t[h.wh]),p=a.getItemVisual(e,"symbolSize"),g;rt(p)?g=p.slice():p==null?g=["100%","100%"]:g=[p,p],g[h.index]=_t(g[h.index],f),g[u.index]=_t(g[u.index],r?f:Math.abs(i)),d.symbolSize=g;var b=d.symbolScale=[g[0]/l,g[1]/l];b[u.index]*=(c.isHorizontal?-1:1)*o}function v4e(a,e,t,r,n){var i=a.get(p4e)||0;i&&(aC.attr({scaleX:e[0],scaleY:e[1],rotation:t}),aC.updateTransform(),i/=aC.getLineScale(),i*=e[r.valueDim.index]),n.valueLineWidth=i||0}function b4e(a,e,t,r,n,i,o,l,c,d,u,h){var f=u.categoryDim,p=u.valueDim,g=h.pxSign,b=Math.max(e[p.index]+l,0),w=b;if(r){var _=Math.abs(c),k=Gi(a.get("symbolMargin"),"15%")+"",T=!1;k.lastIndexOf("!")===k.length-1&&(T=!0,k=k.slice(0,k.length-1));var D=_t(k,e[p.index]),I=Math.max(b+D*2,0),O=T?0:D*2,P=fW(r),V=P?r:uz((_+O)/I),G=_-V*b;D=G/2/(T?V:Math.max(V-1,1)),I=b+D*2,O=T?0:D*2,!P&&r!=="fixed"&&(V=d?uz((Math.abs(d)+O)/I):0),w=V*I-O,h.repeatTimes=V,h.symbolMargin=D}var Q=g*(w/2),$=h.pathPosition=[];$[f.index]=t[f.wh]/2,$[p.index]=o==="start"?Q:o==="end"?c-Q:c/2,i&&($[0]+=i[0],$[1]+=i[1]);var ae=h.bundlePosition=[];ae[f.index]=t[f.xy],ae[p.index]=t[p.xy];var J=h.barRectShape=Je({},t);J[p.wh]=g*Math.max(Math.abs(t[p.wh]),Math.abs($[p.index]+Q)),J[f.wh]=t[f.wh];var U=h.clipShape={};U[f.xy]=-t[f.xy],U[f.wh]=u.ecSize[f.wh],U[p.xy]=0,U[p.wh]=t[p.wh]}function IZ(a){var e=a.symbolPatternSize,t=ei(a.symbolType,-e/2,-e/2,e,e);return t.attr({culling:!0}),t.type!=="image"&&t.setStyle({strokeNoScale:!0}),t}function RZ(a,e,t,r){var n=a.__pictorialBundle,i=t.symbolSize,o=t.valueLineWidth,l=t.pathPosition,c=e.valueDim,d=t.repeatTimes||0,u=0,h=i[e.valueDim.index]+o+t.symbolMargin*2;for(pE(a,function(b){b.__pictorialAnimationIndex=u,b.__pictorialRepeatTimes=d,u<d?ux(b,null,g(u),t,r):ux(b,null,{scaleX:0,scaleY:0},t,r,function(){n.remove(b)}),u++});u<d;u++){var f=IZ(t);f.__pictorialAnimationIndex=u,f.__pictorialRepeatTimes=d,n.add(f);var p=g(u);ux(f,{x:p.x,y:p.y,scaleX:0,scaleY:0},{scaleX:p.scaleX,scaleY:p.scaleY,rotation:p.rotation},t,r)}function g(b){var w=l.slice(),_=t.pxSign,k=b;return(t.symbolRepeatDirection==="start"?_>0:_<0)&&(k=d-1-b),w[c.index]=h*(k-d/2+.5)+l[c.index],{x:w[0],y:w[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation}}}function LZ(a,e,t,r){var n=a.__pictorialBundle,i=a.__pictorialMainPath;i?ux(i,null,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation},t,r):(i=a.__pictorialMainPath=IZ(t),n.add(i),ux(i,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:0,scaleY:0,rotation:t.rotation},{scaleX:t.symbolScale[0],scaleY:t.symbolScale[1]},t,r))}function OZ(a,e,t){var r=Je({},e.barRectShape),n=a.__pictorialBarRect;n?ux(n,null,{shape:r},e,t):(n=a.__pictorialBarRect=new Ta({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),n.disableMorphing=!0,a.add(n))}function PZ(a,e,t,r){if(t.symbolClip){var n=a.__pictorialClipPath,i=Je({},t.clipShape),o=e.valueDim,l=t.animationModel,c=t.dataIndex;if(n)rr(n,{shape:i},l,c);else{i[o.wh]=0,n=new Ta({shape:i}),a.__pictorialBundle.setClipPath(n),a.__pictorialClipPath=n;var d={};d[o.wh]=t.clipShape[o.wh],M0[r?"updateProps":"initProps"](n,{shape:d},l,c)}}}function oz(a,e){var t=a.getItemModel(e);return t.getAnimationDelayParams=y4e,t.isAnimationEnabled=w4e,t}function y4e(a){return{index:a.__pictorialAnimationIndex,count:a.__pictorialRepeatTimes}}function w4e(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function lz(a,e,t,r){var n=new Gt,i=new Gt;return n.add(i),n.__pictorialBundle=i,i.x=t.bundlePosition[0],i.y=t.bundlePosition[1],t.symbolRepeat?RZ(n,e,t):LZ(n,e,t),OZ(n,t,r),PZ(n,e,t,r),n.__pictorialShapeStr=BZ(a,t),n.__pictorialSymbolMeta=t,n}function _4e(a,e,t){var r=t.animationModel,n=t.dataIndex,i=a.__pictorialBundle;rr(i,{x:t.bundlePosition[0],y:t.bundlePosition[1]},r,n),t.symbolRepeat?RZ(a,e,t,!0):LZ(a,e,t,!0),OZ(a,t,!0),PZ(a,e,t,!0)}function cz(a,e,t,r){var n=r.__pictorialBarRect;n&&n.removeTextContent();var i=[];pE(r,function(o){i.push(o)}),r.__pictorialMainPath&&i.push(r.__pictorialMainPath),r.__pictorialClipPath&&(t=null),oe(i,function(o){vh(o,{scaleX:0,scaleY:0},t,e,function(){r.parent&&r.parent.remove(r)})}),a.setItemGraphicEl(e,null)}function BZ(a,e){return[a.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function pE(a,e,t){oe(a.__pictorialBundle.children(),function(r){r!==a.__pictorialBarRect&&e.call(t,r)})}function ux(a,e,t,r,n,i){e&&a.attr(e),r.symbolClip&&!n?t&&a.attr(t):t&&M0[n?"updateProps":"initProps"](a,t,r.animationModel,r.dataIndex,i)}function dz(a,e,t){var r=t.dataIndex,n=t.itemModel,i=n.getModel("emphasis"),o=i.getModel("itemStyle").getItemStyle(),l=n.getModel(["blur","itemStyle"]).getItemStyle(),c=n.getModel(["select","itemStyle"]).getItemStyle(),d=n.getShallow("cursor"),u=i.get("focus"),h=i.get("blurScope"),f=i.get("scale");pE(a,function(b){if(b instanceof Li){var w=b.style;b.useStyle(Je({image:w.image,x:w.x,y:w.y,width:w.width,height:w.height},t.style))}else b.useStyle(t.style);var _=b.ensureState("emphasis");_.style=o,f&&(_.scaleX=b.scaleX*1.1,_.scaleY=b.scaleY*1.1),b.ensureState("blur").style=l,b.ensureState("select").style=c,d&&(b.cursor=d),b.z2=t.z2});var p=e.valueDim.posDesc[+(t.boundingLength>0)],g=a.__pictorialBarRect;g.ignoreClip=!0,ji(g,fi(n),{labelFetcher:e.seriesModel,labelDataIndex:r,defaultText:Ix(e.seriesModel.getData(),r),inheritColor:t.style.fill,defaultOpacity:t.style.opacity,defaultOutsidePosition:p}),on(a,u,h,i.get("disabled"))}function uz(a){var e=Math.round(a);return Math.abs(a-e)<1e-4?e:Math.ceil(a)}var N4e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t.defaultSymbol="roundRect",t}return e.prototype.getInitialData=function(t){return t.stack=null,a.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=Th(nb.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:Fe.color.primary}}}),e})(nb);function j4e(a){a.registerChartView(x4e),a.registerSeriesModel(N4e),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,va(nq,"pictorialBar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,iq("pictorialBar"))}var S4e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._layers=[],t}return e.prototype.render=function(t,r,n){var i=t.getData(),o=this,l=this.group,c=t.getLayerSeries(),d=i.getLayout("layoutInfo"),u=d.rect,h=d.boundaryGap;l.x=0,l.y=u.y+h[0];function f(w){return w.name}var p=new Bd(this._layersSeries||[],c,f,f),g=[];p.add(St(b,this,"add")).update(St(b,this,"update")).remove(St(b,this,"remove")).execute();function b(w,_,k){var T=o._layers;if(w==="remove"){l.remove(T[_]);return}for(var D=[],I=[],O,P=c[_].indices,V=0;V<P.length;V++){var G=i.getItemLayout(P[V]),Q=G.x,$=G.y0,ae=G.y;D.push(Q,$),I.push(Q,$+ae),O=i.getItemVisual(P[V],"style")}var J,U=i.getItemLayout(P[0]),F=t.getModel("label"),W=F.get("margin"),K=t.getModel("emphasis");if(w==="add"){var ee=g[_]=new Gt;J=new Xq({shape:{points:D,stackedOnPoints:I,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),ee.add(J),l.add(ee),t.isAnimationEnabled()&&J.setClipPath(k4e(J.getBoundingRect(),t,function(){J.removeClipPath()}))}else{var ee=T[k];J=ee.childAt(0),l.add(ee),g[_]=ee,rr(J,{shape:{points:D,stackedOnPoints:I}},t),nl(J)}ji(J,fi(t),{labelDataIndex:P[V-1],defaultText:i.getName(P[V-1]),inheritColor:O.fill},{normal:{verticalAlign:"middle"}}),J.setTextConfig({position:null,local:!0});var ne=J.getTextContent();ne&&(ne.x=U.x-W,ne.y=U.y0+U.y/2),J.useStyle(O),i.setItemGraphicEl(_,J),hi(J,t),on(J,K.get("focus"),K.get("blurScope"),K.get("disabled"))}this._layersSeries=c,this._layers=g},e.type="themeRiver",e})(Mr);function k4e(a,e,t){var r=new Ta({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return en(r,{shape:{x:a.x-50,width:a.width+100,height:a.height+20}},e,t),r}var nC=2,C4e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new rm(St(this.getData,this),St(this.getRawData,this))},e.prototype.fixData=function(t){var r=t.length,n={},i=G4(t,function(f){return n.hasOwnProperty(f[0]+"")||(n[f[0]+""]=-1),f[2]}),o=[];i.buckets.each(function(f,p){o.push({name:p,dataList:f})});for(var l=o.length,c=0;c<l;++c){for(var d=o[c].name,u=0;u<o[c].dataList.length;++u){var h=o[c].dataList[u][0]+"";n[h]=c}for(var h in n)n.hasOwnProperty(h)&&n[h]!==c&&(n[h]=c,t[r]=[h,0,d],r++)}return t},e.prototype.getInitialData=function(t,r){for(var n=this.getReferringComponents("singleAxis",yn).models[0],i=n.get("type"),o=hr(t.data,function(g){return g[2]!==void 0}),l=this.fixData(o||[]),c=[],d=this.nameMap=Rt(),u=0,h=0;h<l.length;++h)c.push(l[h][nC]),d.get(l[h][nC])||(d.set(l[h][nC],u),u++);var f=Pb(l,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:J2(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,p=new Ss(f,this);return p.initData(l),p},e.prototype.getLayerSeries=function(){for(var t=this.getData(),r=t.count(),n=[],i=0;i<r;++i)n[i]=i;var o=t.mapDimension("single"),l=G4(n,function(d){return t.get("name",d)}),c=[];return l.buckets.each(function(d,u){d.sort(function(h,f){return t.get(o,h)-t.get(o,f)}),c.push({name:u,indices:d})}),c},e.prototype.getAxisTooltipData=function(t,r,n){rt(t)||(t=t?[t]:[]);for(var i=this.getData(),o=this.getLayerSeries(),l=[],c=o.length,d,u=0;u<c;++u){for(var h=Number.MAX_VALUE,f=-1,p=o[u].indices.length,g=0;g<p;++g){var b=i.get(t[0],o[u].indices[g]),w=Math.abs(b-r);w<=h&&(d=b,h=w,f=o[u].indices[g])}l.push(f)}return{dataIndices:l,nestestValue:d}},e.prototype.formatTooltip=function(t,r,n){var i=this.getData(),o=i.getName(t),l=i.get(i.mapDimension("value"),t);return Jn("nameValue",{name:o,value:l})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e})(Fr);function A4e(a,e){a.eachSeriesByType("themeRiver",function(t){var r=t.getData(),n=t.coordinateSystem,i={},o=n.getRect();i.rect=o;var l=t.get("boundaryGap"),c=n.getAxis();if(i.boundaryGap=l,c.orient==="horizontal"){l[0]=_t(l[0],o.height),l[1]=_t(l[1],o.height);var d=o.height-l[0]-l[1];hz(r,t,d)}else{l[0]=_t(l[0],o.width),l[1]=_t(l[1],o.width);var u=o.width-l[0]-l[1];hz(r,t,u)}r.setLayout("layoutInfo",i)})}function hz(a,e,t){if(a.count())for(var r=e.coordinateSystem,n=e.getLayerSeries(),i=a.mapDimension("single"),o=a.mapDimension("value"),l=it(n,function(w){return it(w.indices,function(_){var k=r.dataToPoint(a.get(i,_));return k[1]=a.get(o,_),k})}),c=T4e(l),d=c.y0,u=t/c.max,h=n.length,f=n[0].indices.length,p,g=0;g<f;++g){p=d[g]*u,a.setItemLayout(n[0].indices[g],{layerIndex:0,x:l[0][g][0],y0:p,y:l[0][g][1]*u});for(var b=1;b<h;++b)p+=l[b-1][g][1]*u,a.setItemLayout(n[b].indices[g],{layerIndex:b,x:l[b][g][0],y0:p,y:l[b][g][1]*u})}}function T4e(a){for(var e=a.length,t=a[0].length,r=[],n=[],i=0,o=0;o<t;++o){for(var l=0,c=0;c<e;++c)l+=a[c][o][1];l>i&&(i=l),r.push(l)}for(var d=0;d<t;++d)n[d]=(i-r[d])/2;i=0;for(var u=0;u<t;++u){var h=r[u]+n[u];h>i&&(i=h)}return{y0:n,max:i}}function M4e(a){a.registerChartView(S4e),a.registerSeriesModel(C4e),a.registerLayout(A4e),a.registerProcessor(tm("themeRiver"))}var E4e=2,D4e=4,fz=(function(a){Le(e,a);function e(t,r,n,i){var o=a.call(this)||this;o.z2=E4e,o.textConfig={inside:!0},na(o).seriesIndex=r.seriesIndex;var l=new Ja({z2:D4e,silent:t.getModel().get(["label","silent"])});return o.setTextContent(l),o.updateData(!0,t,r,n,i),o}return e.prototype.updateData=function(t,r,n,i,o){this.node=r,r.piece=this,n=n||this._seriesModel,i=i||this._ecModel;var l=this;na(l).dataIndex=r.dataIndex;var c=r.getModel(),d=c.getModel("emphasis"),u=r.getLayout(),h=Je({},u);h.label=null;var f=r.getVisual("style");f.lineJoin="bevel";var p=r.getVisual("decal");p&&(f.decal=Tx(p,o));var g=pc(c.getModel("itemStyle"),h,!0);Je(h,g),oe(Cs,function(k){var T=l.ensureState(k),D=c.getModel([k,"itemStyle"]);T.style=D.getItemStyle();var I=pc(D,h);I&&(T.shape=I)}),t?(l.setShape(h),l.shape.r=u.r0,en(l,{shape:{r:u.r}},n,r.dataIndex)):(rr(l,{shape:h},n),nl(l)),l.useStyle(f),this._updateLabel(n);var b=c.getShallow("cursor");b&&l.attr("cursor",b),this._seriesModel=n||this._seriesModel,this._ecModel=i||this._ecModel;var w=d.get("focus"),_=w==="relative"?Bv(r.getAncestorsIndices(),r.getDescendantIndices()):w==="ancestor"?r.getAncestorsIndices():w==="descendant"?r.getDescendantIndices():w;on(this,_,d.get("blurScope"),d.get("disabled"))},e.prototype._updateLabel=function(t){var r=this,n=this.node.getModel(),i=n.getModel("label"),o=this.node.getLayout(),l=o.endAngle-o.startAngle,c=(o.startAngle+o.endAngle)/2,d=Math.cos(c),u=Math.sin(c),h=this,f=h.getTextContent(),p=this.node.dataIndex,g=i.get("minAngle")/180*Math.PI,b=i.get("show")&&!(g!=null&&Math.abs(l)<g);f.ignore=!b,oe(Gv,function(_){var k=_==="normal"?n.getModel("label"):n.getModel([_,"label"]),T=_==="normal",D=T?f:f.ensureState(_),I=t.getFormattedLabel(p,_);T&&(I=I||r.node.name),D.style=zr(k,{},null,_!=="normal",!0),I&&(D.style.text=I);var O=k.get("show");O!=null&&!T&&(D.ignore=!O);var P=w(k,"position"),V=T?h:h.states[_],G=V.style.fill;V.textConfig={outsideFill:k.get("color")==="inherit"?G:null,inside:P!=="outside"};var Q,$=w(k,"distance")||0,ae=w(k,"align"),J=w(k,"rotate"),U=Math.PI*.5,F=Math.PI*1.5,W=wo(J==="tangential"?Math.PI/2-c:c),K=W>U&&!Hv(W-U)&&W<F;P==="outside"?(Q=o.r+$,ae=K?"right":"left"):!ae||ae==="center"?(l===2*Math.PI&&o.r0===0?Q=0:Q=(o.r+o.r0)/2,ae="center"):ae==="left"?(Q=o.r0+$,ae=K?"right":"left"):ae==="right"&&(Q=o.r-$,ae=K?"left":"right"),D.style.align=ae,D.style.verticalAlign=w(k,"verticalAlign")||"middle",D.x=Q*d+o.cx,D.y=Q*u+o.cy;var ee=0;J==="radial"?ee=wo(-c)+(K?Math.PI:0):J==="tangential"?ee=wo(Math.PI/2-c)+(K?Math.PI:0):Xa(J)&&(ee=J*Math.PI/180),D.rotation=wo(ee)});function w(_,k){var T=_.get(k);return T??i.get(k)}f.dirtyStyle()},e})(ds),sA="sunburstRootToNode",pz="sunburstHighlight",I4e="sunburstUnhighlight";function R4e(a){a.registerAction({type:sA,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},r);function r(n,i){var o=sb(e,[sA],n);if(o){var l=n.getViewRoot();l&&(e.direction=KM(l,o.node)?"rollUp":"drillDown"),n.resetViewRoot(o.node)}}}),a.registerAction({type:pz,update:"none"},function(e,t,r){e=Je({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},n);function n(i){var o=sb(e,[pz],i);o&&(e.dataIndex=o.node.dataIndex)}r.dispatchAction(Je(e,{type:"highlight"}))}),a.registerAction({type:I4e,update:"updateView"},function(e,t,r){e=Je({},e),r.dispatchAction(Je(e,{type:"downplay"}))})}var L4e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n,i){var o=this;this.seriesModel=t,this.api=n,this.ecModel=r;var l=t.getData(),c=l.tree.root,d=t.getViewRoot(),u=this.group,h=t.get("renderLabelForZeroData"),f=[];d.eachNode(function(k){f.push(k)});var p=this._oldChildren||[];g(f,p),_(c,d),this._initEvents(),this._oldChildren=f;function g(k,T){if(k.length===0&&T.length===0)return;new Bd(T,k,D,D).add(I).update(I).remove(va(I,null)).execute();function D(O){return O.getId()}function I(O,P){var V=O==null?null:k[O],G=P==null?null:T[P];b(V,G)}}function b(k,T){if(!h&&k&&!k.getValue()&&(k=null),k!==c&&T!==c){if(T&&T.piece)k?(T.piece.updateData(!1,k,t,r,n),l.setItemGraphicEl(k.dataIndex,T.piece)):w(T);else if(k){var D=new fz(k,t,r,n);u.add(D),l.setItemGraphicEl(k.dataIndex,D)}}}function w(k){k&&k.piece&&(u.remove(k.piece),k.piece=null)}function _(k,T){T.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,k,t,r,n):(o.virtualPiece=new fz(k,t,r,n),u.add(o.virtualPiece)),T.piece.off("click"),o.virtualPiece.on("click",function(D){o._rootToNode(T.parentNode)})):o.virtualPiece&&(u.remove(o.virtualPiece),o.virtualPiece=null)}},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(r){var n=!1,i=t.seriesModel.getViewRoot();i.eachNode(function(o){if(!n&&o.piece&&o.piece===r.target){var l=o.getModel().get("nodeClick");if(l==="rootToNode")t._rootToNode(o);else if(l==="link"){var c=o.getModel(),d=c.get("link");if(d){var u=c.get("target",!0)||"_blank";W2(d,u)}}n=!0}})})},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:sA,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,r){var n=r.getData(),i=n.getItemLayout(0);if(i){var o=t[0]-i.cx,l=t[1]-i.cy,c=Math.sqrt(o*o+l*l);return c<=i.r&&c>=i.r0}},e.type="sunburst",e})(Mr),O4e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t,r){var n={name:t.name,children:t.data};zZ(n);var i=this._levelModels=it(t.levels||[],function(c){return new za(c,this,r)},this),o=ZM.createTree(n,this,l);function l(c){c.wrapMethod("getItemModel",function(d,u){var h=o.getNodeByDataIndex(u),f=i[h.depth];return f&&(d.parentModel=f),d})}return o.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(t){var r=a.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return r.treePathInfo=PN(n,this),r},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){UX(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e})(Fr);function zZ(a){var e=0;oe(a.children,function(r){zZ(r);var n=r.value;rt(n)&&(n=n[0]),e+=n});var t=a.value;rt(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),rt(a.value)?a.value[0]=t:a.value=t}var xz=Math.PI/180;function P4e(a,e,t){e.eachSeriesByType(a,function(r){var n=r.get("center"),i=r.get("radius");rt(i)||(i=[0,i]),rt(n)||(n=[n,n]);var o=t.getWidth(),l=t.getHeight(),c=Math.min(o,l),d=_t(n[0],o),u=_t(n[1],l),h=_t(i[0],c/2),f=_t(i[1],c/2),p=-r.get("startAngle")*xz,g=r.get("minAngle")*xz,b=r.getData().tree.root,w=r.getViewRoot(),_=w.depth,k=r.get("sort");k!=null&&FZ(w,k);var T=0;oe(w.children,function(W){!isNaN(W.getValue())&&T++});var D=w.getValue(),I=Math.PI/(D||T)*2,O=w.depth>0,P=w.height-(O?-1:1),V=(f-h)/(P||1),G=r.get("clockwise"),Q=r.get("stillShowZeroSum"),$=G?1:-1,ae=function(W,K){if(W){var ee=K;if(W!==b){var ne=W.getValue(),re=D===0&&Q?I:ne*I;re<g&&(re=g),ee=K+$*re;var Z=W.depth-_-(O?-1:1),ie=h+V*Z,de=h+V*(Z+1),fe=r.getLevelModel(W);if(fe){var he=fe.get("r0",!0),ve=fe.get("r",!0),Oe=fe.get("radius",!0);Oe!=null&&(he=Oe[0],ve=Oe[1]),he!=null&&(ie=_t(he,c/2)),ve!=null&&(de=_t(ve,c/2))}W.setLayout({angle:re,startAngle:K,endAngle:ee,clockwise:G,cx:d,cy:u,r0:ie,r:de})}if(W.children&&W.children.length){var Se=0;oe(W.children,function(Ce){Se+=ae(Ce,K+Se)})}return ee-K}};if(O){var J=h,U=h+V,F=Math.PI*2;b.setLayout({angle:F,startAngle:p,endAngle:p+F,clockwise:G,cx:d,cy:u,r0:J,r:U})}ae(w,p)})}function FZ(a,e){var t=a.children||[];a.children=B4e(t,e),t.length&&oe(a.children,function(r){FZ(r,e)})}function B4e(a,e){if(Ut(e)){var t=it(a,function(n,i){var o=n.getValue();return{params:{depth:n.depth,height:n.height,dataIndex:n.dataIndex,getValue:function(){return o}},index:i}});return t.sort(function(n,i){return e(n.params,i.params)}),it(t,function(n){return a[n.index]})}else{var r=e==="asc";return a.sort(function(n,i){var o=(n.getValue()-i.getValue())*(r?1:-1);return o===0?(n.dataIndex-i.dataIndex)*(r?-1:1):o})}}function z4e(a){var e={};function t(r,n,i){if(r.depth===0)return Fe.color.neutral50;for(var o=r;o&&o.depth>1;)o=o.parentNode;var l=n.getColorFromPalette(o.name||o.dataIndex+"",e);return r.depth>1&&jt(l)&&(l=D4(l,(r.depth-1)/(i-1)*.5)),l}a.eachSeriesByType("sunburst",function(r){var n=r.getData(),i=n.tree;i.eachNode(function(o){var l=o.getModel(),c=l.getModel("itemStyle").getItemStyle();c.fill||(c.fill=t(o,r,i.root.height));var d=n.ensureUniqueItemVisual(o.dataIndex,"style");Je(d,c)})})}function F4e(a){a.registerChartView(L4e),a.registerSeriesModel(O4e),a.registerLayout(va(P4e,"sunburst")),a.registerProcessor(va(tm,"sunburst")),a.registerVisual(z4e),R4e(a)}var mz={color:"fill",borderColor:"stroke"},V4e={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Ad=Ea(),H4e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,r){return Wd(null,this)},e.prototype.getDataParams=function(t,r,n){var i=a.prototype.getDataParams.call(this,t,r);return n&&(i.info=Ad(n).info),i},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar","matrix"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e})(Fr);function U4e(a,e){return e=e||[0,0],it(["x","y"],function(t,r){var n=this.getAxis(t),i=e[r],o=a[r]/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(i-o)-n.dataToCoord(i+o))},this)}function G4e(a){var e=a.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return a.dataToPoint(t)},size:St(U4e,a)}}}function W4e(a,e){return e=e||[0,0],it([0,1],function(t){var r=e[t],n=a[t]/2,i=[],o=[];return i[t]=r-n,o[t]=r+n,i[1-t]=o[1-t]=e[1-t],Math.abs(this.dataToPoint(i)[t]-this.dataToPoint(o)[t])},this)}function $4e(a){var e=a.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:a.getZoom()},api:{coord:function(t){return a.dataToPoint(t)},size:St(W4e,a)}}}function Y4e(a,e){var t=this.getAxis(),r=e instanceof Array?e[0]:e,n=(a instanceof Array?a[0]:a)/2;return t.type==="category"?t.getBandWidth():Math.abs(t.dataToCoord(r-n)-t.dataToCoord(r+n))}function q4e(a){var e=a.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return a.dataToPoint(t)},size:St(Y4e,a)}}}function X4e(a,e){return e=e||[0,0],it(["Radius","Angle"],function(t,r){var n="get"+t+"Axis",i=this[n](),o=e[r],l=a[r]/2,c=i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-l)-i.dataToCoord(o+l));return t==="Angle"&&(c=c*Math.PI/180),c},this)}function Z4e(a){var e=a.getRadiusAxis(),t=a.getAngleAxis(),r=e.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:a.cx,cy:a.cy,r:r[1],r0:r[0]},api:{coord:function(n){var i=e.dataToRadius(n[0]),o=t.dataToAngle(n[1]),l=a.coordToPoint([i,o]);return l.push(i,o*Math.PI/180),l},size:St(X4e,a)}}}function K4e(a){var e=a.getRect(),t=a.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:a.getCellWidth(),cellHeight:a.getCellHeight(),rangeInfo:{start:t.start,end:t.end,weeks:t.weeks,dayCount:t.allDay}},api:{coord:function(r,n){return a.dataToPoint(r,n)},layout:function(r,n){return a.dataToLayout(r,n)}}}}function Q4e(a){var e=a.getRect();return{coordSys:{type:"matrix",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t,r){return a.dataToPoint(t,r)},layout:function(t,r){return a.dataToLayout(t,r)}}}}function VZ(a,e,t,r){return a&&(a.legacy||a.legacy!==!1&&!t&&!r&&e!=="tspan"&&(e==="text"||Dt(a,"text")))}function HZ(a,e,t){var r=a,n,i,o;if(e==="text")o=r;else{o={},Dt(r,"text")&&(o.text=r.text),Dt(r,"rich")&&(o.rich=r.rich),Dt(r,"textFill")&&(o.fill=r.textFill),Dt(r,"textStroke")&&(o.stroke=r.textStroke),Dt(r,"fontFamily")&&(o.fontFamily=r.fontFamily),Dt(r,"fontSize")&&(o.fontSize=r.fontSize),Dt(r,"fontStyle")&&(o.fontStyle=r.fontStyle),Dt(r,"fontWeight")&&(o.fontWeight=r.fontWeight),i={type:"text",style:o,silent:!0},n={};var l=Dt(r,"textPosition");t?n.position=l?r.textPosition:"inside":l&&(n.position=r.textPosition),Dt(r,"textPosition")&&(n.position=r.textPosition),Dt(r,"textOffset")&&(n.offset=r.textOffset),Dt(r,"textRotation")&&(n.rotation=r.textRotation),Dt(r,"textDistance")&&(n.distance=r.textDistance)}return gz(o,a),oe(o.rich,function(c){gz(c,c)}),{textConfig:n,textContent:i}}function gz(a,e){e&&(e.font=e.textFont||e.font,Dt(e,"textStrokeWidth")&&(a.lineWidth=e.textStrokeWidth),Dt(e,"textAlign")&&(a.align=e.textAlign),Dt(e,"textVerticalAlign")&&(a.verticalAlign=e.textVerticalAlign),Dt(e,"textLineHeight")&&(a.lineHeight=e.textLineHeight),Dt(e,"textWidth")&&(a.width=e.textWidth),Dt(e,"textHeight")&&(a.height=e.textHeight),Dt(e,"textBackgroundColor")&&(a.backgroundColor=e.textBackgroundColor),Dt(e,"textPadding")&&(a.padding=e.textPadding),Dt(e,"textBorderColor")&&(a.borderColor=e.textBorderColor),Dt(e,"textBorderWidth")&&(a.borderWidth=e.textBorderWidth),Dt(e,"textBorderRadius")&&(a.borderRadius=e.textBorderRadius),Dt(e,"textBoxShadowColor")&&(a.shadowColor=e.textBoxShadowColor),Dt(e,"textBoxShadowBlur")&&(a.shadowBlur=e.textBoxShadowBlur),Dt(e,"textBoxShadowOffsetX")&&(a.shadowOffsetX=e.textBoxShadowOffsetX),Dt(e,"textBoxShadowOffsetY")&&(a.shadowOffsetY=e.textBoxShadowOffsetY))}function vz(a,e,t){var r=a;r.textPosition=r.textPosition||t.position||"inside",t.offset!=null&&(r.textOffset=t.offset),t.rotation!=null&&(r.textRotation=t.rotation),t.distance!=null&&(r.textDistance=t.distance);var n=r.textPosition.indexOf("inside")>=0,i=a.fill||Fe.color.neutral99;bz(r,e);var o=r.textFill==null;return n?o&&(r.textFill=t.insideFill||Fe.color.neutral00,!r.textStroke&&t.insideStroke&&(r.textStroke=t.insideStroke),!r.textStroke&&(r.textStroke=i),r.textStrokeWidth==null&&(r.textStrokeWidth=2)):(o&&(r.textFill=a.fill||t.outsideFill||Fe.color.neutral00),!r.textStroke&&t.outsideStroke&&(r.textStroke=t.outsideStroke)),r.text=e.text,r.rich=e.rich,oe(e.rich,function(l){bz(l,l)}),r}function bz(a,e){e&&(Dt(e,"fill")&&(a.textFill=e.fill),Dt(e,"stroke")&&(a.textStroke=e.fill),Dt(e,"lineWidth")&&(a.textStrokeWidth=e.lineWidth),Dt(e,"font")&&(a.font=e.font),Dt(e,"fontStyle")&&(a.fontStyle=e.fontStyle),Dt(e,"fontWeight")&&(a.fontWeight=e.fontWeight),Dt(e,"fontSize")&&(a.fontSize=e.fontSize),Dt(e,"fontFamily")&&(a.fontFamily=e.fontFamily),Dt(e,"align")&&(a.textAlign=e.align),Dt(e,"verticalAlign")&&(a.textVerticalAlign=e.verticalAlign),Dt(e,"lineHeight")&&(a.textLineHeight=e.lineHeight),Dt(e,"width")&&(a.textWidth=e.width),Dt(e,"height")&&(a.textHeight=e.height),Dt(e,"backgroundColor")&&(a.textBackgroundColor=e.backgroundColor),Dt(e,"padding")&&(a.textPadding=e.padding),Dt(e,"borderColor")&&(a.textBorderColor=e.borderColor),Dt(e,"borderWidth")&&(a.textBorderWidth=e.borderWidth),Dt(e,"borderRadius")&&(a.textBorderRadius=e.borderRadius),Dt(e,"shadowColor")&&(a.textBoxShadowColor=e.shadowColor),Dt(e,"shadowBlur")&&(a.textBoxShadowBlur=e.shadowBlur),Dt(e,"shadowOffsetX")&&(a.textBoxShadowOffsetX=e.shadowOffsetX),Dt(e,"shadowOffsetY")&&(a.textBoxShadowOffsetY=e.shadowOffsetY),Dt(e,"textShadowColor")&&(a.textShadowColor=e.textShadowColor),Dt(e,"textShadowBlur")&&(a.textShadowBlur=e.textShadowBlur),Dt(e,"textShadowOffsetX")&&(a.textShadowOffsetX=e.textShadowOffsetX),Dt(e,"textShadowOffsetY")&&(a.textShadowOffsetY=e.textShadowOffsetY))}var UZ={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},yz=Va(UZ);kc(Ac,function(a,e){return a[e]=1,a},{});Ac.join(", ");var g_=["","style","shape","extra"],Px=Ea();function xE(a,e,t,r,n){var i=a+"Animation",o=qx(a,r,n)||{},l=Px(e).userDuring;return o.duration>0&&(o.during=l?St(r3e,{el:e,userDuring:l}):null,o.setToFinal=!0,o.scope=a),Je(o,t[i]),o}function Zw(a,e,t,r){r=r||{};var n=r.dataIndex,i=r.isInit,o=r.clearStyle,l=t.isAnimationEnabled(),c=Px(a),d=e.style;c.userDuring=e.during;var u={},h={};if(i3e(a,e,h),a.type==="compound")for(var f=a.shape.paths,p=e.shape.paths,g=0;g<p.length;g++){var b=p[g];iC("shape",b,f[g])}else iC("shape",e,h),iC("extra",e,h);if(!i&&l&&(n3e(a,e,u),wz("shape",a,e,u),wz("extra",a,e,u),s3e(a,e,d,u)),h.style=d,J4e(a,h,o),t3e(a,e),l)if(i){var w={};oe(g_,function(k){var T=k?e[k]:e;T&&T.enterFrom&&(k&&(w[k]=w[k]||{}),Je(k?w[k]:w,T.enterFrom))});var _=xE("enter",a,e,t,n);_.duration>0&&a.animateFrom(w,_)}else e3e(a,e,n||0,t,u);GZ(a,e),d?a.dirty():a.markRedraw()}function GZ(a,e){for(var t=Px(a).leaveToProps,r=0;r<g_.length;r++){var n=g_[r],i=n?e[n]:e;i&&i.leaveTo&&(t||(t=Px(a).leaveToProps={}),n&&(t[n]=t[n]||{}),Je(n?t[n]:t,i.leaveTo))}}function FN(a,e,t,r){if(a){var n=a.parent,i=Px(a).leaveToProps;if(i){var o=xE("update",a,e,t,0);o.done=function(){n&&n.remove(a)},a.animateTo(i,o)}else n&&n.remove(a)}}function d0(a){return a==="all"}function J4e(a,e,t){var r=e.style;if(!a.isGroup&&r){if(t){a.useStyle({});for(var n=a.animators,i=0;i<n.length;i++){var o=n[i];o.targetName==="style"&&o.changeTarget(a.style)}}a.setStyle(r)}e&&(e.style=null,e&&a.attr(e),e.style=r)}function e3e(a,e,t,r,n){if(n){var i=xE("update",a,e,r,t);i.duration>0&&a.animateFrom(n,i)}}function t3e(a,e){Dt(e,"silent")&&(a.silent=e.silent),Dt(e,"ignore")&&(a.ignore=e.ignore),a instanceof rl&&Dt(e,"invisible")&&(a.invisible=e.invisible),a instanceof Ia&&Dt(e,"autoBatch")&&(a.autoBatch=e.autoBatch)}var ac={},a3e={setTransform:function(a,e){return ac.el[a]=e,this},getTransform:function(a){return ac.el[a]},setShape:function(a,e){var t=ac.el,r=t.shape||(t.shape={});return r[a]=e,t.dirtyShape&&t.dirtyShape(),this},getShape:function(a){var e=ac.el.shape;if(e)return e[a]},setStyle:function(a,e){var t=ac.el,r=t.style;return r&&(r[a]=e,t.dirtyStyle&&t.dirtyStyle()),this},getStyle:function(a){var e=ac.el.style;if(e)return e[a]},setExtra:function(a,e){var t=ac.el.extra||(ac.el.extra={});return t[a]=e,this},getExtra:function(a){var e=ac.el.extra;if(e)return e[a]}};function r3e(){var a=this,e=a.el;if(e){var t=Px(e).userDuring,r=a.userDuring;if(t!==r){a.el=a.userDuring=null;return}ac.el=e,r(a3e)}}function wz(a,e,t,r){var n=t[a];if(n){var i=e[a],o;if(i){var l=t.transition,c=n.transition;if(c)if(!o&&(o=r[a]={}),d0(c))Je(o,i);else for(var d=Rr(c),u=0;u<d.length;u++){var h=d[u],f=i[h];o[h]=f}else if(d0(l)||ya(l,a)>=0){!o&&(o=r[a]={});for(var p=Va(i),u=0;u<p.length;u++){var h=p[u],f=i[h];o3e(n[h],f)&&(o[h]=f)}}}}}function iC(a,e,t){var r=e[a];if(r)for(var n=t[a]={},i=Va(r),o=0;o<i.length;o++){var l=i[o];n[l]=lv(r[l])}}function n3e(a,e,t){for(var r=e.transition,n=d0(r)?Ac:Rr(r||[]),i=0;i<n.length;i++){var o=n[i];if(!(o==="style"||o==="shape"||o==="extra")){var l=a[o];t[o]=l}}}function i3e(a,e,t){for(var r=0;r<yz.length;r++){var n=yz[r],i=UZ[n],o=e[n];o&&(t[i[0]]=o[0],t[i[1]]=o[1])}for(var r=0;r<Ac.length;r++){var l=Ac[r];e[l]!=null&&(t[l]=e[l])}}function s3e(a,e,t,r){if(t){var n=a.style,i;if(n){var o=t.transition,l=e.transition;if(o&&!d0(o)){var c=Rr(o);!i&&(i=r.style={});for(var d=0;d<c.length;d++){var u=c[d],h=n[u];i[u]=h}}else if(a.getAnimationStyleProps&&(d0(l)||d0(o)||ya(l,"style")>=0)){var f=a.getAnimationStyleProps(),p=f?f.style:null;if(p){!i&&(i=r.style={});for(var g=Va(t),d=0;d<g.length;d++){var u=g[d];if(p[u]){var h=n[u];i[u]=h}}}}}}}function o3e(a,e){return ls(a)?a!==e:a!=null&&isFinite(a)}var WZ=Ea(),l3e=["percent","easing","shape","style","extra"];function $Z(a){a.stopAnimation("keyframe"),a.attr(WZ(a))}function v_(a,e,t){if(!(!t.isAnimationEnabled()||!e)){if(rt(e)){oe(e,function(l){v_(a,l,t)});return}var r=e.keyframes,n=e.duration;if(t&&n==null){var i=qx("enter",t,0);n=i&&i.duration}if(!(!r||!n)){var o=WZ(a);oe(g_,function(l){if(!(l&&!a[l])){var c;r.sort(function(d,u){return d.percent-u.percent}),oe(r,function(d){var u=a.animators,h=l?d[l]:d;if(h){var f=Va(h);if(l||(f=hr(f,function(b){return ya(l3e,b)<0})),!!f.length){c||(c=a.animate(l,e.loop,!0),c.scope="keyframe");for(var p=0;p<u.length;p++)u[p]!==c&&u[p].targetName===c.targetName&&u[p].stopTracks(f);l&&(o[l]=o[l]||{});var g=l?o[l]:o;oe(f,function(b){g[b]=((l?a[l]:a)||{})[b]}),c.whenWithKeys(n*d.percent,h,f,d.easing)}}}),c&&c.delay(e.delay||0).duration(n).start(e.easing)}})}}}var Td="emphasis",ah="normal",mE="blur",gE="select",Nh=[ah,Td,mE,gE],sC={normal:["itemStyle"],emphasis:[Td,"itemStyle"],blur:[mE,"itemStyle"],select:[gE,"itemStyle"]},oC={normal:["label"],emphasis:[Td,"label"],blur:[mE,"label"],select:[gE,"label"]},c3e=["x","y"],d3e="e\0\0",Ho={normal:{},emphasis:{},blur:{},select:{}},u3e={cartesian2d:G4e,geo:$4e,single:q4e,polar:Z4e,calendar:K4e,matrix:Q4e};function oA(a){return a instanceof Ia}function lA(a){return a instanceof rl}function h3e(a,e){e.copyTransform(a),lA(e)&&lA(a)&&(e.setStyle(a.style),e.z=a.z,e.z2=a.z2,e.zlevel=a.zlevel,e.invisible=a.invisible,e.ignore=a.ignore,oA(e)&&oA(a)&&e.setShape(a.shape))}var f3e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n,i){this._progressiveEls=null;var o=this._data,l=t.getData(),c=this.group,d=_z(t,l,r,n);o||c.removeAll(),l.diff(o).add(function(h){lC(n,null,h,d(h,i),t,c,l)}).remove(function(h){var f=o.getItemGraphicEl(h);f&&FN(f,Ad(f).option,t)}).update(function(h,f){var p=o.getItemGraphicEl(f);lC(n,p,h,d(h,i),t,c,l)}).execute();var u=t.get("clip",!0)?Vb(t.coordinateSystem,!1,t):null;u?c.setClipPath(u):c.removeClipPath(),this._data=l},e.prototype.incrementalPrepareRender=function(t,r,n){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,r,n,i,o){var l=r.getData(),c=_z(r,l,n,i),d=this._progressiveEls=[];function u(p){p.isGroup||(p.incremental=!0,p.ensureState("emphasis").hoverLayer=!0)}for(var h=t.start;h<t.end;h++){var f=lC(null,null,h,c(h,o),r,this.group,l);f&&(f.traverse(u),d.push(f))}},e.prototype.eachRendered=function(t){Ah(this._progressiveEls||this.group,t)},e.prototype.filterForExposedEvent=function(t,r,n,i){var o=r.element;if(o==null||n.name===o)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===o)return!0;return!1},e.type="custom",e})(Mr);function vE(a){var e=a.type,t;if(e==="path"){var r=a.shape,n=r.width!=null&&r.height!=null?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,i=XZ(r);t=$v(i,null,n,r.layout||"center"),Ad(t).customPathData=i}else if(e==="image")t=new Li({}),Ad(t).customImagePath=a.style.image;else if(e==="text")t=new Ja({});else if(e==="group")t=new Gt;else if(e==="compoundPath"){var r=a.shape;if(!r||!r.paths){var o="";or(o)}var l=it(r.paths,function(u){if(u.type==="path")return $v(u.shape.pathData,u,null);var h=H2(u.type);if(!h){var f="";or(f)}return new h});t=new yN({shape:{paths:l}})}else{var c=H2(e);if(!c){var o="";or(o)}t=new c}return Ad(t).customGraphicType=e,t.name=a.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function bE(a,e,t,r,n,i,o){$Z(e);var l=n&&n.normal.cfg;l&&e.setTextConfig(l),r&&r.transition==null&&(r.transition=c3e);var c=r&&r.style;if(c){if(e.type==="text"){var d=c;Dt(d,"textFill")&&(d.fill=d.textFill),Dt(d,"textStroke")&&(d.stroke=d.textStroke)}var u=void 0,h=oA(e)?c.decal:null;a&&h&&(h.dirty=!0,u=Tx(h,a)),c.__decalPattern=u}if(lA(e)&&c){var u=c.__decalPattern;u&&(c.decal=u)}Zw(e,r,i,{dataIndex:t,isInit:o,clearStyle:!0}),v_(e,r.keyframeAnimation,i)}function YZ(a,e,t,r,n){var i=e.isGroup?null:e,o=n&&n[a].cfg;if(i){var l=i.ensureState(a);if(r===!1){var c=i.getState(a);c&&(c.style=null)}else l.style=r||null;o&&(l.textConfig=o),y0(i)}}function p3e(a,e,t){if(!a.isGroup){var r=a,n=t.currentZ,i=t.currentZLevel;r.z=n,r.zlevel=i;var o=e.z2;o!=null&&(r.z2=o||0);for(var l=0;l<Nh.length;l++)x3e(r,e,Nh[l])}}function x3e(a,e,t){var r=t===ah,n=r?e:b_(e,t),i=n?n.z2:null,o;i!=null&&(o=r?a:a.ensureState(t),o.z2=i||0)}function _z(a,e,t,r){var n=a.get("renderItem");if(typeof n=="string"){var i=Cye(n);i&&(n=i)}var o=a.coordinateSystem,l={};o&&(l=o.prepareCustoms?o.prepareCustoms(o):u3e[o.type](o));for(var c=Kt({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:I,style:P,ordinalRawValue:O,styleEmphasis:V,visual:$,barLayout:ae,currentSeriesIndices:J,font:U},l.api||{}),d={context:{},seriesId:a.id,seriesName:a.name,seriesIndex:a.seriesIndex,coordSys:l.coordSys,dataInsideLength:e.count(),encode:m3e(a.getData()),itemPayload:a.get("itemPayload")||{}},u,h,f={},p={},g={},b={},w=0;w<Nh.length;w++){var _=Nh[w];g[_]=a.getModel(sC[_]),b[_]=a.getModel(oC[_])}function k(F){return F===u?h||(h=e.getItemModel(F)):e.getItemModel(F)}function T(F,W){return e.hasItemOption?F===u?f[W]||(f[W]=k(F).getModel(sC[W])):k(F).getModel(sC[W]):g[W]}function D(F,W){return e.hasItemOption?F===u?p[W]||(p[W]=k(F).getModel(oC[W])):k(F).getModel(oC[W]):b[W]}return function(F,W){return u=F,h=null,f={},p={},n&&n(Kt({dataIndexInside:F,dataIndex:e.getRawIndex(F),actionType:W?W.type:null},d),c)};function I(F,W){return W==null&&(W=u),e.getStore().get(e.getDimensionIndex(F||0),W)}function O(F,W){W==null&&(W=u),F=F||0;var K=e.getDimensionInfo(F);if(!K){var ee=e.getDimensionIndex(F);return ee>=0?e.getStore().get(ee,W):void 0}var ne=e.get(K.name,W),re=K&&K.ordinalMeta;return re?re.categories[ne]:ne}function P(F,W){W==null&&(W=u);var K=e.getItemVisual(W,"style"),ee=K&&K.fill,ne=K&&K.opacity,re=T(W,ah).getItemStyle();ee!=null&&(re.fill=ee),ne!=null&&(re.opacity=ne);var Z={inheritColor:jt(ee)?ee:Fe.color.neutral99},ie=D(W,ah),de=zr(ie,null,Z,!1,!0);de.text=ie.getShallow("show")?Pt(a.getFormattedLabel(W,ah),Ix(e,W)):null;var fe=U2(ie,Z,!1);return Q(F,re),re=vz(re,de,fe),F&&G(re,F),re.legacy=!0,re}function V(F,W){W==null&&(W=u);var K=T(W,Td).getItemStyle(),ee=D(W,Td),ne=zr(ee,null,null,!0,!0);ne.text=ee.getShallow("show")?No(a.getFormattedLabel(W,Td),a.getFormattedLabel(W,ah),Ix(e,W)):null;var re=U2(ee,null,!0);return Q(F,K),K=vz(K,ne,re),F&&G(K,F),K.legacy=!0,K}function G(F,W){for(var K in W)Dt(W,K)&&(F[K]=W[K])}function Q(F,W){F&&(F.textFill&&(W.textFill=F.textFill),F.textPosition&&(W.textPosition=F.textPosition))}function $(F,W){if(W==null&&(W=u),Dt(mz,F)){var K=e.getItemVisual(W,"style");return K?K[mz[F]]:null}if(Dt(V4e,F))return e.getItemVisual(W,F)}function ae(F){if(o.type==="cartesian2d"){var W=o.getBaseAxis();return Swe(Kt({axis:W},F))}}function J(){return t.getCurrentSeriesIndices()}function U(F){return QT(F,t)}}function m3e(a){var e={};return oe(a.dimensions,function(t){var r=a.getDimensionInfo(t);if(!r.isExtraCoord){var n=r.coordDim,i=e[n]=e[n]||[];i[r.coordDimIndex]=a.getDimensionIndex(t)}}),e}function lC(a,e,t,r,n,i,o){if(!r){i.remove(e);return}var l=yE(a,e,t,r,n,i);return l&&o.setItemGraphicEl(t,l),l&&on(l,r.focus,r.blurScope,r.emphasisDisabled),l}function yE(a,e,t,r,n,i){var o=-1,l=e;e&&qZ(e,r,n)&&(o=ya(i.childrenRef(),e),e=null);var c=!e,d=e;d?d.clearStates():(d=vE(r),l&&h3e(l,d)),r.morph===!1?d.disableMorphing=!0:d.disableMorphing&&(d.disableMorphing=!1),r.tooltipDisabled&&(d.tooltipDisabled=!0),Ho.normal.cfg=Ho.normal.conOpt=Ho.emphasis.cfg=Ho.emphasis.conOpt=Ho.blur.cfg=Ho.blur.conOpt=Ho.select.cfg=Ho.select.conOpt=null,Ho.isLegacy=!1,v3e(d,t,r,n,c,Ho),g3e(d,t,r,n,c),bE(a,d,t,r,Ho,n,c),Dt(r,"info")&&(Ad(d).info=r.info);for(var u=0;u<Nh.length;u++){var h=Nh[u];if(h!==ah){var f=b_(r,h),p=wE(r,f,h);YZ(h,d,f,p,Ho)}}return p3e(d,r,n),r.type==="group"&&b3e(a,d,t,r,n),o>=0?i.replaceAt(d,o):i.add(d),d}function qZ(a,e,t){var r=Ad(a),n=e.type,i=e.shape,o=e.style;return t.isUniversalTransitionEnabled()||n!=null&&n!==r.customGraphicType||n==="path"&&N3e(i)&&XZ(i)!==r.customPathData||n==="image"&&Dt(o,"image")&&o.image!==r.customImagePath}function g3e(a,e,t,r,n){var i=t.clipPath;if(i===!1)a&&a.getClipPath()&&a.removeClipPath();else if(i){var o=a.getClipPath();o&&qZ(o,i,r)&&(o=null),o||(o=vE(i),a.setClipPath(o)),bE(null,o,e,i,null,r,n)}}function v3e(a,e,t,r,n,i){if(!(a.isGroup||a.type==="compoundPath")){Nz(t,null,i),Nz(t,Td,i);var o=i.normal.conOpt,l=i.emphasis.conOpt,c=i.blur.conOpt,d=i.select.conOpt;if(o!=null||l!=null||d!=null||c!=null){var u=a.getTextContent();if(o===!1)u&&a.removeTextContent();else{o=i.normal.conOpt=o||{type:"text"},u?u.clearStates():(u=vE(o),a.setTextContent(u)),bE(null,u,e,o,null,r,n);for(var h=o&&o.style,f=0;f<Nh.length;f++){var p=Nh[f];if(p!==ah){var g=i[p].conOpt;YZ(p,u,g,wE(o,g,p),null)}}h?u.dirty():u.markRedraw()}}}}function Nz(a,e,t){var r=e?b_(a,e):a,n=e?wE(a,r,Td):a.style,i=a.type,o=r?r.textConfig:null,l=a.textContent,c=l?e?b_(l,e):l:null;if(n&&(t.isLegacy||VZ(n,i,!!o,!!c))){t.isLegacy=!0;var d=HZ(n,i,!e);!o&&d.textConfig&&(o=d.textConfig),!c&&d.textContent&&(c=d.textContent)}if(!e&&c){var u=c;!u.type&&(u.type="text")}var h=e?t[e]:t.normal;h.cfg=o,h.conOpt=c}function b_(a,e){return e?a?a[e]:null:a}function wE(a,e,t){var r=e&&e.style;return r==null&&t===Td&&a&&(r=a.styleEmphasis),r}function b3e(a,e,t,r,n){var i=r.children,o=i?i.length:0,l=r.$mergeChildren,c=l==="byName"||r.diffChildrenByName,d=l===!1;if(!(!o&&!c&&!d)){if(c){w3e({api:a,oldChildren:e.children()||[],newChildren:i||[],dataIndex:t,seriesModel:n,group:e});return}d&&e.removeAll();for(var u=0;u<o;u++){var h=i[u],f=e.childAt(u);h?(h.ignore==null&&(h.ignore=!1),yE(a,f,t,h,n,e)):f.ignore=!0}for(var p=e.childCount()-1;p>=u;p--){var g=e.childAt(p);y3e(e,g,n)}}}function y3e(a,e,t){e&&FN(e,Ad(a).option,t)}function w3e(a){new Bd(a.oldChildren,a.newChildren,jz,jz,a).add(Sz).update(Sz).remove(_3e).execute()}function jz(a,e){var t=a&&a.name;return t??d3e+e}function Sz(a,e){var t=this.context,r=a!=null?t.newChildren[a]:null,n=e!=null?t.oldChildren[e]:null;yE(t.api,n,t.dataIndex,r,t.seriesModel,t.group)}function _3e(a){var e=this.context,t=e.oldChildren[a];t&&FN(t,Ad(t).option,e.seriesModel)}function XZ(a){return a&&(a.pathData||a.d)}function N3e(a){return a&&(Dt(a,"pathData")||Dt(a,"d"))}function j3e(a){a.registerChartView(f3e),a.registerSeriesModel(H4e)}var Ff=Ea(),kz=$t,cC=St,_E=(function(){function a(){this._dragging=!1,this.animationThreshold=15}return a.prototype.render=function(e,t,r,n){var i=t.get("value"),o=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=r,!(!n&&this._lastValue===i&&this._lastStatus===o)){this._lastValue=i,this._lastStatus=o;var l=this._group,c=this._handle;if(!o||o==="hide"){l&&l.hide(),c&&c.hide();return}l&&l.show(),c&&c.show();var d={};this.makeElOption(d,i,e,t,r);var u=d.graphicKey;u!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=u;var h=this._moveAnimation=this.determineAnimation(e,t);if(!l)l=this._group=new Gt,this.createPointerEl(l,d,e,t),this.createLabelEl(l,d,e,t),r.getZr().add(l);else{var f=va(Cz,t,h);this.updatePointerEl(l,d,f),this.updateLabelEl(l,d,f,t)}Tz(l,t,!0),this._renderHandle(i)}},a.prototype.remove=function(e){this.clear(e)},a.prototype.dispose=function(e){this.clear(e)},a.prototype.determineAnimation=function(e,t){var r=t.get("animation"),n=e.axis,i=n.type==="category",o=t.get("snap");if(!o&&!i)return!1;if(r==="auto"||r==null){var l=this.animationThreshold;if(i&&n.getBandWidth()>l)return!0;if(o){var c=UM(e).seriesDataCount,d=n.getExtent();return Math.abs(d[0]-d[1])/c>l}return!1}return r===!0},a.prototype.makeElOption=function(e,t,r,n,i){},a.prototype.createPointerEl=function(e,t,r,n){var i=t.pointer;if(i){var o=Ff(e).pointerEl=new M0[i.type](kz(t.pointer));e.add(o)}},a.prototype.createLabelEl=function(e,t,r,n){if(t.label){var i=Ff(e).labelEl=new Ja(kz(t.label));e.add(i),Az(i,n)}},a.prototype.updatePointerEl=function(e,t,r){var n=Ff(e).pointerEl;n&&t.pointer&&(n.setStyle(t.pointer.style),r(n,{shape:t.pointer.shape}))},a.prototype.updateLabelEl=function(e,t,r,n){var i=Ff(e).labelEl;i&&(i.setStyle(t.label.style),r(i,{x:t.label.x,y:t.label.y}),Az(i,n))},a.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,r=this._api.getZr(),n=this._handle,i=t.getModel("handle"),o=t.get("status");if(!i.get("show")||!o||o==="hide"){n&&r.remove(n),this._handle=null;return}var l;this._handle||(l=!0,n=this._handle=Db(i.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(d){Rd(d.event)},onmousedown:cC(this._onHandleDragMove,this,0,0),drift:cC(this._onHandleDragMove,this),ondragend:cC(this._onHandleDragEnd,this)}),r.add(n)),Tz(n,t,!1),n.setStyle(i.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var c=i.get("size");rt(c)||(c=[c,c]),n.scaleX=c[0]/2,n.scaleY=c[1]/2,Qx(this,"_doDispatchAxisPointer",i.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,l)}},a.prototype._moveHandleToValue=function(e,t){Cz(this._axisPointerModel,!t&&this._moveAnimation,this._handle,dC(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},a.prototype._onHandleDragMove=function(e,t){var r=this._handle;if(r){this._dragging=!0;var n=this.updateHandleTransform(dC(r),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=n,r.stopAnimation(),r.attr(dC(n)),Ff(r).lastProp=null,this._doDispatchAxisPointer()}},a.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},a.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},a.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),r=this._group,n=this._handle;t&&r&&(this._lastGraphicKey=null,r&&t.remove(r),n&&t.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),Zv(this,"_doDispatchAxisPointer")},a.prototype.doClear=function(){},a.prototype.buildLabel=function(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}},a})();function Cz(a,e,t,r){ZZ(Ff(t).lastProp,r)||(Ff(t).lastProp=r,e?rr(t,r,a):(t.stopAnimation(),t.attr(r)))}function ZZ(a,e){if(Qt(a)&&Qt(e)){var t=!0;return oe(e,function(r,n){t=t&&ZZ(a[n],r)}),!!t}else return a===e}function Az(a,e){a[e.get(["label","show"])?"show":"hide"]()}function dC(a){return{x:a.x||0,y:a.y||0,rotation:a.rotation||0}}function Tz(a,e,t){var r=e.get("z"),n=e.get("zlevel");a&&a.traverse(function(i){i.type!=="group"&&(r!=null&&(i.z=r),n!=null&&(i.zlevel=n),i.silent=t)})}function NE(a){var e=a.get("type"),t=a.getModel(e+"Style"),r;return e==="line"?(r=t.getLineStyle(),r.fill=null):e==="shadow"&&(r=t.getAreaStyle(),r.stroke=null),r}function KZ(a,e,t,r,n){var i=t.get("value"),o=QZ(i,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),l=t.getModel("label"),c=Ib(l.get("padding")||0),d=l.getFont(),u=lN(o,d),h=n.position,f=u.width+c[1]+c[3],p=u.height+c[0]+c[2],g=n.align;g==="right"&&(h[0]-=f),g==="center"&&(h[0]-=f/2);var b=n.verticalAlign;b==="bottom"&&(h[1]-=p),b==="middle"&&(h[1]-=p/2),S3e(h,f,p,r);var w=l.get("backgroundColor");(!w||w==="auto")&&(w=e.get(["axisLine","lineStyle","color"])),a.label={x:h[0],y:h[1],style:zr(l,{text:o,font:d,fill:l.getTextColor(),padding:c,backgroundColor:w}),z2:10}}function S3e(a,e,t,r){var n=r.getWidth(),i=r.getHeight();a[0]=Math.min(a[0]+e,n)-e,a[1]=Math.min(a[1]+t,i)-t,a[0]=Math.max(a[0],0),a[1]=Math.max(a[1],0)}function QZ(a,e,t,r,n){a=e.scale.parse(a);var i=e.scale.getLabel({value:a},{precision:n.precision}),o=n.formatter;if(o){var l={value:e_(e,{value:a}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};oe(r,function(c){var d=t.getSeriesByIndex(c.seriesIndex),u=c.dataIndexInside,h=d&&d.getDataParams(u);h&&l.seriesData.push(h)}),jt(o)?i=o.replace("{value}",i):Ut(o)&&(i=o(l))}return i}function jE(a,e,t){var r=Ii();return Ch(r,r,t.rotation),Cc(r,r,t.position),jl([a.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],r)}function JZ(a,e,t,r,n,i){var o=ks.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=n.get(["label","margin"]),KZ(e,r,n,i,{position:jE(r.axis,a,t),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function SE(a,e,t){return t=t||0,{x1:a[t],y1:a[1-t],x2:e[t],y2:e[1-t]}}function eK(a,e,t){return t=t||0,{x:a[t],y:a[1-t],width:e[t],height:e[1-t]}}function Mz(a,e,t,r,n,i){return{cx:a,cy:e,r0:t,r,startAngle:n,endAngle:i,clockwise:!0}}var k3e=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,n,i,o){var l=n.axis,c=l.grid,d=i.get("type"),u=Ez(c,l).getOtherAxis(l).getGlobalExtent(),h=l.toGlobalCoord(l.dataToCoord(r,!0));if(d&&d!=="none"){var f=NE(i),p=C3e[d](l,h,u);p.style=f,t.graphicKey=p.type,t.pointer=p}var g=d_(c.getRect(),n);JZ(r,t,g,n,i,o)},e.prototype.getHandleTransform=function(t,r,n){var i=d_(r.axis.grid.getRect(),r,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var o=jE(r.axis,t,i);return{x:o[0],y:o[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,n,i){var o=n.axis,l=o.grid,c=o.getGlobalExtent(!0),d=Ez(l,o).getOtherAxis(o).getGlobalExtent(),u=o.dim==="x"?0:1,h=[t.x,t.y];h[u]+=r[u],h[u]=Math.min(c[1],h[u]),h[u]=Math.max(c[0],h[u]);var f=(d[1]+d[0])/2,p=[f,f];p[u]=h[u];var g=[{verticalAlign:"middle"},{align:"center"}];return{x:h[0],y:h[1],rotation:t.rotation,cursorPoint:p,tooltipOption:g[u]}},e})(_E);function Ez(a,e){var t={};return t[e.dim+"AxisIndex"]=e.index,a.getCartesian(t)}var C3e={line:function(a,e,t){var r=SE([e,t[0]],[e,t[1]],Dz(a));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(a,e,t){var r=Math.max(1,a.getBandWidth()),n=t[1]-t[0];return{type:"Rect",shape:eK([e-r/2,t[0]],[r,n],Dz(a))}}};function Dz(a){return a.dim==="x"?0:1}var A3e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:Fe.color.border,width:1,type:"dashed"},shadowStyle:{color:Fe.color.shadowTint},label:{show:!0,formatter:null,precision:"auto",margin:3,color:Fe.color.neutral00,padding:[5,7,5,7],backgroundColor:Fe.color.accent60,borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:Fe.color.accent40,throttle:40}},e})(Oa),Sd=Ea(),T3e=oe;function tK(a,e,t){if(!Ba.node){var r=e.getZr();Sd(r).records||(Sd(r).records={}),M3e(r,e);var n=Sd(r).records[a]||(Sd(r).records[a]={});n.handler=t}}function M3e(a,e){if(Sd(a).initialized)return;Sd(a).initialized=!0,t("click",va(Iz,"click")),t("mousemove",va(Iz,"mousemove")),t("globalout",D3e);function t(r,n){a.on(r,function(i){var o=I3e(e);T3e(Sd(a).records,function(l){l&&n(l,i,o.dispatchAction)}),E3e(o.pendings,e)})}}function E3e(a,e){var t=a.showTip.length,r=a.hideTip.length,n;t?n=a.showTip[t-1]:r&&(n=a.hideTip[r-1]),n&&(n.dispatchAction=null,e.dispatchAction(n))}function D3e(a,e,t){a.handler("leave",null,t)}function Iz(a,e,t,r){e.handler(a,t,r)}function I3e(a){var e={showTip:[],hideTip:[]},t=function(r){var n=e[r.type];n?n.push(r):(r.dispatchAction=t,a.dispatchAction(r))};return{dispatchAction:t,pendings:e}}function cA(a,e){if(!Ba.node){var t=e.getZr(),r=(Sd(t).records||{})[a];r&&(Sd(t).records[a]=null)}}var R3e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=r.getComponent("tooltip"),o=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";tK("axisPointer",n,function(l,c,d){o!=="none"&&(l==="leave"||o.indexOf(l)>=0)&&d({type:"updateAxisPointer",currTrigger:l,x:c&&c.offsetX,y:c&&c.offsetY})})},e.prototype.remove=function(t,r){cA("axisPointer",r)},e.prototype.dispose=function(t,r){cA("axisPointer",r)},e.type="axisPointer",e})(tn);function aK(a,e){var t=[],r=a.seriesIndex,n;if(r==null||!(n=e.getSeriesByIndex(r)))return{point:[]};var i=n.getData(),o=v0(i,a);if(o==null||o<0||rt(o))return{point:[]};var l=i.getItemGraphicEl(o),c=n.coordinateSystem;if(n.getTooltipPosition)t=n.getTooltipPosition(o)||[];else if(c&&c.dataToPoint)if(a.isStacked){var d=c.getBaseAxis(),u=c.getOtherAxis(d),h=u.dim,f=d.dim,p=h==="x"||h==="radius"?1:0,g=i.mapDimension(f),b=[];b[p]=i.get(g,o),b[1-p]=i.get(i.getCalculationInfo("stackResultDimension"),o),t=c.dataToPoint(b)||[]}else t=c.dataToPoint(i.getValues(it(c.dimensions,function(_){return i.mapDimension(_)}),o))||[];else if(l){var w=l.getBoundingRect().clone();w.applyTransform(l.transform),t=[w.x+w.width/2,w.y+w.height/2]}return{point:t,el:l}}var Rz=Ea();function L3e(a,e,t){var r=a.currTrigger,n=[a.x,a.y],i=a,o=a.dispatchAction||St(t.dispatchAction,t),l=e.getComponent("axisPointer").coordSysAxesInfo;if(l){Kw(n)&&(n=aK({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},e).point);var c=Kw(n),d=i.axesInfo,u=l.axesInfo,h=r==="leave"||Kw(n),f={},p={},g={list:[],map:{}},b={showPointer:va(P3e,p),showTooltip:va(B3e,g)};oe(l.coordSysMap,function(_,k){var T=c||_.containPoint(n);oe(l.coordSysAxesInfo[k],function(D,I){var O=D.axis,P=H3e(d,D);if(!h&&T&&(!d||P)){var V=P&&P.value;V==null&&!c&&(V=O.pointToData(n)),V!=null&&Lz(D,V,b,!1,f)}})});var w={};return oe(u,function(_,k){var T=_.linkGroup;T&&!p[k]&&oe(T.axesInfo,function(D,I){var O=p[I];if(D!==_&&O){var P=O.value;T.mapper&&(P=_.axis.scale.parse(T.mapper(P,Oz(D),Oz(_)))),w[_.key]=P}})}),oe(w,function(_,k){Lz(u[k],_,b,!0,f)}),z3e(p,u,f),F3e(g,n,a,o),V3e(u,o,t),f}}function Lz(a,e,t,r,n){var i=a.axis;if(!(i.scale.isBlank()||!i.containData(e))){if(!a.involveSeries){t.showPointer(a,e);return}var o=O3e(e,a),l=o.payloadBatch,c=o.snapToValue;l[0]&&n.seriesIndex==null&&Je(n,l[0]),!r&&a.snap&&i.containData(c)&&c!=null&&(e=c),t.showPointer(a,e,l),t.showTooltip(a,o,c)}}function O3e(a,e){var t=e.axis,r=t.dim,n=a,i=[],o=Number.MAX_VALUE,l=-1;return oe(e.seriesModels,function(c,d){var u=c.getData().mapDimensionsAll(r),h,f;if(c.getAxisTooltipData){var p=c.getAxisTooltipData(u,a,t);f=p.dataIndices,h=p.nestestValue}else{if(f=c.indicesOfNearest(r,u[0],a,t.type==="category"?.5:null),!f.length)return;h=c.getData().get(u[0],f[0])}if(!(h==null||!isFinite(h))){var g=a-h,b=Math.abs(g);b<=o&&((b<o||g>=0&&l<0)&&(o=b,l=g,n=h,i.length=0),oe(f,function(w){i.push({seriesIndex:c.seriesIndex,dataIndexInside:w,dataIndex:c.getData().getRawIndex(w)})}))}}),{payloadBatch:i,snapToValue:n}}function P3e(a,e,t,r){a[e.key]={value:t,payloadBatch:r}}function B3e(a,e,t,r){var n=t.payloadBatch,i=e.axis,o=i.model,l=e.axisPointerModel;if(!(!e.triggerTooltip||!n.length)){var c=e.coordSys.model,d=ib(c),u=a.map[d];u||(u=a.map[d]={coordSysId:c.id,coordSysIndex:c.componentIndex,coordSysType:c.type,coordSysMainType:c.mainType,dataByAxis:[]},a.list.push(u)),u.dataByAxis.push({axisDim:i.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:l.get(["label","precision"]),formatter:l.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function z3e(a,e,t){var r=t.axesInfo=[];oe(e,function(n,i){var o=n.axisPointerModel.option,l=a[i];l?(!n.useHandle&&(o.status="show"),o.value=l.value,o.seriesDataIndices=(l.payloadBatch||[]).slice()):!n.useHandle&&(o.status="hide"),o.status==="show"&&r.push({axisDim:n.axis.dim,axisIndex:n.axis.model.componentIndex,value:o.value})})}function F3e(a,e,t,r){if(Kw(e)||!a.list.length){r({type:"hideTip"});return}var n=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:a.list})}function V3e(a,e,t){var r=t.getZr(),n="axisPointerLastHighlights",i=Rz(r)[n]||{},o=Rz(r)[n]={};oe(a,function(d,u){var h=d.axisPointerModel.option;h.status==="show"&&d.triggerEmphasis&&oe(h.seriesDataIndices,function(f){var p=f.seriesIndex+" | "+f.dataIndex;o[p]=f})});var l=[],c=[];oe(i,function(d,u){!o[u]&&c.push(d)}),oe(o,function(d,u){!i[u]&&l.push(d)}),c.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:c}),l.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:l})}function H3e(a,e){for(var t=0;t<(a||[]).length;t++){var r=a[t];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function Oz(a){var e=a.axis.model,t={},r=t.axisDim=a.axis.dim;return t.axisIndex=t[r+"AxisIndex"]=e.componentIndex,t.axisName=t[r+"AxisName"]=e.name,t.axisId=t[r+"AxisId"]=e.id,t}function Kw(a){return!a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}function Gb(a){L0.registerAxisPointerClass("CartesianAxisPointer",k3e),a.registerComponentModel(A3e),a.registerComponentView(R3e),a.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!rt(t)&&(e.axisPointer.link=[t])}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=UNe(e,t)}),a.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},L3e)}function U3e(a){Sa(kX),Sa(Gb)}var G3e=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,n,i,o){var l=n.axis;l.dim==="angle"&&(this.animationThreshold=Math.PI/18);var c=l.polar,d=c.getOtherAxis(l),u=d.getExtent(),h=l.dataToCoord(r),f=i.get("type");if(f&&f!=="none"){var p=NE(i),g=$3e[f](l,c,h,u);g.style=p,t.graphicKey=g.type,t.pointer=g}var b=i.get(["label","margin"]),w=W3e(r,n,i,c,b);KZ(t,n,i,o,w)},e})(_E);function W3e(a,e,t,r,n){var i=e.axis,o=i.dataToCoord(a),l=r.getAngleAxis().getExtent()[0];l=l/180*Math.PI;var c=r.getRadiusAxis().getExtent(),d,u,h;if(i.dim==="radius"){var f=Ii();Ch(f,f,l),Cc(f,f,[r.cx,r.cy]),d=jl([o,-n],f);var p=e.getModel("axisLabel").get("rotate")||0,g=ks.innerTextLayout(l,p*Math.PI/180,-1);u=g.textAlign,h=g.textVerticalAlign}else{var b=c[1];d=r.coordToPoint([b+n,o]);var w=r.cx,_=r.cy;u=Math.abs(d[0]-w)/b<.3?"center":d[0]>w?"left":"right",h=Math.abs(d[1]-_)/b<.3?"middle":d[1]>_?"top":"bottom"}return{position:d,align:u,verticalAlign:h}}var $3e={line:function(a,e,t,r){return a.dim==="angle"?{type:"Line",shape:SE(e.coordToPoint([r[0],t]),e.coordToPoint([r[1],t]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:t}}},shadow:function(a,e,t,r){var n=Math.max(1,a.getBandWidth()),i=Math.PI/180;return a.dim==="angle"?{type:"Sector",shape:Mz(e.cx,e.cy,r[0],r[1],(-t-n/2)*i,(-t+n/2)*i)}:{type:"Sector",shape:Mz(e.cx,e.cy,t-n/2,t+n/2,0,Math.PI*2)}}},Y3e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.findAxisModel=function(t){var r,n=this.ecModel;return n.eachComponent(t,function(i){i.getCoordSysModel()===this&&(r=i)},this),r},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e})(Oa),kE=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",yn).models[0]},e.type="polarAxis",e})(Oa);ti(kE,Bb);var q3e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="angleAxis",e})(kE),X3e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="radiusAxis",e})(kE),CE=(function(a){Le(e,a);function e(t,r){return a.call(this,"radius",t,r)||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e})(Ll);CE.prototype.dataToRadius=Ll.prototype.dataToCoord;CE.prototype.radiusToData=Ll.prototype.coordToData;var Z3e=Ea(),AE=(function(a){Le(e,a);function e(t,r){return a.call(this,"angle",t,r||[0,360])||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,r=t.getLabelModel(),n=t.scale,i=n.getExtent(),o=n.count();if(i[1]-i[0]<1)return 0;var l=i[0],c=t.dataToCoord(l+1)-t.dataToCoord(l),d=Math.abs(c),u=lN(l==null?"":l+"",r.getFont(),"center","top"),h=Math.max(u.height,7),f=h/d;isNaN(f)&&(f=1/0);var p=Math.max(0,Math.floor(f)),g=Z3e(t.model),b=g.lastAutoInterval,w=g.lastTickCount;return b!=null&&w!=null&&Math.abs(b-p)<=1&&Math.abs(w-o)<=1&&b>p?p=b:(g.lastTickCount=o,g.lastAutoInterval=p),p},e})(Ll);AE.prototype.dataToAngle=Ll.prototype.dataToCoord;AE.prototype.angleToData=Ll.prototype.coordToData;var rK=["radius","angle"],K3e=(function(){function a(e){this.dimensions=rK,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new CE,this._angleAxis=new AE,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return a.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},a.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},a.prototype.getAxis=function(e){var t="_"+e+"Axis";return this[t]},a.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},a.prototype.getAxesByScale=function(e){var t=[],r=this._angleAxis,n=this._radiusAxis;return r.scale.type===e&&t.push(r),n.scale.type===e&&t.push(n),t},a.prototype.getAngleAxis=function(){return this._angleAxis},a.prototype.getRadiusAxis=function(){return this._radiusAxis},a.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},a.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},a.prototype.getTooltipAxes=function(e){var t=e!=null&&e!=="auto"?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},a.prototype.dataToPoint=function(e,t,r){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)],r)},a.prototype.pointToData=function(e,t,r){r=r||[];var n=this.pointToCoord(e);return r[0]=this._radiusAxis.radiusToData(n[0],t),r[1]=this._angleAxis.angleToData(n[1],t),r},a.prototype.pointToCoord=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,n=this.getAngleAxis(),i=n.getExtent(),o=Math.min(i[0],i[1]),l=Math.max(i[0],i[1]);n.inverse?o=l-360:l=o+360;var c=Math.sqrt(t*t+r*r);t/=c,r/=c;for(var d=Math.atan2(-r,t)/Math.PI*180,u=d<o?1:-1;d<o||d>l;)d+=u*360;return[c,d]},a.prototype.coordToPoint=function(e,t){t=t||[];var r=e[0],n=e[1]/180*Math.PI;return t[0]=Math.cos(n)*r+this.cx,t[1]=-Math.sin(n)*r+this.cy,t},a.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis(),r=t.getExtent().slice();r[0]>r[1]&&r.reverse();var n=e.getExtent(),i=Math.PI/180,o=1e-4;return{cx:this.cx,cy:this.cy,r0:r[0],r:r[1],startAngle:-n[0]*i,endAngle:-n[1]*i,clockwise:e.inverse,contain:function(l,c){var d=l-this.cx,u=c-this.cy,h=d*d+u*u,f=this.r,p=this.r0;return f!==p&&h-o<=f*f&&h+o>=p*p},x:this.cx-r[1],y:this.cy-r[1],width:r[1]*2,height:r[1]*2}},a.prototype.convertToPixel=function(e,t,r){var n=Pz(t);return n===this?this.dataToPoint(r):null},a.prototype.convertFromPixel=function(e,t,r){var n=Pz(t);return n===this?this.pointToData(r):null},a})();function Pz(a){var e=a.seriesModel,t=a.polarModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function Q3e(a,e,t){var r=e.get("center"),n=pi(e,t).refContainer;a.cx=_t(r[0],n.width)+n.x,a.cy=_t(r[1],n.height)+n.y;var i=a.getRadiusAxis(),o=Math.min(n.width,n.height)/2,l=e.get("radius");l==null?l=[0,"100%"]:rt(l)||(l=[0,l]);var c=[_t(l[0],o),_t(l[1],o)];i.inverse?i.setExtent(c[1],c[0]):i.setExtent(c[0],c[1])}function J3e(a,e){var t=this,r=t.getAngleAxis(),n=t.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),n.scale.setExtent(1/0,-1/0),a.eachSeries(function(l){if(l.coordinateSystem===t){var c=l.getData();oe(t_(c,"radius"),function(d){n.scale.unionExtentFromData(c,d)}),oe(t_(c,"angle"),function(d){r.scale.unionExtentFromData(c,d)})}}),Ex(r.scale,r.model),Ex(n.scale,n.model),r.type==="category"&&!r.onBand){var i=r.getExtent(),o=360/r.scale.count();r.inverse?i[1]+=o:i[1]-=o,r.setExtent(i[0],i[1])}}function eAe(a){return a.mainType==="angleAxis"}function Bz(a,e){var t;if(a.type=e.get("type"),a.scale=MN(e),a.onBand=e.get("boundaryGap")&&a.type==="category",a.inverse=e.get("inverse"),eAe(e)){a.inverse=a.inverse!==e.get("clockwise");var r=e.get("startAngle"),n=(t=e.get("endAngle"))!==null&&t!==void 0?t:r+(a.inverse?-360:360);a.setExtent(r,n)}e.axis=a,a.model=e}var tAe={dimensions:rK,create:function(a,e){var t=[];return a.eachComponent("polar",function(r,n){var i=new K3e(n+"");i.update=J3e;var o=i.getRadiusAxis(),l=i.getAngleAxis(),c=r.findAxisModel("radiusAxis"),d=r.findAxisModel("angleAxis");Bz(o,c),Bz(l,d),Q3e(i,r,e),t.push(i),r.coordinateSystem=i,i.model=r}),a.eachSeries(function(r){if(r.get("coordinateSystem")==="polar"){var n=r.getReferringComponents("polar",yn).models[0];r.coordinateSystem=n.coordinateSystem}}),t}},aAe=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function lw(a,e,t){e[1]>e[0]&&(e=e.slice().reverse());var r=a.coordToPoint([e[0],t]),n=a.coordToPoint([e[1],t]);return{x1:r[0],y1:r[1],x2:n[0],y2:n[1]}}function cw(a){var e=a.getRadiusAxis();return e.inverse?0:1}function zz(a){var e=a[0],t=a[a.length-1];e&&t&&Math.abs(Math.abs(e.coord-t.coord)-360)<1e-4&&a.pop()}var rAe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var n=t.axis,i=n.polar,o=i.getRadiusAxis().getExtent(),l=n.getTicksCoords({breakTicks:"none"}),c=n.getMinorTicksCoords(),d=it(n.getViewLabels(),function(u){u=$t(u);var h=n.scale,f=h.type==="ordinal"?h.getRawOrdinalNumber(u.tickValue):u.tickValue;return u.coord=n.dataToCoord(f),u});zz(d),zz(l),oe(aAe,function(u){t.get([u,"show"])&&(!n.scale.isBlank()||u==="axisLine")&&nAe[u](this.group,t,i,l,c,o,d)},this)}},e.type="angleAxis",e})(L0),nAe={axisLine:function(a,e,t,r,n,i){var o=e.getModel(["axisLine","lineStyle"]),l=t.getAngleAxis(),c=Math.PI/180,d=l.getExtent(),u=cw(t),h=u?0:1,f,p=Math.abs(d[1]-d[0])===360?"Circle":"Arc";i[h]===0?f=new M0[p]({shape:{cx:t.cx,cy:t.cy,r:i[u],startAngle:-d[0]*c,endAngle:-d[1]*c,clockwise:l.inverse},style:o.getLineStyle(),z2:1,silent:!0}):f=new Tb({shape:{cx:t.cx,cy:t.cy,r:i[u],r0:i[h]},style:o.getLineStyle(),z2:1,silent:!0}),f.style.fill=null,a.add(f)},axisTick:function(a,e,t,r,n,i){var o=e.getModel("axisTick"),l=(o.get("inside")?-1:1)*o.get("length"),c=i[cw(t)],d=it(r,function(u){return new qn({shape:lw(t,[c,c+l],u.coord)})});a.add(Ko(d,{style:Kt(o.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(a,e,t,r,n,i){if(n.length){for(var o=e.getModel("axisTick"),l=e.getModel("minorTick"),c=(o.get("inside")?-1:1)*l.get("length"),d=i[cw(t)],u=[],h=0;h<n.length;h++)for(var f=0;f<n[h].length;f++)u.push(new qn({shape:lw(t,[d,d+c],n[h][f].coord)}));a.add(Ko(u,{style:Kt(l.getModel("lineStyle").getLineStyle(),Kt(o.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(a,e,t,r,n,i,o){var l=e.getCategories(!0),c=e.getModel("axisLabel"),d=c.get("margin"),u=e.get("triggerEvent");oe(o,function(h,f){var p=c,g=h.tickValue,b=i[cw(t)],w=t.coordToPoint([b+d,h.coord]),_=t.cx,k=t.cy,T=Math.abs(w[0]-_)/b<.3?"center":w[0]>_?"left":"right",D=Math.abs(w[1]-k)/b<.3?"middle":w[1]>k?"top":"bottom";if(l&&l[g]){var I=l[g];Qt(I)&&I.textStyle&&(p=new za(I.textStyle,c,c.ecModel))}var O=new Ja({silent:ks.isLabelSilent(e),style:zr(p,{x:w[0],y:w[1],fill:p.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:h.formattedLabel,align:T,verticalAlign:D})});if(a.add(O),Gd({el:O,componentModel:e,itemName:h.formattedLabel,formatterParamsExtra:{isTruncated:function(){return O.isTruncated},value:h.rawLabel,tickIndex:f}}),u){var P=ks.makeAxisEventDataBase(e);P.targetType="axisLabel",P.value=h.rawLabel,na(O).eventData=P}},this)},splitLine:function(a,e,t,r,n,i){var o=e.getModel("splitLine"),l=o.getModel("lineStyle"),c=l.get("color"),d=0;c=c instanceof Array?c:[c];for(var u=[],h=0;h<r.length;h++){var f=d++%c.length;u[f]=u[f]||[],u[f].push(new qn({shape:lw(t,i,r[h].coord)}))}for(var h=0;h<u.length;h++)a.add(Ko(u[h],{style:Kt({stroke:c[h%c.length]},l.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(a,e,t,r,n,i){if(n.length){for(var o=e.getModel("minorSplitLine"),l=o.getModel("lineStyle"),c=[],d=0;d<n.length;d++)for(var u=0;u<n[d].length;u++)c.push(new qn({shape:lw(t,i,n[d][u].coord)}));a.add(Ko(c,{style:l.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(a,e,t,r,n,i){if(r.length){var o=e.getModel("splitArea"),l=o.getModel("areaStyle"),c=l.get("color"),d=0;c=c instanceof Array?c:[c];for(var u=[],h=Math.PI/180,f=-r[0].coord*h,p=Math.min(i[0],i[1]),g=Math.max(i[0],i[1]),b=e.get("clockwise"),w=1,_=r.length;w<=_;w++){var k=w===_?r[0].coord:r[w].coord,T=d++%c.length;u[T]=u[T]||[],u[T].push(new ds({shape:{cx:t.cx,cy:t.cy,r0:p,r:g,startAngle:f,endAngle:-k*h,clockwise:b},silent:!0})),f=-k*h}for(var w=0;w<u.length;w++)a.add(Ko(u[w],{style:Kt({fill:c[w%c.length]},l.getAreaStyle()),silent:!0}))}}},iAe=["splitLine","splitArea","minorSplitLine"],sAe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r,n){if(this.group.removeAll(),!!t.get("show")){var i=this._axisGroup,o=this._axisGroup=new Gt;this.group.add(o);var l=t.axis,c=l.polar,d=c.getAngleAxis(),u=l.getTicksCoords(),h=l.getMinorTicksCoords(),f=d.getExtent()[0],p=l.getExtent(),g=lAe(c,t,f),b=new ks(t,n,g);b.build(),o.add(b.group),Eb(i,o,t),oe(iAe,function(w){t.get([w,"show"])&&!l.scale.isBlank()&&oAe[w](this.group,t,c,f,p,u,h)},this)}},e.type="radiusAxis",e})(L0),oAe={splitLine:function(a,e,t,r,n,i){var o=e.getModel("splitLine"),l=o.getModel("lineStyle"),c=l.get("color"),d=0,u=t.getAngleAxis(),h=Math.PI/180,f=u.getExtent(),p=Math.abs(f[1]-f[0])===360?"Circle":"Arc";c=c instanceof Array?c:[c];for(var g=[],b=0;b<i.length;b++){var w=d++%c.length;g[w]=g[w]||[],g[w].push(new M0[p]({shape:{cx:t.cx,cy:t.cy,r:Math.max(i[b].coord,0),startAngle:-f[0]*h,endAngle:-f[1]*h,clockwise:u.inverse}}))}for(var b=0;b<g.length;b++)a.add(Ko(g[b],{style:Kt({stroke:c[b%c.length],fill:null},l.getLineStyle()),silent:!0}))},minorSplitLine:function(a,e,t,r,n,i,o){if(o.length){for(var l=e.getModel("minorSplitLine"),c=l.getModel("lineStyle"),d=[],u=0;u<o.length;u++)for(var h=0;h<o[u].length;h++)d.push(new Ud({shape:{cx:t.cx,cy:t.cy,r:o[u][h].coord}}));a.add(Ko(d,{style:Kt({fill:null},c.getLineStyle()),silent:!0}))}},splitArea:function(a,e,t,r,n,i){if(i.length){var o=e.getModel("splitArea"),l=o.getModel("areaStyle"),c=l.get("color"),d=0;c=c instanceof Array?c:[c];for(var u=[],h=i[0].coord,f=1;f<i.length;f++){var p=d++%c.length;u[p]=u[p]||[],u[p].push(new ds({shape:{cx:t.cx,cy:t.cy,r0:h,r:i[f].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),h=i[f].coord}for(var f=0;f<u.length;f++)a.add(Ko(u[f],{style:Kt({fill:c[f%c.length]},l.getAreaStyle()),silent:!0}))}}};function lAe(a,e,t){return{position:[a.cx,a.cy],rotation:t/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}function nK(a){return a.get("stack")||"__ec_stack_"+a.seriesIndex}function iK(a,e){return e.dim+a.model.componentIndex}function cAe(a,e,t){var r={},n=dAe(hr(e.getSeriesByType(a),function(i){return!e.isSeriesFiltered(i)&&i.coordinateSystem&&i.coordinateSystem.type==="polar"}));e.eachSeriesByType(a,function(i){if(i.coordinateSystem.type==="polar"){var o=i.getData(),l=i.coordinateSystem,c=l.getBaseAxis(),d=iK(l,c),u=nK(i),h=n[d][u],f=h.offset,p=h.width,g=l.getOtherAxis(c),b=i.coordinateSystem.cx,w=i.coordinateSystem.cy,_=i.get("barMinHeight")||0,k=i.get("barMinAngle")||0;r[u]=r[u]||[];for(var T=o.mapDimension(g.dim),D=o.mapDimension(c.dim),I=bh(o,T),O=c.dim!=="radius"||!i.get("roundCap",!0),P=g.model,V=P.get("startValue"),G=g.dataToCoord(V||0),Q=0,$=o.count();Q<$;Q++){var ae=o.get(T,Q),J=o.get(D,Q),U=ae>=0?"p":"n",F=G;I&&(r[u][J]||(r[u][J]={p:G,n:G}),F=r[u][J][U]);var W=void 0,K=void 0,ee=void 0,ne=void 0;if(g.dim==="radius"){var re=g.dataToCoord(ae)-G,Z=c.dataToCoord(J);Math.abs(re)<_&&(re=(re<0?-1:1)*_),W=F,K=F+re,ee=Z-f,ne=ee-p,I&&(r[u][J][U]=K)}else{var ie=g.dataToCoord(ae,O)-G,de=c.dataToCoord(J);Math.abs(ie)<k&&(ie=(ie<0?-1:1)*k),W=de+f,K=W+p,ee=F,ne=F+ie,I&&(r[u][J][U]=ne)}o.setItemLayout(Q,{cx:b,cy:w,r0:W,r:K,startAngle:-ee*Math.PI/180,endAngle:-ne*Math.PI/180,clockwise:ee>=ne})}}})}function dAe(a){var e={};oe(a,function(r,n){var i=r.getData(),o=r.coordinateSystem,l=o.getBaseAxis(),c=iK(o,l),d=l.getExtent(),u=l.type==="category"?l.getBandWidth():Math.abs(d[1]-d[0])/i.count(),h=e[c]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},f=h.stacks;e[c]=h;var p=nK(r);f[p]||h.autoWidthCount++,f[p]=f[p]||{width:0,maxWidth:0};var g=_t(r.get("barWidth"),u),b=_t(r.get("barMaxWidth"),u),w=r.get("barGap"),_=r.get("barCategoryGap");g&&!f[p].width&&(g=Math.min(h.remainedWidth,g),f[p].width=g,h.remainedWidth-=g),b&&(f[p].maxWidth=b),w!=null&&(h.gap=w),_!=null&&(h.categoryGap=_)});var t={};return oe(e,function(r,n){t[n]={};var i=r.stacks,o=r.bandWidth,l=_t(r.categoryGap,o),c=_t(r.gap,1),d=r.remainedWidth,u=r.autoWidthCount,h=(d-l)/(u+(u-1)*c);h=Math.max(h,0),oe(i,function(b,w){var _=b.maxWidth;_&&_<h&&(_=Math.min(_,d),b.width&&(_=Math.min(_,b.width)),d-=_,b.width=_,u--)}),h=(d-l)/(u+(u-1)*c),h=Math.max(h,0);var f=0,p;oe(i,function(b,w){b.width||(b.width=h),p=b,f+=b.width*(1+c)}),p&&(f-=p.width*c);var g=-f/2;oe(i,function(b,w){t[n][w]=t[n][w]||{offset:g,width:b.width},g+=b.width*(1+c)})}),t}var uAe={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},hAe={splitNumber:5},fAe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="polar",e})(tn);function pAe(a){Sa(Gb),L0.registerAxisPointerClass("PolarAxisPointer",G3e),a.registerCoordinateSystem("polar",tAe),a.registerComponentModel(Y3e),a.registerComponentView(fAe),Rx(a,"angle",q3e,uAe),Rx(a,"radius",X3e,hAe),a.registerComponentView(rAe),a.registerComponentView(sAe),a.registerLayout(va(cAe,"bar"))}function dA(a,e){e=e||{};var t=a.coordinateSystem,r=a.axis,n={},i=r.position,o=r.orient,l=t.getRect(),c=[l.x,l.x+l.width,l.y,l.y+l.height],d={horizontal:{top:c[2],bottom:c[3]},vertical:{left:c[0],right:c[1]}};n.position=[o==="vertical"?d.vertical[i]:c[0],o==="horizontal"?d.horizontal[i]:c[3]];var u={horizontal:0,vertical:1};n.rotation=Math.PI/2*u[o];var h={top:-1,bottom:1,right:1,left:-1};n.labelDirection=n.tickDirection=n.nameDirection=h[i],a.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),Gi(e.labelInside,a.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var f=a.get(["axisLabel","rotate"]);return n.labelRotate=i==="top"?-f:f,n.z2=1,n}var xAe=["splitArea","splitLine","breakArea"],mAe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="SingleAxisPointer",t}return e.prototype.render=function(t,r,n,i){var o=this.group;o.removeAll();var l=this._axisGroup;this._axisGroup=new Gt;var c=dA(t),d=new ks(t,n,c);d.build(),o.add(this._axisGroup),o.add(d.group),oe(xAe,function(u){t.get([u,"show"])&&gAe[u](this,this.group,this._axisGroup,t,n)},this),Eb(l,this._axisGroup,t),a.prototype.render.call(this,t,r,n,i)},e.prototype.remove=function(){NX(this)},e.type="singleAxis",e})(L0),gAe={splitLine:function(a,e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitLine"),l=o.getModel("lineStyle"),c=l.get("color");c=c instanceof Array?c:[c];for(var d=l.get("width"),u=r.coordinateSystem.getRect(),h=i.isHorizontal(),f=[],p=0,g=i.getTicksCoords({tickModel:o,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),b=[],w=[],_=0;_<g.length;++_){var k=i.toGlobalCoord(g[_].coord);h?(b[0]=k,b[1]=u.y,w[0]=k,w[1]=u.y+u.height):(b[0]=u.x,b[1]=k,w[0]=u.x+u.width,w[1]=k);var T=new qn({shape:{x1:b[0],y1:b[1],x2:w[0],y2:w[1]},silent:!0});Cx(T.shape,d);var D=p++%c.length;f[D]=f[D]||[],f[D].push(T)}for(var I=l.getLineStyle(["color"]),_=0;_<f.length;++_)e.add(Ko(f[_],{style:Kt({stroke:c[_%c.length]},I),silent:!0}))}},splitArea:function(a,e,t,r,n){_X(a,t,r,r)},breakArea:function(a,e,t,r,n){var i=Ub(),o=r.axis.scale;i&&o.type!=="ordinal"&&i.rectCoordBuildBreakAxis(e,a,r,r.coordinateSystem.getRect(),n)}},Qw=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}},jitter:0,jitterOverlap:!0,jitterMargin:2},e})(Oa);ti(Qw,Bb.prototype);var vAe=(function(a){Le(e,a);function e(t,r,n,i,o){var l=a.call(this,t,r,n)||this;return l.type=i||"value",l.position=o||"bottom",l}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.pointToData=function(t,r){return this.coordinateSystem.pointToData(t)[0]},e})(Ll),sK=["single"],bAe=(function(){function a(e,t,r){this.type="single",this.dimension="single",this.dimensions=sK,this.axisPointerEnabled=!0,this.model=e,this._init(e,t,r)}return a.prototype._init=function(e,t,r){var n=this.dimension,i=new vAe(n,MN(e),[0,0],e.get("type"),e.get("position")),o=i.type==="category";i.onBand=o&&e.get("boundaryGap"),i.inverse=e.get("inverse"),i.orient=e.get("orient"),e.axis=i,i.model=e,i.coordinateSystem=this,this._axis=i},a.prototype.update=function(e,t){e.eachSeries(function(r){if(r.coordinateSystem===this){var n=r.getData();oe(n.mapDimensionsAll(this.dimension),function(i){this._axis.scale.unionExtentFromData(n,i)},this),Ex(this._axis.scale,this._axis.model)}},this)},a.prototype.resize=function(e,t){var r=pi(e,t).refContainer;this._rect=ln(e.getBoxLayoutParams(),r),this._adjustAxis()},a.prototype.getRect=function(){return this._rect},a.prototype._adjustAxis=function(){var e=this._rect,t=this._axis,r=t.isHorizontal(),n=r?[0,e.width]:[0,e.height],i=t.inverse?1:0;t.setExtent(n[i],n[1-i]),this._updateAxisTransform(t,r?e.x:e.y)},a.prototype._updateAxisTransform=function(e,t){var r=e.getExtent(),n=r[0]+r[1],i=e.isHorizontal();e.toGlobalCoord=i?function(o){return o+t}:function(o){return n-o+t},e.toLocalCoord=i?function(o){return o-t}:function(o){return n-o+t}},a.prototype.getAxis=function(){return this._axis},a.prototype.getBaseAxis=function(){return this._axis},a.prototype.getAxes=function(){return[this._axis]},a.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},a.prototype.containPoint=function(e){var t=this.getRect(),r=this.getAxis(),n=r.orient;return n==="horizontal"?r.contain(r.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:r.contain(r.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},a.prototype.pointToData=function(e,t,r){r=r||[];var n=this.getAxis();return r[0]=n.coordToData(n.toLocalCoord(e[n.orient==="horizontal"?0:1])),r},a.prototype.dataToPoint=function(e,t,r){var n=this.getAxis(),i=this.getRect();r=r||[];var o=n.orient==="horizontal"?0:1;return e instanceof Array&&(e=e[0]),r[o]=n.toGlobalCoord(n.dataToCoord(+e)),r[1-o]=o===0?i.y+i.height/2:i.x+i.width/2,r},a.prototype.convertToPixel=function(e,t,r){var n=Fz(t);return n===this?this.dataToPoint(r):null},a.prototype.convertFromPixel=function(e,t,r){var n=Fz(t);return n===this?this.pointToData(r):null},a})();function Fz(a){var e=a.seriesModel,t=a.singleAxisModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function yAe(a,e){var t=[];return a.eachComponent("singleAxis",function(r,n){var i=new bAe(r,a,e);i.name="single_"+n,i.resize(r,e),r.coordinateSystem=i,t.push(i)}),a.eachSeries(function(r){if(r.get("coordinateSystem")==="singleAxis"){var n=r.getReferringComponents("singleAxis",yn).models[0];r.coordinateSystem=n&&n.coordinateSystem}}),t}var wAe={create:yAe,dimensions:sK},Vz=["x","y"],_Ae=["width","height"],NAe=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,n,i,o){var l=n.axis,c=l.coordinateSystem,d=uC(c,1-y_(l)),u=c.dataToPoint(r)[0],h=i.get("type");if(h&&h!=="none"){var f=NE(i),p=jAe[h](l,u,d);p.style=f,t.graphicKey=p.type,t.pointer=p}var g=dA(n);JZ(r,t,g,n,i,o)},e.prototype.getHandleTransform=function(t,r,n){var i=dA(r,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var o=jE(r.axis,t,i);return{x:o[0],y:o[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,n,i){var o=n.axis,l=o.coordinateSystem,c=y_(o),d=uC(l,c),u=[t.x,t.y];u[c]+=r[c],u[c]=Math.min(d[1],u[c]),u[c]=Math.max(d[0],u[c]);var h=uC(l,1-c),f=(h[1]+h[0])/2,p=[f,f];return p[c]=u[c],{x:u[0],y:u[1],rotation:t.rotation,cursorPoint:p,tooltipOption:{verticalAlign:"middle"}}},e})(_E),jAe={line:function(a,e,t){var r=SE([e,t[0]],[e,t[1]],y_(a));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(a,e,t){var r=a.getBandWidth(),n=t[1]-t[0];return{type:"Rect",shape:eK([e-r/2,t[0]],[r,n],y_(a))}}};function y_(a){return a.isHorizontal()?0:1}function uC(a,e){var t=a.getRect();return[t[Vz[e]],t[Vz[e]]+t[_Ae[e]]]}var SAe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="single",e})(tn);function kAe(a){Sa(Gb),L0.registerAxisPointerClass("SingleAxisPointer",NAe),a.registerComponentView(SAe),a.registerComponentView(mAe),a.registerComponentModel(Qw),Rx(a,"single",Qw,Qw.defaultOption),a.registerCoordinateSystem("single",wAe)}var CAe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,n){var i=E0(t);a.prototype.init.apply(this,arguments),Hz(t,i)},e.prototype.mergeOption=function(t){a.prototype.mergeOption.apply(this,arguments),Hz(this.option,t)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.layoutMode="box",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:Fe.color.axisLine,width:1,type:"solid"}},itemStyle:{color:Fe.color.neutral00,borderWidth:1,borderColor:Fe.color.neutral10},dayLabel:{show:!0,firstDay:0,position:"start",margin:Fe.size.s,color:Fe.color.secondary},monthLabel:{show:!0,position:"start",margin:Fe.size.s,align:"center",formatter:null,color:Fe.color.secondary},yearLabel:{show:!0,position:null,margin:Fe.size.xl,formatter:null,color:Fe.color.quaternary,fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e})(Oa);function Hz(a,e){var t=a.cellSize,r;rt(t)?r=t:r=a.cellSize=[t,t],r.length===1&&(r[1]=r[0]);var n=it([0,1],function(i){return fbe(e,i)&&(r[i]="auto"),r[i]!=null&&r[i]!=="auto"});Mc(a,e,{type:"box",ignoreSize:n})}var AAe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=this.group;i.removeAll();var o=t.coordinateSystem,l=o.getRangeInfo(),c=o.getOrient(),d=r.getLocaleModel();this._renderDayRect(t,l,i),this._renderLines(t,l,c,i),this._renderYearText(t,l,c,i),this._renderMonthText(t,d,c,i),this._renderWeekText(t,d,l,c,i)},e.prototype._renderDayRect=function(t,r,n){for(var i=t.coordinateSystem,o=t.getModel("itemStyle").getItemStyle(),l=i.getCellWidth(),c=i.getCellHeight(),d=r.start.time;d<=r.end.time;d=i.getNextNDay(d,1).time){var u=i.dataToCalendarLayout([d],!1).tl,h=new Ta({shape:{x:u[0],y:u[1],width:l,height:c},cursor:"default",style:o});n.add(h)}},e.prototype._renderLines=function(t,r,n,i){var o=this,l=t.coordinateSystem,c=t.getModel(["splitLine","lineStyle"]).getLineStyle(),d=t.get(["splitLine","show"]),u=c.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var h=r.start,f=0;h.time<=r.end.time;f++){g(h.formatedDate),f===0&&(h=l.getDateInfo(r.start.y+"-"+r.start.m));var p=h.date;p.setMonth(p.getMonth()+1),h=l.getDateInfo(p)}g(l.getNextNDay(r.end.time,1).formatedDate);function g(b){o._firstDayOfMonth.push(l.getDateInfo(b)),o._firstDayPoints.push(l.dataToCalendarLayout([b],!1).tl);var w=o._getLinePointsOfOneWeek(t,b,n);o._tlpoints.push(w[0]),o._blpoints.push(w[w.length-1]),d&&o._drawSplitline(w,c,i)}d&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,u,n),c,i),d&&this._drawSplitline(o._getEdgesPoints(o._blpoints,u,n),c,i)},e.prototype._getEdgesPoints=function(t,r,n){var i=[t[0].slice(),t[t.length-1].slice()],o=n==="horizontal"?0:1;return i[0][o]=i[0][o]-r/2,i[1][o]=i[1][o]+r/2,i},e.prototype._drawSplitline=function(t,r,n){var i=new $i({z2:20,shape:{points:t},style:r});n.add(i)},e.prototype._getLinePointsOfOneWeek=function(t,r,n){for(var i=t.coordinateSystem,o=i.getDateInfo(r),l=[],c=0;c<7;c++){var d=i.getNextNDay(o.time,c),u=i.dataToCalendarLayout([d.time],!1);l[2*d.day]=u.tl,l[2*d.day+1]=u[n==="horizontal"?"bl":"tr"]}return l},e.prototype._formatterLabel=function(t,r){return jt(t)&&t?obe(t,r):Ut(t)?t(r):r.nameMap},e.prototype._yearTextPositionControl=function(t,r,n,i,o){var l=r[0],c=r[1],d=["center","bottom"];i==="bottom"?(c+=o,d=["center","top"]):i==="left"?l-=o:i==="right"?(l+=o,d=["center","top"]):c-=o;var u=0;return(i==="left"||i==="right")&&(u=Math.PI/2),{rotation:u,x:l,y:c,style:{align:d[0],verticalAlign:d[1]}}},e.prototype._renderYearText=function(t,r,n,i){var o=t.getModel("yearLabel");if(o.get("show")){var l=o.get("margin"),c=o.get("position");c||(c=n!=="horizontal"?"top":"left");var d=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],u=(d[0][0]+d[1][0])/2,h=(d[0][1]+d[1][1])/2,f=n==="horizontal"?0:1,p={top:[u,d[f][1]],bottom:[u,d[1-f][1]],left:[d[1-f][0],h],right:[d[f][0],h]},g=r.start.y;+r.end.y>+r.start.y&&(g=g+"-"+r.end.y);var b=o.get("formatter"),w={start:r.start.y,end:r.end.y,nameMap:g},_=this._formatterLabel(b,w),k=new Ja({z2:30,style:zr(o,{text:_}),silent:o.get("silent")});k.attr(this._yearTextPositionControl(k,p[c],n,c,l)),i.add(k)}},e.prototype._monthTextPositionControl=function(t,r,n,i,o){var l="left",c="top",d=t[0],u=t[1];return n==="horizontal"?(u=u+o,r&&(l="center"),i==="start"&&(c="bottom")):(d=d+o,r&&(c="middle"),i==="start"&&(l="right")),{x:d,y:u,align:l,verticalAlign:c}},e.prototype._renderMonthText=function(t,r,n,i){var o=t.getModel("monthLabel");if(o.get("show")){var l=o.get("nameMap"),c=o.get("margin"),d=o.get("position"),u=o.get("align"),h=[this._tlpoints,this._blpoints];(!l||jt(l))&&(l&&(r=i3(l)||r),l=r.get(["time","monthAbbr"])||[]);var f=d==="start"?0:1,p=n==="horizontal"?0:1;c=d==="start"?-c:c;for(var g=u==="center",b=o.get("silent"),w=0;w<h[f].length-1;w++){var _=h[f][w].slice(),k=this._firstDayOfMonth[w];if(g){var T=this._firstDayPoints[w];_[p]=(T[p]+h[0][w+1][p])/2}var D=o.get("formatter"),I=l[+k.m-1],O={yyyy:k.y,yy:(k.y+"").slice(2),MM:k.m,M:+k.m,nameMap:I},P=this._formatterLabel(D,O),V=new Ja({z2:30,style:Je(zr(o,{text:P}),this._monthTextPositionControl(_,g,n,d,c)),silent:b});i.add(V)}}},e.prototype._weekTextPositionControl=function(t,r,n,i,o){var l="center",c="middle",d=t[0],u=t[1],h=n==="start";return r==="horizontal"?(d=d+i+(h?1:-1)*o[0]/2,l=h?"right":"left"):(u=u+i+(h?1:-1)*o[1]/2,c=h?"bottom":"top"),{x:d,y:u,align:l,verticalAlign:c}},e.prototype._renderWeekText=function(t,r,n,i,o){var l=t.getModel("dayLabel");if(l.get("show")){var c=t.coordinateSystem,d=l.get("position"),u=l.get("nameMap"),h=l.get("margin"),f=c.getFirstDayOfWeek();if(!u||jt(u)){u&&(r=i3(u)||r);var p=r.get(["time","dayOfWeekShort"]);u=p||it(r.get(["time","dayOfWeekAbbr"]),function(O){return O[0]})}var g=c.getNextNDay(n.end.time,7-n.lweek).time,b=[c.getCellWidth(),c.getCellHeight()];h=_t(h,Math.min(b[1],b[0])),d==="start"&&(g=c.getNextNDay(n.start.time,-(7+n.fweek)).time,h=-h);for(var w=l.get("silent"),_=0;_<7;_++){var k=c.getNextNDay(g,_),T=c.dataToCalendarLayout([k.time],!1).center,D=_;D=Math.abs((_+f)%7);var I=new Ja({z2:30,style:Je(zr(l,{text:u[D]}),this._weekTextPositionControl(T,i,d,h,b)),silent:w});o.add(I)}}},e.type="calendar",e})(tn),hC=864e5,TAe=(function(){function a(e,t,r){this.type="calendar",this.dimensions=a.dimensions,this.getDimensionsInfo=a.getDimensionsInfo,this._model=e,this._update(t,r)}return a.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},a.prototype.getRangeInfo=function(){return this._rangeInfo},a.prototype.getModel=function(){return this._model},a.prototype.getRect=function(){return this._rect},a.prototype.getCellWidth=function(){return this._sw},a.prototype.getCellHeight=function(){return this._sh},a.prototype.getOrient=function(){return this._orient},a.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},a.prototype.getDateInfo=function(e){e=T0(e);var t=e.getFullYear(),r=e.getMonth()+1,n=r<10?"0"+r:""+r,i=e.getDate(),o=i<10?"0"+i:""+i,l=e.getDay();return l=Math.abs((l+7-this.getFirstDayOfWeek())%7),{y:t+"",m:n,d:o,day:l,time:e.getTime(),formatedDate:t+"-"+n+"-"+o,date:e}},a.prototype.getNextNDay=function(e,t){return t=t||0,t===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+t),this.getDateInfo(e))},a.prototype._update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,n=["width","height"],i=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),l=this._orient==="horizontal"?[r,7]:[7,r];oe([0,1],function(h){u(i,h)&&(o[n[h]]=i[h]*l[h])});var c={width:t.getWidth(),height:t.getHeight()},d=this._rect=ln(o,c);oe([0,1],function(h){u(i,h)||(i[h]=d[n[h]]/l[h])});function u(h,f){return h[f]!=null&&h[f]!=="auto"}this._sw=i[0],this._sh=i[1]},a.prototype.dataToPoint=function(e,t,r){r=r||[],rt(e)&&(e=e[0]),t==null&&(t=!0);var n=this.getDateInfo(e),i=this._rangeInfo,o=n.formatedDate;if(t&&!(n.time>=i.start.time&&n.time<i.end.time+hC))return r[0]=r[1]=NaN,r;var l=n.day,c=this._getRangeInfo([i.start.time,o]).nthWeek;return this._orient==="vertical"?(r[0]=this._rect.x+l*this._sw+this._sw/2,r[1]=this._rect.y+c*this._sh+this._sh/2):(r[0]=this._rect.x+c*this._sw+this._sw/2,r[1]=this._rect.y+l*this._sh+this._sh/2),r},a.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},a.prototype.dataToLayout=function(e,t,r){r=r||{};var n=r.rect=r.rect||{},i=r.contentRect=r.contentRect||{},o=this.dataToPoint(e,t);return n.x=o[0]-this._sw/2,n.y=o[1]-this._sh/2,n.width=this._sw,n.height=this._sh,Jt.copy(i,n),w0(i,this._lineWidth/2,!0,!0),r},a.prototype.dataToCalendarLayout=function(e,t){var r=this.dataToPoint(e,t);return{center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},a.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,r=Math.floor((e[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(r,t-1,n):this._getDateByWeeksAndDay(t,r-1,n)},a.prototype.convertToPixel=function(e,t,r){var n=fC(t);return n===this?n.dataToPoint(r):null},a.prototype.convertToLayout=function(e,t,r){var n=fC(t);return n===this?n.dataToLayout(r):null},a.prototype.convertFromPixel=function(e,t,r){var n=fC(t);return n===this?n.pointToData(r):null},a.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},a.prototype._initRangeOption=function(){var e=this._model.get("range"),t;if(rt(e)&&e.length===1&&(e=e[0]),rt(e))t=e;else{var r=e.toString();if(/^\d{4}$/.test(r)&&(t=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var n=this.getDateInfo(r),i=n.date;i.setMonth(i.getMonth()+1);var o=this.getNextNDay(i,-1);t=[n.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(t=[r,r])}if(!t)return e;var l=this._getRangeInfo(t);return l.start.time>l.end.time&&t.reverse(),t},a.prototype._getRangeInfo=function(e){var t=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],r;t[0].time>t[1].time&&(r=!0,t.reverse());var n=Math.floor(t[1].time/hC)-Math.floor(t[0].time/hC)+1,i=new Date(t[0].time),o=i.getDate(),l=t[1].date.getDate();i.setDate(o+n-1);var c=i.getDate();if(c!==l)for(var d=i.getTime()-t[1].time>0?1:-1;(c=i.getDate())!==l&&(i.getTime()-t[1].time)*d>0;)n-=d,i.setDate(c-d);var u=Math.floor((n+t[0].day+6)/7),h=r?-u+1:u-1;return r&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:n,weeks:u,nthWeek:h,fweek:t[0].day,lweek:t[1].day}},a.prototype._getDateByWeeksAndDay=function(e,t,r){var n=this._getRangeInfo(r);if(e>n.weeks||e===0&&t<n.fweek||e===n.weeks&&t>n.lweek)return null;var i=(e-1)*7-n.fweek+t,o=new Date(n.start.time);return o.setDate(+n.start.d+i),this.getDateInfo(o)},a.create=function(e,t){var r=[];return e.eachComponent("calendar",function(n){var i=new a(n,e,t);r.push(i),n.coordinateSystem=i}),e.eachComponent(function(n,i){Lb({targetModel:i,coordSysType:"calendar",coordSysProvider:k$})}),r},a.dimensions=["time","value"],a})();function fC(a){var e=a.calendarModel,t=a.seriesModel,r=e?e.coordinateSystem:t?t.coordinateSystem:null;return r}function MAe(a){a.registerComponentModel(CAe),a.registerComponentView(AAe),a.registerCoordinateSystem("calendar",TAe)}var yd={level:1,leaf:2,nonLeaf:3},Md={none:0,all:1,body:2,corner:3};function uA(a,e,t){var r=e[da[t]].getCell(a);return!r&&Xa(a)&&a<0&&(r=e[da[1-t]].getUnitLayoutInfo(t,Math.round(a))),r}function oK(a){var e=a||[];return e[0]=e[0]||[],e[1]=e[1]||[],e[0][0]=e[0][1]=e[1][0]=e[1][1]=NaN,e}function lK(a,e,t,r,n){Uz(a[0],e,n,t,r,0),Uz(a[1],e,n,t,r,1)}function Uz(a,e,t,r,n,i){a[0]=1/0,a[1]=-1/0;var o=r[i],l=rt(o)?o:[o],c=l.length,d=!!t;if(c>=1?(Gz(a,e,l,d,n,i,0),c>1&&Gz(a,e,l,d,n,i,c-1)):a[0]=a[1]=NaN,d){var u=-n[da[1-i]].getLocatorCount(i),h=n[da[i]].getLocatorCount(i)-1;t===Md.body?u=Pn(0,u):t===Md.corner&&(h=jo(-1,h)),h<u&&(u=h=NaN),ss(a[0])&&(a[0]=u),ss(a[1])&&(a[1]=h),a[0]=Pn(jo(a[0],h),u),a[1]=Pn(jo(a[1],h),u)}}function Gz(a,e,t,r,n,i,o){var l=uA(t[o],n,i);if(!l){a[0]=a[1]=NaN;return}var c=l.id[da[i]],d=c,u=RAe(l);u&&(d+=u.span[da[i]]-1),a[0]=jo(a[0],c,d),a[1]=Pn(a[1],c,d)}function dw(a,e){return ss(a[e][0])||ss(a[e][1])}function Wz(a,e,t,r){e=e||EAe;for(var n=0;n<r;n++)e[n]=!1;for(;;){for(var i=!1,n=0;n<r;n++){var o=t[n];!e[n]&&o.cellMergeOwner&&DAe(a,o.locatorRange)&&(e[n]=!0,i=!0)}if(!i)break}}var EAe=[];function DAe(a,e){return!$z(a[0],e[0])||!$z(a[1],e[1])?!1:(a[0][0]=jo(a[0][0],e[0][0]),a[0][1]=Pn(a[0][1],e[0][1]),a[1][0]=jo(a[1][0],e[1][0]),a[1][1]=Pn(a[1][1],e[1][1]),!0)}function $z(a,e){return a[1]>=e[0]&&a[0]<=e[1]}function Yz(a,e){a.id.set(e[0][0],e[1][0]),a.span.set(e[0][1]-a.id.x+1,e[1][1]-a.id.y+1)}function IAe(a,e){a[0][0]=e[0][0],a[0][1]=e[0][1],a[1][0]=e[1][0],a[1][1]=e[1][1]}function qz(a,e,t,r){var n=uA(e[r][0],t,r),i=uA(e[r][1],t,r);a[da[r]]=a[Qn[r]]=NaN,n&&i&&(a[da[r]]=n.xy,a[Qn[r]]=i.xy+i.wh-n.xy)}function vg(a,e,t,r){return a[da[e]]=t,a[da[1-e]]=r,a}function RAe(a){return a&&(a.type===yd.leaf||a.type===yd.nonLeaf)?a:null}function w_(){return{x:NaN,y:NaN,width:NaN,height:NaN}}var Xz=(function(){function a(e,t){this._cells=[],this._levels=[],this.dim=e,this.dimIdx=e==="x"?0:1,this._model=t,this._uniqueValueGen=LAe(e);var r=t.get("data",!0);r!=null&&!rt(r)&&(r=[]),r?this._initByDimModelData(r):this._initBySeriesData()}return a.prototype._initByDimModelData=function(e){var t=this,r=t._cells,n=t._levels,i=[],o=0;t._leavesCount=l(e,0,0),c();return;function l(d,u,h){var f=0;return d&&oe(d,function(p,g){var b;jt(p)?b={value:p}:Qt(p)?(b=p,p.value!=null&&!jt(p.value)&&(b={value:null})):b={value:null};var w={type:yd.nonLeaf,ordinal:NaN,level:h,firstLeafLocator:u,id:new Xt,span:vg(new Xt,t.dimIdx,1,1),option:b,xy:NaN,wh:NaN,dim:t,rect:w_()};o++,(i[u]||(i[u]=[])).push(w),n[h]||(n[h]={type:yd.level,xy:NaN,wh:NaN,option:null,id:new Xt,dim:t});var _=l(b.children,u,h+1),k=Math.max(1,_);w.span[da[t.dimIdx]]=k,f+=k,u+=k}),f}function c(){for(var d=[];r.length<o;)for(var u=0;u<i.length;u++){var h=i[u].pop();if(h){h.ordinal=d.length;var f=h.option.value;d.push(f),r.push(h),t._uniqueValueGen.calcDupBase(f)}}t._uniqueValueGen.ensureValueUnique(d,r);var p=t._ordinalMeta=new eb({categories:d,needCollect:!1,deduplication:!1});t._scale=new Mx({ordinalMeta:p});for(var g=0;g<t._leavesCount;g++){var b=t._cells[g];b.type=yd.leaf,b.span[da[1-t.dimIdx]]=t._levels.length-b.level}t._initCellsId(),t._initLevelIdOptions()}},a.prototype._initBySeriesData=function(){var e=this;e._leavesCount=0,e._levels=[{type:yd.level,xy:NaN,wh:NaN,option:null,id:new Xt,dim:e}],e._initLevelIdOptions();var t=e._ordinalMeta=new eb({needCollect:!0,deduplication:!0,onCollect:function(r,n){var i=e._cells[n]={type:yd.leaf,ordinal:n,level:0,firstLeafLocator:n,id:new Xt,span:vg(new Xt,e.dimIdx,1,1),option:{value:r+""},xy:NaN,wh:NaN,dim:e,rect:w_()};e._leavesCount++,e._setCellId(i)}});e._scale=new Mx({ordinalMeta:t})},a.prototype._setCellId=function(e){var t=this._levels.length,r=this.dimIdx;vg(e.id,r,e.firstLeafLocator,e.level-t)},a.prototype._initCellsId=function(){var e=this._levels.length,t=this.dimIdx;oe(this._cells,function(r){vg(r.id,t,r.firstLeafLocator,r.level-e)})},a.prototype._initLevelIdOptions=function(){var e=this._levels.length,t=this.dimIdx,r=this._model.get("levels",!0);r=rt(r)?r:[],oe(this._levels,function(n,i){vg(n.id,t,0,i-e),n.option=r[i]})},a.prototype.shouldShow=function(){return!!this._model.getShallow("show",!0)},a.prototype.resetLayoutIterator=function(e,t,r,n){if(e=e||new lh,t===this.dimIdx){var i=this._leavesCount,o=r!=null?Math.max(0,r):0;n=n!=null?Math.min(n,i):i,e.reset(this._cells,o,o+n)}else{var i=this._levels.length,o=r!=null?Math.max(0,r+i):0;n=n!=null?Math.min(n,i):i,e.reset(this._levels,o,o+n)}return e},a.prototype.resetCellIterator=function(e){return(e||new lh).reset(this._cells,0)},a.prototype.resetLevelIterator=function(e){return(e||new lh).reset(this._levels,0)},a.prototype.getLayout=function(e,t,r){var n=this.getUnitLayoutInfo(t,r);e[da[t]]=n?n.xy:NaN,e[Qn[t]]=n?n.wh:NaN},a.prototype.getUnitLayoutInfo=function(e,t){return e===this.dimIdx?t<this._leavesCount?this._cells[t]:void 0:this._levels[t+this._levels.length]},a.prototype.getCell=function(e){var t=this._scale.parse(e);return ss(t)?void 0:this._cells[t]},a.prototype.getLocatorCount=function(e){return e===this.dimIdx?this._leavesCount:this._levels.length},a.prototype.getOrdinalMeta=function(){return this._ordinalMeta},a})();function LAe(a){var e=a.toUpperCase(),t=new RegExp("^"+e+"([0-9]+)$"),r=0;function n(l){var c;l!=null&&(c=l.match(t))&&(r=Pn(r,+c[1]+1))}function i(){return""+e+r++}function o(l,c){for(var d=Rt(),u=0;u<l.length;u++){var h=l[u];(h==null||d.get(h)!=null)&&(l[u]=h=i(),c[u].option=Kt({value:h},c[u].option)),d.set(h,!0)}}return{calcDupBase:n,ensureValueUnique:o}}var Zz=(function(){function a(e,t,r){this._model=t,this._dims=r,this._kind=e,this._cellMergeOwnerList=[]}return a.prototype._ensureCellMap=function(){var e=this,t=e._cellMap;return t||(t=e._cellMap=Rt(),r()),t;function r(){var i=[],o=e._model.getShallow("data");o&&!rt(o)&&(o=null),oe(o,function(g,b){if(!(!Qt(g)||!rt(g.coord))){var w=oK([]),_=null;if(lK(w,_,g.coord,e._dims,g.coordClamp?Md[e._kind]:Md.none),!(dw(w,0)||dw(w,1))){var k=g&&g.mergeCells,T={id:new Xt,span:new Xt,locatorRange:w,option:g,cellMergeOwner:k};Yz(T,w),i.push(T)}}});for(var l=[],c=0;c<i.length;c++){var d=i[c];if(d.cellMergeOwner){var u=d.locatorRange;Wz(u,l,i,c);for(var h=0;h<c;h++)l[h]&&(i[h].cellMergeOwner=!1);if(u[0][0]!==d.id.x||u[1][0]!==d.id.y){d.cellMergeOwner=!1;var f=Je({},d.option);f.coord=null;var p={id:new Xt,span:new Xt,locatorRange:u,option:f,cellMergeOwner:!0};Yz(p,u),i.push(p)}}}oe(i,function(g){var b=n(g.id.x,g.id.y);if(g.cellMergeOwner&&(b.cellMergeOwner=!0,b.span=g.span,b.locatorRange=g.locatorRange,b.spanRect=w_(),e._cellMergeOwnerList.push(b)),!(!g.cellMergeOwner&&!g.option))for(var w=0;w<g.span.y;w++)for(var _=0;_<g.span.x;_++){var k=n(g.id.x+_,g.id.y+w);k.option=g.option,g.cellMergeOwner&&(k.inSpanOf=b)}})}function n(i,o){var l=Kz(i,o),c=t.get(l);return c||(c=t.set(l,{id:new Xt(i,o),option:null,inSpanOf:null,span:null,spanRect:null,locatorRange:null,cellMergeOwner:!1})),c}},a.prototype.getCell=function(e){return this._ensureCellMap().get(Kz(e[0],e[1]))},a.prototype.travelExistingCells=function(e){this._ensureCellMap().each(e)},a.prototype.expandRangeByCellMerge=function(e){if(!dw(e,0)&&!dw(e,1)&&e[0][0]===e[0][1]&&e[1][0]===e[1][1]){pC[0]=e[0][0],pC[1]=e[1][0];var t=this.getCell(pC),r=t&&t.inSpanOf;if(r){IAe(e,r.locatorRange);return}}var n=this._cellMergeOwnerList;Wz(e,null,n,n.length)},a})(),pC=[];function Kz(a,e){return a+"|"+e}var TE={show:!0,color:Fe.color.secondary,overflow:"break",lineOverflow:"truncate",padding:[2,3,2,3],distance:0};function ME(a){return{color:"none",borderWidth:1,borderColor:a?"none":Fe.color.borderTint}}var Qz={show:!0,label:TE,itemStyle:ME(!1),silent:void 0,dividerLineStyle:{width:1,color:Fe.color.border}},OAe={label:TE,itemStyle:ME(!1),silent:void 0},PAe={label:TE,itemStyle:ME(!0),silent:void 0},BAe={z:-50,left:"10%",top:"10%",right:"10%",bottom:"10%",x:Qz,y:Qz,body:OAe,corner:PAe,backgroundStyle:{color:"none",borderColor:Fe.color.axisLine,borderWidth:1}},zAe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){var t=this._dimModels={x:new Jz(this.get("x",!0)||{}),y:new Jz(this.get("y",!0)||{})};t.x.option.type=t.y.option.type="category";var r=t.x.dim=new Xz("x",t.x),n=t.y.dim=new Xz("y",t.y),i={x:r,y:n};this._body=new Zz("body",new za(this.getShallow("body")),i),this._corner=new Zz("corner",new za(this.getShallow("corner")),i)},e.prototype.getDimensionModel=function(t){return this._dimModels[t]},e.prototype.getBody=function(){return this._body},e.prototype.getCorner=function(){return this._corner},e.type="matrix",e.layoutMode="box",e.defaultOption=BAe,e})(Oa),Jz=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getOrdinalMeta=function(){return this.dim.getOrdinalMeta()},e})(za),uw=Math.round,FAe=0,VAe=99,HAe={normal:25,special:100},UAe={normal:50,special:125},GAe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r){this.group.removeAll();var n=this.group,i=t.coordinateSystem,o=i.getRect(),l=t.getDimensionModel("x"),c=t.getDimensionModel("y"),d=l.dim,u=c.dim;WAe(n,t,r),$Ae(n,t,d,u,r);var h=t.getShallow("borderZ2",!0),f=Pt(h,VAe),p=f-1,g=t.getModel("backgroundStyle").getItemStyle(["borderWidth"]);g.lineWidth=0;var b=t.getModel("backgroundStyle").getItemStyle(["color","decal","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]);b.fill="none";var w=hA(o.clone(),g,FAe),_=hA(o.clone(),b,f);w.silent=!0,_.silent=!0,n.add(w),n.add(_);var k=d.getUnitLayoutInfo(0,0),T=u.getUnitLayoutInfo(1,0);k&&T&&(d.shouldShow()&&n.add(eF({x1:o.x,y1:T.xy,x2:o.x+o.width,y2:T.xy},l.getModel("dividerLineStyle").getLineStyle(),p)),u.shouldShow()&&n.add(eF({x1:k.xy,y1:o.y,x2:k.xy,y2:o.y+o.height},c.getModel("dividerLineStyle").getLineStyle(),p)))},e.type="matrix",e})(tn);function WAe(a,e,t){r(0),r(1);function r(n){var i=e.getDimensionModel(da[n]),o=i.dim;if(o.shouldShow())for(var l=i.getModel("itemStyle"),c=i.getModel("label"),d=e.getShallow("tooltip",!0),u=[],h=o.resetCellIterator();h.next();){var f=h.item,p={};Jt.copy(p,f.rect),MT(u,f.id.x,f.id.y),cK(u,e,a,t,f.option,l,c,i,p,f.option.value,UAe,d)}}}function $Ae(a,e,t,r,n){i("body",e.getBody(),t,r),t.shouldShow()&&r.shouldShow()&&i("corner",e.getCorner(),r,t);function i(o,l,c,d){var u=new za(e.getShallow(o,!0)),h=u.getModel("itemStyle"),f=u.getModel("label"),p=new lh,g=new lh,b=[],w=e.getShallow("tooltip",!0);for(d.resetLayoutIterator(g,1);g.next();)for(c.resetLayoutIterator(p,0);p.next();){var _=p.item,k=g.item;MT(b,_.id.x,k.id.y);var T=l.getCell(b);if(!(T&&T.inSpanOf&&T.inSpanOf!==T)){var D={};T&&T.span?Jt.copy(D,T.spanRect):(_.dim.getLayout(D,0,b[0]),k.dim.getLayout(D,1,b[1]));var I=T?T.option:null;cK(b,e,a,n,I,h,f,u,D,I?I.value:null,HAe,w)}}}}function cK(a,e,t,r,n,i,o,l,c,d,u,h){var f;hw.option=n?n.itemStyle:null,hw.parentModel=i,Rp.option=n,Rp.parentModel=l;var p=Pt(Rp.getShallow("z2"),n&&n.itemStyle?u.special:u.normal),g=h&&h.show,b=hA(c,hw.getItemStyle(),p);t.add(b);var w=Rp.get("cursor");w!=null&&b.attr("cursor",w);var _;if(d!=null){var k=d+"";if(Lp.option=n?n.label:null,Lp.parentModel=o,Lp.ecModel=r,ji(b,{normal:Lp},{defaultText:k,autoOverflowArea:!0,layoutRect:$t(b.shape)}),_=b.getTextContent(),_){_.z2=p+1;var T=_.style;if(T&&T.overflow&&T.overflow!=="none"&&T.lineOverflow){var D={};Jt.copy(D,c),w0(D,(((f=b.style)===null||f===void 0?void 0:f.lineWidth)||0)/2,!0,!0),b.updateInnerText(),_.getLocalTransform(fw),Cl(fw,fw),Jt.applyTransform(D,D,fw),_.setClipPath(new Ta({shape:D}))}}Gd({el:b,componentModel:e,itemName:k,itemTooltipOption:h,formatterParamsExtra:{xyLocator:a.slice()}})}if(_){var I=Lp.get("silent");I==null&&(I=!g),_.silent=I,_.ignoreHostSilent=!0}var O=Rp.get("silent");O==null&&(O=!b.style||b.style.fill==="none"||!b.style.fill),b.silent=O,Ck(Rp),Ck(hw),Ck(Lp)}var Rp=new za,hw=new za,Lp=new za,fw=[];function hA(a,e,t){var r=e.lineWidth;if(r){var n=a.x+a.width,i=a.y+a.height;a.x=_o(a.x,r,!0),a.y=_o(a.y,r,!0),a.width=_o(n,r,!0)-a.x,a.height=_o(i,r,!0)-a.y}return new Ta({shape:a,style:e,z2:t})}function eF(a,e,t){var r=e.lineWidth;return r&&(uw(a.x1*2)===uw(a.x2*2)&&(a.x1=a.x2=_o(a.x1,r,!0)),uw(a.y1*2)===uw(a.y2*2)&&(a.y1=a.y2=_o(a.y1,r,!0))),new qn({shape:a,style:e,silent:!0,z2:t})}var YAe=(function(){function a(e,t,r){this.dimensions=a.dimensions,this.type="matrix",this._model=e;var n=this._dimModels={x:e.getDimensionModel("x"),y:e.getDimensionModel("y")};this._dims={x:n.x.dim,y:n.y.dim},this._resize(e,r)}return a.getDimensionsInfo=function(){return[{name:"x",type:"ordinal"},{name:"y",type:"ordinal"},{name:"value"}]},a.create=function(e,t){var r=[];return e.eachComponent("matrix",function(n){var i=new a(n,e,t);r.push(i),n.coordinateSystem=i}),e.eachComponent(function(n,i){Lb({targetModel:i,coordSysType:"matrix",coordSysProvider:k$})}),r},a.prototype.getRect=function(){return this._rect},a.prototype._resize=function(e,t){var r=this._dims,n=this._dimModels,i=this._rect=ln(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()});tF(n,r,i,0),tF(n,r,i,1),aF(0,r),aF(1,r),rF(this._model.getBody(),r),rF(this._model.getCorner(),r)},a.prototype.dataToPoint=function(e,t,r){return r=r||[],this.dataToLayout(e,t,bg),r[0]=bg.rect.x+bg.rect.width/2,r[1]=bg.rect.y+bg.rect.height/2,r},a.prototype.dataToLayout=function(e,t,r){var n=this._dims;r=r||{};var i=r.rect=r.rect||{};i.x=i.y=i.width=i.height=NaN;var o=r.matrixXYLocatorRange=oK(r.matrixXYLocatorRange);return rt(e)&&(lK(o,null,e,n,Pt(t&&t.clamp,Md.none)),(!t||!t.ignoreMergeCells)&&((!t||t.clamp!==Md.corner)&&this._model.getBody().expandRangeByCellMerge(o),(!t||t.clamp!==Md.body)&&this._model.getCorner().expandRangeByCellMerge(o)),qz(i,o,n,0),qz(i,o,n,1)),r},a.prototype.pointToData=function(e,t,r){var n=this._dims;return nF(Jl,0,n,e,t&&t.clamp),nF(Jl,1,n,e,t&&t.clamp),r=r||[],r[0]=r[1]=NaN,Jl.y===Ui.inCorner&&Jl.x===Ui.inBody?iF(Jl,r,0,n):Jl.x===Ui.inCorner&&Jl.y===Ui.inBody?iF(Jl,r,1,n):(sF(Jl,r,0,n),sF(Jl,r,1,n)),r},a.prototype.convertToPixel=function(e,t,r,n){var i=mC(t);return i===this?i.dataToPoint(r,n):void 0},a.prototype.convertToLayout=function(e,t,r,n){var i=mC(t);return i===this?i.dataToLayout(r,n):void 0},a.prototype.convertFromPixel=function(e,t,r,n){var i=mC(t);return i===this?i.pointToData(r,n):void 0},a.prototype.containPoint=function(e){return this._rect.contain(e[0],e[1])},a.dimensions=["x","y","value"],a})(),bg={rect:w_()},pw=new lh,xC=new lh;function tF(a,e,t,r){for(var n=1-r,i=e[da[r]],o=e[da[n]],l=o.shouldShow(),c=i.resetCellIterator();c.next();)c.item.wh=c.item.xy=NaN;for(var d=o.resetLayoutIterator(null,r);d.next();)d.item.wh=d.item.xy=NaN;for(var u=t[Qn[r]],h=i.getLocatorCount(r)+o.getLocatorCount(r),f=new za,p=o.resetLevelIterator();p.next();)f.option=p.item.option,f.parentModel=a[da[n]],w(p.item,l?f.get("levelSize"):0);for(var g=new za,b=i.resetCellIterator();b.next();)b.item.type===yd.leaf&&(g.option=b.item.option,g.parentModel=void 0,w(b.item,g.get("size")));function w(P,V){var G=qAe(V,r,t);ss(G)||(P.wh=fA(G,u),u=fA(u-P.wh),h--)}var _=h?u/h:0,k=!h&&u>=1,T=t[da[r]],D=i.getLocatorCount(r)-1,I=new lh;for(o.resetLayoutIterator(I,r);I.next();)O(I.item);for(i.resetLayoutIterator(I,r);I.next();)O(I.item);function O(P){ss(P.wh)&&(P.wh=_),P.xy=T,P.id[da[r]]===D&&!k&&(P.wh=t[da[r]]+t[Qn[r]]-P.xy),T+=P.wh}}function aF(a,e){for(var t=e[da[a]].resetCellIterator();t.next();){var r=t.item;__(r.rect,a,r.id,r.span,e),__(r.rect,1-a,r.id,r.span,e),r.type===yd.nonLeaf&&(r.xy=r.rect[da[a]],r.wh=r.rect[Qn[a]])}}function rF(a,e){a.travelExistingCells(function(t){var r=t.span;if(r){var n=t.spanRect,i=t.id;__(n,0,i,r,e),__(n,1,i,r,e)}})}function __(a,e,t,r,n){a[Qn[e]]=0;var i=t[da[e]],o=i<0?n[da[1-e]]:n[da[e]],l=o.getUnitLayoutInfo(e,t[da[e]]);if(a[da[e]]=l.xy,a[Qn[e]]=l.wh,r[da[e]]>1){var c=o.getUnitLayoutInfo(e,t[da[e]]+r[da[e]]-1);a[Qn[e]]=c.xy+c.wh-l.xy}}function qAe(a,e,t){var r=P2(a,t[Qn[e]]);return fA(r,t[Qn[e]])}function fA(a,e){return Math.max(Math.min(a,Pt(e,1/0)),0)}function mC(a){var e=a.matrixModel,t=a.seriesModel,r=e?e.coordinateSystem:t?t.coordinateSystem:null;return r}var Ui={inBody:1,inCorner:2,outside:3},Jl={x:null,y:null,point:[]};function nF(a,e,t,r,n){var i=t[da[e]],o=t[da[1-e]],l=i.getUnitLayoutInfo(e,i.getLocatorCount(e)-1),c=i.getUnitLayoutInfo(e,0),d=o.getUnitLayoutInfo(e,-o.getLocatorCount(e)),u=o.shouldShow()?o.getUnitLayoutInfo(e,-1):null,h=a.point[e]=r[e];if(!c&&!u){a[da[e]]=Ui.outside;return}if(n===Md.body){c?(a[da[e]]=Ui.inBody,h=jo(l.xy+l.wh,Pn(c.xy,h)),a.point[e]=h):a[da[e]]=Ui.outside;return}else if(n===Md.corner){u?(a[da[e]]=Ui.inCorner,h=jo(u.xy+u.wh,Pn(d.xy,h)),a.point[e]=h):a[da[e]]=Ui.outside;return}var f=c?c.xy:u?u.xy+u.wh:NaN,p=d?d.xy:f,g=l?l.xy+l.wh:f;if(h<p){if(!n){a[da[e]]=Ui.outside;return}h=p}else if(h>g){if(!n){a[da[e]]=Ui.outside;return}h=g}a.point[e]=h,a[da[e]]=f<=h&&h<=g?Ui.inBody:p<=h&&h<=f?Ui.inCorner:Ui.outside}function iF(a,e,t,r){var n=1-t;if(a[da[t]]!==Ui.outside)for(r[da[t]].resetCellIterator(xC);xC.next();){var i=xC.item;if(oF(a.point[t],i.rect,t)&&oF(a.point[n],i.rect,n)){e[t]=i.ordinal,e[n]=i.id[da[n]];return}}}function sF(a,e,t,r){if(a[da[t]]!==Ui.outside){var n=a[da[t]]===Ui.inCorner?r[da[1-t]]:r[da[t]];for(n.resetLayoutIterator(pw,t);pw.next();)if(XAe(a.point[t],pw.item)){e[t]=pw.item.id[da[t]];return}}}function XAe(a,e){return e.xy<=a&&a<=e.xy+e.wh}function oF(a,e,t){return e[da[t]]<=a&&a<=e[da[t]]+e[Qn[t]]}function ZAe(a){a.registerComponentModel(zAe),a.registerComponentView(GAe),a.registerCoordinateSystem("matrix",YAe)}function KAe(a,e){var t=a.existing;if(e.id=a.keyInfo.id,!e.type&&t&&(e.type=t.type),e.parentId==null){var r=e.parentOption;r?e.parentId=r.id:t&&(e.parentId=t.parentId)}e.parentOption=null}function lF(a,e){var t;return oe(e,function(r){a[r]!=null&&a[r]!=="auto"&&(t=!0)}),t}function QAe(a,e,t){var r=Je({},t),n=a[e],i=t.$action||"merge";i==="merge"?n?(_a(n,r,!0),Mc(n,r,{ignoreSize:!0}),E$(t,n),xw(t,n),xw(t,n,"shape"),xw(t,n,"style"),xw(t,n,"extra"),t.clipPath=n.clipPath):a[e]=r:i==="replace"?a[e]=r:i==="remove"&&n&&(a[e]=null)}var dK=["transition","enterFrom","leaveTo"],JAe=dK.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function xw(a,e,t){if(t&&(!a[t]&&e[t]&&(a[t]={}),a=a[t],e=e[t]),!(!a||!e))for(var r=t?dK:JAe,n=0;n<r.length;n++){var i=r[n];a[i]==null&&e[i]!=null&&(a[i]=e[i])}}function eTe(a,e){if(a&&(a.hv=e.hv=[lF(e,["left","right"]),lF(e,["top","bottom"])],a.type==="group")){var t=a,r=e;t.width==null&&(t.width=r.width=0),t.height==null&&(t.height=r.height=0)}}var tTe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.preventAutoZ=!0,t}return e.prototype.mergeOption=function(t,r){var n=this.option.elements;this.option.elements=null,a.prototype.mergeOption.call(this,t,r),this.option.elements=n},e.prototype.optionUpdated=function(t,r){var n=this.option,i=(r?n:t).elements,o=n.elements=r?[]:n.elements,l=[];this._flatten(i,l,null);var c=bW(o,l,"normalMerge"),d=this._elOptionsToUpdate=[];oe(c,function(u,h){var f=u.newOption;f&&(d.push(f),KAe(u,f),QAe(o,h,f),eTe(o[h],f))},this),n.elements=hr(o,function(u){return u&&delete u.$action,u!=null})},e.prototype._flatten=function(t,r,n){oe(t,function(i){if(i){n&&(i.parentOption=n),r.push(i);var o=i.children;o&&o.length&&this._flatten(o,r,i),delete i.children}},this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e})(Oa),cF={path:null,compoundPath:null,group:Gt,image:Li,text:Ja},qo=Ea(),aTe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._elMap=Rt()},e.prototype.render=function(t,r,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},e.prototype._updateElements=function(t){var r=t.useElOptionsToUpdate();if(r){var n=this._elMap,i=this.group,o=t.get("z"),l=t.get("zlevel");oe(r,function(c){var d=ui(c.id,null),u=d!=null?n.get(d):null,h=ui(c.parentId,null),f=h!=null?n.get(h):i,p=c.type,g=c.style;p==="text"&&g&&c.hv&&c.hv[1]&&(g.textVerticalAlign=g.textBaseline=g.verticalAlign=g.align=null);var b=c.textContent,w=c.textConfig;if(g&&VZ(g,p,!!w,!!b)){var _=HZ(g,p,!0);!w&&_.textConfig&&(w=c.textConfig=_.textConfig),!b&&_.textContent&&(b=_.textContent)}var k=rTe(c),T=c.$action||"merge",D=T==="merge",I=T==="replace";if(D){var O=!u,P=u;O?P=dF(d,f,c.type,n):(P&&(qo(P).isNew=!1),$Z(P)),P&&(Zw(P,k,t,{isInit:O}),uF(P,c,o,l))}else if(I){Jw(u,c,n,t);var V=dF(d,f,c.type,n);V&&(Zw(V,k,t,{isInit:!0}),uF(V,c,o,l))}else T==="remove"&&(GZ(u,c),Jw(u,c,n,t));var G=n.get(d);if(G&&b)if(D){var Q=G.getTextContent();Q?Q.attr(b):G.setTextContent(new Ja(b))}else I&&G.setTextContent(new Ja(b));if(G){var $=c.clipPath;if($){var ae=$.type,J=void 0,O=!1;if(D){var U=G.getClipPath();O=!U||qo(U).type!==ae,J=O?pA(ae):U}else I&&(O=!0,J=pA(ae));G.setClipPath(J),Zw(J,$,t,{isInit:O}),v_(J,$.keyframeAnimation,t)}var F=qo(G);G.setTextConfig(w),F.option=c,nTe(G,t,c),Gd({el:G,componentModel:t,itemName:G.name,itemTooltipOption:c.tooltip}),v_(G,c.keyframeAnimation,t)}})}},e.prototype._relocate=function(t,r){for(var n=t.option.elements,i=this.group,o=this._elMap,l=r.getWidth(),c=r.getHeight(),d=["x","y"],u=0;u<n.length;u++){var h=n[u],f=ui(h.id,null),p=f!=null?o.get(f):null;if(!(!p||!p.isGroup)){var g=p.parent,b=g===i,w=qo(p),_=qo(g);w.width=_t(w.option.width,b?l:_.width)||0,w.height=_t(w.option.height,b?c:_.height)||0}}for(var u=n.length-1;u>=0;u--){var h=n[u],f=ui(h.id,null),p=f!=null?o.get(f):null;if(p){var g=p.parent,_=qo(g),k=g===i?{width:l,height:c}:{width:_.width,height:_.height},T={},D=SN(p,h,k,null,{hv:h.hv,boundingMode:h.bounding},T);if(!qo(p).isNew&&D){for(var I=h.transition,O={},P=0;P<d.length;P++){var V=d[P],G=T[V];I&&(d0(I)||ya(I,V)>=0)?O[V]=G:p[V]=G}rr(p,O,t,0)}else p.attr(T)}}},e.prototype._clear=function(){var t=this,r=this._elMap;r.each(function(n){Jw(n,qo(n).option,r,t._lastGraphicModel)}),this._elMap=Rt()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e})(tn);function pA(a){var e=Dt(cF,a)?cF[a]:H2(a),t=new e({});return qo(t).type=a,t}function dF(a,e,t,r){var n=pA(t);return e.add(n),r.set(a,n),qo(n).id=a,qo(n).isNew=!0,n}function Jw(a,e,t,r){var n=a&&a.parent;n&&(a.type==="group"&&a.traverse(function(i){Jw(i,e,t,r)}),FN(a,e,r),t.removeKey(qo(a).id))}function uF(a,e,t,r){a.isGroup||oe([["cursor",rl.prototype.cursor],["zlevel",r||0],["z",t||0],["z2",0]],function(n){var i=n[0];Dt(e,i)?a[i]=Pt(e[i],n[1]):a[i]==null&&(a[i]=n[1])}),oe(Va(e),function(n){if(n.indexOf("on")===0){var i=e[n];a[n]=Ut(i)?i:null}}),Dt(e,"draggable")&&(a.draggable=e.draggable),e.name!=null&&(a.name=e.name),e.id!=null&&(a.id=e.id)}function rTe(a){return a=Je({},a),oe(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(C$),function(e){delete a[e]}),a}function nTe(a,e,t){var r=na(a).eventData;!a.silent&&!a.ignore&&!r&&(r=na(a).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:a.name}),r&&(r.info=t.info)}function iTe(a){a.registerComponentModel(tTe),a.registerComponentView(aTe),a.registerPreprocessor(function(e){var t=e.graphic;rt(t)?!t[0]||!t[0].elements?e.graphic=[{elements:t}]:e.graphic=[e.graphic[0]]:t&&!t.elements&&(e.graphic=[{elements:[t]}])})}var hF=["x","y","radius","angle","single"],sTe=["cartesian2d","polar","singleAxis"];function oTe(a){var e=a.get("coordinateSystem");return ya(sTe,e)>=0}function rh(a){return a+"Axis"}function lTe(a,e){var t=Rt(),r=[],n=Rt();a.eachComponent({mainType:"dataZoom",query:e},function(u){n.get(u.uid)||l(u)});var i;do i=!1,a.eachComponent("dataZoom",o);while(i);function o(u){!n.get(u.uid)&&c(u)&&(l(u),i=!0)}function l(u){n.set(u.uid,!0),r.push(u),d(u)}function c(u){var h=!1;return u.eachTargetAxis(function(f,p){var g=t.get(f);g&&g[p]&&(h=!0)}),h}function d(u){u.eachTargetAxis(function(h,f){(t.get(h)||t.set(h,[]))[f]=!0})}return r}function uK(a){var e=a.ecModel,t={infoList:[],infoMap:Rt()};return a.eachTargetAxis(function(r,n){var i=e.getComponent(rh(r),n);if(i){var o=i.getCoordSysModel();if(o){var l=o.uid,c=t.infoMap.get(l);c||(c={model:o,axisModels:[]},t.infoList.push(c),t.infoMap.set(l,c)),c.axisModels.push(i)}}}),t}var gC=(function(){function a(){this.indexList=[],this.indexMap=[]}return a.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},a})(),ub=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,r,n){var i=fF(t);this.settledOption=i,this.mergeDefaultAndTheme(t,n),this._doInit(i)},e.prototype.mergeOption=function(t){var r=fF(t);_a(this.option,t,!0),_a(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(t){var r=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var n=this.settledOption;oe([["start","startValue"],["end","endValue"]],function(i,o){this._rangePropMode[o]==="value"&&(r[i[0]]=n[i[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),r=this._targetAxisInfoMap=Rt(),n=this._fillSpecifiedTargetAxis(r);n?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(i){i.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var r=!1;return oe(hF,function(n){var i=this.getReferringComponents(rh(n),Hme);if(i.specified){r=!0;var o=new gC;oe(i.models,function(l){o.add(l.componentIndex)}),t.set(n,o)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(t,r){var n=this.ecModel,i=!0;if(i){var o=r==="vertical"?"y":"x",l=n.findComponents({mainType:o+"Axis"});c(l,o)}if(i){var l=n.findComponents({mainType:"singleAxis",filter:function(u){return u.get("orient",!0)===r}});c(l,"single")}function c(d,u){var h=d[0];if(h){var f=new gC;if(f.add(h.componentIndex),t.set(u,f),i=!1,u==="x"||u==="y"){var p=h.getReferringComponents("grid",yn).models[0];p&&oe(d,function(g){h.componentIndex!==g.componentIndex&&p===g.getReferringComponents("grid",yn).models[0]&&f.add(g.componentIndex)})}}}i&&oe(hF,function(d){if(i){var u=n.findComponents({mainType:rh(d),filter:function(f){return f.get("type",!0)==="category"}});if(u[0]){var h=new gC;h.add(u[0].componentIndex),t.set(d,h),i=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(r){!t&&(t=r)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var r=this._rangePropMode,n=this.get("rangeMode");oe([["start","startValue"],["end","endValue"]],function(i,o){var l=t[i[0]]!=null,c=t[i[1]]!=null;l&&!c?r[o]="percent":!l&&c?r[o]="value":n?r[o]=n[o]:l&&(r[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(r,n){t==null&&(t=this.ecModel.getComponent(rh(r),n))},this),t},e.prototype.eachTargetAxis=function(t,r){this._targetAxisInfoMap.each(function(n,i){oe(n.indexList,function(o){t.call(r,i,o)})})},e.prototype.getAxisProxy=function(t,r){var n=this.getAxisModel(t,r);if(n)return n.__dzAxisProxy},e.prototype.getAxisModel=function(t,r){var n=this._targetAxisInfoMap.get(t);if(n&&n.indexMap[r])return this.ecModel.getComponent(rh(t),r)},e.prototype.setRawRange=function(t){var r=this.option,n=this.settledOption;oe([["start","startValue"],["end","endValue"]],function(i){(t[i[0]]!=null||t[i[1]]!=null)&&(r[i[0]]=n[i[0]]=t[i[0]],r[i[1]]=n[i[1]]=t[i[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var r=this.option;oe(["start","startValue","end","endValue"],function(n){r[n]=t[n]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,r){if(t==null&&r==null){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataValueWindow()}else return this.getAxisProxy(t,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var r,n=this._targetAxisInfoMap.keys(),i=0;i<n.length;i++)for(var o=n[i],l=this._targetAxisInfoMap.get(o),c=0;c<l.indexList.length;c++){var d=this.getAxisProxy(o,l.indexList[c]);if(d.hostedBy(this))return d;r||(r=d)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e})(Oa);function fF(a){var e={};return oe(["start","end","startValue","endValue","throttle"],function(t){a.hasOwnProperty(t)&&(e[t]=a[t])}),e}var cTe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e})(ub),EE=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n,i){this.dataZoomModel=t,this.ecModel=r,this.api=n},e.type="dataZoom",e})(tn),dTe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e})(EE),Gp=oe,pF=el,uTe=(function(){function a(e,t,r,n){this._dimName=e,this._axisIndex=t,this.ecModel=n,this._dataZoomModel=r}return a.prototype.hostedBy=function(e){return this._dataZoomModel===e},a.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},a.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},a.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(oTe(t)){var r=rh(this._dimName),n=t.getReferringComponents(r,yn).models[0];n&&this._axisIndex===n.componentIndex&&e.push(t)}},this),e},a.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},a.prototype.getMinMaxSpan=function(){return $t(this._minMaxSpan)},a.prototype.calculateDataWindow=function(e){var t=this._dataExtent,r=this.getAxisModel(),n=r.axis.scale,i=this._dataZoomModel.getRangePropMode(),o=[0,100],l=[],c=[],d;Gp(["start","end"],function(f,p){var g=e[f],b=e[f+"Value"];i[p]==="percent"?(g==null&&(g=o[p]),b=n.parse(ur(g,o,t))):(d=!0,b=b==null?t[p]:n.parse(b),g=ur(b,t,o)),c[p]=b==null||isNaN(b)?t[p]:b,l[p]=g==null||isNaN(g)?o[p]:g}),pF(c),pF(l);var u=this._minMaxSpan;d?h(c,l,t,o,!1):h(l,c,o,t,!0);function h(f,p,g,b,w){var _=w?"Span":"ValueSpan";wh(0,f,g,"all",u["min"+_],u["max"+_]);for(var k=0;k<2;k++)p[k]=ur(f[k],g,b,!0),w&&(p[k]=n.parse(p[k]))}return{valueWindow:c,percentWindow:l}},a.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=hTe(this,this._dimName,t),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},a.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var r=this._dimName,n=this.getTargetSeriesModels(),i=e.get("filterMode"),o=this._valueWindow;if(i==="none")return;Gp(n,function(c){var d=c.getData(),u=d.mapDimensionsAll(r);if(u.length){if(i==="weakFilter"){var h=d.getStore(),f=it(u,function(p){return d.getDimensionIndex(p)},d);d.filterSelf(function(p){for(var g,b,w,_=0;_<u.length;_++){var k=h.get(f[_],p),T=!isNaN(k),D=k<o[0],I=k>o[1];if(T&&!D&&!I)return!0;T&&(w=!0),D&&(g=!0),I&&(b=!0)}return w&&g&&b})}else Gp(u,function(p){if(i==="empty")c.setData(d=d.map(p,function(b){return l(b)?b:NaN}));else{var g={};g[p]=o,d.selectRange(g)}});Gp(u,function(p){d.setApproximateExtent(o,p)})}});function l(c){return c>=o[0]&&c<=o[1]}},a.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,r=this._dataExtent;Gp(["min","max"],function(n){var i=t.get(n+"Span"),o=t.get(n+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?i=ur(r[0]+o,r,[0,100],!0):i!=null&&(o=ur(i,[0,100],r,!0)-r[0]),e[n+"Span"]=i,e[n+"ValueSpan"]=o},this)},a.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,r=this._valueWindow;if(t){var n=dW(r,[0,500]);n=Math.min(n,20);var i=e.axis.scale.rawExtentInfo;t[0]!==0&&i.setDeterminedMinMax("min",+r[0].toFixed(n)),t[1]!==100&&i.setDeterminedMinMax("max",+r[1].toFixed(n)),i.freeze()}},a})();function hTe(a,e,t){var r=[1/0,-1/0];Gp(t,function(o){Gwe(r,o.getData(),e)});var n=a.getAxisModel(),i=dq(n.axis.scale,n,r).calculate();return[i.min,i.max]}var fTe={getTargetSeries:function(a){function e(n){a.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(o,l){var c=a.getComponent(rh(o),l);n(o,l,c,i)})})}e(function(n,i,o,l){o.__dzAxisProxy=null});var t=[];e(function(n,i,o,l){o.__dzAxisProxy||(o.__dzAxisProxy=new uTe(n,i,l,a),t.push(o.__dzAxisProxy))});var r=Rt();return oe(t,function(n){oe(n.getTargetSeriesModels(),function(i){r.set(i.uid,i)})}),r},overallReset:function(a,e){a.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(r,n){t.getAxisProxy(r,n).reset(t)}),t.eachTargetAxis(function(r,n){t.getAxisProxy(r,n).filterData(t,e)})}),a.eachComponent("dataZoom",function(t){var r=t.findRepresentativeAxisProxy();if(r){var n=r.getDataPercentWindow(),i=r.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})}})}};function pTe(a){a.registerAction("dataZoom",function(e,t){var r=lTe(t,e);oe(r,function(n){n.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var xF=!1;function DE(a){xF||(xF=!0,a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,fTe),pTe(a),a.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function xTe(a){a.registerComponentModel(cTe),a.registerComponentView(dTe),DE(a)}var Zo=(function(){function a(){}return a})(),hK={};function Wp(a,e){hK[a]=e}function fK(a){return hK[a]}var mTe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){a.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;oe(this.option.feature,function(r,n){var i=fK(n);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(t)),_a(r,i.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:Fe.color.border,borderRadius:0,borderWidth:0,padding:Fe.size.m,itemSize:15,itemGap:Fe.size.s,showTitle:!0,iconStyle:{borderColor:Fe.color.accent50,color:"none"},emphasis:{iconStyle:{borderColor:Fe.color.accent50}},tooltip:{show:!1,position:"bottom"}},e})(Oa);function pK(a,e){var t=Ib(e.get("padding")),r=e.getItemStyle(["color","opacity"]);r.fill=e.get("backgroundColor");var n=new Ta({shape:{x:a.x-t[3],y:a.y-t[0],width:a.width+t[1]+t[3],height:a.height+t[0]+t[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1});return n}var gTe=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.render=function(t,r,n,i){var o=this.group;if(o.removeAll(),!t.get("show"))return;var l=+t.get("itemSize"),c=t.get("orient")==="vertical",d=t.get("feature")||{},u=this._features||(this._features={}),h=[];oe(d,function(k,T){h.push(T)}),new Bd(this._featureNames||[],h).add(f).update(f).remove(va(f,null)).execute(),this._featureNames=h;function f(k,T){var D=h[k],I=h[T],O=d[D],P=new za(O,t,t.ecModel),V;if(i&&i.newTitle!=null&&i.featureName===D&&(O.title=i.newTitle),D&&!I){if(vTe(D))V={onclick:P.option.onclick,featureName:D};else{var G=fK(D);if(!G)return;V=new G}u[D]=V}else if(V=u[I],!V)return;V.uid=Zx("toolbox-feature"),V.model=P,V.ecModel=r,V.api=n;var Q=V instanceof Zo;if(!D&&I){Q&&V.dispose&&V.dispose(r,n);return}if(!P.get("show")||Q&&V.unusable){Q&&V.remove&&V.remove(r,n);return}p(P,V,D),P.setIconStatus=function($,ae){var J=this.option,U=this.iconPaths;J.iconStatus=J.iconStatus||{},J.iconStatus[$]=ae,U[$]&&(ae==="emphasis"?Od:Pd)(U[$])},V instanceof Zo&&V.render&&V.render(P,r,n,i)}function p(k,T,D){var I=k.getModel("iconStyle"),O=k.getModel(["emphasis","iconStyle"]),P=T instanceof Zo&&T.getIcons?T.getIcons():k.get("icon"),V=k.get("title")||{},G,Q;jt(P)?(G={},G[D]=P):G=P,jt(V)?(Q={},Q[D]=V):Q=V;var $=k.iconPaths={};oe(G,function(ae,J){var U=Db(ae,{},{x:-l/2,y:-l/2,width:l,height:l});U.setStyle(I.getItemStyle());var F=U.ensureState("emphasis");F.style=O.getItemStyle();var W=new Ja({style:{text:Q[J],align:O.get("textAlign"),borderRadius:O.get("textBorderRadius"),padding:O.get("textPadding"),fill:null,font:QT({fontStyle:O.get("textFontStyle"),fontFamily:O.get("textFontFamily"),fontSize:O.get("textFontSize"),fontWeight:O.get("textFontWeight")},r)},ignore:!0});U.setTextContent(W),Gd({el:U,componentModel:t,itemName:J,formatterParamsExtra:{title:Q[J]}}),U.__title=Q[J],U.on("mouseover",function(){var K=O.getItemStyle(),ee=c?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";W.setStyle({fill:O.get("textFill")||K.fill||K.stroke||Fe.color.neutral99,backgroundColor:O.get("textBackgroundColor")}),U.setTextConfig({position:O.get("textPosition")||ee}),W.ignore=!t.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){k.get(["iconStatus",J])!=="emphasis"&&n.leaveEmphasis(this),W.hide()}),(k.get(["iconStatus",J])==="emphasis"?Od:Pd)(U),o.add(U),U.on("click",St(T.onclick,T,r,n,J)),$[J]=U})}var g=pi(t,n).refContainer,b=t.getBoxLayoutParams(),w=t.get("padding"),_=ln(b,g,w);l0(t.get("orient"),o,t.get("itemGap"),_.width,_.height),SN(o,b,g,w),o.add(pK(o.getBoundingRect(),t)),c||o.eachChild(function(k){var T=k.__title,D=k.ensureState("emphasis"),I=D.textConfig||(D.textConfig={}),O=k.getTextContent(),P=O&&O.ensureState("emphasis");if(P&&!Ut(P)&&T){var V=P.style||(P.style={}),G=lN(T,Ja.makeFont(V)),Q=k.x+o.x,$=k.y+o.y+l,ae=!1;$+G.height>n.getHeight()&&(I.position="top",ae=!0);var J=ae?-5-G.height:l+10;Q+G.width/2>n.getWidth()?(I.position=["100%",J],V.align="right"):Q-G.width/2<0&&(I.position=[0,J],V.align="left")}})},e.prototype.updateView=function(t,r,n,i){oe(this._features,function(o){o instanceof Zo&&o.updateView&&o.updateView(o.model,r,n,i)})},e.prototype.remove=function(t,r){oe(this._features,function(n){n instanceof Zo&&n.remove&&n.remove(t,r)}),this.group.removeAll()},e.prototype.dispose=function(t,r){oe(this._features,function(n){n instanceof Zo&&n.dispose&&n.dispose(t,r)})},e.type="toolbox",e})(tn);function vTe(a){return a.indexOf("my")===0}var bTe=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){var n=this.model,i=n.get("name")||t.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",l=o?"svg":n.get("type",!0)||"png",c=r.getConnectedDataURL({type:l,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||Fe.color.neutral00,connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),d=Ba.browser;if(typeof MouseEvent=="function"&&(d.newEdge||!d.ie&&!d.edge)){var u=document.createElement("a");u.download=i+"."+l,u.target="_blank",u.href=c;var h=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});u.dispatchEvent(h)}else if(window.navigator.msSaveOrOpenBlob||o){var f=c.split(","),p=f[0].indexOf("base64")>-1,g=o?decodeURIComponent(f[1]):f[1];p&&(g=window.atob(g));var b=i+"."+l;if(window.navigator.msSaveOrOpenBlob){for(var w=g.length,_=new Uint8Array(w);w--;)_[w]=g.charCodeAt(w);var k=new Blob([_]);window.navigator.msSaveOrOpenBlob(k,b)}else{var T=document.createElement("iframe");document.body.appendChild(T);var D=T.contentWindow,I=D.document;I.open("image/svg+xml","replace"),I.write(g),I.close(),D.focus(),I.execCommand("SaveAs",!0,b),document.body.removeChild(T)}}else{var O=n.get("lang"),P='<body style="margin:0;"><img src="'+c+'" style="max-width:100%;" title="'+(O&&O[0]||"")+'" /></body>',V=window.open();V.document.write(P),V.document.title=i}},e.getDefaultOption=function(t){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:Fe.color.neutral00,name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e})(Zo),mF="__ec_magicType_stack__",yTe=[["line","bar"],["stack"]],wTe=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,r=t.get("icon"),n={};return oe(t.get("type"),function(i){r[i]&&(n[i]=r[i])}),n},e.getDefaultOption=function(t){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(t,r,n){var i=this.model,o=i.get(["seriesIndex",n]);if(gF[n]){var l={series:[]},c=function(h){var f=h.subType,p=h.id,g=gF[n](f,p,h,i);g&&(Kt(g,h.option),l.series.push(g));var b=h.coordinateSystem;if(b&&b.type==="cartesian2d"&&(n==="line"||n==="bar")){var w=b.getAxesByScale("ordinal")[0];if(w){var _=w.dim,k=_+"Axis",T=h.getReferringComponents(k,yn).models[0],D=T.componentIndex;l[k]=l[k]||[];for(var I=0;I<=D;I++)l[k][D]=l[k][D]||{};l[k][D].boundaryGap=n==="bar"}}};oe(yTe,function(h){ya(h,n)>=0&&oe(h,function(f){i.setIconStatus(f,"normal")})}),i.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},c);var d,u=n;n==="stack"&&(d=_a({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",n])!=="emphasis"&&(u="tiled")),r.dispatchAction({type:"changeMagicType",currentType:u,newOption:l,newTitle:d,featureName:"magicType"})}},e})(Zo),gF={line:function(a,e,t,r){if(a==="bar")return _a({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(a,e,t,r){if(a==="line")return _a({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(a,e,t,r){var n=t.get("stack")===mF;if(a==="line"||a==="bar")return r.setIconStatus("stack",n?"normal":"emphasis"),_a({id:e,stack:n?"":mF},r.get(["option","stack"])||{},!0)}};Lc({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,e){e.mergeOption(a.newOption)});var VN=new Array(60).join("-"),Bx="	";function _Te(a){var e={},t=[],r=[];return a.eachRawSeries(function(n){var i=n.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var o=i.getBaseAxis();if(o.type==="category"){var l=o.dim+"_"+o.index;e[l]||(e[l]={categoryAxis:o,valueAxis:i.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),e[l].series.push(n)}else t.push(n)}else t.push(n)}),{seriesGroupByCategoryAxis:e,other:t,meta:r}}function NTe(a){var e=[];return oe(a,function(t,r){var n=t.categoryAxis,i=t.valueAxis,o=i.dim,l=[" "].concat(it(t.series,function(p){return p.name})),c=[n.model.getCategories()];oe(t.series,function(p){var g=p.getRawData();c.push(p.getRawData().mapArray(g.mapDimension(o),function(b){return b}))});for(var d=[l.join(Bx)],u=0;u<c[0].length;u++){for(var h=[],f=0;f<c.length;f++)h.push(c[f][u]);d.push(h.join(Bx))}e.push(d.join(`
`))}),e.join(`

`+VN+`

`)}function jTe(a){return it(a,function(e){var t=e.getRawData(),r=[e.name],n=[];return t.each(t.dimensions,function(){for(var i=arguments.length,o=arguments[i-1],l=t.getName(o),c=0;c<i-1;c++)n[c]=arguments[c];r.push((l?l+Bx:"")+n.join(Bx))}),r.join(`
`)}).join(`

`+VN+`

`)}function STe(a){var e=_Te(a);return{value:hr([NTe(e.seriesGroupByCategoryAxis),jTe(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+VN+`

`),meta:e.meta}}function N_(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function kTe(a){var e=a.slice(0,a.indexOf(`
`));if(e.indexOf(Bx)>=0)return!0}var xA=new RegExp("["+Bx+"]+","g");function CTe(a){for(var e=a.split(/\n+/g),t=N_(e.shift()).split(xA),r=[],n=it(t,function(c){return{name:c,data:[]}}),i=0;i<e.length;i++){var o=N_(e[i]).split(xA);r.push(o.shift());for(var l=0;l<o.length;l++)n[l]&&(n[l].data[i]=o[l])}return{series:n,categories:r}}function ATe(a){for(var e=a.split(/\n+/g),t=N_(e.shift()),r=[],n=0;n<e.length;n++){var i=N_(e[n]);if(i){var o=i.split(xA),l="",c=void 0,d=!1;isNaN(o[0])?(d=!0,l=o[0],o=o.slice(1),r[n]={name:l,value:[]},c=r[n].value):c=r[n]=[];for(var u=0;u<o.length;u++)c.push(+o[u]);c.length===1&&(d?r[n].value=c[0]:r[n]=c[0])}}return{name:t,data:r}}function TTe(a,e){var t=a.split(new RegExp(`
*`+VN+`
*`,"g")),r={series:[]};return oe(t,function(n,i){if(kTe(n)){var o=CTe(n),l=e[i],c=l.axisDim+"Axis";l&&(r[c]=r[c]||[],r[c][l.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=ATe(n);r.series.push(o)}}),r}var MTe=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var n=r.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=i.get("backgroundColor")||Fe.color.neutral00;var l=document.createElement("h4"),c=i.get("lang")||[];l.innerHTML=c[0]||i.get("title"),l.style.cssText="margin:10px 20px",l.style.color=i.get("textColor");var d=document.createElement("div"),u=document.createElement("textarea");d.style.cssText="overflow:auto";var h=i.get("optionToContent"),f=i.get("contentToOption"),p=STe(t);if(Ut(h)){var g=h(r.getOption());jt(g)?d.innerHTML=g:Nx(g)&&d.appendChild(g)}else{u.readOnly=i.get("readOnly");var b=u.style;b.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",b.color=i.get("textColor"),b.borderColor=i.get("textareaBorderColor"),b.backgroundColor=i.get("textareaColor"),u.value=p.value,d.appendChild(u)}var w=p.meta,_=document.createElement("div");_.style.cssText="position:absolute;bottom:5px;left:0;right:0";var k="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",T=document.createElement("div"),D=document.createElement("div");k+=";background-color:"+i.get("buttonColor"),k+=";color:"+i.get("buttonTextColor");var I=this;function O(){n.removeChild(o),I._dom=null}k4(T,"click",O),k4(D,"click",function(){if(f==null&&h!=null||f!=null&&h==null){O();return}var P;try{Ut(f)?P=f(d,r.getOption()):P=TTe(u.value,w)}catch(V){throw O(),new Error("Data view format error "+V)}P&&r.dispatchAction({type:"changeDataView",newOption:P}),O()}),T.innerHTML=c[1],D.innerHTML=c[2],D.style.cssText=T.style.cssText=k,!i.get("readOnly")&&_.appendChild(D),_.appendChild(T),o.appendChild(l),o.appendChild(d),o.appendChild(_),d.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},e.prototype.remove=function(t,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.getDefaultOption=function(t){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:Fe.color.background,textColor:Fe.color.primary,textareaColor:Fe.color.background,textareaBorderColor:Fe.color.border,buttonColor:Fe.color.accent50,buttonTextColor:Fe.color.neutral00};return r},e})(Zo);function ETe(a,e){return it(a,function(t,r){var n=e&&e[r];if(Qt(n)&&!rt(n)){var i=Qt(t)&&!rt(t);i||(t={value:t});var o=n.name!=null&&t.name==null;return t=Kt(t,n),o&&delete t.name,t}else return t})}Lc({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(a,e){var t=[];oe(a.newOption.series,function(r){var n=e.getSeriesByName(r.name)[0];if(!n)t.push(Je({type:"scatter"},r));else{var i=n.get("data");t.push({name:r.name,data:ETe(r.data,i)})}}),e.mergeOption(Kt({series:t},a.newOption))});var xK=oe,mK=Ea();function DTe(a,e){var t=IE(a);xK(e,function(r,n){for(var i=t.length-1;i>=0;i--){var o=t[i];if(o[n])break}if(i<0){var l=a.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(l){var c=l.getPercentRange();t[0][n]={dataZoomId:n,start:c[0],end:c[1]}}}}),t.push(e)}function ITe(a){var e=IE(a),t=e[e.length-1];e.length>1&&e.pop();var r={};return xK(t,function(n,i){for(var o=e.length-1;o>=0;o--)if(n=e[o][i],n){r[i]=n;break}}),r}function RTe(a){mK(a).snapshots=null}function LTe(a){return IE(a).length}function IE(a){var e=mK(a);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var OTe=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){RTe(t),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return r},e})(Zo);Lc({type:"restore",event:"restore",update:"prepareAndUpdate"},function(a,e){e.resetOption("recreate")});var PTe=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],RE=(function(){function a(e,t,r){var n=this;this._targetInfoList=[];var i=vF(t,e);oe(BTe,function(o,l){(!r||!r.include||ya(r.include,l)>=0)&&o(i,n._targetInfoList)})}return a.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(r,n,i){if((r.coordRanges||(r.coordRanges=[])).push(n),!r.coordRange){r.coordRange=n;var o=vC[r.brushType](0,i,n);r.__rangeOffset={offset:_F[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},a.prototype.matchOutputRanges=function(e,t,r){oe(e,function(n){var i=this.findTargetInfo(n,t);i&&i!==!0&&oe(i.coordSyses,function(o){var l=vC[n.brushType](1,o,n.range,!0);r(n,l.values,o,t)})},this)},a.prototype.setInputRanges=function(e,t){oe(e,function(r){var n=this.findTargetInfo(r,t);if(r.range=r.range||[],n&&n!==!0){r.panelId=n.panelId;var i=vC[r.brushType](0,n.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?_F[r.brushType](i.values,o.offset,zTe(i.xyMinMax,o.xyMinMax)):i.values}},this)},a.prototype.makePanelOpts=function(e,t){return it(this._targetInfoList,function(r){var n=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:t?t(r):null,clipPath:wZ(n),isTargetByCursor:NZ(n,e,r.coordSysModel),getLinearBrushOtherExtent:_Z(n)}})},a.prototype.controlSeries=function(e,t,r){var n=this.findTargetInfo(e,r);return n===!0||n&&ya(n.coordSyses,t.coordinateSystem)>=0},a.prototype.findTargetInfo=function(e,t){for(var r=this._targetInfoList,n=vF(t,e),i=0;i<r.length;i++){var o=r[i],l=e.panelId;if(l){if(o.panelId===l)return o}else for(var c=0;c<bF.length;c++)if(bF[c](n,o))return o}return!0},a})();function mA(a){return a[0]>a[1]&&a.reverse(),a}function vF(a,e){return lx(a,e,{includeMainTypes:PTe})}var BTe={grid:function(a,e){var t=a.xAxisModels,r=a.yAxisModels,n=a.gridModels,i=Rt(),o={},l={};!t&&!r&&!n||(oe(t,function(c){var d=c.axis.grid.model;i.set(d.id,d),o[d.id]=!0}),oe(r,function(c){var d=c.axis.grid.model;i.set(d.id,d),l[d.id]=!0}),oe(n,function(c){i.set(c.id,c),o[c.id]=!0,l[c.id]=!0}),i.each(function(c){var d=c.coordinateSystem,u=[];oe(d.getCartesians(),function(h,f){(ya(t,h.getAxis("x").model)>=0||ya(r,h.getAxis("y").model)>=0)&&u.push(h)}),e.push({panelId:"grid--"+c.id,gridModel:c,coordSysModel:c,coordSys:u[0],coordSyses:u,getPanelRect:yF.grid,xAxisDeclared:o[c.id],yAxisDeclared:l[c.id]})}))},geo:function(a,e){oe(a.geoModels,function(t){var r=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:r,coordSyses:[r],getPanelRect:yF.geo})})}},bF=[function(a,e){var t=a.xAxisModel,r=a.yAxisModel,n=a.gridModel;return!n&&t&&(n=t.axis.grid.model),!n&&r&&(n=r.axis.grid.model),n&&n===e.gridModel},function(a,e){var t=a.geoModel;return t&&t===e.geoModel}],yF={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var a=this.coordSys,e=a.getBoundingRect().clone();return e.applyTransform(o0(a)),e}},vC={lineX:va(wF,0),lineY:va(wF,1),rect:function(a,e,t,r){var n=a?e.pointToData([t[0][0],t[1][0]],r):e.dataToPoint([t[0][0],t[1][0]],r),i=a?e.pointToData([t[0][1],t[1][1]],r):e.dataToPoint([t[0][1],t[1][1]],r),o=[mA([n[0],i[0]]),mA([n[1],i[1]])];return{values:o,xyMinMax:o}},polygon:function(a,e,t,r){var n=[[1/0,-1/0],[1/0,-1/0]],i=it(t,function(o){var l=a?e.pointToData(o,r):e.dataToPoint(o,r);return n[0][0]=Math.min(n[0][0],l[0]),n[1][0]=Math.min(n[1][0],l[1]),n[0][1]=Math.max(n[0][1],l[0]),n[1][1]=Math.max(n[1][1],l[1]),l});return{values:i,xyMinMax:n}}};function wF(a,e,t,r){var n=t.getAxis(["x","y"][a]),i=mA(it([0,1],function(l){return e?n.coordToData(n.toLocalCoord(r[l]),!0):n.toGlobalCoord(n.dataToCoord(r[l]))})),o=[];return o[a]=i,o[1-a]=[NaN,NaN],{values:i,xyMinMax:o}}var _F={lineX:va(NF,0),lineY:va(NF,1),rect:function(a,e,t){return[[a[0][0]-t[0]*e[0][0],a[0][1]-t[0]*e[0][1]],[a[1][0]-t[1]*e[1][0],a[1][1]-t[1]*e[1][1]]]},polygon:function(a,e,t){return it(a,function(r,n){return[r[0]-t[0]*e[n][0],r[1]-t[1]*e[n][1]]})}};function NF(a,e,t,r){return[e[0]-r[a]*t[0],e[1]-r[a]*t[1]]}function zTe(a,e){var t=jF(a),r=jF(e),n=[t[0]/r[0],t[1]/r[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function jF(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}var gA=oe,FTe=Pme("toolbox-dataZoom_"),VTe=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.render=function(t,r,n,i){this._brushController||(this._brushController=new iE(n.getZr()),this._brushController.on("brush",St(this._onBrush,this)).mount()),GTe(t,r,this,i,n),UTe(t,r)},e.prototype.onclick=function(t,r,n){HTe[n].call(this)},e.prototype.remove=function(t,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var r=t.areas;if(!t.isEnd||!r.length)return;var n={},i=this.ecModel;this._brushController.updateCovers([]);var o=new RE(LE(this.model),i,{include:["grid"]});o.matchOutputRanges(r,i,function(d,u,h){if(h.type==="cartesian2d"){var f=d.brushType;f==="rect"?(l("x",h,u[0]),l("y",h,u[1])):l({lineX:"x",lineY:"y"}[f],h,u)}}),DTe(i,n),this._dispatchZoomAction(n);function l(d,u,h){var f=u.getAxis(d),p=f.model,g=c(d,p,i),b=g.findRepresentativeAxisProxy(p).getMinMaxSpan();(b.minValueSpan!=null||b.maxValueSpan!=null)&&(h=wh(0,h.slice(),f.scale.getExtent(),0,b.minValueSpan,b.maxValueSpan)),g&&(n[g.id]={dataZoomId:g.id,startValue:h[0],endValue:h[1]})}function c(d,u,h){var f;return h.eachComponent({mainType:"dataZoom",subType:"select"},function(p){var g=p.getAxisModel(d,u.componentIndex);g&&(f=p)}),f}},e.prototype._dispatchZoomAction=function(t){var r=[];gA(t,function(n,i){r.push($t(n))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(t){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:Fe.color.backgroundTint}};return r},e})(Zo),HTe={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(ITe(this.ecModel))}};function LE(a){var e={xAxisIndex:a.get("xAxisIndex",!0),yAxisIndex:a.get("yAxisIndex",!0),xAxisId:a.get("xAxisId",!0),yAxisId:a.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function UTe(a,e){a.setIconStatus("back",LTe(e)>1?"emphasis":"normal")}function GTe(a,e,t,r,n){var i=t._isZoomActive;r&&r.type==="takeGlobalCursor"&&(i=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),t._isZoomActive=i,a.setIconStatus("zoom",i?"emphasis":"normal");var o=new RE(LE(a),e,{include:["grid"]}),l=o.makePanelOpts(n,function(c){return c.xAxisDeclared&&!c.yAxisDeclared?"lineX":!c.xAxisDeclared&&c.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(l).enableBrush(i&&l.length?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}ybe("dataZoom",function(a){var e=a.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var r=e.getModel(t),n=[],i=LE(r),o=lx(a,i);gA(o.xAxisModels,function(c){return l(c,"xAxis","xAxisIndex")}),gA(o.yAxisModels,function(c){return l(c,"yAxis","yAxisIndex")});function l(c,d,u){var h=c.componentIndex,f={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:FTe+d+h};f[u]=h,n.push(f)}return n});function WTe(a){a.registerComponentModel(mTe),a.registerComponentView(gTe),Wp("saveAsImage",bTe),Wp("magicType",wTe),Wp("dataView",MTe),Wp("dataZoom",VTe),Wp("restore",OTe),Sa(xTe)}var $Te=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,displayTransition:!0,enterable:!1,backgroundColor:Fe.color.neutral00,shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,defaultBorderColor:Fe.color.border,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:Fe.color.borderShade,width:1,type:"dashed",textStyle:{}}},textStyle:{color:Fe.color.tertiary,fontSize:14}},e})(Oa);function gK(a){var e=a.get("confine");return e!=null?!!e:a.get("renderMode")==="richText"}function vK(a){if(Ba.domSupported){for(var e=document.documentElement.style,t=0,r=a.length;t<r;t++)if(a[t]in e)return a[t]}}var bK=vK(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),YTe=vK(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function yK(a,e){if(!a)return e;e=_$(e,!0);var t=a.indexOf(e);return a=t===-1?e:"-"+a.slice(0,t)+"-"+e,a.toLowerCase()}function qTe(a,e){var t=a.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(a);return t?t[e]:null}var XTe=yK(YTe,"transition"),OE=yK(bK,"transform"),ZTe="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Ba.transform3dSupported?"will-change:transform;":"");function KTe(a){return a=a==="left"?"right":a==="right"?"left":a==="top"?"bottom":"top",a}function QTe(a,e,t){if(!jt(t)||t==="inside")return"";var r=a.get("backgroundColor"),n=a.get("borderWidth");e=N0(e);var i=KTe(t),o=Math.max(Math.round(n)*1.5,6),l="",c=OE+":",d;ya(["left","right"],i)>-1?(l+="top:50%",c+="translateY(-50%) rotate("+(d=i==="left"?-225:-45)+"deg)"):(l+="left:50%",c+="translateX(-50%) rotate("+(d=i==="top"?225:45)+"deg)");var u=d*Math.PI/180,h=o+n,f=h*Math.abs(Math.cos(u))+h*Math.abs(Math.sin(u)),p=Math.round(((f-Math.SQRT2*n)/2+Math.SQRT2*n-(f-h)/2)*100)/100;l+=";"+i+":-"+p+"px";var g=e+" solid "+n+"px;",b=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",l+";"+c+";","border-bottom:"+g,"border-right:"+g,"background-color:"+r+";"];return'<div style="'+b.join("")+'"></div>'}function JTe(a,e,t){var r="cubic-bezier(0.23,1,0.32,1)",n="",i="";return t&&(n=" "+a/2+"s "+r,i="opacity"+n+",visibility"+n),e||(n=" "+a+"s "+r,i+=(i.length?",":"")+(Ba.transformSupported?""+OE+n:",left"+n+",top"+n)),XTe+":"+i}function SF(a,e,t){var r=a.toFixed(0)+"px",n=e.toFixed(0)+"px";if(!Ba.transformSupported)return t?"top:"+n+";left:"+r+";":[["top",n],["left",r]];var i=Ba.transform3dSupported,o="translate"+(i?"3d":"")+"("+r+","+n+(i?",0":"")+")";return t?"top:0;left:0;"+OE+":"+o+";":[["top",0],["left",0],[bK,o]]}function eMe(a){var e=[],t=a.get("fontSize"),r=a.getTextColor();r&&e.push("color:"+r),e.push("font:"+a.getFont());var n=Pt(a.get("lineHeight"),Math.round(t*3/2));t&&e.push("line-height:"+n+"px");var i=a.get("textShadowColor"),o=a.get("textShadowBlur")||0,l=a.get("textShadowOffsetX")||0,c=a.get("textShadowOffsetY")||0;return i&&o&&e.push("text-shadow:"+l+"px "+c+"px "+o+"px "+i),oe(["decoration","align"],function(d){var u=a.get(d);u&&e.push("text-"+d+":"+u)}),e.join(";")}function tMe(a,e,t,r){var n=[],i=a.get("transitionDuration"),o=a.get("backgroundColor"),l=a.get("shadowBlur"),c=a.get("shadowColor"),d=a.get("shadowOffsetX"),u=a.get("shadowOffsetY"),h=a.getModel("textStyle"),f=cY(a,"html"),p=d+"px "+u+"px "+l+"px "+c;return n.push("box-shadow:"+p),e&&i>0&&n.push(JTe(i,t,r)),o&&n.push("background-color:"+o),oe(["width","color","radius"],function(g){var b="border-"+g,w=_$(b),_=a.get(w);_!=null&&n.push(b+":"+_+(g==="color"?"":"px"))}),n.push(eMe(h)),f!=null&&n.push("padding:"+Ib(f).join("px ")+"px"),n.join(";")+";"}function kF(a,e,t,r,n){var i=e&&e.painter;if(t){var o=i&&i.getViewportRoot();o&&sxe(a,o,t,r,n)}else{a[0]=r,a[1]=n;var l=i&&i.getViewportRootOffset();l&&(a[0]+=l.offsetLeft,a[1]+=l.offsetTop)}a[2]=a[0]/e.getWidth(),a[3]=a[1]/e.getHeight()}var aMe=(function(){function a(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Ba.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var n=this._zr=e.getZr(),i=t.appendTo,o=i&&(jt(i)?document.querySelector(i):Nx(i)?i:Ut(i)&&i(e.getDom()));kF(this._styleCoord,n,o,e.getWidth()/2,e.getHeight()/2),(o||e.getDom()).appendChild(r),this._api=e,this._container=o;var l=this;r.onmouseenter=function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0},r.onmousemove=function(c){if(c=c||window.event,!l._enterable){var d=n.handler,u=n.painter.getViewportRoot();Go(u,c,!0),d.dispatch("mousemove",c)}},r.onmouseleave=function(){l._inContent=!1,l._enterable&&l._show&&l.hideLater(l._hideDelay)}}return a.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),r=qTe(t,"position"),n=t.style;n.position!=="absolute"&&r!=="absolute"&&(n.position="relative")}var i=e.get("alwaysShowContent");i&&this._moveIfResized(),this._alwaysShowContent=i,this._enableDisplayTransition=e.get("displayTransition")&&e.get("transitionDuration")>0,this.el.className=e.get("className")||""},a.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,n=r.style,i=this._styleCoord;r.innerHTML?n.cssText=ZTe+tMe(e,!this._firstShow,this._longHide,this._enableDisplayTransition)+SF(i[0],i[1],!0)+("border-color:"+N0(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):n.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},a.prototype.setContent=function(e,t,r,n,i){var o=this.el;if(e==null){o.innerHTML="";return}var l="";if(jt(i)&&r.get("trigger")==="item"&&!gK(r)&&(l=QTe(r,n,i)),jt(e))o.innerHTML=e+l;else if(e){o.innerHTML="",rt(e)||(e=[e]);for(var c=0;c<e.length;c++)Nx(e[c])&&e[c].parentNode!==o&&o.appendChild(e[c]);if(l&&o.childNodes.length){var d=document.createElement("div");d.innerHTML=l,o.appendChild(d)}}},a.prototype.setEnterable=function(e){this._enterable=e},a.prototype.getSize=function(){var e=this.el;return e?[e.offsetWidth,e.offsetHeight]:[0,0]},a.prototype.moveTo=function(e,t){if(this.el){var r=this._styleCoord;if(kF(r,this._zr,this._container,e,t),r[0]!=null&&r[1]!=null){var n=this.el.style,i=SF(r[0],r[1]);oe(i,function(o){n[o[0]]=o[1]})}}},a.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},a.prototype.hide=function(){var e=this,t=this.el.style;this._enableDisplayTransition?(t.visibility="hidden",t.opacity="0"):t.display="none",Ba.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},a.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(St(this.hide,this),e)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this._zr;oxe(e&&e.painter&&e.painter.getViewportRoot(),this._container);var t=this.el;if(t){t.onmouseenter=t.onmousemove=t.onmouseleave=null;var r=t.parentNode;r&&r.removeChild(t)}this.el=this._container=null},a})(),rMe=(function(){function a(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),AF(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return a.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},a.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},a.prototype.setContent=function(e,t,r,n,i){var o=this;Qt(e)&&or(""),this.el&&this._zr.remove(this.el);var l=r.getModel("textStyle");this.el=new Ja({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:n,textShadowColor:l.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:cY(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),oe(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(d){o.el.style[d]=r.get(d)}),oe(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(d){o.el.style[d]=l.get(d)||0}),this._zr.add(this.el);var c=this;this.el.on("mouseover",function(){c._enterable&&(clearTimeout(c._hideTimeout),c._show=!0),c._inContent=!0}),this.el.on("mouseout",function(){c._enterable&&c._show&&c.hideLater(c._hideDelay),c._inContent=!1})},a.prototype.setEnterable=function(e){this._enterable=e},a.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),r=CF(e.style);return[t.width+r.left+r.right,t.height+r.top+r.bottom]},a.prototype.moveTo=function(e,t){var r=this.el;if(r){var n=this._styleCoord;AF(n,this._zr,e,t),e=n[0],t=n[1];var i=r.style,o=Ou(i.borderWidth||0),l=CF(i);r.x=e+o+l.left,r.y=t+o+l.top,r.markRedraw()}},a.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},a.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},a.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(St(this.hide,this),e)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this._zr.remove(this.el)},a})();function Ou(a){return Math.max(0,a)}function CF(a){var e=Ou(a.shadowBlur||0),t=Ou(a.shadowOffsetX||0),r=Ou(a.shadowOffsetY||0);return{left:Ou(e-t),right:Ou(e+t),top:Ou(e-r),bottom:Ou(e+r)}}function AF(a,e,t,r){a[0]=t,a[1]=r,a[2]=a[0]/e.getWidth(),a[3]=a[1]/e.getHeight()}var nMe=new Ta({shape:{x:-1,y:-1,width:2,height:2}}),iMe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){if(!(Ba.node||!r.getDom())){var n=t.getComponent("tooltip"),i=this._renderMode=Gme(n.get("renderMode"));this._tooltipContent=i==="richText"?new rMe(r):new aMe(r,{appendTo:n.get("appendToBody",!0)?"body":n.get("appendTo",!0)})}},e.prototype.render=function(t,r,n){if(!(Ba.node||!n.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=r,this._api=n;var i=this._tooltipContent;i.update(t),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?Qx(this,"_updatePosition",50,"fixRate"):Zv(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,r=t.get("triggerOn");tK("itemTooltip",this._api,St(function(n,i,o){r!=="none"&&(r.indexOf(n)>=0?this._tryShow(i,o):n==="leave"&&this._hide(o))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,r=this._ecModel,n=this._api,i=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&i!=="none"&&i!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&o.manuallyShowTip(t,r,n,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,r,n,i){if(!(i.from===this.uid||Ba.node||!n.getDom())){var o=TF(i,n);this._ticket="";var l=i.dataByCoordSys,c=cMe(i,r,n);if(c){var d=c.el.getBoundingRect().clone();d.applyTransform(c.el.transform),this._tryShow({offsetX:d.x+d.width/2,offsetY:d.y+d.height/2,target:c.el,position:i.position,positionDefault:"bottom"},o)}else if(i.tooltip&&i.x!=null&&i.y!=null){var u=nMe;u.x=i.x,u.y=i.y,u.update(),na(u).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:u},o)}else if(l)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:l,tooltipOption:i.tooltipOption},o);else if(i.seriesIndex!=null){if(this._manuallyAxisShowTip(t,r,n,i))return;var h=aK(i,r),f=h.point[0],p=h.point[1];f!=null&&p!=null&&this._tryShow({offsetX:f,offsetY:p,target:h.el,position:i.position,positionDefault:"bottom"},o)}else i.x!=null&&i.y!=null&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},o))}},e.prototype.manuallyHideTip=function(t,r,n,i){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(TF(i,n))},e.prototype._manuallyAxisShowTip=function(t,r,n,i){var o=i.seriesIndex,l=i.dataIndex,c=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||l==null||c==null)){var d=r.getSeriesByIndex(o);if(d){var u=d.getData(),h=yg([u.getItemModel(l),d,(d.coordinateSystem||{}).model],this._tooltipModel);if(h.get("trigger")==="axis")return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:l,position:i.position}),!0}}},e.prototype._tryShow=function(t,r){var n=t.target,i=this._tooltipModel;if(i){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(n){var l=na(n);if(l.ssrType==="legend")return;this._lastDataByCoordSys=null;var c,d;qf(n,function(u){if(u.tooltipDisabled)return c=d=null,!0;c||d||(na(u).dataIndex!=null?c=u:na(u).tooltipConfig!=null&&(d=u))},!0),c?this._showSeriesItemTooltip(t,c,r):d?this._showComponentItemTooltip(t,d,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(t,r){var n=t.get("showDelay");r=St(r,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(r,n):r()},e.prototype._showAxisTooltip=function(t,r){var n=this._ecModel,i=this._tooltipModel,o=[r.offsetX,r.offsetY],l=yg([r.tooltipOption],i),c=this._renderMode,d=[],u=Jn("section",{blocks:[],noHeader:!0}),h=[],f=new Jk;oe(t,function(k){oe(k.dataByAxis,function(T){var D=n.getComponent(T.axisDim+"Axis",T.axisIndex),I=T.value;if(!(!D||I==null)){var O=QZ(I,D.axis,n,T.seriesDataIndices,T.valueLabelOpt),P=Jn("section",{header:O,noHeader:!Jo(O),sortBlocks:!0,blocks:[]});u.blocks.push(P),oe(T.seriesDataIndices,function(V){var G=n.getSeriesByIndex(V.seriesIndex),Q=V.dataIndexInside,$=G.getDataParams(Q);if(!($.dataIndex<0)){$.axisDim=T.axisDim,$.axisIndex=T.axisIndex,$.axisType=T.axisType,$.axisId=T.axisId,$.axisValue=e_(D.axis,{value:I}),$.axisValueLabel=O,$.marker=f.makeTooltipMarker("item",N0($.color),c);var ae=GP(G.formatTooltip(Q,!0,null)),J=ae.frag;if(J){var U=yg([G],i).get("valueFormatter");P.blocks.push(U?Je({valueFormatter:U},J):J)}ae.text&&h.push(ae.text),d.push($)}})}})}),u.blocks.reverse(),h.reverse();var p=r.position,g=l.get("order"),b=ZP(u,f,c,g,n.get("useUTC"),l.get("textStyle"));b&&h.unshift(b);var w=c==="richText"?`

`:"<br/>",_=h.join(w);this._showOrMove(l,function(){this._updateContentNotChangedOnAxis(t,d)?this._updatePosition(l,p,o[0],o[1],this._tooltipContent,d):this._showTooltipContent(l,_,d,Math.random()+"",o[0],o[1],p,null,f)})},e.prototype._showSeriesItemTooltip=function(t,r,n){var i=this._ecModel,o=na(r),l=o.seriesIndex,c=i.getSeriesByIndex(l),d=o.dataModel||c,u=o.dataIndex,h=o.dataType,f=d.getData(h),p=this._renderMode,g=t.positionDefault,b=yg([f.getItemModel(u),d,c&&(c.coordinateSystem||{}).model],this._tooltipModel,g?{position:g}:null),w=b.get("trigger");if(!(w!=null&&w!=="item")){var _=d.getDataParams(u,h),k=new Jk;_.marker=k.makeTooltipMarker("item",N0(_.color),p);var T=GP(d.formatTooltip(u,!1,h)),D=b.get("order"),I=b.get("valueFormatter"),O=T.frag,P=O?ZP(I?Je({valueFormatter:I},O):O,k,p,D,i.get("useUTC"),b.get("textStyle")):T.text,V="item_"+d.name+"_"+u;this._showOrMove(b,function(){this._showTooltipContent(b,P,_,V,t.offsetX,t.offsetY,t.position,t.target,k)}),n({type:"showTip",dataIndexInside:u,dataIndex:f.getRawIndex(u),seriesIndex:l,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,r,n){var i=this._renderMode==="html",o=na(r),l=o.tooltipConfig,c=l.option||{},d=c.encodeHTMLContent;if(jt(c)){var u=c;c={content:u,formatter:u},d=!0}d&&i&&c.content&&(c=$t(c),c.content=_s(c.content));var h=[c],f=this._ecModel.getComponent(o.componentMainType,o.componentIndex);f&&h.push(f),h.push({formatter:c.content});var p=t.positionDefault,g=yg(h,this._tooltipModel,p?{position:p}:null),b=g.get("content"),w=Math.random()+"",_=new Jk;this._showOrMove(g,function(){var k=$t(g.get("formatterParams")||{});this._showTooltipContent(g,b,k,w,t.offsetX,t.offsetY,t.position,r,_)}),n({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,r,n,i,o,l,c,d,u){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var h=this._tooltipContent;h.setEnterable(t.get("enterable"));var f=t.get("formatter");c=c||t.get("position");var p=r,g=this._getNearestPoint([o,l],n,t.get("trigger"),t.get("borderColor"),t.get("defaultBorderColor",!0)),b=g.color;if(f)if(jt(f)){var w=t.ecModel.get("useUTC"),_=rt(n)?n[0]:n,k=_&&_.axisType&&_.axisType.indexOf("time")>=0;p=f,k&&(p=jN(_.axisValue,p,w)),p=N$(p,n,!0)}else if(Ut(f)){var T=St(function(D,I){D===this._ticket&&(h.setContent(I,u,t,b,c),this._updatePosition(t,c,o,l,h,n,d))},this);this._ticket=i,p=f(n,i,T)}else p=f;h.setContent(p,u,t,b,c),h.show(t,b),this._updatePosition(t,c,o,l,h,n,d)}},e.prototype._getNearestPoint=function(t,r,n,i,o){if(n==="axis"||rt(r))return{color:i||o};if(!rt(r))return{color:i||r.color||r.borderColor}},e.prototype._updatePosition=function(t,r,n,i,o,l,c){var d=this._api.getWidth(),u=this._api.getHeight();r=r||t.get("position");var h=o.getSize(),f=t.get("align"),p=t.get("verticalAlign"),g=c&&c.getBoundingRect().clone();if(c&&g.applyTransform(c.transform),Ut(r)&&(r=r([n,i],l,o.el,g,{viewSize:[d,u],contentSize:h.slice()})),rt(r))n=_t(r[0],d),i=_t(r[1],u);else if(Qt(r)){var b=r;b.width=h[0],b.height=h[1];var w=ln(b,{width:d,height:u});n=w.x,i=w.y,f=null,p=null}else if(jt(r)&&c){var _=lMe(r,g,h,t.get("borderWidth"));n=_[0],i=_[1]}else{var _=sMe(n,i,o,d,u,f?null:20,p?null:20);n=_[0],i=_[1]}if(f&&(n-=MF(f)?h[0]/2:f==="right"?h[0]:0),p&&(i-=MF(p)?h[1]/2:p==="bottom"?h[1]:0),gK(t)){var _=oMe(n,i,o,d,u);n=_[0],i=_[1]}o.moveTo(n,i)},e.prototype._updateContentNotChangedOnAxis=function(t,r){var n=this._lastDataByCoordSys,i=this._cbParamsList,o=!!n&&n.length===t.length;return o&&oe(n,function(l,c){var d=l.dataByAxis||[],u=t[c]||{},h=u.dataByAxis||[];o=o&&d.length===h.length,o&&oe(d,function(f,p){var g=h[p]||{},b=f.seriesDataIndices||[],w=g.seriesDataIndices||[];o=o&&f.value===g.value&&f.axisType===g.axisType&&f.axisId===g.axisId&&b.length===w.length,o&&oe(b,function(_,k){var T=w[k];o=o&&_.seriesIndex===T.seriesIndex&&_.dataIndex===T.dataIndex}),i&&oe(f.seriesDataIndices,function(_){var k=_.seriesIndex,T=r[k],D=i[k];T&&D&&D.data!==T.data&&(o=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=r,!!o},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,r){Ba.node||!r.getDom()||(Zv(this,"_updatePosition"),this._tooltipContent.dispose(),cA("itemTooltip",r))},e.type="tooltip",e})(tn);function yg(a,e,t){var r=e.ecModel,n;t?(n=new za(t,r,r),n=new za(e.option,n,r)):n=e;for(var i=a.length-1;i>=0;i--){var o=a[i];o&&(o instanceof za&&(o=o.get("tooltip",!0)),jt(o)&&(o={formatter:o}),o&&(n=new za(o,n,r)))}return n}function TF(a,e){return a.dispatchAction||St(e.dispatchAction,e)}function sMe(a,e,t,r,n,i,o){var l=t.getSize(),c=l[0],d=l[1];return i!=null&&(a+c+i+2>r?a-=c+i:a+=i),o!=null&&(e+d+o>n?e-=d+o:e+=o),[a,e]}function oMe(a,e,t,r,n){var i=t.getSize(),o=i[0],l=i[1];return a=Math.min(a+o,r)-o,e=Math.min(e+l,n)-l,a=Math.max(a,0),e=Math.max(e,0),[a,e]}function lMe(a,e,t,r){var n=t[0],i=t[1],o=Math.ceil(Math.SQRT2*r)+8,l=0,c=0,d=e.width,u=e.height;switch(a){case"inside":l=e.x+d/2-n/2,c=e.y+u/2-i/2;break;case"top":l=e.x+d/2-n/2,c=e.y-i-o;break;case"bottom":l=e.x+d/2-n/2,c=e.y+u+o;break;case"left":l=e.x-n-o,c=e.y+u/2-i/2;break;case"right":l=e.x+d+o,c=e.y+u/2-i/2}return[l,c]}function MF(a){return a==="center"||a==="middle"}function cMe(a,e,t){var r=BT(a).queryOptionMap,n=r.keys()[0];if(!(!n||n==="series")){var i=Wx(e,n,r.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}),o=i.models[0];if(o){var l=t.getViewOfComponentModel(o),c;if(l.group.traverse(function(d){var u=na(d).tooltipConfig;if(u&&u.name===a.name)return c=d,!0}),c)return{componentMainType:n,componentIndex:o.componentIndex,el:c}}}}function dMe(a){Sa(Gb),a.registerComponentModel($Te),a.registerComponentView(iMe),a.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Bn),a.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Bn)}var uMe=["rect","polygon","keep","clear"];function hMe(a,e){var t=Rr(a?a.brush:[]);if(t.length){var r=[];oe(t,function(c){var d=c.hasOwnProperty("toolbox")?c.toolbox:[];d instanceof Array&&(r=r.concat(d))});var n=a&&a.toolbox;rt(n)&&(n=n[0]),n||(n={feature:{}},a.toolbox=[n]);var i=n.feature||(n.feature={}),o=i.brush||(i.brush={}),l=o.type||(o.type=[]);l.push.apply(l,r),fMe(l),e&&!l.length&&l.push.apply(l,uMe)}}function fMe(a){var e={};oe(a,function(t){e[t]=1}),a.length=0,oe(e,function(t,r){a.push(r)})}var EF=oe;function DF(a){if(a){for(var e in a)if(a.hasOwnProperty(e))return!0}}function vA(a,e,t){var r={};return EF(e,function(i){var o=r[i]=n();EF(a[i],function(l,c){if(Ni.isValidType(c)){var d={type:c,visual:l};t&&t(d,i),o[c]=new Ni(d),c==="opacity"&&(d=$t(d),d.type="colorAlpha",o.__hidden.__alphaForOpacity=new Ni(d))}})}),r;function n(){var i=function(){};i.prototype.__hidden=i.prototype;var o=new i;return o}}function wK(a,e,t){var r;oe(t,function(n){e.hasOwnProperty(n)&&DF(e[n])&&(r=!0)}),r&&oe(t,function(n){e.hasOwnProperty(n)&&DF(e[n])?a[n]=$t(e[n]):delete a[n]})}function pMe(a,e,t,r,n,i){var o={};oe(a,function(h){var f=Ni.prepareVisualTypes(e[h]);o[h]=f});var l;function c(h){return bM(t,l,h)}function d(h,f){bY(t,l,h,f)}t.each(u);function u(h,f){l=h;var p=t.getRawDataItem(l);if(!(p&&p.visualMap===!1))for(var g=r.call(n,h),b=e[g],w=o[g],_=0,k=w.length;_<k;_++){var T=w[_];b[T]&&b[T].applyVisual(h,c,d)}}}function xMe(a,e,t,r){var n={};return oe(a,function(i){var o=Ni.prepareVisualTypes(e[i]);n[i]=o}),{progress:function(o,l){var c;r!=null&&(c=l.getDimensionIndex(r));function d(I){return bM(l,h,I)}function u(I,O){bY(l,h,I,O)}for(var h,f=l.getStore();(h=o.next())!=null;){var p=l.getRawDataItem(h);if(!(p&&p.visualMap===!1))for(var g=r!=null?f.get(c,h):h,b=t(g),w=e[b],_=n[b],k=0,T=_.length;k<T;k++){var D=_[k];w[D]&&w[D].applyVisual(g,d,u)}}}}}function mMe(a){var e=a.brushType,t={point:function(r){return IF[e].point(r,t,a)},rect:function(r){return IF[e].rect(r,t,a)}};return t}var IF={lineX:RF(0),lineY:RF(1),rect:{point:function(a,e,t){return a&&t.boundingRect.contain(a[0],a[1])},rect:function(a,e,t){return a&&t.boundingRect.intersect(a)}},polygon:{point:function(a,e,t){return a&&t.boundingRect.contain(a[0],a[1])&&Bf(t.range,a[0],a[1])},rect:function(a,e,t){var r=t.range;if(!a||r.length<=1)return!1;var n=a.x,i=a.y,o=a.width,l=a.height,c=r[0];if(Bf(r,n,i)||Bf(r,n+o,i)||Bf(r,n,i+l)||Bf(r,n+o,i+l)||Jt.create(a).contain(c[0],c[1])||Gg(n,i,n+o,i,r)||Gg(n,i,n,i+l,r)||Gg(n+o,i,n+o,i+l,r)||Gg(n,i+l,n+o,i+l,r))return!0}}};function RF(a){var e=["x","y"],t=["width","height"];return{point:function(r,n,i){if(r){var o=i.range,l=r[a];return wg(l,o)}},rect:function(r,n,i){if(r){var o=i.range,l=[r[e[a]],r[e[a]]+r[t[a]]];return l[1]<l[0]&&l.reverse(),wg(l[0],o)||wg(l[1],o)||wg(o[0],l)||wg(o[1],l)}}}}function wg(a,e){return e[0]<=a&&a<=e[1]}var LF=["inBrush","outOfBrush"],bC="__ecBrushSelect",bA="__ecInBrushSelectEvent";function _K(a){a.eachComponent({mainType:"brush"},function(e){var t=e.brushTargetManager=new RE(e.option,a);t.setInputRanges(e.areas,a)})}function gMe(a,e,t){var r=[],n,i;a.eachComponent({mainType:"brush"},function(o){t&&t.type==="takeGlobalCursor"&&o.setBrushOption(t.key==="brush"?t.brushOption:{brushType:!1})}),_K(a),a.eachComponent({mainType:"brush"},function(o,l){var c={brushId:o.id,brushIndex:l,brushName:o.name,areas:$t(o.areas),selected:[]};r.push(c);var d=o.option,u=d.brushLink,h=[],f=[],p=[],g=!1;l||(n=d.throttleType,i=d.throttleDelay);var b=it(o.areas,function(I){var O=wMe[I.brushType],P=Kt({boundingRect:O?O(I):void 0},I);return P.selectors=mMe(P),P}),w=vA(o.option,LF,function(I){I.mappingMethod="fixed"});rt(u)&&oe(u,function(I){h[I]=1});function _(I){return u==="all"||!!h[I]}function k(I){return!!I.length}a.eachSeries(function(I,O){var P=p[O]=[];I.subType==="parallel"?T(I,O):D(I,O,P)});function T(I,O){var P=I.coordinateSystem;g=g||P.hasAxisBrushed(),_(O)&&P.eachActiveState(I.getData(),function(V,G){V==="active"&&(f[G]=1)})}function D(I,O,P){if(!(!I.brushSelector||yMe(o,O))&&(oe(b,function(G){o.brushTargetManager.controlSeries(G,I,a)&&P.push(G),g=g||k(P)}),_(O)&&k(P))){var V=I.getData();V.each(function(G){OF(I,P,V,G)&&(f[G]=1)})}}a.eachSeries(function(I,O){var P={seriesId:I.id,seriesIndex:O,seriesName:I.name,dataIndex:[]};c.selected.push(P);var V=p[O],G=I.getData(),Q=_(O)?function($){return f[$]?(P.dataIndex.push(G.getRawIndex($)),"inBrush"):"outOfBrush"}:function($){return OF(I,V,G,$)?(P.dataIndex.push(G.getRawIndex($)),"inBrush"):"outOfBrush"};(_(O)?g:k(V))&&pMe(LF,w,G,Q)})}),vMe(e,n,i,r,t)}function vMe(a,e,t,r,n){if(n){var i=a.getZr();if(!i[bA]){i[bC]||(i[bC]=bMe);var o=Qx(i,bC,t,e);o(a,r)}}}function bMe(a,e){if(!a.isDisposed()){var t=a.getZr();t[bA]=!0,a.dispatchAction({type:"brushSelect",batch:e}),t[bA]=!1}}function OF(a,e,t,r){for(var n=0,i=e.length;n<i;n++){var o=e[n];if(a.brushSelector(r,t,o.selectors,o))return!0}}function yMe(a,e){var t=a.option.seriesIndex;return t!=null&&t!=="all"&&(rt(t)?ya(t,e)<0:e!==t)}var wMe={rect:function(a){return PF(a.range)},polygon:function(a){for(var e,t=a.range,r=0,n=t.length;r<n;r++){e=e||[[1/0,-1/0],[1/0,-1/0]];var i=t[r];i[0]<e[0][0]&&(e[0][0]=i[0]),i[0]>e[0][1]&&(e[0][1]=i[0]),i[1]<e[1][0]&&(e[1][0]=i[1]),i[1]>e[1][1]&&(e[1][1]=i[1])}return e&&PF(e)}};function PF(a){return new Jt(a[0][0],a[1][0],a[0][1]-a[0][0],a[1][1]-a[1][0])}var _Me=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r,this.model,(this._brushController=new iE(r.getZr())).on("brush",St(this._onBrush,this)).mount()},e.prototype.render=function(t,r,n,i){this.model=t,this._updateController(t,r,n,i)},e.prototype.updateTransform=function(t,r,n,i){_K(r),this._updateController(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.updateTransform(t,r,n,i)},e.prototype.updateView=function(t,r,n,i){this._updateController(t,r,n,i)},e.prototype._updateController=function(t,r,n,i){(!i||i.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var r=this.model.id,n=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:$t(n),$from:r}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:$t(n),$from:r})},e.type="brush",e})(tn),NMe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.areas=[],t.brushOption={},t}return e.prototype.optionUpdated=function(t,r){var n=this.option;!r&&wK(n,t,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:this.option.defaultOutOfBrushColor},i.hasOwnProperty("liftZ")||(i.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=it(t,function(r){return BF(this.option,r)},this))},e.prototype.setBrushOption=function(t){this.brushOption=BF(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:Fe.color.backgroundTint,borderColor:Fe.color.borderTint},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4,defaultOutOfBrushColor:Fe.color.disabled},e})(Oa);function BF(a,e){return _a({brushType:a.brushType,brushMode:a.brushMode,transformable:a.transformable,brushStyle:new za(a.brushStyle).getItemStyle(),removeOnClick:a.removeOnClick,z:a.z},e,!0)}var jMe=["rect","polygon","lineX","lineY","keep","clear"],SMe=(function(a){Le(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.render=function(t,r,n){var i,o,l;r.eachComponent({mainType:"brush"},function(c){i=c.brushType,o=c.brushOption.brushMode||"single",l=l||!!c.areas.length}),this._brushType=i,this._brushMode=o,oe(t.get("type",!0),function(c){t.setIconStatus(c,(c==="keep"?o==="multiple":c==="clear"?l:c===i)?"emphasis":"normal")})},e.prototype.updateView=function(t,r,n){this.render(t,r,n)},e.prototype.getIcons=function(){var t=this.model,r=t.get("icon",!0),n={};return oe(t.get("type",!0),function(i){r[i]&&(n[i]=r[i])}),n},e.prototype.onclick=function(t,r,n){var i=this._brushType,o=this._brushMode;n==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:n==="keep"?i:i===n?!1:n,brushMode:n==="keep"?o==="multiple"?"single":"multiple":o}})},e.getDefaultOption=function(t){var r={show:!0,type:jMe.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])};return r},e})(Zo);function kMe(a){a.registerComponentView(_Me),a.registerComponentModel(NMe),a.registerPreprocessor(hMe),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,gMe),a.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(r){r.setAreas(e.areas)})}),a.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Bn),a.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Bn),Wp("brush",SMe)}var CMe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:"center",top:Fe.size.m,backgroundColor:Fe.color.transparent,borderColor:Fe.color.primary,borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:Fe.color.primary},subtextStyle:{fontSize:12,color:Fe.color.quaternary}},e})(Oa),AMe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){if(this.group.removeAll(),!!t.get("show")){var i=this.group,o=t.getModel("textStyle"),l=t.getModel("subtextStyle"),c=t.get("textAlign"),d=Pt(t.get("textBaseline"),t.get("textVerticalAlign")),u=new Ja({style:zr(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),h=u.getBoundingRect(),f=t.get("subtext"),p=new Ja({style:zr(l,{text:f,fill:l.getTextColor(),y:h.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),g=t.get("link"),b=t.get("sublink"),w=t.get("triggerEvent",!0);u.silent=!g&&!w,p.silent=!b&&!w,g&&u.on("click",function(){W2(g,"_"+t.get("target"))}),b&&p.on("click",function(){W2(b,"_"+t.get("subtarget"))}),na(u).eventData=na(p).eventData=w?{componentType:"title",componentIndex:t.componentIndex}:null,i.add(u),f&&i.add(p);var _=i.getBoundingRect(),k=t.getBoxLayoutParams();k.width=_.width,k.height=_.height;var T=pi(t,n),D=ln(k,T.refContainer,t.get("padding"));c||(c=t.get("left")||t.get("right"),c==="middle"&&(c="center"),c==="right"?D.x+=D.width:c==="center"&&(D.x+=D.width/2)),d||(d=t.get("top")||t.get("bottom"),d==="center"&&(d="middle"),d==="bottom"?D.y+=D.height:d==="middle"&&(D.y+=D.height/2),d=d||"top"),i.x=D.x,i.y=D.y,i.markRedraw();var I={align:c,verticalAlign:d};u.setStyle(I),p.setStyle(I),_=i.getBoundingRect();var O=D.margin,P=t.getItemStyle(["color","opacity"]);P.fill=t.get("backgroundColor");var V=new Ta({shape:{x:_.x-O[3],y:_.y-O[0],width:_.width+O[1]+O[3],height:_.height+O[0]+O[2],r:t.get("borderRadius")},style:P,subPixelOptimize:!0,silent:!0});i.add(V)}},e.type="title",e})(tn);function TMe(a){a.registerComponentModel(CMe),a.registerComponentView(AMe)}var zF=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.layoutMode="box",t}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n),this._initData()},e.prototype.mergeOption=function(t){a.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var r=this._data.count();this.option.loop?t=(t%r+r)%r:(t>=r&&(t=r-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t=this.option,r=t.data||[],n=t.axisType,i=this._names=[],o;n==="category"?(o=[],oe(r,function(d,u){var h=ui(Gx(d),""),f;Qt(d)?(f=$t(d),f.value=u):f=u,o.push(f),i.push(h)})):o=r;var l={category:"ordinal",time:"time",value:"number"}[n]||"number",c=this._data=new Ss([{name:"value",type:l}],this);c.initData(o,i)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:Fe.size.m,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:Fe.color.secondary},data:[]},e})(Oa),NK=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline.slider",e.defaultOption=Th(zF.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:Fe.color.border,borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:Fe.color.accent10},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:Fe.color.tertiary},itemStyle:{color:Fe.color.accent20,borderWidth:0},checkpointStyle:{symbol:"circle",symbolSize:15,color:Fe.color.accent50,borderColor:Fe.color.accent50,borderWidth:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0, 0, 0, 0)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10.6699C11.5 9.90014 12.3333 9.41887 13 9.80371L20.5 14.1338C21.1667 14.5187 21.1667 15.4813 20.5 15.8662L13 20.1963C12.3333 20.5811 11.5 20.0999 11.5 19.3301V10.6699Z",stopIcon:"path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10C12.3284 10 13 10.6716 13 11.5V18.5C13 19.3284 12.3284 20 11.5 20C10.6716 20 10 19.3284 10 18.5V11.5C10 10.6716 10.6716 10 11.5 10ZM18.5 10C19.3284 10 20 10.6716 20 11.5V18.5C20 19.3284 19.3284 20 18.5 20C17.6716 20 17 19.3284 17 18.5V11.5C17 10.6716 17.6716 10 18.5 10Z",nextIcon:"path://M0.838834 18.7383C0.253048 18.1525 0.253048 17.2028 0.838834 16.617L7.55635 9.89949L0.838834 3.18198C0.253048 2.59619 0.253048 1.64645 0.838834 1.06066C1.42462 0.474874 2.37437 0.474874 2.96015 1.06066L10.7383 8.83883L10.8412 8.95277C11.2897 9.50267 11.2897 10.2963 10.8412 10.8462L10.7383 10.9602L2.96015 18.7383C2.37437 19.3241 1.42462 19.3241 0.838834 18.7383Z",prevIcon:"path://M10.9602 1.06066C11.5459 1.64645 11.5459 2.59619 10.9602 3.18198L4.24264 9.89949L10.9602 16.617C11.5459 17.2028 11.5459 18.1525 10.9602 18.7383C10.3744 19.3241 9.42462 19.3241 8.83883 18.7383L1.06066 10.9602L0.957771 10.8462C0.509245 10.2963 0.509245 9.50267 0.957771 8.95277L1.06066 8.83883L8.83883 1.06066C9.42462 0.474874 10.3744 0.474874 10.9602 1.06066Z",prevBtnSize:18,nextBtnSize:18,color:Fe.color.accent50,borderColor:Fe.color.accent50,borderWidth:0},emphasis:{label:{show:!0,color:Fe.color.accent60},itemStyle:{color:Fe.color.accent60,borderColor:Fe.color.accent60},controlStyle:{color:Fe.color.accent70,borderColor:Fe.color.accent70}},progress:{lineStyle:{color:Fe.color.accent30},itemStyle:{color:Fe.color.accent40}},data:[]}),e})(zF);ti(NK,CN.prototype);var MMe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline",e})(tn),EMe=(function(a){Le(e,a);function e(t,r,n,i){var o=a.call(this,t,r,n)||this;return o.type=i||"value",o}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e})(Ll),yC=Math.PI,FF=Ea(),DMe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.api=r},e.prototype.render=function(t,r,n){if(this.model=t,this.api=n,this.ecModel=r,this.group.removeAll(),t.get("show",!0)){var i=this._layout(t,n),o=this._createGroup("_mainGroup"),l=this._createGroup("_labelGroup"),c=this._axis=this._createAxis(i,t);t.formatTooltip=function(d){var u=c.scale.getLabel({value:d});return Jn("nameValue",{noName:!0,value:u})},oe(["AxisLine","AxisTick","Control","CurrentPointer"],function(d){this["_render"+d](i,o,c,t)},this),this._renderAxisLabel(i,l,c,t),this._position(i,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,r){var n=t.get(["label","position"]),i=t.get("orient"),o=RMe(t,r),l;n==null||n==="auto"?l=i==="horizontal"?o.y+o.height/2<r.getHeight()/2?"-":"+":o.x+o.width/2<r.getWidth()/2?"+":"-":jt(n)?l={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][n]:l=n;var c={horizontal:"center",vertical:l>=0||l==="+"?"left":"right"},d={horizontal:l>=0||l==="+"?"top":"bottom",vertical:"middle"},u={horizontal:0,vertical:yC/2},h=i==="vertical"?o.height:o.width,f=t.getModel("controlStyle"),p=f.get("show",!0),g=p?f.get("itemSize"):0,b=p?f.get("itemGap"):0,w=g+b,_=t.get(["label","rotate"])||0;_=_*yC/180;var k,T,D,I=f.get("position",!0),O=p&&f.get("showPlayBtn",!0),P=p&&f.get("showPrevBtn",!0),V=p&&f.get("showNextBtn",!0),G=0,Q=h;I==="left"||I==="bottom"?(O&&(k=[0,0],G+=w),P&&(T=[G,0],G+=w),V&&(D=[Q-g,0],Q-=w)):(O&&(k=[Q-g,0],Q-=w),P&&(T=[0,0],G+=w),V&&(D=[Q-g,0],Q-=w));var $=[G,Q];return t.get("inverse")&&$.reverse(),{viewRect:o,mainLength:h,orient:i,rotation:u[i],labelRotation:_,labelPosOpt:l,labelAlign:t.get(["label","align"])||c[i],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||d[i],playPosition:k,prevBtnPosition:T,nextBtnPosition:D,axisExtent:$,controlSize:g,controlGap:b}},e.prototype._position=function(t,r){var n=this._mainGroup,i=this._labelGroup,o=t.viewRect;if(t.orient==="vertical"){var l=Ii(),c=o.x,d=o.y+o.height;Cc(l,l,[-c,-d]),Ch(l,l,-yC/2),Cc(l,l,[c,d]),o=o.clone(),o.applyTransform(l)}var u=k(o),h=k(n.getBoundingRect()),f=k(i.getBoundingRect()),p=[n.x,n.y],g=[i.x,i.y];g[0]=p[0]=u[0][0];var b=t.labelPosOpt;if(b==null||jt(b)){var w=b==="+"?0:1;T(p,h,u,1,w),T(g,f,u,1,1-w)}else{var w=b>=0?0:1;T(p,h,u,1,w),g[1]=p[1]+b}n.setPosition(p),i.setPosition(g),n.rotation=i.rotation=t.rotation,_(n),_(i);function _(D){D.originX=u[0][0]-D.x,D.originY=u[1][0]-D.y}function k(D){return[[D.x,D.x+D.width],[D.y,D.y+D.height]]}function T(D,I,O,P,V){D[P]+=O[P][V]-I[P][V]}},e.prototype._createAxis=function(t,r){var n=r.getData(),i=r.get("axisType"),o=IMe(r,i);o.getTicks=function(){return n.mapArray(["value"],function(d){return{value:d}})};var l=n.getDataExtent("value");o.setExtent(l[0],l[1]),o.calcNiceTicks();var c=new EMe("value",o,t.axisExtent,i);return c.model=r,c},e.prototype._createGroup=function(t){var r=this[t]=new Gt;return this.group.add(r),r},e.prototype._renderAxisLine=function(t,r,n,i){var o=n.getExtent();if(i.get(["lineStyle","show"])){var l=new qn({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:Je({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(l);var c=this._progressLine=new qn({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:Kt({lineCap:"round",lineWidth:l.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(c)}},e.prototype._renderAxisTick=function(t,r,n,i){var o=this,l=i.getData(),c=n.scale.getTicks();this._tickSymbols=[],oe(c,function(d){var u=n.dataToCoord(d.value),h=l.getItemModel(d.value),f=h.getModel("itemStyle"),p=h.getModel(["emphasis","itemStyle"]),g=h.getModel(["progress","itemStyle"]),b={x:u,y:0,onclick:St(o._changeTimeline,o,d.value)},w=VF(h,f,r,b);w.ensureState("emphasis").style=p.getItemStyle(),w.ensureState("progress").style=g.getItemStyle(),s0(w);var _=na(w);h.get("tooltip")?(_.dataIndex=d.value,_.dataModel=i):_.dataIndex=_.dataModel=null,o._tickSymbols.push(w)})},e.prototype._renderAxisLabel=function(t,r,n,i){var o=this,l=n.getLabelModel();if(l.get("show")){var c=i.getData(),d=n.getViewLabels();this._tickLabels=[],oe(d,function(u){var h=u.tickValue,f=c.getItemModel(h),p=f.getModel("label"),g=f.getModel(["emphasis","label"]),b=f.getModel(["progress","label"]),w=n.dataToCoord(u.tickValue),_=new Ja({x:w,y:0,rotation:t.labelRotation-t.rotation,onclick:St(o._changeTimeline,o,h),silent:!1,style:zr(p,{text:u.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});_.ensureState("emphasis").style=zr(g),_.ensureState("progress").style=zr(b),r.add(_),s0(_),FF(_).dataIndex=h,o._tickLabels.push(_)})}},e.prototype._renderControl=function(t,r,n,i){var o=t.controlSize,l=t.rotation,c=i.getModel("controlStyle").getItemStyle(),d=i.getModel(["emphasis","controlStyle"]).getItemStyle(),u=i.getPlayState(),h=i.get("inverse",!0);f(t.nextBtnPosition,"next",St(this._changeTimeline,this,h?"-":"+")),f(t.prevBtnPosition,"prev",St(this._changeTimeline,this,h?"+":"-")),f(t.playPosition,u?"stop":"play",St(this._handlePlayClick,this,!u),!0);function f(p,g,b,w){if(p){var _=Al(Pt(i.get(["controlStyle",g+"BtnSize"]),o),o),k=[0,-_/2,_,_],T=LMe(i,g+"Icon",k,{x:p[0],y:p[1],originX:o/2,originY:0,rotation:w?-l:0,rectHover:!0,style:c,onclick:b});T.ensureState("emphasis").style=d,r.add(T),s0(T)}}},e.prototype._renderCurrentPointer=function(t,r,n,i){var o=i.getData(),l=i.getCurrentIndex(),c=o.getItemModel(l).getModel("checkpointStyle"),d=this,u={onCreate:function(h){h.draggable=!0,h.drift=St(d._handlePointerDrag,d),h.ondragend=St(d._handlePointerDragend,d),HF(h,d._progressLine,l,n,i,!0)},onUpdate:function(h){HF(h,d._progressLine,l,n,i)}};this._currentPointer=VF(c,c,this._mainGroup,{},this._currentPointer,u)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,r,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,r){var n=this._toAxisCoord(t)[0],i=this._axis,o=el(i.getExtent().slice());n>o[1]&&(n=o[1]),n<o[0]&&(n=o[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var l=this._progressLine;l&&(l.shape.x2=n,l.dirty());var c=this._findNearestTick(n),d=this.model;(r||c!==d.getCurrentIndex()&&d.get("realtime"))&&this._changeTimeline(c)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=t.model;t._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var r=this._mainGroup.getLocalTransform();return jl(t,r,!0)},e.prototype._findNearestTick=function(t){var r=this.model.getData(),n=1/0,i,o=this._axis;return r.each(["value"],function(l,c){var d=o.dataToCoord(l),u=Math.abs(d-t);u<n&&(n=u,i=c)}),i},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var r=this.model.getCurrentIndex();t==="+"?t=r+1:t==="-"&&(t=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),r=this._tickSymbols,n=this._tickLabels;if(r)for(var i=0;i<r.length;i++)r&&r[i]&&r[i].toggleState("progress",i<t);if(n)for(var i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",FF(n[i]).dataIndex<=t)},e.type="timeline.slider",e})(MMe);function IMe(a,e){if(e=e||a.get("type"),e)switch(e){case"category":return new Mx({ordinalMeta:a.getCategories(),extent:[1/0,-1/0]});case"time":return new TM({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new zd}}function RMe(a,e){return ln(a.getBoxLayoutParams(),pi(a,e).refContainer,a.get("padding"))}function LMe(a,e,t,r){var n=r.style,i=Db(a.get(["controlStyle",e]),r||{},new Jt(t[0],t[1],t[2],t[3]));return n&&i.setStyle(n),i}function VF(a,e,t,r,n,i){var o=e.get("color");if(n)n.setColor(o),t.add(n),i&&i.onUpdate(n);else{var l=a.get("symbol");n=ei(l,-1,-1,2,2,o),n.setStyle("strokeNoScale",!0),t.add(n),i&&i.onCreate(n)}var c=e.getItemStyle(["color"]);n.setStyle(c),r=_a({rectHover:!0,z2:100},r,!0);var d=Jx(a.get("symbolSize"));r.scaleX=d[0]/2,r.scaleY=d[1]/2;var u=I0(a.get("symbolOffset"),d);u&&(r.x=(r.x||0)+u[0],r.y=(r.y||0)+u[1]);var h=a.get("symbolRotate");return r.rotation=(h||0)*Math.PI/180||0,n.attr(r),n.updateTransform(),n}function HF(a,e,t,r,n,i){if(!a.dragging){var o=n.getModel("checkpointStyle"),l=r.dataToCoord(n.getData().get("value",t));if(i||!o.get("animation",!0))a.attr({x:l,y:0}),e&&e.attr({shape:{x2:l}});else{var c={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};a.stopAnimation(null,!0),a.animateTo({x:l,y:0},c),e&&e.animateTo({shape:{x2:l}},c)}}}function OMe(a){a.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,r){var n=t.getComponent("timeline");return n&&e.currentIndex!=null&&(n.setCurrentIndex(e.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),r.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),Kt({currentIndex:n.option.currentIndex},e)}),a.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var r=t.getComponent("timeline");r&&e.playState!=null&&r.setPlayState(e.playState)})}function PMe(a){var e=a&&a.timeline;rt(e)||(e=e?[e]:[]),oe(e,function(t){t&&BMe(t)})}function BMe(a){var e=a.type,t={number:"value",time:"time"};if(t[e]&&(a.axisType=t[e],delete a.type),UF(a),Vf(a,"controlPosition")){var r=a.controlStyle||(a.controlStyle={});Vf(r,"position")||(r.position=a.controlPosition),r.position==="none"&&!Vf(r,"show")&&(r.show=!1,delete r.position),delete a.controlPosition}oe(a.data||[],function(n){Qt(n)&&!rt(n)&&(!Vf(n,"value")&&Vf(n,"name")&&(n.value=n.name),UF(n))})}function UF(a){var e=a.itemStyle||(a.itemStyle={}),t=e.emphasis||(e.emphasis={}),r=a.label||a.label||{},n=r.normal||(r.normal={}),i={normal:1,emphasis:1};oe(r,function(o,l){!i[l]&&!Vf(n,l)&&(n[l]=o)}),t.label&&!Vf(r,"emphasis")&&(r.emphasis=t.label,delete t.label)}function Vf(a,e){return a.hasOwnProperty(e)}function zMe(a){a.registerComponentModel(NK),a.registerComponentView(DMe),a.registerSubTypeDefaulter("timeline",function(){return"slider"}),OMe(a),a.registerPreprocessor(PMe)}function PE(a,e){if(!a)return!1;for(var t=rt(a)?a:[a],r=0;r<t.length;r++)if(t[r]&&t[r][e])return!0;return!1}function mw(a){g0(a,"label",["show"])}var gw=Ea(),Dc=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.createdBySelf=!1,t.preventAutoZ=!0,t}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(Ba.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,r){this._mergeOption(t,r,!1,!1)},e.prototype._mergeOption=function(t,r,n,i){var o=this.mainType;n||r.eachSeries(function(l){var c=l.get(this.mainType,!0),d=gw(l)[o];if(!c||!c.data){gw(l)[o]=null;return}d?d._mergeOption(c,r,!0):(i&&mw(c),oe(c.data,function(u){u instanceof Array?(mw(u[0]),mw(u[1])):mw(u)}),d=this.createMarkerModelFromSeries(c,this,r),Je(d,{mainType:this.mainType,seriesIndex:l.seriesIndex,name:l.name,createdBySelf:!0}),d.__hostSeries=l),gw(l)[o]=d},this)},e.prototype.formatTooltip=function(t,r,n){var i=this.getData(),o=this.getRawValue(t),l=i.getName(t);return Jn("section",{header:this.name,blocks:[Jn("nameValue",{name:l,value:o,noName:!l,noValue:o==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.prototype.getDataParams=function(t,r){var n=CN.prototype.getDataParams.call(this,t,r),i=this.__hostSeries;return i&&(n.seriesId=i.id,n.seriesName=i.name,n.seriesType=i.subType),n},e.getMarkerModelFromSeries=function(t,r){return gw(t)[r]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e})(Oa);ti(Dc,CN.prototype);var FMe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,n){return new e(t,r,n)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e})(Dc);function yA(a){return!(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function VMe(a){return!isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function vw(a,e,t,r,n,i,o){var l=[],c=bh(e,n),d=c?e.getCalculationInfo("stackResultDimension"):n,u=j_(e,d,a),h=e.hostModel,f=h.indicesOfNearest(t,d,u)[0];l[i]=e.get(r,f),l[o]=e.get(d,f);var p=e.get(n,f),g=dc(e.get(n,f));return g=Math.min(g,20),g>=0&&(l[o]=+l[o].toFixed(g)),[l,p]}var bw={min:va(vw,"min"),max:va(vw,"max"),average:va(vw,"average"),median:va(vw,"median")};function hb(a,e){if(e){var t=a.getData(),r=a.coordinateSystem,n=r&&r.dimensions;if(!VMe(e)&&!rt(e.coord)&&rt(n)){var i=jK(e,t,r,a);if(e=$t(e),e.type&&bw[e.type]&&i.baseAxis&&i.valueAxis){var o=ya(n,i.baseAxis.dim),l=ya(n,i.valueAxis.dim),c=bw[e.type](t,i.valueAxis.dim,i.baseDataDim,i.valueDataDim,o,l);e.coord=c[0],e.value=c[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!rt(n)){e.coord=[];var d=a.getBaseAxis();if(d&&e.type&&bw[e.type]){var u=r.getOtherAxis(d);u&&(e.value=j_(t,t.mapDimension(u.dim),e.type))}}else for(var h=e.coord,f=0;f<2;f++)bw[h[f]]&&(h[f]=j_(t,t.mapDimension(n[f]),h[f]));return e}}function jK(a,e,t,r){var n={};return a.valueIndex!=null||a.valueDim!=null?(n.valueDataDim=a.valueIndex!=null?e.getDimension(a.valueIndex):a.valueDim,n.valueAxis=t.getAxis(HMe(r,n.valueDataDim)),n.baseAxis=t.getOtherAxis(n.valueAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim)):(n.baseAxis=r.getBaseAxis(),n.valueAxis=t.getOtherAxis(n.baseAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim),n.valueDataDim=e.mapDimension(n.valueAxis.dim)),n}function HMe(a,e){var t=a.getData().getDimensionInfo(e);return t&&t.coordDim}function fb(a,e){return a&&a.containData&&e.coord&&!yA(e)?a.containData(e.coord):!0}function UMe(a,e,t){return a&&a.containZone&&e.coord&&t.coord&&!yA(e)&&!yA(t)?a.containZone(e.coord,t.coord):!0}function SK(a,e){return a?function(t,r,n,i){var o=i<2?t.coord&&t.coord[i]:t.value;return dh(o,e[i])}:function(t,r,n,i){return dh(t.value,e[i])}}function j_(a,e,t){if(t==="average"){var r=0,n=0;return a.each(e,function(i,o){isNaN(i)||(r+=i,n++)}),r/n}else return t==="median"?a.getMedian(e):a.getDataExtent(e)[t==="max"?1:0]}var wC=Ea(),BE=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this.markerGroupMap=Rt()},e.prototype.render=function(t,r,n){var i=this,o=this.markerGroupMap;o.each(function(l){wC(l).keep=!1}),r.eachSeries(function(l){var c=Dc.getMarkerModelFromSeries(l,i.type);c&&i.renderSeries(l,c,r,n)}),o.each(function(l){!wC(l).keep&&i.group.remove(l.group)}),GMe(r,o,this.type)},e.prototype.markKeep=function(t){wC(t).keep=!0},e.prototype.toggleBlurSeries=function(t,r){var n=this;oe(t,function(i){var o=Dc.getMarkerModelFromSeries(i,n.type);if(o){var l=o.getData();l.eachItemGraphicEl(function(c){c&&(r?BW(c):$T(c))})}})},e.type="marker",e})(tn);function GMe(a,e,t){a.eachSeries(function(r){var n=Dc.getMarkerModelFromSeries(r,t),i=e.get(r.id);if(n&&i&&i.group){var o=_0(n),l=o.z,c=o.zlevel;_N(i.group,l,c)}})}function GF(a,e,t){var r=e.coordinateSystem,n=t.getWidth(),i=t.getHeight(),o=r&&r.getArea&&r.getArea();a.each(function(l){var c=a.getItemModel(l),d=c.get("relativeTo")==="coordinate",u=d?o?o.width:0:n,h=d?o?o.height:0:i,f=d&&o?o.x:0,p=d&&o?o.y:0,g,b=_t(c.get("x"),u)+f,w=_t(c.get("y"),h)+p;if(!isNaN(b)&&!isNaN(w))g=[b,w];else if(e.getMarkerPosition)g=e.getMarkerPosition(a.getValues(a.dimensions,l));else if(r){var _=a.get(r.dimensions[0],l),k=a.get(r.dimensions[1],l);g=r.dataToPoint([_,k])}isNaN(b)||(g[0]=b),isNaN(w)||(g[1]=w),a.setItemLayout(l,g)})}var WMe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,n){r.eachSeries(function(i){var o=Dc.getMarkerModelFromSeries(i,"markPoint");o&&(GF(o.getData(),i,n),this.markerGroupMap.get(i.id).updateLayout())},this)},e.prototype.renderSeries=function(t,r,n,i){var o=t.coordinateSystem,l=t.id,c=t.getData(),d=this.markerGroupMap,u=d.get(l)||d.set(l,new Fb),h=$Me(o,t,r);r.setData(h),GF(r.getData(),t,i),h.each(function(f){var p=h.getItemModel(f),g=p.getShallow("symbol"),b=p.getShallow("symbolSize"),w=p.getShallow("symbolRotate"),_=p.getShallow("symbolOffset"),k=p.getShallow("symbolKeepAspect");if(Ut(g)||Ut(b)||Ut(w)||Ut(_)){var T=r.getRawValue(f),D=r.getDataParams(f);Ut(g)&&(g=g(T,D)),Ut(b)&&(b=b(T,D)),Ut(w)&&(w=w(T,D)),Ut(_)&&(_=_(T,D))}var I=p.getModel("itemStyle").getItemStyle(),O=p.get("z2"),P=Ob(c,"color");I.fill||(I.fill=P),h.setItemVisual(f,{z2:Pt(O,0),symbol:g,symbolSize:b,symbolRotate:w,symbolOffset:_,symbolKeepAspect:k,style:I})}),u.updateData(h),this.group.add(u.group),h.eachItemGraphicEl(function(f){f.traverse(function(p){na(p).dataModel=r})}),this.markKeep(u),u.group.silent=r.get("silent")||t.get("silent")},e.type="markPoint",e})(BE);function $Me(a,e,t){var r;a?r=it(a&&a.dimensions,function(l){var c=e.getData().getDimensionInfo(e.getData().mapDimension(l))||{};return Je(Je({},c),{name:l,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var n=new Ss(r,t),i=it(t.get("data"),va(hb,e));a&&(i=hr(i,va(fb,a)));var o=SK(!!a,r);return n.initData(i,null,o),n}function YMe(a){a.registerComponentModel(FMe),a.registerComponentView(WMe),a.registerPreprocessor(function(e){PE(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}var qMe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,n){return new e(t,r,n)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e})(Dc),yw=Ea(),XMe=function(a,e,t,r){var n=a.getData(),i;if(rt(r))i=r;else{var o=r.type;if(o==="min"||o==="max"||o==="average"||o==="median"||r.xAxis!=null||r.yAxis!=null){var l=void 0,c=void 0;if(r.yAxis!=null||r.xAxis!=null)l=e.getAxis(r.yAxis!=null?"y":"x"),c=Gi(r.yAxis,r.xAxis);else{var d=jK(r,n,e,a);l=d.valueAxis;var u=QY(n,d.valueDataDim);c=j_(n,u,o)}var h=l.dim==="x"?0:1,f=1-h,p=$t(r),g={coord:[]};p.type=null,p.coord=[],p.coord[f]=-1/0,g.coord[f]=1/0;var b=t.get("precision");b>=0&&Xa(c)&&(c=+c.toFixed(Math.min(b,20))),p.coord[h]=g.coord[h]=c,i=[p,g,{type:o,valueIndex:r.valueIndex,value:c}]}else i=[]}var w=[hb(a,i[0]),hb(a,i[1]),Je({},i[2])];return w[2].type=w[2].type||null,_a(w[2],w[0]),_a(w[2],w[1]),w};function S_(a){return!isNaN(a)&&!isFinite(a)}function WF(a,e,t,r){var n=1-a,i=r.dimensions[a];return S_(e[n])&&S_(t[n])&&e[a]===t[a]&&r.getAxis(i).containData(e[a])}function ZMe(a,e){if(a.type==="cartesian2d"){var t=e[0].coord,r=e[1].coord;if(t&&r&&(WF(1,t,r,a)||WF(0,t,r,a)))return!0}return fb(a,e[0])&&fb(a,e[1])}function _C(a,e,t,r,n){var i=r.coordinateSystem,o=a.getItemModel(e),l,c=_t(o.get("x"),n.getWidth()),d=_t(o.get("y"),n.getHeight());if(!isNaN(c)&&!isNaN(d))l=[c,d];else{if(r.getMarkerPosition)l=r.getMarkerPosition(a.getValues(a.dimensions,e));else{var u=i.dimensions,h=a.get(u[0],e),f=a.get(u[1],e);l=i.dataToPoint([h,f])}if(yh(i,"cartesian2d")){var p=i.getAxis("x"),g=i.getAxis("y"),u=i.dimensions;S_(a.get(u[0],e))?l[0]=p.toGlobalCoord(p.getExtent()[t?0:1]):S_(a.get(u[1],e))&&(l[1]=g.toGlobalCoord(g.getExtent()[t?0:1]))}isNaN(c)||(l[0]=c),isNaN(d)||(l[1]=d)}a.setItemLayout(e,l)}var KMe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,n){r.eachSeries(function(i){var o=Dc.getMarkerModelFromSeries(i,"markLine");if(o){var l=o.getData(),c=yw(o).from,d=yw(o).to;c.each(function(u){_C(c,u,!0,i,n),_C(d,u,!1,i,n)}),l.each(function(u){l.setItemLayout(u,[c.getItemLayout(u),d.getItemLayout(u)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,r,n,i){var o=t.coordinateSystem,l=t.id,c=t.getData(),d=this.markerGroupMap,u=d.get(l)||d.set(l,new rE);this.group.add(u.group);var h=QMe(o,t,r),f=h.from,p=h.to,g=h.line;yw(r).from=f,yw(r).to=p,r.setData(g);var b=r.get("symbol"),w=r.get("symbolSize"),_=r.get("symbolRotate"),k=r.get("symbolOffset");rt(b)||(b=[b,b]),rt(w)||(w=[w,w]),rt(_)||(_=[_,_]),rt(k)||(k=[k,k]),h.from.each(function(D){T(f,D,!0),T(p,D,!1)}),g.each(function(D){var I=g.getItemModel(D),O=I.getModel("lineStyle").getLineStyle();g.setItemLayout(D,[f.getItemLayout(D),p.getItemLayout(D)]);var P=I.get("z2");O.stroke==null&&(O.stroke=f.getItemVisual(D,"style").fill),g.setItemVisual(D,{z2:Pt(P,0),fromSymbolKeepAspect:f.getItemVisual(D,"symbolKeepAspect"),fromSymbolOffset:f.getItemVisual(D,"symbolOffset"),fromSymbolRotate:f.getItemVisual(D,"symbolRotate"),fromSymbolSize:f.getItemVisual(D,"symbolSize"),fromSymbol:f.getItemVisual(D,"symbol"),toSymbolKeepAspect:p.getItemVisual(D,"symbolKeepAspect"),toSymbolOffset:p.getItemVisual(D,"symbolOffset"),toSymbolRotate:p.getItemVisual(D,"symbolRotate"),toSymbolSize:p.getItemVisual(D,"symbolSize"),toSymbol:p.getItemVisual(D,"symbol"),style:O})}),u.updateData(g),h.line.eachItemGraphicEl(function(D){na(D).dataModel=r,D.traverse(function(I){na(I).dataModel=r})});function T(D,I,O){var P=D.getItemModel(I);_C(D,I,O,t,i);var V=P.getModel("itemStyle").getItemStyle();V.fill==null&&(V.fill=Ob(c,"color")),D.setItemVisual(I,{symbolKeepAspect:P.get("symbolKeepAspect"),symbolOffset:Pt(P.get("symbolOffset",!0),k[O?0:1]),symbolRotate:Pt(P.get("symbolRotate",!0),_[O?0:1]),symbolSize:Pt(P.get("symbolSize"),w[O?0:1]),symbol:Pt(P.get("symbol",!0),b[O?0:1]),style:V})}this.markKeep(u),u.group.silent=r.get("silent")||t.get("silent")},e.type="markLine",e})(BE);function QMe(a,e,t){var r;a?r=it(a&&a.dimensions,function(d){var u=e.getData().getDimensionInfo(e.getData().mapDimension(d))||{};return Je(Je({},u),{name:d,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var n=new Ss(r,t),i=new Ss(r,t),o=new Ss([],t),l=it(t.get("data"),va(XMe,e,a,t));a&&(l=hr(l,va(ZMe,a)));var c=SK(!!a,r);return n.initData(it(l,function(d){return d[0]}),null,c),i.initData(it(l,function(d){return d[1]}),null,c),o.initData(it(l,function(d){return d[2]})),o.hasItemOption=!0,{from:n,to:i,line:o}}function JMe(a){a.registerComponentModel(qMe),a.registerComponentView(KMe),a.registerPreprocessor(function(e){PE(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var eEe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,n){return new e(t,r,n)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e})(Dc),ww=Ea(),tEe=function(a,e,t,r){var n=r[0],i=r[1];if(!(!n||!i)){var o=hb(a,n),l=hb(a,i),c=o.coord,d=l.coord;c[0]=Gi(c[0],-1/0),c[1]=Gi(c[1],-1/0),d[0]=Gi(d[0],1/0),d[1]=Gi(d[1],1/0);var u=AT([{},o,l]);return u.coord=[o.coord,l.coord],u.x0=o.x,u.y0=o.y,u.x1=l.x,u.y1=l.y,u}};function k_(a){return!isNaN(a)&&!isFinite(a)}function $F(a,e,t,r){var n=1-a;return k_(e[n])&&k_(t[n])}function aEe(a,e){var t=e.coord[0],r=e.coord[1],n={coord:t,x:e.x0,y:e.y0},i={coord:r,x:e.x1,y:e.y1};return yh(a,"cartesian2d")?t&&r&&($F(1,t,r)||$F(0,t,r))?!0:UMe(a,n,i):fb(a,n)||fb(a,i)}function YF(a,e,t,r,n){var i=r.coordinateSystem,o=a.getItemModel(e),l,c=_t(o.get(t[0]),n.getWidth()),d=_t(o.get(t[1]),n.getHeight());if(!isNaN(c)&&!isNaN(d))l=[c,d];else{if(r.getMarkerPosition){var u=a.getValues(["x0","y0"],e),h=a.getValues(["x1","y1"],e),f=i.clampData(u),p=i.clampData(h),g=[];t[0]==="x0"?g[0]=f[0]>p[0]?h[0]:u[0]:g[0]=f[0]>p[0]?u[0]:h[0],t[1]==="y0"?g[1]=f[1]>p[1]?h[1]:u[1]:g[1]=f[1]>p[1]?u[1]:h[1],l=r.getMarkerPosition(g,t,!0)}else{var b=a.get(t[0],e),w=a.get(t[1],e),_=[b,w];i.clampData&&i.clampData(_,_),l=i.dataToPoint(_,!0)}if(yh(i,"cartesian2d")){var k=i.getAxis("x"),T=i.getAxis("y"),b=a.get(t[0],e),w=a.get(t[1],e);k_(b)?l[0]=k.toGlobalCoord(k.getExtent()[t[0]==="x0"?0:1]):k_(w)&&(l[1]=T.toGlobalCoord(T.getExtent()[t[1]==="y0"?0:1]))}isNaN(c)||(l[0]=c),isNaN(d)||(l[1]=d)}return l}var qF=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],rEe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,n){r.eachSeries(function(i){var o=Dc.getMarkerModelFromSeries(i,"markArea");if(o){var l=o.getData();l.each(function(c){var d=it(qF,function(h){return YF(l,c,h,i,n)});l.setItemLayout(c,d);var u=l.getItemGraphicEl(c);u.setShape("points",d)})}},this)},e.prototype.renderSeries=function(t,r,n,i){var o=t.coordinateSystem,l=t.id,c=t.getData(),d=this.markerGroupMap,u=d.get(l)||d.set(l,{group:new Gt});this.group.add(u.group),this.markKeep(u);var h=nEe(o,t,r);r.setData(h),h.each(function(f){var p=it(qF,function(Q){return YF(h,f,Q,t,i)}),g=o.getAxis("x").scale,b=o.getAxis("y").scale,w=g.getExtent(),_=b.getExtent(),k=[g.parse(h.get("x0",f)),g.parse(h.get("x1",f))],T=[b.parse(h.get("y0",f)),b.parse(h.get("y1",f))];el(k),el(T);var D=!(w[0]>k[1]||w[1]<k[0]||_[0]>T[1]||_[1]<T[0]),I=!D;h.setItemLayout(f,{points:p,allClipped:I});var O=h.getItemModel(f),P=O.getModel("itemStyle").getItemStyle(),V=O.get("z2"),G=Ob(c,"color");P.fill||(P.fill=G,jt(P.fill)&&(P.fill=E2(P.fill,.4))),P.stroke||(P.stroke=G),h.setItemVisual(f,"style",P),h.setItemVisual(f,"z2",Pt(V,0))}),h.diff(ww(u).data).add(function(f){var p=h.getItemLayout(f),g=h.getItemVisual(f,"z2");if(!p.allClipped){var b=new us({z2:Pt(g,0),shape:{points:p.points}});h.setItemGraphicEl(f,b),u.group.add(b)}}).update(function(f,p){var g=ww(u).data.getItemGraphicEl(p),b=h.getItemLayout(f),w=h.getItemVisual(f,"z2");b.allClipped?g&&u.group.remove(g):(g?rr(g,{z2:Pt(w,0),shape:{points:b.points}},r,f):g=new us({shape:{points:b.points}}),h.setItemGraphicEl(f,g),u.group.add(g))}).remove(function(f){var p=ww(u).data.getItemGraphicEl(f);u.group.remove(p)}).execute(),h.eachItemGraphicEl(function(f,p){var g=h.getItemModel(p),b=h.getItemVisual(p,"style");f.useStyle(h.getItemVisual(p,"style")),ji(f,fi(g),{labelFetcher:r,labelDataIndex:p,defaultText:h.getName(p)||"",inheritColor:jt(b.fill)?E2(b.fill,1):Fe.color.neutral99}),hi(f,g),on(f,null,null,g.get(["emphasis","disabled"])),na(f).dataModel=r}),ww(u).data=h,u.group.silent=r.get("silent")||t.get("silent")},e.type="markArea",e})(BE);function nEe(a,e,t){var r,n,i=["x0","y0","x1","y1"];if(a){var o=it(a&&a.dimensions,function(d){var u=e.getData(),h=u.getDimensionInfo(u.mapDimension(d))||{};return Je(Je({},h),{name:d,ordinalMeta:null})});n=it(i,function(d,u){return{name:d,type:o[u%2].type}}),r=new Ss(n,t)}else n=[{name:"value",type:"float"}],r=new Ss(n,t);var l=it(t.get("data"),va(tEe,e,a,t));a&&(l=hr(l,va(aEe,a)));var c=a?function(d,u,h,f){var p=d.coord[Math.floor(f/2)][f%2];return dh(p,n[f])}:function(d,u,h,f){return dh(d.value,n[f])};return r.initData(l,null,c),r.hasItemOption=!0,r}function iEe(a){a.registerComponentModel(eEe),a.registerComponentView(rEe),a.registerPreprocessor(function(e){PE(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var sEe=function(a,e){if(e==="all")return{type:"all",title:a.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:a.getLocaleModel().get(["legend","selector","inverse"])}},wA=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,r){a.prototype.mergeOption.call(this,t,r),this._updateSelector(t)},e.prototype._updateSelector=function(t){var r=t.selector,n=this.ecModel;r===!0&&(r=t.selector=["all","inverse"]),rt(r)&&oe(r,function(i,o){jt(i)&&(i={type:i}),r[o]=_a(i,sEe(n,i.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var r=!1,n=0;n<t.length;n++){var i=t[n].get("name");if(this.isSelected(i)){this.select(i),r=!0;break}}!r&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var r=[],n=[];t.eachRawSeries(function(c){var d=c.name;n.push(d);var u;if(c.legendVisualProvider){var h=c.legendVisualProvider,f=h.getAllNames();t.isSeriesFiltered(c)||(n=n.concat(f)),f.length?r=r.concat(f):u=!0}else u=!0;u&&PT(c)&&r.push(c.name)}),this._availableNames=n;var i=this.get("data")||r,o=Rt(),l=it(i,function(c){return(jt(c)||Xa(c))&&(c={name:c}),o.get(c.name)?null:(o.set(c.name,!0),new za(c,this,this.ecModel))},this);this._data=hr(l,function(c){return!!c})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var r=this.option.selected,n=this.get("selectedMode");if(n==="single"){var i=this._data;oe(i,function(o){r[o.get("name")]=!1})}r[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var r=this.option.selected;r.hasOwnProperty(t)||(r[t]=!0),this[r[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,r=this.option.selected;oe(t,function(n){r[n.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,r=this.option.selected;oe(t,function(n){var i=n.get("name",!0);r.hasOwnProperty(i)||(r[i]=!0),r[i]=!r[i]})},e.prototype.isSelected=function(t){var r=this.option.selected;return!(r.hasOwnProperty(t)&&!r[t])&&ya(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",bottom:Fe.size.m,align:"auto",backgroundColor:Fe.color.transparent,borderColor:Fe.color.border,borderRadius:0,borderWidth:0,padding:5,itemGap:8,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:Fe.color.disabled,inactiveBorderColor:Fe.color.disabled,inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:Fe.color.disabled,inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:Fe.color.secondary},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:Fe.color.tertiary,borderWidth:1,borderColor:Fe.color.border},emphasis:{selectorLabel:{show:!0,color:Fe.color.quaternary}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1},triggerEvent:!1},e})(Oa),Op=va,_A=oe,_w=Gt,kK=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new _w),this.group.add(this._selectorGroup=new _w),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,r,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var o=t.get("align"),l=t.get("orient");(!o||o==="auto")&&(o=t.get("left")==="right"&&l==="vertical"?"right":"left");var c=t.get("selector",!0),d=t.get("selectorPosition",!0);c&&(!d||d==="auto")&&(d=l==="horizontal"?"end":"start"),this.renderInner(o,t,r,n,c,l,d);var u=pi(t,n).refContainer,h=t.getBoxLayoutParams(),f=t.get("padding"),p=ln(h,u,f),g=this.layoutInner(t,o,p,i,c,d),b=ln(Kt({width:g.width,height:g.height},h),u,f);this.group.x=b.x-g.x,this.group.y=b.y-g.y,this.group.markRedraw(),this.group.add(this._backgroundEl=pK(g,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,r,n,i,o,l,c){var d=this.getContentGroup(),u=Rt(),h=r.get("selectedMode"),f=r.get("triggerEvent"),p=[];n.eachRawSeries(function(g){!g.get("legendHoverLink")&&p.push(g.id)}),_A(r.getData(),function(g,b){var w=this,_=g.get("name");if(!this.newlineDisabled&&(_===""||_===`
`)){var k=new _w;k.newline=!0,d.add(k);return}var T=n.getSeriesByName(_)[0];if(!u.get(_))if(T){var D=T.getData(),I=D.getVisual("legendLineStyle")||{},O=D.getVisual("legendIcon"),P=D.getVisual("style"),V=this._createItem(T,_,b,g,r,t,I,P,O,h,i);V.on("click",Op(XF,_,null,i,p)).on("mouseover",Op(NA,T.name,null,i,p)).on("mouseout",Op(jA,T.name,null,i,p)),n.ssr&&V.eachChild(function(G){var Q=na(G);Q.seriesIndex=T.seriesIndex,Q.dataIndex=b,Q.ssrType="legend"}),f&&V.eachChild(function(G){w.packEventData(G,r,T,b,_)}),u.set(_,!0)}else n.eachRawSeries(function(G){var Q=this;if(!u.get(_)&&G.legendVisualProvider){var $=G.legendVisualProvider;if(!$.containName(_))return;var ae=$.indexOfName(_),J=$.getItemVisual(ae,"style"),U=$.getItemVisual(ae,"legendIcon"),F=qs(J.fill);F&&F[3]===0&&(F[3]=.2,J=Je(Je({},J),{fill:yc(F,"rgba")}));var W=this._createItem(G,_,b,g,r,t,{},J,U,h,i);W.on("click",Op(XF,null,_,i,p)).on("mouseover",Op(NA,null,_,i,p)).on("mouseout",Op(jA,null,_,i,p)),n.ssr&&W.eachChild(function(K){var ee=na(K);ee.seriesIndex=G.seriesIndex,ee.dataIndex=b,ee.ssrType="legend"}),f&&W.eachChild(function(K){Q.packEventData(K,r,G,b,_)}),u.set(_,!0)}},this)},this),o&&this._createSelector(o,r,i,l,c)},e.prototype.packEventData=function(t,r,n,i,o){var l={componentType:"legend",componentIndex:r.componentIndex,dataIndex:i,value:o,seriesIndex:n.seriesIndex};na(t).eventData=l},e.prototype._createSelector=function(t,r,n,i,o){var l=this.getSelectorGroup();_A(t,function(d){var u=d.type,h=new Ja({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:u==="all"?"legendAllSelect":"legendInverseSelect",legendId:r.id})}});l.add(h);var f=r.getModel("selectorLabel"),p=r.getModel(["emphasis","selectorLabel"]);ji(h,{normal:f,emphasis:p},{defaultText:d.title}),s0(h)})},e.prototype._createItem=function(t,r,n,i,o,l,c,d,u,h,f){var p=t.visualDrawType,g=o.get("itemWidth"),b=o.get("itemHeight"),w=o.isSelected(r),_=i.get("symbolRotate"),k=i.get("symbolKeepAspect"),T=i.get("icon");u=T||u||"roundRect";var D=oEe(u,i,c,d,p,w,f),I=new _w,O=i.getModel("textStyle");if(Ut(t.getLegendIcon)&&(!T||T==="inherit"))I.add(t.getLegendIcon({itemWidth:g,itemHeight:b,icon:u,iconRotate:_,itemStyle:D.itemStyle,lineStyle:D.lineStyle,symbolKeepAspect:k}));else{var P=T==="inherit"&&t.getData().getVisual("symbol")?_==="inherit"?t.getData().getVisual("symbolRotate"):_:0;I.add(lEe({itemWidth:g,itemHeight:b,icon:u,iconRotate:P,itemStyle:D.itemStyle,symbolKeepAspect:k}))}var V=l==="left"?g+5:-5,G=l,Q=o.get("formatter"),$=r;jt(Q)&&Q?$=Q.replace("{name}",r??""):Ut(Q)&&($=Q(r));var ae=w?O.getTextColor():i.get("inactiveColor");I.add(new Ja({style:zr(O,{text:$,x:V,y:b/2,fill:ae,align:G,verticalAlign:"middle"},{inheritColor:ae})}));var J=new Ta({shape:I.getBoundingRect(),style:{fill:"transparent"}}),U=i.getModel("tooltip");return U.get("show")&&Gd({el:J,componentModel:o,itemName:r,itemTooltipOption:U.option}),I.add(J),I.eachChild(function(F){F.silent=!0}),J.silent=!h,this.getContentGroup().add(I),s0(I),I.__legendDataIndex=n,I},e.prototype.layoutInner=function(t,r,n,i,o,l){var c=this.getContentGroup(),d=this.getSelectorGroup();l0(t.get("orient"),c,t.get("itemGap"),n.width,n.height);var u=c.getBoundingRect(),h=[-u.x,-u.y];if(d.markRedraw(),c.markRedraw(),o){l0("horizontal",d,t.get("selectorItemGap",!0));var f=d.getBoundingRect(),p=[-f.x,-f.y],g=t.get("selectorButtonGap",!0),b=t.getOrient().index,w=b===0?"width":"height",_=b===0?"height":"width",k=b===0?"y":"x";l==="end"?p[b]+=u[w]+g:h[b]+=f[w]+g,p[1-b]+=u[_]/2-f[_]/2,d.x=p[0],d.y=p[1],c.x=h[0],c.y=h[1];var T={x:0,y:0};return T[w]=u[w]+g+f[w],T[_]=Math.max(u[_],f[_]),T[k]=Math.min(0,f[k]+p[1-b]),T}else return c.x=h[0],c.y=h[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e})(tn);function oEe(a,e,t,r,n,i,o){function l(w,_){w.lineWidth==="auto"&&(w.lineWidth=_.lineWidth>0?2:0),_A(w,function(k,T){w[T]==="inherit"&&(w[T]=_[T])})}var c=e.getModel("itemStyle"),d=c.getItemStyle(),u=a.lastIndexOf("empty",0)===0?"fill":"stroke",h=c.getShallow("decal");d.decal=!h||h==="inherit"?r.decal:Tx(h,o),d.fill==="inherit"&&(d.fill=r[n]),d.stroke==="inherit"&&(d.stroke=r[u]),d.opacity==="inherit"&&(d.opacity=(n==="fill"?r:t).opacity),l(d,r);var f=e.getModel("lineStyle"),p=f.getLineStyle();if(l(p,t),d.fill==="auto"&&(d.fill=r.fill),d.stroke==="auto"&&(d.stroke=r.fill),p.stroke==="auto"&&(p.stroke=r.fill),!i){var g=e.get("inactiveBorderWidth"),b=d[u];d.lineWidth=g==="auto"?r.lineWidth>0&&b?2:0:d.lineWidth,d.fill=e.get("inactiveColor"),d.stroke=e.get("inactiveBorderColor"),p.stroke=f.get("inactiveColor"),p.lineWidth=f.get("inactiveWidth")}return{itemStyle:d,lineStyle:p}}function lEe(a){var e=a.icon||"roundRect",t=ei(e,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill,a.symbolKeepAspect);return t.setStyle(a.itemStyle),t.rotation=(a.iconRotate||0)*Math.PI/180,t.setOrigin([a.itemWidth/2,a.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill=Fe.color.neutral00,t.style.lineWidth=2),t}function XF(a,e,t,r){jA(a,e,t,r),t.dispatchAction({type:"legendToggleSelect",name:a??e}),NA(a,e,t,r)}function CK(a){for(var e=a.getZr().storage.getDisplayList(),t,r=0,n=e.length;r<n&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function NA(a,e,t,r){CK(t)||t.dispatchAction({type:"highlight",seriesName:a,name:e,excludeSeriesId:r})}function jA(a,e,t,r){CK(t)||t.dispatchAction({type:"downplay",seriesName:a,name:e,excludeSeriesId:r})}function cEe(a){var e=a.findComponents({mainType:"legend"});e&&e.length&&a.filterSeries(function(t){for(var r=0;r<e.length;r++)if(!e[r].isSelected(t.name))return!1;return!0})}function _g(a,e,t){var r=a==="allSelect"||a==="inverseSelect",n={},i=[];t.eachComponent({mainType:"legend",query:e},function(l){r?l[a]():l[a](e.name),ZF(l,n),i.push(l.componentIndex)});var o={};return t.eachComponent("legend",function(l){oe(n,function(c,d){l[c?"select":"unSelect"](d)}),ZF(l,o)}),r?{selected:o,legendIndex:i}:{name:e.name,selected:o}}function ZF(a,e){var t=e||{};return oe(a.getData(),function(r){var n=r.get("name");if(!(n===`
`||n==="")){var i=a.isSelected(n);Dt(t,n)?t[n]=t[n]&&i:t[n]=i}}),t}function dEe(a){a.registerAction("legendToggleSelect","legendselectchanged",va(_g,"toggleSelected")),a.registerAction("legendAllSelect","legendselectall",va(_g,"allSelect")),a.registerAction("legendInverseSelect","legendinverseselect",va(_g,"inverseSelect")),a.registerAction("legendSelect","legendselected",va(_g,"select")),a.registerAction("legendUnSelect","legendunselected",va(_g,"unSelect"))}function AK(a){a.registerComponentModel(wA),a.registerComponentView(kK),a.registerProcessor(a.PRIORITY.PROCESSOR.SERIES_FILTER,cEe),a.registerSubTypeDefaulter("legend",function(){return"plain"}),dEe(a)}var uEe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,r,n){var i=E0(t);a.prototype.init.call(this,t,r,n),KF(this,t,i)},e.prototype.mergeOption=function(t,r){a.prototype.mergeOption.call(this,t,r),KF(this,this.option,t)},e.type="legend.scroll",e.defaultOption=Th(wA.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:Fe.color.accent50,pageIconInactiveColor:Fe.color.accent10,pageIconSize:15,pageTextStyle:{color:Fe.color.tertiary},animationDurationUpdate:800}),e})(wA);function KF(a,e,t){var r=a.getOrient(),n=[1,1];n[r.index]=0,Mc(e,t,{type:"box",ignoreSize:!!n})}var QF=Gt,NC=["width","height"],jC=["x","y"],hEe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){a.prototype.init.call(this),this.group.add(this._containerGroup=new QF),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new QF)},e.prototype.resetInner=function(){a.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,r,n,i,o,l,c){var d=this;a.prototype.renderInner.call(this,t,r,n,i,o,l,c);var u=this._controllerGroup,h=r.get("pageIconSize",!0),f=rt(h)?h:[h,h];g("pagePrev",0);var p=r.getModel("pageTextStyle");u.add(new Ja({name:"pageText",style:{text:"xx/xx",fill:p.getTextColor(),font:p.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1);function g(b,w){var _=b+"DataIndex",k=Db(r.get("pageIcons",!0)[r.getOrient().name][w],{onclick:St(d._pageGo,d,_,r,i)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});k.name=b,u.add(k)}},e.prototype.layoutInner=function(t,r,n,i,o,l){var c=this.getSelectorGroup(),d=t.getOrient().index,u=NC[d],h=jC[d],f=NC[1-d],p=jC[1-d];o&&l0("horizontal",c,t.get("selectorItemGap",!0));var g=t.get("selectorButtonGap",!0),b=c.getBoundingRect(),w=[-b.x,-b.y],_=$t(n);o&&(_[u]=n[u]-b[u]-g);var k=this._layoutContentAndController(t,i,_,d,u,f,p,h);if(o){if(l==="end")w[d]+=k[u]+g;else{var T=b[u]+g;w[d]-=T,k[h]-=T}k[u]+=b[u]+g,w[1-d]+=k[p]+k[f]/2-b[f]/2,k[f]=Math.max(k[f],b[f]),k[p]=Math.min(k[p],b[p]+w[1-d]),c.x=w[0],c.y=w[1],c.markRedraw()}return k},e.prototype._layoutContentAndController=function(t,r,n,i,o,l,c,d){var u=this.getContentGroup(),h=this._containerGroup,f=this._controllerGroup;l0(t.get("orient"),u,t.get("itemGap"),i?n.width:null,i?null:n.height),l0("horizontal",f,t.get("pageButtonItemGap",!0));var p=u.getBoundingRect(),g=f.getBoundingRect(),b=this._showController=p[o]>n[o],w=[-p.x,-p.y];r||(w[i]=u[d]);var _=[0,0],k=[-g.x,-g.y],T=Pt(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(b){var D=t.get("pageButtonPosition",!0);D==="end"?k[i]+=n[o]-g[o]:_[i]+=g[o]+T}k[1-i]+=p[l]/2-g[l]/2,u.setPosition(w),h.setPosition(_),f.setPosition(k);var I={x:0,y:0};if(I[o]=b?n[o]:p[o],I[l]=Math.max(p[l],g[l]),I[c]=Math.min(0,g[c]+k[1-i]),h.__rectSize=n[o],b){var O={x:0,y:0};O[o]=Math.max(n[o]-g[o]-T,0),O[l]=I[l],h.setClipPath(new Ta({shape:O})),h.__rectSize=O[o]}else f.eachChild(function(V){V.attr({invisible:!0,silent:!0})});var P=this._getPageInfo(t);return P.pageIndex!=null&&rr(u,{x:P.contentPosition[0],y:P.contentPosition[1]},b?t:null),this._updatePageInfoView(t,P),I},e.prototype._pageGo=function(t,r,n){var i=this._getPageInfo(r)[t];i!=null&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:r.id})},e.prototype._updatePageInfoView=function(t,r){var n=this._controllerGroup;oe(["pagePrev","pageNext"],function(u){var h=u+"DataIndex",f=r[h]!=null,p=n.childOfName(u);p&&(p.setStyle("fill",f?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),p.cursor=f?"pointer":"default")});var i=n.childOfName("pageText"),o=t.get("pageFormatter"),l=r.pageIndex,c=l!=null?l+1:0,d=r.pageCount;i&&o&&i.setStyle("text",jt(o)?o.replace("{current}",c==null?"":c+"").replace("{total}",d==null?"":d+""):o({current:c,total:d}))},e.prototype._getPageInfo=function(t){var r=t.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,o=t.getOrient().index,l=NC[o],c=jC[o],d=this._findTargetItemIndex(r),u=n.children(),h=u[d],f=u.length,p=f?1:0,g={contentPosition:[n.x,n.y],pageCount:p,pageIndex:p-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return g;var b=D(h);g.contentPosition[o]=-b.s;for(var w=d+1,_=b,k=b,T=null;w<=f;++w)T=D(u[w]),(!T&&k.e>_.s+i||T&&!I(T,_.s))&&(k.i>_.i?_=k:_=T,_&&(g.pageNextDataIndex==null&&(g.pageNextDataIndex=_.i),++g.pageCount)),k=T;for(var w=d-1,_=b,k=b,T=null;w>=-1;--w)T=D(u[w]),(!T||!I(k,T.s))&&_.i<k.i&&(k=_,g.pagePrevDataIndex==null&&(g.pagePrevDataIndex=_.i),++g.pageCount,++g.pageIndex),_=T;return g;function D(O){if(O){var P=O.getBoundingRect(),V=P[c]+O[c];return{s:V,e:V+P[l],i:O.__legendDataIndex}}}function I(O,P){return O.e>=P&&O.s<=P+i}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var r,n=this.getContentGroup(),i;return n.eachChild(function(o,l){var c=o.__legendDataIndex;i==null&&c!=null&&(i=l),c===t&&(r=l)}),r??i},e.type="legend.scroll",e})(kK);function fEe(a){a.registerAction("legendScroll","legendscroll",function(e,t){var r=e.scrollDataIndex;r!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(n){n.setScrollDataIndex(r)})})}function pEe(a){Sa(AK),a.registerComponentModel(uEe),a.registerComponentView(hEe),fEe(a)}function xEe(a){Sa(AK),Sa(pEe)}var mEe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.inside",e.defaultOption=Th(ub.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e})(ub),zE=Ea();function gEe(a,e,t){zE(a).coordSysRecordMap.each(function(r){var n=r.dataZoomInfoMap.get(e.uid);n&&(n.getRange=t)})}function vEe(a,e){for(var t=zE(a).coordSysRecordMap,r=t.keys(),n=0;n<r.length;n++){var i=r[n],o=t.get(i),l=o.dataZoomInfoMap;if(l){var c=e.uid,d=l.get(c);d&&(l.removeKey(c),l.keys().length||TK(t,o))}}}function TK(a,e){if(e){a.removeKey(e.model.uid);var t=e.controller;t&&t.dispose()}}function bEe(a,e){var t={model:e,containsPoint:va(wEe,e),dispatchAction:va(yEe,a),dataZoomInfoMap:null,controller:null},r=t.controller=new O0(a.getZr());return oe(["pan","zoom","scrollMove"],function(n){r.on(n,function(i){var o=[];t.dataZoomInfoMap.each(function(l){if(i.isAvailableBehavior(l.model.option)){var c=(l.getRange||{})[n],d=c&&c(l.dzReferCoordSysInfo,t.model.mainType,t.controller,i);!l.model.get("disabled",!0)&&d&&o.push({dataZoomId:l.model.id,start:d[0],end:d[1]})}}),o.length&&t.dispatchAction(o)})}),t}function yEe(a,e){a.isDisposed()||a.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function wEe(a,e,t,r){return a.coordinateSystem.containPoint([t,r])}function _Ee(a,e,t){var r,n="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},o=!0;return a.each(function(l){var c=l.model,d=c.get("disabled",!0)?!1:c.get("zoomLock",!0)?"move":!0;i[n+d]>i[n+r]&&(r=d),o=o&&c.get("preventDefaultMouseMove",!0)}),{controlType:r,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!o,api:t,zInfo:{component:e.model},triggerInfo:{roamTrigger:null,isInSelf:e.containsPoint}}}}function NEe(a){a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,function(e,t){var r=zE(t),n=r.coordSysRecordMap||(r.coordSysRecordMap=Rt());n.each(function(i){i.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(i){var o=uK(i);oe(o.infoList,function(l){var c=l.model.uid,d=n.get(c)||n.set(c,bEe(t,l.model)),u=d.dataZoomInfoMap||(d.dataZoomInfoMap=Rt());u.set(i.uid,{dzReferCoordSysInfo:l,model:i,getRange:null})})}),n.each(function(i){var o=i.controller,l,c=i.dataZoomInfoMap;if(c){var d=c.keys()[0];d!=null&&(l=c.get(d))}if(!l){TK(n,i);return}var u=_Ee(c,i,t);o.enable(u.controlType,u.opt),Qx(i,"dispatchAction",l.model.get("throttle",!0),"fixRate")})})}var jEe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return e.prototype.render=function(t,r,n){if(a.prototype.render.apply(this,arguments),t.noTarget()){this._clear();return}this.range=t.getPercentRange(),gEe(n,t,{pan:St(SC.pan,this),zoom:St(SC.zoom,this),scrollMove:St(SC.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){vEe(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e})(EE),SC={zoom:function(a,e,t,r){var n=this.range,i=n.slice(),o=a.axisModels[0];if(o){var l=kC[e](null,[r.originX,r.originY],o,t,a),c=(l.signal>0?l.pixelStart+l.pixelLength-l.pixel:l.pixel-l.pixelStart)/l.pixelLength*(i[1]-i[0])+i[0],d=Math.max(1/r.scale,0);i[0]=(i[0]-c)*d+c,i[1]=(i[1]-c)*d+c;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(wh(0,i,[0,100],0,u.minSpan,u.maxSpan),this.range=i,n[0]!==i[0]||n[1]!==i[1])return i}},pan:JF(function(a,e,t,r,n,i){var o=kC[r]([i.oldX,i.oldY],[i.newX,i.newY],e,n,t);return o.signal*(a[1]-a[0])*o.pixel/o.pixelLength}),scrollMove:JF(function(a,e,t,r,n,i){var o=kC[r]([0,0],[i.scrollDelta,i.scrollDelta],e,n,t);return o.signal*(a[1]-a[0])*i.scrollDelta})};function JF(a){return function(e,t,r,n){var i=this.range,o=i.slice(),l=e.axisModels[0];if(l){var c=a(o,l,e,t,r,n);if(wh(c,o,[0,100],"all"),this.range=o,i[0]!==o[0]||i[1]!==o[1])return o}}}var kC={grid:function(a,e,t,r,n){var i=t.axis,o={},l=n.model.coordinateSystem.getRect();return a=a||[0,0],i.dim==="x"?(o.pixel=e[0]-a[0],o.pixelLength=l.width,o.pixelStart=l.x,o.signal=i.inverse?1:-1):(o.pixel=e[1]-a[1],o.pixelLength=l.height,o.pixelStart=l.y,o.signal=i.inverse?-1:1),o},polar:function(a,e,t,r,n){var i=t.axis,o={},l=n.model.coordinateSystem,c=l.getRadiusAxis().getExtent(),d=l.getAngleAxis().getExtent();return a=a?l.pointToCoord(a):[0,0],e=l.pointToCoord(e),t.mainType==="radiusAxis"?(o.pixel=e[0]-a[0],o.pixelLength=c[1]-c[0],o.pixelStart=c[0],o.signal=i.inverse?1:-1):(o.pixel=e[1]-a[1],o.pixelLength=d[1]-d[0],o.pixelStart=d[0],o.signal=i.inverse?-1:1),o},singleAxis:function(a,e,t,r,n){var i=t.axis,o=n.model.coordinateSystem.getRect(),l={};return a=a||[0,0],i.orient==="horizontal"?(l.pixel=e[0]-a[0],l.pixelLength=o.width,l.pixelStart=o.x,l.signal=i.inverse?1:-1):(l.pixel=e[1]-a[1],l.pixelLength=o.height,l.pixelStart=o.y,l.signal=i.inverse?-1:1),l}};function MK(a){DE(a),a.registerComponentModel(mEe),a.registerComponentView(jEe),NEe(a)}var SEe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Th(ub.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:Fe.color.accent10,borderRadius:0,backgroundColor:Fe.color.transparent,dataBackground:{lineStyle:{color:Fe.color.accent30,width:.5},areaStyle:{color:Fe.color.accent20,opacity:.2}},selectedDataBackground:{lineStyle:{color:Fe.color.accent40,width:.5},areaStyle:{color:Fe.color.accent20,opacity:.3}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:Fe.color.neutral00,borderColor:Fe.color.accent20},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:Fe.color.accent40,opacity:.5},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:Fe.color.tertiary},brushSelect:!0,brushStyle:{color:Fe.color.accent30,opacity:.3},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:Fe.color.accent40},moveHandleStyle:{opacity:.8}},defaultLocationEdgeGap:15}),e})(ub),Ng=Ta,kEe=1,CC=30,CEe=7,jg="horizontal",eV="vertical",AEe=5,TEe=["line","bar","candlestick","scatter"],MEe={easing:"cubicOut",duration:100,delay:0},EEe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._displayables={},t}return e.prototype.init=function(t,r){this.api=r,this._onBrush=St(this._onBrush,this),this._onBrushEnd=St(this._onBrushEnd,this)},e.prototype.render=function(t,r,n,i){if(a.prototype.render.apply(this,arguments),Qx(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),t.get("show")===!1){this.group.removeAll();return}if(t.noTarget()){this._clear(),this.group.removeAll();return}(!i||i.type!=="dataZoom"||i.from!==this.uid)&&this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){Zv(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new Gt;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(r),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,r=this.api,n=t.get("brushSelect"),i=n?CEe:0,o=pi(t,r).refContainer,l=this._findCoordRect(),c=t.get("defaultLocationEdgeGap",!0)||0,d=this._orient===jg?{right:o.width-l.x-l.width,top:o.height-CC-c-i,width:l.width,height:CC}:{right:c,top:l.y,width:CC,height:l.height},u=E0(t.option);oe(["right","top","width","height"],function(f){u[f]==="ph"&&(u[f]=d[f])});var h=ln(u,o);this._location={x:h.x,y:h.y},this._size=[h.width,h.height],this._orient===eV&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,r=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),o=i&&i.get("inverse"),l=this._displayables.sliderGroup,c=(this._dataShadowInfo||{}).otherAxisInverse;l.attr(n===jg&&!o?{scaleY:c?1:-1,scaleX:1}:n===jg&&o?{scaleY:c?1:-1,scaleX:-1}:n===eV&&!o?{scaleY:c?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:c?-1:1,scaleX:-1,rotation:Math.PI/2});var d=t.getBoundingRect([l]);t.x=r.x-d.x,t.y=r.y-d.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,r=this._size,n=this._displayables.sliderGroup,i=t.get("brushSelect");n.add(new Ng({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var o=new Ng({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:St(this._onClickPanel,this)}),l=this.api.getZr();i?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",l.on("mousemove",this._onBrush),l.on("mouseup",this._onBrushEnd)):(l.off("mousemove",this._onBrush),l.off("mouseup",this._onBrushEnd)),n.add(o)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!t)return;var r=this._size,n=this._shadowSize||[],i=t.series,o=i.getRawData(),l=i.getShadowDim&&i.getShadowDim(),c=l&&o.getDimensionInfo(l)?i.getShadowDim():t.otherDim;if(c==null)return;var d=this._shadowPolygonPts,u=this._shadowPolylinePts;if(o!==this._shadowData||c!==this._shadowDim||r[0]!==n[0]||r[1]!==n[1]){var h=o.getDataExtent(t.thisDim),f=o.getDataExtent(c),p=(f[1]-f[0])*.3;f=[f[0]-p,f[1]+p];var g=[0,r[1]],b=[0,r[0]],w=[[r[0],0],[0,0]],_=[],k=b[1]/Math.max(1,o.count()-1),T=r[0]/(h[1]-h[0]),D=t.thisAxis.type==="time",I=-k,O=Math.round(o.count()/r[0]),P;o.each([t.thisDim,c],function(ae,J,U){if(O>0&&U%O){D||(I+=k);return}I=D?(+ae-h[0])*T:I+k;var F=J==null||isNaN(J)||J==="",W=F?0:ur(J,f,g,!0);F&&!P&&U?(w.push([w[w.length-1][0],0]),_.push([_[_.length-1][0],0])):!F&&P&&(w.push([I,0]),_.push([I,0])),F||(w.push([I,W]),_.push([I,W])),P=F}),d=this._shadowPolygonPts=w,u=this._shadowPolylinePts=_}this._shadowData=o,this._shadowDim=c,this._shadowSize=[r[0],r[1]];var V=this.dataZoomModel;function G(ae){var J=V.getModel(ae?"selectedDataBackground":"dataBackground"),U=new Gt,F=new us({shape:{points:d},segmentIgnoreThreshold:1,style:J.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),W=new $i({shape:{points:u},segmentIgnoreThreshold:1,style:J.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return U.add(F),U.add(W),U}for(var Q=0;Q<3;Q++){var $=G(Q===1);this._displayables.sliderGroup.add($),this._displayables.dataShadowSegs.push($)}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,r=t.get("showDataShadow");if(r!==!1){var n,i=this.ecModel;return t.eachTargetAxis(function(o,l){var c=t.getAxisProxy(o,l).getTargetSeriesModels();oe(c,function(d){if(!n&&!(r!==!0&&ya(TEe,d.get("type"))<0)){var u=i.getComponent(rh(o),l).axis,h=DEe(o),f,p=d.coordinateSystem;h!=null&&p.getOtherAxis&&(f=p.getOtherAxis(u).inverse),h=d.getData().mapDimension(h);var g=d.getData().mapDimension(o);n={thisAxis:u,series:d,thisDim:g,otherDim:h,otherAxisInverse:f}}},this)},this),n}},e.prototype._renderHandle=function(){var t=this.group,r=this._displayables,n=r.handles=[null,null],i=r.handleLabels=[null,null],o=this._displayables.sliderGroup,l=this._size,c=this.dataZoomModel,d=this.api,u=c.get("borderRadius")||0,h=c.get("brushSelect"),f=r.filler=new Ng({silent:h,style:{fill:c.get("fillerColor")},textConfig:{position:"inside"}});o.add(f),o.add(new Ng({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:l[0],height:l[1],r:u},style:{stroke:c.get("dataBackgroundColor")||c.get("borderColor"),lineWidth:kEe,fill:Fe.color.transparent}})),oe([0,1],function(T){var D=c.get("handleIcon");!q2[D]&&D.indexOf("path://")<0&&D.indexOf("image://")<0&&(D="path://"+D);var I=ei(D,-1,0,2,2,null,!0);I.attr({cursor:IEe(this._orient),draggable:!0,drift:St(this._onDragMove,this,T),ondragend:St(this._onDragEnd,this),onmouseover:St(this._showDataInfo,this,!0),onmouseout:St(this._showDataInfo,this,!1),z2:5});var O=I.getBoundingRect(),P=c.get("handleSize");this._handleHeight=_t(P,this._size[1]),this._handleWidth=O.width/O.height*this._handleHeight,I.setStyle(c.getModel("handleStyle").getItemStyle()),I.style.strokeNoScale=!0,I.rectHover=!0,I.ensureState("emphasis").style=c.getModel(["emphasis","handleStyle"]).getItemStyle(),s0(I);var V=c.get("handleColor");V!=null&&(I.style.fill=V),o.add(n[T]=I);var G=c.getModel("textStyle"),Q=c.get("handleLabel")||{},$=Q.show||!1;t.add(i[T]=new Ja({silent:!0,invisible:!$,style:zr(G,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:G.getTextColor(),font:G.getFont()}),z2:10}))},this);var p=f;if(h){var g=_t(c.get("moveHandleSize"),l[1]),b=r.moveHandle=new Ta({style:c.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:l[1]-.5,height:g}}),w=g*.8,_=r.moveHandleIcon=ei(c.get("moveHandleIcon"),-w/2,-w/2,w,w,Fe.color.neutral00,!0);_.silent=!0,_.y=l[1]+g/2-.5,b.ensureState("emphasis").style=c.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var k=Math.min(l[1]/2,Math.max(g,10));p=r.moveZone=new Ta({invisible:!0,shape:{y:l[1]-k,height:g+k}}),p.on("mouseover",function(){d.enterEmphasis(b)}).on("mouseout",function(){d.leaveEmphasis(b)}),o.add(b),o.add(_),o.add(p)}p.attr({draggable:!0,cursor:"default",drift:St(this._onDragMove,this,"all"),ondragstart:St(this._showDataInfo,this,!0),ondragend:St(this._onDragEnd,this),onmouseover:St(this._showDataInfo,this,!0),onmouseout:St(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[ur(t[0],[0,100],r,!0),ur(t[1],[0,100],r,!0)]},e.prototype._updateInterval=function(t,r){var n=this.dataZoomModel,i=this._handleEnds,o=this._getViewExtent(),l=n.findRepresentativeAxisProxy().getMinMaxSpan(),c=[0,100];wh(r,i,o,n.get("zoomLock")?"all":t,l.minSpan!=null?ur(l.minSpan,c,o,!0):null,l.maxSpan!=null?ur(l.maxSpan,c,o,!0):null);var d=this._range,u=this._range=el([ur(i[0],o,c,!0),ur(i[1],o,c,!0)]);return!d||d[0]!==u[0]||d[1]!==u[1]},e.prototype._updateView=function(t){var r=this._displayables,n=this._handleEnds,i=el(n.slice()),o=this._size;oe([0,1],function(p){var g=r.handles[p],b=this._handleHeight;g.attr({scaleX:b/2,scaleY:b/2,x:n[p]+(p?-1:1),y:o[1]/2-b/2})},this),r.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:o[1]});var l={x:i[0],width:i[1]-i[0]};r.moveHandle&&(r.moveHandle.setShape(l),r.moveZone.setShape(l),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",l.x+l.width/2));for(var c=r.dataShadowSegs,d=[0,i[0],i[1],o[0]],u=0;u<c.length;u++){var h=c[u],f=h.getClipPath();f||(f=new Ta,h.setClipPath(f)),f.setShape({x:d[u],y:0,width:d[u+1]-d[u],height:o[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var r=this.dataZoomModel,n=this._displayables,i=n.handleLabels,o=this._orient,l=["",""];if(r.get("showDetail")){var c=r.findRepresentativeAxisProxy();if(c){var d=c.getAxisModel().axis,u=this._range,h=t?c.calculateDataWindow({start:u[0],end:u[1]}).valueWindow:c.getDataValueWindow();l=[this._formatLabel(h[0],d),this._formatLabel(h[1],d)]}}var f=el(this._handleEnds.slice());p.call(this,0),p.call(this,1);function p(g){var b=o0(n.handles[g].parent,this.group),w=wN(g===0?"right":"left",b),_=this._handleWidth/2+AEe,k=jl([f[g]+(g===0?-_:_),this._size[1]/2],b);i[g].setStyle({x:k[0],y:k[1],verticalAlign:o===jg?"middle":w,align:o===jg?w:"center",text:l[g]})}},e.prototype._formatLabel=function(t,r){var n=this.dataZoomModel,i=n.get("labelFormatter"),o=n.get("labelPrecision");(o==null||o==="auto")&&(o=r.getPixelPrecision());var l=t==null||isNaN(t)?"":r.type==="category"||r.type==="time"?r.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(o,20));return Ut(i)?i(t,l):jt(i)?i.replace("{value}",l):l},e.prototype._showDataInfo=function(t){var r=this.dataZoomModel.get("handleLabel")||{},n=r.show||!1,i=this.dataZoomModel.getModel(["emphasis","handleLabel"]),o=i.get("show")||!1,l=t||this._dragging?o:n,c=this._displayables,d=c.handleLabels;d[0].attr("invisible",!l),d[1].attr("invisible",!l),c.moveHandle&&this.api[l?"enterEmphasis":"leaveEmphasis"](c.moveHandle,1)},e.prototype._onDragMove=function(t,r,n,i){this._dragging=!0,Rd(i.event);var o=this._displayables.sliderGroup.getLocalTransform(),l=jl([r,n],o,!0),c=this._updateInterval(t,l[0]),d=this.dataZoomModel.get("realtime");this._updateView(!d),c&&d&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var r=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>r[0]||n[1]<0||n[1]>r[1])){var i=this._handleEnds,o=(i[0]+i[1])/2,l=this._updateInterval("all",n[0]-o);this._updateView(),l&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var r=t.offsetX,n=t.offsetY;this._brushStart=new Xt(r,n),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,!!r){r.attr("ignore",!0);var n=r.shape,i=+new Date;if(!(i-this._brushStartTime<200&&Math.abs(n.width)<5)){var o=this._getViewExtent(),l=[0,100],c=this._handleEnds=[n.x,n.x+n.width],d=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();wh(0,c,o,0,d.minSpan!=null?ur(d.minSpan,l,o,!0):null,d.maxSpan!=null?ur(d.maxSpan,l,o,!0):null),this._range=el([ur(c[0],o,l,!0),ur(c[1],o,l,!0)]),this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(Rd(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,r){var n=this._displayables,i=this.dataZoomModel,o=n.brushRect;o||(o=n.brushRect=new Ng({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(o)),o.attr("ignore",!1);var l=this._brushStart,c=this._displayables.sliderGroup,d=c.transformCoordToLocal(t,r),u=c.transformCoordToLocal(l.x,l.y),h=this._size;d[0]=Math.max(Math.min(h[0],d[0]),0),o.setShape({x:u[0],y:0,width:d[0]-u[0],height:h[1]})},e.prototype._dispatchZoomAction=function(t){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?MEe:null,start:r[0],end:r[1]})},e.prototype._findCoordRect=function(){var t,r=uK(this.dataZoomModel).infoList;if(!t&&r.length){var n=r[0].model.coordinateSystem;t=n.getRect&&n.getRect()}if(!t){var i=this.api.getWidth(),o=this.api.getHeight();t={x:i*.2,y:o*.2,width:i*.6,height:o*.6}}return t},e.type="dataZoom.slider",e})(EE);function DEe(a){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[a]}function IEe(a){return a==="vertical"?"ns-resize":"ew-resize"}function EK(a){a.registerComponentModel(SEe),a.registerComponentView(EEe),DE(a)}function REe(a){Sa(MK),Sa(EK)}var DK={get:function(a,e,t){var r=$t((LEe[a]||{})[e]);return t&&rt(r)?r[r.length-1]:r}},LEe={color:{active:["#006edd","#e0ffff"],inactive:[Fe.color.transparent]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},tV=Ni.mapVisual,OEe=Ni.eachVisual,PEe=rt,aV=oe,BEe=el,zEe=ur,C_=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n)},e.prototype.optionUpdated=function(t,r){var n=this.option;!r&&wK(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var r=this.stateList;t=St(t,this),this.controllerVisuals=vA(this.option.controller,r,t),this.targetVisuals=vA(this.option.target,r,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesId,r=this.option.seriesIndex;r==null&&t==null&&(r="all");var n=Wx(this.ecModel,"series",{index:r,id:t},{useDefault:!1,enableAll:!0,enableNone:!1}).models;return it(n,function(i){return i.componentIndex})},e.prototype.eachTargetSeries=function(t,r){oe(this.getTargetSeriesIndices(),function(n){var i=this.ecModel.getSeriesByIndex(n);i&&t.call(r,i)},this)},e.prototype.isTargetSeries=function(t){var r=!1;return this.eachTargetSeries(function(n){n===t&&(r=!0)}),r},e.prototype.formatValueText=function(t,r,n){var i=this.option,o=i.precision,l=this.dataBound,c=i.formatter,d;n=n||["<",">"],rt(t)&&(t=t.slice(),d=!0);var u=r?t:d?[h(t[0]),h(t[1])]:h(t);if(jt(c))return c.replace("{value}",d?u[0]:u).replace("{value2}",d?u[1]:u);if(Ut(c))return d?c(t[0],t[1]):c(t);if(d)return t[0]===l[0]?n[0]+" "+u[1]:t[1]===l[1]?n[1]+" "+u[0]:u[0]+" - "+u[1];return u;function h(f){return f===l[0]?"min":f===l[1]?"max":(+f).toFixed(Math.min(o,20))}},e.prototype.resetExtent=function(){var t=this.option,r=BEe([t.min,t.max]);this._dataExtent=r},e.prototype.getDataDimensionIndex=function(t){var r=this.option.dimension;if(r!=null)return t.getDimensionIndex(r);for(var n=t.dimensions,i=n.length-1;i>=0;i--){var o=n[i],l=t.getDimensionInfo(o);if(!l.isCalculationCoord)return l.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,r=this.option,n={inRange:r.inRange,outOfRange:r.outOfRange},i=r.target||(r.target={}),o=r.controller||(r.controller={});_a(i,n),_a(o,n);var l=this.isCategory();c.call(this,i),c.call(this,o),d.call(this,i,"inRange","outOfRange"),u.call(this,o);function c(h){PEe(r.color)&&!h.inRange&&(h.inRange={color:r.color.slice().reverse()}),h.inRange=h.inRange||{color:t.get("gradientColor")}}function d(h,f,p){var g=h[f],b=h[p];g&&!b&&(b=h[p]={},aV(g,function(w,_){if(Ni.isValidType(_)){var k=DK.get(_,"inactive",l);k!=null&&(b[_]=k,_==="color"&&!b.hasOwnProperty("opacity")&&!b.hasOwnProperty("colorAlpha")&&(b.opacity=[0,0]))}}))}function u(h){var f=(h.inRange||{}).symbol||(h.outOfRange||{}).symbol,p=(h.inRange||{}).symbolSize||(h.outOfRange||{}).symbolSize,g=this.get("inactiveColor"),b=this.getItemSymbol(),w=b||"roundRect";aV(this.stateList,function(_){var k=this.itemSize,T=h[_];T||(T=h[_]={color:l?g:[g]}),T.symbol==null&&(T.symbol=f&&$t(f)||(l?w:[w])),T.symbolSize==null&&(T.symbolSize=p&&$t(p)||(l?k[0]:[k[0],k[0]])),T.symbol=tV(T.symbol,function(O){return O==="none"?w:O});var D=T.symbolSize;if(D!=null){var I=-1/0;OEe(D,function(O){O>I&&(I=O)}),T.symbolSize=tV(D,function(O){return zEe(O,[0,I],[0,k[0]],!0)})}},this)}},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:Fe.color.transparent,borderColor:Fe.color.borderTint,contentColor:Fe.color.theme[0],inactiveColor:Fe.color.disabled,borderWidth:0,padding:Fe.size.m,textGap:10,precision:0,textStyle:{color:Fe.color.secondary}},e})(Oa),rV=[20,140],FEe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(t,r){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){a.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(t[0]==null||isNaN(t[0]))&&(t[0]=rV[0]),(t[1]==null||isNaN(t[1]))&&(t[1]=rV[1])},e.prototype._resetRange=function(){var t=this.getExtent(),r=this.option.range;!r||r.auto?(t.auto=1,this.option.range=t):rt(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],t[0]),r[1]=Math.min(r[1],t[1]))},e.prototype.completeVisualOption=function(){a.prototype.completeVisualOption.apply(this,arguments),oe(this.stateList,function(t){var r=this.option.controller[t].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),r=el((this.get("range")||[]).slice());return r[0]>t[1]&&(r[0]=t[1]),r[1]>t[1]&&(r[1]=t[1]),r[0]<t[0]&&(r[0]=t[0]),r[1]<t[0]&&(r[1]=t[0]),r},e.prototype.getValueState=function(t){var r=this.option.range,n=this.getExtent(),i=Pt(this.option.unboundedRange,!0);return(i&&r[0]<=n[0]||r[0]<=t)&&(i&&r[1]>=n[1]||t<=r[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[];return this.eachTargetSeries(function(n){var i=[],o=n.getData();o.each(this.getDataDimensionIndex(o),function(l,c){t[0]<=l&&l<=t[1]&&i.push(c)},this),r.push({seriesId:n.id,dataIndex:i})},this),r},e.prototype.getVisualMeta=function(t){var r=nV(this,"outOfRange",this.getExtent()),n=nV(this,"inRange",this.option.range.slice()),i=[];function o(p,g){i.push({value:p,color:t(p,g)})}for(var l=0,c=0,d=n.length,u=r.length;c<u&&(!n.length||r[c]<=n[0]);c++)r[c]<n[l]&&o(r[c],"outOfRange");for(var h=1;l<d;l++,h=0)h&&i.length&&o(n[l],"outOfRange"),o(n[l],"inRange");for(var h=1;c<u;c++)(!n.length||n[n.length-1]<r[c])&&(h&&(i.length&&o(i[i.length-1].value,"outOfRange"),h=0),o(r[c],"outOfRange"));var f=i.length;return{stops:i,outerColors:[f?i[0].color:"transparent",f?i[f-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Th(C_.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:Fe.color.neutral00,borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:Fe.color.neutral00,borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:Fe.color.shadow}}),e})(C_);function nV(a,e,t){if(t[0]===t[1])return t.slice();for(var r=200,n=(t[1]-t[0])/r,i=t[0],o=[],l=0;l<=r&&i<t[1];l++)o.push(i),i+=n;return o.push(t[1]),o}var IK=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r},e.prototype.render=function(t,r,n,i){if(this.visualMapModel=t,t.get("show")===!1){this.group.removeAll();return}this.doRender(t,r,n,i)},e.prototype.renderBackground=function(t){var r=this.visualMapModel,n=Ib(r.get("padding")||0),i=t.getBoundingRect();t.add(new Ta({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,r,n){n=n||{};var i=n.forceState,o=this.visualMapModel,l={};if(r==="color"){var c=o.get("contentColor");l.color=c}function d(p){return l[p]}function u(p,g){l[p]=g}var h=o.controllerVisuals[i||o.getValueState(t)],f=Ni.prepareVisualTypes(h);return oe(f,function(p){var g=h[p];n.convertOpacityToAlpha&&p==="opacity"&&(p="colorAlpha",g=h.__alphaForOpacity),Ni.dependsOn(p,r)&&g&&g.applyVisual(t,d,u)}),l[r]},e.prototype.positionGroup=function(t){var r=this.visualMapModel,n=this.api,i=pi(r,n).refContainer;SN(t,r.getBoxLayoutParams(),i)},e.prototype.doRender=function(t,r,n,i){},e.type="visualMap",e})(tn),iV=[["left","right","width"],["top","bottom","height"]];function RK(a,e,t){var r=a.option,n=r.align;if(n!=null&&n!=="auto")return n;for(var i={width:e.getWidth(),height:e.getHeight()},o=r.orient==="horizontal"?1:0,l=iV[o],c=[0,null,10],d={},u=0;u<3;u++)d[iV[1-o][u]]=c[u],d[l[u]]=u===2?t[0]:r[l[u]];var h=[["x","width",3],["y","height",0]][o],f=ln(d,i,r.padding);return l[(f.margin[h[2]]||0)+f[h[0]]+f[h[1]]*.5<i[h[1]]*.5?0:1]}function e2(a,e){return oe(a||[],function(t){t.dataIndex!=null&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),a}var rc=ur,VEe=oe,sV=Math.min,AC=Math.max,HEe=12,UEe=6,GEe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return e.prototype.init=function(t,r){a.prototype.init.call(this,t,r),this._hoverLinkFromSeriesMouseOver=St(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=St(this._hideIndicator,this)},e.prototype.doRender=function(t,r,n,i){(!i||i.type!=="selectDataRange"||i.from!==this.uid)&&this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,r=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(r);var n=t.get("text");this._renderEndsText(r,n,0),this._renderEndsText(r,n,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},e.prototype._renderEndsText=function(t,r,n){if(r){var i=r[1-n];i=i!=null?i+"":"";var o=this.visualMapModel,l=o.get("textGap"),c=o.itemSize,d=this._shapes.mainGroup,u=this._applyTransform([c[0]/2,n===0?-l:c[1]+l],d),h=this._applyTransform(n===0?"bottom":"top",d),f=this._orient,p=this.visualMapModel.textStyleModel;this.group.add(new Ja({style:zr(p,{x:u[0],y:u[1],verticalAlign:p.get("verticalAlign")||(f==="horizontal"?"middle":h),align:p.get("align")||(f==="horizontal"?h:"center"),text:i})}))}},e.prototype._renderBar=function(t){var r=this.visualMapModel,n=this._shapes,i=r.itemSize,o=this._orient,l=this._useHandle,c=RK(r,this.api,i),d=n.mainGroup=this._createBarGroup(c),u=new Gt;d.add(u),u.add(n.outOfRange=oV()),u.add(n.inRange=oV(null,l?cV(this._orient):null,St(this._dragHandle,this,"all",!1),St(this._dragHandle,this,"all",!0))),u.setClipPath(new Ta({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var h=r.textStyleModel.getTextRect(""),f=AC(h.width,h.height);l&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(r,d,0,i,f,o),this._createHandle(r,d,1,i,f,o)),this._createIndicator(r,d,i,f,o),t.add(d)},e.prototype._createHandle=function(t,r,n,i,o,l){var c=St(this._dragHandle,this,n,!1),d=St(this._dragHandle,this,n,!0),u=Al(t.get("handleSize"),i[0]),h=ei(t.get("handleIcon"),-u/2,-u/2,u,u,null,!0),f=cV(this._orient);h.attr({cursor:f,draggable:!0,drift:c,ondragend:d,onmousemove:function(_){Rd(_.event)}}),h.x=i[0]/2,h.useStyle(t.getModel("handleStyle").getItemStyle()),h.setStyle({strokeNoScale:!0,strokeFirst:!0}),h.style.lineWidth*=2,h.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),$f(h,!0),r.add(h);var p=this.visualMapModel.textStyleModel,g=new Ja({cursor:f,draggable:!0,drift:c,onmousemove:function(_){Rd(_.event)},ondragend:d,style:zr(p,{x:0,y:0,text:""})});g.ensureState("blur").style={opacity:.1},g.stateTransition={duration:200},this.group.add(g);var b=[u,0],w=this._shapes;w.handleThumbs[n]=h,w.handleLabelPoints[n]=b,w.handleLabels[n]=g},e.prototype._createIndicator=function(t,r,n,i,o){var l=Al(t.get("indicatorSize"),n[0]),c=ei(t.get("indicatorIcon"),-l/2,-l/2,l,l,null,!0);c.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var d=t.getModel("indicatorStyle").getItemStyle();if(c instanceof Li){var u=c.style;c.useStyle(Je({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},d))}else c.useStyle(d);r.add(c);var h=this.visualMapModel.textStyleModel,f=new Ja({silent:!0,invisible:!0,style:zr(h,{x:0,y:0,text:""})});this.group.add(f);var p=[(o==="horizontal"?i/2:UEe)+n[0]/2,0],g=this._shapes;g.indicator=c,g.indicatorLabel=f,g.indicatorLabelPoint=p,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,r,n,i){if(this._useHandle){if(this._dragging=!r,!r){var o=this._applyTransform([n,i],this._shapes.mainGroup,!0);this._updateInterval(t,o[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():lV(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,r=this._dataInterval=t.getSelected(),n=t.getExtent(),i=[0,t.itemSize[1]];this._handleEnds=[rc(r[0],n,i,!0),rc(r[1],n,i,!0)]},e.prototype._updateInterval=function(t,r){r=r||0;var n=this.visualMapModel,i=this._handleEnds,o=[0,n.itemSize[1]];wh(r,i,o,t,0);var l=n.getExtent();this._dataInterval=[rc(i[0],o,l,!0),rc(i[1],o,l,!0)]},e.prototype._updateView=function(t){var r=this.visualMapModel,n=r.getExtent(),i=this._shapes,o=[0,r.itemSize[1]],l=t?o:this._handleEnds,c=this._createBarVisual(this._dataInterval,n,l,"inRange"),d=this._createBarVisual(n,n,o,"outOfRange");i.inRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),i.outOfRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),this._updateHandle(l,c)},e.prototype._createBarVisual=function(t,r,n,i){var o={forceState:i,convertOpacityToAlpha:!0},l=this._makeColorGradient(t,o),c=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],d=this._createBarPoints(n,c);return{barColor:new Yx(0,0,0,1,l),barPoints:d,handlesColor:[l[0].color,l[l.length-1].color]}},e.prototype._makeColorGradient=function(t,r){var n=100,i=[],o=(t[1]-t[0])/n;i.push({color:this.getControllerVisual(t[0],"color",r),offset:0});for(var l=1;l<n;l++){var c=t[0]+o*l;if(c>t[1])break;i.push({color:this.getControllerVisual(c,"color",r),offset:l/n})}return i.push({color:this.getControllerVisual(t[1],"color",r),offset:1}),i},e.prototype._createBarPoints=function(t,r){var n=this.visualMapModel.itemSize;return[[n[0]-r[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-r[1],t[1]]]},e.prototype._createBarGroup=function(t){var r=this._orient,n=this.visualMapModel.get("inverse");return new Gt(r==="horizontal"&&!n?{scaleX:t==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&n?{scaleX:t==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!n?{scaleX:t==="left"?1:-1,scaleY:-1}:{scaleX:t==="left"?1:-1})},e.prototype._updateHandle=function(t,r){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,o=n.handleThumbs,l=n.handleLabels,c=i.itemSize,d=i.getExtent(),u=this._applyTransform("left",n.mainGroup);VEe([0,1],function(h){var f=o[h];f.setStyle("fill",r.handlesColor[h]),f.y=t[h];var p=rc(t[h],[0,c[1]],d,!0),g=this.getControllerVisual(p,"symbolSize");f.scaleX=f.scaleY=g/c[0],f.x=c[0]-g/2;var b=jl(n.handleLabelPoints[h],o0(f,this.group));if(this._orient==="horizontal"){var w=u==="left"||u==="top"?(c[0]-g)/2:(c[0]-g)/-2;b[1]+=w}l[h].setStyle({x:b[0],y:b[1],text:i.formatValueText(this._dataInterval[h]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",n.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(t,r,n,i){var o=this.visualMapModel,l=o.getExtent(),c=o.itemSize,d=[0,c[1]],u=this._shapes,h=u.indicator;if(h){h.attr("invisible",!1);var f={convertOpacityToAlpha:!0},p=this.getControllerVisual(t,"color",f),g=this.getControllerVisual(t,"symbolSize"),b=rc(t,l,d,!0),w=c[0]-g/2,_={x:h.x,y:h.y};h.y=b,h.x=w;var k=jl(u.indicatorLabelPoint,o0(h,this.group)),T=u.indicatorLabel;T.attr("invisible",!1);var D=this._applyTransform("left",u.mainGroup),I=this._orient,O=I==="horizontal";T.setStyle({text:(n||"")+o.formatValueText(r),verticalAlign:O?D:"middle",align:O?"center":D});var P={x:w,y:b,style:{fill:p}},V={style:{x:k[0],y:k[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var G={duration:100,easing:"cubicInOut",additive:!0};h.x=_.x,h.y=_.y,h.animateTo(P,G),T.animateTo(V,G)}else h.attr(P),T.attr(V);this._firstShowIndicator=!1;var Q=this._shapes.handleLabels;if(Q)for(var $=0;$<Q.length;$++)this.api.enterBlur(Q[$])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(r){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,i=t._applyTransform([r.offsetX,r.offsetY],t._shapes.mainGroup,!0,!0);i[1]=sV(AC(0,i[1]),n[1]),t._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,r){var n=this.visualMapModel,i=n.itemSize;if(n.option.hoverLink){var o=[0,i[1]],l=n.getExtent();t=sV(AC(o[0],t),o[1]);var c=WEe(n,l,o),d=[t-c,t+c],u=rc(t,o,l,!0),h=[rc(d[0],o,l,!0),rc(d[1],o,l,!0)];d[0]<o[0]&&(h[0]=-1/0),d[1]>o[1]&&(h[1]=1/0),r&&(h[0]===-1/0?this._showIndicator(u,h[1],"< ",c):h[1]===1/0?this._showIndicator(u,h[0],"> ",c):this._showIndicator(u,u," ",c));var f=this._hoverLinkDataIndices,p=[];(r||lV(n))&&(p=this._hoverLinkDataIndices=n.findTargetDataIndices(h));var g=Fme(f,p);this._dispatchHighDown("downplay",e2(g[0],n)),this._dispatchHighDown("highlight",e2(g[1],n))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var r;if(qf(t.target,function(c){var d=na(c);if(d.dataIndex!=null)return r=d,!0},!0),!!r){var n=this.ecModel.getSeriesByIndex(r.seriesIndex),i=this.visualMapModel;if(i.isTargetSeries(n)){var o=n.getData(r.dataType),l=o.getStore().get(i.getDataDimensionIndex(o),r.dataIndex);isNaN(l)||this._showIndicator(l,l)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var n=0;n<r.length;n++)this.api.leaveBlur(r[n])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",e2(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,r,n,i){var o=o0(r,i?null:this.group);return rt(t)?jl(t,o,n):wN(t,o,n)},e.prototype._dispatchHighDown=function(t,r){r&&r.length&&this.api.dispatchAction({type:t,batch:r})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e})(IK);function oV(a,e,t,r){return new us({shape:{points:a},draggable:!!t,cursor:e,drift:t,onmousemove:function(n){Rd(n.event)},ondragend:r})}function WEe(a,e,t){var r=HEe/2,n=a.get("hoverLinkDataSize");return n&&(r=rc(n,e,t,!0)/2),r}function lV(a){var e=a.get("hoverLinkOnHandle");return!!(e??a.get("realtime"))}function cV(a){return a==="vertical"?"ns-resize":"ew-resize"}var $Ee={type:"selectDataRange",event:"dataRangeSelected",update:"update"},YEe=function(a,e){e.eachComponent({mainType:"visualMap",query:a},function(t){t.setSelected(a.selected)})},qEe=[{createOnAllSeries:!0,reset:function(a,e){var t=[];return e.eachComponent("visualMap",function(r){var n=a.pipelineContext;!r.isTargetSeries(a)||n&&n.large||t.push(xMe(r.stateList,r.targetVisuals,St(r.getValueState,r),r.getDataDimensionIndex(a.getData())))}),t}},{createOnAllSeries:!0,reset:function(a,e){var t=a.getData(),r=[];e.eachComponent("visualMap",function(n){if(n.isTargetSeries(a)){var i=n.getVisualMeta(St(XEe,null,a,n))||{stops:[],outerColors:[]},o=n.getDataDimensionIndex(t);o>=0&&(i.dimension=o,r.push(i))}}),a.getData().setVisual("visualMeta",r)}}];function XEe(a,e,t,r){for(var n=e.targetVisuals[r],i=Ni.prepareVisualTypes(n),o={color:Ob(a.getData(),"color")},l=0,c=i.length;l<c;l++){var d=i[l],u=n[d==="opacity"?"__alphaForOpacity":d];u&&u.applyVisual(t,h,f)}return o.color;function h(p){return o[p]}function f(p,g){o[p]=g}}var dV=oe;function ZEe(a){var e=a&&a.visualMap;rt(e)||(e=e?[e]:[]),dV(e,function(t){if(t){Pp(t,"splitList")&&!Pp(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var r=t.pieces;r&&rt(r)&&dV(r,function(n){Qt(n)&&(Pp(n,"start")&&!Pp(n,"min")&&(n.min=n.start),Pp(n,"end")&&!Pp(n,"max")&&(n.max=n.end))})}})}function Pp(a,e){return a&&a.hasOwnProperty&&a.hasOwnProperty(e)}var uV=!1;function LK(a){uV||(uV=!0,a.registerSubTypeDefaulter("visualMap",function(e){return!e.categories&&(!(e.pieces?e.pieces.length>0:e.splitNumber>0)||e.calculable)?"continuous":"piecewise"}),a.registerAction($Ee,YEe),oe(qEe,function(e){a.registerVisual(a.PRIORITY.VISUAL.COMPONENT,e)}),a.registerPreprocessor(ZEe))}function OK(a){a.registerComponentModel(FEe),a.registerComponentView(GEe),LK(a)}var KEe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._pieceList=[],t}return e.prototype.optionUpdated=function(t,r){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],QEe[this._mode].call(this,this._pieceList),this._resetSelected(t,r);var i=this.option.categories;this.resetVisual(function(o,l){n==="categories"?(o.mappingMethod="category",o.categories=$t(i)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=it(this._pieceList,function(c){return c=$t(c),l!=="inRange"&&(c.visual=null),c}))})},e.prototype.completeVisualOption=function(){var t=this.option,r={},n=Ni.listVisualTypes(),i=this.isCategory();oe(t.pieces,function(l){oe(n,function(c){l.hasOwnProperty(c)&&(r[c]=1)})}),oe(r,function(l,c){var d=!1;oe(this.stateList,function(u){d=d||o(t,u,c)||o(t.target,u,c)},this),!d&&oe(this.stateList,function(u){(t[u]||(t[u]={}))[c]=DK.get(c,u==="inRange"?"active":"inactive",i)})},this);function o(l,c,d){return l&&l[c]&&l[c].hasOwnProperty(d)}a.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,r){var n=this.option,i=this._pieceList,o=(r?n:t).selected||{};if(n.selected=o,oe(i,function(c,d){var u=this.getSelectedMapKey(c);o.hasOwnProperty(u)||(o[u]=!0)},this),n.selectedMode==="single"){var l=!1;oe(i,function(c,d){var u=this.getSelectedMapKey(c);o[u]&&(l?o[u]=!1:l=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return this._mode==="categories"?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=$t(t)},e.prototype.getValueState=function(t){var r=Ni.findPieceIndex(t,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[],n=this._pieceList;return this.eachTargetSeries(function(i){var o=[],l=i.getData();l.each(this.getDataDimensionIndex(l),function(c,d){var u=Ni.findPieceIndex(c,n);u===t&&o.push(d)},this),r.push({seriesId:i.id,dataIndex:o})},this),r},e.prototype.getRepresentValue=function(t){var r;if(this.isCategory())r=t.value;else if(t.value!=null)r=t.value;else{var n=t.interval||[];r=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return r},e.prototype.getVisualMeta=function(t){if(this.isCategory())return;var r=[],n=["",""],i=this;function o(u,h){var f=i.getRepresentValue({interval:u});h||(h=i.getValueState(f));var p=t(f,h);u[0]===-1/0?n[0]=p:u[1]===1/0?n[1]=p:r.push({value:u[0],color:p},{value:u[1],color:p})}var l=this._pieceList.slice();if(!l.length)l.push({interval:[-1/0,1/0]});else{var c=l[0].interval[0];c!==-1/0&&l.unshift({interval:[-1/0,c]}),c=l[l.length-1].interval[1],c!==1/0&&l.push({interval:[c,1/0]})}var d=-1/0;return oe(l,function(u){var h=u.interval;h&&(h[0]>d&&o([d,h[0]],"outOfRange"),o(h.slice()),d=h[1])},this),{stops:r,outerColors:n}},e.type="visualMap.piecewise",e.defaultOption=Th(C_.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e})(C_),QEe={splitNumber:function(a){var e=this.option,t=Math.min(e.precision,20),r=this.getExtent(),n=e.splitNumber;n=Math.max(parseInt(n,10),1),e.splitNumber=n;for(var i=(r[1]-r[0])/n;+i.toFixed(t)!==i&&t<5;)t++;e.precision=t,i=+i.toFixed(t),e.minOpen&&a.push({interval:[-1/0,r[0]],close:[0,0]});for(var o=0,l=r[0];o<n;l+=i,o++){var c=o===n-1?r[1]:l+i;a.push({interval:[l,c],close:[1,1]})}e.maxOpen&&a.push({interval:[r[1],1/0],close:[0,0]}),IO(a),oe(a,function(d,u){d.index=u,d.text=this.formatValueText(d.interval)},this)},categories:function(a){var e=this.option;oe(e.categories,function(t){a.push({text:this.formatValueText(t,!0),value:t})},this),hV(e,a)},pieces:function(a){var e=this.option;oe(e.pieces,function(t,r){Qt(t)||(t={value:t});var n={text:"",index:r};if(t.label!=null&&(n.text=t.label),t.hasOwnProperty("value")){var i=n.value=t.value;n.interval=[i,i],n.close=[1,1]}else{for(var o=n.interval=[],l=n.close=[0,0],c=[1,0,1],d=[-1/0,1/0],u=[],h=0;h<2;h++){for(var f=[["gte","gt","min"],["lte","lt","max"]][h],p=0;p<3&&o[h]==null;p++)o[h]=t[f[p]],l[h]=c[p],u[h]=p===2;o[h]==null&&(o[h]=d[h])}u[0]&&o[1]===1/0&&(l[0]=0),u[1]&&o[0]===-1/0&&(l[1]=0),o[0]===o[1]&&l[0]&&l[1]&&(n.value=o[0])}n.visual=Ni.retrieveVisuals(t),a.push(n)},this),hV(e,a),IO(a),oe(a,function(t){var r=t.close,n=[["<",""][r[1]],[">",""][r[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,!1,n)},this)}};function hV(a,e){var t=a.inverse;(a.orient==="vertical"?!t:t)&&e.reverse()}var JEe=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.doRender=function(){var t=this.group;t.removeAll();var r=this.visualMapModel,n=r.get("textGap"),i=r.textStyleModel,o=this._getItemAlign(),l=r.itemSize,c=this._getViewData(),d=c.endsText,u=Gi(r.get("showLabel",!0),!d),h=!r.get("selectedMode");d&&this._renderEndsText(t,d[0],l,u,o),oe(c.viewPieceList,function(f){var p=f.piece,g=new Gt;g.onclick=St(this._onItemClick,this,p),this._enableHoverLink(g,f.indexInModelPieceList);var b=r.getRepresentValue(p);if(this._createItemSymbol(g,b,[0,0,l[0],l[1]],h),u){var w=this.visualMapModel.getValueState(b),_=i.get("align")||o;g.add(new Ja({style:zr(i,{x:_==="right"?-n:l[0]+n,y:l[1]/2,text:p.text,verticalAlign:i.get("verticalAlign")||"middle",align:_,opacity:Pt(i.get("opacity"),w==="outOfRange"?.5:1)}),silent:h}))}t.add(g)},this),d&&this._renderEndsText(t,d[1],l,u,o),l0(r.get("orient"),t,r.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,r){var n=this;t.on("mouseover",function(){return i("highlight")}).on("mouseout",function(){return i("downplay")});var i=function(o){var l=n.visualMapModel;l.option.hoverLink&&n.api.dispatchAction({type:o,batch:e2(l.findTargetDataIndices(r),l)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,r=t.option;if(r.orient==="vertical")return RK(t,this.api,t.itemSize);var n=r.align;return(!n||n==="auto")&&(n="left"),n},e.prototype._renderEndsText=function(t,r,n,i,o){if(r){var l=new Gt,c=this.visualMapModel.textStyleModel;l.add(new Ja({style:zr(c,{x:i?o==="right"?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:i?o:"center",text:r})})),t.add(l)}},e.prototype._getViewData=function(){var t=this.visualMapModel,r=it(t.getPieceList(),function(l,c){return{piece:l,indexInModelPieceList:c}}),n=t.get("text"),i=t.get("orient"),o=t.get("inverse");return(i==="horizontal"?o:!o)?r.reverse():n&&(n=n.slice().reverse()),{viewPieceList:r,endsText:n}},e.prototype._createItemSymbol=function(t,r,n,i){var o=ei(this.getControllerVisual(r,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(r,"color"));o.silent=i,t.add(o)},e.prototype._onItemClick=function(t){var r=this.visualMapModel,n=r.option,i=n.selectedMode;if(i){var o=$t(n.selected),l=r.getSelectedMapKey(t);i==="single"||i===!0?(o[l]=!0,oe(o,function(c,d){o[d]=d===l})):o[l]=!o[l],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},e.type="visualMap.piecewise",e})(IK);function PK(a){a.registerComponentModel(KEe),a.registerComponentView(JEe),LK(a)}function e6e(a){Sa(OK),Sa(PK)}var t6e=(function(){function a(e){this._thumbnailModel=e}return a.prototype.reset=function(e){this._renderVersion=e.getMainProcessVersion()},a.prototype.renderContent=function(e){var t=e.api.getViewOfComponentModel(this._thumbnailModel);t&&(e.group.silent=!0,t.renderContent({group:e.group,targetTrans:e.targetTrans,z2Range:i$(e.group),roamType:e.roamType,viewportRect:e.viewportRect,renderVersion:this._renderVersion}))},a.prototype.updateWindow=function(e,t){var r=t.getViewOfComponentModel(this._thumbnailModel);r&&r.updateWindow({targetTrans:e,renderVersion:this._renderVersion})},a})(),a6e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.preventAutoZ=!0,t}return e.prototype.optionUpdated=function(t,r){this._updateBridge()},e.prototype._updateBridge=function(){var t=this._birdge=this._birdge||new t6e(this);if(this._target=null,this.ecModel.eachSeries(function(n){PB(n,null)}),this.shouldShow()){var r=this.getTarget();PB(r.baseMapProvider,t)}},e.prototype.shouldShow=function(){return this.getShallow("show",!0)},e.prototype.getBridge=function(){return this._birdge},e.prototype.getTarget=function(){if(this._target)return this._target;var t=this.getReferringComponents("series",{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];return t?t.subType!=="graph"&&(t=null):t=this.ecModel.queryComponents({mainType:"series",subType:"graph"})[0],this._target={baseMapProvider:t},this._target},e.type="thumbnail",e.layoutMode="box",e.dependencies=["series","geo"],e.defaultOption={show:!0,right:1,bottom:1,height:"25%",width:"25%",itemStyle:{borderColor:Fe.color.border,borderWidth:2},windowStyle:{borderWidth:1,color:Fe.color.neutral30,borderColor:Fe.color.neutral40,opacity:.3},z:10},e})(Oa),r6e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){if(this._api=n,this._model=t,this._coordSys||(this._coordSys=new P0),!this._isEnabled()){this._clear();return}this._renderVersion=n.getMainProcessVersion();var i=this.group;i.removeAll();var o=t.getModel("itemStyle"),l=o.getItemStyle();l.fill==null&&(l.fill=r.get("backgroundColor")||Fe.color.neutral00);var c=pi(t,n).refContainer,d=ln(A$(t,!0),c),u=l.lineWidth||0,h=this._contentRect=w0(d.clone(),u/2,!0,!0),f=new Gt;i.add(f),f.setClipPath(new Ta({shape:h.plain()}));var p=this._targetGroup=new Gt;f.add(p);var g=d.plain();g.r=o.getShallow("borderRadius",!0),i.add(this._bgRect=new Ta({style:l,shape:g,silent:!1,cursor:"grab"}));var b=t.getModel("windowStyle"),w=b.getShallow("borderRadius",!0);f.add(this._windowRect=new Ta({shape:{x:0,y:0,width:0,height:0,r:w},style:b.getItemStyle(),silent:!1,cursor:"grab"})),this._dealRenderContent(),this._dealUpdateWindow(),pV(t,this)},e.prototype.renderContent=function(t){this._bridgeRendered=t,this._isEnabled()&&(this._dealRenderContent(),this._dealUpdateWindow(),pV(this._model,this))},e.prototype._dealRenderContent=function(){var t=this._bridgeRendered;if(!(!t||t.renderVersion!==this._renderVersion)){var r=this._targetGroup,n=this._coordSys,i=this._contentRect;if(r.removeAll(),!!t){var o=t.group,l=o.getBoundingRect();r.add(o),this._bgRect.z2=t.z2Range.min-10,n.setBoundingRect(l.x,l.y,l.width,l.height);var c=ln({left:"center",top:"center",aspect:l.width/l.height},i);n.setViewRect(c.x,c.y,c.width,c.height),o.attr(n.getTransformInfo().raw),this._windowRect.z2=t.z2Range.max+10,this._resetRoamController(t.roamType)}}},e.prototype.updateWindow=function(t){var r=this._bridgeRendered;r&&r.renderVersion===t.renderVersion&&(r.targetTrans=t.targetTrans),this._isEnabled()&&this._dealUpdateWindow()},e.prototype._dealUpdateWindow=function(){var t=this._bridgeRendered;if(!(!t||t.renderVersion!==this._renderVersion)){var r=Cl([],t.targetTrans),n=bc([],this._coordSys.transform,r);this._transThisToTarget=Cl([],n);var i=t.viewportRect;i?i=i.clone():i=new Jt(0,0,this._api.getWidth(),this._api.getHeight()),i.applyTransform(n);var o=this._windowRect,l=o.shape.r;o.setShape(Kt({r:l},i))}},e.prototype._resetRoamController=function(t){var r=this,n=this._api,i=this._roamController;if(i||(i=this._roamController=new O0(n.getZr())),!t||!this._isEnabled()){i.disable();return}i.enable(t,{api:n,zInfo:{component:this._model},triggerInfo:{roamTrigger:null,isInSelf:function(o,l,c){return r._contentRect.contain(l,c)}}}),i.off("pan").off("zoom").on("pan",St(this._onPan,this)).on("zoom",St(this._onZoom,this))},e.prototype._onPan=function(t){var r=this._transThisToTarget;if(!(!this._isEnabled()||!r)){var n=zn([],[t.oldX,t.oldY],r),i=zn([],[t.oldX-t.dx,t.oldY-t.dy],r);this._api.dispatchAction(fV(this._model.getTarget().baseMapProvider,{dx:i[0]-n[0],dy:i[1]-n[1]}))}},e.prototype._onZoom=function(t){var r=this._transThisToTarget;if(!(!this._isEnabled()||!r)){var n=zn([],[t.originX,t.originY],r);this._api.dispatchAction(fV(this._model.getTarget().baseMapProvider,{zoom:1/t.scale,originX:n[0],originY:n[1]}))}},e.prototype._isEnabled=function(){var t=this._model;if(!t||!t.shouldShow())return!1;var r=t.getTarget().baseMapProvider;return!!r},e.prototype._clear=function(){this.group.removeAll(),this._bridgeRendered=null,this._roamController&&this._roamController.disable()},e.prototype.remove=function(){this._clear()},e.prototype.dispose=function(){this._clear()},e.type="thumbnail",e})(tn);function fV(a,e){var t=a.mainType==="series"?a.subType+"Roam":a.mainType+"Roam",r={type:t};return r[a.mainType+"Id"]=a.id,Je(r,e),r}function pV(a,e){var t=_0(a);_N(e.group,t.z,t.zlevel)}function n6e(a){a.registerComponentModel(a6e),a.registerComponentView(r6e)}var i6e={label:{enabled:!0},decal:{show:!1}},xV=Ea(),s6e={};function o6e(a,e){var t=a.getModel("aria");if(!t.get("enabled"))return;var r=$t(i6e);_a(r.label,a.getLocaleModel().get("aria"),!1),_a(t.option,r,!1),n(),i();function n(){var d=t.getModel("decal"),u=d.get("show");if(u){var h=Rt();a.eachSeries(function(f){if(!f.isColorBySeries()){var p=h.get(f.type);p||(p={},h.set(f.type,p)),xV(f).scope=p}}),a.eachRawSeries(function(f){if(a.isSeriesFiltered(f))return;if(Ut(f.enableAriaDecal)){f.enableAriaDecal();return}var p=f.getData();if(f.isColorBySeries()){var k=u3(f.ecModel,f.name,s6e,a.getSeriesCount()),T=p.getVisual("decal");p.setVisual("decal",D(T,k))}else{var g=f.getRawData(),b={},w=xV(f).scope;p.each(function(I){var O=p.getRawIndex(I);b[O]=I});var _=g.count();g.each(function(I){var O=b[I],P=g.getName(I)||I+"",V=u3(f.ecModel,P,w,_),G=p.getItemVisual(O,"decal");p.setItemVisual(O,"decal",D(G,V))})}function D(I,O){var P=I?Je(Je({},O),I):O;return P.dirty=!0,P}})}}function i(){var d=e.getZr().dom;if(d){var u=a.getLocaleModel().get("aria"),h=t.getModel("label");if(h.option=Kt(h.option,u),!!h.get("enabled")){if(d.setAttribute("role","img"),h.get("description")){d.setAttribute("aria-label",h.get("description"));return}var f=a.getSeriesCount(),p=h.get(["data","maxCount"])||10,g=h.get(["series","maxCount"])||10,b=Math.min(f,g),w;if(!(f<1)){var _=l();if(_){var k=h.get(["general","withTitle"]);w=o(k,{title:_})}else w=h.get(["general","withoutTitle"]);var T=[],D=f>1?h.get(["series","multiple","prefix"]):h.get(["series","single","prefix"]);w+=o(D,{seriesCount:f}),a.eachSeries(function(V,G){if(G<b){var Q=void 0,$=V.get("name"),ae=$?"withName":"withoutName";Q=f>1?h.get(["series","multiple",ae]):h.get(["series","single",ae]),Q=o(Q,{seriesId:V.seriesIndex,seriesName:V.get("name"),seriesType:c(V.subType)});var J=V.getData();if(J.count()>p){var U=h.get(["data","partialData"]);Q+=o(U,{displayCnt:p})}else Q+=h.get(["data","allData"]);for(var F=h.get(["data","separator","middle"]),W=h.get(["data","separator","end"]),K=h.get(["data","excludeDimensionId"]),ee=[],ne=0;ne<J.count();ne++)if(ne<p){var re=J.getName(ne),Z=K?hr(J.getValues(ne),function(de,fe){return ya(K,fe)===-1}):J.getValues(ne),ie=h.get(["data",re?"withName":"withoutName"]);ee.push(o(ie,{name:re,value:Z.join(F)}))}Q+=ee.join(F)+W,T.push(Q)}});var I=h.getModel(["series","multiple","separator"]),O=I.get("middle"),P=I.get("end");w+=T.join(O)+P,d.setAttribute("aria-label",w)}}}}function o(d,u){if(!jt(d))return d;var h=d;return oe(u,function(f,p){h=h.replace(new RegExp("\\{\\s*"+p+"\\s*\\}","g"),f)}),h}function l(){var d=a.get("title");return d&&d.length&&(d=d[0]),d&&d.text}function c(d){var u=a.getLocaleModel().get(["series","typeNames"]);return u[d]||u.chart}}function l6e(a){if(!(!a||!a.aria)){var e=a.aria;e.show!=null&&(e.enabled=e.show),e.label=e.label||{},oe(["description","general","series","data"],function(t){e[t]!=null&&(e.label[t]=e[t])})}}function c6e(a){a.registerPreprocessor(l6e),a.registerVisual(a.PRIORITY.VISUAL.ARIA,o6e)}var mV={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},d6e=(function(){function a(e){var t=this._condVal=jt(e)?new RegExp(e):Qpe(e)?e:null;if(t==null){var r="";or(r)}}return a.prototype.evaluate=function(e){var t=typeof e;return jt(t)?this._condVal.test(e):Xa(t)?this._condVal.test(e+""):!1},a})(),u6e=(function(){function a(){}return a.prototype.evaluate=function(){return this.value},a})(),h6e=(function(){function a(){}return a.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},a})(),f6e=(function(){function a(){}return a.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},a})(),p6e=(function(){function a(){}return a.prototype.evaluate=function(){return!this.child.evaluate()},a})(),x6e=(function(){function a(){}return a.prototype.evaluate=function(){for(var e=!!this.valueParser,t=this.getValue,r=t(this.valueGetterParam),n=e?this.valueParser(r):null,i=0;i<this.subCondList.length;i++)if(!this.subCondList[i].evaluate(e?n:r))return!1;return!0},a})();function FE(a,e){if(a===!0||a===!1){var t=new u6e;return t.value=a,t}var r="";return BK(a)||or(r),a.and?gV("and",a,e):a.or?gV("or",a,e):a.not?m6e(a,e):g6e(a,e)}function gV(a,e,t){var r=e[a],n="";rt(r)||or(n),r.length||or(n);var i=a==="and"?new h6e:new f6e;return i.children=it(r,function(o){return FE(o,t)}),i.children.length||or(n),i}function m6e(a,e){var t=a.not,r="";BK(t)||or(r);var n=new p6e;return n.child=FE(t,e),n.child||or(r),n}function g6e(a,e){for(var t="",r=e.prepareGetValue(a),n=[],i=Va(a),o=a.parser,l=o?Z$(o):null,c=0;c<i.length;c++){var d=i[c];if(!(d==="parser"||e.valueGetterAttrMap.get(d))){var u=Dt(mV,d)?mV[d]:d,h=a[d],f=l?l(h):h,p=t1e(u,f)||u==="reg"&&new d6e(f);p||or(t),n.push(p)}}n.length||or(t);var g=new x6e;return g.valueGetterParam=r,g.valueParser=l,g.getValue=e.getValue,g.subCondList=n,g}function BK(a){return Qt(a)&&!ls(a)}var v6e=(function(){function a(e,t){this._cond=FE(e,t)}return a.prototype.evaluate=function(){return this._cond.evaluate()},a})();function b6e(a,e){return new v6e(a,e)}var y6e={type:"echarts:filter",transform:function(a){for(var e=a.upstream,t,r=b6e(a.config,{valueGetterAttrMap:Rt({dimension:!0}),prepareGetValue:function(l){var c="",d=l.dimension;Dt(l,"dimension")||or(c);var u=e.getDimensionInfo(d);return u||or(c),{dimIdx:u.index}},getValue:function(l){return e.retrieveValueFromItem(t,l.dimIdx)}}),n=[],i=0,o=e.count();i<o;i++)t=e.getRawDataItem(i),r.evaluate()&&n.push(t);return{data:n}}},w6e={type:"echarts:sort",transform:function(a){var e=a.upstream,t=a.config,r="",n=Rr(t);n.length||or(r);var i=[];oe(n,function(u){var h=u.dimension,f=u.order,p=u.parser,g=u.incomparable;if(h==null&&or(r),f!=="asc"&&f!=="desc"&&or(r),g&&g!=="min"&&g!=="max"){var b="";or(b)}if(f!=="asc"&&f!=="desc"){var w="";or(w)}var _=e.getDimensionInfo(h);_||or(r);var k=p?Z$(p):null;p&&!k&&or(r),i.push({dimIdx:_.index,parser:k,comparator:new Q$(f,g)})});var o=e.sourceFormat;o!==Ri&&o!==To&&or(r);for(var l=[],c=0,d=e.count();c<d;c++)l.push(e.getRawDataItem(c));return l.sort(function(u,h){for(var f=0;f<i.length;f++){var p=i[f],g=e.retrieveValueFromItem(u,p.dimIdx),b=e.retrieveValueFromItem(h,p.dimIdx);p.parser&&(g=p.parser(g),b=p.parser(b));var w=p.comparator.evaluate(g,b);if(w!==0)return w}return 0}),{data:l}}};function _6e(a){a.registerTransform(y6e),a.registerTransform(w6e)}var N6e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="dataset",t}return e.prototype.init=function(t,r,n){a.prototype.init.call(this,t,r,n),this._sourceManager=new aY(this),qP(this)},e.prototype.mergeOption=function(t,r){a.prototype.mergeOption.call(this,t,r),qP(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:Sl},e})(Oa),j6e=(function(a){Le(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="dataset",t}return e.type="dataset",e})(tn);function S6e(a){a.registerComponentModel(N6e),a.registerComponentView(j6e)}var ec=Tc.CMD;function tx(a,e){return Math.abs(a-e)<1e-5}function SA(a){var e=a.data,t=a.len(),r=[],n,i=0,o=0,l=0,c=0;function d(J,U){n&&n.length>2&&r.push(n),n=[J,U]}function u(J,U,F,W){tx(J,F)&&tx(U,W)||n.push(J,U,F,W,F,W)}function h(J,U,F,W,K,ee){var ne=Math.abs(U-J),re=Math.tan(ne/4)*4/3,Z=U<J?-1:1,ie=Math.cos(J),de=Math.sin(J),fe=Math.cos(U),he=Math.sin(U),ve=ie*K+F,Oe=de*ee+W,Se=fe*K+F,Ce=he*ee+W,we=K*re*Z,xe=ee*re*Z;n.push(ve-we*de,Oe+xe*ie,Se+we*he,Ce-xe*fe,Se,Ce)}for(var f,p,g,b,w=0;w<t;){var _=e[w++],k=w===1;switch(k&&(i=e[w],o=e[w+1],l=i,c=o,(_===ec.L||_===ec.C||_===ec.Q)&&(n=[l,c])),_){case ec.M:i=l=e[w++],o=c=e[w++],d(l,c);break;case ec.L:f=e[w++],p=e[w++],u(i,o,f,p),i=f,o=p;break;case ec.C:n.push(e[w++],e[w++],e[w++],e[w++],i=e[w++],o=e[w++]);break;case ec.Q:f=e[w++],p=e[w++],g=e[w++],b=e[w++],n.push(i+2/3*(f-i),o+2/3*(p-o),g+2/3*(f-g),b+2/3*(p-b),g,b),i=g,o=b;break;case ec.A:var T=e[w++],D=e[w++],I=e[w++],O=e[w++],P=e[w++],V=e[w++]+P;w+=1;var G=!e[w++];f=Math.cos(P)*I+T,p=Math.sin(P)*O+D,k?(l=f,c=p,d(l,c)):u(i,o,f,p),i=Math.cos(V)*I+T,o=Math.sin(V)*O+D;for(var Q=(G?-1:1)*Math.PI/2,$=P;G?$>V:$<V;$+=Q){var ae=G?Math.max($+Q,V):Math.min($+Q,V);h($,ae,T,D,I,O)}break;case ec.R:l=i=e[w++],c=o=e[w++],f=l+e[w++],p=c+e[w++],d(f,c),u(f,c,f,p),u(f,p,l,p),u(l,p,l,c),u(l,c,f,c);break;case ec.Z:n&&u(i,o,l,c),i=l,o=c;break}}return n&&n.length>2&&r.push(n),r}function kA(a,e,t,r,n,i,o,l,c,d){if(tx(a,t)&&tx(e,r)&&tx(n,o)&&tx(i,l)){c.push(o,l);return}var u=2/d,h=u*u,f=o-a,p=l-e,g=Math.sqrt(f*f+p*p);f/=g,p/=g;var b=t-a,w=r-e,_=n-o,k=i-l,T=b*b+w*w,D=_*_+k*k;if(T<h&&D<h){c.push(o,l);return}var I=f*b+p*w,O=-f*_-p*k,P=T-I*I,V=D-O*O;if(P<h&&I>=0&&V<h&&O>=0){c.push(o,l);return}var G=[],Q=[];gh(a,t,n,o,.5,G),gh(e,r,i,l,.5,Q),kA(G[0],Q[0],G[1],Q[1],G[2],Q[2],G[3],Q[3],c,d),kA(G[4],Q[4],G[5],Q[5],G[6],Q[6],G[7],Q[7],c,d)}function k6e(a,e){var t=SA(a),r=[];e=e||1;for(var n=0;n<t.length;n++){var i=t[n],o=[],l=i[0],c=i[1];o.push(l,c);for(var d=2;d<i.length;){var u=i[d++],h=i[d++],f=i[d++],p=i[d++],g=i[d++],b=i[d++];kA(l,c,u,h,f,p,g,b,o,e),l=g,c=b}r.push(o)}return r}function zK(a,e,t){var r=a[e],n=a[1-e],i=Math.abs(r/n),o=Math.ceil(Math.sqrt(i*t)),l=Math.floor(t/o);l===0&&(l=1,o=t);for(var c=[],d=0;d<o;d++)c.push(l);var u=o*l,h=t-u;if(h>0)for(var d=0;d<h;d++)c[d%o]+=1;return c}function vV(a,e,t){for(var r=a.r0,n=a.r,i=a.startAngle,o=a.endAngle,l=Math.abs(o-i),c=l*n,d=n-r,u=c>Math.abs(d),h=zK([c,d],u?0:1,e),f=(u?l:d)/h.length,p=0;p<h.length;p++)for(var g=(u?d:l)/h[p],b=0;b<h[p];b++){var w={};u?(w.startAngle=i+f*p,w.endAngle=i+f*(p+1),w.r0=r+g*b,w.r=r+g*(b+1)):(w.startAngle=i+g*b,w.endAngle=i+g*(b+1),w.r0=r+f*p,w.r=r+f*(p+1)),w.clockwise=a.clockwise,w.cx=a.cx,w.cy=a.cy,t.push(w)}}function C6e(a,e,t){for(var r=a.width,n=a.height,i=r>n,o=zK([r,n],i?0:1,e),l=i?"width":"height",c=i?"height":"width",d=i?"x":"y",u=i?"y":"x",h=a[l]/o.length,f=0;f<o.length;f++)for(var p=a[c]/o[f],g=0;g<o[f];g++){var b={};b[d]=f*h,b[u]=g*p,b[l]=h,b[c]=p,b.x+=a.x,b.y+=a.y,t.push(b)}}function bV(a,e,t,r){return a*r-t*e}function A6e(a,e,t,r,n,i,o,l){var c=t-a,d=r-e,u=o-n,h=l-i,f=bV(u,h,c,d);if(Math.abs(f)<1e-6)return null;var p=a-n,g=e-i,b=bV(p,g,u,h)/f;return b<0||b>1?null:new Xt(b*c+a,b*d+e)}function T6e(a,e,t){var r=new Xt;Xt.sub(r,t,e),r.normalize();var n=new Xt;Xt.sub(n,a,e);var i=n.dot(r);return i}function Bp(a,e){var t=a[a.length-1];t&&t[0]===e[0]&&t[1]===e[1]||a.push(e)}function M6e(a,e,t){for(var r=a.length,n=[],i=0;i<r;i++){var o=a[i],l=a[(i+1)%r],c=A6e(o[0],o[1],l[0],l[1],e.x,e.y,t.x,t.y);c&&n.push({projPt:T6e(c,e,t),pt:c,idx:i})}if(n.length<2)return[{points:a},{points:a}];n.sort(function(w,_){return w.projPt-_.projPt});var d=n[0],u=n[n.length-1];if(u.idx<d.idx){var h=d;d=u,u=h}for(var f=[d.pt.x,d.pt.y],p=[u.pt.x,u.pt.y],g=[f],b=[p],i=d.idx+1;i<=u.idx;i++)Bp(g,a[i].slice());Bp(g,p),Bp(g,f);for(var i=u.idx+1;i<=d.idx+r;i++)Bp(b,a[i%r].slice());return Bp(b,f),Bp(b,p),[{points:g},{points:b}]}function yV(a){var e=a.points,t=[],r=[];fN(e,t,r);var n=new Jt(t[0],t[1],r[0]-t[0],r[1]-t[1]),i=n.width,o=n.height,l=n.x,c=n.y,d=new Xt,u=new Xt;return i>o?(d.x=u.x=l+i/2,d.y=c,u.y=c+o):(d.y=u.y=c+o/2,d.x=l,u.x=l+i),M6e(e,d,u)}function A_(a,e,t,r){if(t===1)r.push(e);else{var n=Math.floor(t/2),i=a(e);A_(a,i[0],n,r),A_(a,i[1],t-n,r)}return r}function E6e(a,e){for(var t=[],r=0;r<e;r++)t.push(qT(a));return t}function D6e(a,e){e.setStyle(a.style),e.z=a.z,e.z2=a.z2,e.zlevel=a.zlevel}function I6e(a){for(var e=[],t=0;t<a.length;)e.push([a[t++],a[t++]]);return e}function R6e(a,e){var t=[],r=a.shape,n;switch(a.type){case"rect":C6e(r,e,t),n=Ta;break;case"sector":vV(r,e,t),n=ds;break;case"circle":vV({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},e,t),n=ds;break;default:var i=a.getComputedTransform(),o=i?Math.sqrt(Math.max(i[0]*i[0]+i[1]*i[1],i[2]*i[2]+i[3]*i[3])):1,l=it(k6e(a.getUpdatedPathProxy(),o),function(_){return I6e(_)}),c=l.length;if(c===0)A_(yV,{points:l[0]},e,t);else if(c===e)for(var d=0;d<c;d++)t.push({points:l[d]});else{var u=0,h=it(l,function(_){var k=[],T=[];fN(_,k,T);var D=(T[1]-k[1])*(T[0]-k[0]);return u+=D,{poly:_,area:D}});h.sort(function(_,k){return k.area-_.area});for(var f=e,d=0;d<c;d++){var p=h[d];if(f<=0)break;var g=d===c-1?f:Math.ceil(p.area/u*e);g<0||(A_(yV,{points:p.poly},g,t),f-=g)}}n=us;break}if(!n)return E6e(a,e);for(var b=[],d=0;d<t.length;d++){var w=new n;w.setShape(t[d]),D6e(a,w),b.push(w)}return b}function L6e(a,e){var t=a.length,r=e.length;if(t===r)return[a,e];for(var n=[],i=[],o=t<r?a:e,l=Math.min(t,r),c=Math.abs(r-t)/6,d=(l-2)/6,u=Math.ceil(c/d)+1,h=[o[0],o[1]],f=c,p=2;p<l;){var g=o[p-2],b=o[p-1],w=o[p++],_=o[p++],k=o[p++],T=o[p++],D=o[p++],I=o[p++];if(f<=0){h.push(w,_,k,T,D,I);continue}for(var O=Math.min(f,u-1)+1,P=1;P<=O;P++){var V=P/O;gh(g,w,k,D,V,n),gh(b,_,T,I,V,i),g=n[3],b=i[3],h.push(n[1],i[1],n[2],i[2],g,b),w=n[5],_=i[5],k=n[6],T=i[6]}f-=O-1}return o===a?[h,e]:[a,h]}function wV(a,e){for(var t=a.length,r=a[t-2],n=a[t-1],i=[],o=0;o<e.length;)i[o++]=r,i[o++]=n;return i}function O6e(a,e){for(var t,r,n,i=[],o=[],l=0;l<Math.max(a.length,e.length);l++){var c=a[l],d=e[l],u=void 0,h=void 0;c?d?(t=L6e(c,d),u=t[0],h=t[1],r=u,n=h):(h=wV(n||c,c),u=c):(u=wV(r||d,d),h=d),i.push(u),o.push(h)}return[i,o]}function _V(a){for(var e=0,t=0,r=0,n=a.length,i=0,o=n-2;i<n;o=i,i+=2){var l=a[o],c=a[o+1],d=a[i],u=a[i+1],h=l*u-d*c;e+=h,t+=(l+d)*h,r+=(c+u)*h}return e===0?[a[0]||0,a[1]||0]:[t/e/3,r/e/3,e]}function P6e(a,e,t,r){for(var n=(a.length-2)/6,i=1/0,o=0,l=a.length,c=l-2,d=0;d<n;d++){for(var u=d*6,h=0,f=0;f<l;f+=2){var p=f===0?u:(u+f-2)%c+2,g=a[p]-t[0],b=a[p+1]-t[1],w=e[f]-r[0],_=e[f+1]-r[1],k=w-g,T=_-b;h+=k*k+T*T}h<i&&(i=h,o=d)}return o}function B6e(a){for(var e=[],t=a.length,r=0;r<t;r+=2)e[r]=a[t-r-2],e[r+1]=a[t-r-1];return e}function z6e(a,e,t,r){for(var n=[],i,o=0;o<a.length;o++){var l=a[o],c=e[o],d=_V(l),u=_V(c);i==null&&(i=d[2]<0!=u[2]<0);var h=[],f=[],p=0,g=1/0,b=[],w=l.length;i&&(l=B6e(l));for(var _=P6e(l,c,d,u)*6,k=w-2,T=0;T<k;T+=2){var D=(_+T)%k+2;h[T+2]=l[D]-d[0],h[T+3]=l[D+1]-d[1]}h[0]=l[_]-d[0],h[1]=l[_+1]-d[1];for(var I=r/t,O=-r/2;O<=r/2;O+=I){for(var P=Math.sin(O),V=Math.cos(O),G=0,T=0;T<l.length;T+=2){var Q=h[T],$=h[T+1],ae=c[T]-u[0],J=c[T+1]-u[1],U=ae*V-J*P,F=ae*P+J*V;b[T]=U,b[T+1]=F;var W=U-Q,K=F-$;G+=W*W+K*K}if(G<g){g=G,p=O;for(var ee=0;ee<b.length;ee++)f[ee]=b[ee]}}n.push({from:h,to:f,fromCp:d,toCp:u,rotation:-p})}return n}function T_(a){return a.__isCombineMorphing}var FK="__mOriginal_";function M_(a,e,t){var r=FK+e,n=a[r]||a[e];a[r]||(a[r]=a[e]);var i=t.replace,o=t.after,l=t.before;a[e]=function(){var c=arguments,d;return l&&l.apply(this,c),i?d=i.apply(this,c):d=n.apply(this,c),o&&o.apply(this,c),d}}function gv(a,e){var t=FK+e;a[t]&&(a[e]=a[t],a[t]=null)}function NV(a,e){for(var t=0;t<a.length;t++)for(var r=a[t],n=0;n<r.length;){var i=r[n],o=r[n+1];r[n++]=e[0]*i+e[2]*o+e[4],r[n++]=e[1]*i+e[3]*o+e[5]}}function VK(a,e){var t=a.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),n=O6e(SA(t),SA(r)),i=n[0],o=n[1],l=a.getComputedTransform(),c=e.getComputedTransform();function d(){this.transform=null}l&&NV(i,l),c&&NV(o,c),M_(e,"updateTransform",{replace:d}),e.transform=null;var u=z6e(i,o,10,Math.PI),h=[];M_(e,"buildPath",{replace:function(f){for(var p=e.__morphT,g=1-p,b=[],w=0;w<u.length;w++){var _=u[w],k=_.from,T=_.to,D=_.rotation*p,I=_.fromCp,O=_.toCp,P=Math.sin(D),V=Math.cos(D);Lw(b,I,O,p);for(var G=0;G<k.length;G+=2){var Q=k[G],$=k[G+1],ae=T[G],J=T[G+1],U=Q*g+ae*p,F=$*g+J*p;h[G]=U*V-F*P+b[0],h[G+1]=U*P+F*V+b[1]}var W=h[0],K=h[1];f.moveTo(W,K);for(var G=2;G<k.length;){var ae=h[G++],J=h[G++],ee=h[G++],ne=h[G++],re=h[G++],Z=h[G++];W===ae&&K===J&&ee===re&&ne===Z?f.lineTo(re,Z):f.bezierCurveTo(ae,J,ee,ne,re,Z),W=re,K=Z}}}})}function VE(a,e,t){if(!a||!e)return e;var r=t.done,n=t.during;VK(a,e),e.__morphT=0;function i(){gv(e,"buildPath"),gv(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},Kt({during:function(o){e.dirtyShape(),n&&n(o)},done:function(){i(),r&&r()}},t)),e}function F6e(a,e,t,r,n,i){var o=16;a=n===t?0:Math.round(32767*(a-t)/(n-t)),e=i===r?0:Math.round(32767*(e-r)/(i-r));for(var l=0,c,d=(1<<o)/2;d>0;d/=2){var u=0,h=0;(a&d)>0&&(u=1),(e&d)>0&&(h=1),l+=d*d*(3*u^h),h===0&&(u===1&&(a=d-1-a,e=d-1-e),c=a,a=e,e=c)}return l}function E_(a){var e=1/0,t=1/0,r=-1/0,n=-1/0,i=it(a,function(l){var c=l.getBoundingRect(),d=l.getComputedTransform(),u=c.x+c.width/2+(d?d[4]:0),h=c.y+c.height/2+(d?d[5]:0);return e=Math.min(u,e),t=Math.min(h,t),r=Math.max(u,r),n=Math.max(h,n),[u,h]}),o=it(i,function(l,c){return{cp:l,z:F6e(l[0],l[1],e,t,r,n),path:a[c]}});return o.sort(function(l,c){return l.z-c.z}).map(function(l){return l.path})}function HK(a){return R6e(a.path,a.count)}function CA(){return{fromIndividuals:[],toIndividuals:[],count:0}}function V6e(a,e,t){var r=[];function n(I){for(var O=0;O<I.length;O++){var P=I[O];T_(P)?n(P.childrenRef()):P instanceof Ia&&r.push(P)}}n(a);var i=r.length;if(!i)return CA();var o=t.dividePath||HK,l=o({path:e,count:i});if(l.length!==i)return console.error("Invalid morphing: unmatched splitted path"),CA();r=E_(r),l=E_(l);for(var c=t.done,d=t.during,u=t.individualDelay,h=new jd,f=0;f<i;f++){var p=r[f],g=l[f];g.parent=e,g.copyTransform(h),u||VK(p,g)}e.__isCombineMorphing=!0,e.childrenRef=function(){return l};function b(I){for(var O=0;O<l.length;O++)l[O].addSelfToZr(I)}M_(e,"addSelfToZr",{after:function(I){b(I)}}),M_(e,"removeSelfFromZr",{after:function(I){for(var O=0;O<l.length;O++)l[O].removeSelfFromZr(I)}});function w(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,gv(e,"addSelfToZr"),gv(e,"removeSelfFromZr")}var _=l.length;if(u)for(var k=_,T=function(){k--,k===0&&(w(),c&&c())},f=0;f<_;f++){var D=u?Kt({delay:(t.delay||0)+u(f,_,r[f],l[f]),done:T},t):t;VE(r[f],l[f],D)}else e.__morphT=0,e.animateTo({__morphT:1},Kt({during:function(I){for(var O=0;O<_;O++){var P=l[O];P.__morphT=e.__morphT,P.dirtyShape()}d&&d(I)},done:function(){w();for(var I=0;I<a.length;I++)gv(a[I],"updateTransform");c&&c()}},t));return e.__zr&&b(e.__zr),{fromIndividuals:r,toIndividuals:l,count:_}}function H6e(a,e,t){var r=e.length,n=[],i=t.dividePath||HK;function o(p){for(var g=0;g<p.length;g++){var b=p[g];T_(b)?o(b.childrenRef()):b instanceof Ia&&n.push(b)}}if(T_(a)){o(a.childrenRef());var l=n.length;if(l<r)for(var c=0,d=l;d<r;d++)n.push(qT(n[c++%l]));n.length=r}else{n=i({path:a,count:r});for(var u=a.getComputedTransform(),d=0;d<n.length;d++)n[d].setLocalTransform(u);if(n.length!==r)return console.error("Invalid morphing: unmatched splitted path"),CA()}n=E_(n),e=E_(e);for(var h=t.individualDelay,d=0;d<r;d++){var f=h?Kt({delay:(t.delay||0)+h(d,r,n[d],e[d])},t):t;VE(n[d],e[d],f)}return{fromIndividuals:n,toIndividuals:e,count:e.length}}function jV(a){return rt(a[0])}function SV(a,e){for(var t=[],r=a.length,n=0;n<r;n++)t.push({one:a[n],many:[]});for(var n=0;n<e.length;n++){var i=e[n].length,o=void 0;for(o=0;o<i;o++)t[o%r].many.push(e[n][o])}for(var l=0,n=r-1;n>=0;n--)if(!t[n].many.length){var c=t[l].many;if(c.length<=1)if(l)l=0;else return t;var i=c.length,d=Math.ceil(i/2);t[n].many=c.slice(d,i),t[l].many=c.slice(0,d),l++}return t}var U6e={clone:function(a){for(var e=[],t=1-Math.pow(1-a.path.style.opacity,1/a.count),r=0;r<a.count;r++){var n=qT(a.path);n.setStyle("opacity",t),e.push(n)}return e},split:null};function TC(a,e,t,r,n,i){if(!a.length||!e.length)return;var o=qx("update",r,n);if(!(o&&o.duration>0))return;var l=r.getModel("universalTransition").get("delay"),c=Object.assign({setToFinal:!0},o),d,u;jV(a)&&(d=a,u=e),jV(e)&&(d=e,u=a);function h(_,k,T,D,I){var O=_.many,P=_.one;if(O.length===1&&!I){var V=k?O[0]:P,G=k?P:O[0];if(T_(V))h({many:[V],one:G},!0,T,D,!0);else{var Q=l?Kt({delay:l(T,D)},c):c;VE(V,G,Q),i(V,G,V,G,Q)}}else for(var $=Kt({dividePath:U6e[t],individualDelay:l&&function(K,ee,ne,re){return l(K+T,D)}},c),ae=k?V6e(O,P,$):H6e(P,O,$),J=ae.fromIndividuals,U=ae.toIndividuals,F=J.length,W=0;W<F;W++){var Q=l?Kt({delay:l(W,F)},c):c;i(J[W],U[W],k?O[W]:_.one,k?_.one:O[W],Q)}}for(var f=d?d===a:a.length>e.length,p=d?SV(u,d):SV(f?e:a,[f?a:e]),g=0,b=0;b<p.length;b++)g+=p[b].many.length;for(var w=0,b=0;b<p.length;b++)h(p[b],f,w,g),w+=p[b].many.length}function Pf(a){if(!a)return[];if(rt(a)){for(var e=[],t=0;t<a.length;t++)e.push(Pf(a[t]));return e}var r=[];return a.traverse(function(n){n instanceof Ia&&!n.disableMorphing&&!n.invisible&&!n.ignore&&r.push(n)}),r}var UK=1e4,G6e=0,kV=1,CV=2,W6e=Ea();function $6e(a,e){for(var t=a.dimensions,r=0;r<t.length;r++){var n=a.getDimensionInfo(t[r]);if(n&&n.otherDims[e]===0)return t[r]}}function Y6e(a,e,t){var r=a.getDimensionInfo(t),n=r&&r.ordinalMeta;if(r){var i=a.get(r.name,e);return n&&n.categories[i]||i+""}}function AV(a,e,t,r){var n=r?"itemChildGroupId":"itemGroupId",i=$6e(a,n);if(i){var o=Y6e(a,e,i);return o}var l=a.getRawDataItem(e),c=r?"childGroupId":"groupId";if(l&&l[c])return l[c]+"";if(!r)return t||a.getId(e)}function TV(a){var e=[];return oe(a,function(t){var r=t.data,n=t.dataGroupId;if(!(r.count()>UK))for(var i=r.getIndices(),o=0;o<i.length;o++)e.push({data:r,groupId:AV(r,o,n,!1),childGroupId:AV(r,o,n,!0),divide:t.divide,dataIndex:o})}),e}function MC(a,e,t){a.traverse(function(r){r instanceof Ia&&en(r,{style:{opacity:0}},e,{dataIndex:t,isFrom:!0})})}function EC(a){if(a.parent){var e=a.getComputedTransform();a.setLocalTransform(e),a.parent.remove(a)}}function zp(a){a.stopAnimation(),a.isGroup&&a.traverse(function(e){e.stopAnimation()})}function q6e(a,e,t){var r=qx("update",t,e);r&&a.traverse(function(n){if(n instanceof rl){var i=Ave(n);i&&n.animateFrom({style:i},r)}})}function X6e(a,e){var t=a.length;if(t!==e.length)return!1;for(var r=0;r<t;r++){var n=a[r],i=e[r];if(n.data.getId(n.dataIndex)!==i.data.getId(i.dataIndex))return!1}return!0}function GK(a,e,t){var r=TV(a),n=TV(e);function i(T,D,I,O,P){(I||T)&&D.animateFrom({style:I&&I!==T?Je(Je({},I.style),T.style):T.style},P)}var o=!1,l=G6e,c=Rt(),d=Rt();r.forEach(function(T){T.groupId&&c.set(T.groupId,!0),T.childGroupId&&d.set(T.childGroupId,!0)});for(var u=0;u<n.length;u++){var h=n[u].groupId;if(d.get(h)){l=kV;break}var f=n[u].childGroupId;if(f&&c.get(f)){l=CV;break}}function p(T,D){return function(I){var O=I.data,P=I.dataIndex;return D?O.getId(P):T?l===kV?I.childGroupId:I.groupId:l===CV?I.childGroupId:I.groupId}}var g=X6e(r,n),b={};if(!g)for(var u=0;u<n.length;u++){var w=n[u],_=w.data.getItemGraphicEl(w.dataIndex);_&&(b[_.id]=!0)}function k(T,D){var I=r[D],O=n[T],P=O.data.hostModel,V=I.data.getItemGraphicEl(I.dataIndex),G=O.data.getItemGraphicEl(O.dataIndex);if(V===G){G&&q6e(G,O.dataIndex,P);return}V&&b[V.id]||G&&(zp(G),V?(zp(V),EC(V),o=!0,TC(Pf(V),Pf(G),O.divide,P,T,i)):MC(G,P,T))}new Bd(r,n,p(!0,g),p(!1,g),null,"multiple").update(k).updateManyToOne(function(T,D){var I=n[T],O=I.data,P=O.hostModel,V=O.getItemGraphicEl(I.dataIndex),G=hr(it(D,function(Q){return r[Q].data.getItemGraphicEl(r[Q].dataIndex)}),function(Q){return Q&&Q!==V&&!b[Q.id]});V&&(zp(V),G.length?(oe(G,function(Q){zp(Q),EC(Q)}),o=!0,TC(Pf(G),Pf(V),I.divide,P,T,i)):MC(V,P,I.dataIndex))}).updateOneToMany(function(T,D){var I=r[D],O=I.data.getItemGraphicEl(I.dataIndex);if(!(O&&b[O.id])){var P=hr(it(T,function(G){return n[G].data.getItemGraphicEl(n[G].dataIndex)}),function(G){return G&&G!==O}),V=n[T[0]].data.hostModel;P.length&&(oe(P,function(G){return zp(G)}),O?(zp(O),EC(O),o=!0,TC(Pf(O),Pf(P),I.divide,V,T[0],i)):oe(P,function(G){return MC(G,V,T[0])}))}}).updateManyToMany(function(T,D){new Bd(D,T,function(I){return r[I].data.getId(r[I].dataIndex)},function(I){return n[I].data.getId(n[I].dataIndex)}).update(function(I,O){k(T[I],D[O])}).execute()}).execute(),o&&oe(e,function(T){var D=T.data,I=D.hostModel,O=I&&t.getViewOfSeriesModel(I),P=qx("update",I,0);O&&I.isAnimationEnabled()&&P&&P.duration>0&&O.group.traverse(function(V){V instanceof Ia&&!V.animators.length&&V.animateFrom({style:{opacity:0}},P)})})}function MV(a){var e=a.getModel("universalTransition").get("seriesKey");return e||a.id}function EV(a){return rt(a)?a.sort().join(","):a}function zu(a){if(a.hostModel)return a.hostModel.getModel("universalTransition").get("divideShape")}function Z6e(a,e){var t=Rt(),r=Rt(),n=Rt();return oe(a.oldSeries,function(i,o){var l=a.oldDataGroupIds[o],c=a.oldData[o],d=MV(i),u=EV(d);r.set(u,{dataGroupId:l,data:c}),rt(d)&&oe(d,function(h){n.set(h,{key:u,dataGroupId:l,data:c})})}),oe(e.updatedSeries,function(i){if(i.isUniversalTransitionEnabled()&&i.isAnimationEnabled()){var o=i.get("dataGroupId"),l=i.getData(),c=MV(i),d=EV(c),u=r.get(d);if(u)t.set(d,{oldSeries:[{dataGroupId:u.dataGroupId,divide:zu(u.data),data:u.data}],newSeries:[{dataGroupId:o,divide:zu(l),data:l}]});else if(rt(c)){var h=[];oe(c,function(g){var b=r.get(g);b.data&&h.push({dataGroupId:b.dataGroupId,divide:zu(b.data),data:b.data})}),h.length&&t.set(d,{oldSeries:h,newSeries:[{dataGroupId:o,data:l,divide:zu(l)}]})}else{var f=n.get(c);if(f){var p=t.get(f.key);p||(p={oldSeries:[{dataGroupId:f.dataGroupId,data:f.data,divide:zu(f.data)}],newSeries:[]},t.set(f.key,p)),p.newSeries.push({dataGroupId:o,data:l,divide:zu(l)})}}}}),t}function DV(a,e){for(var t=0;t<a.length;t++){var r=e.seriesIndex!=null&&e.seriesIndex===a[t].seriesIndex||e.seriesId!=null&&e.seriesId===a[t].id;if(r)return t}}function K6e(a,e,t,r){var n=[],i=[];oe(Rr(a.from),function(o){var l=DV(e.oldSeries,o);l>=0&&n.push({dataGroupId:e.oldDataGroupIds[l],data:e.oldData[l],divide:zu(e.oldData[l]),groupIdDim:o.dimension})}),oe(Rr(a.to),function(o){var l=DV(t.updatedSeries,o);if(l>=0){var c=t.updatedSeries[l].getData();i.push({dataGroupId:e.oldDataGroupIds[l],data:c,divide:zu(c),groupIdDim:o.dimension})}}),n.length>0&&i.length>0&&GK(n,i,r)}function Q6e(a){a.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){oe(Rr(r.seriesTransition),function(n){oe(Rr(n.to),function(i){for(var o=r.updatedSeries,l=0;l<o.length;l++)(i.seriesIndex!=null&&i.seriesIndex===o[l].seriesIndex||i.seriesId!=null&&i.seriesId===o[l].id)&&(o[l][Yw]=!0)})})}),a.registerUpdateLifecycle("series:transition",function(e,t,r){var n=W6e(t);if(n.oldSeries&&r.updatedSeries&&r.optionChanged){var i=r.seriesTransition;if(i)oe(Rr(i),function(p){K6e(p,n,r,t)});else{var o=Z6e(n,r);oe(o.keys(),function(p){var g=o.get(p);GK(g.oldSeries,g.newSeries,t)})}oe(r.updatedSeries,function(p){p[Yw]&&(p[Yw]=!1)})}for(var l=e.getSeries(),c=n.oldSeries=[],d=n.oldDataGroupIds=[],u=n.oldData=[],h=0;h<l.length;h++){var f=l[h].getData();f.count()<UK&&(c.push(l[h]),d.push(l[h].get("dataGroupId")),u.push(f))}})}var J6e=(function(){function a(){this.breaks=[],this._elapsedExtent=[1/0,-1/0]}return a.prototype.setBreaks=function(e){this.breaks=e.breaks},a.prototype.update=function(e){tDe(this,e);var t=this._elapsedExtent;t[0]=this.elapse(e[0]),t[1]=this.elapse(e[1])},a.prototype.hasBreaks=function(){return!!this.breaks.length},a.prototype.calcNiceTickMultiple=function(e,t){for(var r=0;r<this.breaks.length;r++){var n=this.breaks[r];if(n.vmin<e&&e<n.vmax){var i=t(e,n.vmax);return i}}return 0},a.prototype.getExtentSpan=function(){return this._elapsedExtent[1]-this._elapsedExtent[0]},a.prototype.normalize=function(e){var t=this._elapsedExtent[1]-this._elapsedExtent[0];return t===0?.5:(this.elapse(e)-this._elapsedExtent[0])/t},a.prototype.scale=function(e){return this.unelapse(e*(this._elapsedExtent[1]-this._elapsedExtent[0])+this._elapsedExtent[0])},a.prototype.elapse=function(e){for(var t=IV,r=RV,n=!0,i=0;i<this.breaks.length;i++){var o=this.breaks[i];if(e<=o.vmax){e>o.vmin?t+=o.vmin-r+(e-o.vmin)/(o.vmax-o.vmin)*o.gapReal:t+=e-r,r=o.vmax,n=!1;break}t+=o.vmin-r+o.gapReal,r=o.vmax}return n&&(t+=e-r),t},a.prototype.unelapse=function(e){for(var t=IV,r=RV,n=!0,i=0,o=0;o<this.breaks.length;o++){var l=this.breaks[o],c=t+l.vmin-r,d=c+l.gapReal;if(e<=d){e>c?i=l.vmin+(e-c)/(d-c)*(l.vmax-l.vmin):i=r+e-t,r=l.vmax,n=!1;break}t=d,r=l.vmax}return n&&(i=r+e-t),i},a})();function eDe(){return new J6e}var IV=0,RV=0;function tDe(a,e){var t=0,r={tpAbs:{span:0,val:0},tpPrct:{span:0,val:0}},n=function(){return{has:!1,span:NaN,inExtFrac:NaN,val:NaN}},i={S:{tpAbs:n(),tpPrct:n()},E:{tpAbs:n(),tpPrct:n()}};oe(a.breaks,function(l){var c=l.gapParsed;c.type==="tpPrct"&&(t+=c.val);var d=HE(l,e);if(d){var u=d.vmin!==l.vmin,h=d.vmax!==l.vmax,f=d.vmax-d.vmin;if(!(u&&h))if(u||h){var p=u?"S":"E";i[p][c.type].has=!0,i[p][c.type].span=f,i[p][c.type].inExtFrac=f/(l.vmax-l.vmin),i[p][c.type].val=c.val}else r[c.type].span+=f,r[c.type].val+=c.val}});var o=t*(0+(e[1]-e[0])+(r.tpAbs.val-r.tpAbs.span)+(i.S.tpAbs.has?(i.S.tpAbs.val-i.S.tpAbs.span)*i.S.tpAbs.inExtFrac:0)+(i.E.tpAbs.has?(i.E.tpAbs.val-i.E.tpAbs.span)*i.E.tpAbs.inExtFrac:0)-r.tpPrct.span-(i.S.tpPrct.has?i.S.tpPrct.span*i.S.tpPrct.inExtFrac:0)-(i.E.tpPrct.has?i.E.tpPrct.span*i.E.tpPrct.inExtFrac:0))/(1-r.tpPrct.val-(i.S.tpPrct.has?i.S.tpPrct.val*i.S.tpPrct.inExtFrac:0)-(i.E.tpPrct.has?i.E.tpPrct.val*i.E.tpPrct.inExtFrac:0));oe(a.breaks,function(l){var c=l.gapParsed;c.type==="tpPrct"&&(l.gapReal=t!==0?Math.max(o,0)*c.val/t:0),c.type==="tpAbs"&&(l.gapReal=c.val),l.gapReal==null&&(l.gapReal=0)})}function aDe(a,e,t,r,n,i){a!=="no"&&oe(t,function(o){var l=HE(o,i);if(l)for(var c=e.length-1;c>=0;c--){var d=e[c],u=r(d),h=n*3/4;u>l.vmin-h&&u<l.vmax+h&&(a!=="preserve_extent_bound"||u!==i[0]&&u!==i[1])&&e.splice(c,1)}})}function rDe(a,e,t,r){oe(e,function(n){var i=HE(n,t);i&&(a.push({value:i.vmin,break:{type:"vmin",parsedBreak:i},time:r?r(i):void 0}),a.push({value:i.vmax,break:{type:"vmax",parsedBreak:i},time:r?r(i):void 0}))}),e.length&&a.sort(function(n,i){return n.value-i.value})}function HE(a,e){var t=Math.max(a.vmin,e[0]),r=Math.min(a.vmax,e[1]);return t<r||t===r&&t>e[0]&&t<e[1]?{vmin:t,vmax:r,breakOption:a.breakOption,gapParsed:a.gapParsed,gapReal:a.gapReal}:null}function AA(a,e,t){var r=[];if(!a)return{breaks:r};function n(o,l){return o>=0&&o<1-1e-5}oe(a,function(o){if(!(!o||o.start==null||o.end==null)&&!o.isExpanded){var l={breakOption:$t(o),vmin:e(o.start),vmax:e(o.end),gapParsed:{type:"tpAbs",val:0},gapReal:null};if(o.gap!=null){var c=!1;if(jt(o.gap)){var d=Jo(o.gap);if(d.match(/%$/)){var u=parseFloat(d)/100;n(u)||(u=0),l.gapParsed.type="tpPrct",l.gapParsed.val=u,c=!0}}if(!c){var h=e(o.gap);(!isFinite(h)||h<0)&&(h=0),l.gapParsed.type="tpAbs",l.gapParsed.val=h}}if(l.vmin===l.vmax&&(l.gapParsed.type="tpAbs",l.gapParsed.val=0),t&&t.noNegative&&oe(["vmin","vmax"],function(p){l[p]<0&&(l[p]=0)}),l.vmin>l.vmax){var f=l.vmax;l.vmax=l.vmin,l.vmin=f}r.push(l)}}),r.sort(function(o,l){return o.vmin-l.vmin});var i=-1/0;return oe(r,function(o,l){i>o.vmin&&(r[l]=null),i=o.vmax}),{breaks:r.filter(function(o){return!!o})}}function UE(a,e){return TA(e)===TA(a)}function TA(a){return a.start+"_\0_"+a.end}function nDe(a,e,t){var r=[];oe(a,function(i,o){var l=e(i);l&&l.type==="vmin"&&r.push([o])}),oe(a,function(i,o){var l=e(i);if(l&&l.type==="vmax"){var c=C0(r,function(d){return UE(e(a[d[0]]).parsedBreak.breakOption,l.parsedBreak.breakOption)});c&&c.push(o)}});var n=[];return oe(r,function(i){i.length===2&&n.push(t?i:[a[i[0]],a[i[1]]])}),n}function iDe(a,e,t,r){var n,i;if(a.break){var o=a.break.parsedBreak,l=C0(t,function(h){return UE(h.breakOption,a.break.parsedBreak.breakOption)}),c=r(Math.pow(e,o.vmin),l.vmin),d=r(Math.pow(e,o.vmax),l.vmax),u={type:o.gapParsed.type,val:o.gapParsed.type==="tpAbs"?Yn(Math.pow(e,o.vmin+o.gapParsed.val))-c:o.gapParsed.val};n={type:a.break.type,parsedBreak:{breakOption:o.breakOption,vmin:c,vmax:d,gapParsed:u,gapReal:o.gapReal}},i=l[a.break.type]}return{brkRoundingCriterion:i,vBreak:n}}function sDe(a,e,t){var r={noNegative:!0},n=AA(a,t,r),i=AA(a,t,r),o=Math.log(e);return i.breaks=it(i.breaks,function(l){var c=Math.log(l.vmin)/o,d=Math.log(l.vmax)/o,u={type:l.gapParsed.type,val:l.gapParsed.type==="tpAbs"?Math.log(l.vmin+l.gapParsed.val)/o-c:l.gapParsed.val};return{vmin:c,vmax:d,gapParsed:u,gapReal:l.gapReal,breakOption:l.breakOption}}),{parsedOriginal:n,parsedLogged:i}}var oDe={vmin:"start",vmax:"end"};function lDe(a,e){return e&&(a=a||{},a.break={type:oDe[e.type],start:e.parsedBreak.vmin,end:e.parsedBreak.vmax}),a}function cDe(){Kve({createScaleBreakContext:eDe,pruneTicksByBreak:aDe,addBreaksToTicks:rDe,parseAxisBreakOption:AA,identifyAxisBreak:UE,serializeAxisBreakIdentifier:TA,retrieveAxisBreakPairs:nDe,getTicksLogTransformBreak:iDe,logarithmicParseBreaksFromOption:sDe,makeAxisLabelFormatterParamBreak:lDe})}var LV=Ea();function dDe(a,e){var t=C0(a,function(r){return Xn().identifyAxisBreak(r.parsedBreak.breakOption,e.breakOption)});return t||a.push(t={zigzagRandomList:[],parsedBreak:e,shouldRemove:!1}),t}function uDe(a){oe(a,function(e){return e.shouldRemove=!0})}function hDe(a){for(var e=a.length-1;e>=0;e--)a[e].shouldRemove&&a.splice(e,1)}function fDe(a,e,t,r,n){var i=t.axis;if(i.scale.isBlank()||!Xn())return;var o=Xn().retrieveAxisBreakPairs(i.scale.getTicks({breakTicks:"only_break"}),function(G){return G.break},!1);if(!o.length)return;var l=t.getModel("breakArea"),c=l.get("zigzagAmplitude"),d=l.get("zigzagMinSpan"),u=l.get("zigzagMaxSpan");d=Math.max(2,d||0),u=Math.max(d,u||0);var h=l.get("expandOnClick"),f=l.get("zigzagZ"),p=l.getModel("itemStyle"),g=p.getItemStyle(),b=g.stroke,w=g.lineWidth,_=g.lineDash,k=g.fill,T=new Gt({ignoreModelZ:!0}),D=i.isHorizontal(),I=LV(e).visualList||(LV(e).visualList=[]);uDe(I);for(var O=function(G){var Q=o[G][0].break.parsedBreak,$=[];$[0]=i.toGlobalCoord(i.dataToCoord(Q.vmin,!0)),$[1]=i.toGlobalCoord(i.dataToCoord(Q.vmax,!0)),$[1]<$[0]&&$.reverse();var ae=dDe(I,Q);ae.shouldRemove=!1;var J=new Gt;V(ae.zigzagRandomList,J,$[0],$[1],D,Q),h&&J.on("click",function(){var U={type:IN,breaks:[{start:Q.breakOption.start,end:Q.breakOption.end}]};U[i.dim+"AxisIndex"]=t.componentIndex,n.dispatchAction(U)}),J.silent=!h,T.add(J)},P=0;P<o.length;P++)O(P);a.add(T),hDe(I);function V(G,Q,$,ae,J,U){var F={stroke:b,lineWidth:w,lineDash:_,fill:"none"},W=J?0:1,K=1-W,ee=r[da[K]]+r[Qn[K]];function ne(Ee){var ze=[],Ze=[];ze[W]=Ze[W]=Ee,ze[K]=r[da[K]],Ze[K]=ee;var Re={x1:ze[0],y1:ze[1],x2:Ze[0],y2:Ze[1]};return xN(Re,Re,{lineWidth:1}),ze[0]=Re.x1,ze[1]=Re.y1,ze[W]}$=ne($),ae=ne(ae);for(var re=[],Z=[],ie=!0,de=r[da[K]],fe=0;;fe++){var he=de===r[da[K]],ve=de>=ee;ve&&(de=ee);var Oe=[],Se=[];Oe[W]=$,Se[W]=ae,!he&&!ve&&(Oe[W]+=ie?-c:c,Se[W]-=ie?c:-c),Oe[K]=de,Se[K]=de,re.push(Oe),Z.push(Se);var Ce=void 0;if(fe<G.length?Ce=G[fe]:(Ce=Math.random(),G.push(Ce)),de+=Ce*(u-d)+d,ie=!ie,ve)break}var we=Xn().serializeAxisBreakIdentifier(U.breakOption);if(Q.add(new $i({anid:"break_a_"+we,shape:{points:re},style:F,z:f})),U.gapReal!==0){Q.add(new $i({anid:"break_b_"+we,shape:{points:Z},style:F,z:f}));var xe=Z.slice();xe.reverse();var be=re.concat(xe);Q.add(new us({anid:"break_c_"+we,shape:{points:be},style:{fill:k,opacity:g.opacity},z:f}))}}}function pDe(a,e,t,r){var n=a.axis,i=t.transform;cs(r.style);var o=n.getExtent();n.inverse&&(o=o.slice(),o.reverse());var l=Xn().retrieveAxisBreakPairs(n.scale.getTicks({breakTicks:"only_break"}),function(w){return w.break},!1),c=it(l,function(w){var _=w[0].break.parsedBreak,k=[n.dataToCoord(_.vmin,!0),n.dataToCoord(_.vmax,!0)];return k[0]>k[1]&&k.reverse(),{coordPair:k,brkId:Xn().serializeAxisBreakIdentifier(_.breakOption)}});c.sort(function(w,_){return w.coordPair[0]-_.coordPair[0]});for(var d=o[0],u=null,h=0;h<c.length;h++){var f=c[h],p=Math.max(f.coordPair[0],o[0]),g=Math.min(f.coordPair[1],o[1]);d<=p&&b(d,p,u,f),d=g,u=f}d<=o[1]&&b(d,o[1],u,null);function b(w,_,k,T){function D($,ae){i&&(zn($,$,i),zn(ae,ae,i))}function I($,ae){var J={x1:$[0],y1:$[1],x2:ae[0],y2:ae[1]};xN(J,J,r.style),$[0]=J.x1,$[1]=J.y1,ae[0]=J.x2,ae[1]=J.y2}var O=[w,0],P=[_,0],V=[w,5],G=[_,5];D(O,V),I(O,V),D(P,G),I(P,G),I(O,P);var Q=new qn(Je({shape:{x1:O[0],y1:O[1],x2:P[0],y2:P[1]}},r));e.add(Q),Q.anid="breakLine_"+(k?k.brkId:"\0")+"_\0_"+(T?T.brkId:"\0")}}function xDe(a,e,t){if(C0(t,function(k){return!k}))return;var r=new Xt;if(!EN(t[0],t[1],r,{direction:-(a?e+Math.PI:e),touchThreshold:0,bidirectional:!1}))return;var n=Ii();Ch(n,n,-e);var i=it(t,function(k){return k.transform?bc(Ii(),n,k.transform):n});function o(k){var T=t[0].localRect,D=new Xt(T[Qn[k]]*i[0][0],T[Qn[k]]*i[0][1]);return Math.abs(D.y)<1e-5}var l=.5;if(o(0)||o(1)){var c=it(t,function(k,T){var D=k.localRect.clone();return D.applyTransform(i[T]),D}),d=new Xt;d.copy(t[0].label).add(t[1].label).scale(.5),d.transform(n);var u=r.clone().transform(n),h=c[0].x+c[1].x+(u.x>=0?c[0].width:c[1].width),f=(h+u.x)/2-d.x,p=Math.min(f,f-u.x),g=Math.max(f,f-u.x),b=g<0?g:p>0?p:0;l=(f-b)/u.x}var w=new Xt,_=new Xt;Xt.scale(w,r,-l),Xt.scale(_,r,1-l),M3(t[0],w),M3(t[1],_)}function mDe(a,e){var t={breaks:[]};return oe(e.breaks,function(r){if(r){var n=C0(a.get("breaks",!0),function(l){return Xn().identifyAxisBreak(l,r)});if(n){var i=e.type,o={isExpanded:!!n.isExpanded};n.isExpanded=i===IN?!0:i===uX?!1:i===hX?!n.isExpanded:n.isExpanded,t.breaks.push({start:n.start,end:n.end,isExpanded:!!n.isExpanded,old:o})}}}),t}function gDe(){hNe({adjustBreakLabelPair:xDe,buildAxisBreakLine:pDe,rectCoordBuildBreakAxis:fDe,updateModelAxisBreak:mDe})}function vDe(a){vNe(a),cDe(),gDe()}function bDe(){zNe(yDe)}function yDe(a,e){oe(a,function(t){if(!t.model.get(["axisLabel","inside"])){var r=wDe(t);if(r){var n=t.isHorizontal()?"height":"width",i=t.model.get(["axisLabel","margin"]);e[n]-=r[n]+i,t.position==="top"?e.y+=r.height+i:t.position==="left"&&(e.x+=r.width+i)}}})}function wDe(a){var e=a.model,t=a.scale;if(!e.get(["axisLabel","show"])||t.isBlank())return;var r,n,i=t.getExtent();t instanceof Mx?n=t.count():(r=t.getTicks(),n=r.length);var o=a.getLabelModel(),l=em(a),c,d=1;n>40&&(d=Math.ceil(n/40));for(var u=0;u<n;u+=d){var h=r?r[u]:{value:i[0]+u},f=l(h,u),p=o.getTextRect(f),g=b(p,o.get("rotate")||0);c?c.union(g):c=g}return c;function b(w,_){var k=_*Math.PI/180,T=w.width,D=w.height,I=T*Math.abs(Math.cos(k))+Math.abs(D*Math.sin(k)),O=T*Math.abs(Math.sin(k))+Math.abs(D*Math.cos(k)),P=new Jt(w.x,w.y,I,O);return P}}Sa([d_e]);Sa([i_e]);Sa([M_e,W_e,tNe,nje,xje,nSe,ESe,pke,Lke,Hke,qke,a5e,X5e,bCe,MCe,$Ce,ZCe,s4e,f4e,j4e,M4e,F4e,j3e]);Sa(U3e);Sa(pAe);Sa(BX);Sa(kAe);Sa(jZ);Sa(MAe);Sa(ZAe);Sa(iTe);Sa(WTe);Sa(dMe);Sa(Gb);Sa(kMe);Sa(TMe);Sa(zMe);Sa(YMe);Sa(JMe);Sa(iEe);Sa(xEe);Sa(REe);Sa(MK);Sa(EK);Sa(e6e);Sa(OK);Sa(PK);Sa(n6e);Sa(c6e);Sa(_6e);Sa(S6e);Sa(Q6e);Sa(S2e);Sa(vDe);Sa(bDe);Sa(ije);const _De=()=>{const{showAlert:a}=Na(),[e,t]=H.useState([]),[r,n]=H.useState(new Date().getFullYear()),[i,o]=H.useState(!1),[l,c]=H.useState(""),[d,u]=H.useState([]),[h,f]=H.useState(null),[p,g]=H.useState(!1),b=H.useRef(null),w=H.useRef(null);H.useEffect(()=>{const D=new Date().getFullYear(),I=[];for(let P=0;P<5;P++)I.push(D-P);t(I);const O=()=>{w.current&&w.current.resize()};return window.addEventListener("resize",O),_(D),()=>{window.removeEventListener("resize",O),w.current&&w.current.dispose()}},[]);const _=async D=>{D=D||r,o(!0),c(`${D}     ...`),f(null);try{const I=await Pa("get_sales_by_region_analysis",{year:Number(D)});u(I||[]),c("   ..."),await k(I||[]),o(!1),T(I||[],D)}catch(I){console.error("Region Analysis Error:",I),a(" ",I.toString()),o(!1)}},k=async D=>{if(b.current){w.current&&w.current.dispose(),w.current=VY(b.current),w.current.showLoading({color:"#6366f1",text:"  ...",textColor:"#1e293b"});try{if(!Xye("south-korea")){const G=await fetch("https://raw.githubusercontent.com/southkorea/southkorea-maps/master/kostat/2018/json/skorea-provinces-2018-geo.json");if(!G.ok)throw new Error("   ");const Q=await G.json();Q.features.forEach($=>{$.properties.name=$.properties.name||$.properties.name_ko}),$Y("south-korea",Q)}const I=D.map(V=>({name:V.region,value:V.total_amount})),O=Math.max(...D.map(V=>V.total_amount),1e7),P={tooltip:{trigger:"item",formatter:V=>{const G=V.value?V.value.toLocaleString():"0";return`<div class="font-sans text-sm p-1">
                                    <div class="font-bold text-slate-700 mb-1">${V.name}</div>
                                    <div class="text-indigo-600 font-bold">${G}</div>
                                </div>`},backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#e2e8f0",borderWidth:1,textStyle:{color:"#334155"}},visualMap:{min:0,max:O,left:"right",bottom:"20",text:["High Sales","Low Sales"],calculable:!0,inRange:{color:["#f5f3ff","#a5b4fc","#6366f1","#4338ca","#1e1b4b"]},orient:"horizontal",right:20},series:[{name:"",type:"map",map:"south-korea",roam:!0,zoom:1.2,label:{show:!0,fontSize:10,color:"#64748b"},itemStyle:{areaColor:"#f8fafc",borderColor:"#cbd5e1",borderWidth:1},emphasis:{label:{show:!0,color:"#fff",fontWeight:"bold"},itemStyle:{areaColor:"#f43f5e"}},select:{itemStyle:{areaColor:"#f43f5e"}},data:I}]};w.current.hideLoading(),w.current.setOption(P)}catch(I){console.error(I),w.current.hideLoading(),b.current.innerHTML=`<div class="h-full flex flex-col items-center justify-center text-slate-400">
                <span class="material-symbols-rounded text-4xl mb-2">broken_image</span>
                <p>   .</p>
            </div>`}}},T=async(D,I)=>{g(!0);try{const O=D.slice(0,8).map(G=>`${G.region}: ${Ve(G.total_amount)} (${G.total_quantity})`).join(", "),P=`
                 Mycelium    ''.
                ${I}     : [${O}].
                
                   :
                1. **  **:      
                2. **  **:        (  )
                3. ** **:       (2-3)
                
                  () .
            `,V=await _l(a,"call_gemini_ai",{prompt:P});f(V)}catch(O){console.error("AI Error:",O),f("AI    . (API   )")}finally{g(!1)}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Geographical Intelligence"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-700 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["AI    ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Regional Heatmap"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"map"}),"         ."]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 min-h-0 custom-scrollbar flex flex-col gap-6",children:[s.jsx("div",{className:"bg-white rounded-2xl p-4 border border-slate-200 shadow-sm flex flex-col md:flex-row justify-between items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 border border-slate-200 rounded-lg px-3 py-1",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Analysis Year"}),s.jsx("select",{value:r,onChange:D=>{n(D.target.value),_(D.target.value)},className:"bg-transparent text-sm font-bold text-slate-800 outline-none border-none cursor-pointer",children:e.map(D=>s.jsxs("option",{value:D,children:[D,""]},D))})]}),s.jsxs("button",{onClick:()=>_(r),disabled:i,className:"px-5 py-2 bg-indigo-600 text-white text-sm font-bold rounded-lg hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200 flex items-center gap-2 disabled:opacity-50",children:[s.jsx("span",{className:`material-symbols-rounded ${i?"animate-spin":""}`,children:i?"sync":"analytics"}),i?" ...":" "]})]})}),s.jsxs("div",{className:"flex flex-col xl:flex-row gap-6 min-h-[600px]",children:[s.jsxs("div",{className:"flex-[2] bg-white rounded-2xl border border-slate-200 shadow-sm relative flex flex-col overflow-hidden min-h-[500px]",children:[s.jsxs("div",{className:"absolute top-5 left-5 z-10 bg-white/90 backdrop-blur px-3 py-2 rounded-xl border border-slate-100 shadow-sm",children:[s.jsx("h3",{className:"text-slate-700 font-bold text-sm",children:"   "}),s.jsx("div",{className:"text-xs text-slate-400",children:"   "})]}),s.jsx("div",{ref:b,className:"flex-1 w-full h-full bg-slate-50/30"}),i&&s.jsxs("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center z-20",children:[s.jsx("span",{className:"material-symbols-rounded text-5xl text-indigo-500 animate-spin mb-4",children:"public"}),s.jsx("h3",{className:"font-bold text-slate-700",children:l})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col gap-6 w-full xl:w-[450px]",children:[s.jsxs("div",{className:"bg-gradient-to-br from-violet-50 to-white rounded-2xl border-l-[6px] border-violet-500 p-6 shadow-sm relative overflow-hidden group",children:[s.jsx("div",{className:"absolute right-[-20px] bottom-[-20px] opacity-5 transform rotate-[-15deg] transition-transform group-hover:rotate-0 duration-700",children:s.jsx("span",{className:"material-symbols-rounded",style:{fontSize:"150px"},children:"psychology_alt"})}),s.jsxs("h3",{className:"text-violet-700 font-bold mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"auto_awesome"}),"    "]}),s.jsx("div",{className:"relative min-h-[100px]",children:p?s.jsxs("div",{className:"flex items-center gap-3 text-slate-400 py-4",children:[s.jsx("span",{className:"material-symbols-rounded animate-spin",children:"smart_toy"}),s.jsx("span",{className:"text-sm",children:"AI     ..."})]}):s.jsx("div",{className:"text-sm text-slate-700 leading-relaxed whitespace-pre-line animate-in fade-in",children:h||"   AI  ."})})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-2xl border border-slate-200 flex flex-col min-h-0 overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[s.jsx("h3",{className:"font-bold text-slate-700 text-sm",children:"  "}),s.jsx("span",{className:"text-xs font-bold text-slate-400",children:"TOP 10"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"sticky top-0 bg-white z-10 shadow-sm text-xs uppercase text-slate-400 font-bold",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-3 px-4 text-center w-[15%]",children:""}),s.jsx("th",{className:"py-3 px-4 w-[40%]",children:""}),s.jsx("th",{className:"py-3 px-4 text-right w-[45%]",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[d.slice(0,10).map((D,I)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"py-3 px-4 text-center font-bold text-slate-400",children:I+1}),s.jsx("td",{className:"py-3 px-4 font-bold text-slate-700",children:D.region}),s.jsx("td",{className:"py-3 px-4 text-right font-mono font-bold text-indigo-600",children:Ve(D.total_amount)})]},I)),d.length===0&&!i&&s.jsx("tr",{children:s.jsx("td",{colSpan:"3",className:"p-8 text-center text-slate-400",children:" ."})})]})]})}),d.length>0&&s.jsxs("div",{className:"p-4 border-t border-slate-100 bg-slate-50/30 text-xs text-slate-500 text-center",children:[" ",s.jsx("strong",{className:"text-slate-800",children:d.length}),"    ."]})]})]})]})]})]})},NDe=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState({name:"   ...",products:""}),[n,i]=H.useState(!1),[o,l]=H.useState(""),[c,d]=H.useState(null),[u,h]=H.useState([]),[f,p]=H.useState(!1);H.useEffect(()=>{g()},[]);const g=async()=>{try{const D=await Pa("get_company_info",{});r({name:D?.company_name||"  ",products:"( :   )"})}catch(D){console.error(D),r({name:"   ",products:""})}},b=async()=>{i(!0),p(!1),d(null),h([]);try{l("     ...");const D=t.name==="   ..."||!t.name?"":t.name,I=await Pa("fetch_naver_search",{query:D});l("   ...");const O=I.map(G=>({source:"Naver Blog",text:G.title.replace(/<[^>]*>?/gm,"")+" "+G.description.replace(/<[^>]*>?/gm,""),date:G.postdate||new Date().toISOString().slice(0,10),link:G.link}));l("Gemini AI     ...");const P=await _l(a,"analyze_online_sentiment",{mentions:O}),V=(P.analyzed_mentions||[]).map((G,Q)=>{const $=O[Q];return{date:$?$.date:new Date().toISOString().slice(0,10),channel:"Naver Blog",text:G.original_text,sentiment:G.sentiment_label,score:G.sentiment_score,link:$?$.link:"#"}});d({totalScore:P.total_score,verdict:P.verdict,summary:P.summary,keywords:P.keywords||[]}),h(V),p(!0)}catch(D){console.error("Analysis Error:",D);const I=typeof D=="string"?D:D.message||String(D);I!=="AI_QUOTA_EXCEEDED"&&a(" ",`    : ${I}`)}finally{i(!1)}},w=()=>{if(!c){a("","  .    .");return}`${t.name}`;const D=`
            <style>
                @page { size: A4; margin: 20mm; }
                .report-print-wrapper { font-family: 'Pretendard', sans-serif; padding: 20px; color: #334155; line-height: 1.6; }
                .report-print-wrapper .header { text-align: center; margin-bottom: 40px; border-bottom: 3px solid #7c3aed; padding-bottom: 20px; }
                .report-print-wrapper .header h1 { margin: 0; font-size: 28px; font-weight: 900; color: #1e1b4b; }
                .report-print-wrapper .header p { margin: 10px 0 0; font-weight: bold; font-size: 14px; color: #64748b; }
                .report-print-wrapper .score-section { display: flex; justify-content: space-around; align-items: center; margin-bottom: 40px; background: #f5f3ff; padding: 30px; rounded: 20px; border: 1px solid #ddd6fe; }
                .report-print-wrapper .score-box { text-align: center; }
                .report-print-wrapper .score-label { font-size: 12px; font-weight: 800; color: #7c3aed; text-transform: uppercase; letter-spacing: 0.1em; }
                .report-print-wrapper .score-value { font-size: 48px; font-weight: 900; color: #1e1b4b; }
                .report-print-wrapper .verdict { font-size: 18px; font-weight: 800; color: #7c3aed; }
                .report-print-wrapper .section-title { font-size: 18px; font-weight: 900; color: #1e1b4b; margin-bottom: 15px; border-left: 5px solid #7c3aed; padding-left: 12px; }
                .report-print-wrapper .content-box { background: #fff; border: 1px solid #e2e8f0; padding: 20px; border-radius: 12px; margin-bottom: 30px; }
                .report-print-wrapper .summary { font-size: 14px; white-space: pre-wrap; }
                .report-print-wrapper .keyword-tag { display: inline-block; padding: 4px 12px; background: #ede9fe; color: #6d28d9; border-radius: 20px; font-size: 12px; font-weight: bold; margin: 4px; }
                .report-print-wrapper table { width: 100%; border-collapse: collapse; font-size: 11px; margin-top: 20px; }
                .report-print-wrapper th, .report-print-wrapper td { border-bottom: 1px solid #e2e8f0; padding: 12px 8px; text-align: left; }
                .report-print-wrapper th { color: #64748b; font-weight: 800; text-transform: uppercase; font-size: 10px; }
                .report-print-wrapper .sentiment-pos { color: #059669; font-weight: bold; }
                .report-print-wrapper .sentiment-neg { color: #dc2626; font-weight: bold; }
                .footer { text-align: center; margin-top: 50px; font-size: 10px; color: #94a3b8; border-top: 1px solid #f1f5f9; padding-top: 20px; }
            </style>
            <div class="report-print-wrapper">
                    <div class="header">
                        <h1> AI   </h1>
                        <p> : ${t.name} | : ${new Date().toLocaleString()}</p>
                    </div>
                    
                    <div class="score-section">
                        <div class="score-box">
                            <div class="score-label">Sentiment Score</div>
                            <div class="score-value">${c.totalScore}</div>
                            <div class="verdict">${c.verdict}</div>
                        </div>
                    </div>

                    <div class="section-title">  </div>
                    <div class="content-box">
                        ${c.keywords.map(I=>`<span class="keyword-tag">#${I.text}</span>`).join("")}
                    </div>

                    <div class="section-title">AI   </div>
                    <div class="content-box summary">
                        <strong>[ ]</strong><br/>
                        ${c.summary}
                    </div>

                    <div class="section-title">    (Top 10)</div>
                    <table>
                        <thead>
                            <tr>
                                <th></th>
                                <th></th>
                                <th> </th>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            ${u.slice(0,10).map(I=>`
                                <tr>
                                    <td>${I.date}</td>
                                    <td style="font-weight:bold;">${I.channel}</td>
                                    <td>${I.text}</td>
                                    <td class="${I.sentiment==="pos"?"sentiment-pos":I.sentiment==="neg"?"sentiment-neg":""}">
                                        ${I.sentiment==="pos"?"":I.sentiment==="neg"?"":""}
                                    </td>
                                    <td>${I.score}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>

                    <div class="footer">  Mycelium Social Intelligence    .</div>
                </div>
        `;El(D)},_=async()=>{a("",'PDF     (Ctrl+P)  "PDF "    .')},k=D=>D==="pos"?{bg:"bg-emerald-100",text:"text-emerald-700"}:D==="neg"?{bg:"bg-red-100",text:"text-red-700"}:{bg:"bg-slate-100",text:"text-slate-600"},T=D=>D>=80?"text-emerald-600":D>=50?"text-amber-500":"text-red-600";return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-violet-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-violet-500 uppercase",children:"AI Reputation Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-700 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:[" AI   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"ORM Analysis"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"public"}),"     AI     ."]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 min-h-0 custom-scrollbar flex flex-col gap-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-6 border-l-4 border-violet-500 shadow-sm flex flex-col md:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"  (Target)"}),s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsx("h2",{className:"text-2xl font-black text-slate-800",children:t.name}),s.jsx("span",{className:"text-sm text-slate-500",children:t.products})]})]}),s.jsxs("button",{onClick:b,disabled:n,className:"px-6 py-3 bg-violet-600 text-white rounded-xl font-bold hover:bg-violet-700 transition-all shadow-lg shadow-violet-200 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n?s.jsx("span",{className:"material-symbols-rounded animate-spin",children:"sync"}):s.jsx("span",{className:"material-symbols-rounded",children:"youtube_searched_for"}),n?"  ...":"   "]})]}),n&&s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center min-h-[400px]",children:[s.jsxs("div",{className:"relative mb-6",children:[s.jsx("div",{className:"absolute inset-0 bg-violet-500 opacity-20 blur-xl rounded-full animate-pulse"}),s.jsx("span",{className:"material-symbols-rounded text-7xl text-violet-600 relative z-10 animate-bounce",children:"satellite_alt"})]}),s.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-2",children:"AI     ..."}),s.jsx("p",{className:"text-slate-500 font-medium animate-pulse",children:o})]}),!n&&f&&c&&s.jsxs("div",{className:"flex flex-col gap-6 animate-in slide-in-from-bottom-5 duration-700",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-8 border border-slate-200 shadow-sm flex flex-col items-center justify-center relative overflow-hidden",children:[s.jsx("h3",{className:"text-slate-500 font-bold mb-6 text-sm",children:"   (Sentiment Score)"}),s.jsxs("div",{className:"relative w-48 h-24 overflow-hidden mb-4",children:[s.jsx("div",{className:"w-full h-full bg-slate-100 rounded-t-full"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full rounded-t-full origin-bottom transition-transform duration-1000 ease-out",style:{background:"linear-gradient(90deg, #ef4444 0%, #f59e0b 50%, #10b981 100%)",transform:`rotate(${c.totalScore/100*180-180}deg)`}})]}),s.jsxs("div",{className:`text-4xl font-black ${T(c.totalScore)}`,children:[c.totalScore,""]}),s.jsx("div",{className:"text-slate-400 font-bold mt-2",children:c.verdict})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm flex flex-col",children:[s.jsxs("h3",{className:"text-slate-500 font-bold mb-4 text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-violet-500",children:"tag"}),"   "]}),s.jsxs("div",{className:"flex-1 bg-slate-50 rounded-xl p-4 flex flex-wrap items-center justify-center gap-3 relative min-h-[200px]",children:[c.keywords.length===0&&s.jsx("span",{className:"text-slate-400",children:"  ."}),c.keywords.map((D,I)=>{const O=k(D.type||D.sentiment_type),P=.8+D.weight*.1;return s.jsxs("span",{className:`px-3 py-1.5 rounded-full font-bold ${O.bg} ${O.text} hover:scale-110 transition-transform cursor-default`,style:{fontSize:`${P}rem`},children:["#",D.text]},I)})]})]})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[s.jsxs("div",{className:"flex-[3] bg-white rounded-2xl border border-slate-200 p-6 flex flex-col",children:[s.jsxs("h3",{className:"text-slate-700 font-bold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-slate-400",children:"list_alt"}),"    "]}),s.jsx("div",{className:"flex-1 overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left whitespace-nowrap",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-100 text-slate-500",children:[s.jsx("th",{className:"py-3 px-2 w-[15%]",children:""}),s.jsx("th",{className:"py-3 px-2 w-[15%]",children:""}),s.jsx("th",{className:"py-3 px-2",children:" "}),s.jsx("th",{className:"py-3 px-2 text-center w-[10%]",children:""}),s.jsx("th",{className:"py-3 px-2 text-center w-[10%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:u.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"p-8 text-center text-slate-400",children:" ."})}):u.map((D,I)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"py-3 px-2 text-slate-500 text-xs",children:D.date}),s.jsx("td",{className:"py-3 px-2 font-bold text-slate-600",children:D.channel}),s.jsx("td",{className:"py-3 px-2 max-w-[300px] truncate text-slate-700",children:s.jsx("a",{href:D.link,target:"_blank",rel:"noopener noreferrer",className:"hover:text-violet-600 hover:underline",children:D.text})}),s.jsx("td",{className:"py-3 px-2 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${k(D.sentiment).bg} ${k(D.sentiment).text}`,children:D.sentiment==="pos"?"":D.sentiment==="neg"?"":""})}),s.jsx("td",{className:"py-3 px-2 text-center text-slate-600 font-mono",children:D.score})]},I))})]})})]}),s.jsxs("div",{className:"flex-[2] bg-white rounded-2xl border-l-4 border-violet-500 p-6 shadow-sm flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-violet-100 flex items-center justify-center text-violet-600",children:s.jsx("span",{className:"material-symbols-rounded",children:"psychology_alt"})}),s.jsx("h3",{className:"font-bold text-slate-800",children:"    "})]}),s.jsxs("div",{className:"prose prose-sm text-slate-600 leading-relaxed mb-6",children:[s.jsxs("p",{className:"mb-4",children:[s.jsx("strong",{className:"text-violet-700",children:"[ ]"})," ",c.summary]}),s.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-4 rounded-r-lg text-orange-900 text-xs font-medium",children:[s.jsx("strong",{className:"block mb-1 text-orange-700",children:" AI Insight"}),"      ",s.jsx("span",{className:"underline decoration-orange-300 decoration-2",children:c.verdict}),"  ."]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100",children:[s.jsxs("button",{onClick:w,className:"px-4 py-2 rounded-lg border border-slate-200 hover:bg-slate-50 text-slate-600 font-bold text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"print"})," "]}),s.jsxs("button",{onClick:_,className:"px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-900 text-white font-bold text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"picture_as_pdf"})," PDF "]})]})]})]})]}),s.jsxs("div",{className:"mt-8 border-t border-slate-200 pt-8 grid grid-cols-1 md:grid-cols-2 gap-8 text-sm text-slate-500",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-bold text-slate-700 mb-2 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-blue-500",children:"info"}),"    ?"]}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"  :"}),"         ."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"   :"}),"       ."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"  :"}),"        ."]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-bold text-slate-700 mb-2 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-emerald-500",children:"settings"}),"  :   "]}),s.jsxs("p",{className:"leading-relaxed",children:["   ",s.jsxs("strong",{children:["[   ",">","  ]"]}),"  ",s.jsx("strong",{children:"''"}),"   .  AI        ."]})]})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsxs("p",{className:"text-indigo-500 font-medium italic text-sm",children:['"         . ',s.jsx("br",{}),'  ,      ! - Jenny"']})})]})]})};let DC=!1,Sg=null;const Oc=()=>{const[a,e]=H.useState(!1),[t,r]=H.useState(!1),{promptAdminPassword:n,showAlert:i}=Na(),o=H.useCallback(async()=>{if(DC&&Sg){const c=await Sg;return c&&e(!0),c}return DC=!0,Sg=(async()=>{try{const c=await n();return c===null?!1:(r(!0),await pt("verify_admin_password",{password:c})?(e(!0),!0):(await i(" ","  ."),!1))}catch(c){return await i("","   : "+c),!1}finally{r(!1),DC=!1,Sg=null}})(),await Sg},[n,i]),l=H.useCallback(async c=>{r(!0);try{return await pt("verify_admin_password",{password:c})?(e(!0),!0):!1}catch(d){return console.error(d),!1}finally{r(!1)}},[]);return{isAuthorized:a,isVerifying:t,checkAdmin:o,verifyPassword:l}},jDe=()=>{const a=Fn(),{showAlert:e,showConfirm:t}=Na(),{isAuthorized:r,checkAdmin:n,isVerifying:i}=Oc(),[o,l]=H.useState([]),[c,d]=H.useState(""),[u,h]=H.useState("product"),[f,p]=H.useState("ALL"),[g,b]=H.useState(new Set),[w,_]=H.useState(!1),[k,T]=H.useState(!1),[D,I]=H.useState(""),[O,P]=H.useState(!1),[V,G]=H.useState(!1),[Q,$]=H.useState([]),[ae,J]=H.useState(!1),[U,F]=H.useState(!1),[W,K]=H.useState(null),[ee,ne]=H.useState({name:"",spec:"",price:0,cost:0,safety:10,type:"product",bomList:[],sync:!1,taxType:"",taxExemptValue:0}),[re,Z]=H.useState(!1),[ie,de]=H.useState(""),[fe,he]=H.useState([]),[ve,Oe]=H.useState(null),[Se,Ce]=H.useState([]),we=vr.useRef(!1);H.useEffect(()=>{if(we.current)return;we.current=!0,(async()=>await n()||a("/"))()},[]);const xe=H.useCallback(async()=>{T(!0);try{const Ie=await pt("get_product_list");l(Ie||[])}catch(Ie){console.error("Failed to load products:",Ie)}finally{T(!1)}},[]);H.useEffect(()=>{r&&xe()},[r,xe]);const be=async(Ie=null,st=!1)=>{T(!0);try{let Tt=[],lt={name:"",spec:"",price:0,cost:0,safety:10,type:u,bomList:[],sync:!1,productCode:"",category:"",taxType:"",taxExemptValue:0};if(Ie){K(st?null:Ie);try{const oa=await pt("get_product_bom",{productId:Ie.product_id});oa&&oa.length>0?Tt=oa.map(xt=>({materialId:xt.material_id,ratio:xt.ratio,type:xt.item_type==="aux_material"||xt.item_type==="raw_material"||xt.item_type==="material"?"aux":xt.item_type==="product"?"prod":"raw",key:Math.random().toString(36).substr(2,9)})):(Ie.material_id&&Tt.push({materialId:Ie.material_id,ratio:Ie.material_ratio||1,type:"raw",key:Math.random().toString(36).substr(2,9)}),Ie.aux_material_id&&Tt.push({materialId:Ie.aux_material_id,ratio:Ie.aux_material_ratio||1,type:"aux",key:Math.random().toString(36).substr(2,9)}))}catch(oa){console.error("Failed to fetch BOM:",oa)}lt={name:st?`${Ie.product_name} ()`:Ie.product_name,spec:Ie.specification||"",price:Ie.unit_price,cost:Ie.cost_price||0,safety:Ie.safety_stock||10,type:Ie.item_type||"product",bomList:Tt,sync:!1,productCode:Ie.product_code||"",category:Ie.category||"",taxType:Ie.tax_type||"",taxExemptValue:Ie.tax_exempt_value||0}}ne(lt),F(!0)}finally{T(!1)}},Ee=()=>{F(!1),K(null),Z(!1),de(""),he([])},ze=Ie=>{ne(st=>({...st,bomList:[...st.bomList,{materialId:"",ratio:1,type:Ie,key:Math.random().toString(36).substr(2,9)}]}))},Ze=Ie=>{ne(st=>({...st,bomList:st.bomList.filter(Tt=>Tt.key!==Ie)}))},Re=(Ie,st,Tt)=>{ne(lt=>({...lt,bomList:lt.bomList.map(oa=>oa.key===Ie?{...oa,[st]:Tt}:oa)}))},ut=Ie=>{ne(st=>({...st,sync:Ie}))},vt=async Ie=>{if(Ie){de(Ie);try{const st=await pt("get_product_bom",{productId:Number(Ie)});he(st||[]),Ce(st.map(Tt=>Tt.material_id))}catch(st){e(" ","  : "+st)}}},yt=Ie=>{Ce(st=>st.includes(Ie)?st.filter(Tt=>Tt!==Ie):[...st,Ie])},Ue=()=>{if(Se.length===0){Z(!1);return}const Ie=fe.filter(st=>Se.includes(st.material_id)).map(st=>{const Tt=o.find(oa=>oa.product_id===st.material_id),lt=Tt?.item_type==="raw_material"||Tt?.item_type==="material"||Tt?.item_type==="harvest_item"?"raw":"aux";return{materialId:st.material_id,ratio:st.ratio,type:lt,key:Math.random()}});ne(st=>({...st,bomList:[...st.bomList,...Ie]})),Z(!1),he([]),de("")},Ye=async Ie=>{if(Ie.preventDefault(),!ee.name.trim()){e(" "," .");return}T(!0);try{const st=ee.bomList.find(la=>la.type==="raw"&&la.materialId),Tt=ee.bomList.find(la=>la.type==="aux"&&la.materialId),lt={productName:ee.name,specification:ee.spec||null,unitPrice:ee.type==="product"?ee.price:0,safetyStock:ee.safety,costPrice:ee.cost,materialId:st?Number(st.materialId):null,materialRatio:st?Number(st.ratio):1,auxMaterialId:Tt?Number(Tt.materialId):null,auxMaterialRatio:Tt?Number(Tt.ratio):1,itemType:ee.type,productCode:ee.productCode||null,category:ee.category||null,taxType:ee.taxType,taxExemptValue:ee.taxExemptValue};let oa;W?(oa=W.product_id,await pt("update_product",{productId:oa,...lt,stockQuantity:null,status:ee.status,syncSalesNames:ee.sync||!1})):oa=await pt("create_product",{...lt,stockQuantity:0});const xt=ee.bomList.filter(la=>la.materialId&&Number(la.materialId)>0).map(la=>({material_id:Number(la.materialId),ratio:Number(la.ratio)}));await pt("save_product_bom",{productId:oa,bomList:xt}),Ee(),xe(),window.dispatchEvent(new Event("product-data-changed"))}catch(st){e(" "," : "+st)}finally{T(!1)}},Ht=async Ie=>{if(await t(" ",`[${Ie.product_name}]   ?`))try{await pt("delete_product",{productId:Ie.product_id}),xe(),window.dispatchEvent(new Event("product-data-changed"))}catch(st){if(st.toString().includes("HAS_HISTORY")){if(await t(" ",`[${Ie.product_name}]       .
 '()' ?`))try{await pt("discontinue_product",{productId:Ie.product_id}),e(" ","   ."),xe(),window.dispatchEvent(new Event("product-data-changed"))}catch(lt){e("  "," : "+lt)}}else st.toString().includes("USED_AS_BOM")?e(" ",`[${Ie.product_name}]    ()  .
       .`):e(" "," : "+st)}},ta=Ie=>{O_("product",{title:Ie.product_name,code:Ie.product_code||`PRD-${Ie.product_id}`,spec:Ie.specification||"-",price:Ie.unit_price||0,qrValue:`PRODUCT|${Ie.product_id}|${Ie.product_code||"NA"}|${Ie.product_name}|${Ie.specification||"NA"}`})},Bt=async Ie=>{J(!0);try{const st=await pt("get_product_history",{productId:Ie});$(st||[]),G(!0)}catch(st){e("  "," : "+st)}finally{J(!1)}},Da=async Ie=>{if(!Ie)return;if(!await t(" ",`   (, , BOM, ) ?
      .`)){I("");return}P(!0);try{await pt("apply_preset",{presetType:Ie}),e("","   ."),xe(),I("")}catch(Tt){console.error(Tt),e("","    : "+Tt)}finally{P(!1)}},zt=H.useMemo(()=>{let Ie=o;return u==="harvest_item"?Ie=Ie.filter(st=>st.item_type==="harvest_item"):u==="aux_material"?Ie=Ie.filter(st=>st.item_type==="aux_material"||st.item_type==="raw_material"||st.item_type==="material"):Ie=Ie.filter(st=>!st.item_type||st.item_type==="product"),w||(Ie=Ie.filter(st=>st.status!=="")),c&&(Ie=Ie.filter(st=>st.product_name.toLowerCase().includes(c.toLowerCase())||st.product_code&&st.product_code.toLowerCase().includes(c.toLowerCase()))),f!=="ALL"&&u==="aux_material"&&(Ie=Ie.filter(st=>f===" "?!st.category||st.category===" ":st.category===f)),Ie},[o,u,c,w,f]),Lr=H.useMemo(()=>o.filter(Ie=>Ie.item_type==="harvest_item"),[o]),ka=H.useMemo(()=>o.filter(Ie=>Ie.item_type==="aux_material"||Ie.item_type==="raw_material"||Ie.item_type==="material"),[o]),Ca=H.useMemo(()=>o.filter(Ie=>Ie.item_type==="product"&&Ie.product_id!==W?.product_id),[o,W]),Sn=H.useMemo(()=>W||!ee.name||ee.name.length<2||ee.bomList.length>0?null:o.find(st=>st.product_id!==W?.product_id&&(st.item_type==="product"||!st.item_type)&&ee.name.split(" ").some(Tt=>Tt.length>1&&st.product_name.includes(Tt))),[ee.name,ee.bomList.length,o,W]);return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative",children:[s.jsx("div",{id:"local-modal-root",className:"absolute inset-0 z-[9999] pointer-events-none"}),s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-4",children:[s.jsx("div",{className:"flex justify-between items-end",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"System Settings"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-800 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["/  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Product & Material Master"})]})]})}),s.jsxs("div",{className:"mt-6 flex flex-col xl:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-indigo-50/50 border border-indigo-100 p-4 rounded-2xl flex items-start gap-3 transition-all hover:bg-indigo-50",children:[s.jsx("div",{className:"w-8 h-8 rounded-xl bg-indigo-600 text-white flex items-center justify-center shrink-0 shadow-lg shadow-indigo-100",children:s.jsx(mc,{size:16})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-black text-indigo-900 mb-0.5",children:""}),s.jsxs("p",{className:"text-[10px] text-indigo-600 font-bold leading-relaxed",children:["  .",s.jsx("br",{}),"(, 1kg  )"]})]})]}),s.jsxs("div",{className:"bg-emerald-50/50 border border-emerald-100 p-4 rounded-2xl flex items-start gap-3 transition-all hover:bg-emerald-50",children:[s.jsx("div",{className:"w-8 h-8 rounded-xl bg-emerald-600 text-white flex items-center justify-center shrink-0 shadow-lg shadow-emerald-100",children:s.jsx(Eg,{size:16})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-black text-emerald-900 mb-0.5",children:" ()"}),s.jsxs("p",{className:"text-[10px] text-emerald-600 font-bold leading-relaxed",children:["   .",s.jsx("br",{}),"(  )"]})]})]}),s.jsxs("div",{className:"bg-orange-50/50 border border-orange-100 p-4 rounded-2xl flex items-start gap-3 transition-all hover:bg-orange-50",children:[s.jsx("div",{className:"w-8 h-8 rounded-xl bg-orange-600 text-white flex items-center justify-center shrink-0 shadow-lg shadow-orange-100",children:s.jsx(W8,{size:16})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-black text-orange-900 mb-0.5",children:" ()"}),s.jsxs("p",{className:"text-[10px] text-orange-600 font-bold leading-relaxed",children:["/ /",s.jsx("br",{}),"   "]})]})]})]}),s.jsxs("div",{className:"w-full xl:w-80 bg-white border-2 border-dashed border-slate-200 rounded-2xl p-4 flex flex-col justify-center gap-2 relative group hover:border-indigo-200 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(KH,{size:14,className:"text-indigo-500 fill-indigo-500"}),s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none",children:"   (Preset)"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:D,onChange:Ie=>{I(Ie.target.value),Ie.target.value&&Da(Ie.target.value)},disabled:O,className:"flex-1 h-10 px-3 bg-slate-50 border border-slate-200 rounded-xl text-xs font-bold text-slate-600 outline-none focus:ring-4 focus:ring-indigo-50 focus:bg-white focus:border-indigo-300 transition-all disabled:opacity-50 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"1rem"},children:[s.jsx("option",{value:"",children:"  ..."}),s.jsx("option",{value:"mushroom",children:"   (/)"}),s.jsx("option",{value:"strawberry",children:"   (/)"}),s.jsx("option",{value:"potato",children:"   (/)"}),s.jsx("option",{value:"shinemuscat",children:"  ( )"}),s.jsx("option",{value:"apple",children:"   (/)"}),s.jsx("option",{value:"tomato",children:"  (/)"})]}),O&&s.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-indigo-50 text-indigo-600 rounded-xl",children:s.jsx(Nv,{size:18,className:"animate-spin"})})]})]})]})]}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-8 overflow-hidden",children:s.jsxs("div",{className:"flex flex-col gap-6 h-full",children:[s.jsxs("div",{className:"bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-200 p-6 ring-1 ring-slate-900/5",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[s.jsxs("div",{className:"flex p-1 bg-slate-100 rounded-2xl w-full md:w-auto",children:[s.jsxs("button",{onClick:()=>{h("product"),p("ALL")},className:`flex-1 md:flex-none px-4 py-2.5 rounded-[1.25rem] font-black text-xs transition-all flex items-center justify-center gap-2
                                        ${u==="product"?"bg-white text-indigo-600 shadow-lg shadow-indigo-500/10":"text-slate-400 hover:text-slate-600"}
                                    `,children:[s.jsx(mc,{size:14})," "]}),s.jsxs("button",{onClick:()=>{h("harvest_item"),p("ALL")},className:`flex-1 md:flex-none px-4 py-2.5 rounded-[1.25rem] font-black text-xs transition-all flex items-center justify-center gap-2
                                        ${u==="harvest_item"?"bg-white text-emerald-600 shadow-lg shadow-emerald-500/10":"text-slate-400 hover:text-slate-600"}
                                    `,children:[s.jsx(Eg,{size:14}),"  ()"]}),s.jsxs("button",{onClick:()=>{h("aux_material"),p("ALL")},className:`flex-1 md:flex-none px-4 py-2.5 rounded-[1.25rem] font-black text-xs transition-all flex items-center justify-center gap-2
                                        ${u==="aux_material"?"bg-white text-orange-600 shadow-lg shadow-orange-500/10":"text-slate-400 hover:text-slate-600"}
                                    `,children:[s.jsx(W8,{size:14}),"  ()"]})]}),s.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer px-3 py-2 rounded-xl hover:bg-slate-100 transition-colors",children:[s.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${w?"bg-slate-600 border-slate-600":"bg-white border-slate-300"}`,children:w&&s.jsx(yi,{size:12,className:"text-white"})}),s.jsx("input",{type:"checkbox",checked:w,onChange:Ie=>_(Ie.target.checked),className:"hidden"}),s.jsx("span",{className:"text-xs font-bold text-slate-500",children:""})]}),s.jsx("div",{className:"relative flex-1 md:w-80 group text-left",children:s.jsx("input",{type:"text",value:c,onChange:Ie=>d(Ie.target.value),placeholder:" ",className:"w-full h-12 px-6 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 focus:ring-indigo-500/20"})}),s.jsxs("button",{onClick:()=>be(),className:`h-12 px-6 rounded-2xl font-black text-sm flex items-center gap-2 text-white shadow-lg transition-all active:scale-[0.98]
                                        ${u==="product"?"bg-indigo-600 hover:bg-indigo-500 shadow-indigo-200":u==="harvest_item"?"bg-emerald-600 hover:bg-emerald-500 shadow-emerald-200":"bg-orange-500 hover:bg-orange-400 shadow-orange-200"}
                                    `,children:[s.jsx(So,{size:20}),"   "]})]})]}),u==="aux_material"&&s.jsx("div",{className:"flex bg-slate-50 p-1 rounded-xl border border-slate-200 animate-in slide-in-from-left-4 duration-300 mt-4",children:[{id:"ALL",label:""},{id:"/",label:" /"},{id:"/",label:" /"},{id:"/",label:" /"},{id:"",label:" "},{id:" ",label:" "}].map(Ie=>s.jsx("button",{onClick:()=>p(Ie.id),className:`px-3 py-1.5 rounded-lg text-[10px] font-black transition-all ${f===Ie.id?"bg-white text-orange-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:Ie.label},Ie.id))})]}),s.jsx("div",{className:"flex-1 bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"sticky top-0 z-10 bg-slate-50/80 backdrop-blur-md border-b border-slate-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center w-[5%] min-w-[50px]",children:"No."}),s.jsx("th",{className:"px-4 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest w-[8%] min-w-[70px] text-center",children:""}),s.jsx("th",{className:"px-4 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest w-[8%] min-w-[70px] text-center",children:""}),s.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-left w-[25%] min-w-[200px]",children:""}),s.jsx("th",{className:"px-4 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center w-[10%] min-w-[100px]",children:""}),u==="product"&&s.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right w-[12%] min-w-[120px]",children:""}),s.jsx("th",{className:"px-4 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right w-[8%] min-w-[80px]",children:""}),s.jsx("th",{className:"px-4 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right w-[8%] min-w-[80px]",children:""}),s.jsx("th",{className:"px-4 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center w-[6%] min-w-[70px]",children:""}),s.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center w-[10%] min-w-[160px]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:zt.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"10",className:"py-32 text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-3xl flex items-center justify-center text-slate-200",children:s.jsx(Sv,{size:32})}),s.jsx("p",{className:"text-slate-400 font-bold tracking-tight",children:"  "})]})})}):zt.map((Ie,st)=>{const Tt=(Ie.stock_quantity||0)<=(Ie.safety_stock||10);return s.jsxs("tr",{className:"group hover:bg-slate-50/50 transition-all",children:[s.jsx("td",{className:"px-8 py-4 text-center text-xs font-black text-slate-300 group-hover:text-slate-400",children:st+1}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:`px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest border
                                                            ${Ie.item_type==="harvest_item"||Ie.item_type==="raw_material"||Ie.item_type==="material"?"bg-emerald-50 text-emerald-600 border-emerald-100":Ie.item_type==="aux_material"?"bg-orange-50 text-orange-600 border-orange-100":"bg-indigo-50 text-indigo-600 border-indigo-100"}
                                                        `,children:Ie.item_type==="harvest_item"?"":Ie.item_type==="raw_material"||Ie.item_type==="material"?"":Ie.item_type==="aux_material"?"":""})}),s.jsx("td",{className:"px-6 py-4 text-center",children:Ie.category?s.jsx("span",{className:"text-[10px] font-bold text-slate-500 bg-slate-100 px-2 py-1 rounded-md",children:Ie.category}):s.jsx("span",{className:"text-[10px] font-bold text-slate-300 italic",children:"-"})}),s.jsx("td",{className:"px-6 py-4 font-black text-sm text-slate-700",children:Ie.product_name}),s.jsx("td",{className:"px-6 py-4 text-center text-xs font-bold text-slate-400 bg-slate-50/30",children:Ie.specification||"-"}),u==="product"&&s.jsx("td",{className:"px-6 py-4 text-right font-black text-sm text-slate-800 tabular-nums",children:Ve(Ie.unit_price)}),s.jsx("td",{className:"px-6 py-4 text-right text-xs font-bold text-slate-400",children:Ie.safety_stock?Ie.safety_stock.toLocaleString():10}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[Tt&&s.jsx(XA,{size:14,className:"text-rose-500"}),s.jsx("span",{className:`font-black text-sm tabular-nums ${Tt?"text-rose-600 underline underline-offset-4 decoration-rose-200":"text-slate-600"}`,children:(Ie.stock_quantity||0).toLocaleString()})]})}),s.jsx("td",{className:"px-4 py-4 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-black ${Ie.status===""?"bg-slate-100 text-slate-400":"bg-green-50 text-green-600"}`,children:Ie.status||""})}),s.jsx("td",{className:"px-8 py-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("button",{onClick:()=>be(Ie),className:"w-9 h-9 rounded-xl bg-slate-100 text-slate-500 hover:bg-indigo-50 hover:text-indigo-600 transition-all shadow-sm flex items-center justify-center",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"edit"})}),s.jsx("button",{onClick:()=>be(Ie,!0),className:"w-9 h-9 rounded-xl bg-slate-100 text-slate-500 hover:bg-emerald-50 hover:text-emerald-600 transition-all shadow-sm flex items-center justify-center border border-transparent hover:border-emerald-100",title:"  (Clone)",children:s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"content_copy"})}),s.jsx("button",{onClick:()=>Bt(Ie.product_id),className:"w-9 h-9 rounded-xl bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-indigo-600 transition-all shadow-sm flex items-center justify-center",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"history"})}),s.jsx("button",{onClick:()=>ta(Ie),className:"w-9 h-9 rounded-xl bg-slate-100 text-slate-500 hover:bg-indigo-50 hover:text-indigo-600 transition-all shadow-sm flex items-center justify-center border border-transparent hover:border-indigo-100",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"qr_code"})}),s.jsx("button",{onClick:()=>Ht(Ie),className:"w-9 h-9 rounded-xl bg-slate-100 text-slate-400 hover:bg-rose-50 hover:text-rose-600 transition-all shadow-sm flex items-center justify-center",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"delete"})})]})})]},Ie.product_id)})})]})})})]})}),U&&s.jsxs("div",{className:"absolute inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md animate-in fade-in duration-300"}),s.jsxs("div",{className:"relative bg-white w-[560px] rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 ring-1 ring-slate-900/10",children:[k&&s.jsxs("div",{className:"absolute inset-0 z-50 bg-white/80 backdrop-blur-[2px] flex flex-col items-center justify-center animate-in fade-in duration-200",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin mb-4 shadow-lg shadow-indigo-200"}),s.jsx("p",{className:"text-sm font-black text-slate-700 animate-pulse",children:W&&ee.sync?"   ...":" ..."}),W&&ee.sync&&s.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-1",children:"      "})]}),s.jsxs("div",{className:"px-8 py-6 bg-slate-50/50 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:`w-4 h-1 rounded-full ${ee.type==="product"?"bg-indigo-600":ee.type==="aux_material"?"bg-orange-500":"bg-emerald-500"}`}),s.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest ${ee.type==="product"?"text-indigo-600":ee.type==="aux_material"?"text-orange-500":"text-emerald-600"}`,children:W?"Update Item":"Register New"})]}),s.jsx("h3",{className:"text-2xl font-black text-slate-800 tracking-tight",children:W?" ":`${ee.type==="raw_material"?"()":ee.type==="aux_material"?"()":ee.type==="harvest_item"?"()":""} `})]}),s.jsx("button",{onClick:Ee,disabled:k,className:"w-10 h-10 rounded-2xl bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-100 hover:text-slate-600 transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(js,{size:20})})]}),s.jsxs("form",{onSubmit:Ye,className:"flex flex-col max-h-[75vh]",children:[s.jsxs("div",{className:"p-8 space-y-4 overflow-y-auto custom-scrollbar flex-1 min-h-0",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:" (Item Name)"}),s.jsx("input",{type:"text",value:ee.name,onChange:Ie=>ne({...ee,name:Ie.target.value}),placeholder:"    ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 disabled:opacity-70",required:!0,autoFocus:!0,disabled:k}),W&&s.jsx("div",{className:"mt-2 ml-1",children:s.jsxs("label",{className:`flex items-start gap-2 cursor-pointer group ${k?"pointer-events-none opacity-50":""}`,children:[s.jsx("div",{className:`mt-0.5 w-4 h-4 rounded border flex items-center justify-center transition-colors ${ee.sync?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:ee.sync&&s.jsx(yi,{size:12,className:"text-white"})}),s.jsx("input",{type:"checkbox",checked:ee.sync||!1,onChange:Ie=>ut(Ie.target.checked),className:"hidden",disabled:k}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs font-bold text-slate-700 block group-hover:text-indigo-600 transition-colors",children:"    ()"}),s.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5 leading-tight",children:" ,      /     . (    )"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:" (Specification)"}),s.jsx("input",{type:"text",value:ee.spec,onChange:Ie=>ne({...ee,spec:Ie.target.value}),placeholder:"ex) 1kg, 20",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 disabled:opacity-70",disabled:k})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:" "}),s.jsx("input",{type:"number",value:ee.safety,onChange:Ie=>ne({...ee,safety:parseInt(Ie.target.value)}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 text-right disabled:opacity-70",disabled:k})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:"  (Tax Type)"}),s.jsx("div",{className:"flex p-1 bg-slate-100 rounded-xl",children:[{id:"",label:"  (Exempt)"},{id:"",label:"  (Taxable)"},{id:"",label:"  (Integrated)"}].map(Ie=>s.jsx("button",{type:"button",disabled:k,onClick:()=>ne(st=>({...st,taxType:Ie.id})),className:`flex-1 py-2 rounded-lg text-xs font-black transition-all ${ee.taxType===Ie.id?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"} disabled:opacity-50`,children:Ie.label},Ie.id))}),ee.taxType===""&&s.jsxs("div",{className:"mt-3 p-4 bg-amber-50 rounded-xl border border-amber-100 animate-in slide-in-from-top-2 duration-300",children:[s.jsxs("label",{className:"block text-[10px] font-black text-amber-700 uppercase tracking-widest mb-1.5 flex justify-between",children:[s.jsx("span",{children:"   (Exempt Portion)"}),s.jsx("span",{className:"text-amber-400",children:"   "})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:ee.taxExemptValue.toLocaleString(),onChange:Ie=>{const st=parseInt(Ie.target.value.replace(/,/g,""))||0;ne({...ee,taxExemptValue:st})},className:"w-full h-11 px-4 bg-white border-none rounded-lg font-black font-mono text-sm focus:ring-2 focus:ring-amber-500 transition-all ring-1 ring-inset ring-amber-200 text-right pr-8"}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs font-bold text-amber-300",children:""})]}),s.jsx("p",{className:"text-[10px] text-amber-600/70 mt-2 leading-tight italic",children:"*           ,  ( )  ."})]}),s.jsx("p",{className:"text-[10px] text-slate-400 mt-1.5 ml-2 leading-tight",children:"*  /   ,      ."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:" "}),s.jsx("input",{type:"text",value:ee.productCode,onChange:Ie=>ne({...ee,productCode:Ie.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-2 focus:ring-indigo-500 transition-all ring-1 ring-inset ring-slate-200",placeholder:"",disabled:k})]}),(ee.type==="aux_material"||ee.type==="raw_material"||ee.type==="material")&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:" "}),s.jsxs("select",{value:ee.category,onChange:Ie=>ne({...ee,category:Ie.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-2 focus:ring-indigo-500 transition-all ring-1 ring-inset ring-slate-200",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"/",children:" /"}),s.jsx("option",{value:"/",children:" /"}),s.jsx("option",{value:"/",children:" /"}),s.jsx("option",{value:"",children:"  (/)"}),s.jsx("option",{value:" ",children:"  "})]})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:ee.type==="product"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:" (Cost Price)"}),s.jsx("input",{type:"text",value:ee.cost.toLocaleString(),onChange:Ie=>{const st=parseInt(Ie.target.value.replace(/,/g,""))||0;ne({...ee,cost:st})},className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold font-mono text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 text-right disabled:opacity-70",disabled:k})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-between items-center mb-1.5 ml-2",children:s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "})}),s.jsx("input",{type:"text",value:ee.price.toLocaleString(),onChange:Ie=>{const st=parseInt(Ie.target.value.replace(/,/g,""))||0;ne({...ee,price:st})},className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold font-mono text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 text-right disabled:opacity-70",disabled:k})]})]}):s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:ee.type==="raw_material"||ee.type==="material"?"  (Production Cost)":"  (Purchase Price)"}),s.jsx("input",{type:"text",value:ee.cost.toLocaleString(),onChange:Ie=>{const st=parseInt(Ie.target.value.replace(/,/g,""))||0;ne({...ee,cost:st})},placeholder:ee.type==="raw_material"||ee.type==="material"?"   ":"  ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold font-mono text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 text-right disabled:opacity-70",disabled:k})]})}),ee.type==="product"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 pb-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"  (Bill of Materials)"}),s.jsxs("div",{className:"flex items-center gap-2",children:[Sn&&s.jsxs("button",{type:"button",onClick:()=>vt(Sn.product_id).then(()=>Ue()),className:"text-[10px] font-black flex items-center gap-1.5 text-emerald-600 hover:text-emerald-700 bg-emerald-50 px-3 py-1.5 rounded-lg transition-all border border-emerald-100 shadow-sm animate-bounce-short",children:[s.jsx(yi,{size:14}),"   [",Sn.product_name,"]   "]}),s.jsxs("button",{type:"button",onClick:()=>Z(!re),disabled:k,className:"text-[10px] font-black flex items-center gap-1.5 text-indigo-600 hover:text-indigo-700 bg-indigo-50 px-3 py-1.5 rounded-lg transition-colors border border-indigo-100 shadow-sm",children:[s.jsx(Eg,{size:14}),"    "]})]})]}),re&&s.jsxs("div",{className:"p-5 bg-indigo-50/50 rounded-2xl border border-indigo-100 animate-in slide-in-from-top-4 duration-300",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h4",{className:"text-xs font-black text-indigo-800",children:"   "}),s.jsx("button",{type:"button",onClick:()=>Z(!1),className:"text-indigo-400 hover:text-indigo-600",children:s.jsx(js,{size:16})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("select",{value:ie,onChange:Ie=>vt(Ie.target.value),className:"w-full h-10 px-3 bg-white border-none rounded-xl font-bold text-xs focus:ring-2 focus:ring-indigo-500 transition-all ring-1 ring-inset ring-indigo-200",children:[s.jsx("option",{value:"",children:"   ..."}),o.filter(Ie=>Ie.product_id!==W?.product_id&&(Ie.item_type==="product"||!Ie.item_type)).map(Ie=>s.jsxs("option",{value:Ie.product_id,children:[Ie.product_name," ",Ie.specification&&`(${Ie.specification})`]},Ie.product_id))]}),fe.length>0&&s.jsxs("div",{className:"bg-white rounded-xl border border-indigo-100 overflow-hidden",children:[s.jsx("div",{className:"px-4 py-2 bg-indigo-50/30 border-b border-indigo-100 text-[9px] font-black text-indigo-400 uppercase tracking-widest",children:"  (Check to Import)"}),s.jsx("div",{className:"max-h-40 overflow-y-auto divide-y divide-slate-50",children:fe.map(Ie=>{const st=o.find(Tt=>Tt.product_id===Ie.material_id);return s.jsxs("label",{className:"flex items-center gap-3 px-4 py-2.5 hover:bg-slate-50 cursor-pointer transition-colors",children:[s.jsx("div",{className:`w-4 h-4 rounded-md border flex items-center justify-center transition-colors ${Se.includes(Ie.material_id)?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300"}`,children:Se.includes(Ie.material_id)&&s.jsx(yi,{size:10,className:"text-white"})}),s.jsx("input",{type:"checkbox",className:"hidden",checked:Se.includes(Ie.material_id),onChange:()=>yt(Ie.material_id)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs font-bold text-slate-700",children:st?.product_name||"   "}),s.jsxs("span",{className:"text-[10px] text-slate-400 ml-2 font-mono",children:["x ",Ie.ratio]})]}),s.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded border ${st?.item_type==="raw_material"||st?.item_type==="material"?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-orange-50 text-orange-600 border-orange-100"}`,children:st?.item_type==="harvest_item"?"":st?.item_type==="raw_material"||st?.item_type==="material"?"":""})]},Ie.material_id)})}),s.jsx("div",{className:"p-3 bg-slate-50 border-t border-indigo-100",children:s.jsxs("button",{type:"button",onClick:Ue,className:"w-full py-2 bg-indigo-600 text-white rounded-lg font-black text-[11px] shadow-sm hover:bg-indigo-700 transition-all flex items-center justify-center gap-2",children:[s.jsx(So,{size:14}),"  ",Se.length,"  "]})})]})]})]}),s.jsxs("div",{className:"bg-emerald-50/50 rounded-2xl border border-emerald-100/50 p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"text-xs font-bold text-emerald-800 flex items-center gap-1.5",children:[s.jsx(Eg,{size:14}),"  ()"]}),s.jsx("button",{type:"button",onClick:()=>ze("raw"),disabled:k,className:"text-[10px] font-black bg-white border border-emerald-200 text-emerald-600 px-3 py-1.5 rounded-lg hover:bg-emerald-50 transition-colors shadow-sm disabled:opacity-50",children:"+  "})]}),s.jsxs("div",{className:"space-y-2",children:[ee.bomList.filter(Ie=>Ie.type==="raw").length===0&&s.jsx("div",{className:"text-center py-4 bg-white/50 rounded-xl border border-dashed border-emerald-200/50 text-xs text-emerald-400",children:"  ."}),ee.bomList.filter(Ie=>Ie.type==="raw").map(Ie=>s.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-left-2 duration-200",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("select",{value:Ie.materialId,onChange:st=>Re(Ie.key,"materialId",st.target.value),className:"w-full h-10 px-3 bg-white border-none rounded-xl font-bold text-xs focus:ring-2 focus:ring-emerald-500 transition-all ring-1 ring-inset ring-emerald-200 disabled:opacity-70",disabled:k,children:[s.jsx("option",{value:"",children:" ..."}),Lr.map(st=>s.jsxs("option",{value:st.product_id,children:[st.product_name," ",st.specification&&`(${st.specification})`]},st.product_id))]})}),s.jsxs("div",{className:"w-24 relative",children:[s.jsx("input",{type:"number",step:"0.1",value:Ie.ratio,onChange:st=>Re(Ie.key,"ratio",st.target.value),className:"w-full h-10 px-3 bg-white border-none rounded-xl font-bold text-xs focus:ring-2 focus:ring-emerald-500 transition-all ring-1 ring-inset ring-emerald-200 text-right pr-8 disabled:opacity-70",disabled:k}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] text-emerald-300 font-bold",children:""})]}),s.jsx("button",{type:"button",onClick:()=>Ze(Ie.key),disabled:k,className:"w-10 h-10 flex items-center justify-center text-rose-400 hover:text-rose-600 hover:bg-rose-50 rounded-xl transition-all active:scale-95 shrink-0",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"delete"})})]},Ie.key))]})]}),s.jsxs("div",{className:"bg-orange-50/50 rounded-2xl border border-orange-100/50 p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"text-xs font-bold text-orange-800 flex items-center gap-1.5",children:[s.jsx(mc,{size:14}),"   ()"]}),s.jsx("button",{type:"button",onClick:()=>ze("aux"),disabled:k,className:"text-[10px] font-black bg-white border border-orange-200 text-orange-600 px-3 py-1.5 rounded-lg hover:bg-orange-50 transition-colors shadow-sm disabled:opacity-50",children:"+  "})]}),(()=>{const Ie=ee.bomList.filter(Tt=>Tt.type==="aux");if(Ie.length===0)return s.jsx("div",{className:"text-center py-4 bg-white/50 rounded-xl border border-dashed border-orange-200/50 text-xs text-orange-400",children:"  ."});const st=Ie.reduce((Tt,lt)=>{const xt=o.find(la=>la.product_id===Number(lt.materialId))?.category||"";return Tt[xt]||(Tt[xt]=[]),Tt[xt].push(lt),Tt},{});return Object.entries(st).sort((Tt,lt)=>Tt[0]===""?1:lt[0]===""?-1:0).map(([Tt,lt])=>{const oa=g.has(Tt),xt=()=>{const la=new Set(g);la.has(Tt)?la.delete(Tt):la.add(Tt),b(la)};return s.jsxs("div",{className:"space-y-2 mb-2",children:[s.jsxs("button",{type:"button",onClick:xt,className:"w-full flex justify-between items-center px-3 py-2 bg-white/60 hover:bg-white rounded-xl border border-orange-100 transition-all group",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`transition-transform duration-300 ${oa?"-rotate-90":""}`,children:s.jsx(i2,{size:14,className:"text-orange-400"})}),s.jsx("span",{className:"text-[11px] font-black text-orange-700",children:Tt}),s.jsx("span",{className:"text-[10px] font-bold text-orange-300 bg-orange-50 px-1.5 py-0.5 rounded-full",children:lt.length})]}),oa&&s.jsx("div",{className:"flex gap-1 overflow-hidden max-w-[200px]",children:lt.map(la=>{const Vr=o.find(hs=>hs.product_id===Number(la.materialId));return s.jsxs("span",{className:"text-[9px] text-orange-400 whitespace-nowrap",children:[" ",Vr?.product_name||"..."]},la.key)})})]}),!oa&&s.jsx("div",{className:"space-y-2 pl-2 animate-in slide-in-from-top-2 duration-300",children:lt.map(la=>s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("select",{value:la.materialId,onChange:Vr=>Re(la.key,"materialId",Vr.target.value),className:"w-full h-10 px-3 bg-white border-none rounded-xl font-bold text-xs focus:ring-2 focus:ring-orange-500 transition-all ring-1 ring-inset ring-orange-200 disabled:opacity-70",disabled:k,children:[s.jsx("option",{value:"",children:" ..."}),ka.map(Vr=>s.jsxs("option",{value:Vr.product_id,children:[Vr.product_name," ",Vr.specification&&`(${Vr.specification})`]},Vr.product_id))]})}),s.jsxs("div",{className:"w-24 relative",children:[s.jsx("input",{type:"number",step:"0.1",value:la.ratio,onChange:Vr=>Re(la.key,"ratio",Vr.target.value),className:"w-full h-10 px-3 bg-white border-none rounded-xl font-bold text-xs focus:ring-2 focus:ring-orange-500 transition-all ring-1 ring-inset ring-orange-200 text-right pr-8 disabled:opacity-70",disabled:k}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] text-orange-300 font-bold",children:""})]}),s.jsx("button",{type:"button",onClick:()=>Ze(la.key),disabled:k,className:"w-10 h-10 flex items-center justify-center text-rose-400 hover:text-rose-600 hover:bg-rose-50 rounded-xl transition-all active:scale-95 shrink-0",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"delete"})})]},la.key))})]},Tt)})})()]}),s.jsxs("div",{className:"bg-indigo-50/50 rounded-2xl border border-indigo-100/50 p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"text-xs font-bold text-indigo-800 flex items-center gap-1.5",children:[s.jsx(BH,{size:14}),"   ( )"]}),s.jsx("button",{type:"button",onClick:()=>ze("prod"),disabled:k,className:"text-[10px] font-black bg-white border border-indigo-200 text-indigo-600 px-3 py-1.5 rounded-lg hover:bg-indigo-50 transition-colors shadow-sm disabled:opacity-50",children:"+  "})]}),s.jsxs("div",{className:"space-y-2",children:[ee.bomList.filter(Ie=>Ie.type==="prod").length===0&&s.jsx("div",{className:"text-center py-4 bg-white/50 rounded-xl border border-dashed border-indigo-200/50 text-xs text-indigo-400",children:"   ."}),ee.bomList.filter(Ie=>Ie.type==="prod").map(Ie=>s.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-left-2 duration-200",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("select",{value:Ie.materialId,onChange:st=>Re(Ie.key,"materialId",st.target.value),className:"w-full h-10 px-3 bg-white border-none rounded-xl font-bold text-xs focus:ring-2 focus:ring-indigo-500 transition-all ring-1 ring-inset ring-indigo-200 disabled:opacity-70",disabled:k,children:[s.jsx("option",{value:"",children:"  ..."}),Ca.map(st=>s.jsxs("option",{value:st.product_id,children:[st.product_name," ",st.specification&&`(${st.specification})`]},st.product_id))]})}),s.jsxs("div",{className:"w-24 relative",children:[s.jsx("input",{type:"number",step:"0.1",value:Ie.ratio,onChange:st=>Re(Ie.key,"ratio",st.target.value),className:"w-full h-10 px-3 bg-white border-none rounded-xl font-bold text-xs focus:ring-2 focus:ring-indigo-500 transition-all ring-1 ring-inset ring-indigo-200 text-right pr-8 disabled:opacity-70",disabled:k}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] text-indigo-300 font-bold",children:""})]}),s.jsx("button",{type:"button",onClick:()=>Ze(Ie.key),disabled:k,className:"w-10 h-10 flex items-center justify-center text-rose-400 hover:text-rose-600 hover:bg-rose-50 rounded-xl transition-all active:scale-95 shrink-0",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"delete"})})]},Ie.key))]})]})]})]}),s.jsxs("div",{className:"px-8 py-5 flex gap-3 border-t border-slate-100 bg-slate-50/30",children:[s.jsx("div",{className:"flex-1"}),s.jsx("button",{type:"button",onClick:Ee,disabled:k,className:"h-12 px-8 bg-slate-100 text-slate-600 rounded-xl font-black text-xs hover:bg-slate-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:""}),s.jsxs("button",{type:"submit",disabled:k,className:`h-12 px-10 text-white rounded-xl font-black text-xs shadow-lg transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed
                                        ${ee.type==="product"?"bg-indigo-600 hover:bg-indigo-500 shadow-indigo-200":ee.type==="raw_material"?"bg-emerald-600 hover:bg-emerald-500 shadow-emerald-200":"bg-orange-500 hover:bg-orange-400 shadow-orange-200"}
                                    `,children:[s.jsx(yi,{size:16})," ",W?"  ":" "]})]})]})]})]}),V&&s.jsxs("div",{className:"absolute inset-0 z-[110] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300"}),s.jsxs("div",{className:"relative bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 ring-1 ring-slate-900/10",children:[s.jsxs("div",{className:"px-8 py-6 bg-slate-50/50 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xl font-black text-slate-800 tracking-tight flex items-center gap-2",children:[s.jsx(Vx,{size:20,className:"text-indigo-600"}),"   "]}),s.jsx("button",{onClick:()=>G(!1),className:"w-8 h-8 rounded-xl bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-100 hover:text-slate-600 transition-all shadow-sm",children:s.jsx(js,{size:16})})]}),s.jsx("div",{className:"p-0 max-h-[60vh] overflow-y-auto custom-scrollbar",children:Q.length===0?s.jsx("div",{className:"p-10 text-center",children:s.jsx("p",{className:"text-slate-400 font-bold text-sm",children:"   ."})}):s.jsx("div",{className:"divide-y divide-slate-100",children:Q.map((Ie,st)=>{const Tt=Ie.history_type==="";return s.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 tracking-wider uppercase",children:QH(Ie.date)}),s.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full border ${Tt?"bg-indigo-50 text-indigo-600 border-indigo-100":Ie.history_type===""?"bg-green-50 text-green-600 border-green-100":"bg-slate-100 text-slate-500 border-slate-200"}`,children:Ie.title})]}),Tt?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-bold text-slate-400 decoration-slate-300 line-through tabular-nums decoration-2",children:parseInt(Ie.old_value||"0").toLocaleString()}),s.jsx(WA,{size:14,className:"text-slate-300"}),s.jsx("span",{className:"text-lg font-black text-slate-700 tabular-nums",children:parseInt(Ie.new_value||"0").toLocaleString()})]}):s.jsx("div",{className:"text-sm font-bold text-slate-700",children:Ie.description})]},st)})})}),s.jsx("div",{className:"p-4 bg-slate-50/50 border-t border-slate-100 flex justify-center",children:s.jsx("button",{onClick:()=>G(!1),className:"w-full py-3 bg-white border border-slate-200 rounded-xl text-slate-600 font-bold text-sm hover:bg-slate-50 transition-colors shadow-sm",children:" ()"})})]})]})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[i?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Sc,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:i?"  ...":"  ..."})]})})},SDe=()=>{const a=Fn(),{showAlert:e,showConfirm:t}=Na(),{isAuthorized:r,checkAdmin:n,isVerifying:i}=Oc(),[o,l]=H.useState([]),[c,d]=H.useState(!1),[u,h]=H.useState(null),[f,p]=H.useState({username:"",password:"",role:"user",ui_mode:"pro"}),g=vr.useRef(null),b=vr.useRef(!1);H.useEffect(()=>{if(b.current)return;b.current=!0,(async()=>await n()||a("/"))()},[]);const w=H.useCallback(async()=>{d(!0);try{const I=await pt("get_all_users");l(I||[])}catch(I){console.error("Failed to load users:",I)}finally{d(!1)}},[]);H.useEffect(()=>{r&&w()},[r,w]);const _=I=>{h(I),p({username:I.username,password:"",role:I.role,ui_mode:I.ui_mode||"pro"}),g.current?.focus()},k=()=>{h(null),p({username:"",password:"",role:"user",ui_mode:"pro"})},T=async I=>{if(I.preventDefault(),!f.username.trim()){e(" "," .");return}try{if(u)await pt("update_user",{id:u.id,username:f.username,password:f.password||null,role:f.role,ui_mode:f.ui_mode}),e(" ","  .");else{if(!f.password){e(" "," .");return}await pt("create_user",{username:f.username,password:f.password,role:f.role,ui_mode:f.ui_mode}),e(" ","  .")}k(),w()}catch(O){e(" "," : "+O)}},D=async I=>{if(I.username==="admin"){e(" ","    .");return}if(await t(" ",`[${I.username}]   ?`))try{await pt("delete_user",{id:I.id}),u&&u.id===I.id&&k(),w()}catch(O){e(" "," : "+O)}};return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative",children:[s.jsx("div",{id:"local-modal-root",className:"absolute inset-0 z-[9999] pointer-events-none"}),s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-4",children:s.jsx("div",{className:"flex justify-between items-end",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Access Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"User & Permissions"})]})]})})}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-8 overflow-hidden",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 h-full",children:[s.jsx("div",{className:"lg:col-span-4 space-y-6",children:s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 sticky top-0",children:[s.jsxs("div",{className:"px-8 py-6 bg-slate-50/50 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("h3",{className:"font-black text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"manage_accounts"}),u?"  ":"  "]}),u&&s.jsx("button",{onClick:k,className:"text-[10px] font-black text-indigo-600 bg-indigo-50 px-3 py-1.5 rounded-lg hover:bg-indigo-100 transition-all",children:"  "})]}),s.jsxs("form",{onSubmit:T,className:"p-8 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2 text-left",children:"User ID"}),s.jsx("input",{ref:g,type:"text",value:f.username,onChange:I=>p({...f,username:I.target.value}),disabled:u?.username==="admin",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 disabled:opacity-50",placeholder:"  ",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2 text-left",children:u?"New Password (Optional)":"Password"}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"password",value:f.password,onChange:I=>p({...f,password:I.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:u?"  ":" ",required:!u})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2 text-left",children:"Role"}),s.jsxs("select",{value:f.role,onChange:I=>p({...f,role:I.target.value}),disabled:u?.username==="admin",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 disabled:opacity-50",children:[s.jsx("option",{value:"user",children:"  (User)"}),s.jsx("option",{value:"admin",children:" (Admin)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2 text-left",children:"UI Mode"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("button",{type:"button",onClick:()=>p({...f,ui_mode:"lite"}),className:`h-11 rounded-xl font-black text-[10px] uppercase transition-all border-2 ${f.ui_mode==="lite"?"bg-indigo-50 border-indigo-500 text-indigo-600":"bg-slate-50 border-transparent text-slate-400 hover:bg-slate-100"}`,children:"Lite ( )"}),s.jsx("button",{type:"button",onClick:()=>p({...f,ui_mode:"pro"}),className:`h-11 rounded-xl font-black text-[10px] uppercase transition-all border-2 ${f.ui_mode==="pro"?"bg-indigo-50 border-indigo-500 text-indigo-600":"bg-slate-50 border-transparent text-slate-400 hover:bg-slate-100"}`,children:"Pro ( )"})]})]}),s.jsxs("div",{className:"pt-4 border-t border-slate-100 flex flex-col gap-3",children:[s.jsxs("button",{type:"submit",className:"h-12 w-full bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-black text-xs shadow-lg shadow-indigo-200 transition-all flex items-center justify-center gap-2",children:[s.jsx(yi,{size:16})," ",u?"  ":"  "]}),u&&s.jsx("button",{type:"button",onClick:k,className:"h-12 w-full bg-slate-100 text-slate-600 rounded-xl font-black text-xs hover:bg-slate-200 transition-all",children:"  "})]})]})]})}),s.jsxs("div",{className:"lg:col-span-8 flex flex-col h-full overflow-hidden",children:[s.jsx("div",{className:"bg-white rounded-t-[2rem] border-b border-slate-100 p-6 flex justify-between items-center z-10 sticky top-0 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600",children:s.jsx(xx,{size:20})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Registered Users"}),s.jsxs("p",{className:"font-black text-slate-700",children:[" ",o.length," "]})]})]})}),s.jsx("div",{className:"flex-1 bg-white rounded-b-[2rem] shadow-xl shadow-slate-200/50 border border-t-0 border-slate-200 overflow-hidden ring-1 ring-slate-900/5 flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"sticky top-0 z-10 bg-slate-50/95 backdrop-blur-md border-b border-slate-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center w-[10%]",children:"No."}),s.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest w-[30%]",children:" ID"}),s.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest w-[15%]",children:""}),s.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest w-[15%]",children:"UI "}),s.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center w-[20%]",children:""}),s.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center w-[15%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:o.map((I,O)=>s.jsxs("tr",{className:`group transition-all ${u?.id===I.id?"bg-indigo-50/60":"hover:bg-slate-50/50"}`,children:[s.jsx("td",{className:"px-4 py-4 text-center text-xs font-black text-slate-300 group-hover:text-slate-400",children:O+1}),s.jsxs("td",{className:"px-4 py-4 font-black text-sm text-slate-700 flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 ${I.role==="admin"?"bg-amber-50 text-amber-500":"bg-slate-50 text-slate-400"}`,children:I.role==="admin"?s.jsx(qA,{size:16}):s.jsx(xx,{size:16})}),s.jsx("span",{className:"truncate",children:I.username}),I.username==="admin"&&s.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded font-black uppercase whitespace-nowrap",children:"System"})]}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:`px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest border whitespace-nowrap
                                                        ${I.role==="admin"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}
                                                    `,children:I.role==="admin"?"":" "})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:`px-2 py-1 rounded-md text-[8px] font-black uppercase tracking-tight border
                                                        ${I.ui_mode==="lite"?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-indigo-50 text-indigo-600 border-indigo-100"}
                                                    `,children:I.ui_mode==="lite"?"LITE":"PRO"})}),s.jsx("td",{className:"px-4 py-4 text-center text-xs font-bold text-slate-400 tabular-nums whitespace-nowrap",children:I.created_at?I.created_at.substring(0,10):"-"}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("button",{onClick:()=>_(I),className:`w-10 h-10 rounded-xl transition-all shadow-sm flex items-center justify-center
                                                                ${u?.id===I.id?"bg-indigo-600 text-white shadow-indigo-300":"bg-slate-100 text-slate-500 hover:bg-indigo-50 hover:text-indigo-600"}
                                                            `,children:s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"edit"})}),s.jsx("button",{onClick:()=>D(I),disabled:I.username==="admin",className:`w-10 h-10 rounded-xl transition-all shadow-sm flex items-center justify-center
                                                                ${I.username==="admin"?"bg-slate-50/50 text-slate-200 cursor-not-allowed":"bg-slate-100 text-slate-500 hover:bg-rose-50 hover:text-rose-600"}
                                                            `,children:s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"delete"})})]})})]},I.id))})]})})})]})]})})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[i?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Sc,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:i?"  ...":"  ..."})]})})},kDe=()=>{const a=Fn(),{showAlert:e}=Na(),{isAuthorized:t,checkAdmin:r,isVerifying:n}=Oc(),[i,o]=H.useState(!1),[l,c]=H.useState({company_name:"",representative_name:"",phone_number:"",mobile_number:"",business_reg_number:"",registration_date:"",address:"",business_type:"",item:"",memo:"",certification_info:{gap:"",haccp:"",organic:""}}),d=vr.useRef(!1);H.useEffect(()=>{if(d.current)return;d.current=!0,(async()=>await r()||a("/"))()},[]),H.useEffect(()=>{t&&(async()=>{try{const f=await pt("get_company_info");f&&c({company_name:f.company_name||"",representative_name:f.representative_name||"",phone_number:f.phone_number||"",mobile_number:f.mobile_number||"",business_reg_number:f.business_reg_number||"",registration_date:f.registration_date?f.registration_date.substring(0,10):"",address:f.address||"",business_type:f.business_type||"",item:f.item||"",memo:f.memo||"",certification_info:f.certification_info||{gap:"",haccp:"",organic:""}})}catch(f){console.error("Failed to load company info:",f)}})()},[t]);const u=async h=>{if(h.preventDefault(),!l.company_name.trim()){e(" "," .");return}o(!0);try{await pt("save_company_info",{companyName:l.company_name,representativeName:l.representative_name||null,phoneNumber:l.phone_number||null,mobileNumber:l.mobile_number||null,businessRegNumber:l.business_reg_number||null,registrationDate:l.registration_date||null,address:l.address||null,businessType:l.business_type||null,item:l.item||null,memo:l.memo||null,certificationInfo:l.certification_info}),window.dispatchEvent(new Event("company-info-changed")),await e(" ","  .")}catch(f){e(" "," : "+f)}finally{o(!1)}};return t?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative text-left",children:[s.jsx("div",{id:"local-modal-root",className:"absolute inset-0 z-[9999] pointer-events-none"}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 py-6 overflow-auto custom-scrollbar",children:s.jsx("form",{onSubmit:u,className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 transition-all",children:[s.jsxs("div",{className:"px-8 py-6 border-b border-slate-50 bg-slate-50/30 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"System Identity"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Management"})]})]}),s.jsxs("button",{type:"submit",disabled:i,className:"h-10 px-6 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-indigo-200 transition-all active:scale-[0.98] disabled:opacity-50",children:[s.jsx(rs,{size:16})," ",i?" ...":" "]})]}),s.jsxs("div",{className:"p-6 border-b border-slate-50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 text-indigo-600 flex items-center justify-center",children:s.jsx(Sae,{size:16})}),s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"  "})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-left",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:[" () ",s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsx("input",{type:"text",value:l.company_name,onChange:h=>c({...l,company_name:h.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:" ",required:!0})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"text",value:l.representative_name,onChange:h=>c({...l,representative_name:h.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:" "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"text",value:l.business_reg_number,onChange:h=>c({...l,business_reg_number:h.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"000-00-00000"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  ()"}),s.jsx("input",{type:"date",value:l.registration_date,onChange:h=>c({...l,registration_date:h.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200"})]}),s.jsxs("div",{className:"space-y-1 col-span-1 md:col-span-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsx("input",{type:"text",value:l.address,onChange:h=>c({...l,address:h.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"  "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"text",value:l.business_type,onChange:h=>c({...l,business_type:h.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:": , "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"text",value:l.item,onChange:h=>c({...l,item:h.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:": , "})]})]})]}),s.jsxs("div",{className:"p-6 bg-slate-50/30 border-b border-slate-50 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 text-indigo-600 flex items-center justify-center",children:s.jsx(Mre,{size:16})}),s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:" "})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsx("input",{type:"tel",value:l.phone_number,onChange:h=>c({...l,phone_number:h.target.value}),className:"w-full h-11 px-4 bg-white border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 transition-all ring-1 ring-inset ring-slate-200",placeholder:"02-000-0000"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"tel",value:l.mobile_number,onChange:h=>c({...l,mobile_number:h.target.value}),className:"w-full h-11 px-4 bg-white border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 transition-all ring-1 ring-inset ring-slate-200",placeholder:"010-0000-0000"})]})]})]}),s.jsxs("div",{className:"p-6 bg-white border-b border-slate-50 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-teal-50 text-teal-600 flex items-center justify-center",children:s.jsx(yi,{size:16})}),s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"    "})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-teal-600",children:"GAP "}),s.jsx("input",{type:"text",value:l.certification_info.gap,onChange:h=>c({...l,certification_info:{...l.certification_info,gap:h.target.value}}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-teal-500/10 transition-all ring-1 ring-inset ring-slate-200",placeholder:"GAP  "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-teal-600",children:"HACCP "}),s.jsx("input",{type:"text",value:l.certification_info.haccp,onChange:h=>c({...l,certification_info:{...l.certification_info,haccp:h.target.value}}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-teal-500/10 transition-all ring-1 ring-inset ring-slate-200",placeholder:"HACCP  "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-teal-600",children:"/ "}),s.jsx("input",{type:"text",value:l.certification_info.organic,onChange:h=>c({...l,certification_info:{...l.certification_info,organic:h.target.value}}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-teal-500/10 transition-all ring-1 ring-inset ring-slate-200",placeholder:" "})]})]})]}),s.jsxs("div",{className:"p-6 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 text-indigo-600 flex items-center justify-center",children:s.jsx(YA,{size:16})}),s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:" "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  / "}),s.jsx("textarea",{value:l.memo,onChange:h=>c({...l,memo:h.target.value}),className:"w-full p-4 bg-slate-50 border-none rounded-2xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 resize-none custom-scrollbar min-h-[100px]",placeholder:"     "})]})]})]})})})]}):s.jsx("div",{className:"flex h-screen items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[n?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Sc,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:n?"  ...":"  ..."})]})})},CDe=()=>{const a=Fn(),{showAlert:e}=Na(),{isAuthorized:t,checkAdmin:r,isVerifying:n}=Oc(),[i,o]=H.useState(!1),[l,c]=H.useState({gemini:!1,sms:!1,naver:!1,naver_commerce_id:!1,naver_commerce_secret:!1,coupang_access_key:!1,sabangnet:!1,playauto:!1,courier:!1,tax:!1,weather:!1}),[d,u]=H.useState({gemini_api_key:"",sms_api_key:"",sms_sender_number:"",sms_provider:"aligo",naver_client_id:"",naver_client_secret:"",naver_commerce_id:"",naver_commerce_secret:"",coupang_access_key:"",coupang_secret_key:"",coupang_vendor_id:"",sabangnet_api_key:"",sabangnet_id:"",playauto_api_key:"",playauto_id:"",courier_provider:"sweettracker",courier_api_key:"",courier_client_id:"",tax_api_key:"",tax_client_id:"",weather_api_key:"",weather_location:"Gangneung",weather_provider:"openweathermap"}),h=vr.useRef(!1);H.useEffect(()=>{if(h.current)return;h.current=!0,(async()=>await r()||a("/"))()},[]),H.useEffect(()=>{t&&(async()=>{try{const O=await pt("get_all_integrations_config");u(P=>({...P,gemini_api_key:O.gemini_api_key||"",sms_api_key:O.sms?.apiKey||"",sms_sender_number:O.sms?.senderNumber||"",sms_provider:O.sms?.provider||"aligo",naver_client_id:O.naver?.clientId||"",naver_client_secret:O.naver?.clientSecret||"",naver_commerce_id:O.mall?.naver_commerce_id||"",naver_commerce_secret:O.mall?.naver_commerce_secret||"",coupang_access_key:O.mall?.coupang_access_key||"",coupang_secret_key:O.mall?.coupang_secret_key||"",coupang_vendor_id:O.mall?.coupang_vendor_id||"",sabangnet_api_key:O.mall?.sabangnet_api_key||"",sabangnet_id:O.mall?.sabangnet_id||"",playauto_api_key:O.mall?.playauto_api_key||"",playauto_id:O.mall?.playauto_id||"",courier_provider:O.courier?.provider||"sweettracker",courier_api_key:O.courier?.api_key||"",courier_client_id:O.courier?.client_id||"",tax_api_key:O.tax?.api_key||"",tax_client_id:O.tax?.client_id||"",weather_api_key:O.weather?.api_key||"",weather_location:O.weather?.location||"Gangneung",weather_provider:O.weather?.provider||"openweathermap"}))}catch(O){console.error("Failed to load configs:",O)}})()},[t]);const f=async()=>{o(!0);try{await pt("save_gemini_api_key",{key:d.gemini_api_key}),await e(" ","Gemini API  .")}catch(I){e(" ",I)}finally{o(!1)}},p=async()=>{if(!d.gemini_api_key){e(""," API   .");return}o(!0);try{const I=await _l(e,"test_gemini_connection",{key:d.gemini_api_key});I==="OK"?e("","Gemini AI  !   ."):e("",`: ${I}`)}catch(I){console.error(I),I.message?.includes("AI_QUOTA_EXCEEDED")||e(" ",` : ${I}`)}finally{o(!1)}},g=async()=>{o(!0);try{await pt("save_sms_config",{apiKey:d.sms_api_key,senderNumber:d.sms_sender_number,provider:d.sms_provider}),await e(" ","SMS  .")}catch(I){e(" ",I)}finally{o(!1)}},b=async()=>{o(!0);try{await pt("save_naver_keys",{clientId:d.naver_client_id,clientSecret:d.naver_client_secret}),await e(" ","Naver API  .")}catch(I){e(" ",I)}finally{o(!1)}},w=async()=>{o(!0);try{await pt("save_mall_keys",{config:{naver_commerce_id:d.naver_commerce_id,naver_commerce_secret:d.naver_commerce_secret,coupang_access_key:d.coupang_access_key,coupang_secret_key:d.coupang_secret_key,coupang_vendor_id:d.coupang_vendor_id,sabangnet_api_key:d.sabangnet_api_key,sabangnet_id:d.sabangnet_id,playauto_api_key:d.playauto_api_key,playauto_id:d.playauto_id}}),await e(" ","   .")}catch(I){e(" ",I)}finally{o(!1)}},_=async()=>{o(!0);try{await pt("save_courier_config",{config:{provider:d.courier_provider,api_key:d.courier_api_key,client_id:d.courier_client_id}}),await e(" ","   .")}catch(I){e(" ",I)}finally{o(!1)}},k=async()=>{o(!0);try{await pt("save_tax_filing_config",{config:{provider:d.tax_provider,api_key:d.tax_api_key,client_id:d.tax_client_id}}),await e(" "," API  .")}catch(I){e(" ",I)}finally{o(!1)}},T=async()=>{o(!0);try{await pt("save_weather_config",{api_key:d.weather_api_key,location:d.weather_location,provider:d.weather_provider}),await e(" ","   .")}catch(I){e(" ",I)}finally{o(!1)}},D=I=>{c(O=>({...O,[I]:!O[I]}))};return t?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative",children:[s.jsx("div",{id:"local-modal-root",className:"absolute inset-0 z-[9999] pointer-events-none"}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-8 overflow-auto custom-scrollbar",children:s.jsxs("div",{className:"max-w-4xl mx-auto py-8 space-y-6",children:[s.jsxs("div",{className:"mb-2 px-4 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-12 h-1.5 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[10px] font-black tracking-[0.25em] text-indigo-600 uppercase",children:"Integrations"})]}),s.jsxs("h1",{className:"text-4xl font-black text-slate-800 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-2 text-2xl tracking-normal",children:"API & Service Node"})]}),s.jsx("p",{className:"mt-2 text-slate-400 font-medium text-sm",children:"  ,          ."})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[s.jsx("div",{className:"bg-white rounded-[2.5rem] shadow-2xl shadow-slate-200/40 border border-slate-100 overflow-hidden group hover:border-indigo-200 transition-all duration-500",children:s.jsxs("div",{className:"p-8 lg:p-10",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center shadow-inner group-hover:scale-110 transition-transform duration-500",children:s.jsx(GC,{size:28,strokeWidth:2.5})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-xl font-black text-slate-800 tracking-tight",children:"Google Gemini AI"}),d.gemini_api_key?s.jsx("span",{className:"px-2 py-0.5 rounded-md bg-emerald-50 text-emerald-600 text-[9px] font-black uppercase tracking-wider border border-emerald-100",children:"Set"}):s.jsx("span",{className:"px-2 py-0.5 rounded-md bg-slate-50 text-slate-400 text-[9px] font-black uppercase tracking-wider border border-slate-100",children:"Empty"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"text-[12px] font-bold text-slate-400",children:"     AI "}),s.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-200"}),s.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-indigo-500 hover:text-indigo-700 text-[11px] font-black flex items-center gap-1 transition-colors",children:["API   ",s.jsx(Tf,{size:10})]})]})]})]}),s.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[s.jsxs("button",{onClick:p,disabled:i,className:"flex-1 md:flex-none h-11 px-6 bg-white border border-indigo-100 text-indigo-600 rounded-2xl font-black text-xs flex items-center justify-center gap-2 hover:bg-indigo-50/50 hover:border-indigo-200 transition-all active:scale-[0.97]",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"check_circle"}),"  "]}),s.jsxs("button",{onClick:f,disabled:i,className:"flex-1 md:flex-none h-11 px-6 bg-slate-900 border border-slate-900 text-white rounded-2xl font-black text-xs flex items-center justify-center gap-2 shadow-lg shadow-slate-200 hover:bg-slate-800 transition-all active:scale-[0.97]",children:[s.jsx(rs,{size:16})," "]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Gemini Project API Key"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:l.gemini?"text":"password",value:d.gemini_api_key,onChange:I=>u({...d,gemini_api_key:I.target.value}),className:"w-full h-14 px-6 pr-14 bg-slate-50/50 border border-slate-100 rounded-[1.25rem] font-bold text-[15px] focus:ring-4 focus:ring-indigo-500/5 focus:bg-white focus:border-indigo-200 transition-all",placeholder:"AI     "}),s.jsx("button",{type:"button",onClick:()=>D("gemini"),className:"absolute right-5 top-1/2 -translate-y-1/2 text-slate-300 hover:text-slate-500 transition-colors",children:l.gemini?s.jsx(Su,{size:20}):s.jsx(fd,{size:20})})]}),s.jsx("p",{className:"ml-1 text-[11px] text-slate-400 font-medium",children:"        ."})]})]})}),s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 p-8 text-left transition-all",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-50 text-orange-600 flex items-center justify-center",children:s.jsx(jv,{size:20})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"SMS & Messaging"}),s.jsxs("a",{href:"https://aligo.in/",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-orange-50 text-orange-600 text-[10px] font-black hover:bg-orange-100 transition-colors",children:[s.jsx(Tf,{size:10}),"  "]})]}),s.jsx("p",{className:"text-[11px] font-bold text-slate-400",children:"     "})]})]}),s.jsxs("button",{onClick:g,disabled:i,className:"h-10 px-5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-orange-100 transition-all active:scale-[0.95]",children:[s.jsx(rs,{size:14})," "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"SMS API "}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:l.sms?"text":"password",value:d.sms_api_key,onChange:I=>u({...d,sms_api_key:I.target.value}),className:"w-full h-12 px-5 pr-12 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-orange-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200"}),s.jsx("button",{type:"button",onClick:()=>D("sms"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 cursor-pointer",children:l.sms?s.jsx(Su,{size:16}):s.jsx(fd,{size:16})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"  (Sender Number)"}),s.jsx("div",{className:"relative group",children:s.jsx("input",{type:"tel",value:d.sms_sender_number,onChange:I=>u({...d,sms_sender_number:I.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-orange-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"010-0000-0000"})})]}),s.jsxs("div",{className:"space-y-3 col-span-1 md:col-span-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  "}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["aligo","coolsms","solapi"].map(I=>s.jsx("button",{type:"button",onClick:()=>u({...d,sms_provider:I}),className:`h-12 rounded-xl border-2 font-black text-[11px] capitalize transition-all
                                                ${d.sms_provider===I?"bg-orange-50 border-orange-500 text-orange-600 shadow-md transform -translate-y-0.5":"bg-white border-slate-100 text-slate-400 hover:border-slate-200"}
                                            `,children:I},I))})]})]})]}),s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 p-8 text-left transition-all",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-50 text-green-600 flex items-center justify-center",children:s.jsx(Mg,{size:20})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"Naver Search & Trends"}),s.jsxs("a",{href:"https://developers.naver.com/apps/",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-green-50 text-green-600 text-[10px] font-black hover:bg-green-100 transition-colors",children:[s.jsx(Tf,{size:10}),"  "]})]}),s.jsx("p",{className:"text-[11px] font-bold text-slate-400",children:" /     "})]})]}),s.jsxs("button",{onClick:b,disabled:i,className:"h-10 px-5 bg-green-600 hover:bg-green-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-green-100 transition-all active:scale-[0.95]",children:[s.jsx(rs,{size:14})," "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"  ID"}),s.jsx("input",{type:"text",value:d.naver_client_id,onChange:I=>u({...d,naver_client_id:I.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-green-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200"})]}),s.jsxs("div",{className:"space-y-3 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  Secret"}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:l.naver?"text":"password",value:d.naver_client_secret,onChange:I=>u({...d,naver_client_secret:I.target.value}),className:"w-full h-12 px-5 pr-12 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-green-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"Secret "}),s.jsx("button",{type:"button",onClick:()=>D("naver"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 cursor-pointer",children:l.naver?s.jsx(Su,{size:16}):s.jsx(fd,{size:16})})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 p-8 text-left transition-all",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-sky-50 text-sky-600 flex items-center justify-center",children:s.jsx(Zae,{size:20})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"Weather Service (OpenWeather)"}),s.jsxs("a",{href:"https://home.openweathermap.org/api_keys",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-sky-50 text-sky-600 text-[10px] font-black hover:bg-sky-100 transition-colors",children:[s.jsx(Tf,{size:10}),"  "]})]}),s.jsx("p",{className:"text-[11px] font-bold text-slate-400",children:"       "})]})]}),s.jsxs("button",{onClick:T,disabled:i,className:"h-10 px-5 bg-sky-600 hover:bg-sky-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-sky-100 transition-all active:scale-[0.95]",children:[s.jsx(rs,{size:14})," "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:" API "}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:l.weather?"text":"password",value:d.weather_api_key,onChange:I=>u({...d,weather_api_key:I.target.value}),className:"w-full h-12 px-5 pr-12 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-sky-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"OpenWeather API Key"}),s.jsx("button",{type:"button",onClick:()=>D("weather"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 cursor-pointer",children:l.weather?s.jsx(Su,{size:16}):s.jsx(fd,{size:16})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"  (  ,)"}),s.jsx("input",{type:"text",value:d.weather_location,onChange:I=>u({...d,weather_location:I.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-sky-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:": Gangneung  37.75,128.87"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 p-8 text-left transition-all",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-teal-50 text-teal-600 flex items-center justify-center",children:s.jsx(WH,{size:20})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"E-commerce & Mall Sync"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("a",{href:"https://apicenter.commerce.naver.com/",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-teal-50 text-teal-600 text-[10px] font-black hover:bg-teal-100 transition-colors",children:" "}),s.jsx("a",{href:"https://wing.coupang.com/",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-teal-50 text-teal-600 text-[10px] font-black hover:bg-teal-100 transition-colors",children:" "})]})]}),s.jsx("p",{className:"text-[11px] font-bold text-slate-400",children:"       "})]})]}),s.jsxs("button",{onClick:w,disabled:i,className:"h-10 px-5 bg-teal-600 hover:bg-teal-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-teal-100 transition-all active:scale-[0.95]",children:[s.jsx(rs,{size:14})," "]})]}),s.jsx("div",{className:"space-y-8",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest border-l-4 border-teal-500 pl-2",children:"Mall Integration Aggregators (Best for Multi-Channel)"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 pt-2",children:[s.jsxs("div",{className:"bg-slate-50/50 p-6 rounded-3xl border border-slate-100 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-teal-500 text-white flex items-center justify-center font-black text-xs",children:"S"}),s.jsx("h4",{className:"font-black text-slate-700",children:" (Sabangnet)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-500 ml-1",children:" (API Key)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:l.sabangnet?"text":"password",value:d.sabangnet_api_key,onChange:I=>u({...d,sabangnet_api_key:I.target.value}),className:"w-full h-11 px-4 pr-10 bg-white border border-slate-200 rounded-xl font-bold text-sm focus:ring-4 focus:ring-teal-500/10 transition-all",placeholder:"Sabangnet API Key"}),s.jsx("button",{onClick:()=>D("sabangnet"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:l.sabangnet?s.jsx(Su,{size:14}):s.jsx(fd,{size:14})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-500 ml-1",children:"  (Company ID)"}),s.jsx("input",{type:"text",value:d.sabangnet_id,onChange:I=>u({...d,sabangnet_id:I.target.value}),className:"w-full h-11 px-4 bg-white border border-slate-200 rounded-xl font-bold text-sm focus:ring-4 focus:ring-teal-500/10 transition-all",placeholder:"Company ID"})]})]}),s.jsxs("div",{className:"bg-slate-50/50 p-6 rounded-3xl border border-slate-100 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-500 text-white flex items-center justify-center font-black text-xs",children:"P"}),s.jsx("h4",{className:"font-black text-slate-700",children:" (PlayAuto)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-500 ml-1",children:"   (API Key)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:l.playauto?"text":"password",value:d.playauto_api_key,onChange:I=>u({...d,playauto_api_key:I.target.value}),className:"w-full h-11 px-4 pr-10 bg-white border border-slate-200 rounded-xl font-bold text-sm focus:ring-4 focus:ring-teal-500/10 transition-all",placeholder:"PlayAuto API Key"}),s.jsx("button",{onClick:()=>D("playauto"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:l.playauto?s.jsx(Su,{size:14}):s.jsx(fd,{size:14})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-500 ml-1",children:"  (Member ID)"}),s.jsx("input",{type:"text",value:d.playauto_id,onChange:I=>u({...d,playauto_id:I.target.value}),className:"w-full h-11 px-4 bg-white border border-slate-200 rounded-xl font-bold text-sm focus:ring-4 focus:ring-teal-500/10 transition-all",placeholder:"Member ID"})]})]})]}),s.jsxs("div",{className:"pt-6 border-t border-slate-100",children:[s.jsx("h3",{className:"text-[10px] font-black text-slate-300 uppercase tracking-[0.2em] mb-4",children:"Advanced: Direct Mall Connectivity"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 opacity-60 hover:opacity-100 transition-opacity",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-[11px] font-black text-slate-400 pl-1",children:"Naver SmartStore"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{type:"text",value:d.naver_commerce_id,onChange:I=>u({...d,naver_commerce_id:I.target.value}),className:"w-full h-10 px-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-xs",placeholder:"Client ID"}),s.jsx("input",{type:"password",value:d.naver_commerce_secret,onChange:I=>u({...d,naver_commerce_secret:I.target.value}),className:"w-full h-10 px-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-xs",placeholder:"Client Secret"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-[11px] font-black text-slate-400 pl-1",children:"Coupang Marketplace"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{type:"text",value:d.coupang_access_key,onChange:I=>u({...d,coupang_access_key:I.target.value}),className:"w-full h-10 px-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-xs",placeholder:"Access Key"}),s.jsx("input",{type:"password",value:d.coupang_secret_key,onChange:I=>u({...d,coupang_secret_key:I.target.value}),className:"w-full h-10 px-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-xs",placeholder:"Secret Key"})]})]})]})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 p-8 text-left transition-all",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 text-blue-600 flex items-center justify-center",children:s.jsx(fne,{size:20})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"Courier Service Integration"}),s.jsxs("a",{href:"https://www.sweettracker.co.kr/",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-blue-50 text-blue-600 text-[10px] font-black hover:bg-blue-100 transition-colors",children:[s.jsx(Tf,{size:10}),"  "]})]}),s.jsx("p",{className:"text-[11px] font-bold text-slate-400",children:"        "})]})]}),s.jsxs("button",{onClick:_,disabled:i,className:"h-10 px-5 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-blue-100 transition-all active:scale-[0.95]",children:[s.jsx(rs,{size:14})," "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3 col-span-1 md:col-span-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  "}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["sweettracker","smartparcel","delivery"].map(I=>s.jsx("button",{type:"button",onClick:()=>u({...d,courier_provider:I}),className:`h-12 rounded-xl border-2 font-black text-[11px] capitalize transition-all
                                                ${d.courier_provider===I?"bg-blue-50 border-blue-500 text-blue-600 shadow-md transform -translate-y-0.5":"bg-white border-slate-100 text-slate-400 hover:border-slate-200"}
                                            `,children:I==="sweettracker"?"":I==="smartparcel"?"":" API"},I))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"API  (API Key)"}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:l.courier?"text":"password",value:d.courier_api_key,onChange:I=>u({...d,courier_api_key:I.target.value}),className:"w-full h-12 px-5 pr-12 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-blue-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200"}),s.jsx("button",{type:"button",onClick:()=>D("courier"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 cursor-pointer",children:l.courier?s.jsx(Su,{size:16}):s.jsx(fd,{size:16})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:" ID / "}),s.jsx("input",{type:"text",value:d.courier_client_id,onChange:I=>u({...d,courier_client_id:I.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-blue-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"Client ID  "})]})]})]}),s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 p-8 text-left transition-all",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-violet-50 text-violet-600 flex items-center justify-center",children:s.jsx(qA,{size:20})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"Tax Filing API (Hometax Integration)"}),s.jsxs("a",{href:"https://www.hometax.go.kr/",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-violet-50 text-violet-600 text-[10px] font-black hover:bg-violet-100 transition-colors",children:[s.jsx(Tf,{size:10}),"  "]})]}),s.jsx("p",{className:"text-[11px] font-bold text-slate-400",children:"     "})]})]}),s.jsxs("button",{onClick:k,disabled:i,className:"h-10 px-5 bg-violet-600 hover:bg-violet-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-violet-100 transition-all active:scale-[0.95]",children:[s.jsx(rs,{size:14})," "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3 col-span-1 md:col-span-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"  (Tax Provider)"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{id:"sim_hometax",name:"  (Sim)"},{id:"popbill",name:" (Popbill)"},{id:"smartbill",name:" (Smart)"}].map(I=>s.jsx("button",{type:"button",onClick:()=>u({...d,tax_provider:I.id}),className:`h-12 rounded-xl border-2 font-black text-[11px] transition-all
                                                ${d.tax_provider===I.id?"bg-violet-50 border-violet-500 text-violet-600 shadow-md transform -translate-y-0.5":"bg-white border-slate-100 text-slate-400 hover:border-slate-200"}
                                            `,children:I.name},I.id))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"API  (Secret Key)"}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:l.tax?"text":"password",value:d.tax_api_key,onChange:I=>u({...d,tax_api_key:I.target.value}),className:"w-full h-12 px-5 pr-12 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-violet-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"  API Key "}),s.jsx("button",{type:"button",onClick:()=>D("tax"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 cursor-pointer",children:l.tax?s.jsx(Su,{size:16}):s.jsx(fd,{size:16})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:" / "}),s.jsx("input",{type:"text",value:d.tax_client_id,onChange:I=>u({...d,tax_client_id:I.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-violet-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"   "})]})]})]})]})]})})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[n?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Sc,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:n?"  ...":"  ..."})]})})},IC=async(a,e)=>(console.warn(`Event ${a} listening not supported in pure web version.`),()=>{}),OV=async a=>(alert(`/        .
(Tauri   )`),null),PV=(a,e=2)=>{if(a===0)return"0 Bytes";const t=1024,r=e<0?0:e,n=["Bytes","KB","MB","GB","TB"],i=Math.floor(Math.log(a)/Math.log(t));return parseFloat((a/Math.pow(t,i)).toFixed(r))+" "+n[i]},ADe=(a,e)=>{if(!a||e<=0||e>=100)return" ...";const n=(Date.now()-a)/e*(100-e),i=Math.floor(n/6e4),o=Math.floor(n%6e4/1e3);return i>0?`${i} ${o}`:`${o}`},TDe=()=>{const a=Fn(),{showAlert:e,showConfirm:t}=Na(),{isAuthorized:r,checkAdmin:n,isVerifying:i}=Oc(),[o,l]=H.useState([]),[c,d]=H.useState(!1),[u,h]=H.useState(""),[f,p]=H.useState(""),[g,b]=H.useState({progress:0,message:""}),[w,_]=H.useState(!1),[k,T]=H.useState("backup"),[D,I]=H.useState(!0),[O,P]=H.useState(!0),[V,G]=H.useState(null),Q=vr.useRef(!1);H.useEffect(()=>{if(Q.current)return;Q.current=!0,(async()=>await n()||a("/"))()},[]);const $=H.useCallback(async()=>{d(!0);try{const[re,Z,ie,de]=await Promise.all([pt("get_auto_backups"),pt("get_external_backup_path"),pt("get_internal_backup_path"),pt("get_backup_status")]);l(re||[]),h(Z||""),p(ie||""),G(de),de?.is_friday?I(!1):I(!0)}catch(re){console.error("Failed to load backups:",re)}finally{d(!1)}},[]);H.useEffect(()=>{r&&$()},[r,$]);const ae=async()=>{try{await pt("cancel_backup_restore"),b(re=>({...re,message:"  ..."}))}catch(re){console.error("Cancel failed:",re)}},J=Zee(({currentLocation:re,nextLocation:Z})=>w&&re.pathname!==Z.pathname);H.useEffect(()=>{J.state==="blocked"&&J.reset()},[J]),H.useEffect(()=>{const re=Z=>{w&&(Z.preventDefault(),Z.returnValue="")};return window.addEventListener("beforeunload",re),()=>window.removeEventListener("beforeunload",re)},[w]);const U=async()=>{if(await t("   ",`   ? (: ${D?"()":"()"})

        .`))try{d(!0),_(!0),T("backup"),b({progress:0,message:"   ...",startTime:Date.now()});const ie=await IC("backup-progress",de=>{b(fe=>({...de.payload,startTime:fe.startTime}))});try{const de=await pt("run_daily_custom_backup",{isIncremental:D,useCompression:O});_(!1),b({progress:0,message:""}),await e(" ",de),$()}finally{ie()}}catch(ie){e(" ",typeof ie=="string"?ie:ie.message)}finally{d(!1),_(!1),b({progress:0,message:""})}},F=async()=>{if(await t(" ",` ?

[]       ,      .
?`))try{const Z=await OV({filters:[{name:"Backup File",extensions:["json","gz"]}],multiple:!1});if(!Z)return;d(!0),_(!0),T("restore"),b({progress:0,message:"  ..."});const ie=await IC("restore-progress",de=>{b(de.payload)});try{const de=await pt("restore_database",{path:Z});await new Promise(fe=>setTimeout(fe,500)),_(!1),b({progress:0,message:""}),await e(" ",`${de}

   .`),window.location.href="/"}finally{ie()}}catch(Z){e(" ",typeof Z=="string"?Z:Z.message),d(!1),_(!1),b({progress:0,message:""})}},W=async()=>{try{d(!0),_(!0),T("maintenance"),b({progress:50,message:"   ..."});const re=await pt("run_db_maintenance");await e(" ",re)}catch(re){e(" ",re)}finally{d(!1),_(!1),b({progress:0,message:""})}},K=async re=>{const Z=re>=12?`${Math.floor(re/12)}`:`${re}`;if(await t("  ",`${Z}       DB  ?

  ( )   .`))try{d(!0);const de=await pt("cleanup_old_logs",{months:re});await e(" ",`${de}    .`)}catch(de){e(" ",de)}finally{d(!1)}},ee=async()=>{try{const re=await OV({directory:!0,multiple:!1,title:"   "});re&&(await pt("save_external_backup_path",{path:re}),h(re),await e(" ","    ."))}catch(re){e("  ",re)}},ne=async re=>{if(await t("[ ]",` (${re.created_at})  ?

       .`))try{d(!0),_(!0),T("restore"),b({progress:0,message:"  ..."});const ie=await IC("restore-progress",de=>{b(de.payload)});try{const de=await pt("restore_database",{path:re.path});await e(" ",de),window.location.href="/"}finally{ie()}}catch(ie){e(" ",typeof ie=="string"?ie:ie.message)}finally{d(!1),_(!1),b({progress:0,message:""})}};return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative text-left",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-10 pb-4",children:s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Data Security & Recovery"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["    ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Backup & Restore"})]}),s.jsx("p",{className:"text-sm text-slate-400 font-medium mt-1",children:"      ."})]})})}),w&&s.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[99999] flex items-center justify-center animate-in fade-in duration-300",children:s.jsxs("div",{className:"bg-white rounded-3xl shadow-[0_30px_70px_-15px_rgba(0,0,0,0.4)] p-10 w-[520px] max-w-[95%] border border-white/20 relative group overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/5 rounded-full -translate-y-1/2 translate-x-1/2 blur-2xl transition-all"}),s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${k==="backup"?"bg-indigo-100":k==="restore"?"bg-purple-100":"bg-emerald-100"}`,children:s.jsx("span",{className:`material-symbols-rounded text-4xl animate-pulse ${k==="backup"?"text-indigo-600":k==="restore"?"text-purple-600":"text-emerald-600"}`,children:k==="backup"?"backup":k==="restore"?"restore":"architecture"})}),s.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:k==="backup"?"   ":k==="restore"?"   ":"   "}),s.jsx("p",{className:"text-sm text-slate-500",children:g.message})]}),s.jsx("div",{className:"relative w-full h-3 bg-slate-200 rounded-full overflow-hidden mb-3",children:s.jsx("div",{className:`absolute top-0 left-0 h-full transition-all duration-300 ease-out ${k==="backup"?"bg-gradient-to-r from-indigo-500 to-indigo-600":k==="restore"?"bg-gradient-to-r from-purple-500 to-purple-600":"bg-gradient-to-r from-emerald-500 to-emerald-600"}`,style:{width:`${g.progress}%`}})}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("span",{className:`text-4xl font-black ${k==="backup"?"text-indigo-600":k==="restore"?"text-purple-600":"text-emerald-600"}`,style:{fontFamily:"Outfit, sans-serif"},children:[g.progress,"%"]}),s.jsxs("div",{className:"flex flex-col gap-1 mt-3",children:[g.total>0&&s.jsx("p",{className:"text-[13px] text-slate-500 font-bold bg-slate-50 py-1.5 px-4 rounded-full inline-block mx-auto border border-slate-100",children:k==="restore"?`${PV(g.processed)} / ${PV(g.total)}`:`${g.processed?.toLocaleString()||0} / ${g.total?.toLocaleString()||0} `}),g.startTime&&g.progress>0&&g.progress<100&&s.jsxs("div",{className:"flex items-center justify-center gap-1.5 text-indigo-500 mt-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"schedule"}),s.jsxs("span",{className:"text-[12px] font-black uppercase tracking-wider",children:[" : ",ADe(g.startTime,g.progress)]})]})]})]}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("button",{onClick:ae,className:"px-8 py-2.5 bg-slate-100 hover:bg-red-50 text-slate-500 hover:text-red-600 rounded-xl text-[13px] font-black transition-all border border-slate-200 hover:border-red-100 flex items-center gap-2 group",children:[s.jsx("span",{className:"material-symbols-rounded text-lg group-hover:rotate-90 transition-transform",children:"stop_circle"}),k==="backup"?" ":" "]})})]})]})}),s.jsxs("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-8 overflow-y-auto custom-scrollbar",children:[s.jsxs("div",{className:"w-full space-y-8 pt-4",children:[s.jsx("div",{className:"bg-gradient-to-br from-slate-900 to-indigo-950 rounded-3xl p-1 shadow-2xl overflow-hidden mb-8",children:s.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-[22px] p-8 flex flex-col lg:flex-row items-center justify-between gap-10",children:[s.jsxs("div",{className:"flex-1 text-left",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-indigo-500 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/30",children:s.jsx("span",{className:"material-symbols-rounded text-white",children:"bolt"})}),s.jsx("h3",{className:"text-2xl font-black text-white tracking-tight",children:"DB   "})]}),s.jsxs("p",{className:"text-indigo-200 text-sm font-medium leading-relaxed max-w-lg mb-8 opacity-80",children:["     . ",s.jsx("br",{}),s.jsx("strong",{children:"  "}),"  ",s.jsx("strong",{children:"  "})," , ",s.jsx("br",{}),"        ."]}),s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"px-3 py-1.5 bg-white/10 rounded-full flex items-center gap-2 border border-white/10",children:[s.jsx("span",{className:"material-symbols-rounded text-emerald-400 text-[16px]",children:"verified"}),s.jsx("span",{className:"text-white text-[10px] font-black uppercase tracking-wider",children:"Safety Vault"})]}),s.jsxs("div",{className:"px-3 py-1.5 bg-white/10 rounded-full flex items-center gap-2 border border-white/10",children:[s.jsx("span",{className:"material-symbols-rounded text-emerald-400 text-[16px]",children:"verified"}),s.jsx("span",{className:"text-white text-[10px] font-black uppercase tracking-wider",children:"Cloud Sync"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl",children:[s.jsxs("div",{className:"bg-white/5 rounded-2xl p-4 border border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-300 text-sm",children:"database"}),s.jsx("span",{className:"text-white/40 text-[10px] font-black uppercase tracking-widest leading-none",children:"  "})]}),s.jsx("div",{className:"text-indigo-100/70 text-[12px] font-mono break-all line-clamp-1",children:f||"  ..."})]}),s.jsxs("div",{className:"bg-white/5 rounded-2xl p-4 border border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"material-symbols-rounded text-emerald-300 text-sm",children:"cloud_sync"}),s.jsx("span",{className:"text-white/40 text-[10px] font-black uppercase tracking-widest leading-none",children:"  "})]}),s.jsx("div",{className:"text-emerald-50/70 text-[12px] font-mono break-all line-clamp-1",children:u||"  "})]})]})]})]}),s.jsxs("div",{className:"flex flex-col gap-6 w-full lg:w-[380px]",children:[s.jsxs("div",{className:"bg-white/10 p-5 rounded-2xl border border-white/10 shadow-inner",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[s.jsx("span",{className:"text-white font-bold text-sm tracking-tight opacity-90",children:"  "}),s.jsx("span",{className:"text-indigo-300 text-[10px] font-black uppercase tracking-widest",children:"Strategy"})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex-1 cursor-pointer group",children:[s.jsx("input",{type:"radio",name:"backupTypeManual",className:"hidden peer",checked:!D,onChange:()=>I(!1)}),s.jsxs("div",{className:"text-center p-3 rounded-xl border border-white/10 bg-white/5 peer-checked:bg-white peer-checked:text-indigo-950 peer-checked:border-white transition-all shadow-sm",children:[s.jsx("div",{className:"text-[10px] font-black uppercase mb-1 opacity-50 tracking-tighter leading-tight",children:"Full Snapshot"}),s.jsx("div",{className:"text-sm font-black text-inherit",children:" "})]})]}),s.jsxs("label",{className:"flex-1 cursor-pointer group",children:[s.jsx("input",{type:"radio",name:"backupTypeManual",className:"hidden peer",checked:D,onChange:()=>I(!0)}),s.jsxs("div",{className:"text-center p-3 rounded-xl border border-white/10 bg-white/5 peer-checked:bg-white peer-checked:text-indigo-950 peer-checked:border-white transition-all shadow-sm",children:[s.jsx("div",{className:"text-[10px] font-black uppercase mb-1 opacity-50 tracking-tighter leading-tight",children:"Incremental Change"}),s.jsx("div",{className:"text-sm font-black text-inherit",children:" "})]})]})]})]}),s.jsx("div",{className:"bg-white/10 p-5 rounded-2xl border border-white/10 shadow-inner -mt-2",children:s.jsxs("label",{className:"flex items-center justify-between cursor-pointer group",children:[s.jsxs("div",{className:"flex flex-col text-left",children:[s.jsx("span",{className:"text-white font-bold text-sm tracking-tight opacity-90",children:"  (Gzip)"}),s.jsx("span",{className:"text-indigo-300 text-[10px] font-black uppercase tracking-widest mt-1",children:"   "})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer",checked:O,onChange:()=>P(!O)}),s.jsx("div",{className:"w-11 h-6 bg-white/20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-500 shadow-inner"})]})]})}),s.jsxs("button",{onClick:U,disabled:c,className:"h-20 bg-white text-indigo-950 font-black text-xl rounded-2xl shadow-[0_20px_40px_-15px_rgba(0,0,0,0.5)] hover:shadow-indigo-500/20 hover:-translate-y-1 active:scale-[0.98] transition-all flex items-center justify-center gap-4 group disabled:opacity-50 disabled:translate-y-0",children:[s.jsx("span",{className:"material-symbols-rounded text-3xl group-hover:rotate-12 transition-transform",children:"cloud_upload"}),"DB   "]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"premium-card bg-white p-7 rounded-3xl border border-slate-200 shadow-sm flex items-center justify-between group hover:border-indigo-200 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:"w-14 h-14 bg-orange-50 text-orange-600 rounded-2xl flex items-center justify-center group-hover:bg-orange-600 group-hover:text-white transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-[32px]",children:"settings_backup_restore"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("h4",{className:"text-lg font-bold text-slate-800 tracking-tight",children:"  "}),s.jsx("p",{className:"text-[13px] text-slate-500 leading-tight",children:"     ."})]})]}),s.jsx("button",{onClick:F,className:"px-7 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl text-sm font-black transition-all",children:" "})]}),s.jsxs("div",{className:"premium-card bg-white p-7 rounded-3xl border border-slate-200 shadow-sm flex items-center justify-between group hover:border-emerald-200 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:"w-14 h-14 bg-emerald-50 text-emerald-600 rounded-2xl flex items-center justify-center group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-[32px]",children:"architecture"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("h4",{className:"text-lg font-bold text-slate-800 tracking-tight",children:" "}),s.jsx("p",{className:"text-[13px] text-slate-500 leading-tight",children:"      "})]})]}),s.jsx("button",{onClick:W,className:"px-7 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl text-sm font-black transition-all",children:""})]}),s.jsxs("div",{className:"premium-card bg-white p-7 rounded-3xl border border-slate-200 shadow-sm flex items-center justify-between group hover:border-rose-200 transition-colors col-span-1 lg:col-span-2 xl:col-span-1",children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:"w-14 h-14 bg-rose-50 text-rose-600 rounded-2xl flex items-center justify-center group-hover:bg-rose-600 group-hover:text-white transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-[32px]",children:"history_toggle_off"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("h4",{className:"text-lg font-bold text-slate-800 tracking-tight",children:"  "}),s.jsx("p",{className:"text-[13px] text-slate-500 leading-tight",children:"  (6 ) "})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>K(6),className:"px-4 py-3 bg-slate-50 hover:bg-rose-50 text-slate-600 rounded-xl text-[12px] font-black transition-all border border-slate-100",children:"6"}),s.jsx("button",{onClick:()=>K(12),className:"px-4 py-3 bg-slate-50 hover:bg-rose-600 text-slate-600 hover:text-white rounded-xl text-[12px] font-black transition-all border border-slate-100",children:"1"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-5 gap-8 items-stretch pt-4",children:[s.jsxs("div",{className:"xl:col-span-2 flex flex-col gap-8",children:[s.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-[28px]",children:"folder_managed"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"   "}),s.jsx("p",{className:"text-[13px] text-slate-500 italic",children:"OneDrive, USB  ."})]})]}),s.jsxs("div",{className:"flex flex-col gap-4 mt-auto",children:[s.jsx("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100 font-mono text-xs text-slate-500 break-all text-left min-h-[50px] flex items-center",children:u||"   ."}),s.jsxs("button",{onClick:ee,className:"w-full py-3.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl text-sm font-bold flex items-center justify-center gap-2 shadow-lg shadow-indigo-100",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"drive_file_move"}),"  "]})]})]}),s.jsxs("div",{className:"bg-slate-900 rounded-3xl p-8 text-white relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 rounded-full -translate-y-1/2 translate-x-1/2 blur-2xl group-hover:bg-indigo-500/20 transition-all"}),s.jsxs("div",{className:"relative flex gap-5",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-400 text-3xl",children:"verified_user"}),s.jsxs("div",{className:"text-left",children:[s.jsx("h4",{className:"font-black text-indigo-100 text-lg mb-2 tracking-tight",children:"   "}),s.jsxs("p",{className:"text-[12px] text-slate-400 font-medium leading-relaxed mb-4",children:["    ,      ",s.jsx("b",{children:"      "}),"  .gz  ."]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"text-[10px] text-indigo-300 font-black uppercase opacity-60",children:"Gzip-JSON"}),s.jsx("div",{className:"text-[10px] text-indigo-300 font-black uppercase opacity-60",children:"AES-Compatible"})]})]})]})]})]}),s.jsxs("div",{className:"xl:col-span-3 bg-white p-8 rounded-3xl shadow-sm border border-slate-200 flex flex-col min-h-[500px]",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-amber-50 text-amber-600 rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-[28px]",children:"order_approve"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"  "}),s.jsx("p",{className:"text-[13px] text-slate-500",children:" 90   ."})]})]}),s.jsx("button",{onClick:$,className:"w-10 h-10 rounded-full hover:bg-slate-100 flex items-center justify-center text-slate-400 hover:text-indigo-600 transition-colors",children:s.jsx("span",{className:`material-symbols-rounded text-2xl ${c?"animate-spin":""}`,children:"refresh"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar border border-slate-100 rounded-2xl",children:s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-slate-50/80 backdrop-blur-md z-[1]",children:s.jsxs("tr",{className:"border-b border-slate-100",children:[s.jsx("th",{className:"p-4 text-left font-black text-slate-500 text-[11px] uppercase tracking-widest",children:"Type"}),s.jsx("th",{className:"p-4 text-left font-black text-slate-500 text-[11px] uppercase tracking-widest",children:"Time"}),s.jsx("th",{className:"p-4 text-right font-black text-slate-500 text-[11px] uppercase tracking-widest",children:"Action"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:o.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"3",className:"p-20 text-center text-slate-300 font-bold italic",children:"   ."})}):o.map(re=>s.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[s.jsx("td",{className:"p-4 text-left",children:s.jsx("span",{className:`px-2.5 py-1 rounded-md text-[10px] font-black tracking-tight ${re.backup_type===""?"bg-emerald-50 text-emerald-700":"bg-amber-50 text-amber-700"}`,children:re.backup_type||""})}),s.jsx("td",{className:"p-4 text-left font-bold text-slate-600 text-sm",children:re.created_at}),s.jsx("td",{className:"p-4 text-right",children:s.jsx("button",{onClick:()=>ne(re),className:"px-5 py-1.5 bg-indigo-50 hover:bg-indigo-600 text-indigo-600 hover:text-white rounded-lg text-xs font-black transition-all",children:""})})]},re.path))})]})})]})]})]}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                    .custom-scrollbar::-webkit-scrollbar { width: 8px; height: 8px; }
                    .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
                    .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
                    .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }
                `}})]})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[i?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Sc,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:i?"  ...":"  ..."})]})})},BV=[{id:"mushroom",name:"  (/)",description:",     .",details:[" : (1kg/2kg), , ",": (1kg/2kg), , ","BOM:  1kg   ",": 1~3 , , "],icon:$H,color:"indigo",active:!0},{id:"strawberry",name:" ",description:" /   .",details:[" : (/),  ",": , ,  ","BOM:  ,  ",": , , "],icon:G8,color:"rose",active:!0},{id:"potato",name:"  ()",description:",       .",details:[" : (/), ",": (10kg/5kg), ","BOM:     ",":  , , "],icon:one,color:"amber",active:!0},{id:"shinemuscat",name:" ",description:"()      .",details:[" : (/), ",":  (2kg), , ","BOM:  2kg  ",": , , "],icon:G8,color:"lime",active:!0},{id:"apple",name:"  ()",description:"()       .",details:[" : (/), ",":  (5kg), ,  ","BOM:  5kg   ",":  ,  , "],icon:H8,color:"red",active:!0},{id:"tomato",name:" ",description:"/   .",details:[" : , ",": , ,  ","BOM:   ",": , , "],icon:H8,color:"orange",active:!0}],MDe=({isOpen:a,onClose:e,onConfirm:t,preset:r,data:n,loading:i})=>a?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:e}),s.jsxs("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-white rounded-[2.5rem] shadow-2xl shadow-indigo-500/10 flex flex-col overflow-hidden animate-in zoom-in-95 duration-300 border border-slate-100",children:[s.jsxs("div",{className:"p-8 pb-4 shrink-0 flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl bg-${r.color}-50 flex items-center justify-center text-${r.color}-600`,children:s.jsx(r.icon,{size:28})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:`w-4 h-1 bg-${r.color}-500 rounded-full`}),s.jsx("span",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Preset Preview"})]}),s.jsxs("h2",{className:"text-2xl font-black text-slate-700 tracking-tight",children:[r.name,"  "]})]})]}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-xl transition-colors text-slate-400",children:s.jsx(js,{size:24})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-8 pb-8 custom-scrollbar",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4 px-1",children:[s.jsx(mc,{size:18,className:"text-indigo-500"}),s.jsxs("h3",{className:"font-black text-slate-700",children:["   (",n.products.length,")"]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:n.products.map((o,l)=>s.jsxs("div",{className:"bg-slate-50 border border-slate-100 p-3 rounded-2xl flex items-center justify-between group hover:bg-white hover:border-indigo-100 transition-all",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-black text-slate-700",children:o.name}),s.jsxs("div",{className:"text-[10px] font-bold text-slate-400",children:[o.specification||"-"," | ",o.category||"-"]})]}),s.jsxs("div",{className:"text-xs font-black text-indigo-600",children:[o.price.toLocaleString(),""]})]},l))})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4 px-1",children:[s.jsx(B_,{size:18,className:"text-rose-500"}),s.jsxs("h3",{className:"font-black text-slate-700",children:["/  (",n.spaces.length,")"]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.spaces.map((o,l)=>s.jsxs("div",{className:"bg-slate-50 border border-slate-100 px-3 py-1.5 rounded-xl text-[10px] font-black text-slate-500",children:[o.name," ",s.jsxs("span",{className:"text-[8px] opacity-60 ml-1",children:["(",o.space_type,")"]})]},l))})]})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4 px-1",children:[s.jsx(Eae,{size:18,className:"text-amber-500"}),s.jsx("h3",{className:"font-black text-slate-700",children:"  (BOM)"})]}),s.jsx("div",{className:"space-y-3",children:n.boms.map((o,l)=>s.jsxs("div",{className:"bg-slate-900 text-white p-4 rounded-3xl relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:scale-110 transition-transform",children:s.jsx(YC,{size:40})}),s.jsx("div",{className:"text-[10px] font-black text-indigo-400 mb-1 uppercase tracking-wider",children:"Production BOM"}),s.jsx("div",{className:"font-black text-lg mb-3 tracking-tight",children:o.product_name}),s.jsx("div",{className:"space-y-1.5",children:o.materials.map((c,d)=>s.jsxs("div",{className:"flex items-center justify-between text-xs font-bold text-slate-400",children:[s.jsxs("span",{children:[" ",c.material_name]}),s.jsxs("span",{className:"text-white",children:["x",c.ratio]})]},d))})]},l))})]})})]})}),s.jsxs("div",{className:"p-8 bg-slate-50 border-t border-slate-100 flex items-center justify-between shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[s.jsx(XA,{size:16}),s.jsx("span",{className:"text-xs font-bold",children:"  /   ."})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:e,className:"px-6 h-12 rounded-xl font-black text-sm text-slate-400 hover:bg-slate-200 transition-colors",children:""}),s.jsxs("button",{onClick:t,disabled:i,className:`
                                h-12 px-8 rounded-xl font-black text-sm flex items-center gap-2 shadow-lg transition-all active:scale-95
                                ${i?"bg-slate-300":`bg-${r.color}-600 hover:bg-${r.color}-500 text-white shadow-${r.color}-200`}
                            `,children:[i?s.jsx(Nv,{size:18,className:"animate-spin"}):s.jsx(ere,{size:18}),"  "]})]})]})]})]}):null,EDe=({isOpen:a,onClose:e,onSave:t,loading:r})=>{const[n,i]=H.useState(""),[o,l]=H.useState("");return a?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:e}),s.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-[2rem] shadow-2xl p-8 animate-in zoom-in-95 duration-300",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:s.jsx(rs,{size:24})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-black text-slate-700",children:"   "}),s.jsx("p",{className:"text-xs font-bold text-slate-400",children:"    ."})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:" "}),s.jsx("input",{type:"text",value:n,onChange:c=>i(c.target.value),placeholder:"    A",className:"w-full h-12 px-4 bg-slate-50 border border-slate-100 rounded-xl text-sm font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:" ()"}),s.jsx("textarea",{value:o,onChange:c=>l(c.target.value),placeholder:" 5, BOM 3 ",className:"w-full h-24 px-4 py-3 bg-slate-50 border border-slate-100 rounded-xl text-sm font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all resize-none"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-8",children:[s.jsx("button",{onClick:e,className:"flex-1 h-12 rounded-xl font-black text-sm text-slate-400 hover:bg-slate-50 transition-colors",children:""}),s.jsxs("button",{onClick:()=>t({name:n,description:o}),disabled:!n.trim()||r,className:"flex-[2] h-12 bg-indigo-600 text-white rounded-xl font-black text-sm shadow-lg shadow-indigo-200 hover:bg-indigo-500 disabled:bg-slate-200 disabled:shadow-none transition-all flex items-center justify-center gap-2",children:[r?s.jsx(Nv,{size:18,className:"animate-spin"}):s.jsx(yi,{size:18}),""]})]})]})]}):null},DDe=()=>{const a=Fn(),{showAlert:e,showConfirm:t}=Na(),{isAuthorized:r,checkAdmin:n,isVerifying:i}=Oc(),[o,l]=H.useState(!1),[c,d]=H.useState(null),[u,h]=H.useState(!1),[f,p]=H.useState(!1),[g,b]=H.useState(null),[w,_]=H.useState([]),[k,T]=H.useState(""),D=vr.useRef(!1);vr.useEffect(()=>{if(D.current)return;D.current=!0,(async()=>await n()||a("/"))()},[n,a]);const I=async()=>{try{const J=await pt("get_custom_presets");_(J.map(U=>({id:`custom_${U.preset_id}`,name:U.name,description:U.description||"   .",details:[`${U.preset_data.products.length} `,`${U.preset_data.boms.length} `,`${U.preset_data.spaces.length} `],icon:XH,color:"slate",active:!0,isCustom:!0,dbId:U.preset_id})))}catch(J){console.error(J)}};vr.useEffect(()=>{r&&I()},[r]);const O=async({name:J,description:U})=>{l(!0);try{await pt("save_current_as_preset",{name:J,description:U}),p(!1),await e(" ","    ."),I()}catch(F){console.error(F),await e("","   : "+F)}finally{l(!1)}},P=async(J,U)=>{if(J.stopPropagation(),await t(" ","    ?")){l(!0);try{await pt("delete_custom_preset",{presetId:U}),I(),c===`custom_${U}`&&d(null)}catch(F){console.error(F),await e("","   .")}finally{l(!1)}}},V=async()=>{if(c){l(!0);try{const J=await pt("get_preset_data",{presetType:c});b(J),h(!0)}catch(J){console.error(J),await e("","    : "+J)}finally{l(!1)}}},G=async()=>{l(!0);try{await pt("apply_preset",{presetType:c}),h(!1),await e(" ","   ."),a("/settings/product-list")}catch(J){console.error(J),await e("","   : "+J)}finally{l(!1)}},Q=async()=>{if(k!==""){e(" ","''  .");return}if(await t("   ",`    ?
          .

(     .)`)){l(!0);try{const J=await pt("reset_database");await e(" ",J),T(""),I()}catch(J){e(" ",J)}finally{l(!1)}}},ae=[...BV,...w].find(J=>J.id===c);return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-8 pb-4 shrink-0",children:s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"System Init & Reset"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["    ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl tracking-normal",children:"Factory Reset"})]}),s.jsx("p",{className:"text-slate-400 text-xs font-bold mt-2 ml-1",children:"     ,      ."})]}),s.jsxs("button",{onClick:()=>p(!0),className:"group flex items-center gap-2 bg-white px-5 py-3 rounded-2xl border border-slate-100 shadow-sm hover:border-indigo-100 hover:shadow-indigo-100/20 transition-all active:scale-95",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center text-indigo-600 group-hover:scale-110 transition-transform",children:s.jsx(rs,{size:18})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"Backup config"}),s.jsx("div",{className:"text-xs font-black text-slate-700",children:"  "})]})]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-6 lg:px-8 min-[2000px]:px-12 pb-12",children:[w.length>0&&s.jsxs("div",{className:"mt-8 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6 px-1",children:[s.jsx(Vx,{size:18,className:"text-indigo-500"}),s.jsx("h2",{className:"text-lg font-black text-slate-700",children:"  "})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 max-w-7xl",children:w.map(J=>s.jsxs("div",{onClick:()=>d(J.id),className:`
                                        relative rounded-[2.5rem] p-8 border-2 transition-all cursor-pointer group
                                        ${c===J.id?"border-indigo-500 bg-white ring-4 ring-indigo-500/10 shadow-xl shadow-indigo-500/20 transform scale-[1.02]":"border-slate-100 bg-white hover:border-slate-200 hover:shadow-xl hover:shadow-slate-200/50 hover:-translate-y-1"}
                                    `,children:[s.jsx("div",{className:`
                                        w-16 h-16 rounded-3xl flex items-center justify-center mb-6 text-2xl shadow-lg transition-transform group-hover:rotate-6
                                        bg-slate-50 text-indigo-600 shadow-indigo-100
                                    `,children:s.jsx(J.icon,{size:32,strokeWidth:2.5})}),s.jsx("h3",{className:"text-xl font-black text-slate-700 mb-2 truncate pr-10",children:J.name}),s.jsx("p",{className:"text-sm font-bold text-slate-400 leading-relaxed mb-6 min-h-[40px]",children:J.description}),s.jsx("div",{className:"space-y-3 mb-4",children:J.details.map((U,F)=>s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500",children:[s.jsx(yi,{size:14,className:"text-indigo-500"}),U]},F))}),s.jsx("button",{onClick:U=>P(U,J.dbId),className:"absolute top-6 right-6 p-2 rounded-xl text-slate-300 hover:text-rose-500 hover:bg-rose-50 transition-all opacity-0 group-hover:opacity-100",children:s.jsx(al,{size:18})}),c===J.id&&s.jsxs("div",{className:"absolute bottom-6 right-8 px-3 py-1 bg-indigo-100 text-indigo-600 text-[10px] font-black rounded-lg uppercase tracking-wide flex items-center gap-1",children:[s.jsx(yi,{size:12})," Selected"]})]},J.id))})]}),s.jsxs("div",{className:"mt-12 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6 px-1",children:[s.jsx(YC,{size:18,className:"text-amber-500"}),s.jsx("h2",{className:"text-lg font-black text-slate-700",children:"  "})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 max-w-7xl",children:BV.map(J=>s.jsxs("div",{onClick:()=>J.active&&!o&&d(J.id),className:`
                                    relative rounded-[2.5rem] p-8 border-2 transition-all cursor-pointer group
                                    ${J.active?c===J.id?`border-${J.color}-500 bg-white ring-4 ring-${J.color}-500/10 shadow-xl shadow-${J.color}-500/20 transform scale-[1.02]`:"border-slate-100 bg-white hover:border-slate-200 hover:shadow-xl hover:shadow-slate-200/50 hover:-translate-y-1":"opacity-50 grayscale cursor-not-allowed border-slate-100 bg-slate-50"}
                                `,children:[s.jsx("div",{className:`
                                    w-16 h-16 rounded-3xl flex items-center justify-center mb-6 text-2xl shadow-lg transition-transform group-hover:rotate-6
                                    ${J.active?`bg-${J.color}-50 text-${J.color}-600 shadow-${J.color}-100`:"bg-slate-100 text-slate-400"}
                                `,children:s.jsx(J.icon,{size:32,strokeWidth:2.5})}),s.jsx("h3",{className:"text-xl font-black text-slate-700 mb-2",children:J.name}),s.jsx("p",{className:"text-sm font-bold text-slate-400 leading-relaxed mb-6 min-h-[40px]",children:J.description}),s.jsx("div",{className:"space-y-3 mb-8",children:J.details.map((U,F)=>s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500",children:[s.jsx(yi,{size:14,className:J.active?`text-${J.color}-500`:"text-slate-300"}),U]},F))}),!J.active&&s.jsx("div",{className:"absolute top-6 right-6 px-3 py-1 bg-slate-100 text-slate-400 text-[10px] font-black rounded-lg uppercase tracking-wide",children:"Coming Soon"}),c===J.id&&s.jsxs("div",{className:`absolute top-6 right-6 px-3 py-1 bg-${J.color}-100 text-${J.color}-600 text-[10px] font-black rounded-lg uppercase tracking-wide flex items-center gap-1`,children:[s.jsx(yi,{size:12})," Selected"]})]},J.id))})]}),s.jsx("div",{className:"mt-20 mb-12 border-t border-slate-200 pt-12",children:s.jsxs("div",{className:"flex items-center justify-between gap-8 bg-white rounded-[3rem] border border-rose-100 p-10 shadow-xl shadow-rose-500/5",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-rose-50 text-rose-500 flex items-center justify-center",children:s.jsx(XA,{size:18})}),s.jsx("h2",{className:"text-xl font-black text-slate-800 tracking-tight",children:":  "})]}),s.jsxs("p",{className:"text-sm font-bold text-slate-400 leading-relaxed pr-8",children:["  (, ,  )  .",s.jsx("br",{}),s.jsx("span",{className:"text-rose-600",children:"       ."})]})]}),s.jsxs("div",{className:"w-96 space-y-4",children:[s.jsx("div",{className:"relative",children:s.jsx("input",{type:"text",value:k,onChange:J=>T(J.target.value),placeholder:"'' ",className:"w-full h-14 px-6 bg-slate-50 border border-slate-100 rounded-2xl font-black text-center text-rose-600 placeholder:text-slate-300 focus:outline-none focus:ring-4 focus:ring-rose-500/10 focus:border-rose-200 transition-all"})}),s.jsxs("button",{onClick:Q,disabled:k!==""||o,className:"w-full h-14 bg-rose-600 hover:bg-rose-500 disabled:bg-slate-100 disabled:text-slate-300 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 shadow-lg shadow-rose-200 transition-all active:scale-95",children:[o?s.jsx(Nv,{size:18,className:"animate-spin"}):s.jsx(al,{size:18}),"   "]})]})]})})]}),s.jsxs("div",{className:"bg-white border-t border-slate-100 px-6 lg:px-8 py-6 shrink-0 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-indigo-500 bg-indigo-50 px-4 py-2 rounded-xl border border-indigo-100",children:[s.jsx(YC,{size:16}),s.jsx("p",{className:"text-xs font-bold",children:":   , BOM,       ."})]}),s.jsx("div",{className:"flex gap-4",children:s.jsxs("button",{onClick:V,disabled:!c||o,className:`
                            h-12 px-8 rounded-xl font-black text-sm flex items-center gap-2 shadow-lg transition-all
                            ${!c||o?"bg-slate-100 text-slate-300 cursor-not-allowed shadow-none":"bg-slate-800 hover:bg-slate-700 text-white shadow-slate-200 active:scale-95"}
                        `,children:[o?s.jsx(Nv,{size:18,className:"animate-spin"}):s.jsx(mc,{size:18})," "]})})]}),s.jsx(EDe,{isOpen:f,onClose:()=>p(!1),onSave:O,loading:o}),g&&s.jsx(MDe,{isOpen:u,onClose:()=>h(!1),onConfirm:G,preset:ae,data:g,loading:o})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[i?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Sc,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:i?"  ...":"  ..."})]})})},zV=[{id:"default",name:"/ ",icon:"Campaign",title:"/  "},{id:"repurchase",name:" ",icon:"RotateCcw",title:"  "},{id:"churn",name:"  ",icon:"Shield",title:"    "},{id:"shipping_receipt",name:":  ",icon:"Clock",title:"   "},{id:"shipping_paid",name:":  ",icon:"CheckCircle2",title:"   "},{id:"shipping_done",name:":  ",icon:"Package",title:" /  "}],IDe={Campaign:jre,RotateCcw:Fre,Shield:qre,Clock:_v,CheckCircle2:yi,Package:mc},RDe=()=>{const a=Fn(),{showAlert:e,showConfirm:t}=Na(),{isAuthorized:r,checkAdmin:n,isVerifying:i}=Oc(),[o,l]=H.useState(!1),[c,d]=H.useState("default"),[u,h]=H.useState({}),f=vr.useRef(!1);H.useEffect(()=>{if(f.current)return;f.current=!0,(async()=>await n()||a("/"))()},[]),H.useEffect(()=>{r&&p()},[r]);const p=async()=>{try{const I=await pt("get_message_templates");h(I||{})}catch(I){console.error("Failed to load templates:",I),h({default:[", ${name}! Mycelium. "],repurchase:["${name},     ? "],churn:["${name}, !  . "],shipping_receipt:["  .     ! "],shipping_paid:[" .   . "],shipping_done:[" !  . "]})}},g=async()=>{if(await t(" ","   ?")){l(!0);try{await pt("save_message_templates",{templates:u}),await e(" ","   .")}catch(O){e(" ",O)}finally{l(!1)}}},b=async()=>{if(await t(" ","    ?    .")){l(!0);try{const O=await pt("reset_message_templates");h(O),e(" ","  .")}catch(O){e(" ",O)}finally{l(!1)}}},w=()=>{const I={...u};I[c]||(I[c]=[]),I[c].push("${name}, ! Mycelium."),h(I)},_=I=>{const O={...u};O[c].splice(I,1),h(O)},k=(I,O)=>{const P={...u};P[c][I]=O,h(P)},T=zV.find(I=>I.id===c),D=u[c]||[];return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative",children:[s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pt-8 pb-8 overflow-hidden",children:s.jsxs("div",{className:"max-w-6xl mx-auto h-full flex flex-col",children:[s.jsxs("div",{className:"flex gap-6 items-end mb-4",children:[s.jsxs("div",{className:"w-72 px-4 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Messaging"})]}),s.jsx("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:" "})]}),s.jsxs("div",{className:"flex-1 flex justify-end gap-3 px-2",children:[s.jsxs("button",{onClick:b,className:"h-10 px-5 bg-white border border-slate-200 text-slate-500 hover:text-slate-700 hover:bg-slate-50 rounded-xl font-black text-xs flex items-center gap-2 transition-all active:scale-[0.95] shadow-sm",children:[s.jsx(Vx,{size:15})," "]}),s.jsxs("button",{onClick:g,disabled:o,className:"h-10 px-5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-indigo-100 transition-all active:scale-[0.95]",children:[s.jsx(rs,{size:15}),"  "]})]})]}),s.jsxs("div",{className:"flex-1 flex gap-6 overflow-hidden",children:[s.jsxs("div",{className:"w-72 bg-white rounded-[2rem] border border-slate-200 shadow-xl shadow-slate-200/50 p-6 flex flex-col ring-1 ring-slate-900/5",children:[s.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-6 px-2 text-left",children:" "}),s.jsx("div",{className:"space-y-1.5 overflow-y-auto custom-scrollbar pr-1",children:zV.map(I=>{const O=IDe[I.icon]||jv,P=c===I.id;return s.jsxs("button",{onClick:()=>d(I.id),className:`w-full group flex items-center gap-3 px-4 py-3.5 rounded-2xl transition-all text-left ${P?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-transparent text-slate-500 hover:bg-slate-50 hover:text-indigo-600"}`,children:[s.jsx("div",{className:`p-2 rounded-xl transition-all ${P?"bg-white/20":"bg-slate-50 group-hover:bg-indigo-50"}`,children:s.jsx(O,{size:18})}),s.jsx("span",{className:"font-bold text-sm tracking-tight flex-1",children:I.name}),s.jsx(s2,{size:14,className:`opacity-0 group-hover:opacity-40 transition-opacity ${P&&"hidden"}`})]},I.id)})})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-[2rem] border border-slate-200 shadow-xl shadow-slate-200/50 flex flex-col ring-1 ring-slate-900/5 overflow-hidden",children:[s.jsxs("div",{className:"px-8 py-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/40",children:[s.jsxs("div",{className:"flex flex-col text-left",children:[s.jsx("h3",{className:"text-xl font-black text-slate-700 tracking-tight",children:T?.title}),s.jsxs("p",{className:"text-[11px] font-bold text-slate-400 mt-0.5",children:["  $","{name}","  ."]})]}),s.jsxs("button",{onClick:w,className:"h-10 px-5 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 rounded-xl font-black text-[11px] flex items-center gap-2 transition-all active:scale-[0.95]",children:[s.jsx(So,{size:16}),"  "]})]}),s.jsx("div",{className:"flex-1 p-8 overflow-y-auto custom-scrollbar space-y-6",children:D.length>0?D.map((I,O)=>s.jsxs("div",{className:"group relative bg-slate-50/50 border border-slate-200 rounded-3xl p-6 transition-all hover:bg-white hover:shadow-xl hover:shadow-slate-200/30 hover:-translate-y-0.5",children:[s.jsx("button",{onClick:()=>_(O),className:"absolute -top-2 -right-2 w-8 h-8 rounded-full bg-rose-500 text-white shadow-lg opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center hover:bg-rose-600 transform hover:scale-110 active:scale-90 z-10",children:s.jsx(al,{size:14})}),s.jsx("div",{className:"relative",children:s.jsx("textarea",{value:I,onChange:P=>k(O,P.target.value),className:"w-full min-h-[120px] bg-transparent border-none p-0 focus:ring-0 font-bold text-slate-600 leading-relaxed text-base resize-none",placeholder:"  ... (  ${name} )"})}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-slate-300 uppercase tracking-widest",children:[s.jsx(xne,{size:12}),"Template Item #",O+1]}),s.jsxs("div",{className:"px-3 py-1 bg-white rounded-lg border border-slate-200 shadow-sm",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 mr-1.5 uppercase tracking-widest text-[9px]",children:"Characters"}),s.jsx("span",{className:`text-xs font-black ${I.length>80?"text-orange-500":"text-indigo-600"}`,children:I.length})]})]})]},O)):s.jsxs("div",{className:"h-full flex flex-col items-center justify-center py-20 opacity-40",children:[s.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-[2rem] flex items-center justify-center mb-6",children:s.jsx(jv,{size:32})}),s.jsx("p",{className:"font-black text-slate-400 text-sm",children:"  ."}),s.jsx("p",{className:"text-xs font-bold text-slate-300 mt-1",children:" [ ]    ."})]})})]})]})]})}),s.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar {
                    width: 6px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: transparent;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: #e2e8f0;
                    border-radius: 10px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                    background: #cbd5e1;
                }
            `})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[i?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Sc,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:i?"  ...":"  ..."})]})})},LDe=()=>{const a=Fn(),{showAlert:e}=Na(),{isAuthorized:t,checkAdmin:r,isVerifying:n}=Oc(),[i,o]=H.useState([]),[l,c]=H.useState(""),[d,u]=H.useState(""),[h,f]=H.useState(window.location.port||"3000"),[p,g]=H.useState(!1),[b,w]=H.useState(!0),[_,k]=H.useState({remote_ip:"",domain_name:"",access_pin:"",use_pin:!1}),[T,D]=H.useState("local"),I=vr.useRef(!1);H.useEffect(()=>{if(I.current)return;I.current=!0,(async()=>await r()?O():a("/"))()},[r,a]);const O=async()=>{w(!0);try{const[ae,J]=await Promise.all([Pa("get_local_ip_command").catch(()=>["127.0.0.1"]),Pa("get_mobile_config").catch(()=>({remote_ip:"",domain_name:"",access_pin:"",use_pin:!1}))]);o(ae);const U=ae.find(ee=>ee.startsWith("100."))||"";u(U);const F=ae.filter(ee=>ee!=="127.0.0.1"&&!ee.startsWith("100.")&&!ee.startsWith("169.254.")),W=F.find(ee=>ee.startsWith("192.168."))||F.find(ee=>ee.startsWith("10."))||F.find(ee=>ee.startsWith("172."))||F[0]||"127.0.0.1";c(W);const K=J||{remote_ip:"",domain_name:"",access_pin:"",use_pin:!1};U&&!K.remote_ip&&(K.remote_ip=U),k(K)}catch(ae){console.error("Failed to load mobile settings:",ae),c("127.0.0.1")}finally{w(!1)}},P=async()=>{g(!0);try{await Pa("save_mobile_config",{config:_}),e(" ","    .")}catch(ae){console.error(ae),e(" ","    .")}finally{g(!1)}},V=ae=>{if(!ae||ae==="127.0.0.1")return null;const J=ae.split(":")[0],U=h?`:${h}`:"";return`http://${J}${U}/mobile-dashboard`},G=V(l),Q=V(_.domain_name)||V(_.remote_ip),$=T==="local"?G:Q;return t?b?s.jsx("div",{className:"flex items-center justify-center h-full bg-slate-50",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(Ed,{className:"w-8 h-8 text-indigo-500 animate-spin"}),s.jsx("p",{className:"text-slate-400 font-bold text-sm",children:"   ..."})]})}):s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] animate-in fade-in duration-700 overflow-y-auto custom-scrollbar font-sans",children:[s.jsxs("div",{className:"max-w-5xl mx-auto w-full px-6 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-24",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Connected Farm Ecosystem"})]}),s.jsxs("h1",{className:"text-2xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-base",children:"Mobile Center"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 mb-12",children:[s.jsxs("div",{className:"lg:col-span-7 bg-white p-1 rounded-[2.5rem] shadow-2xl shadow-indigo-100/50 border border-slate-100 flex flex-col relative overflow-hidden group",children:[s.jsxs("div",{className:"p-10 flex flex-col items-center justify-center text-center relative z-10",children:[s.jsxs("div",{className:"inline-flex p-1.5 bg-slate-100/80 backdrop-blur-sm rounded-2xl mb-10 border border-slate-200/50",children:[s.jsx("button",{onClick:()=>D("local"),className:`px-6 py-2.5 text-xs font-black rounded-xl transition-all duration-300 ${T==="local"?"bg-white shadow-lg text-indigo-600 ring-1 ring-slate-200/50":"text-slate-400 hover:text-slate-600"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(kv,{size:16}),"  (Wi-Fi)"]})}),s.jsx("button",{onClick:()=>D("remote"),className:`px-6 py-2.5 text-xs font-black rounded-xl transition-all duration-300 ${T==="remote"?"bg-white shadow-lg text-indigo-600 ring-1 ring-slate-200/50":"text-slate-400 hover:text-slate-600"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(Mg,{size:16}),"  (Tailscale)"]})})]}),s.jsxs("div",{className:"relative mb-8 group/qr",children:[s.jsx("div",{className:"absolute -inset-4 bg-gradient-to-tr from-indigo-500/10 to-purple-500/10 blur-2xl rounded-full scale-0 group-hover/qr:scale-100 transition-transform duration-700"}),$?s.jsxs("div",{className:"relative p-8 bg-white rounded-[2.5rem] shadow-xl border border-slate-50 ring-1 ring-slate-100 group-hover/qr:translate-y-[-4px] transition-transform duration-500 cursor-pointer",onClick:()=>{navigator.clipboard.writeText($),e(" ","   .")},children:[s.jsx(vb,{value:$,size:220,level:"H",includeMargin:!0,className:"relative z-10"}),s.jsx("div",{className:"absolute bottom-4 right-4 bg-indigo-600 text-white p-2 rounded-xl shadow-lg shadow-indigo-200",children:s.jsx(f0,{size:18})})]},$):s.jsxs("div",{className:"w-[300px] h-[300px] bg-slate-50 rounded-[2.5rem] flex flex-col items-center justify-center text-slate-300 gap-4 border-2 border-dashed border-slate-200",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Mg,{size:48}),s.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-rose-500 rounded-full border-2 border-white animate-pulse"})]}),s.jsxs("div",{className:"px-12 text-center",children:[s.jsx("span",{className:"text-sm font-black text-slate-400",children:"  "}),s.jsx("br",{}),s.jsx("span",{className:"text-[10px] font-bold text-slate-400 leading-tight block mt-2",children:T==="local"?`  IP  .
   .`:` IP(Tailscale)  .
   .`})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-black text-slate-800 text-lg tracking-tight",children:T==="local"?"  QR ":"  QR "}),s.jsx("p",{className:"text-slate-400 font-bold max-w-sm mx-auto leading-relaxed",children:T==="local"?" Wi-Fi        .":"Tailscale VPN       ."})]}),s.jsxs("div",{className:"mt-10 bg-slate-50 px-8 py-4 rounded-[1.5rem] border border-slate-100 flex items-center justify-between gap-4 w-full max-w-lg group/url hover:bg-white hover:shadow-md transition-all duration-300",children:[s.jsxs("div",{className:"flex flex-col items-start gap-1 min-w-0",children:[s.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Connect URL"}),s.jsx("code",{className:"text-indigo-600 font-black tracking-wide text-xs truncate w-full",children:$||"  "})]}),s.jsx("div",{className:"shrink-0 w-8 h-8 rounded-lg bg-white flex items-center justify-center text-slate-300 group-hover/url:text-indigo-500 transition-colors shadow-sm",children:s.jsx(WA,{size:16})})]})]}),s.jsx("div",{className:"absolute -bottom-24 -right-24 w-64 h-64 bg-indigo-500/5 blur-[100px] rounded-full"}),s.jsx("div",{className:"absolute -top-24 -left-24 w-64 h-64 bg-purple-500/5 blur-[100px] rounded-full"})]}),s.jsxs("div",{className:"lg:col-span-5 space-y-8",children:[s.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-xl border border-slate-100 relative overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h3",{className:"font-black text-slate-800 flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 text-emerald-600 flex items-center justify-center",children:s.jsx(yi,{size:18})})," "]}),s.jsxs("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 text-[10px] font-black rounded-full border border-emerald-100 flex items-center gap-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"ACTIVE"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-400 font-bold",children:" IP "}),s.jsx("select",{value:l,onChange:ae=>c(ae.target.value),className:"bg-slate-50 border border-slate-200 rounded-lg px-2 py-1 text-xs font-black text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/20",children:i.filter(ae=>!ae.startsWith("100.")&&ae!=="127.0.0.1").length>0?i.filter(ae=>!ae.startsWith("100.")&&ae!=="127.0.0.1").map(ae=>s.jsxs("option",{value:ae,children:[ae," ",ae.startsWith("169.254.")?"()":""]},ae)):s.jsx("option",{value:"127.0.0.1",children:"127.0.0.1"})})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-400 font-bold",children:" "}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:h,onChange:ae=>f(ae.target.value.replace(/[^0-9]/g,"")),className:"w-16 h-8 bg-slate-50 border border-slate-200 rounded-lg text-center text-xs font-black text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500/20"}),s.jsx(Wre,{size:14,className:"text-slate-300"})]})]})]})]}),s.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-xl border border-slate-100 space-y-8 relative",children:[s.jsx("div",{className:"absolute top-0 right-0 p-8 text-slate-50/50 pointer-events-none",children:s.jsx($C,{size:80,strokeWidth:1})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-50 text-orange-600 flex items-center justify-center shadow-inner",children:s.jsx($C,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-black text-slate-800",children:"   "}),s.jsx("p",{className:"text-[11px] text-slate-400 font-bold",children:"    ."})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center px-1",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase tracking-wider",children:"Tailscale IP "}),d&&s.jsx("span",{className:"text-[10px] font-black text-indigo-500 bg-indigo-50 px-2 py-1 rounded-lg flex items-center gap-1 border border-indigo-100",children:""})]}),s.jsx("div",{className:"relative group",children:s.jsx("input",{type:"text",placeholder:"100.xx.xx.xx",className:"w-full h-14 bg-slate-50 border border-transparent rounded-[1.25rem] px-6 text-sm font-bold text-slate-700 placeholder:text-slate-300 focus:bg-white focus:border-indigo-500/30 focus:shadow-lg focus:shadow-indigo-500/5 transition-all text-center tracking-wider",value:_.remote_ip,onChange:ae=>k({..._,remote_ip:ae.target.value})})}),d&&d!==_.remote_ip&&s.jsxs("button",{onClick:()=>k({..._,remote_ip:d}),className:"w-full text-[10px] font-black text-indigo-500 hover:text-indigo-600 bg-indigo-50/50 hover:bg-indigo-50 py-2 rounded-xl transition-all border border-dashed border-indigo-200",children:[" ",d,"  "]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center px-1",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase tracking-wider",children:"Tailscale  "}),s.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-blue-50 text-blue-600 rounded-lg border border-blue-100",children:[s.jsx(Mg,{size:10}),s.jsx("span",{className:"text-[10px] font-black",children:"HTTP "})]})]}),s.jsx("div",{className:"relative group",children:s.jsx("input",{type:"text",placeholder:"..ts.net",className:"w-full h-14 bg-slate-50 border border-transparent rounded-[1.25rem] px-6 text-sm font-bold text-slate-700 placeholder:text-slate-300 focus:bg-white focus:border-purple-500/30 focus:shadow-lg focus:shadow-purple-500/5 transition-all text-center",value:_.domain_name,onChange:ae=>k({..._,domain_name:ae.target.value})})}),s.jsx("p",{className:"px-2 text-[10px] text-slate-400 font-medium italic",children:"*   IP       ."})]}),s.jsxs("div",{className:"p-5 bg-slate-50/80 rounded-[1.5rem] border border-slate-100 flex items-center justify-between group hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl transition-colors ${_.use_pin?"bg-indigo-100 text-indigo-600":"bg-slate-200 text-slate-400"}`,children:s.jsx(Sc,{size:18})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-black text-slate-800",children:" PIN  "}),s.jsx("div",{className:"text-[10px] text-slate-400 font-bold",children:"   "})]})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer",checked:_.use_pin,onChange:ae=>k({..._,use_pin:ae.target.checked})}),s.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),_.use_pin&&s.jsxs("div",{className:"space-y-3 animate-in slide-in-from-top-4 duration-500 ease-out",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 px-1",children:" PIN  (4~6)"}),s.jsx("input",{type:"password",maxLength:6,placeholder:"",className:"w-full h-14 bg-white border-2 border-indigo-500/20 rounded-[1.25rem] px-4 text-center text-2xl font-black tracking-[0.5em] text-indigo-600 placeholder:text-indigo-200 placeholder:tracking-normal focus:border-indigo-500 focus:shadow-xl focus:shadow-indigo-500/10 transition-all",value:_.access_pin,onChange:ae=>k({..._,access_pin:ae.target.value.replace(/[^0-9]/g,"")})})]}),s.jsxs("button",{onClick:P,disabled:p,className:"w-full h-14 bg-gradient-to-r from-indigo-600 to-indigo-700 rounded-[1.25rem] text-white font-black text-sm flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:shadow-indigo-200 active:scale-[0.98] transition-all disabled:opacity-50",children:[p?s.jsx(Ed,{size:20,className:"animate-spin"}):s.jsx(rs,{size:20}),"  "]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"p-8 bg-slate-100/50 rounded-[2.5rem] border border-slate-200/60 flex flex-col md:flex-row gap-6 items-start transition-all hover:bg-white hover:shadow-xl hover:shadow-slate-200/50 group",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white flex items-center justify-center text-indigo-500 shrink-0 shadow-sm group-hover:scale-110 transition-transform duration-500",children:s.jsx(kv,{size:28})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-sm font-black text-slate-700 flex items-center gap-2",children:["  (Local) ",s.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-500 text-[10px] rounded-md uppercase font-black",children:"Wi-Fi Connection"})]}),s.jsxs("p",{className:"text-xs text-slate-500 font-medium leading-relaxed",children:[" (Wi-Fi) PC     . ",s.jsx("br",{}),"  3000   , 'Windows '      ."]})]})]}),s.jsxs("div",{className:"p-8 bg-white rounded-[2.5rem] border border-purple-100 shadow-xl shadow-purple-500/5 flex flex-col gap-8 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-purple-500/5 blur-[80px] rounded-full -mr-20 -mt-20"}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start relative z-10",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-purple-600 flex items-center justify-center text-white shrink-0 shadow-lg shadow-purple-200 group-hover:rotate-6 transition-transform duration-500",children:s.jsx(Mg,{size:28})}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-black text-slate-700 flex items-center gap-2",children:["Tailscale   (Remote) ",s.jsx("span",{className:"px-2 py-0.5 bg-purple-50 text-purple-600 text-[10px] rounded-md uppercase font-black",children:"Secure VPN Access"})]}),s.jsx("p",{className:"text-xs text-slate-500 font-medium leading-relaxed mt-2",children:"Tailscale            ."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pt-2",children:[{step:"01",title:"",desc:"    .",icon:s.jsx(Tf,{size:14}),link:"https://tailscale.com"},{step:"02",title:"PC ",desc:" PC Tailscale  .",icon:null},{step:"03",title:" ",desc:"      .",icon:null},{step:"04",title:" ",desc:" ''   QR  .",icon:null}].map((ae,J)=>s.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100 hover:border-purple-200 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-[10px] font-black text-purple-500",children:ae.step}),ae.icon&&s.jsx("a",{href:ae.link,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-700",children:ae.icon})]}),s.jsx("h5",{className:"text-[11px] font-black text-slate-700 mb-1",children:ae.title}),s.jsx("p",{className:"text-[10px] text-slate-400 font-bold leading-tight",children:ae.desc})]},J))}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50/50 rounded-2xl border border-purple-100/50",children:[s.jsx(bb,{size:16,className:"text-purple-500 shrink-0"}),s.jsx("p",{className:"text-[10px] text-purple-700 font-bold",children:"Tailscale    IP         ."})]})]})]})]})]})]}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .custom-scrollbar::-webkit-scrollbar {
                    width: 6px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: transparent;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: #e2e8f0;
                    border-radius: 10px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                    background: #cbd5e1;
                }
            `}})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[n?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Sc,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:n?"  ...":"  ..."})]})})},ODe=()=>{const a=Fn(),{showAlert:e,showConfirm:t}=Na(),{isAuthorized:r,checkAdmin:n}=Oc(),[i,o]=H.useState([]),[l,c]=H.useState([]),[d,u]=H.useState(!1),[h,f]=H.useState(null),[p,g]=H.useState({sensor_name:"",space_id:null,device_type:"wifi",connection_info:"",is_active:!0}),b=vr.useRef(!1);H.useEffect(()=>{if(b.current)return;b.current=!0,(async()=>await n()||a("/"))()},[n,a]);const w=H.useCallback(async()=>{u(!0);try{const[I,O]=await Promise.all([pt("get_sensors"),pt("get_production_spaces")]);o(I||[]),c(O||[])}catch(I){console.error("Failed to load IoT settings:",I)}finally{u(!1)}},[]);H.useEffect(()=>{r&&w()},[r,w]);const _=I=>{f(I),g({sensor_name:I.sensor_name,space_id:I.space_id,device_type:I.device_type,connection_info:I.connection_info||"",is_active:I.is_active})},k=()=>{f(null),g({sensor_name:"",space_id:null,device_type:"wifi",connection_info:"",is_active:!0})},T=async I=>{if(I.preventDefault(),!p.sensor_name.trim()){e(" ","  .");return}try{await pt("save_sensor",{sensor:{...p,sensor_id:h?h.sensor_id:0,space_id:p.space_id?parseInt(p.space_id):null}}),e(" ",h?"  .":"  ."),k(),w()}catch(O){e(" "," : "+O)}},D=async I=>{if(await t(" ",`[${I.sensor_name}]  ?`))try{await pt("delete_sensor",{sensorId:I.sensor_id}),w(),h?.sensor_id===I.sensor_id&&k()}catch(O){e(" "," : "+O)}};return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-4",children:s.jsx("div",{className:"flex justify-between items-end",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-emerald-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-emerald-600 uppercase",children:"IoT Device Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",children:["IoT   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Integrated Gateway"})]})]})})}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-8 overflow-hidden",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 h-full",children:[s.jsx("div",{className:"lg:col-span-4 flex flex-col gap-6",children:s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 sticky top-0",children:[s.jsxs("div",{className:"px-8 py-6 bg-slate-50/50 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("h3",{className:"font-black text-slate-800 flex items-center gap-2",children:[s.jsx(rx,{size:20,className:"text-emerald-500"}),h?"  ":"  "]}),h&&s.jsx("button",{onClick:k,className:"text-[10px] font-black text-emerald-600 bg-emerald-50 px-3 py-1.5 rounded-lg hover:bg-emerald-100 transition-all",children:" "})]}),s.jsxs("form",{onSubmit:T,className:"p-8 space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:" "}),s.jsx("input",{type:"text",value:p.sensor_name,onChange:I=>g({...p,sensor_name:I.target.value}),placeholder:": 1   ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm ring-1 ring-slate-200 focus:ring-4 focus:ring-emerald-500/10 focus:bg-white transition-all",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:" "}),s.jsxs("select",{value:p.space_id||"",onChange:I=>g({...p,space_id:I.target.value||null}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm ring-1 ring-slate-200",children:[s.jsx("option",{value:"",children:" "}),l.map(I=>s.jsx("option",{value:I.space_id,children:I.space_name},I.space_id))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left text-left",children:" "}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["wifi","usb","virtual"].map(I=>s.jsxs("button",{type:"button",onClick:()=>g({...p,device_type:I}),className:`py-3 rounded-xl border-2 font-black text-[10px] uppercase flex flex-col items-center gap-1 transition-all ${p.device_type===I?"border-emerald-500 bg-emerald-50 text-emerald-600":"border-slate-50 text-slate-400 hover:border-slate-100"}`,children:[I==="wifi"?s.jsx(kv,{size:14}):I==="usb"?s.jsx(Y8,{size:14}):s.jsx(GC,{size:14}),I]},I))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"  (IP/COM)"}),s.jsx("input",{type:"text",value:p.connection_info,onChange:I=>g({...p,connection_info:I.target.value}),placeholder:p.device_type==="wifi"?"192.168.1.100":p.device_type==="usb"?"COM3":"Internal PID",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm ring-1 ring-slate-200"})]}),s.jsxs("button",{type:"submit",className:"w-full h-14 bg-emerald-600 text-white rounded-2xl font-black text-sm shadow-xl shadow-emerald-100 hover:bg-emerald-500 transition-all flex items-center justify-center gap-2",children:[s.jsx(yi,{size:18})," ",h?"  ":"  "]})]})]})}),s.jsx("div",{className:"lg:col-span-8 flex flex-col gap-4",children:s.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden flex flex-col h-full",children:[s.jsx("div",{className:"p-6 border-b border-slate-50 bg-slate-50/30 flex justify-between items-center",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-emerald-50 rounded-2xl flex items-center justify-center text-emerald-600",children:s.jsx(fx,{size:20})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 capitalize tracking-widest",children:"Active Gateways"}),s.jsxs("p",{className:"font-black text-slate-700",children:["  : ",i.length,""]})]})]})}),s.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-white border-b border-slate-100 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"/"}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "}),s.jsx("th",{className:"px-6 py-4 text-right"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:i.map(I=>s.jsxs("tr",{className:"hover:bg-slate-50/50 transition-all group",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-xl flex items-center justify-center ${I.device_type==="wifi"?"bg-blue-50 text-blue-500":I.device_type==="usb"?"bg-amber-50 text-amber-500":"bg-emerald-50 text-emerald-500"}`,children:I.device_type==="wifi"?s.jsx(kv,{size:16}):I.device_type==="usb"?s.jsx(Y8,{size:16}):s.jsx(GC,{size:16})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-black text-slate-700",children:I.sensor_name}),s.jsxs("p",{className:"text-[9px] font-bold text-slate-300 uppercase tracking-tighter",children:[I.device_type," connection"]})]})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(B_,{size:14,className:"text-slate-200"}),s.jsx("span",{className:"text-xs font-bold text-slate-600",children:l.find(O=>O.space_id===I.space_id)?.space_name||""})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("code",{className:"px-2 py-1 bg-slate-100 rounded text-[10px] font-bold text-indigo-500",children:I.connection_info||"N/A"})}),s.jsx("td",{className:"px-6 py-5 text-right",children:s.jsxs("div",{className:"flex gap-1 justify-end opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>_(I),className:"p-2 text-slate-300 hover:text-indigo-600 transition-colors",children:s.jsx(z_,{size:16})}),s.jsx("button",{onClick:()=>D(I),className:"p-2 text-slate-300 hover:text-rose-600 transition-colors",children:s.jsx(al,{size:16})})]})})]},I.sensor_id))})]})})]})})]})})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:"  ..."})]})})},PDe=({fileInputRef:a,onCsvUpload:e})=>s.jsxs("div",{className:"flex justify-between items-end mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Sales Management System"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Reception"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>a.current?.click(),className:"group h-10 px-5 rounded-xl bg-white border border-slate-200 text-slate-600 font-bold hover:border-indigo-500 hover:text-indigo-600 transition-all flex items-center gap-2 shadow-sm text-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg group-hover:scale-110 transition-transform",children:"upload_file"}),"  (CSV)"]}),s.jsx("input",{type:"file",ref:a,onChange:e,className:"hidden",accept:".csv"})]})]}),BDe=({orderDate:a,setOrderDate:e,custSearchRef:t,handleSearchCustomer:r,customer:n})=>s.jsxs("div",{className:"grid grid-cols-12 gap-3 items-stretch",children:[s.jsxs("div",{className:"col-span-2 bg-white rounded-[1.5rem] p-3 border border-slate-100 shadow-sm transition-all hover:shadow-md text-sm",children:[s.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1 block ml-1",children:" "}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"date",value:a,onChange:i=>e(i.target.value),className:"w-full h-10 bg-slate-100 border-slate-200 border rounded-xl font-black text-slate-800 focus:ring-2 focus:ring-indigo-500 transition-all px-3 text-[14px]"})})]}),s.jsxs("div",{className:"col-span-3 bg-white rounded-[1.5rem] p-3 border border-slate-100 shadow-sm transition-all hover:shadow-md text-sm",children:[s.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1 block ml-1",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:t,onKeyDown:i=>i.key==="Enter"&&r(),placeholder:"   ...",className:"w-full h-10 bg-slate-900 border-none rounded-xl text-white placeholder:text-slate-500 font-bold px-4 pr-12 focus:ring-4 focus:ring-indigo-500/20 transition-all text-[14px]"}),s.jsx("button",{onClick:r,className:"absolute right-1.5 top-1.5 bottom-1.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg px-2 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"search"})})]})]}),s.jsxs("div",{className:"col-span-7 bg-white rounded-[1.5rem] p-3 border border-slate-100 shadow-sm transition-all hover:shadow-md relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-24 h-full bg-indigo-50/50 -skew-x-12 translate-x-10 transition-transform group-hover:translate-x-5"}),s.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1 block ml-1",children:"  "}),s.jsx("div",{className:"flex items-center gap-6 h-10 px-1 relative z-10",children:n?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white font-black text-xs",children:n.customer_name[0]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-black text-slate-900 block leading-tight text-sm",children:n.customer_name}),s.jsx("span",{className:"text-[8px] text-slate-400 font-bold uppercase",children:n.customer_id})]})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1 text-slate-500 mb-0.5",children:[s.jsx("span",{className:"material-symbols-rounded text-[12px]",children:"location_on"}),s.jsx("span",{className:"text-[8px] font-black uppercase",children:"  "})]}),s.jsxs("span",{className:"text-xs text-slate-700 font-bold block truncate",children:["[",n.zip_code||"-","] ",n.address_primary," ",n.address_detail]})]}),s.jsxs("div",{className:"shrink-0 text-right",children:[s.jsxs("div",{className:"flex items-center justify-end gap-1 text-indigo-500 mb-0.5",children:[s.jsx("span",{className:"material-symbols-rounded text-[12px]",children:"call"}),s.jsx("span",{className:"text-[8px] font-black uppercase",children:""})]}),s.jsx("span",{className:"text-xs font-black text-slate-900",children:n.mobile_number})]})]}):s.jsxs("div",{className:"flex items-center gap-2 text-slate-600 italic font-black text-xs",children:[s.jsx("span",{className:"material-symbols-rounded animate-pulse text-indigo-500 text-base",children:"fingerprint"}),"      ..."]})})]})]}),zDe=({inputState:a,handleInputChange:e,products:t,addresses:r,prodSelectRef:n,handleAddressSearch:i,handleAddRow:o,editingTempId:l})=>s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-5 shadow-lg border border-slate-200/60 relative mb-3",children:[s.jsxs("div",{className:"absolute top-4 left-6 flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-600 animate-pulse"}),s.jsx("span",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest",children:" "})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-3 mb-4 mt-4",children:[s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase mb-1 block",children:""}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{name:"product",value:a.product,onChange:e,ref:n,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-[14px] font-bold focus:ring-2 focus:ring-indigo-600 transition-all appearance-none px-4",children:[s.jsx("option",{value:"",children:" "}),t.map(c=>s.jsx("option",{value:c.product_name,children:c.product_name},c.product_id))]}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400 text-base",children:"unfold_more"})]})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase text-center mb-1 block",children:""}),s.jsx("input",{name:"spec",value:a.spec,readOnly:!0,className:"w-full h-10 rounded-xl bg-slate-100 border-none text-[14px] text-center font-bold text-slate-500 shadow-inner"})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase text-center mb-1 block",children:""}),s.jsx("input",{type:"number",name:"qty",value:a.qty,onChange:e,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-center font-black focus:ring-2 focus:ring-indigo-600 transition-all text-[14px]"})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase text-right pr-2 mb-1 block",children:""}),s.jsx("input",{name:"price",value:Ve(a.price),onChange:e,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-right font-black pr-3 focus:ring-2 focus:ring-indigo-600 transition-all text-[14px]"})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase text-center mb-1 block",children:"(%)"}),s.jsx("input",{type:"number",name:"discountRate",value:a.discountRate,onChange:e,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-center font-black focus:ring-2 focus:ring-indigo-600 transition-all text-[14px] text-indigo-600 px-0"})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-indigo-600 uppercase text-right pr-2 mb-1 block",children:""}),s.jsx("input",{value:Ve(a.amount),readOnly:!0,className:"w-full h-10 rounded-xl bg-slate-100 border-none text-slate-900 text-right font-black text-[14px] px-4 shadow-inner"})]})]}),s.jsxs("div",{className:"bg-slate-100/50 p-5 rounded-[1.5rem] border border-slate-200 flex flex-col gap-4",children:[s.jsxs("div",{className:"flex gap-4 items-end",children:[s.jsxs("div",{className:"shrink-0 flex items-center gap-3 pr-4 border-r border-slate-200",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-white border border-slate-200 flex items-center justify-center text-slate-500 shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"local_shipping"})}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-black text-slate-700 uppercase tracking-tight block mb-1",children:" "}),s.jsxs("select",{name:"shipType",value:a.shipType,onChange:e,className:"w-48 h-10 rounded-lg border-slate-200 bg-white text-[14px] font-bold text-slate-900 shadow-sm focus:ring-2 focus:ring-indigo-500 px-3 py-1 transition-all",children:[s.jsx("option",{value:"basic",children:" "}),r.map(c=>s.jsx("option",{value:`addr_${c.address_id}`,children:c.is_default?" ":c.address_alias||c.address_primary},c.address_id)),s.jsx("option",{value:"new",children:" "})]})]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-2",children:[s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase block mb-1 ml-1 text-center",children:""}),s.jsx("input",{name:"shipZip",value:a.shipZip,readOnly:!0,onClick:()=>i("input"),className:"w-full h-9 rounded-lg border-slate-100 text-[14px] font-black text-slate-900 text-center bg-slate-100 shadow-sm cursor-pointer"})]}),s.jsxs("div",{className:"col-span-5",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase block mb-1 ml-1",children:"   ( )"}),s.jsx("input",{name:"shipAddr1",value:a.shipAddr1,readOnly:!0,onClick:()=>i("input"),className:"w-full h-9 rounded-lg border-slate-100 text-[14px] font-bold text-slate-900 bg-slate-100 px-2 shadow-sm cursor-pointer"})]}),s.jsxs("div",{className:"col-span-6",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase block mb-1 ml-1",children:"  "}),s.jsx("input",{name:"shipAddr2",value:a.shipAddr2,onChange:e,placeholder:" ,    ",className:"w-full h-9 rounded-lg border-slate-200 bg-slate-100 text-[14px] font-bold text-slate-900 px-3 focus:ring-2 focus:ring-indigo-600 transition-all"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-3 items-end pt-1",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase block mb-1 ml-1",children:"()"}),s.jsx("input",{name:"shipName",value:a.shipName,onChange:e,placeholder:"",className:"w-full h-10 rounded-lg border-slate-200 bg-slate-100 text-[14px] font-bold text-slate-900 px-3 focus:ring-2 focus:ring-indigo-600 transition-all"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase block mb-1 ml-1",children:""}),s.jsx("input",{name:"shipMobile",value:a.shipMobile,onChange:e,placeholder:"010-0000-0000",className:"w-full h-10 rounded-lg border-slate-200 bg-slate-100 text-[14px] font-black text-slate-900 px-3 focus:ring-2 focus:ring-indigo-600 text-center"})]}),s.jsxs("div",{className:"col-span-4",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-indigo-600 uppercase block mb-1 ml-1",children:" "}),s.jsx("input",{name:"shipMemo",value:a.shipMemo,onChange:e,placeholder:"  ...",className:"w-full h-10 rounded-lg border-slate-200 bg-slate-100 text-[14px] font-black text-black px-3 focus:ring-2 focus:ring-indigo-600 transition-all"})]}),s.jsxs("div",{className:"col-span-4 flex items-center justify-between pl-4 gap-3",children:[s.jsx("div",{className:"flex flex-col gap-1",children:s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none group",children:[s.jsx("input",{type:"checkbox",name:"isSaveAddr",checked:a.isSaveAddr,onChange:e,className:"w-4 h-4 rounded-md text-blue-600 border-slate-300 focus:ring-0 cursor-pointer"}),s.jsx("span",{className:"text-[11px] font-black text-blue-600 group-hover:text-blue-700 transition-colors uppercase",children:" "})]})}),s.jsxs("button",{onClick:o,className:`flex-1 h-11 px-6 rounded-xl font-black text-xs flex items-center justify-center gap-2 transition-all shadow-lg ${l?"bg-emerald-500 hover:bg-emerald-600 text-white":"bg-slate-900 hover:bg-indigo-600 text-white shadow-indigo-200"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:l?"edit_square":"add_circle"}),l?" ":" "]})]})]})]})]}),FDe=({salesRows:a,editingTempId:e,handleEditRow:t,handleDeleteRow:r})=>s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col bg-white rounded-[1.5rem] shadow-xl border border-slate-200 relative mb-3",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar p-0.5",children:s.jsxs("table",{className:"w-full text-xs border-separate border-spacing-0",children:[s.jsx("thead",{className:"sticky top-0 z-20",children:s.jsxs("tr",{className:"bg-slate-50/80 backdrop-blur-md",children:[s.jsx("th",{className:"px-4 py-2 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-2 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-2 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-2 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-2 text-right text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-2 text-right text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-2 text-right text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-2 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-2 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[a.map((n,i)=>s.jsxs("tr",{className:`group hover:bg-slate-50/50 transition-all ${e===n.tempId?"bg-indigo-50/40":""}`,children:[s.jsx("td",{className:"px-4 py-2 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:a.length-i}),s.jsx("td",{className:"px-4 py-2 border-b border-slate-100",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-6 rounded-full bg-slate-100 group-hover:bg-indigo-500 transition-all"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-black text-slate-900 text-sm group-hover:text-indigo-600 transition-colors uppercase",children:n.product}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[9px] text-slate-400 font-bold uppercase truncate max-w-[150px]",children:n.shipAddr1}),s.jsx("span",{className:"text-[9px] text-indigo-500/70 font-black shrink-0",children:n.shipName})]})]})]})}),s.jsx("td",{className:"px-4 py-2 text-center border-b border-slate-100",children:s.jsx("div",{className:"inline-flex items-center justify-center min-w-[32px] h-5 rounded bg-slate-100 text-slate-500 font-bold text-[9px]",children:n.spec||"-"})}),s.jsx("td",{className:"px-4 py-2 text-center font-black text-black border-b border-slate-100",children:n.qty}),s.jsx("td",{className:"px-4 py-2 text-right font-bold text-slate-500 border-b border-slate-100",children:Ve(n.price)}),s.jsxs("td",{className:"px-4 py-2 text-right font-bold text-indigo-500 border-b border-slate-100",children:[n.discountRate,"%"]}),s.jsx("td",{className:"px-4 py-2 text-right border-b border-slate-100",children:s.jsx("span",{className:"text-sm font-black text-slate-900 tracking-tighter",children:Ve(n.amount)})}),s.jsx("td",{className:"px-4 py-2 text-center border-b border-slate-100",children:s.jsx("span",{className:"text-[9px] font-black text-slate-500 bg-slate-50 px-1.5 py-0.5 rounded border border-slate-100",children:n.status})}),s.jsx("td",{className:"px-4 py-2 text-center border-b border-slate-100",children:s.jsxs("div",{className:"flex justify-center gap-1.5 opacity-40 group-hover:opacity-100 transition-all duration-300",children:[s.jsx("button",{onClick:()=>t(n),className:"w-7 h-7 rounded-lg bg-white border border-slate-200 text-slate-500 hover:text-indigo-600 hover:border-indigo-200 hover:shadow-sm transition-all",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"edit_note"})}),s.jsx("button",{onClick:()=>r(n),className:"w-7 h-7 rounded-lg bg-white border border-slate-200 text-slate-500 hover:text-rose-600 hover:border-rose-200 hover:shadow-sm transition-all",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"delete_sweep"})})]})})]},n.tempId)),a.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"9",className:"py-16 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-200",children:"auto_stories"}),s.jsx("div",{className:"font-black text-lg text-slate-800",children:"  "}),s.jsx("p",{className:"text-slate-400 text-[11px]",children:"    ."})]})})})]})]})})]}),VDe=({summary:a,handleReset:e,handlePrintStatement:t,handleSaveAll:r,isProcessing:n,customer:i,salesRows:o})=>s.jsxs("div",{className:"bg-slate-900 p-4 px-8 flex justify-between items-center text-white border-t border-slate-800 rounded-b-[1.5rem]",children:[s.jsxs("div",{className:"flex gap-10 items-center",children:[s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40",children:s.jsx("span",{className:"material-symbols-rounded",children:"analytics"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"  "}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsxs("span",{className:"text-xl font-black",children:[a.count,""]}),s.jsx("span",{className:"mx-2 w-1 h-3 bg-white/10 rounded-full"}),s.jsxs("span",{className:"text-xl font-black",children:[a.qty,""]})]})]})]}),s.jsxs("div",{className:"flex flex-col pl-10 border-l border-white/10 ml-2",children:[s.jsx("span",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest italic mb-0.5",children:" "}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-[9px] font-black text-indigo-400/50 uppercase",children:"KRW"}),s.jsxs("span",{className:"text-xl font-black text-indigo-400 leading-none",children:[Ve(a.amount),""]})]})]})]}),s.jsxs("div",{className:"flex gap-3 h-12",children:[s.jsx("button",{onClick:e,className:"px-6 rounded-xl bg-slate-800 hover:bg-slate-700 text-slate-400 font-black transition-all text-xs",children:""}),s.jsxs("button",{onClick:t,className:`px-6 rounded-xl border-2 font-black transition-all text-xs flex items-center gap-2 ${!i||o.length===0?"bg-slate-800 border-slate-700 text-slate-500 cursor-not-allowed opacity-50":"bg-white border-slate-700 text-slate-700 hover:bg-slate-50"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"print"}),"  "]}),s.jsxs("button",{onClick:r,disabled:n||!i,className:`px-10 rounded-xl font-black shadow-xl flex items-center gap-2 transition-all ${n?"bg-slate-700 text-slate-500":"bg-indigo-600 hover:bg-indigo-500 text-white shadow-indigo-600/40"}`,children:[n?s.jsx("span",{className:"material-symbols-rounded animate-spin text-lg",children:"refresh"}):s.jsx("span",{className:"material-symbols-rounded text-lg",children:"save_as"}),s.jsx("span",{className:"text-sm uppercase tracking-tight",children:" "})]})]})]}),HDe=({isOpen:a,onClose:e,searchResults:t,selectCustomer:r,setQuickRegisterName:n,setShowRegisterModal:i,custSearchRef:o})=>a?s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-sm",onClick:e}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-4xl shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200 text-slate-900 text-left",children:[s.jsxs("div",{className:"bg-indigo-600 p-6 text-white flex justify-between items-center",children:[s.jsx("h3",{className:"text-xl font-bold",children:" "}),s.jsx("button",{onClick:e,className:"hover:bg-white/10 rounded-lg p-1",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"   .   ."}),s.jsx("div",{className:"max-h-[400px] overflow-y-auto pr-2 stylish-scrollbar",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"sticky top-0 bg-white",children:s.jsxs("tr",{className:"text-slate-400 text-[10px] uppercase font-black border-b border-slate-100",children:[s.jsx("th",{className:"py-2 text-left",children:""}),s.jsx("th",{className:"py-2 text-left",children:""}),s.jsx("th",{className:"py-2 text-left",children:""}),s.jsx("th",{className:"py-2 text-center",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:t.map(l=>s.jsxs("tr",{onClick:()=>{r(l),e()},className:"hover:bg-slate-50/80 group transition-colors cursor-pointer border-b border-slate-50 last:border-0",children:[s.jsx("td",{className:"py-3 px-2 font-bold text-slate-800 group-hover:text-indigo-700 transition-colors",children:l.customer_name}),s.jsx("td",{className:"py-3 px-2 text-slate-600 font-medium",children:l.mobile_number}),s.jsx("td",{className:"py-3 px-2 text-slate-400 text-xs truncate max-w-[180px]",children:l.address_primary}),s.jsx("td",{className:"py-3 px-2 text-center",children:s.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-slate-400 group-hover:bg-indigo-600 group-hover:text-white transition-all shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"check"})})})]},l.customer_id))})]})})]}),s.jsxs("div",{className:"bg-slate-50 p-4 flex justify-between items-center text-left",children:[s.jsx("span",{className:"text-xs text-slate-400",children:"  ?"}),s.jsxs("button",{onClick:()=>{e(),n(o.current?.value),i(!0)},className:"px-4 py-2 bg-slate-900 text-white rounded-xl font-bold text-sm hover:bg-slate-800 transition-all flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"person_add"}),"   "]})]})]})]}):null,UDe=({isOpen:a,onClose:e,quickRegisterName:t,fileInputRef:r,handleQuickRegister:n,handleAddressSearch:i})=>a?s.jsxs("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-sm",onClick:e}),s.jsxs("form",{onSubmit:o=>{o.preventDefault();const l={name:o.target.name.value,mobile:o.target.mobile.value,phone:o.target.phone.value,level:o.target.level.value,zip:o.target.zip.value,addr1:o.target.addr1.value,addr2:o.target.addr2.value,memo:o.target.memo.value};n(l)},className:"bg-white rounded-3xl w-full max-w-3xl shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200 text-slate-900 text-left",children:[s.jsxs("div",{className:"bg-slate-900 p-6 text-white flex justify-between items-center text-left",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold",children:"   "}),s.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mt-1",children:"     "})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>r.current?.click(),className:"h-9 px-4 rounded-xl bg-slate-800 text-white text-xs font-bold hover:bg-slate-700 transition-all flex items-center gap-2 border border-slate-700",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"upload_file"})," "]}),s.jsx("button",{type:"button",onClick:e,className:"hover:bg-white/10 rounded-lg p-1 text-white",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{name:"name",defaultValue:t,required:!0,className:"w-full h-11 px-4 rounded-xl bg-slate-100 border-none focus:ring-4 focus:ring-indigo-600/20 font-black text-[14px]",placeholder:" "})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsxs("select",{name:"level",className:"w-full h-11 px-4 rounded-xl bg-slate-100 border-none focus:ring-4 focus:ring-indigo-600/20 font-black text-[14px] appearance-none",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"VIP",children:"VIP "}),s.jsx("option",{value:"/",children:"/"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{name:"mobile",required:!0,placeholder:"010-0000-0000",onChange:o=>o.target.value=Kn(o.target.value),className:"w-full h-11 px-4 rounded-xl bg-slate-100 border-none focus:ring-4 focus:ring-indigo-600/20 font-black text-[14px]"})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{name:"phone",placeholder:"",onChange:o=>o.target.value=Kn(o.target.value),className:"w-full h-11 px-4 rounded-xl bg-slate-100 border-none focus:ring-4 focus:ring-indigo-600/20 font-black text-[14px]"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{name:"zip",id:"quick-zip",className:"w-full h-11 px-4 rounded-xl bg-slate-100 border-none cursor-pointer font-black text-[14px]",readOnly:!0,onClick:()=>i({zipId:"quick-zip",addr1Id:"quick-addr1"}),placeholder:""})]}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsx("input",{name:"addr1",id:"quick-addr1",className:"w-full h-11 px-4 rounded-xl bg-slate-100 border-none cursor-pointer font-black text-[14px]",readOnly:!0,onClick:()=>i({zipId:"quick-zip",addr1Id:"quick-addr1"}),placeholder:"  "})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsx("input",{name:"addr2",id:"quick-addr2",className:"w-full h-11 px-4 rounded-xl bg-slate-100 border-none focus:ring-4 focus:ring-indigo-600/20 font-black text-[14px]",placeholder:" "})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:"   "}),s.jsx("textarea",{name:"memo",rows:"2",className:"w-full px-4 py-3 rounded-xl bg-slate-100 border-none focus:ring-4 focus:ring-indigo-600/20 font-black text-[14px]",placeholder:"   "})]})]}),s.jsxs("div",{className:"bg-slate-50 p-6 flex justify-end gap-3 shrink-0",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-3 rounded-xl text-slate-500 font-black hover:bg-slate-200 transition-all text-sm",children:""}),s.jsx("button",{type:"submit",className:"px-10 py-3 bg-indigo-600 text-white rounded-xl font-black shadow-lg shadow-indigo-600/30 hover:bg-indigo-500 transition-all text-sm",children:"   "})]})]})]}):null,GDe=({isOpen:a,onClose:e})=>a?s.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-sm shadow-2xl",onClick:e}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[500px] h-[600px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col",children:[s.jsxs("div",{className:"bg-slate-900 px-6 py-4 text-white flex justify-between items-center shrink-0",children:[s.jsx("span",{className:"font-bold",children:" "}),s.jsx("button",{onClick:e,className:"hover:bg-white/10 rounded-lg p-1",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{id:"addr-layer-container",className:"flex-1 w-full bg-slate-50"})]})]}):null,FV=`
    @media print {
        @page { size: A4; margin: 0; }
        html, body { 
            background: white !important; 
            color: black !important;
            color-scheme: light !important;
            margin: 0 !important;
            padding: 0 !important;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
        nav, .tauri-drag-region, .print\\:hidden { display: none !important; }
        #root > div:not(.fixed) { display: none !important; }
        #printable-statement {
            display: block !important;
            position: absolute !important;
            left: 0 !important;
            top: 0 !important;
            width: 100% !important;
            margin: 0 !important;
            padding: 10mm !important;
            padding-top: 15mm !important;
            visibility: visible !important;
            background: white !important;
            box-shadow: none !important;
        }
        #printable-statement * {
            visibility: visible !important;
            border-color: black !important;
        }
        .no-break {
            page-break-inside: avoid !important;
            break-inside: avoid !important;
        }
    }
    .custom-scrollbar::-webkit-scrollbar { width: 6px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
`,WDe=({isOpen:a,onClose:e,customer:t,salesRows:r,companyInfo:n,orderDate:i,summary:o,onPrint:l})=>{if(!a||!t)return null;const c=f=>{const p=["","","",""],g=["","","",""],b=["","","","","","","","","",""];if(f===0)return"";let w="",_=0,k=f;for(;k>0;){let T=k%1e4,D="";for(let I=0;I<4;I++){let O=T%10;O>0&&(D=(O===1&&I>0?"":b[O])+p[I]+D),T=Math.floor(T/10)}D!==""&&(w=D+g[_]+w),_++,k=Math.floor(k/1e4)}return w},d=ea(i).format("YYYY MM DD"),u=H.useMemo(()=>{const f=[...r];for(;f.length<12;)f.push(null);return f},[r]),h=()=>{const f=document.getElementById("printable-statement");if(!f)return;const p=`
            <style>${FV}</style>
            ${f.outerHTML}
        `;El(p)};return s.jsxs("div",{className:"fixed inset-0 z-[300] bg-slate-900/60 backdrop-blur-md flex items-center justify-center p-4 print:p-0 print:bg-white print:block print:relative print:z-0",children:[s.jsxs("div",{className:"fixed top-8 right-8 flex flex-col gap-4 print:hidden z-[310]",children:[s.jsx("button",{onClick:e,className:"w-14 h-14 bg-white text-slate-400 rounded-2xl shadow-2xl hover:text-rose-500 hover:scale-110 active:scale-95 transition-all flex items-center justify-center group",title:"",children:s.jsx(js,{size:32,className:"group-hover:rotate-90 transition-transform duration-300"})}),s.jsx("div",{className:"h-px bg-white/20 w-full"}),s.jsxs("button",{onClick:h,className:"h-14 px-8 rounded-2xl font-black text-sm bg-indigo-600 text-white shadow-2xl shadow-indigo-500/30 hover:bg-indigo-700 hover:-translate-y-1 active:translate-y-0 transition-all flex items-center gap-3",children:[s.jsx(UH,{size:20}),"  / PDF "]})]}),s.jsx("div",{className:"w-full max-w-[210mm] max-h-[92vh] bg-white rounded-[2.5rem] shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)] overflow-y-auto custom-scrollbar print:max-h-none print:shadow-none print:rounded-none print:overflow-visible print:w-full relative",children:s.jsxs("div",{id:"printable-statement",className:"p-[15mm] bg-white text-slate-900 print:p-[10mm]",children:[s.jsxs("div",{className:"text-center mb-6 relative",children:[s.jsx("h1",{className:"text-3xl font-black tracking-[0.5em] underline underline-offset-8 decoration-2 text-slate-800",children:"    "}),s.jsxs("div",{className:"absolute top-0 right-0 text-[10px] font-bold text-slate-400 border border-slate-200 px-2 py-1 rounded",children:[": ",ea(i).format("YYYYMMDD"),"-",t.customer_id.toString().slice(-4)]})]}),s.jsxs("div",{className:"flex gap-4 mb-4 items-stretch",children:[s.jsx("div",{className:"flex-1 flex flex-col",children:s.jsx("table",{className:"w-full border-2 border-slate-800 h-full border-collapse",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{className:"w-20 bg-slate-100 border border-slate-800 p-1.5 text-xs font-black",children:" "}),s.jsx("td",{className:"border border-slate-800 p-1.5 text-sm font-bold text-center italic",children:d})]}),s.jsxs("tr",{children:[s.jsx("th",{className:"bg-slate-100 border border-slate-800 p-2 text-xs font-black h-16",children:""}),s.jsxs("td",{className:"border border-slate-800 p-2 align-middle",children:[s.jsxs("div",{className:"text-lg font-black text-center",children:[t.customer_name," ",s.jsx("span",{className:"text-base font-bold",children:""})]}),s.jsx("div",{className:"text-[9px] text-slate-500 text-center",children:t.mobile_number})]})]}),s.jsxs("tr",{children:[s.jsx("th",{className:"bg-slate-100 border border-slate-800 p-1.5 text-xs font-black",children:""}),s.jsx("td",{className:"border border-slate-800 p-1.5 bg-slate-50",children:s.jsxs("div",{className:"flex justify-between items-center px-2",children:[s.jsx("span",{className:"text-sm font-black",children:""}),s.jsx("span",{className:"text-base font-black",children:Ve(o.amount)})]})})]})]})})}),s.jsx("div",{className:"w-[55%] flex flex-col",children:s.jsx("table",{className:"w-full border-2 border-slate-800 border-collapse h-full",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsxs("th",{rowSpan:4,className:"w-8 bg-slate-100 border border-slate-800 text-[10px] leading-tight font-black text-center",children:["",s.jsx("br",{}),"",s.jsx("br",{}),""]}),s.jsx("th",{className:"w-20 bg-slate-100 border border-slate-800 p-1 text-[10px] font-black",children:""}),s.jsx("td",{colSpan:3,className:"border border-slate-800 p-1 text-center font-black text-sm tracking-widest",children:n?.business_reg_number||"000-00-00000"})]}),s.jsxs("tr",{children:[s.jsx("th",{className:"bg-slate-100 border border-slate-800 p-1 text-[10px] font-black",children:" "}),s.jsx("td",{className:"border border-slate-800 p-1 text-xs font-bold text-center",children:n?.company_name||"()"}),s.jsx("th",{className:"w-12 bg-slate-100 border border-slate-800 p-1 text-[10px] font-black text-center",children:" "}),s.jsxs("td",{className:"border border-slate-800 p-1 text-xs text-center relative",children:[s.jsx("span",{className:"font-bold",children:n?.representative_name||""}),s.jsx("div",{className:"absolute top-0 right-1 w-6 h-6 opacity-20 border border-rose-500 rounded-full flex items-center justify-center text-[8px] font-bold text-rose-500",children:""})]})]}),s.jsxs("tr",{children:[s.jsx("th",{className:"bg-slate-100 border border-slate-800 p-1 text-[10px] font-black",children:" "}),s.jsx("td",{colSpan:3,className:"border border-slate-800 p-1 text-[9px] leading-tight font-medium",children:n?.address||" ..."})]}),s.jsxs("tr",{children:[s.jsx("th",{className:"bg-slate-100 border border-slate-800 p-1 text-[10px] font-black",children:" "}),s.jsx("td",{colSpan:3,className:"border border-slate-800 p-1 text-xs font-bold",children:n?.phone_number||n?.mobile_number||"-"})]})]})})})]}),s.jsxs("div",{className:"border-2 border-slate-800 p-3 mb-4 bg-slate-50 flex justify-between items-center px-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-xs font-black text-slate-400",children:" (KOR)"}),s.jsxs("span",{className:"text-lg font-black text-slate-800",children:[" ",c(o.amount)," "]})]}),s.jsxs("div",{className:"text-slate-400 text-sm italic font-medium",children:["(  ",Ve(o.amount)," )"]})]}),s.jsx("div",{className:"border-x-2 border-t-2 border-slate-800",children:s.jsxs("table",{className:"w-full border-collapse table-fixed",children:[s.jsx("thead",{className:"bg-slate-100 border-b-2 border-slate-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"w-10 p-2 text-[10px] font-black border-r border-slate-800",children:"NO"}),s.jsx("th",{className:"w-auto p-2 text-[10px] font-black border-r border-slate-800",children:"  "}),s.jsx("th",{className:"w-12 p-2 text-[10px] font-black border-r border-slate-800",children:""}),s.jsx("th",{className:"w-12 p-2 text-[10px] font-black border-r border-slate-800",children:""}),s.jsx("th",{className:"w-24 p-2 text-[10px] font-black border-r border-slate-800",children:""}),s.jsx("th",{className:"w-28 p-2 text-[10px] font-black border-r border-slate-800",children:""}),s.jsx("th",{className:"w-20 p-2 text-[10px] font-black border-r border-slate-800",children:""}),s.jsx("th",{className:"w-24 p-2 text-[10px] font-black",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-800",children:u.map((f,p)=>s.jsxs("tr",{className:"h-9 border-b border-slate-800",children:[s.jsx("td",{className:"p-1 text-[10px] font-bold text-slate-400 text-center border-r border-slate-800",children:p+1}),s.jsxs("td",{className:"p-1 px-3 text-xs font-black text-slate-800 border-r border-slate-800 whitespace-nowrap overflow-hidden text-ellipsis",children:[f?.product,f?.spec&&s.jsxs("span",{className:"ml-2 text-[9px] font-normal text-slate-400",children:["(",f.spec,")"]})]}),s.jsx("td",{className:"p-1 text-[10px] font-bold text-center border-r border-slate-800",children:f?"EA":""}),s.jsx("td",{className:"p-1 text-[10px] font-black text-center border-r border-slate-800",children:f?.qty}),s.jsx("td",{className:"p-1 px-2 text-[10px] font-bold text-right border-r border-slate-800",children:f?Ve(f.price):""}),s.jsx("td",{className:"p-1 px-2 text-[10px] font-black text-right border-r border-slate-800 bg-slate-50/30",children:f?Ve(f.supplyValue||f.amount):""}),s.jsx("td",{className:"p-1 px-2 text-[10px] font-bold text-right border-r border-slate-800",children:f?Ve(f.vatAmount||0):""}),s.jsx("td",{className:"p-1 px-2 text-[9px] text-slate-500 overflow-hidden text-ellipsis whitespace-nowrap",children:f?.shipName||""})]},p))}),s.jsx("tfoot",{className:"bg-slate-50/80 border-t-2 border-slate-800",children:s.jsxs("tr",{className:"h-8",children:[s.jsx("td",{colSpan:4,className:"text-center text-xs font-black border-r border-slate-800",children:" "}),s.jsx("td",{className:"border-r border-slate-800"}),s.jsx("td",{className:"p-1 px-2 text-xs font-black text-right border-r border-slate-800",children:Ve(o.supply)}),s.jsx("td",{className:"p-1 px-2 text-xs font-black text-right border-r border-slate-800",children:Ve(o.vat)}),s.jsx("td",{})]})})]})}),s.jsxs("div",{className:"no-break",children:[s.jsxs("div",{className:"flex mt-2 border-2 border-slate-800 divide-x-2 divide-slate-800 bg-slate-900 text-white rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"flex-1 p-2 flex justify-between items-center px-6",children:[s.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Total Supply Value"}),s.jsxs("span",{className:"text-sm font-black whitespace-nowrap",children:[" ",Ve(o.supply)]})]}),s.jsxs("div",{className:"flex-1 p-2 flex justify-between items-center px-6",children:[s.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Total VAT"}),s.jsxs("span",{className:"text-sm font-black whitespace-nowrap",children:[" ",Ve(o.vat)]})]}),s.jsxs("div",{className:"flex-[1.2] p-2 flex justify-between items-center px-8 bg-indigo-600",children:[s.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Grand Total"}),s.jsxs("span",{className:"text-lg font-black whitespace-nowrap",children:[" ",Ve(o.amount)]})]})]}),s.jsxs("div",{className:"mt-6 text-center space-y-1",children:[s.jsx("p",{className:"text-sm font-bold text-slate-700",children:"   ()."}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] font-black text-slate-300 italic pt-4",children:[s.jsx(YA,{size:12}),"Generated by Mycelium Smart Farm Integration System v2.0"]})]})]})]})}),s.jsx("style",{children:FV})]})},$De=()=>{const{showAlert:a,showConfirm:e}=Na(),{orderDate:t,setOrderDate:r,customer:n,addresses:i,products:o,salesRows:l,editingTempId:c,isProcessing:d,inputState:u,setInputState:h,loadProducts:f,loadCompanyInfo:p,loadSalesHistory:g,selectCustomer:b,handleInputChange:w,handleAddRow:_,handleEditRow:k,handleDeleteRow:T,handleSaveAll:D,handleReset:I,handlePrintStatement:O,closeStatement:P,showStatement:V,handleCsvUpload:G,companyInfo:Q,summary:$,isDraftRestored:ae,tempDraft:J,handleRestoreDraft:U,handleDiscardDraft:F}=nG(a,e),W=H.useRef(null),K=H.useRef(null),ee=H.useRef(null),[ne,re]=H.useState(!1),[Z,ie]=H.useState([]),[de,fe]=H.useState(!1),[he,ve]=H.useState(!1),[Oe,Se]=H.useState("");H.useEffect(()=>{f(),p()},[f,p]);const Ce=H.useRef(!0);H.useEffect(()=>{if(!n&&W.current&&(W.current.value=""),ae&&Ce.current){Ce.current=!1,n&&W.current&&(W.current.value=n.customer_name);return}n&&t&&g(n.customer_id,t)},[n,t,g,ae]);const we=async()=>{const Ee=W.current?.value.trim();if(!Ee)return a("","  .");try{const ze=await pt("search_customers_by_name",{name:Ee});if(!ze||ze.length===0){await e(" ","  .   ?")&&(Se(Ee),fe(!0));return}ze.length===1?b(ze[0]):(ie(ze),re(!0))}catch(ze){console.error("Search Error:",ze),a("",`    : ${ze.message}`)}},xe=async Ee=>{try{await pt("create_customer",{...Ee,joinDate:new Date().toISOString().split("T")[0],mobile:Kn(Ee.mobile),phone:Kn(Ee.phone)});const ze=await pt("search_customers_by_name",{name:Ee.name}),Ze=ze.find(Re=>Re.mobile_number===Ee.mobile)||ze[0];Ze&&(b(Ze),fe(!1),a("","  ."))}catch(ze){a("",`  : ${ze}`)}},be=(Ee="input")=>{if(!window.daum||!window.daum.Postcode)return a("","     .");ve(!0),setTimeout(()=>{new window.daum.Postcode({oncomplete:ze=>{let Ze=ze.address;if(ze.addressType==="R"){let Re=(ze.bname!==""?ze.bname:"")+(ze.buildingName!==""?ze.bname!==""?`, ${ze.buildingName}`:ze.buildingName:"");Ze+=Re!==""?` (${Re})`:""}Ee==="input"?h(Re=>({...Re,shipZip:ze.zonecode,shipAddr1:Ze})):(Ee.zipId&&(document.getElementById(Ee.zipId).value=ze.zonecode),Ee.addr1Id&&(document.getElementById(Ee.addr1Id).value=Ze)),ve(!1)},width:"100%",height:"100%"}).embed(document.getElementById("addr-layer-container"))},100)};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:[s.jsx(PDe,{fileInputRef:ee,onCsvUpload:G}),s.jsx(BDe,{orderDate:t,setOrderDate:r,custSearchRef:W,handleSearchCustomer:we,customer:n}),ae&&s.jsxs("div",{className:"mt-2 bg-amber-50 border border-amber-200 rounded-xl px-4 py-2 flex items-center justify-between animate-in slide-in-from-top-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-amber-500 text-sm",children:"history_edu"}),s.jsx("span",{className:"text-[11px] font-bold text-amber-700",children:"   ."})]}),s.jsx("button",{onClick:I,className:"text-[10px] font-black text-amber-600 hover:text-amber-800 underline",children:" "})]})]}),s.jsxs("div",{className:`px-6 lg:px-8 min-[2000px]:px-12 mt-1 flex flex-col gap-3 overflow-hidden flex-1 pb-6 lg:pb-8 min-[2000px]:pb-12 ${n?"":"pointer-events-none opacity-50"}`,children:[s.jsx(zDe,{inputState:u,handleInputChange:w,products:o,addresses:i,prodSelectRef:K,handleAddressSearch:be,handleAddRow:_,editingTempId:c}),s.jsx(FDe,{salesRows:l,editingTempId:c,handleEditRow:k,handleDeleteRow:T}),s.jsx(VDe,{summary:$,handleReset:I,handlePrintStatement:O,handleSaveAll:D,isProcessing:d,customer:n,salesRows:l})]}),s.jsx(HDe,{isOpen:ne,onClose:()=>re(!1),searchResults:Z,selectCustomer:b,setQuickRegisterName:Se,setShowRegisterModal:fe,custSearchRef:W}),s.jsx(UDe,{isOpen:de,onClose:()=>fe(!1),quickRegisterName:Oe,fileInputRef:ee,handleQuickRegister:xe,handleAddressSearch:be}),s.jsx(GDe,{isOpen:he,onClose:()=>ve(!1)}),s.jsx(WDe,{isOpen:V,onClose:P,customer:n,salesRows:l,companyInfo:Q,orderDate:t,summary:$}),J&&s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-6 bg-slate-900/60 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white rounded-[2rem] w-full max-w-md p-8 shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsx("div",{className:"w-16 h-16 rounded-2xl bg-amber-50 text-amber-500 flex items-center justify-center mb-6",children:s.jsx("span",{className:"material-symbols-rounded text-3xl",children:"restore_page"})}),s.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"   "}),s.jsxs("p",{className:"text-sm text-slate-500 font-medium leading-relaxed mb-8",children:["    ?",s.jsx("br",{}),"(: ",J.customer?.customer_name||"",", : ",J.salesRows?.length||0,")"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:F,className:"flex-1 h-12 rounded-xl bg-slate-100 text-slate-500 font-bold text-sm hover:bg-slate-200 transition-all",children:"  "}),s.jsx("button",{onClick:U,className:"flex-1 h-12 rounded-xl bg-indigo-600 text-white font-bold text-sm hover:bg-indigo-500 shadow-lg shadow-indigo-200 transition-all",children:" "})]})]})})]})},YDe=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState({event_id:"",event_name:"",organizer:"",manager_name:"",manager_contact:"",location_address:"",memo:"",start_date:"",end_date:""}),[n,i]=H.useState([]),[o,l]=H.useState([]),[c,d]=H.useState([]),[u,h]=H.useState(!1),[f,p]=H.useState([]),[g,b]=H.useState(""),[w,_]=H.useState(null),[k,T]=H.useState(!1),[D,I]=H.useState(!1),[O,P]=H.useState(!1),V=H.useMemo(()=>{const Z=n.length,ie=n.reduce((fe,he)=>fe+Number(he.qty),0),de=n.reduce((fe,he)=>fe+Number(he.amount),0);return{count:Z,qty:ie,amount:de}},[n]);H.useEffect(()=>{G()},[]);const G=async()=>{try{const Z=await pt("get_product_list");d(Z.filter(ie=>(ie.item_type||"product")==="product")||[])}catch(Z){console.error(Z)}};H.useEffect(()=>{const Z=localStorage.getItem("mycelium_draft_special");if(Z)try{const ie=JSON.parse(Z);(ie.salesRows?.length>0||ie.eventData?.event_name)&&(r(ie.eventData),i(ie.salesRows||[]),l(ie.deletedSalesIds||[]),P(!0),I(!0))}catch(ie){console.error("Special Draft restore error:",ie)}},[]),H.useEffect(()=>{if(O||n.length>0||t.event_name){const Z={eventData:t,salesRows:n,deletedSalesIds:o};localStorage.setItem("mycelium_draft_special",JSON.stringify(Z))}},[t,n,o,O]);const Q=()=>{localStorage.removeItem("mycelium_draft_special"),I(!1)},$=Z=>{const{name:ie,value:de}=Z.target;r(fe=>({...fe,[ie]:de})),P(!0)},ae=async()=>{const Z=(t.event_name||"").trim();if(!Z){a(""," .");return}if(Z===w){f.length>0&&!u&&h(!0);return}b(Z);try{const ie=await pt("search_events_by_name",{name:Z});p(ie||[]),h(!0),_(Z)}catch(ie){await a("","  : "+ie)}},J=async Z=>{r({event_id:Z.event_id,event_name:Z.event_name,organizer:Z.organizer||"",manager_name:Z.manager_name||"",manager_contact:Z.manager_contact||"",location_address:Z.location_address||"",memo:Z.memo||"",start_date:Z.start_date||"",end_date:Z.end_date||""}),h(!1),P(!0),U(Z.event_id,Z.start_date,Z.end_date)},U=async(Z,ie,de)=>{try{const he=(await pt("get_sales_by_event_id_and_date_range",{eventId:String(Z),startDate:ie||null,endDate:de||null})).map(ve=>({id:ve.sales_id,tempId:Math.random(),orderDate:ve.order_date,product:ve.product_name,spec:ve.specification,qty:ve.quantity,price:ve.unit_price,discount:ve.discount_rate||0,amount:ve.total_amount,memo:ve.memo||""}));i(he.reverse()),l([]),P(!1)}catch(fe){console.error(fe)}},F=()=>{r({event_id:"",event_name:g||"",organizer:"",manager_name:"",manager_contact:"",location_address:"",memo:"",start_date:ev(new Date),end_date:ev(new Date)}),i([]),h(!1),P(!0)},W=()=>{if(!t.event_name){a("","   .");return}let ie=ev(new Date);t.start_date&&ie<t.start_date.substring(0,10)&&(ie=t.start_date.substring(0,10)),t.end_date&&ie>t.end_date.substring(0,10)&&(ie=t.end_date.substring(0,10)),i(de=>[{tempId:Date.now()+Math.random(),orderDate:ie,product:"",spec:"",qty:1,price:"",discount:0,amount:0,memo:""},...de]),P(!0)},K=(Z,ie,de)=>{i(fe=>fe.map(he=>{if(he.tempId!==Z)return he;const ve={...he,[ie]:de};if(ie==="product"){const Oe=c.find(Se=>Se.product_name===de);Oe&&(ve.spec=Oe.specification,ve.price=Oe.unit_price)}if(["qty","price","discount","product"].includes(ie)){const Oe=Number(ve.qty)||0,Se=Number(ve.price)||0,Ce=Number(ve.discount)||0;ve.amount=Math.floor(Oe*Se*(1-Ce/100)/10)*10}return ve})),P(!0)},ee=Z=>{Z.id&&l(ie=>[...ie,Z.id]),i(ie=>ie.filter(de=>de.tempId!==Z.tempId)),P(!0)},ne=()=>{if(!t.event_name){a("","   .");return}const Z=prompt(" QR  .");if(!Z)return;const ie=Z.trim();console.log("Special Sales Scanned QR:",ie);const de=ie.split("|").map(ve=>ve.trim());let fe=null;if(de[0]==="PRODUCT"&&de[1]){const ve=parseInt(de[1]),Oe=de[3],Se=de[4]==="NA"||!de[4]?"":de[4];if(fe=c.find(Ce=>Number(Ce.product_id)===ve),!fe||fe&&Oe&&fe.product_name!==Oe){const Ce=c.find(we=>we.product_name===Oe&&(Se?we.specification===Se:!0));Ce&&(fe=Ce)}console.log(`Matched by PRODUCT structure: ${ve} | ${Oe}`,fe)}else if(de[0]==="HARVEST"&&de[3]){const ve=de[3],Oe=de[4]||"";if(fe=c.find(Se=>Se.product_name===ve&&(Se.specification===Oe||Se.specification&&Oe&&Se.specification.includes(Oe))),!fe){const Se=c.filter(Ce=>Ce.product_name===ve);if(Se.length===1)fe=Se[0];else if(Se.length>1){a(" ",`[${ve}]    .    .`);return}}console.log(`Matched by HARVEST Name/Spec: ${ve}`,fe)}else if(ie.includes("ID:")){const ve=ie.split("ID:").pop().trim(),Oe=parseInt(ve.replace(/[^0-9]/g,""));fe=c.find(Se=>Number(Se.product_id)===Oe),console.log(`Matched by Legacy ID: ${Oe}`,fe)}else{if(fe=c.find(ve=>ve.product_code&&ve.product_code===ie||ve.product_name===ie||`${ve.product_name} ${ve.specification||""}`.trim()===ie||`${ve.product_name}(${ve.specification||""})`.trim()===ie),!fe&&/^\d+$/.test(ie)){const ve=parseInt(ie);fe=c.find(Oe=>Number(Oe.product_id)===ve)}console.log(`Matched by fallback/numeric: ${ie}`,fe)}if(!fe){a(" ",`[${ie}]    .    .`);return}const he=new Date().toISOString().split("T")[0];i(ve=>[{tempId:Date.now()+Math.random(),orderDate:he,product:fe.product_name,spec:fe.specification,qty:1,price:fe.unit_price,discount:0,amount:fe.unit_price,memo:""},...ve]),P(!0)},re=async()=>{if(t.event_name&&await e(""," ?")){T(!0);try{const Z={...t,start_date:t.start_date||null,end_date:t.end_date||null},ie=n.filter(fe=>fe.product).map(fe=>({sales_id:fe.id?String(fe.id):"",order_date:fe.orderDate,product_name:fe.product,specification:fe.spec||null,quantity:Number(fe.qty),unit_price:Number(fe.price),discount_rate:Number(fe.discount),memo:fe.memo||null})),de=await pt("save_special_sales_batch",{event:Z,sales:ie,deletedSalesIds:o});r(fe=>({...fe,event_id:de})),await a("","."),Q(),U(de,Z.start_date,Z.end_date)}catch(Z){console.error(Z),await a(""," : "+Z)}finally{T(!1)}}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:[s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Special Event Sales"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Event Sales"})]})]})}),s.jsx("div",{className:"grid grid-cols-12 gap-3 items-stretch mt-4",children:s.jsxs("div",{className:"col-span-12 bg-white rounded-[1.5rem] p-6 border border-slate-100 shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6 border-b border-slate-50 pb-4",children:[s.jsx("div",{className:"bg-indigo-50 p-2 rounded-lg",children:s.jsx("span",{className:"material-symbols-rounded text-indigo-600 text-xl",children:"campaign"})}),s.jsx("span",{className:"text-sm font-black text-slate-700 uppercase tracking-tight",children:"  "}),s.jsx("span",{className:"text-xs text-slate-400 font-medium ml-auto",children:"*     ."})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-6 mb-2",children:[s.jsxs("div",{className:"col-span-4 lg:col-span-3",children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:" (/)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{value:t.event_name,name:"event_name",onChange:$,onKeyDown:Z=>{(Z.key==="Enter"||Z.key==="Tab")&&(Z.preventDefault(),ae())},className:"w-full h-11 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-800 px-4 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all text-sm shadow-sm",placeholder:" "}),s.jsx("button",{onClick:ae,className:"min-w-[50px] h-11 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors shadow-sm flex items-center justify-center",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"search"})})]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:""}),s.jsx("input",{value:t.organizer,name:"organizer",onChange:$,className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all px-4 text-sm"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:""}),s.jsx("input",{value:t.manager_name,name:"manager_name",onChange:$,className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all px-4 text-sm"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:""}),s.jsx("input",{value:t.manager_contact,name:"manager_contact",onChange:$,className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all px-4 text-sm"})]}),s.jsxs("div",{className:"col-span-2 lg:col-span-3",children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:" "}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"date",value:t.start_date,name:"start_date",onChange:$,className:"w-full h-11 bg-white border border-slate-200 rounded-xl text-sm px-3 font-bold text-slate-700 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",title:""}),s.jsx("span",{className:"text-slate-300 font-bold",children:"~"}),s.jsx("input",{type:"date",value:t.end_date,name:"end_date",onChange:$,className:"w-full h-11 bg-white border border-slate-200 rounded-xl text-sm px-3 font-bold text-slate-700 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",title:""})]})]})]}),s.jsx("div",{className:"grid grid-cols-12 gap-4",children:s.jsxs("div",{className:"col-span-12",children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:"  "}),s.jsx("input",{value:t.location_address,name:"location_address",onChange:$,className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all px-4 text-sm",placeholder:"   "})]})})]})})]}),s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 mt-1 flex flex-col gap-3 overflow-hidden flex-1 pb-6 lg:pb-8 min-[2000px]:pb-12",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] shadow-xl border border-slate-200 relative flex flex-col h-full overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 z-10"}),s.jsxs("div",{className:"flex justify-between items-center mb-2 shrink-0 p-5 pb-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),s.jsx("span",{className:"text-[11px] font-black text-slate-500 uppercase tracking-widest",children:" "})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:ne,className:"h-10 px-4 rounded-xl bg-purple-50 hover:bg-purple-100 text-purple-700 border border-purple-100 text-xs font-bold flex items-center gap-2 transition-all hover:scale-105",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"qr_code_scanner"})," QR "]}),s.jsxs("button",{onClick:W,className:"h-10 px-4 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-bold flex items-center gap-2 transition-all shadow-md shadow-indigo-200 hover:scale-105 active:scale-95",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"add"}),"  "]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar p-0.5 relative",children:s.jsxs("table",{className:"w-full text-xs text-left border-collapse table-fixed",children:[s.jsx("thead",{className:"sticky top-0 z-20",children:s.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 shadow-sm",children:[s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[5%] tracking-wider",children:"No"}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[12%] tracking-wider",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[20%] tracking-wider",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[10%] tracking-wider",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[8%] tracking-wider",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[10%] tracking-wider",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[8%] tracking-wider",children:"(%)"}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[12%] tracking-wider",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 tracking-wider",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[5%] tracking-wider",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100 bg-white",children:[n.map((Z,ie)=>s.jsxs("tr",{className:"hover:bg-indigo-50/20 transition-colors group",children:[s.jsx("td",{className:"text-center text-slate-400 font-bold text-xs",children:n.length-ie}),s.jsx("td",{className:"p-2",children:s.jsx("input",{type:"date",value:Z.orderDate,onChange:de=>K(Z.tempId,"orderDate",de.target.value),className:"w-full h-10 bg-slate-50 border border-slate-200 rounded-lg px-2 text-center text-xs text-slate-600 font-bold focus:bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all outline-none"})}),s.jsxs("td",{className:"p-2",children:[s.jsx("input",{list:`dl-${Z.tempId}`,value:Z.product,onChange:de=>K(Z.tempId,"product",de.target.value),className:"w-full h-10 bg-white border border-slate-200 rounded-lg px-3 text-left text-xs text-slate-800 font-bold focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all outline-none placeholder:font-normal",placeholder:""}),s.jsx("datalist",{id:`dl-${Z.tempId}`,children:c.map(de=>s.jsx("option",{value:de.product_name,children:de.specification?`${de.product_name} (${de.specification})`:de.product_name},`${de.product_id}-${de.product_name}`))})]}),s.jsx("td",{className:"p-2",children:s.jsx("input",{value:Z.spec,readOnly:!0,className:"w-full h-10 bg-slate-50/50 border border-slate-100 rounded-lg px-2 text-center text-xs text-slate-500 font-medium outline-none",tabIndex:-1})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{type:"number",value:Z.qty,onChange:de=>K(Z.tempId,"qty",de.target.value),className:"w-full h-10 bg-white border border-slate-200 rounded-lg px-2 text-center text-xs font-bold text-slate-700 focus:border-orange-400 focus:ring-2 focus:ring-orange-100 transition-all outline-none"})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{value:Ve(Z.price),onChange:de=>K(Z.tempId,"price",de.target.value.replace(/[^0-9]/g,"")),className:"w-full h-10 bg-white border border-slate-200 rounded-lg px-2 text-right text-xs text-slate-600 font-bold focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all outline-none"})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{type:"number",value:Z.discount,onChange:de=>K(Z.tempId,"discount",de.target.value),className:"w-full h-10 bg-white border border-slate-200 rounded-lg px-2 text-center text-xs text-red-500 font-bold focus:border-red-400 focus:ring-2 focus:ring-red-100 transition-all outline-none"})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{value:Ve(Z.amount),readOnly:!0,className:"w-full h-10 bg-slate-50 border border-slate-200 rounded-lg px-3 text-right text-xs font-black text-indigo-600 outline-none",tabIndex:-1})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{value:Z.memo,onChange:de=>K(Z.tempId,"memo",de.target.value),className:"w-full h-10 bg-white border border-slate-200 rounded-lg px-3 text-left text-xs text-slate-600 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all outline-none placeholder:text-slate-300",placeholder:""})}),s.jsx("td",{className:"text-center p-2",children:s.jsx("button",{onClick:()=>ee(Z),className:"w-8 h-8 rounded-lg text-slate-300 hover:text-red-500 hover:bg-red-50 transition-all flex items-center justify-center mx-auto group-hover:block",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"delete"})})})]},Z.tempId)),n.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"10",className:"h-[40vh] text-center border-b-0",children:s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-300",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-50 flex items-center justify-center mb-4",children:s.jsx("span",{className:"material-symbols-rounded text-3xl opacity-20",children:"assignment_add"})}),s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("span",{className:"text-sm font-bold text-slate-400",children:"   ."}),s.jsx("span",{className:"text-xs text-slate-400/60",children:" [ ]    ."})]})]})})})]})]})}),s.jsxs("div",{className:"bg-slate-900 border-t border-slate-800 p-4 px-8 flex justify-between items-center shrink-0 z-30 h-[90px] shadow-[0_-10px_40px_rgba(0,0,0,0.2)]",children:[s.jsxs("div",{className:"flex gap-10 items-center",children:[s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-indigo-500/20 to-purple-500/20 border border-white/10 flex items-center justify-center shadow-inner",children:s.jsx("span",{className:"material-symbols-rounded text-indigo-400 text-2xl",children:"analytics"})}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"  "}),s.jsxs("div",{className:"flex items-baseline gap-2 text-white",children:[s.jsxs("span",{className:"text-2xl font-black tracking-tight",children:[V.count,s.jsx("span",{className:"text-sm font-normal text-slate-500 ml-1",children:""})]}),s.jsx("span",{className:"w-px h-4 bg-white/10 mx-2"}),s.jsxs("span",{className:"text-2xl font-black tracking-tight",children:[V.qty,s.jsx("span",{className:"text-sm font-normal text-slate-500 ml-1",children:""})]})]})]})]}),s.jsxs("div",{className:"flex flex-col pl-10 border-l border-white/10 ml-2",children:[s.jsx("span",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-widest italic mb-1",children:"Total Amount"}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-[11px] font-black text-emerald-400/50 uppercase",children:"KRW"}),s.jsx("span",{className:"text-3xl font-black text-emerald-400 leading-none drop-shadow-[0_2px_10px_rgba(16,185,129,0.3)]",children:Ve(V.amount)}),s.jsx("span",{className:"text-lg font-bold text-emerald-400/50",children:""})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>{r({event_id:"",event_name:"",organizer:"",manager_name:"",manager_contact:"",location_address:"",memo:"",start_date:"",end_date:""}),i([]),l([]),P(!1),Q()},className:"h-12 px-6 rounded-2xl bg-slate-800 hover:bg-slate-700 text-slate-400 font-bold transition-all text-xs flex items-center gap-2 border border-slate-700/50",children:[s.jsx("span",{className:"material-symbols-rounded",children:"refresh"})," "]}),s.jsx("button",{onClick:re,className:"h-12 px-8 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-bold shadow-lg shadow-indigo-900/40 transition-all hover:scale-105 active:scale-95 text-sm flex items-center gap-3",disabled:k||!t.event_name,children:k?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"material-symbols-rounded animate-spin",children:"sync"}),"  ..."]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"material-symbols-rounded",children:"save"}),"  "]})})]})]})]})}),u&&s.jsx("div",{className:"modal flex fixed inset-0 z-50 items-center justify-center bg-black/60 backdrop-blur-md animate-in fade-in duration-300",children:s.jsxs("div",{className:"bg-white w-[800px] rounded-[2.5rem] shadow-2xl overflow-hidden p-0 border border-white/50 relative transform transition-all scale-100",children:[s.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-white p-8 border-b border-slate-100 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[s.jsx("span",{className:"w-10 h-10 rounded-2xl bg-indigo-100 text-indigo-600 flex items-center justify-center shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-2xl",children:"search"})})," "]}),s.jsx("p",{className:"text-slate-400 text-sm mt-1 ml-14 font-medium",children:"      ."})]}),s.jsx("button",{onClick:()=>h(!1),className:"w-10 h-10 rounded-full bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 flex items-center justify-center transition-all",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"close"})})]}),s.jsxs("div",{className:"p-8 bg-slate-50/50",children:[s.jsx("div",{className:"max-h-[500px] overflow-auto border border-slate-200 rounded-2xl mb-6 bg-white shadow-sm",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-[11px] uppercase text-slate-500 sticky top-0 font-black tracking-wider z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-5 text-left pl-8 w-1/2",children:""}),s.jsx("th",{className:"p-5 text-center w-1/4",children:""}),s.jsx("th",{className:"p-5 text-center w-1/4",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100",children:[f.map(Z=>s.jsxs("tr",{onClick:()=>J(Z),className:"cursor-pointer hover:bg-indigo-50/50 transition-colors group",children:[s.jsxs("td",{className:"p-5 pl-8",children:[s.jsx("div",{className:"font-bold text-slate-700 text-base group-hover:text-indigo-700 transition-colors",children:Z.event_name}),s.jsx("div",{className:"text-xs text-slate-400 mt-1 font-medium truncate max-w-[300px]",children:Z.location_address||"  "})]}),s.jsx("td",{className:"p-5 text-center",children:s.jsxs("div",{className:"inline-flex items-center px-2.5 py-1 rounded-lg bg-slate-100 text-slate-600 text-xs font-bold border border-slate-200",children:[Z.start_date?.substring(0,10)," ~ ",Z.end_date?.substring(0,10)]})}),s.jsx("td",{className:"p-5 text-center text-slate-600 font-medium",children:Z.organizer})]},Z.event_id)),f.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"3",className:"p-16 text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-300",children:[s.jsx("span",{className:"material-symbols-rounded text-5xl mb-3 opacity-30",children:"rule_folder"}),s.jsx("span",{className:"text-lg font-bold text-slate-400",children:"  ."}),s.jsx("span",{className:"text-sm mt-1",children:"   ' '  ."})]})})})]})]})}),s.jsxs("div",{className:"flex justify-between items-center pt-2",children:[s.jsxs("div",{className:"text-xs text-slate-400 font-bold",children:["* : ",s.jsxs("span",{className:"text-indigo-500",children:["'",g,"'"]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>h(!1),className:"h-12 px-6 rounded-2xl bg-white border border-slate-200 text-slate-500 font-bold hover:bg-slate-50 transition-colors text-sm",children:""}),s.jsxs("button",{onClick:F,className:"h-12 px-8 rounded-2xl bg-indigo-600 text-white font-bold hover:bg-indigo-700 transition-all text-sm shadow-lg shadow-indigo-200 hover:scale-105 active:scale-95 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"add_circle"}),"  "]})]})]})]})]})})]})},qDe=({isOpen:a,onClose:e,fileData:t,onImport:r})=>{const[n,i]=H.useState({customer_name:-1,mobile:-1,zip:-1,address1:-1,address2:-1,product:-1,qty:-1,price:-1,memo:-1}),[o,l]=H.useState([]),[c,d]=H.useState([]),[u,h]=H.useState([]);H.useEffect(()=>{if(t){d(t.headers||[]),h(t.rows||[]);const g={...n};t.headers.forEach((b,w)=>{const _=b.replace(/\s/g,"").toLowerCase();(_.includes("")||_.includes("")||_.includes(""))&&(g.customer_name=w),(_.includes("")||_.includes("")||_.includes(""))&&(g.mobile=w),(_.includes("")||_.includes(""))&&(g.zip=w),_.includes("")&&!_.includes("")&&(g.address1=w),(_.includes("")||_.includes("")&&_.includes("2"))&&(g.address2=w),(_.includes("")||_.includes(""))&&(g.product=w),_.includes("")&&(g.qty=w),(_.includes("")||_.includes(""))&&(g.price=w),(_.includes("")||_.includes(""))&&(g.memo=w)}),i(g)}},[t]);const f=()=>{const g=u.map(b=>({shipName:n.customer_name!==-1?b[n.customer_name]:"",shipMobile:n.mobile!==-1?Kn(b[n.mobile]):"",shipZip:n.zip!==-1?b[n.zip]:"",shipAddr1:n.address1!==-1?b[n.address1]:"",shipAddr2:n.address2!==-1?b[n.address2]:"",product:n.product!==-1?b[n.product]:"",qty:n.qty!==-1&&parseInt(String(b[n.qty]).replace(/[^0-9]/g,""))||1,price:n.price!==-1&&parseInt(String(b[n.price]).replace(/[^0-9]/g,""))||0,shipMemo:n.memo!==-1?b[n.memo]:""})).filter(b=>b.shipName||b.product);r(g),e()};if(!a)return null;const p=[{key:"customer_name",label:"/",required:!0},{key:"mobile",label:"",required:!0},{key:"product",label:"",required:!0},{key:"qty",label:""},{key:"price",label:""},{key:"zip",label:""},{key:"address1",label:""},{key:"address2",label:""},{key:"memo",label:""}];return s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4",children:s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col overflow-hidden border border-white/20",children:[s.jsxs("div",{className:"px-8 py-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-black text-slate-800 tracking-tight",children:"   "}),s.jsx("p",{className:"text-xs text-slate-400 font-bold mt-1 uppercase tracking-wider",children:"Excel/CSV Column Mapping & Preview"})]}),s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full hover:bg-slate-200 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-slate-400",children:"close"})})]}),s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col p-8 gap-8",children:[s.jsx("div",{className:"grid grid-cols-3 gap-6",children:p.map(g=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 ml-1",children:[g.label," ",g.required&&s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsxs("select",{value:n[g.key],onChange:b=>i(w=>({...w,[g.key]:parseInt(b.target.value)})),className:"w-full h-11 bg-slate-100 border-none rounded-2xl px-4 font-bold text-slate-700 focus:ring-4 focus:ring-indigo-500/10 transition-all text-sm",children:[s.jsx("option",{value:-1,children:"--   --"}),c.map((b,w)=>s.jsx("option",{value:w,children:b},w))]})]},g.key))}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-0 border border-slate-200 rounded-[1.5rem] overflow-hidden",children:[s.jsxs("div",{className:"bg-slate-900 px-6 py-3 text-white flex justify-between items-center",children:[s.jsx("span",{className:"text-xs font-black uppercase tracking-widest opacity-80",children:"  ( 5)"}),s.jsxs("span",{className:"text-[10px] font-bold bg-white/20 px-2 py-0.5 rounded-full",children:[" ",u.length,"  "]})]}),s.jsx("div",{className:"flex-1 overflow-auto bg-slate-50",children:s.jsxs("table",{className:"w-full text-xs text-left border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-slate-100/90 backdrop-blur z-10",children:s.jsx("tr",{children:c.map((g,b)=>s.jsx("th",{className:"p-3 border-b border-slate-200 font-black text-slate-500 uppercase tracking-tighter whitespace-nowrap",children:g},b))})}),s.jsx("tbody",{children:u.slice(0,5).map((g,b)=>s.jsx("tr",{className:"border-b border-slate-200/50 bg-white hover:bg-indigo-50/30 transition-colors",children:g.map((w,_)=>s.jsx("td",{className:"p-3 whitespace-nowrap text-slate-600 font-medium",children:w},_))},b))})]})})]})]}),s.jsxs("div",{className:"p-8 bg-slate-50 border-t border-slate-100 flex justify-end gap-3",children:[s.jsx("button",{onClick:e,className:"h-14 px-8 rounded-2xl border border-slate-200 bg-white font-black text-slate-500 hover:bg-slate-100 transition-all",children:""}),s.jsxs("button",{onClick:f,disabled:n.customer_name===-1||n.product===-1,className:"h-14 px-10 rounded-2xl bg-indigo-600 text-white font-black hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-xl shadow-indigo-200 transition-all transform hover:scale-[1.02] active:scale-95",children:["  (",u.length,")"]})]})]})})},XDe=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState(null),[n,i]=H.useState("sabangnet"),[o,l]=H.useState([]),[c,d]=H.useState([]),[u,h]=H.useState({}),[f,p]=H.useState("upload"),[g,b]=H.useState(!1),[w,_]=H.useState(!1),[k,T]=H.useState(null),[D,I]=H.useState(!1),[O,P]=H.useState({name:"",spec:"1kg",price:"",tag:""}),[V,G]=H.useState(null);H.useEffect(()=>{Q(),$()},[]);const Q=async()=>{try{const Se=await fetch("/api/product/list");if(Se.ok){const Ce=await Se.json();d(Ce.filter(we=>(we.item_type||"product")==="product")||[])}}catch(Se){console.error(Se)}},$=()=>{const Se=localStorage.getItem("online_product_mappings");if(Se){const Ce=JSON.parse(Se);for(const we in Ce)typeof Ce[we]=="number"&&(Ce[we]={id:Ce[we],price:0});h(Ce)}},ae=Se=>{h(Se),localStorage.setItem("online_product_mappings",JSON.stringify(Se))},J=Se=>{Se.target.files&&Se.target.files[0]&&r(Se.target.files[0])},U=async Se=>{try{const Ce=await fetch(`/api/customers/search?name=${encodeURIComponent(Se)}`);return Ce.ok?await Ce.json():[]}catch(Ce){return console.warn(Ce),[]}},F=()=>{if(!t)return;const Se=new FileReader;Se.onload=async Ce=>{const we=Ce.target.result;let be=new TextDecoder("utf-8").decode(we);!be.includes("")&&!be.includes("")&&(be=new TextDecoder("euc-kr").decode(we));try{let Ee=[];if(n==="naver")Ee=K(be);else if(n==="coupang")Ee=ee(be);else if(n==="custom"){const ze=W(be);if(ze.length<2){await a(""," .");return}T({headers:ze[0],rows:ze.slice(1).filter(Ze=>Ze.some(Re=>Re))}),_(!0);return}else Ee=ne(be);if(Ee.length===0){await a("","  .  .");return}for(const ze of Ee)try{if(!ze.mobile){ze.isNewCustomer=!0;continue}const Ze=await U(ze.mobile);Ze&&Ze.length>0?(ze.isNewCustomer=!1,ze.existingCustomerId=Ze[0].customer_id,ze.existingCustomerName=Ze[0].customer_name):ze.isNewCustomer=!0}catch(Ze){console.warn(Ze),ze.isNewCustomer=!0}l(Ee),p("review")}catch(Ee){console.error(Ee),await a(" ",Ee.toString())}},Se.readAsArrayBuffer(t)},W=Se=>Se.split(/\r?\n/).map(we=>{const xe=[];let be="",Ee=!1;for(let ze=0;ze<we.length;ze++){const Ze=we[ze];Ze==='"'?Ee=!Ee:Ze===","&&!Ee?(xe.push(be.trim()),be=""):be+=Ze}return xe.push(be.trim()),xe}),K=Se=>{const Ce=W(Se);if(Ce.length<2)return[];const we=Ce[0],xe={name:we.indexOf(""),orderer:we.indexOf(""),receiver:we.indexOf(""),mobile:we.indexOf("1"),zip:we.indexOf(""),addr:we.indexOf(""),prodName:we.indexOf(""),option:we.indexOf(""),qty:we.indexOf(""),price:we.indexOf(""),orderId:we.indexOf("")};xe.prodName===-1&&(xe.prodName=we.findIndex(Ee=>Ee.includes("")),xe.orderer=we.findIndex(Ee=>Ee.includes("")),xe.receiver=we.findIndex(Ee=>Ee.includes("")),xe.mobile=we.findIndex(Ee=>Ee.includes("")),xe.addr=we.findIndex(Ee=>Ee.includes("")),xe.qty=we.findIndex(Ee=>Ee.includes("")));const be=[];for(let Ee=1;Ee<Ce.length;Ee++){const ze=Ce[Ee];if(!ze[xe.prodName])continue;const Ze=ze[xe.prodName]+(ze[xe.option]?` (${ze[xe.option]})`:""),Re=Uu(ze[xe.price])||0;be.push({orderId:ze[xe.orderId]||"",customerName:ze[xe.orderer]||ze[xe.receiver],receiverName:ze[xe.receiver],mobile:ze[xe.mobile],zip:ze[xe.zip],address:ze[xe.addr],mallProductName:Ze.trim(),qty:parseInt(ze[xe.qty])||1,unitPrice:Re,internalProductId:Z(Ze.trim(),Re)})}return be},ee=Se=>{const Ce=W(Se);if(Ce.length<2)return[];const we=Ce[0],xe={orderId:we.indexOf(""),orderer:we.indexOf(""),receiver:we.indexOf(""),mobile:we.indexOf(""),zip:we.indexOf(""),addr:we.findIndex(Ee=>Ee.includes("")),prodName:we.indexOf(""),qty:we.indexOf(""),price:we.indexOf("")};xe.prodName===-1&&(xe.prodName=we.findIndex(Ee=>Ee.includes("")),xe.orderer=we.findIndex(Ee=>Ee.includes("")||Ee.includes("")),xe.receiver=we.findIndex(Ee=>Ee.includes("")),xe.mobile=we.findIndex(Ee=>Ee.includes("")||Ee.includes("")));const be=[];for(let Ee=1;Ee<Ce.length;Ee++){const ze=Ce[Ee];if(!ze[xe.prodName])continue;const Ze=parseInt(ze[xe.qty])||1,Re=Uu(ze[xe.price])/Ze||0;be.push({orderId:ze[xe.orderId]||"",customerName:ze[xe.orderer]||ze[xe.receiver],receiverName:ze[xe.receiver],mobile:ze[xe.mobile],zip:ze[xe.zip],address:ze[xe.addr],mallProductName:ze[xe.prodName].trim(),qty:Ze,unitPrice:Re,internalProductId:Z(ze[xe.prodName].trim(),Re)})}return be},ne=Se=>{const Ce=W(Se);return Ce.length<2?[]:Ce.slice(1).map(we=>{const xe=Uu(we[6])||0;return{customerName:we[0],mobile:we[1],zip:we[2],address:we[3],mallProductName:we[4],qty:parseInt(we[5])||1,unitPrice:xe,internalProductId:Z(we[4],xe)}}).filter(we=>we.customerName)},re=async Se=>{const Ce=Se.map(we=>({orderId:"EXCEL-"+Date.now().toString().slice(-4),customerName:we.shipName,receiverName:we.shipName,mobile:we.shipMobile,zip:we.shipZip,address:we.shipAddr1+(we.shipAddr2?" "+we.shipAddr2:""),mallProductName:we.product,qty:we.qty,unitPrice:we.price,internalProductId:Z(we.product,we.price)}));for(const we of Ce)try{if(!we.mobile){we.isNewCustomer=!0;continue}const xe=await U(we.mobile);xe&&xe.length>0?(we.isNewCustomer=!1,we.existingCustomerId=xe[0].customer_id,we.existingCustomerName=xe[0].customer_name):we.isNewCustomer=!0}catch(xe){console.warn(xe),we.isNewCustomer=!0}l(Ce),p("review")},Z=(Se,Ce)=>{if(u[Se])return u[Se].id||u[Se];const we=c.find(xe=>Se.includes(xe.product_name)||xe.product_name.includes(Se));return we?Ce>0&&we.unit_price>0&&Math.abs(Ce-we.unit_price)/we.unit_price>.5?null:we.product_id:null},ie=(Se,Ce)=>{if(Ce==="NEW"){G({index:Se,...o[Se]}),P({name:o[Se].mallProductName,spec:"1kg",price:Ve(o[Se].unitPrice),tag:""}),I(!0);return}const we=o[Se],xe=[...o];if(xe[Se]={...we,internalProductId:Ce},l(xe),Ce){const be={...u,[we.mallProductName]:{id:Number(Ce),price:we.unitPrice}};ae(be)}},de=async()=>{if(!V)return;const Se=Uu(O.price);let Ce=O.name;O.tag&&(Ce=`[${O.tag}] ${O.name}`);try{let xe=await(await fetch("/api/product/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:Ce,specification:O.spec,unitPrice:Se,stockQuantity:100,safetyStock:10,costPrice:0})})).json();if(!xe.success)throw new Error(xe.error);const be=xe.productId;await Q();const Ee={...u,[V.mallProductName]:{id:be,price:Se}};ae(Ee),ie(V.index,be),await a("","  ."),I(!1)}catch(we){await a("","  : "+we)}},[fe,he]=H.useState(!1),ve=async()=>{if(n==="generic"){await a("","     .  .");return}he(!0);try{const Se=await fetch(`/api/sales/external/fetch?mallType=${n}`),Ce=await Se.json();if(!Se.ok||Ce&&Ce.success===!1)throw new Error(Ce.error||"Server Error");if(!Ce||Ce.length===0){await a("","    .");return}for(const we of Ce){try{if(!we.mobile){we.isNewCustomer=!0;continue}const xe=await U(we.mobile);xe&&xe.length>0?(we.isNewCustomer=!1,we.existingCustomerId=xe[0].customer_id,we.existingCustomerName=xe[0].customer_name):we.isNewCustomer=!0}catch(xe){console.warn(xe),we.isNewCustomer=!0}we.internalProductId=Z(we.mallProductName,we.unitPrice)}l(Ce),p("review")}catch(Se){await a(" ",Se.toString())}finally{he(!1)}},Oe=async()=>{const Se=o.filter(xe=>!xe.internalProductId).length;if(Se>0){await a("",`${Se}   .`);return}if(!await e("",`${o.length}  ?`))return;let Ce=0,we=0;for(const xe of o)try{let be=xe.existingCustomerId;if(!be){const ut=await(await fetch("/api/customers/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:xe.customerName,mobile:xe.mobile,zip:xe.zip,addr1:xe.address,level:"",memo:`[] ${xe.mallProductName}`})})).json();if(ut.success)be=ut.customerId;else throw new Error(ut.error)}const Ee=c.find(Re=>Re.product_id==xe.internalProductId)||{product_name:"Unknown",unit_price:xe.unitPrice},Ze=await(await fetch("/api/sales/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:be,productName:Ee.product_name,specification:Ee.specification||null,unitPrice:Number(xe.unitPrice),quantity:Number(xe.qty),totalAmount:Number(xe.unitPrice*xe.qty),status:"",memo:`[] ${xe.orderId}`,orderDateStr:new Date().toISOString().split("T")[0],shippingName:xe.receiverName||xe.customerName,shippingZipCode:xe.zip||null,shippingAddressPrimary:xe.address||null,shippingAddressDetail:"",shippingMobileNumber:xe.mobile||null,shippingDate:null,paidAmount:Number(xe.unitPrice*xe.qty)})})).json();Ze.success?Ce++:(console.error(Ze.error),we++)}catch(be){console.error(be),we++}await a("",`: ${Ce}, : ${we}`),p("upload"),r(null),l([])};return s.jsxs("div",{className:"h-full flex flex-col relative overflow-hidden",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1 shrink-0",children:s.jsx("div",{className:"flex justify-center items-center mb-4",children:s.jsxs("div",{className:"inline-flex flex-col items-start",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-teal-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-teal-600 uppercase",children:"Multi-Channel Sync Engine"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Omni-Channel Sync"})]})]})})}),f==="upload"&&s.jsx("div",{className:"flex-1 flex flex-col items-center pt-10 px-8 pb-20",children:s.jsxs("div",{className:"w-[600px] bg-white p-10 rounded-[2.5rem] shadow-2xl border border-slate-100/50 text-center relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 bg-gradient-to-r from-teal-400 via-emerald-400 to-green-400"}),s.jsxs("div",{className:"mb-8 relative z-10",children:[s.jsx("div",{className:"w-24 h-24 mx-auto bg-slate-50 rounded-full flex items-center justify-center mb-4 shadow-inner",children:s.jsx("span",{className:"material-symbols-rounded text-5xl text-teal-500",children:"cloud_sync"})}),s.jsx("h3",{className:"text-2xl font-black text-slate-700 mt-2",children:"  "}),s.jsx("p",{className:"text-slate-400 text-sm font-bold mt-2",children:" API    "})]}),s.jsxs("div",{className:"mb-6 text-left bg-slate-50 p-6 rounded-2xl border border-slate-100",children:[s.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase mb-2 ml-1",children:" "}),s.jsxs("select",{value:n,onChange:Se=>i(Se.target.value),className:"w-full h-12 px-4 rounded-xl bg-white border border-slate-200 font-bold text-slate-700 focus:ring-4 focus:ring-teal-500/20 focus:border-teal-500 transition-all outline-none",children:[s.jsx("option",{value:"sabangnet",children:" (Sabangnet API)"}),s.jsx("option",{value:"playauto",children:" (PlayAuto API)"}),s.jsx("option",{value:"naver",children:"  (Commerce API)"}),s.jsx("option",{value:"coupang",children:" ( API)"}),s.jsx("option",{value:"custom",children:"   (  )"}),s.jsx("option",{value:"generic",children:" (,,,)"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsx("div",{className:"flex flex-col gap-2",children:s.jsxs("button",{onClick:ve,disabled:fe||n==="generic",className:"h-24 rounded-2xl bg-teal-50 border-2 border-teal-100 hover:border-teal-400 hover:bg-teal-100/50 transition-all flex flex-col items-center justify-center gap-2 group disabled:opacity-50 disabled:grayscale",children:[fe?s.jsx("div",{className:"w-6 h-6 border-2 border-teal-500 border-t-transparent rounded-full animate-spin"}):s.jsx("span",{className:"material-symbols-rounded text-3xl text-teal-600 group-hover:scale-110 transition-transform",children:"bolt"}),s.jsx("span",{className:"text-xs font-black text-teal-700",children:"API  "})]})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("button",{onClick:()=>document.getElementById("file-upload").click(),className:"h-24 rounded-2xl bg-slate-50 border-2 border-dashed border-slate-200 hover:border-teal-400 hover:bg-slate-100/50 transition-all flex flex-col items-center justify-center gap-2 group",children:[s.jsx("span",{className:"material-symbols-rounded text-3xl text-slate-400 group-hover:text-teal-600 transition-colors",children:"upload_file"}),s.jsx("span",{className:"text-xs font-black text-slate-500",children:"  "})]}),s.jsx("input",{id:"file-upload",type:"file",onChange:J,className:"hidden",accept:".csv"})]})]}),t&&s.jsxs("div",{className:"mb-4 bg-emerald-50 p-3 rounded-xl flex items-center justify-between border border-emerald-100 animate-in fade-in slide-in-from-top-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-emerald-600 text-sm",children:"check_circle"}),s.jsx("span",{className:"text-[11px] font-bold text-emerald-700",children:t.name})]}),s.jsx("button",{onClick:()=>r(null),className:"text-emerald-400 hover:text-emerald-600",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"close"})})]}),s.jsxs("div",{className:"mt-4 flex gap-3",children:[s.jsx("button",{className:"flex-1 h-12 rounded-xl bg-slate-100 text-slate-500 font-black hover:bg-slate-200 transition-colors",onClick:()=>b(!0),children:"  "}),s.jsx("button",{className:"flex-[2] h-12 rounded-xl bg-teal-600 text-white font-black hover:bg-teal-500 shadow-lg shadow-teal-200 transition-all hover:scale-[1.02] disabled:opacity-50 disabled:scale-100",disabled:!t,onClick:F,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:"  "}),s.jsx("span",{className:"material-symbols-rounded text-lg",children:"arrow_forward"})]})})]})]})}),f==="review"&&s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 mt-1 flex flex-col gap-3 overflow-hidden flex-1 pb-6 lg:pb-8 min-[2000px]:pb-12",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] shadow-xl border border-slate-200 relative flex flex-col h-full overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-teal-400 via-emerald-400 to-green-400 z-10"}),s.jsxs("div",{className:"flex justify-between items-center mb-2 shrink-0 p-5 pb-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-teal-500 animate-pulse"}),s.jsx("span",{className:"text-[11px] font-black text-slate-500 uppercase tracking-widest",children:"  "}),s.jsxs("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-[10px] font-bold ml-2",children:[" ",o.length,""]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{onClick:()=>{p("upload"),l([]),r(null)},className:"h-8 px-3 rounded-lg bg-slate-100 hover:bg-slate-200 text-slate-600 text-xs font-bold flex items-center gap-1 transition-colors",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"arrow_back"})," "]})})]}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar p-0.5",children:s.jsxs("table",{className:"w-full text-xs border-separate border-spacing-0",children:[s.jsx("thead",{className:"sticky top-0 z-10",children:s.jsxs("tr",{className:"bg-slate-50/80 backdrop-blur-md",children:[s.jsx("th",{className:"px-4 py-2 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[5%]",children:"No"}),s.jsx("th",{className:"px-4 py-2 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[20%]",children:""}),s.jsx("th",{className:"px-4 py-2 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[25%]",children:" "}),s.jsx("th",{className:"px-4 py-2 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[25%]",children:"  "}),s.jsx("th",{className:"px-4 py-2 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[15%]",children:"/"}),s.jsx("th",{className:"px-4 py-2 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[10%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:o.map((Se,Ce)=>{const we=!!Se.internalProductId;return s.jsxs("tr",{className:`hover:bg-slate-50/80 transition-colors ${we?"":"bg-red-50/30"}`,children:[s.jsx("td",{className:"px-4 py-3 text-center text-slate-400 font-bold",children:Ce+1}),s.jsxs("td",{className:"px-4 py-3",children:[s.jsxs("div",{className:"font-bold flex gap-2 items-center text-slate-700",children:[Se.customerName,Se.isNewCustomer?s.jsx("span",{className:"bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded text-[10px] font-black uppercase tracking-tight",children:"New"}):s.jsx("span",{className:"bg-purple-50 text-purple-600 px-1.5 py-0.5 rounded text-[10px] font-black uppercase tracking-tight",children:"Exist"})]}),s.jsx("div",{className:"text-[10px] text-slate-400 font-bold mt-0.5",children:Se.mobile})]}),s.jsx("td",{className:"px-4 py-3 text-slate-600 font-medium",children:Se.mallProductName}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("select",{className:`w-full h-8 pl-2 pr-8 rounded-lg text-xs font-bold border outline-none bg-white focus:ring-2 focus:ring-teal-500/20 transition-all appearance-none cursor-pointer
                                                        ${we?"border-slate-200 text-slate-700":"border-red-300 text-red-500 bg-red-50/50"}`,value:Se.internalProductId||"",onChange:xe=>ie(Ce,xe.target.value),style:{backgroundImage:"none"},children:[s.jsx("option",{value:"",children:"--    --"}),s.jsx("option",{value:"NEW",className:"font-black text-blue-600",children:"   ..."}),c.map(xe=>s.jsxs("option",{value:xe.product_id,children:[xe.product_name," (",xe.specification,")"]},xe.product_id))]})}),s.jsxs("td",{className:"px-4 py-3 text-center",children:[s.jsxs("div",{className:"font-bold text-slate-700",children:[Se.qty,""]}),s.jsxs("div",{className:"text-[10px] text-slate-400 font-bold",children:[Ve(Se.unitPrice),""]})]}),s.jsx("td",{className:"px-4 py-3 text-center",children:we?s.jsx("span",{className:"text-emerald-500 font-black text-[10px] bg-emerald-50 px-2 py-1 rounded-full",children:"MATCHED"}):s.jsx("span",{className:"text-red-500 font-black text-[10px] bg-red-50 px-2 py-1 rounded-full animate-pulse",children:"CHECK"})})]},Ce)})})]})}),s.jsxs("div",{className:"bg-slate-900 border-t border-slate-800 p-4 px-8 flex justify-between items-center shrink-0 z-20 h-[88px]",children:[s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40",children:s.jsx("span",{className:"material-symbols-rounded",children:"sync_alt"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:" "}),s.jsxs("div",{className:"flex items-baseline gap-3 text-white",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),s.jsxs("span",{className:"text-sm font-bold",children:[" ",o.filter(Se=>Se.internalProductId).length]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),s.jsxs("span",{className:"text-sm font-bold",children:[" ",o.filter(Se=>!Se.internalProductId).length]})]})]})]})]}),s.jsxs("button",{onClick:Oe,className:"px-10 h-12 rounded-xl bg-teal-600 hover:bg-teal-500 text-white font-black shadow-lg shadow-teal-900/40 transition-all hover:scale-105 text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"cloud_sync"}),s.jsx("span",{className:"text-sm uppercase tracking-tight",children:"  "})]})]})]})}),D&&s.jsxs("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-sm",onClick:()=>I(!1)}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[450px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-slate-900 px-6 py-4 flex justify-between items-center",children:[s.jsx("h3",{className:"text-white font-bold text-lg",children:"   "}),s.jsx("button",{onClick:()=>I(!1),className:"text-slate-400 hover:text-white",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsx("input",{value:O.name,readOnly:!0,className:"w-full h-10 px-3 rounded-xl bg-slate-50 border-none font-bold text-sm text-slate-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:"  ()"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:O.tag,onChange:Se=>P({...O,tag:Se.target.value}),className:"w-24 h-10 px-2 rounded-xl bg-slate-100 border-none font-bold text-sm",children:[s.jsx("option",{value:"",children:"()"}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsx("input",{value:O.name,onChange:Se=>P({...O,name:Se.target.value}),className:"flex-1 h-10 px-3 rounded-xl bg-slate-100 border-none font-bold text-sm focus:ring-2 focus:ring-teal-500"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{value:O.spec,onChange:Se=>P({...O,spec:Se.target.value}),className:"w-full h-10 px-3 rounded-xl bg-slate-100 border-none font-bold text-sm focus:ring-2 focus:ring-teal-500"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{value:O.price,onChange:Se=>P({...O,price:Se.target.value}),className:"w-full h-10 px-3 rounded-xl bg-slate-100 border-none font-bold text-sm text-right focus:ring-2 focus:ring-teal-500"})]})]})]}),s.jsxs("div",{className:"p-4 bg-slate-50 flex justify-end gap-2 border-t border-slate-100",children:[s.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 rounded-xl text-slate-500 font-bold hover:bg-slate-200 text-xs",children:""}),s.jsx("button",{onClick:de,className:"px-6 py-2 rounded-xl bg-teal-600 text-white font-bold hover:bg-teal-500 shadow-lg shadow-teal-200 text-xs",children:"  "})]})]})]}),g&&s.jsxs("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-sm",onClick:()=>b(!1)}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[80vh]",children:[s.jsxs("div",{className:"bg-slate-900 px-6 py-4 flex justify-between items-center shrink-0",children:[s.jsx("h3",{className:"text-white font-bold text-lg",children:"   "}),s.jsx("button",{onClick:()=>b(!1),className:"text-slate-400 hover:text-white",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"flex-1 overflow-auto p-0",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left font-black text-slate-500",children:" "}),s.jsx("th",{className:"px-4 py-3 text-left font-black text-slate-500",children:"  "}),s.jsx("th",{className:"px-4 py-3 w-16 text-center font-black text-slate-500",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:Object.entries(u).map(([Se,Ce])=>{const we=Ce.id||Ce,xe=c.find(be=>be.product_id==we);return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-4 py-3 text-slate-600 font-medium",children:Se}),s.jsx("td",{className:"px-4 py-3 text-blue-600 font-bold",children:xe?`${xe.product_name} (${xe.specification})`:`ID: ${we} ()`}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("button",{onClick:()=>{const be={...u};delete be[Se],ae(be)},className:"w-8 h-8 rounded-lg hover:bg-red-50 text-slate-300 hover:text-red-500 transition-colors flex items-center justify-center mx-auto",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"delete"})})})]},Se)})})]})})]})]}),s.jsx(qDe,{isOpen:w,onClose:()=>_(!1),fileData:k,onImport:re})]})},ZDe=`
    @media print {
        @page { size: A4 landscape; margin: 0; }
        html, body { 
            background: white !important; 
            color: black !important;
            color-scheme: light !important;
            margin: 0 !important;
            padding: 0 !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
        #printable-shipping-report {
            display: block !important;
            position: absolute !important;
            left: 0 !important;
            top: 0 !important;
            width: 100% !important;
            padding: 10mm !important;
            visibility: visible !important;
            background: white !important;
        }
        #printable-shipping-report * {
            visibility: visible !important;
            border-color: black !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
    }
    .print-report-wrapper { 
        font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; 
        color: #000; 
        width: 100%;
    }
    .report-card {
        border: 2px solid #000 !important;
        padding: 30px;
        background: white !important;
    }
    .report-header h1 { 
        margin: 0; 
        font-size: 32px; 
        font-weight: 900; 
        letter-spacing: 0.3em; 
        border-bottom: 5px double #000 !important;
        display: inline-block;
        padding: 0 50px 10px 50px;
    }
    table { 
        width: 100%; 
        border-collapse: collapse !important; 
        font-size: 10px; 
        border: 2px solid #000 !important; 
        table-layout: fixed;
    }
    th, td { 
        border: 1px solid #000 !important; 
        padding: 6px 4px; 
        text-align: center; 
    }
    th { 
        background: #f0f0f0 !important; 
        font-weight: 900; 
        border-bottom: 2px solid #000 !important;
    }
    .bg-row { background: #fafafa !important; }
    .summary-table {
        width: 400px;
        border: 2px solid #000 !important;
    }
    .summary-table th, .summary-table td { border: 1px solid #000 !important; }
`,KDe=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState(""),[n,i]=H.useState({start:new Date(Date.now()-10080*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),[o,l]=H.useState(""),[c,d]=H.useState([]),[u,h]=H.useState(new Set),[f,p]=H.useState(!1),[g,b]=H.useState(!1),[w,_]=H.useState(!1),[k,T]=H.useState(!1),[D,I]=H.useState([]),[O,P]=H.useState({date:new Date().toISOString().split("T")[0],carrier:"CJ",trackingMap:{}}),V=H.useCallback(async()=>{b(!0);try{const re=["","","","","","",""];let Z=[];for(const ie of re){const de=await pt("get_shipments_by_status",{status:ie,search:o,startDate:n.start,endDate:n.end}),fe=Array.isArray(de)?de:[];Z=Z.concat(fe.map(he=>({...he,current_status:ie})))}Z.sort((ie,de)=>new Date(de.order_date)-new Date(ie.order_date)),d(Z)}catch(re){console.error("Load Error:",re)}finally{b(!1)}},[n,o]);H.useEffect(()=>{V()},[V]);const G=H.useMemo(()=>t===""?c:c.filter(re=>re.current_status===t),[c,t]),Q=H.useMemo(()=>({all:c.length,receipt:c.filter(re=>re.current_status==="").length,pending:c.filter(re=>re.current_status==="").length,paid:c.filter(re=>["",""].includes(re.current_status)).length,shipping:c.filter(re=>re.current_status==="").length,completed:c.filter(re=>re.current_status==="").length}),[c]),$=re=>{const Z=new Set(u);Z.has(re)?Z.delete(re):Z.add(re),h(Z)},ae=re=>{if(re){const Z=new Set(G.filter(ie=>ie.current_status!=="").map(ie=>ie.sales_id));h(Z)}else h(new Set)},J=async re=>{const Z=c.filter(ie=>u.has(ie.sales_id));if(Z.length===0){a("","  .");return}if(re==="set_pending"){if(await e("  ",` ${Z.length} ''  ?`))try{for(const ie of Z)await pt("update_sale_status",{salesId:String(ie.sales_id),status:""});a("","."),V(),h(new Set)}catch(ie){a("",`  : ${ie}`)}}else if(re==="confirm_payment"){if(await e(" ",` ${Z.length} '' ?`))try{for(const ie of Z)await pt("update_sale_status",{salesId:String(ie.sales_id),status:""});a("","."),V(),h(new Set)}catch(ie){a("",`  : ${ie}`)}}else if(re==="shipping_process"){const ie=Z.filter(fe=>["","",""].includes(fe.current_status)),de=()=>{I(Z),P(fe=>({...fe,trackingMap:Z.reduce((he,ve)=>({...he,[ve.sales_id]:""}),{})})),_(!0)};ie.length>0?await e("   ",`   ${ie.length}     ('', '').

      '' .
   ?`)&&de():de()}else if(re==="delete")await e("",` ${Z.length}  ?`)&&a("","    .");else if(re==="complete_delivery"&&await e("  ",` ${Z.length} '' ?
    .`))try{for(const ie of Z)await pt("update_sale_status",{salesId:String(ie.sales_id),status:""});a("","  ."),V(),h(new Set)}catch(ie){a("",`  : ${ie}`)}},U=async()=>{try{for(const re of D){const Z=O.trackingMap[re.sales_id];await pt("complete_shipment",{salesId:String(re.sales_id),carrier:O.carrier,trackingNumber:Z||null,shippingDate:O.date,memo:re.memo})}_(!1),a("","  ."),V(),h(new Set)}catch(re){a("",`  : ${re}`)}},F=(re,Z)=>{P(ie=>({...ie,trackingMap:{...ie.trackingMap,[re]:Z}}))},W=async()=>{if(G.length===0){a("","  .");return}const Z=[["","","","","","","","","","",""].join(","),...G.map(fe=>[fe.order_date.substring(0,10),fe.current_status,`"${fe.customer_name}"`,`"${fe.mobile_number}"`,`"${fe.product_name}"`,`"${fe.specification}"`,fe.quantity,fe.total_amount,`"${fe.courier_name||""}"`,`"${fe.tracking_number||""}"`,`"${fe.memo||""}"`].join(","))].join(`
`),ie=new Blob(["\uFEFF"+Z],{type:"text/csv;charset=utf-8;"}),de=document.createElement("a");de.href=URL.createObjectURL(ie),de.download=`_${new Date().toISOString().slice(0,10)}.csv`,de.click(),a("","CSV   .")},K=()=>{const re=document.getElementById("printable-shipping-content");if(!re)return;const Z=`
            <style>
                ${ZDe}
                @page { size: A4 landscape; margin: 10mm; }
                body { font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; margin: 0; padding: 10mm; }
            </style>
            ${re.outerHTML}
        `;El(Z)},ee=async(re,Z)=>{if(re.stopPropagation(),!Z.tracking_number)return;let ie="";const de=Z.tracking_number.replace(/[^0-9]/g,""),fe=Z.courier_name||"";fe.includes("CJ")||fe.includes("")?ie=`https://www.cjlogistics.com/ko/tool/parcel/tracking?gnrlCode=${de}`:fe.includes("")?ie=`https://service.epost.go.kr/trace.RetrieveDomRgiTraceList.comm?sid1=${de}`:fe.includes("")?ie=`https://www.lotteglogis.com/home/reservation/tracking/index?InvNo=${de}`:fe.includes("")?ie=`https://www.hanjin.com/kor/CMS/DeliveryMgr/WaybillResult.do?mCode=MN038&wblNum=${de}`:fe.includes("")?ie=`https://www.ilogen.com/web/personal/trace/${de}`:ie=`https://search.naver.com/search.naver?query=${de}`,ie&&window.open(ie,"_blank","noopener,noreferrer")},ne=({status:re})=>{const Z={:"bg-slate-100 text-slate-600 border-slate-200",:"bg-rose-50 text-rose-600 border-rose-100",:"bg-amber-50 text-amber-600 border-amber-100",:"bg-indigo-50 text-indigo-600 border-indigo-100",:"bg-blue-50 text-blue-600 border-blue-100",:"bg-purple-50 text-purple-600 border-purple-100",:"bg-emerald-50 text-emerald-600 border-emerald-100"},ie=Z[re]||Z.;return s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black border ${ie}`,children:re})};return s.jsxs("div",{id:"print-root",className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1 no-print",children:[s.jsxs("div",{className:"flex justify-between items-end mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-emerald-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-emerald-600 uppercase",children:"Logistics System"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Shipping"})]})]}),s.jsxs("button",{onClick:()=>p(!f),className:"no-print flex items-center gap-1 text-slate-400 hover:text-emerald-600 transition-colors text-xs font-bold bg-white px-3 py-1.5 rounded-full border border-slate-100 hover:border-emerald-200 shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"help"}),s.jsx("span",{children:" "})]})]}),f&&s.jsx("div",{className:"mb-4 bg-slate-50 border border-slate-200 rounded-2xl p-4 animate-in fade-in slide-in-from-top-2 duration-300 shadow-sm",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-black border bg-slate-100 text-slate-600 border-slate-200",children:""}),s.jsx("span",{className:"text-sm font-bold text-slate-700",children:"   "})]}),s.jsxs("p",{className:"text-xs text-slate-500 leading-relaxed pl-1",children:["    ,      .",s.jsx("br",{}),"     ."]})]}),s.jsx("div",{className:"hidden md:block w-px bg-slate-200"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-black border bg-rose-50 text-rose-600 border-rose-100",children:""}),s.jsx("span",{className:"text-sm font-bold text-slate-700",children:"    "})]}),s.jsxs("p",{className:"text-xs text-slate-500 leading-relaxed pl-1",children:[" ",s.jsx("strong",{children:" (Confirm)"}),",        .",s.jsx("br",{}),"''      ''     ."]})]}),s.jsx("div",{className:"hidden md:block w-px bg-slate-200"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-black border bg-indigo-50 text-indigo-600 border-indigo-100",children:""}),s.jsx("span",{className:"text-sm font-bold text-slate-700",children:"   "})]}),s.jsxs("p",{className:"text-xs text-slate-500 leading-relaxed pl-1",children:[s.jsx("strong",{children:"[  ]"}),"    API(  )     .",s.jsx("br",{}),"     ",s.jsx("strong",{children:"''"}),"  ."]})]})]})}),s.jsx("div",{className:"grid grid-cols-6 gap-3 mb-4 no-print",children:[{label:"",count:Q.all,icon:"inventory_2",color:"slate"},{label:"",count:Q.receipt,icon:"receipt_long",color:"sky"},{label:"",count:Q.pending,icon:"payments",color:"cyan"},{label:"",count:Q.paid,icon:"credit_score",color:"teal"},{label:"",count:Q.shipping,icon:"local_shipping",color:"emerald"},{label:"",count:Q.completed,icon:"check_circle",color:"slate"}].map(re=>s.jsxs("div",{onClick:()=>{r(re.label),h(new Set)},className:`p-3 rounded-[1.5rem] border transition-all cursor-pointer relative overflow-hidden group hover:shadow-md 
                                ${t===re.label?`bg-${re.color}-50 border-${re.color}-600 ring-1 ring-${re.color}-600 shadow-md transform scale-[1.02]`:`bg-white border-slate-200 hover:border-${re.color}-300 hover:bg-${re.color}-50/30`}
                            `,children:[s.jsx("div",{className:`absolute top-0 right-0 p-3 transition-opacity ${t===re.label?"opacity-20":"opacity-10 group-hover:opacity-20"} text-${re.color}-600`,children:s.jsx("span",{className:"material-symbols-rounded text-4xl",children:re.icon})}),s.jsx("div",{className:`text-[10px] font-bold uppercase tracking-wider mb-0.5 ${t===re.label?`text-${re.color}-900`:"text-slate-500"}`,children:re.label}),s.jsx("div",{className:`text-2xl font-black ${t===re.label?`text-${re.color}-700`:"text-slate-700"}`,children:re.count})]},re.label))}),s.jsxs("div",{className:"flex items-center justify-between gap-3 bg-white p-3 rounded-[1.2rem] border border-slate-200 shadow-sm mb-2 no-print",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 pl-2 border-r border-slate-200 pr-4",children:[s.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" "}),s.jsx("input",{type:"date",value:n.start,onChange:re=>i({...n,start:re.target.value}),className:"h-8 rounded-lg border-slate-200 text-xs font-bold text-slate-600 focus:ring-emerald-500"}),s.jsx("span",{className:"text-slate-300",children:"~"}),s.jsx("input",{type:"date",value:n.end,onChange:re=>i({...n,end:re.target.value}),className:"h-8 rounded-lg border-slate-200 text-xs font-bold text-slate-600 focus:ring-emerald-500"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{value:o,onChange:re=>l(re.target.value),placeholder:", , ...",className:"h-8 w-64 rounded-lg border-slate-200 pl-8 text-xs font-bold focus:ring-emerald-500"}),s.jsx("span",{className:"material-symbols-rounded absolute left-2 top-1.5 text-slate-400 text-base",children:"search"})]}),s.jsx("button",{onClick:V,className:"h-8 w-8 rounded-lg bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-500",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"})}),s.jsxs("button",{onClick:async()=>{b(!0);try{const re=await pt("batch_sync_courier_statuses"),Z=typeof re=="object"&&re?.count!==void 0?re.count:re;a(" ",`${Z}   .`),V()}catch(re){a("",` : ${re}`)}finally{b(!1)}},className:"h-8 px-3 rounded-lg bg-indigo-50 text-indigo-600 hover:bg-indigo-100 font-bold text-[10px] flex items-center gap-1.5 transition-all",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"sync_alt"}),"  "]})]}),s.jsx("div",{className:"flex items-center gap-2",children:u.size>0&&(()=>{const re=c.filter(he=>u.has(he.sales_id)),Z=re.some(he=>he.current_status===""),ie=re.some(he=>["","",""].includes(he.current_status)),de=re.some(he=>["","","","",""].includes(he.current_status)),fe=re.some(he=>he.current_status==="");return s.jsxs("div",{className:"flex gap-2 animate-in fade-in slide-in-from-right-4 duration-300",children:[Z&&s.jsxs("button",{onClick:()=>J("set_pending"),className:"h-8 px-3 rounded-lg bg-amber-50 text-amber-600 hover:bg-amber-100 font-bold text-xs flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"hourglass_top"})," "]}),ie&&s.jsxs("button",{onClick:()=>J("confirm_payment"),className:"h-8 px-3 rounded-lg bg-indigo-50 text-indigo-600 hover:bg-indigo-100 font-bold text-xs flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"check_circle"})," "]}),de&&s.jsxs("button",{onClick:()=>J("shipping_process"),className:"h-8 px-3 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700 font-bold text-xs flex items-center gap-1 shadow-sm shadow-emerald-200",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"local_shipping"})," "]}),fe&&s.jsxs("button",{onClick:()=>J("complete_delivery"),className:"h-8 px-3 rounded-lg bg-slate-800 text-white hover:bg-slate-900 font-bold text-xs flex items-center gap-1 shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"task_alt"})," "]})]})})()})]})]}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-6 lg:pb-8 min-[2000px]:pb-12 overflow-hidden flex flex-col no-print",children:s.jsxs("div",{className:"flex-1 bg-white rounded-[1.5rem] shadow-sm border border-slate-200 relative overflow-hidden flex flex-col",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-emerald-500 to-teal-400"}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar p-0.5",children:s.jsxs("table",{className:"w-full text-xs border-separate border-spacing-0",children:[s.jsx("thead",{className:"sticky top-0 z-10 bg-slate-50/95 backdrop-blur",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 border-b border-slate-100 w-10 text-center",children:G.length>0&&G.some(re=>re.current_status!=="")&&s.jsx("input",{type:"checkbox",onChange:re=>ae(re.target.checked),className:"rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"})}),s.jsx("th",{className:"px-4 py-3 border-b border-slate-100 text-left font-black text-slate-400 uppercase text-[9px]",children:""}),s.jsx("th",{className:"px-4 py-3 border-b border-slate-100 text-left font-black text-slate-400 uppercase text-[9px]",children:""}),s.jsx("th",{className:"px-4 py-3 border-b border-slate-100 text-left font-black text-slate-400 uppercase text-[9px]",children:""}),s.jsx("th",{className:"px-4 py-3 border-b border-slate-100 text-left font-black text-slate-400 uppercase text-[9px]",children:"/"}),s.jsx("th",{className:"px-4 py-3 border-b border-slate-100 text-right font-black text-slate-400 uppercase text-[9px]",children:""}),s.jsx("th",{className:"px-4 py-3 border-b border-slate-100 text-center font-black text-slate-400 uppercase text-[9px]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:g?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"p-20 text-center text-slate-400 bg-slate-50/30 animate-pulse",children:"  ..."})}):G.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"p-20 text-center text-slate-400",children:"   ."})}):G.map(re=>{const Z=re.current_status==="";return s.jsxs("tr",{onClick:()=>!Z&&$(re.sales_id),className:`group hover:bg-slate-50/80 transition-all cursor-pointer ${u.has(re.sales_id)?"bg-emerald-50/30":""} ${Z?"opacity-70 grayscale":""}`,children:[s.jsx("td",{className:"px-4 py-3 text-center border-b border-slate-50",onClick:ie=>ie.stopPropagation(),children:!Z&&s.jsx("input",{type:"checkbox",checked:u.has(re.sales_id),onChange:()=>$(re.sales_id),className:"rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"})}),s.jsx("td",{className:"px-4 py-3 border-b border-slate-50 font-bold text-slate-600",children:re.order_date.substring(0,10)}),s.jsx("td",{className:"px-4 py-3 border-b border-slate-50",children:s.jsx(ne,{status:re.current_status})}),s.jsxs("td",{className:"px-4 py-3 border-b border-slate-50",children:[s.jsx("div",{className:"font-black text-slate-800 text-sm mb-0.5",children:re.customer_name}),s.jsx("div",{className:"text-[10px] text-slate-400 font-bold",children:Kn(re.mobile_number)})]}),s.jsxs("td",{className:"px-4 py-3 border-b border-slate-50",children:[s.jsxs("div",{className:"font-bold text-slate-700 mb-1",children:[re.product_name," ",s.jsxs("span",{className:"text-slate-400 font-normal",children:["(",re.specification,")"]})," x ",re.quantity]}),s.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-slate-500",children:[s.jsx("span",{className:"material-symbols-rounded text-[14px] text-slate-300",children:"local_shipping"}),s.jsx("span",{className:"text-slate-600 truncate max-w-[200px]",title:re.shipping_address_primary,children:re.shipping_address_primary}),s.jsx("span",{className:"font-bold text-emerald-600 shrink-0",children:re.shipping_name!==re.customer_name?`(${re.shipping_name})`:""})]})]}),s.jsx("td",{className:"px-4 py-3 border-b border-slate-50 text-right font-black text-slate-700",children:Ve(re.total_amount)}),s.jsx("td",{className:"px-4 py-3 border-b border-slate-50 text-center",children:re.tracking_number?s.jsxs("div",{onClick:ie=>ee(ie,re),className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-slate-100 border border-slate-200 text-slate-600 cursor-pointer hover:bg-emerald-50 hover:text-emerald-700 hover:border-emerald-200 transition-all group/track",children:[s.jsx("span",{className:"text-[10px] font-bold",children:re.courier_name}),s.jsx("span",{className:"text-[11px] font-black tracking-wide group-hover/track:underline decoration-emerald-400 decoration-2 underline-offset-2",children:re.tracking_number}),s.jsx("span",{className:"material-symbols-rounded text-[14px] text-slate-400 group-hover/track:text-emerald-500",children:"open_in_new"})]}):s.jsx("span",{className:"text-[11px] text-slate-300 font-medium",children:"-"})})]},re.sales_id)})})]})})]})}),s.jsx("div",{id:"printable-shipping-report",style:{display:"none"},children:s.jsx("div",{style:{fontFamily:'"Malgun Gothic", sans-serif',padding:"0",color:"#000",width:"100%"},children:s.jsxs("div",{style:{border:"2px solid #000",padding:"30px",backgroundColor:"#fff"},children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[s.jsx("h1",{style:{margin:"0",fontSize:"32px",fontWeight:"900",letterSpacing:"0.3em",borderBottom:"5px double #000",display:"inline-block",padding:"0 50px 10px 50px"},children:"    "}),s.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"space-between",fontSize:"14px",fontWeight:"bold"},children:[s.jsxs("span",{children:[" : ",s.jsxs("strong",{children:[n.start," ~ ",n.end]})]}),s.jsxs("span",{children:[" : ",new Date().toLocaleString()]})]})]}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"2px solid #000",tableLayout:"fixed"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"35px",fontWeight:"900"},children:"No"}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"60px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",paddingLeft:"10px",fontWeight:"900"},children:"  / "}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"40px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",paddingLeft:"10px",fontWeight:"900"},children:"  / "}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"120px",fontWeight:"900"},children:" "})]})}),s.jsx("tbody",{children:G.map((re,Z)=>s.jsxs("tr",{style:{backgroundColor:Z%2===1?"#fafafa":"#fff"},children:[s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:Z+1}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:re.order_date.substring(0,10)}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:re.current_status}),s.jsxs("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:[re.customer_name,s.jsx("div",{style:{fontSize:"8px",fontWeight:"normal"},children:Kn(re.mobile_number)})]}),s.jsxs("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left"},children:[s.jsx("div",{style:{fontWeight:"900"},children:re.product_name}),s.jsx("div",{style:{fontSize:"9px",color:"#555"},children:re.specification||"-"})]}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:re.quantity}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"right"},children:re.total_amount.toLocaleString()}),s.jsxs("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",fontSize:"9px"},children:[s.jsxs("div",{children:[re.shipping_address_primary," ",re.shipping_address_detail||""]}),re.shipping_name!==re.customer_name&&s.jsxs("div",{style:{fontWeight:"900",borderTop:"1px dashed #ccc",marginTop:"2px"},children:[": ",re.shipping_name]})]}),s.jsxs("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontSize:"9px"},children:[re.courier_name&&s.jsx("div",{style:{color:"#666"},children:re.courier_name}),s.jsx("div",{style:{fontWeight:"900"},children:re.tracking_number||"-"})]})]},Z))})]}),s.jsx("div",{style:{marginTop:"30px",display:"flex",justifyContent:"flex-end"},children:s.jsx("table",{style:{width:"400px",border:"2px solid #000",borderCollapse:"collapse"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",backgroundColor:"#f0f0f0",width:"50%",fontSize:"11px"},children:" () "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"14px",fontWeight:"900"},children:[G.length," "]})]}),s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",fontSize:"11px"},children:"   "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"14px",fontWeight:"900",color:"#d32f2f"},children:[" ",Ve(G.reduce((re,Z)=>re+Z.total_amount,0))]})]})]})})}),s.jsx("div",{style:{marginTop:"40px",textAlign:"center",fontSize:"12px",fontWeight:"bold",color:"#444"},children:"       ."}),s.jsx("div",{style:{marginTop:"50px",textAlign:"center",fontSize:"10px",color:"#999",borderTop:"1px solid #eee",paddingTop:"10px"},children:" Mycelium Smart Farm Integration System - All Rights Reserved."})]})})}),s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pb-6 lg:pb-8 min-[2000px]:pb-12 flex justify-end gap-2 animate-in slide-in-from-bottom-2 duration-500 delay-100 no-print",children:[s.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-1.5 px-4 py-2 rounded-xl bg-white border border-slate-200 text-slate-600 font-bold text-xs hover:bg-slate-50 hover:border-slate-300 shadow-sm transition-all",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"print"})," "]}),s.jsxs("button",{onClick:W,className:"flex items-center gap-1.5 px-4 py-2 rounded-xl bg-teal-600 text-white font-bold text-xs hover:bg-teal-700 shadow-sm shadow-teal-200 transition-all",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"download"}),"CSV "]})]}),w&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm animate-in fade-in",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] shadow-2xl w-[600px] overflow-hidden animate-in zoom-in-95 duration-300",children:[s.jsxs("div",{className:"p-5 bg-slate-900 text-white flex justify-between items-center",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"local_shipping"}),"  "]}),s.jsx("button",{onClick:()=>_(!1),className:"opacity-70 hover:opacity-100 transition-opacity",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase block mb-1",children:""}),s.jsx("input",{type:"date",value:O.date,onChange:re=>P({...O,date:re.target.value}),className:"w-full rounded-xl border-slate-200 font-bold text-sm focus:ring-emerald-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase block mb-1",children:""}),s.jsxs("select",{value:O.carrier,onChange:re=>P({...O,carrier:re.target.value}),className:"w-full rounded-xl border-slate-200 font-bold text-sm focus:ring-emerald-500",children:[s.jsx("option",{value:"CJ",children:"CJ"}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:"/"})]})]})]}),s.jsx("div",{className:"mb-2 flex justify-between items-end",children:s.jsxs("span",{className:"text-xs font-bold text-slate-500",children:["   (",D.length,")"]})}),s.jsx("div",{className:"max-h-[300px] overflow-y-auto border border-slate-100 rounded-xl bg-slate-50 p-2 stylish-scrollbar",children:D.map((re,Z)=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-slate-100 shadow-sm mb-2 last:mb-0",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-600 font-black text-xs",children:Z+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"font-bold text-slate-800 text-sm truncate",children:[re.customer_name," ",s.jsxs("span",{className:"text-slate-400 font-normal",children:[" ",re.shipping_name]})]}),s.jsx("div",{className:"text-[11px] text-slate-500 truncate",children:re.product_name})]}),s.jsx("div",{className:"w-40",children:s.jsx("input",{autoFocus:Z===0,placeholder:"",value:O.trackingMap[re.sales_id]||"",onChange:ie=>F(re.sales_id,ie.target.value),className:"w-full h-8 rounded-lg border-slate-200 text-sm font-bold focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 transition-all"})})]},re.sales_id))})]}),s.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>_(!1),className:"px-5 py-2.5 rounded-xl text-slate-500 font-bold hover:bg-slate-200 transition-all text-xs",children:""}),s.jsxs("button",{onClick:U,className:"px-6 py-2.5 rounded-xl bg-emerald-600 text-white font-black hover:bg-emerald-700 shadow-lg shadow-emerald-200 transition-all text-xs flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"send"}),"   "]})]})]})}),k&&s.jsxs("div",{className:"fixed inset-0 z-[300] bg-slate-900/80 backdrop-blur-md flex items-center justify-center p-4",children:[s.jsxs("div",{className:"fixed top-8 right-8 flex flex-col gap-4 z-[310]",children:[s.jsx("button",{onClick:()=>T(!1),className:"w-14 h-14 bg-white text-slate-400 rounded-2xl shadow-2xl hover:text-rose-500 hover:scale-110 active:scale-95 transition-all flex items-center justify-center group",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-3xl group-hover:rotate-90 transition-transform duration-300",children:"close"})}),s.jsx("div",{className:"h-px bg-white/20 w-full"}),s.jsxs("button",{onClick:K,className:"h-14 px-8 rounded-2xl font-black text-sm bg-indigo-600 text-white shadow-2xl shadow-indigo-500/30 hover:bg-indigo-700 hover:-translate-y-1 active:translate-y-0 transition-all flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-xl",children:"print"})," "]})]}),s.jsx("div",{className:"w-full max-w-[297mm] h-[210mm] max-h-[90vh] bg-white rounded-[1rem] shadow-2xl overflow-y-auto overflow-x-hidden relative custom-scrollbar",children:s.jsx("div",{id:"printable-shipping-content",className:"p-[10mm]",children:s.jsx("div",{style:{fontFamily:'"Malgun Gothic", sans-serif',color:"#000",width:"100%"},children:s.jsxs("div",{style:{border:"2px solid #000",padding:"30px",backgroundColor:"#fff"},children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[s.jsx("h1",{style:{margin:"0",fontSize:"32px",fontWeight:"900",letterSpacing:"0.3em",borderBottom:"5px double #000",display:"inline-block",padding:"0 50px 10px 50px"},children:"   "}),s.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"space-between",fontSize:"14px",fontWeight:"bold"},children:[s.jsxs("span",{children:[" : ",s.jsxs("strong",{children:[n.start," ~ ",n.end]})]}),s.jsxs("span",{children:[" : ",new Date().toLocaleString()]})]})]}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"2px solid #000",tableLayout:"fixed"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"35px",fontWeight:"900"},children:"No"}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"60px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"70px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"70px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"90px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",paddingLeft:"10px",fontWeight:"900"},children:" "}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",paddingLeft:"10px",fontWeight:"900"},children:"/"}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"35px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""})]})}),s.jsx("tbody",{children:G.map((re,Z)=>s.jsxs("tr",{style:{backgroundColor:Z%2===1?"#fafafa":"#fff"},children:[s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:Z+1}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:re.current_status}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:re.order_date.substring(0,10)}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:re.shipping_name}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:re.shipping_mobile_number?Kn(re.shipping_mobile_number):"-"}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",fontSize:"9px",lineHeight:"1.2"},children:re.shipping_address_primary}),s.jsxs("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left"},children:[s.jsx("div",{style:{fontWeight:"900"},children:re.product_name}),s.jsx("div",{style:{fontSize:"8px",color:"#555"},children:re.specification||""})]}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:re.quantity}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontSize:"9px"},children:re.tracking_number||"-"})]},Z))})]}),s.jsx("div",{style:{marginTop:"30px",display:"flex",justifyContent:"flex-end"},children:s.jsx("table",{style:{width:"300px",border:"2px solid #000",borderCollapse:"collapse"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",width:"50%",fontSize:"11px"},children:"  "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"14px",fontWeight:"900"},children:[G.length," "]})]}),s.jsxs("tr",{children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",fontSize:"11px"},children:"  "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"14px",fontWeight:"900",color:"#d32f2f"},children:[G.reduce((re,Z)=>re+(Z.quantity||0),0).toLocaleString()," "]})]})]})})}),s.jsx("div",{style:{marginTop:"40px",textAlign:"center",fontSize:"12px",fontWeight:"bold"},children:"    ."}),s.jsx("div",{style:{marginTop:"50px",textAlign:"center",fontSize:"10px",color:"#999",borderTop:"1px solid #eee",paddingTop:"10px"},children:" Mycelium Smart Farm Integration System - All Rights Reserved."})]})})})})]})]})},QDe=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState([]),[n,i]=H.useState({start:new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),o=H.useMemo(()=>({pending:t.filter(J=>J.claim_status===""||J.claim_status==="").length,today:t.filter(J=>J.created_at?.startsWith(new Date().toISOString().split("T")[0])).length}),[t]),[l,c]=H.useState({open:!1,claim:null,refundAmount:0,recoverInventory:!1,memo:""}),[d,u]=H.useState({open:!1,claim:null,category:"",qty:0,memo:""}),[h,f]=H.useState({open:!1,saleId:null,data:null}),[p,g]=H.useState({open:!1,query:"",results:[],loading:!1}),[b,w]=H.useState({open:!1,sale:null,type:"",category:"",qty:1,memo:""});H.useEffect(()=>{_()},[n]);const _=async()=>{try{const J=await pt("get_sales_claims",{startDate:n.start||null,endDate:n.end||null});Array.isArray(J)?(J.sort((U,F)=>new Date(F.created_at)-new Date(U.created_at)),r(J)):r([])}catch(J){console.error(J),r([])}},k=async J=>{await e(" ",`   ?
     .`)&&T(J)},T=async J=>{try{await pt("delete_sales_claim",{claimId:J}),a("","."),_()}catch(U){a(""," : "+U)}},D=J=>{c({open:!0,claim:J,refundAmount:0,recoverInventory:J.claim_type==="",memo:""})},I=async J=>{await e(" ",`  '${J}' ?`)&&O(J)},O=async J=>{const{claim:U,refundAmount:F,recoverInventory:W,memo:K}=l;try{const ee=Number(String(F).replace(/[^0-9]/g,""));await pt("process_sales_claim",{claimId:U.claim_id,claimStatus:J,isInventoryRecovered:W,refundAmount:ee});let ne=!1;if(J===""&&U.customer_id){const Z=`[ ] ${U.claim_type}   `,ie=`: ${U.sales_id}
: ${U.claim_type}
: ${U.reason_category}
: ${U.memo||"-"}

[ ]
: ${Ve(ee)}
: ${K||"-"}`;try{await pt("create_consultation",{customerId:U.customer_id,guestName:U.customer_name||"",contact:"",channel:"",counselorName:"",category:"",priority:"",title:Z,content:ie}),ne=!0,console.log("CRM Log created successfully")}catch(de){console.error("CRM Log failed:",de),a("","  , CRM    : "+de)}}c({...l,open:!1});let re=`  ${J}.`;ne&&(re+=`
(CRM    )`),a("",re),_()}catch(ee){a(""," : "+ee)}},P=J=>{u({open:!0,claim:J,category:J.reason_category,qty:J.quantity,memo:J.memo||""})},V=async()=>{try{await pt("update_sales_claim",{claimId:d.claim.claim_id,reasonCategory:d.category,quantity:Number(d.qty),memo:d.memo}),u({...d,open:!1}),a("","."),_()}catch(J){a(""," : "+J)}},G=async J=>{if(!J){a("","   .");return}f({open:!0,saleId:J,data:null});try{const U=await pt("get_sale_detail",{salesId:J});f(F=>({...F,data:U}))}catch(U){console.error("Failed to fetch sale detail:",U),f(F=>({...F,error:U}))}},Q=async()=>{if(p.query){g(J=>({...J,loading:!0,results:[]}));try{const J=await pt("search_sales_by_any",{query:p.query,period:"all"});g(U=>({...U,results:Array.isArray(J)?J:[],loading:!1}))}catch(J){console.error(J),g(U=>({...U,loading:!1}))}}},$=J=>{const U=["","","",""].includes(J.status);w({open:!0,sale:J,type:U?"":"",category:"",qty:J.quantity,memo:""}),g({...p,open:!1})},ae=async()=>{try{await pt("create_sales_claim",{salesId:b.sale.sales_id,customerId:b.sale.customer_id||null,claimType:b.type,reasonCategory:b.category,quantity:Number(b.qty),memo:b.memo}),w({...b,open:!1}),a(""," ."),_()}catch(J){a(""," : "+J)}};return s.jsxs("div",{className:"h-full flex flex-col relative overflow-hidden",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1 shrink-0",children:s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-rose-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-rose-600 uppercase",children:"Claims Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["//  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Claims"})]})]})})}),s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 mb-3 shrink-0",children:s.jsxs("div",{className:"bg-white p-4 rounded-[2rem] shadow-xl border border-slate-100 flex justify-between items-center relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-rose-400 via-pink-400 to-rose-400 opacity-30"}),s.jsxs("div",{className:"flex gap-6 items-center z-10",children:[s.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 px-4 py-2 rounded-xl border border-slate-100",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wider",children:" "}),s.jsx("div",{className:"h-4 w-px bg-slate-200"}),s.jsx("input",{type:"date",value:n.start,onChange:J=>i({...n,start:J.target.value}),className:"bg-transparent border-none text-xs font-bold text-slate-600 focus:ring-0 p-0 font-mono"}),s.jsx("span",{className:"text-slate-300 text-xs",children:"~"}),s.jsx("input",{type:"date",value:n.end,onChange:J=>i({...n,end:J.target.value}),className:"bg-transparent border-none text-xs font-bold text-slate-600 focus:ring-0 p-0 font-mono"})]}),s.jsx("button",{onClick:_,className:"w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-500 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"})})]}),s.jsxs("div",{className:"flex gap-6 items-center z-10",children:[s.jsxs("div",{className:"flex gap-4 pr-6 border-r border-slate-100",children:[s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-[9px] font-black text-rose-400 uppercase tracking-wider",children:" "}),s.jsx("span",{className:"text-xl font-black text-rose-500 leading-none",children:o.pending})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-wider",children:" "}),s.jsx("span",{className:"text-xl font-black text-slate-600 leading-none",children:o.today})]})]}),s.jsxs("button",{onClick:()=>g({open:!0,query:"",results:[]}),className:"h-10 px-5 rounded-xl bg-gradient-to-br from-rose-500 to-pink-600 text-white font-bold shadow-lg shadow-rose-200 hover:shadow-rose-300 hover:scale-[1.02] transition-all flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"add_circle"}),"  "]})]})]})}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-6 lg:pb-8 min-[2000px]:pb-12 overflow-hidden",children:s.jsx("div",{className:"h-full bg-white rounded-[1.5rem] shadow-xl border border-slate-200 relative flex flex-col overflow-hidden",children:s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar p-0.5",children:s.jsxs("table",{className:"w-full text-xs border-separate border-spacing-0",children:[s.jsx("thead",{className:"sticky top-0 z-10",children:s.jsxs("tr",{className:"bg-slate-50/80 backdrop-blur-md",children:[s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[8%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[8%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[12%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[15%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[10%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[10%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[6%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-right text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[10%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[10%]",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[t.map(J=>s.jsxs("tr",{className:"hover:bg-rose-50/30 transition-colors cursor-pointer group",onClick:()=>{const U=J.sales_id||J.salesId;U?G(U):console.warn("Claim missing sales_id:",J)},children:[s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-black tracking-tight ${J.claim_status===""?"bg-purple-100 text-purple-600":J.claim_status===""?"bg-emerald-100 text-emerald-600":J.claim_status===""?"bg-slate-100 text-slate-500":"bg-amber-100 text-amber-600"}`,children:J.claim_status})}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`text-[10px] font-bold ${J.claim_type===""?"text-rose-500":J.claim_type===""?"text-orange-500":"text-blue-500"}`,children:J.claim_type})}),s.jsx("td",{className:"px-4 py-3 text-center text-slate-400 font-mono text-[10px]",children:J.created_at?.substring(5,16).replace("T"," ")}),s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("div",{className:"font-bold text-slate-700",children:J.customer_name||""}),s.jsx("div",{className:"text-[10px] text-slate-400",children:J.customer_id||"-"})]}),s.jsx("td",{className:"px-4 py-3 text-center text-[10px] font-mono text-slate-500",children:J.sales_id}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-[10px] font-bold",children:J.reason_category})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"truncate max-w-[200px] text-slate-500 font-medium text-[11px]",title:J.memo,children:J.memo||"-"})}),s.jsx("td",{className:"px-4 py-3 text-center font-bold text-slate-700",children:J.quantity}),s.jsx("td",{className:"px-4 py-3 text-right font-black text-rose-500/80",children:Ve(J.refund_amount)}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsxs("div",{className:"flex justify-end items-center gap-1 opacity-60 group-hover:opacity-100 transition-opacity",children:[(J.claim_status===""||J.claim_status==="")&&s.jsx("button",{onClick:U=>{U.stopPropagation(),D(J)},className:"h-6 px-2 rounded-md bg-rose-500 hover:bg-rose-600 text-white text-[10px] font-bold shadow-sm transition-colors",children:""}),s.jsx("button",{onClick:U=>{U.stopPropagation(),P(J)},className:"w-6 h-6 rounded-md hover:bg-blue-50 text-slate-400 hover:text-blue-500 transition-colors flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"edit"})}),s.jsx("button",{onClick:U=>{U.stopPropagation(),k(J.claim_id)},className:"w-6 h-6 rounded-md hover:bg-red-50 text-slate-400 hover:text-red-500 transition-colors flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"delete"})})]})})]},J.claim_id)),t.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"10",className:"py-20 text-center text-slate-300 font-bold text-sm",children:"   ."})})]})]})})})}),l.open&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm transition-opacity",onClick:()=>c({...l,open:!1})}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[400px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-rose-50 px-6 py-4 border-b border-rose-100 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-rose-600 font-black text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"gavel"}),"  "]}),s.jsx("button",{onClick:()=>c({...l,open:!1}),className:"text-rose-300 hover:text-rose-500 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-4 inline-flex items-center gap-2 px-3 py-1.5 rounded-lg bg-slate-50 border border-slate-100 text-xs font-bold text-slate-600",children:[s.jsx("span",{className:"text-rose-500",children:l.claim.claim_type}),s.jsx("span",{className:"text-slate-300",children:"|"}),s.jsx("span",{children:l.claim.reason_category})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{value:Ve(l.refundAmount),onChange:J=>c({...l,refundAmount:J.target.value.replace(/[^0-9]/g,"")}),className:"w-full h-10 px-3 text-right rounded-xl bg-slate-50 border-none font-bold text-slate-700 focus:ring-2 focus:ring-rose-200"}),s.jsx("span",{className:"absolute left-3 top-2.5 text-xs text-slate-400 font-bold",children:"KRW"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-slate-50 border border-slate-100 cursor-pointer",onClick:()=>c({...l,recoverInventory:!l.recoverInventory}),children:[s.jsx("div",{className:`w-5 h-5 rounded-md border flex items-center justify-center transition-colors ${l.recoverInventory?"bg-rose-500 border-rose-500":"bg-white border-slate-300"}`,children:l.recoverInventory&&s.jsx("span",{className:"material-symbols-rounded text-white text-sm",children:"check"})}),s.jsx("span",{className:"text-xs font-bold text-slate-600",children:"  (  )"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsx("textarea",{value:l.memo,onChange:J=>c({...l,memo:J.target.value}),className:"w-full h-24 p-3 rounded-xl bg-slate-50 border-none text-xs font-medium text-slate-600 resize-none focus:ring-2 focus:ring-rose-200",placeholder:"   ."})]})]})]}),s.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-between items-center",children:[s.jsx("button",{onClick:()=>I(""),className:"text-xs font-bold text-slate-400 hover:text-rose-500 px-2 py-1 transition-colors",children:"/"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>c({...l,open:!1}),className:"px-4 py-2 rounded-xl text-slate-500 font-bold hover:bg-slate-200 text-xs transition-colors",children:""}),s.jsx("button",{onClick:()=>I(""),className:"px-6 py-2 rounded-xl bg-rose-500 hover:bg-rose-600 text-white font-bold shadow-lg shadow-rose-200 text-xs transition-colors hover:scale-[1.02]",children:" "})]})]})]})]}),h.open&&UA.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:()=>f({...h,open:!1})}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[500px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-slate-900 px-6 py-4 flex justify-between items-center",children:[s.jsx("h3",{className:"text-white font-bold text-lg",children:"  "}),s.jsx("button",{onClick:()=>f({...h,open:!1}),className:"text-slate-400 hover:text-white",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"p-6",children:h.error?s.jsxs("div",{className:"py-10 text-center text-rose-500 font-bold",children:["    .",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-rose-400 font-normal",children:String(h.error)})]}):h.data?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-end border-b border-slate-100 pb-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wide",children:""}),s.jsx("div",{className:"text-xl font-black text-slate-800 font-mono tracking-tight",children:h.data.sales_id})]}),s.jsxs("div",{className:"text-xs font-bold text-slate-500 bg-slate-100 px-2 py-1 rounded-lg",children:[": ",h.data.order_date?.substring(0,10)]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2",children:" "}),s.jsx("div",{className:"font-bold text-slate-700",children:h.data.product_name}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[h.data.specification||"-"," / ",h.data.quantity,""]}),s.jsxs("div",{className:"text-sm font-black text-slate-500 mt-2",children:[Ve(h.data.unit_price),""]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2",children:" "}),s.jsx("div",{className:"font-bold text-slate-700",children:h.data.customer_name||""}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:h.data.customer_id||"-"})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2 ml-1",children:" "}),s.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100 text-xs text-slate-600",children:[s.jsxs("div",{className:"mb-1",children:[s.jsx("span",{className:"font-bold mr-2",children:" :"})," ",h.data.shipping_name||"-"]}),s.jsxs("div",{className:"mb-1",children:[s.jsx("span",{className:"font-bold mr-2",children:":"})," ",h.data.shipping_mobile_number||"-"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold mr-2",children:":"})," [",h.data.shipping_zip_code||"-","] ",h.data.shipping_address_primary," ",h.data.shipping_address_detail]})]})]}),h.data.memo&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("div",{className:"p-4 bg-amber-50 rounded-2xl border border-amber-100 text-xs text-amber-900 font-medium",children:h.data.memo})]})]}):s.jsx("div",{className:"py-20 flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-slate-200 border-t-rose-500 rounded-full animate-spin"})})}),h.data&&s.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end",children:s.jsx("button",{onClick:()=>f({...h,open:!1}),className:"px-6 py-2 rounded-xl bg-slate-200 hover:bg-slate-300 text-slate-600 font-bold text-xs transition-colors",children:""})})]})]}),document.body),p.open&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:()=>g({...p,open:!1})}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[600px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[85vh]",children:[s.jsxs("div",{className:"p-6 border-b border-slate-100",children:[s.jsx("h3",{className:"text-lg font-black text-slate-700 mb-4",children:"   "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("span",{className:"absolute left-3 top-3 text-slate-400 material-symbols-rounded",children:"search"}),s.jsx("input",{value:p.query,onChange:J=>g({...p,query:J.target.value}),onKeyDown:J=>J.key==="Enter"&&Q(),className:"w-full h-12 pl-10 pr-4 rounded-xl bg-slate-50 border-none font-bold text-slate-600 focus:ring-2 focus:ring-rose-200",placeholder:", ,   ",autoFocus:!0})]}),s.jsx("button",{onClick:Q,className:"px-6 h-12 rounded-xl bg-slate-800 hover:bg-slate-700 text-white font-bold transition-colors",children:""})]})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-0 bg-slate-50 relative",children:[p.loading&&s.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-white/80 backdrop-blur-sm",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-rose-500 rounded-full animate-spin mb-3"}),s.jsx("span",{className:"text-rose-500 font-bold text-xs animate-pulse",children:" ..."})]}),s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{className:"bg-slate-100 sticky top-0 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-center font-bold text-slate-500",children:""}),s.jsx("th",{className:"px-4 py-3 text-center font-bold text-slate-500",children:""}),s.jsx("th",{className:"px-4 py-3 text-left font-bold text-slate-500",children:""}),s.jsx("th",{className:"px-4 py-3 w-16 text-center font-bold text-slate-500",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100 bg-white",children:[p.results.map(J=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-4 py-3 text-center text-slate-400",children:J.order_date?.substring(0,10)}),s.jsx("td",{className:"px-4 py-3 text-center font-bold text-slate-700",children:J.customer_name}),s.jsx("td",{className:"px-4 py-3 font-medium text-slate-600",children:J.product_name}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("button",{onClick:()=>$(J),className:"px-3 py-1.5 rounded-lg bg-rose-50 text-rose-600 font-bold hover:bg-rose-100 transition-colors text-[10px]",children:""})})]},J.sales_id)),!p.loading&&p.results.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"4",className:"py-20 text-center text-slate-400 font-medium",children:"  ."})})]})]})]}),s.jsx("div",{className:"p-4 border-t border-slate-100 flex justify-end bg-white",children:s.jsx("button",{onClick:()=>g({...p,open:!1}),className:"text-slate-400 font-bold hover:text-slate-600 transition-colors text-xs px-4 py-2",children:""})})]})]}),b.open&&b.sale&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:()=>w({...b,open:!1})}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[400px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-slate-900 px-6 py-4 flex justify-between items-center",children:[s.jsx("h3",{className:"text-white font-bold text-lg",children:"  "}),s.jsx("button",{onClick:()=>w({...b,open:!1}),className:"text-slate-400 hover:text-white",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl mb-6 border border-slate-100",children:[s.jsx("div",{className:"text-xs text-slate-400 font-bold mb-1",children:" "}),s.jsxs("div",{className:"font-bold text-slate-700",children:[b.sale.customer_name," - ",b.sale.product_name]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("select",{value:b.type,onChange:J=>w({...b,type:J.target.value}),className:"w-full h-10 px-2 rounded-xl bg-slate-50 border-none font-bold text-xs text-slate-600 focus:ring-2 focus:ring-slate-200",children:["","","",""].includes(b.sale.status)?s.jsx("option",{children:""}):s.jsxs(s.Fragment,{children:[s.jsx("option",{children:""}),s.jsx("option",{children:""})]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsxs("select",{value:b.category,onChange:J=>w({...b,category:J.target.value}),className:"w-full h-10 px-2 rounded-xl bg-slate-50 border-none font-bold text-xs text-slate-600 focus:ring-2 focus:ring-slate-200",children:[s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{type:"number",min:"1",max:b.sale.quantity,value:b.qty,onChange:J=>w({...b,qty:J.target.value}),className:"w-full h-10 px-3 rounded-xl bg-slate-50 border-none font-bold text-slate-600 focus:ring-2 focus:ring-slate-200"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsx("textarea",{value:b.memo,onChange:J=>w({...b,memo:J.target.value}),className:"w-full h-20 p-3 rounded-xl bg-slate-50 border-none text-xs font-medium text-slate-600 resize-none focus:ring-2 focus:ring-slate-200",placeholder:"   ."})]})]})]}),s.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>w({...b,open:!1}),className:"px-4 py-2 rounded-xl text-slate-500 font-bold hover:bg-slate-200 text-xs transition-colors",children:""}),s.jsx("button",{onClick:ae,className:"px-6 py-2 rounded-xl bg-slate-800 text-white font-bold hover:bg-slate-700 shadow-lg shadow-slate-300 text-xs transition-colors hover:scale-[1.02]",children:" "})]})]})]}),d.open&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:()=>u({...d,open:!1})}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[400px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-white px-6 py-4 flex justify-between items-center border-b border-slate-100",children:[s.jsx("h3",{className:"text-slate-700 font-black text-lg",children:"  "}),s.jsx("button",{onClick:()=>u({...d,open:!1}),className:"text-slate-300 hover:text-slate-500",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsxs("select",{value:d.category,onChange:J=>u({...d,category:J.target.value}),className:"w-full h-10 px-2 rounded-xl bg-slate-50 border-none font-bold text-xs text-slate-600 focus:ring-2 focus:ring-blue-100",children:[s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{type:"number",value:d.qty,onChange:J=>u({...d,qty:J.target.value}),className:"w-full h-10 px-3 rounded-xl bg-slate-50 border-none font-bold text-slate-600 focus:ring-2 focus:ring-blue-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsx("textarea",{value:d.memo,onChange:J=>u({...d,memo:J.target.value}),className:"w-full h-24 p-3 rounded-xl bg-slate-50 border-none text-xs font-medium text-slate-600 resize-none focus:ring-2 focus:ring-blue-100"})]})]}),s.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>u({...d,open:!1}),className:"px-4 py-2 rounded-xl text-slate-500 font-bold hover:bg-slate-200 text-xs transition-colors",children:""}),s.jsx("button",{onClick:V,className:"px-6 py-2 rounded-xl bg-blue-600 text-white font-bold hover:bg-blue-500 shadow-lg shadow-blue-200 text-xs transition-colors hover:scale-[1.02]",children:" "})]})]})]})]})},JDe=`
    @media print {
        @page { size: A4 landscape; margin: 0; }
        html, body { 
            background: white !important; 
            color: black !important;
            color-scheme: light !important;
            margin: 0 !important;
            padding: 0 !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
        #printable-daily-receipts {
            display: block !important;
            position: absolute !important;
            left: 0 !important;
            top: 0 !important;
            width: 100% !important;
            padding: 10mm !important;
            visibility: visible !important;
            background: white !important;
        }
        #printable-daily-receipts * {
            visibility: visible !important;
            border-color: black !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
    }
    .print-report-wrapper { 
        font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; 
        color: #000; 
        width: 100%;
    }
    .report-card {
        border: 2px solid #000 !important;
        padding: 30px;
        background: white !important;
    }
    .report-header h1 { 
        margin: 0; 
        font-size: 32px; 
        font-weight: 900; 
        letter-spacing: 0.3em; 
        border-bottom: 5px double #000 !important;
        display: inline-block;
        padding: 0 50px 10px 50px;
    }
    table { 
        width: 100%; 
        border-collapse: collapse !important; 
        font-size: 11px; 
        border: 2px solid #000 !important; 
        table-layout: fixed;
    }
    th, td { 
        border: 1px solid #000 !important; 
        padding: 8px 5px; 
        text-align: center; 
    }
    th { 
        background: #f0f0f0 !important; 
        font-weight: 900; 
        border-bottom: 2px solid #000 !important;
    }
    .bg-row { background: #fafafa !important; }
    .summary-table {
        width: 450px;
        border: 2px solid #000 !important;
    }
    .summary-table th, .summary-table td { border: 1px solid #000 !important; }
`,eIe=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState(new Date().toISOString().split("T")[0]),[n,i]=H.useState([]),[o,l]=H.useState(!1),[c,d]=H.useState(!1);H.useRef(null);const u=H.useMemo(()=>{const k={total:{count:0,qty:0,amt:0,supply:0,vat:0},gen:{count:0,qty:0,amt:0},mall:{count:0,qty:0,amt:0},status:{receipt:0,paid:0,shipped:0}};return n.forEach(T=>{const D=T.quantity||0,I=T.total_amount||0,O=T.supply_value||0,P=T.vat_amount||0,V=(T.memo||"").includes("[]"),G=T.status||"";k.total.count++,k.total.qty+=D,k.total.amt+=I,k.total.supply+=O,k.total.vat+=P,V?(k.mall.count++,k.mall.qty+=D,k.mall.amt+=I):(k.gen.count++,k.gen.qty+=D,k.gen.amt+=I),G===""?k.status.receipt++:G===""?k.status.paid++:G===""&&k.status.shipped++}),k},[n]);H.useEffect(()=>{h()},[t]);const h=async()=>{l(!0);try{const k=await fetch(`/api/sales/daily?date=${t}`);if(!k.ok)throw new Error("Network response was not ok");const T=await k.json();i(T||[])}catch(k){console.error(k),i([]),a("","  : "+k)}finally{l(!1)}},f=k=>{const T=new Date().toISOString().split("T")[0];if(k>T){a("","    .");return}r(k)},p=()=>{const k=new Date(t);k.setDate(k.getDate()-1),f(k.toISOString().split("T")[0])},g=()=>{const k=new Date(t);k.setDate(k.getDate()+1),f(k.toISOString().split("T")[0])},b=()=>{const k=document.getElementById("printable-daily-content");if(!k)return;const T=`
            <style>
                ${JDe}
                @page { size: A4 landscape; margin: 10mm; }
                body { font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; margin: 0; padding: 10mm; }
            </style>
            ${k.outerHTML}
        `;El(T)},w=async()=>{if(n.length===0){a("","  .");return}let k=`\uFEFFNo,,,,,,,,,,,,
`;n.forEach((T,D)=>{const I=[D+1,T.status||"",T.order_date||"-",T.customer_name||"",T.shipping_mobile_number||"-",T.shipping_name||"-",T.product_name,T.specification||"-",T.quantity,T.supply_value||T.total_amount,T.vat_amount||0,T.total_amount,(T.memo||"").replace(/,/g," ").replace(/\n/g," ")].map(O=>`"${O}"`).join(",");k+=I+`
`});try{const T=new Blob([k],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a"),I=URL.createObjectURL(T);D.setAttribute("href",I),D.setAttribute("download",`_${t.replace(/-/g,"")}.csv`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D),a("","   .")}catch(T){console.error("Failed to save CSV:",T),a("","    : "+T)}},_=t===new Date().toISOString().split("T")[0];return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 relative overflow-hidden print:bg-white print:h-auto print:overflow-visible print:block",id:"sales-daily-receipts-view",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1 shrink-0 print:hidden",children:s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Daily Sales Overview"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Daily Receipts"})]})]})})}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-0 px-6 lg:px-8 min-[2000px]:px-12 pb-6 lg:pb-8 min-[2000px]:pb-12 bg-white rounded-[1.5rem] shadow-lg border border-slate-200/60 overflow-hidden print:shadow-none print:border-none print:m-0 print:rounded-none",children:[s.jsxs("div",{className:"shrink-0 flex flex-col border-b border-slate-100 bg-white print:hidden",children:[s.jsxs("div",{className:"p-5 flex justify-between items-end border-b border-dashed border-slate-100",children:[s.jsxs("div",{className:"flex gap-4 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10.5px] font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"  "}),s.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-1 rounded-2xl border border-slate-200 shadow-sm",children:[s.jsx("button",{onClick:p,className:"w-9 h-9 rounded-xl bg-white border border-slate-200 text-slate-500 hover:text-indigo-600 hover:border-indigo-200 shadow-sm flex items-center justify-center transition-all hover:scale-105 active:scale-95",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"chevron_left"})}),s.jsx("div",{className:"relative group",children:s.jsx("input",{type:"date",value:t,max:new Date().toISOString().split("T")[0],onChange:k=>f(k.target.value),className:"pl-3 pr-3 py-2 bg-transparent border-none text-sm font-black text-slate-700 outline-none w-36 font-mono cursor-pointer focus:bg-white focus:ring-2 focus:ring-indigo-100 rounded-lg transition-all"})}),s.jsx("button",{onClick:g,disabled:_,className:`w - 9 h - 9 rounded - xl bg - white border border - slate - 200 flex items - center justify - center transition - all shadow - sm
                                            ${_?"opacity-50 cursor-not-allowed text-slate-300":"text-slate-500 hover:text-indigo-600 hover:border-indigo-200 hover:scale-105 active:scale-95"} `,children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"chevron_right"})})]})]}),s.jsxs("button",{onClick:h,className:"h-[46px] px-6 rounded-2xl bg-indigo-600 hover:bg-indigo-700 text-white font-black text-sm shadow-lg shadow-indigo-200 flex items-center gap-2 transition-all hover:scale-[1.02] active:scale-95 mb-0.5",children:[s.jsx("span",{className:"material-symbols-rounded",children:"search"})," "]})]}),s.jsxs("div",{className:"flex gap-2 mb-0.5",children:[s.jsxs("button",{onClick:()=>d(!0),className:"h-10 px-5 rounded-xl border border-slate-200 bg-white hover:bg-slate-50 text-slate-600 font-bold text-xs flex items-center gap-2 shadow-sm transition-all hover:border-indigo-200 hover:text-indigo-600",children:[s.jsx("span",{className:"material-symbols-rounded filled text-indigo-500",children:"print"}),"  "]}),s.jsxs("button",{onClick:w,className:"h-10 px-5 rounded-xl bg-emerald-500 hover:bg-emerald-600 text-white font-bold text-xs shadow-md shadow-emerald-200 flex items-center gap-2 transition-all active:scale-95",children:[s.jsx("span",{className:"material-symbols-rounded",children:"download"})," (CSV) "]})]})]}),s.jsx("div",{className:"p-5 bg-slate-50/50",children:s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-4 shadow-sm relative overflow-hidden group hover:shadow-md transition-all",children:[s.jsx("div",{className:"absolute right-0 top-0 w-16 h-16 bg-indigo-50 rounded-bl-full -mr-8 -mt-8 transition-transform group-hover:scale-150 group-hover:bg-indigo-100"}),s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[11px] font-black text-slate-400 uppercase tracking-wider relative z-10",children:[s.jsx("span",{className:"material-symbols-rounded text-lg text-indigo-500",children:"analytics"}),"   "]}),s.jsxs("div",{className:"flex flex-col gap-1 relative z-10",children:[s.jsxs("div",{className:"flex justify-between items-baseline",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:" "}),s.jsxs("span",{className:"text-sm font-black text-slate-800",children:[u.total.count.toLocaleString()," ",s.jsx("span",{className:"text-[10px] font-normal text-slate-400",children:""})]})]}),s.jsxs("div",{className:"flex justify-between items-baseline",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:""}),s.jsxs("span",{className:"text-sm font-black text-slate-700",children:[Ve(u.total.supply),""]})]}),s.jsxs("div",{className:"flex justify-between items-baseline border-b border-slate-100 pb-1 mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:""}),s.jsxs("span",{className:"text-sm font-black text-slate-700",children:[Ve(u.total.vat),""]})]}),s.jsxs("div",{className:"flex justify-between items-baseline",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:""}),s.jsxs("span",{className:"text-lg font-black text-indigo-600 tracking-tight",children:[Ve(u.total.amt),s.jsx("span",{className:"text-[10px] font-normal text-slate-400 ml-0.5",children:""})]})]})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-4 shadow-sm relative overflow-hidden group hover:shadow-md transition-all",children:[s.jsx("div",{className:"absolute right-0 top-0 w-16 h-16 bg-emerald-50 rounded-bl-full -mr-8 -mt-8 transition-transform group-hover:scale-150 group-hover:bg-emerald-100"}),s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[11px] font-black text-slate-400 uppercase tracking-wider relative z-10",children:[s.jsx("span",{className:"material-symbols-rounded text-lg text-emerald-500",children:"phone_in_talk"})," () "]}),s.jsxs("div",{className:"flex flex-col gap-1 relative z-10",children:[s.jsxs("div",{className:"flex justify-between items-baseline",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:" "}),s.jsxs("span",{className:"text-sm font-black text-slate-800",children:[u.gen.count.toLocaleString()," ",s.jsx("span",{className:"text-[10px] font-normal text-slate-400",children:""})]})]}),s.jsxs("div",{className:"flex justify-between items-baseline",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:" "}),s.jsxs("span",{className:"text-lg font-black text-emerald-600 tracking-tight",children:[Ve(u.gen.amt),s.jsx("span",{className:"text-[10px] font-normal text-slate-400 ml-0.5",children:""})]})]})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-4 shadow-sm relative overflow-hidden group hover:shadow-md transition-all",children:[s.jsx("div",{className:"absolute right-0 top-0 w-16 h-16 bg-blue-50 rounded-bl-full -mr-8 -mt-8 transition-transform group-hover:scale-150 group-hover:bg-blue-100"}),s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[11px] font-black text-slate-400 uppercase tracking-wider relative z-10",children:[s.jsx("span",{className:"material-symbols-rounded text-lg text-blue-500",children:"sync_alt"}),"   "]}),s.jsxs("div",{className:"flex flex-col gap-1 relative z-10",children:[s.jsxs("div",{className:"flex justify-between items-baseline",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:" "}),s.jsxs("span",{className:"text-sm font-black text-slate-800",children:[u.mall.count.toLocaleString()," ",s.jsx("span",{className:"text-[10px] font-normal text-slate-400",children:""})]})]}),s.jsxs("div",{className:"flex justify-between items-baseline",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:" "}),s.jsxs("span",{className:"text-lg font-black text-blue-600 tracking-tight",children:[Ve(u.mall.amt),s.jsx("span",{className:"text-[10px] font-normal text-slate-400 ml-0.5",children:""})]})]})]})]}),s.jsxs("div",{className:"bg-slate-800 rounded-2xl p-4 text-white border border-slate-700 shadow-lg relative overflow-hidden group hover:shadow-xl transition-all",children:[s.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-white/5 rounded-full -mr-8 -mt-8 transition-transform group-hover:scale-150"}),s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[11px] font-black text-slate-400 uppercase tracking-wider relative z-10",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"fact_check"}),"   "]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center relative z-10 h-full items-center pb-2",children:[s.jsxs("div",{className:"bg-white/10 rounded-xl p-2 backdrop-blur-sm border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-slate-300 mb-0.5 font-bold",children:""}),s.jsx("div",{className:"text-base font-black text-red-400",children:u.status.receipt.toLocaleString()})]}),s.jsxs("div",{className:"bg-white/10 rounded-xl p-2 backdrop-blur-sm border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-slate-300 mb-0.5 font-bold",children:""}),s.jsx("div",{className:"text-base font-black text-amber-400",children:u.status.paid.toLocaleString()})]}),s.jsxs("div",{className:"bg-white/10 rounded-xl p-2 backdrop-blur-sm border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-slate-300 mb-0.5 font-bold",children:""}),s.jsx("div",{className:"text-base font-black text-emerald-400",children:u.status.shipped.toLocaleString()})]})]})]})]})})]}),s.jsx("div",{className:"flex-1 overflow-auto bg-white relative stylish-scrollbar print:overflow-visible",children:s.jsxs("table",{className:"w-full text-xs border-collapse table-fixed",children:[s.jsx("thead",{className:"sticky top-0 z-10 bg-white/95 backdrop-blur shadow-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[5%]",children:"No"}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[8%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[8%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[8%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[10%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[10%]",children:""}),s.jsx("th",{className:"py-3 text-left pl-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[12%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[6%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[5%]",children:""}),s.jsx("th",{className:"py-3 text-right pr-2 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[8%]",children:""}),s.jsx("th",{className:"py-3 text-right pr-2 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[6%]",children:""}),s.jsx("th",{className:"py-3 text-right pr-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[8%]",children:""}),s.jsx("th",{className:"py-3 text-left pl-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[20%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:o?s.jsx("tr",{children:s.jsxs("td",{colSpan:"11",className:"py-32 text-center",children:[s.jsx("div",{className:"inline-block w-10 h-10 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin"}),s.jsx("div",{className:"mt-4 text-slate-400 font-bold text-sm",children:"  ..."})]})}):n.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"11",className:"py-32 text-center text-slate-400 font-bold",children:"    ."})}):n.map((k,T)=>{const D=k.status||"";let I;const O="px-2 py-1 rounded-[6px] text-[10px] font-black tracking-tight border";return D===""?I=s.jsx("span",{className:`${O} bg - orange - 50 text - orange - 600 border - orange - 100`,children:""}):D===""?I=s.jsx("span",{className:`${O} bg - emerald - 50 text - emerald - 600 border - emerald - 100`,children:""}):D===""?I=s.jsx("span",{className:`${O} bg - blue - 50 text - blue - 600 border - blue - 100`,children:""}):D===""?I=s.jsx("span",{className:`${O} bg - red - 50 text - red - 600 border - red - 100 line - through`,children:""}):I=s.jsx("span",{className:`${O} bg - slate - 100 text - slate - 600 border - slate - 200`,children:D}),s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[s.jsx("td",{className:"px-3 py-3 text-center text-slate-400 font-mono text-[10px]",children:T+1}),s.jsx("td",{className:"px-3 py-3 text-center",children:I}),s.jsx("td",{className:"px-3 py-3 text-center text-slate-500 font-mono text-[11px] font-medium",children:k.order_date||"-"}),s.jsx("td",{className:"px-3 py-3 text-center font-bold text-slate-700",children:s.jsx("div",{className:"truncate max-w-[90px] mx-auto",title:k.customer_name,children:k.customer_name||""})}),s.jsx("td",{className:"px-3 py-3 text-center text-slate-500 font-mono text-[10px] tracking-tight",children:Kn(k.shipping_mobile_number||k.customer_mobile)||"-"}),s.jsx("td",{className:"px-3 py-3 text-center text-slate-600 font-medium text-[11px]",children:s.jsx("div",{className:"truncate max-w-[90px] mx-auto",title:k.shipping_name||k.customer_name,children:k.shipping_name||k.customer_name||"-"})}),s.jsx("td",{className:"px-3 py-3 pl-4 font-bold text-slate-700 text-[11px] break-keep leading-tight",children:s.jsx("div",{className:"truncate max-w-[180px]",title:k.product_name,children:k.product_name})}),s.jsx("td",{className:"px-3 py-3 text-center text-slate-500 text-[11px]",children:k.specification||"-"}),s.jsx("td",{className:"px-3 py-3 text-center font-black text-slate-800 text-[11px]",children:k.quantity.toLocaleString()}),s.jsx("td",{className:"px-2 py-3 text-right font-medium text-slate-600 text-[10.5px]",children:Ve(k.supply_value||k.total_amount)}),s.jsx("td",{className:"px-2 py-3 text-right font-medium text-slate-500 text-[10.5px]",children:Ve(k.vat_amount||0)}),s.jsx("td",{className:"px-3 py-3 pr-4 text-right font-black text-slate-800 text-[11px] font-mono",children:Ve(k.total_amount)}),s.jsx("td",{className:"px-3 py-3 pl-4 text-slate-400 text-[10px]",children:s.jsx("div",{className:"truncate max-w-[120px]",title:k.memo,children:k.memo||""})})]},T)})})]})})]}),s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pb-6 lg:pb-8 min-[2000px]:pb-12 flex justify-end gap-2 animate-in slide-in-from-bottom-2 duration-500 delay-100 no-print",children:[s.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-1.5 px-4 py-2 rounded-xl bg-white border border-slate-200 text-slate-600 font-bold text-xs hover:bg-slate-50 hover:border-slate-300 shadow-sm transition-all",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"print"})," "]}),s.jsxs("button",{onClick:w,className:"flex items-center gap-1.5 px-4 py-2 rounded-xl bg-teal-600 text-white font-bold text-xs hover:bg-teal-700 shadow-sm shadow-teal-200 transition-all",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"download"}),"CSV "]})]}),c&&s.jsxs("div",{className:"fixed inset-0 z-[300] bg-slate-900/80 backdrop-blur-md flex items-center justify-center p-4",children:[s.jsxs("div",{className:"fixed top-8 right-8 flex flex-col gap-4 z-[310]",children:[s.jsx("button",{onClick:()=>d(!1),className:"w-14 h-14 bg-white text-slate-400 rounded-2xl shadow-2xl hover:text-rose-500 hover:scale-110 active:scale-95 transition-all flex items-center justify-center group",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-3xl group-hover:rotate-90 transition-transform duration-300",children:"close"})}),s.jsx("div",{className:"h-px bg-white/20 w-full"}),s.jsxs("button",{onClick:b,className:"h-14 px-8 rounded-2xl font-black text-sm bg-indigo-600 text-white shadow-2xl shadow-indigo-500/30 hover:bg-indigo-700 hover:-translate-y-1 active:translate-y-0 transition-all flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-xl",children:"print"})," "]})]}),s.jsx("div",{className:"w-full max-w-[297mm] h-[210mm] max-h-[90vh] bg-white rounded-[1rem] shadow-2xl overflow-y-auto overflow-x-hidden relative custom-scrollbar",children:s.jsx("div",{id:"printable-daily-content",className:"p-[10mm]",children:s.jsx("div",{style:{fontFamily:'"Malgun Gothic", sans-serif',color:"#000",width:"100%"},children:s.jsxs("div",{style:{border:"2px solid #000",padding:"30px",backgroundColor:"#fff"},children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[s.jsx("h1",{style:{margin:"0",fontSize:"32px",fontWeight:"900",letterSpacing:"0.3em",borderBottom:"5px double #000",display:"inline-block",padding:"0 50px 10px 50px"},children:"   "}),s.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"space-between",fontSize:"14px",fontWeight:"bold"},children:[s.jsxs("span",{children:[" : ",s.jsx("strong",{children:t})]}),s.jsxs("span",{children:[" : ",new Date().toLocaleString()]})]})]}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px",border:"2px solid #000",tableLayout:"fixed"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"40px",fontWeight:"900"},children:"No"}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"60px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"90px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"100px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"100px",fontWeight:"900"},children:"()"}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"left",paddingLeft:"10px",fontWeight:"900"},children:" / "}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"50px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"100px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"90px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"110px",fontWeight:"900"},children:""})]})}),s.jsx("tbody",{children:n.map((k,T)=>s.jsxs("tr",{style:{backgroundColor:T%2===1?"#fafafa":"#fff"},children:[s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center"},children:T+1}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",fontWeight:"900"},children:k.status||""}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center"},children:(k.order_date||"").substring(0,10)}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",fontWeight:"900"},children:k.customer_name||""}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center"},children:Kn(k.shipping_mobile_number||k.customer_mobile||"")}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center"},children:k.shipping_name||k.customer_name||"-"}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"left"},children:[s.jsx("div",{style:{fontWeight:"900"},children:k.product_name}),s.jsx("div",{style:{fontSize:"9px",color:"#555"},children:k.specification||"-"})]}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",fontWeight:"900"},children:k.quantity.toLocaleString()}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"right"},children:Ve(k.supply_value||k.total_amount)}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"right"},children:Ve(k.vat_amount||0)}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"right",fontWeight:"900",backgroundColor:"#fafafa"},children:Ve(k.total_amount)})]},T))})]}),s.jsx("div",{style:{marginTop:"30px",display:"flex",justifyContent:"flex-end"},children:s.jsx("table",{style:{width:"450px",border:"2px solid #000",borderCollapse:"collapse"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",backgroundColor:"#f0f0f0",width:"40%",fontSize:"12px"},children:"  "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"16px",fontWeight:"900"},children:[" ",Ve(u.total.supply)]})]}),s.jsxs("tr",{children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",backgroundColor:"#f0f0f0",fontSize:"12px"},children:"  "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"16px",fontWeight:"900"},children:[" ",Ve(u.total.vat)]})]}),s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",fontSize:"14px"},children:"  "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"16px",fontWeight:"900",color:"#d32f2f"},children:[" ",Ve(u.total.amt)]})]})]})})}),s.jsx("div",{style:{marginTop:"40px",textAlign:"center",fontSize:"12px",fontWeight:"bold",color:"#444"},children:"      ."}),s.jsx("div",{style:{marginTop:"50px",textAlign:"center",fontSize:"10px",color:"#999",borderTop:"1px solid #eee",paddingTop:"10px"},children:" Mycelium Smart Farm Integration System - All Rights Reserved."})]})})})})]})]})},tIe=(a,e)=>{const[t,r]=H.useState("product"),[n,i]=H.useState([]),[o,l]=H.useState([]),[c,d]=H.useState(""),[u,h]=H.useState(""),[f,p]=H.useState(!0),[g,b]=H.useState("ALL"),[w,_]=H.useState({open:!1,primaryMaterialId:"",targets:[{id:Date.now(),productId:"",qty:1}],deductions:[],memo:"",loading:!1}),[k,T]=H.useState({open:!1,items:[{id:Date.now(),targetId:"",qty:"",grade:"A"}],memo:""}),[D,I]=H.useState({open:!1,product:null,val:"",reason:"",memo:""}),[O,P]=H.useState({});H.useEffect(()=>{V()},[t]);const V=async()=>{try{const Z=await fetch("/api/product/list");if(Z.ok){const ve=await Z.json();i(ve||[])}const ie=await fetch("/api/product/freshness"),de={};if(ie.ok){const ve=await ie.json();ve&&ve.forEach(Oe=>{de[Oe.product_id]=Oe.last_in_date})}P(de);const fe=new URLSearchParams({limit:100});t&&fe.append("itemType",t);const he=await fetch(`/api/product/logs?${fe.toString()}`);if(he.ok){const ve=await he.json();l(ve||[])}}catch(Z){console.error("Failed to load data:",Z)}},G=Z=>{const ie=O[Z];if(!ie)return null;const de=new Date(ie),he=Math.abs(new Date-de);return{diffDays:Math.ceil(he/(1e3*60*60*24)),dateStr:ie}},Q=Z=>{I({open:!0,product:Z,val:"",reason:"",memo:""})},$=async()=>{const{product:Z,val:ie,reason:de,memo:fe}=D,he=Number(ie);if(!(!Z||he===0))try{const ve=he>0?" ()":" ()",Oe=fe?`${ve} - ${fe}`:de?`${ve} - ${de}`:ve;if(!(await fetch("/api/product/stock/adjust",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:Z.product_id,changeQty:he,memo:Oe,reasonCategory:de||null})})).ok)throw new Error("Failed to adjust stock");I(Ce=>({...Ce,open:!1})),await V()}catch(ve){a(""," : "+ve)}},ae=Z=>{const ie=n.filter(fe=>fe.item_type==="harvest_item"&&fe.status!=="");if(ie.length===0){a("",`  .
[ ]    .`);return}const de=typeof Z=="number"||typeof Z=="string"?Number(Z):ie[0].product_id;T({open:!0,items:[{id:Date.now(),targetId:de,qty:"",grade:"A"}],memo:""})},J=async()=>{const{items:Z,memo:ie}=k,de=Z.filter(fe=>fe.targetId&&Number(fe.qty)>0);if(de.length===0)return a("","    .");try{const he=(await Promise.all(de.map(ve=>fetch("/api/product/stock/adjust",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:Number(ve.targetId),changeQty:Number(ve.qty),memo:`  [${ve.grade}]${ie?" - "+ie:""}`,reasonCategory:""})})))).filter(ve=>!ve.ok);if(he.length>0)throw new Error(`${he.length}  .`);await a("",`${de.length}    .`),T(ve=>({...ve,open:!1})),V()}catch(fe){a(""," : "+fe)}},U=(Z="")=>{const ie=Z?Number(Z):null;let de=[{id:Date.now(),productId:"",qty:1}],fe=[],he="";if(ie){const ve=n.find(Oe=>Oe.product_id===ie);ve&&(!ve.item_type||ve.item_type==="product"?de=[{id:Date.now(),productId:String(ie),qty:1}]:(fe=[{id:Date.now(),materialId:ie,name:ve.product_name,stock:ve.stock_quantity||0,tQty:0,rQty:1,type:"raw"}],he=String(ie)))}_({open:!0,primaryMaterialId:he,targets:de,deductions:fe,memo:"",loading:!1})},F=async()=>{const{targets:Z,deductions:ie,memo:de}=w,fe=Z.filter(ve=>ve.productId&&Number(ve.qty)>0),he=ie.filter(ve=>ve.materialId&&Number(ve.rQty)>0);if(fe.length===0)return a("","  1  .");for(const ve of he)if(ve.stock<ve.rQty&&!await e(" ",`${ve.name}  . (: ${ve.rQty}, : ${ve.stock})
 ?`))return;try{if(!(await fetch("/api/product/stock/convert",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targets:fe.map(Oe=>({product_id:Number(Oe.productId),quantity:Number(Oe.qty)})),deductions:he.map(Oe=>({material_id:Oe.materialId,quantity:Number(Oe.rQty)})),memo:de||"  "})})).ok)throw new Error("Failed to convert stock");await a("","   ."),_(Oe=>({...Oe,open:!1})),V()}catch(ve){a(""," : "+ve)}},W=H.useMemo(()=>{let Z=n;return t==="harvest_item"?Z=Z.filter(ie=>ie.item_type==="harvest_item"):t==="aux_material"?(Z=Z.filter(ie=>ie.item_type==="aux_material"||ie.item_type==="raw_material"||ie.item_type==="material"),g!=="ALL"&&(Z=Z.filter(ie=>g==="/"?ie.category==="/"||ie.product_name.includes("")||ie.product_name.includes(""):g==="/"?ie.category==="/"||ie.product_name.includes("")||ie.product_name.includes(""):g===""?ie.category===""||ie.product_name.includes("")||ie.product_name.includes(""):g===" "?ie.category===" "||!ie.category&&!ie.product_name.includes("")&&!ie.product_name.includes("")&&!ie.product_name.includes(""):!0))):Z=Z.filter(ie=>!ie.item_type||ie.item_type==="product"),c&&(Z=Z.filter(ie=>ie.product_name.toLowerCase().includes(c.toLowerCase()))),Z},[n,t,c,g]),K=H.useMemo(()=>{let Z=o;if(f&&f)return o.filter(ie=>!ie.reference_id?.startsWith("SALES_AUTO"));if(u){const ie=u.toLowerCase();Z=Z.filter(de=>de.product_name.toLowerCase().includes(ie)||de.memo&&de.memo.toLowerCase().includes(ie)||de.change_type.toLowerCase().includes(ie))}return Z},[o,f,u]),[ee,ne]=H.useState({open:!1,product:null});return{tab:t,setTab:r,products:n,setProducts:i,logs:o,setLogs:l,searchQuery:c,setSearchQuery:d,logSearchQuery:u,setLogSearchQuery:h,hideAutoLogs:f,setHideAutoLogs:p,auxSubTab:g,setAuxSubTab:b,convertModal:w,setConvertModal:_,harvestModal:k,setHarvestModal:T,adjustModal:D,setAdjustModal:I,freshnessMap:O,loadData:V,getFreshnessInfo:G,filteredProducts:W,filteredLogs:K,openAdjustModal:Q,handleAdjustStock:$,openHarvestModal:ae,handleHarvest:J,openHarvestModal:ae,handleHarvest:J,openConvertModal:U,handleBatchConvert:F,bomModal:ee,setBomModal:ne,openBomModal:Z=>{ne({open:!0,product:Z})}}},aIe=()=>s.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 px-6 lg:px-8 min-[2000px]:px-12 pt-1 pb-1 shrink-0",children:[s.jsxs("div",{className:"flex-1 min-w-[200px] bg-indigo-50/50 border border-indigo-100 p-3 rounded-2xl flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-600 bg-white p-1.5 rounded-xl text-lg shadow-sm",children:"potted_plant"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase",children:""}),s.jsx("p",{className:"text-[9px] text-indigo-500 font-bold leading-tight uppercase",children:"  (Final Products)"})]})]}),s.jsxs("div",{className:"flex-1 min-w-[200px] bg-emerald-50/50 border border-emerald-100 p-3 rounded-2xl flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-emerald-600 bg-white p-1.5 rounded-xl text-lg shadow-sm",children:"spa"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-emerald-900 uppercase",children:""}),s.jsx("p",{className:"text-[9px] text-emerald-500 font-bold leading-tight uppercase",children:"  (Raw Materials)"})]})]}),s.jsxs("div",{className:"flex-1 min-w-[200px] bg-orange-50/50 border border-orange-100 p-3 rounded-2xl flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-orange-600 bg-white p-1.5 rounded-xl text-lg shadow-sm",children:"layers"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-orange-900 uppercase",children:""}),s.jsx("p",{className:"text-[9px] text-orange-500 font-bold leading-tight uppercase",children:"   (Aux Materials)"})]})]})]}),rIe=({tab:a,setTab:e,openHarvestModal:t,openConvertModal:r,auxSubTab:n,setAuxSubTab:i,searchQuery:o,setSearchQuery:l})=>s.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-white z-10",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[s.jsxs("button",{onClick:()=>e("product"),className:`px-4 py-3 rounded-lg text-sm font-black flex items-center gap-2 transition-all ${a==="product"?"bg-white text-indigo-600 shadow-sm scale-[1.02]":"text-slate-500 hover:text-slate-700"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-xl",children:"potted_plant"})," "]}),s.jsxs("button",{onClick:()=>e("harvest_item"),className:`px-4 py-3 rounded-lg text-sm font-black flex items-center gap-2 transition-all ${a==="harvest_item"?"bg-white text-emerald-600 shadow-sm scale-[1.02]":"text-slate-500 hover:text-slate-700"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-xl",children:"spa"}),"  ()"]}),s.jsxs("button",{onClick:()=>e("aux_material"),className:`px-4 py-3 rounded-lg text-sm font-black flex items-center gap-2 transition-all ${a==="aux_material"?"bg-white text-orange-600 shadow-sm scale-[1.02]":"text-slate-500 hover:text-slate-700"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-xl",children:"layers"}),"  ()"]})]}),s.jsxs("div",{className:"flex gap-2",children:[a==="harvest_item"&&s.jsxs("button",{onClick:t,className:"px-5 py-2.5 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white font-black text-sm shadow-lg shadow-emerald-100 flex items-center gap-2 transition-all hover:scale-[1.02] active:scale-95 animate-in fade-in zoom-in duration-300",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"spa"}),"  "]}),(a==="product"||a==="harvest_item")&&s.jsxs("button",{onClick:r,className:"px-5 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white font-black text-sm shadow-lg shadow-indigo-100 flex items-center gap-2 transition-all hover:scale-[1.02] active:scale-95 animate-in fade-in zoom-in duration-300",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"inventory_2"}),"  "]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[a==="aux_material"&&s.jsx("div",{className:"flex bg-slate-50 p-1 rounded-xl border border-slate-200 animate-in slide-in-from-right-4 duration-300",children:[{id:"ALL",label:""},{id:"/",label:" "},{id:"/",label:" "},{id:"",label:" "},{id:" ",label:" "}].map(c=>s.jsx("button",{onClick:()=>i(c.id),className:`px-3 py-1.5 rounded-lg text-[11px] font-black transition-all ${n===c.id?"bg-white text-orange-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:c.label},c.id))}),s.jsxs("div",{className:"relative group w-64",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 material-symbols-rounded text-lg group-focus-within:text-indigo-500 transition-colors",children:"search"}),s.jsx("input",{value:o,onChange:c=>l(c.target.value),className:"pl-10 pr-4 h-10 w-full bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 transition-all placeholder:text-slate-400",placeholder:" ..."})]})]})]}),nIe=({products:a,tab:e,getFreshnessInfo:t,openAdjustModal:r,openHarvestModal:n,openConvertModal:i,openBomModal:o})=>{const l=c=>{if(c.item_type!=="aux_material"&&c.item_type!=="raw_material"&&c.item_type!=="material")return null;if(c.category){const u=c.category;return u==="/"?{label:"",color:"bg-orange-100 text-orange-700 border-orange-200"}:u==="/"?{label:"",color:"bg-blue-100 text-blue-700 border-blue-200"}:u==="/"?{label:"",color:"bg-emerald-100 text-emerald-700 border-emerald-200"}:u===""?{label:"",color:"bg-purple-100 text-purple-700 border-purple-200"}:{label:u.replace(" ",""),color:"bg-slate-100 text-slate-700 border-slate-200"}}const d=c.product_name;return d.includes("")||d.includes("")?{label:"",color:"bg-orange-100 text-orange-700 border-orange-200"}:d.includes("")||d.includes("")?{label:"",color:"bg-blue-100 text-blue-700 border-blue-200"}:d.includes("")||d.includes("")?{label:"",color:"bg-emerald-100 text-emerald-700 border-emerald-200"}:d.includes("")||d.includes("")?{label:"",color:"bg-purple-100 text-purple-700 border-purple-200"}:d.includes("")||d.includes("")?{label:"",color:"bg-slate-100 text-slate-700 border-slate-200"}:{label:"",color:"bg-amber-100 text-amber-700 border-amber-200"}};return s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar relative",children:s.jsxs("table",{className:"w-full text-xs text-left border-collapse table-fixed",children:[s.jsx("thead",{className:"sticky top-0 bg-slate-50/95 backdrop-blur z-10 shadow-sm text-slate-500 uppercase font-bold tracking-wider",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-3 text-center w-[5%] border-b border-slate-100",children:"No"}),s.jsx("th",{className:"px-2 py-3 w-[25%] border-b border-slate-100",children:e==="raw_material"?" ()":e==="aux_material"?" ()":" ()"}),s.jsx("th",{className:"px-2 py-3 text-center w-[12%] border-b border-slate-100",children:""}),s.jsx("th",{className:"px-2 py-3 text-right w-[15%] border-b border-slate-100 bg-indigo-50/30 text-indigo-900",children:""}),s.jsx("th",{className:"px-2 py-3 text-center w-[15%] border-b border-slate-100 italic text-slate-400",children:" "}),s.jsx("th",{className:"px-2 py-3 text-center w-[13%] border-b border-slate-100",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[a.map((c,d)=>{const u=c.stock_quantity||0,h=u<=(c.safety_stock||10),f=t(c.product_id);let p=null;const g=c.item_type==="raw_material"||c.item_type==="material",b=!c.item_type||c.item_type==="product";if(u>0&&f&&(g||b)){const w=f.diffDays-1;if(w>=7)p=s.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[s.jsx("div",{className:"flex-1 h-1 bg-red-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-red-500 w-full animate-pulse"})}),s.jsxs("span",{className:"shrink-0 text-[10px] font-black text-red-600 bg-red-50 px-1 rounded border border-red-100",children:[" ",w,""]})]});else if(w>=3){const _=Math.min(w/7*100,100);p=s.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[s.jsx("div",{className:"flex-1 h-1 bg-orange-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-orange-500",style:{width:`${_}%`}})}),s.jsxs("span",{className:"shrink-0 text-[10px] font-black text-orange-600 bg-orange-50 px-1 rounded border border-orange-100",children:[" (",w,")"]})]})}else p=s.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[s.jsx("div",{className:"flex-1 h-1 bg-emerald-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-emerald-500",style:{width:"20%"}})}),s.jsxs("span",{className:"shrink-0 text-[10px] font-black text-emerald-600 bg-emerald-50 px-1 rounded border border-emerald-100",children:[" (",w,")"]})]})}return s.jsxs("tr",{className:"hover:bg-slate-50/80 transition-colors group",children:[s.jsx("td",{className:"px-2 py-3 text-center text-slate-400 font-mono text-[10px]",children:d+1}),s.jsx("td",{className:"px-2 py-3",children:s.jsxs("div",{className:"flex flex-col justify-center h-full",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"font-bold text-slate-700 truncate",title:c.product_name,children:c.product_name}),e==="aux_material"&&l(c)&&s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-black border uppercase shrink-0 ${l(c).color}`,children:l(c).label})]}),p]})}),s.jsx("td",{className:"px-2 py-3 text-center text-slate-500 truncate",children:c.specification||"-"}),s.jsxs("td",{className:`px-2 py-3 text-right font-black text-sm bg-indigo-50/5 ${h?"text-red-500":"text-slate-700"}`,children:[Ve(u),h&&s.jsx("span",{className:"material-symbols-rounded text-sm align-middle ml-1 text-red-500 animate-pulse",title:" ",children:"error"})]}),s.jsx("td",{className:"px-2 py-3 text-center text-slate-400 text-[10px] font-medium",children:f?.dateStr?QH(f.dateStr).split(" ")[0]:"-"}),s.jsx("td",{className:"px-2 py-3 text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[(e==="harvest_item"||e==="product")&&s.jsxs(s.Fragment,{children:[e==="harvest_item"&&s.jsx("button",{onClick:()=>n(c.product_id),className:"inline-flex items-center justify-center p-2 rounded-xl bg-emerald-50 text-emerald-600 hover:bg-emerald-100 transition-all active:scale-95 shadow-sm border border-emerald-100",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"spa"})}),s.jsx("button",{onClick:()=>i(c.product_id),className:"inline-flex items-center justify-center p-2 rounded-xl bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-all active:scale-95 shadow-sm border border-indigo-100",title:e==="product"?" /":" ()",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"inventory_2"})})]}),s.jsx("button",{onClick:()=>r(c),className:"inline-flex items-center justify-center p-2 rounded-xl bg-orange-50 text-orange-600 hover:bg-orange-100 transition-all active:scale-95 shadow-sm border border-orange-100",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"edit_note"})}),e==="product"&&s.jsx("button",{onClick:()=>o(c),className:"inline-flex items-center justify-center p-2 rounded-xl bg-violet-50 text-violet-600 hover:bg-violet-100 transition-all active:scale-95 shadow-sm border border-violet-100",title:"   (BOM)",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"account_tree"})})]})})]},c.product_id)}),a.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"8",className:"py-20 text-center text-slate-400 font-medium",children:"  ."})})]})]})})},iIe=({logs:a,hideAutoLogs:e,setHideAutoLogs:t,logSearchQuery:r,setLogSearchQuery:n,loadData:i})=>{const o=H.useMemo(()=>{const c={};return a.forEach(d=>{const u=typeof d.created_at=="string"&&!d.created_at.includes("Z")&&!d.created_at.includes("+")?`${d.created_at.replace(" ","T")}Z`:d.created_at,h=new Date(u);if(isNaN(h.getTime())){const g=d.created_at.split(" "),b=g[0];c[b]||(c[b]=[]),c[b].push({...d,_localTime:g[1]?.substring(0,5)||""});return}const f=`${h.getFullYear()}-${String(h.getMonth()+1).padStart(2,"0")}-${String(h.getDate()).padStart(2,"0")}`,p=`${String(h.getHours()).padStart(2,"0")}:${String(h.getMinutes()).padStart(2,"0")}`;c[f]||(c[f]=[]),c[f].push({...d,_localDate:f,_localTime:p})}),c},[a]),l=H.useMemo(()=>{const c=a.filter(u=>u.change_quantity>0).reduce((u,h)=>u+h.change_quantity,0),d=a.filter(u=>u.change_quantity<0).reduce((u,h)=>u+h.change_quantity,0);return{plus:c,minus:d}},[a]);return s.jsxs("div",{className:"w-[420px] flex flex-col bg-white rounded-[1.5rem] shadow-sm border border-slate-200 overflow-hidden",children:[s.jsxs("div",{className:"p-5 border-b border-slate-100 bg-slate-50/80",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"font-black text-slate-800 text-sm flex items-center gap-2",children:[s.jsx("span",{className:"w-8 h-8 rounded-lg bg-amber-100 text-amber-600 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"history"})}),"   (Audit Trail)"]}),s.jsx("button",{onClick:i,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-slate-200 text-slate-400 hover:text-indigo-600 transition-all",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"relative group",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 material-symbols-rounded text-lg group-focus-within:text-orange-500 transition-colors",children:"search"}),s.jsx("input",{value:r,onChange:c=>n(c.target.value),className:"pl-10 pr-4 h-9 w-full bg-white border border-slate-200 rounded-xl text-xs font-bold outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-300 transition-all placeholder:text-slate-400",placeholder:"  ..."})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[s.jsxs("div",{className:`w-8 h-4 rounded-full relative transition-colors ${e?"bg-indigo-600":"bg-slate-300"}`,children:[s.jsx("input",{type:"checkbox",className:"hidden",checked:e,onChange:c=>t(c.target.checked)}),s.jsx("div",{className:`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${e?"left-[18px]":"left-0.5"}`})]}),s.jsx("span",{className:"text-[10px] font-black text-slate-500 group-hover:text-indigo-600 tracking-tighter uppercase transition-colors",children:"  "})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"px-2 py-0.5 rounded bg-blue-50 text-blue-600 text-[10px] font-black",children:["+",Ve(l.plus)]}),s.jsx("span",{className:"px-2 py-0.5 rounded bg-rose-50 text-rose-600 text-[10px] font-black",children:Ve(l.minus)})]})]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar scroll-smooth bg-slate-50/30",children:a.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 gap-3 p-10",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-300",children:"history_toggle_off"})}),s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-xs font-black text-slate-500 mb-1",children:"  "})})]}):s.jsx("div",{className:"p-4 space-y-6",children:Object.entries(o).sort((c,d)=>d[0].localeCompare(c[0])).map(([c,d])=>s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"sticky top-0 z-10 py-2 mb-3",children:s.jsxs("div",{className:"bg-white/80 backdrop-blur inline-flex items-center gap-2 px-3 py-1 rounded-full border border-slate-200 shadow-sm",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),s.jsx("span",{className:"text-[10px] font-black text-slate-700",children:c}),s.jsxs("span",{className:"text-[10px] text-slate-400 font-bold ml-1",children:[d.length,""]})]})}),s.jsx("div",{className:"space-y-3 ml-2 border-l-2 border-slate-100 pl-4",children:d.map((u,h)=>{const f=u.change_quantity>0;let p="bg-slate-100 text-slate-500 border-slate-200";return u.change_type===""?p="bg-blue-50 text-blue-600 border-blue-100":u.change_type===""?p="bg-rose-50 text-rose-600 border-rose-100":u.change_type===""||u.change_type===""?p="bg-emerald-50 text-emerald-600 border-emerald-100":u.change_type===""?p="bg-green-50 text-green-600 border-green-100":u.change_type===""?p="bg-purple-50 text-purple-600 border-purple-100":u.change_type===""&&(p="bg-amber-50 text-amber-600 border-amber-100"),s.jsxs("div",{className:"group relative bg-white p-3 rounded-xl border border-slate-100 shadow-sm hover:shadow-md hover:border-indigo-200 transition-all",children:[s.jsxs("div",{className:"flex justify-between items-start gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("div",{className:`px-1.5 py-0.5 rounded text-[8px] font-black uppercase border shrink-0 ${p}`,children:u.change_type}),s.jsx("span",{className:"text-[11px] font-black text-slate-800 truncate leading-tight",children:u.product_name})]}),s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-slate-400 font-mono mb-2",children:[s.jsx("span",{children:u._localTime}),s.jsx("span",{className:"w-px h-2 bg-slate-200"}),s.jsxs("span",{className:"font-bold text-slate-500",children:[": ",Ve(u.current_stock)]})]})]}),s.jsxs("div",{className:`text-sm font-black text-right shrink-0 ${f?"text-blue-600":"text-rose-500"}`,children:[f?"+":"",Ve(u.change_quantity)]})]}),u.memo&&s.jsxs("div",{className:"relative mt-1 pl-3 py-1.5 border-l-2 border-indigo-100 bg-indigo-50/30 rounded-r-md",children:[s.jsx("span",{className:"material-symbols-rounded text-[12px] absolute left-[-7px] top-1/2 -translate-y-1/2 bg-white text-indigo-400 rounded-full h-4 w-4 flex items-center justify-center border border-indigo-100",children:"chat_bubble"}),s.jsx("p",{className:"text-[10px] text-slate-600 font-medium leading-relaxed italic",children:u.memo})]})]},h)})})]},c))})})]})},sIe=({isOpen:a,onClose:e,product:t,val:r,setVal:n,reason:i,setReason:o,memo:l,setMemo:c,handleAdjustStock:d})=>{if(!a)return null;const u=t?.stock_quantity||0,h=u+(Number(r)||0);return s.jsxs("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity",onClick:e}),s.jsxs("div",{className:"bg-white rounded-[2rem] w-full max-w-[400px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-600 p-6 text-white relative",children:[s.jsx("span",{className:"material-symbols-rounded absolute -right-6 -top-6 text-[120px] text-white/10 pointer-events-none",children:"edit_note"}),s.jsxs("h3",{className:"text-xl font-black flex items-center gap-2 relative z-10",children:[s.jsx("span",{className:"material-symbols-rounded",children:"edit_note"}),"   "]}),s.jsxs("p",{className:"text-xs text-white/80 mt-1 relative z-10 font-bold",children:["[",t?.product_name,"]  ."]})]}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[s.jsxs("div",{className:"text-center flex-1",children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:""}),s.jsx("p",{className:"text-xl font-black text-slate-700",children:Ve(u)})]}),s.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-slate-300",children:"double_arrow"})}),s.jsxs("div",{className:"text-center flex-1",children:[s.jsx("p",{className:"text-[10px] font-black text-orange-500 uppercase tracking-widest mb-1",children:" "}),s.jsx("p",{className:"text-xl font-black text-orange-600",children:Ve(h)})]})]}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block ml-1",children:"  (+, -)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",className:"w-full h-14 rounded-2xl border-2 border-slate-200 bg-white text-center font-black text-2xl text-slate-700 outline-none focus:border-orange-500 transition-all placeholder:text-slate-200",value:r,onChange:f=>n(f.target.value),placeholder:"0",autoFocus:!0}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold text-sm",children:t?.specification||""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block ml-1",children:"  (Category)"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full h-12 pl-4 pr-10 rounded-xl border border-slate-200 bg-white font-bold text-sm text-slate-700 outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-400 appearance-none transition-all",value:i,onChange:f=>o(f.target.value),children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"",children:"()"}),s.jsx("option",{value:"",children:"()"}),s.jsx("option",{value:"",children:"()"}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",children:"expand_more"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block ml-1",children:"  (Memo)"}),s.jsx("textarea",{className:"w-full h-20 p-4 rounded-xl border border-slate-200 bg-white text-xs font-bold text-slate-600 outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-400 transition-all resize-none",value:l,onChange:f=>c(f.target.value),placeholder:"  ."})]})]}),s.jsxs("div",{className:"flex gap-3 mt-8",children:[s.jsx("button",{onClick:e,className:"flex-1 h-14 rounded-2xl bg-slate-100 hover:bg-slate-200 text-slate-500 font-black text-sm transition-colors",children:""}),s.jsx("button",{onClick:d,className:"flex-1 h-14 rounded-2xl bg-orange-500 hover:bg-orange-600 text-white font-black text-sm shadow-lg shadow-orange-200 transition-all hover:scale-[1.02] active:scale-95",children:" "})]})]})]})]})},oIe=({isOpen:a,onClose:e,harvestModal:t,setHarvestModal:r,products:n,handleHarvest:i})=>{if(!a)return null;const o=()=>{const d=n.filter(u=>u.item_type==="harvest_item"&&u.status!=="");r(u=>({...u,items:[...u.items,{id:Date.now(),targetId:d[0]?.product_id||"",qty:"",grade:"A"}]}))},l=d=>{t.items.length<=1||r(u=>({...u,items:u.items.filter(h=>h.id!==d)}))},c=(d,u,h)=>{r(f=>({...f,items:f.items.map(p=>p.id===d?{...p,[u]:h}:p)}))};return s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity",onClick:e}),s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-[650px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 p-6 text-white relative overflow-hidden shrink-0",children:[s.jsx("span",{className:"material-symbols-rounded absolute -right-6 -top-6 text-[120px] text-white/10 pointer-events-none",children:"spa"}),s.jsxs("h3",{className:"text-lg font-black flex items-center gap-2 relative z-10",children:[s.jsx("span",{className:"material-symbols-rounded",children:"spa"}),"   "]}),s.jsx("p",{className:"text-xs text-white/80 mt-1 relative z-10 font-medium",children:"     ."})]}),s.jsxs("div",{className:"p-6 overflow-y-auto stylish-scrollbar flex-1",children:[s.jsxs("div",{className:"space-y-4",children:[t.items.map((d,u)=>s.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 relative group animate-in slide-in-from-top-2 duration-200",children:s.jsxs("div",{className:"grid grid-cols-12 gap-3 items-end",children:[s.jsxs("div",{className:"col-span-12 md:col-span-5",children:[s.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block ml-1",children:["  ",u+1]}),s.jsxs("div",{className:"relative",children:[s.jsx("select",{className:"w-full h-11 pl-3 pr-8 rounded-xl border border-slate-200 bg-white text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-300 appearance-none transition-all",value:d.targetId,onChange:h=>c(d.id,"targetId",h.target.value),children:n.filter(h=>h.item_type==="harvest_item"&&h.status!=="").map(h=>s.jsxs("option",{value:h.product_id,children:[" ",h.product_name]},h.product_id))}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",children:"expand_more"})]})]}),s.jsxs("div",{className:"col-span-7 md:col-span-4",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block ml-1",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full h-11 pl-3 pr-8 rounded-xl border border-slate-200 bg-white text-sm font-bold text-slate-600 outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-300 appearance-none transition-all",value:d.grade,onChange:h=>c(d.id,"grade",h.target.value),children:[s.jsx("option",{value:"A",children:"A ()"}),s.jsx("option",{value:"B",children:"B ()"}),s.jsx("option",{value:"C",children:"C ()"}),s.jsx("option",{value:"S",children:"S ()"})]}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",children:"expand_more"})]})]}),s.jsxs("div",{className:"col-span-5 md:col-span-3 flex items-center gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block ml-1 text-right",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",min:"0",step:"any",className:"w-full h-11 rounded-xl border border-slate-200 bg-white text-right font-black text-lg text-emerald-600 pr-8 outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-300 transition-all placeholder:text-slate-200",value:d.qty,onChange:h=>c(d.id,"qty",h.target.value),placeholder:"0"}),s.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-[9px] font-bold text-slate-400",children:"kg"})]})]}),t.items.length>1&&s.jsx("button",{onClick:()=>l(d.id),className:"mt-6 h-11 w-11 rounded-xl bg-slate-100 text-slate-400 hover:bg-rose-50 hover:text-rose-500 transition-all flex items-center justify-center shrink-0",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"delete"})})]})]})},d.id)),s.jsxs("button",{onClick:o,className:"w-full py-3 rounded-xl border-2 border-dashed border-slate-200 text-slate-400 font-bold text-xs flex items-center justify-center gap-2 hover:bg-slate-50 hover:border-emerald-200 hover:text-emerald-500 transition-all",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"add_circle"}),"   "]})]}),s.jsxs("div",{className:"mt-8",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block ml-1 italic",children:"  (Harvest Memo)"}),s.jsx("textarea",{className:"w-full h-20 p-3 rounded-xl border border-slate-200 bg-slate-50 text-xs font-bold text-slate-600 outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-300 transition-all resize-none",value:t.memo,onChange:d=>r(u=>({...u,memo:d.target.value})),placeholder:"  ."})]})]}),s.jsx("div",{className:"p-6 bg-slate-50 border-t border-slate-100 shrink-0",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:e,className:"flex-1 h-12 rounded-xl bg-white border border-slate-200 text-slate-500 font-bold text-sm hover:bg-slate-100 transition-colors",children:""}),s.jsx("button",{onClick:i,className:"flex-1 h-12 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white font-bold text-sm shadow-lg shadow-emerald-200 transition-all flex items-center justify-center",children:"  "})]})})]})]})},lIe=({isOpen:a,onClose:e,convertModal:t,setConvertModal:r,products:n,handleBatchConvert:i})=>{if(!a)return null;const o=(c,d,u)=>{r(h=>({...h,targets:h.targets.map(f=>f.id===c?{...f,[d]:u}:f)}))},l=(c,d)=>{const u=Number(d);r(h=>{const f=h.deductions.find(p=>p.id===c);if(!f)return h;if(h.primaryMaterialId&&f.materialId===Number(h.primaryMaterialId)&&f.tQty>0&&u>0){const p=u/f.tQty;if(isFinite(p)&&Math.abs(p-1)>.001){const g=h.targets.map(b=>({...b,qty:Math.max(1,Math.round(b.qty*p))}));return{...h,targets:g}}}return{...h,deductions:h.deductions.map(p=>p.id===c?{...p,rQty:u}:p)}})};return H.useEffect(()=>{if(!a)return;(async()=>{r(d=>({...d,loading:!0}));try{const d=t.targets.filter(p=>p.productId).map(p=>Number(p.productId));if(d.length===0){r(p=>({...p,loading:!1}));return}const u=[...new Set(d)],h={};for(const p of u){const g=await pt("get_product_bom",{productId:p});h[p]=g||[]}const f={};t.targets.forEach(p=>{const g=Number(p.productId),b=Number(p.qty)||0;if(!g)return;(h[g]||[]).forEach(_=>{f[_.material_id]||(f[_.material_id]={materialId:_.material_id,name:_.product_name,stock:_.stock_quantity,tQty:0,ratio:_.ratio,type:_.item_type==="harvest_item"?"raw":_.item_type==="aux_material"||_.item_type==="raw_material"||_.item_type==="material"?"aux":"prod"}),f[_.material_id].tQty+=Math.ceil(b*_.ratio)})}),r(p=>{const g=Object.values(f);let b=p.primaryMaterialId,w=!1,_=1;const k=g.map(T=>{const D=p.deductions.find(O=>O.materialId===T.materialId);let I=T.tQty;return D&&(b&&D.materialId===Number(b)&&D.tQty===0&&D.rQty>0?T.tQty>0&&(_=D.rQty/T.tQty,isFinite(_)&&_>.001&&(w=!0,I=D.rQty)):I=D.tQty===T.tQty?D.rQty:T.tQty),{id:D?.id||Date.now()+Math.random(),materialId:T.materialId,name:T.name,stock:T.stock,tQty:T.tQty,ratio:T.ratio,rQty:I,type:T.type}});if(!b&&g.length>0){const T=g.find(D=>D.type==="raw");b=String(T?T.materialId:g[0].materialId)}if(w){const T=p.targets.map(D=>({...D,qty:Math.max(1,Math.round(D.qty*_))}));return{...p,deductions:k,targets:T,primaryMaterialId:b,loading:!1}}return{...p,deductions:k,primaryMaterialId:b,loading:!1}})}catch(d){console.error(d),r(u=>({...u,loading:!1}))}})()},[JSON.stringify(t.targets.map(c=>({p:c.productId,q:c.qty})))]),s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity",onClick:e}),s.jsxs("div",{className:"bg-white rounded-[2.5rem] w-full max-w-[850px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[s.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 via-indigo-700 to-purple-800 p-8 text-white relative",children:[s.jsxs("div",{className:"flex justify-between items-start relative z-10",children:[s.jsx("div",{children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/20 backdrop-blur-md flex items-center justify-center border border-white/30 shadow-inner",children:s.jsx("span",{className:"material-symbols-rounded text-3xl",children:"inventory_2"})}),s.jsx("div",{children:s.jsx("h3",{className:"text-2xl font-black tracking-tight",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:"  "})})]})}),s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors group",children:s.jsx("span",{className:"material-symbols-rounded text-white/50 group-hover:text-white",children:"close"})})]}),s.jsxs("div",{className:"flex gap-4 mt-6",children:[s.jsxs("div",{className:"px-4 py-2 bg-white/10 rounded-2xl border border-white/10 backdrop-blur-sm",children:[s.jsx("p",{className:"text-[10px] font-black text-indigo-200 uppercase mb-0.5",children:" "}),s.jsxs("p",{className:"text-lg font-black",children:[t.targets.filter(c=>c.productId).length,""]})]}),s.jsxs("div",{className:"px-4 py-2 bg-white/10 rounded-2xl border border-white/10 backdrop-blur-sm",children:[s.jsx("p",{className:"text-[10px] font-black text-indigo-200 uppercase mb-0.5",children:" "}),s.jsxs("p",{className:"text-lg font-black",children:[t.deductions.length,""]})]})]}),s.jsx("span",{className:"material-symbols-rounded absolute -right-12 -top-12 text-[240px] text-white/5 pointer-events-none rotate-12",children:"conveyor_belt"})]}),s.jsx("div",{className:"flex-1 overflow-hidden flex flex-col bg-slate-50/50",children:s.jsx("div",{className:"flex-1 overflow-y-auto stylish-scrollbar p-8",children:s.jsxs("div",{className:"grid grid-cols-12 gap-10",children:[s.jsxs("div",{className:"col-span-12 lg:col-span-7",children:[s.jsxs("div",{className:"mb-10",children:[s.jsxs("h4",{className:"text-sm font-black text-slate-800 flex items-center gap-2 mb-4",children:[s.jsx("span",{className:"w-6 h-6 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center text-xs",children:"01"}),"  "]}),s.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-2 stylish-scrollbar",children:t.targets.map(c=>s.jsx("div",{className:"p-4 bg-white rounded-2xl border border-slate-200 shadow-sm relative group animate-in slide-in-from-left-4 duration-300",children:s.jsxs("div",{className:"grid grid-cols-12 gap-4 items-end",children:[s.jsxs("div",{className:"col-span-7",children:[s.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block ml-1",children:"  "}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full h-11 pl-3 pr-8 rounded-xl border border-slate-100 bg-slate-50 text-sm font-bold text-slate-700 outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-300 appearance-none transition-all",value:c.productId,onChange:d=>o(c.id,"productId",d.target.value),children:[s.jsx("option",{value:"",children:"--    --"}),n.filter(d=>(!d.item_type||d.item_type==="product")&&d.status!=="").map(d=>{const u=t.primaryMaterialId&&d.product_name.includes(n.find(h=>h.product_id===Number(t.primaryMaterialId))?.product_name?.split(" ")[0]);return s.jsxs("option",{value:d.product_id,children:[u?" ":"",d.product_name," (",d.specification||"",")"]},d.product_id)})]}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",children:"expand_more"})]})]}),s.jsxs("div",{className:"col-span-4",children:[s.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block ml-1",children:" "}),s.jsxs("div",{className:"relative group/field",children:[s.jsx("input",{type:"number",className:"w-full h-11 rounded-xl border-2 border-indigo-200 bg-white text-right font-black text-lg text-indigo-700 pr-10 outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-400 transition-all shadow-sm",value:c.qty,onChange:d=>o(c.id,"qty",d.target.value)}),s.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-bold text-slate-400",children:n.find(d=>d.product_id===Number(c.productId))?.specification?.replace(/\d/g,"").replace("g","")||""})]})]})]})},c.id))})]}),s.jsxs("div",{className:"mb-10",children:[s.jsxs("h4",{className:"text-sm font-black text-slate-800 flex items-center gap-2 mb-4",children:[s.jsx("span",{className:"w-6 h-6 rounded-lg bg-emerald-100 text-emerald-600 flex items-center justify-center text-xs",children:"02"}),"   ()"]}),s.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2 stylish-scrollbar",children:t.deductions.filter(c=>c.type==="raw").length===0?s.jsx("div",{className:"p-8 bg-slate-50 border border-dashed border-slate-200 rounded-2xl text-center text-[11px] font-bold text-slate-400",children:"  .    ."}):t.deductions.filter(c=>c.type==="raw").map(c=>{const d=String(c.materialId)===t.primaryMaterialId,h=(n.find(f=>f.product_id===c.materialId)?.specification||"kg").replace(/[0-9.]/g,"").trim();return s.jsxs("div",{className:`p-4 rounded-2xl border transition-all shadow-sm flex items-center gap-4 ${d?"bg-emerald-50/30 border-emerald-200 ring-1 ring-emerald-100":"bg-white border-slate-200"}`,children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:`material-symbols-rounded text-lg ${d?"text-emerald-500":"text-slate-400"}`,children:d?"stars":"spa"}),s.jsx("span",{className:"text-xs font-black text-slate-700 truncate",children:c.name}),d&&s.jsx("span",{className:"text-[9px] font-black bg-emerald-500 text-white px-1.5 py-0.5 rounded uppercase tracking-tighter",children:""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-[10px] font-bold text-slate-400 italic",children:[": ",c.stock?.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2}),h]}),s.jsxs("span",{className:"text-[10px] font-bold text-emerald-600/60 transition-opacity",children:[",  : ",c.ratio?.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2}),h,s.jsxs("span",{className:"ml-1 opacity-60",children:["( : ",c.tQty?.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2}),h,")"]})]})]})]}),s.jsxs("div",{className:"w-32 relative shrink-0",children:[s.jsx("input",{type:"number",className:`w-full h-11 rounded-xl border-2 text-right font-black text-lg pr-10 outline-none transition-all shadow-sm ${d?"border-emerald-400 bg-white text-emerald-700 focus:ring-4 focus:ring-emerald-100":"border-slate-200 bg-slate-50 focus:bg-white focus:border-indigo-300"}`,value:c.rQty,onChange:f=>l(c.id,f.target.value)}),s.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-bold text-slate-400",children:h})]}),!d&&s.jsx("button",{onClick:()=>r(f=>({...f,primaryMaterialId:String(c.materialId)})),className:"h-11 px-3 rounded-xl border border-slate-200 text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 transition-all active:scale-95",title:"  ",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"star_rate"})})]},c.id)})}),t.deductions.some(c=>c.type==="raw")&&s.jsxs("div",{className:"mt-3 text-[10px] font-bold text-slate-400 ml-1 flex items-center gap-1.5",children:[s.jsx("span",{className:"material-symbols-rounded text-sm text-emerald-500",children:"info"}),"         . ( )"]})]}),s.jsxs("div",{className:"mt-8",children:[s.jsxs("label",{className:"text-sm font-black text-slate-800 flex items-center gap-2 mb-4",children:[s.jsx("span",{className:"w-6 h-6 rounded-lg bg-slate-200 text-slate-600 flex items-center justify-center text-xs",children:"03"}),"    (Memo)"]}),s.jsx("textarea",{className:"w-full h-24 p-4 rounded-[1.5rem] border border-slate-200 bg-white shadow-sm text-sm font-medium text-slate-600 outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-300 transition-all resize-none placeholder:text-slate-300",placeholder:"  .",value:t.memo,onChange:c=>r(d=>({...d,memo:c.target.value}))})]})]}),s.jsxs("div",{className:"col-span-12 lg:col-span-5 border-l border-slate-200 pl-4 lg:pl-10",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-black text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"w-6 h-6 rounded-lg bg-amber-100 text-amber-600 flex items-center justify-center text-xs",children:"04"}),"    "]}),s.jsx("p",{className:"text-[10px] text-slate-400 mt-1 font-bold",children:" ."})]}),t.loading&&s.jsx("span",{className:"text-[10px] text-indigo-500 animate-pulse font-black uppercase tracking-tighter",children:"Recalculating..."})]}),s.jsxs("div",{className:"bg-slate-100/50 rounded-[2.5rem] border border-slate-200 p-6 flex flex-col min-h-[400px]",children:[t.deductions.filter(c=>c.type!=="raw").length===0&&!t.loading?s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-10 text-center opacity-40",children:[s.jsx("span",{className:"material-symbols-rounded text-5xl mb-4 text-slate-300",children:"fact_check"}),s.jsx("p",{className:"text-xs font-black text-slate-500",children:"BOM  ."})]}):s.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto pr-2 stylish-scrollbar",children:s.jsx("div",{className:"grid grid-cols-1 gap-2",children:t.deductions.filter(c=>c.type!=="raw").map(c=>{const d=c.stock<c.rQty;return s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-2xl border bg-white shadow-sm hover:border-indigo-200 transition-all ${d?"border-rose-200 bg-rose-50/30":"border-slate-100"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${c.type==="aux"?"bg-orange-50 text-orange-500":c.type==="prod"?"bg-indigo-50 text-indigo-500":"bg-emerald-50 text-emerald-500"}`,children:s.jsx("span",{className:"material-symbols-rounded text-base",children:c.type==="aux"?"package_2":c.type==="prod"?"box":"spa"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] font-black text-slate-700",children:c.name}),s.jsxs("p",{className:`text-[9px] font-bold ${d?"text-rose-500":"text-slate-400"}`,children:[": ",Ve(c.stock)," ",d&&"()"]})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("span",{className:"text-sm font-black text-slate-600",children:["-",Ve(c.rQty)]})})]},c.id)})})}),s.jsx("div",{className:"mt-6 flex flex-col items-center",children:s.jsxs("div",{className:"px-4 py-2 bg-white/50 border border-dashed border-slate-300 rounded-2xl text-[10px] font-bold text-slate-400 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"info"}),"   "]})})]})]})]})})}),s.jsxs("div",{className:"p-8 bg-white border-t border-slate-100 flex gap-4 shrink-0 shadow-[0_-10px_20px_-15px_rgba(0,0,0,0.1)]",children:[s.jsx("button",{onClick:e,className:"px-8 h-14 rounded-2xl bg-slate-100 hover:bg-slate-200 text-slate-600 font-black text-sm transition-all",children:""}),s.jsxs("button",{onClick:i,className:"flex-1 h-14 rounded-2xl bg-indigo-600 hover:bg-indigo-700 text-white font-black text-lg shadow-lg shadow-indigo-200 transition-all hover:scale-[1.01] active:scale-95 flex items-center justify-center gap-3 group",children:[s.jsx("span",{className:"material-symbols-rounded group-hover:animate-bounce",children:"conveyor_belt"}),"  "]})]})]})]})},cIe=({isOpen:a,onClose:e,product:t,allProducts:r})=>{const{showAlert:n,showConfirm:i}=Na(),[o,l]=H.useState([]),[c,d]=H.useState(!1),[u,h]=H.useState(""),[f,p]=H.useState(1),g=H.useCallback(async()=>{if(t?.product_id){d(!0);try{const k=await pt("get_product_bom",{productId:t.product_id});l(k||[])}catch(k){console.error(k),n("","   .")}finally{d(!1)}}},[t,n]);H.useEffect(()=>{a&&t&&(g(),h(""),p(1))},[a,t,g]);const b=async()=>{if(!u){n(""," .");return}if(f<=0){n(""," 0  .");return}try{await pt("add_bom_item",{productId:t.product_id,materialId:Number(u),ratio:Number(f)}),await g(),h(""),p(1)}catch(k){console.error(k),n("","    . (    )")}},w=async k=>{if(await i(" ","    ?"))try{await pt("remove_bom_item",{productId:t.product_id,materialId:k}),await g()}catch(T){console.error(T),n("","    .")}};if(!a||!t)return null;const _=r.filter(k=>k.product_id!==t.product_id&&(k.item_type==="material"||k.item_type==="aux_material"||k.item_type==="raw_material")&&!o.some(T=>T.material_id===k.product_id));return s.jsxs("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-sm",onClick:e}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[85vh]",children:[s.jsxs("div",{className:"bg-slate-900 px-6 py-4 flex justify-between items-center relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-teal-400 via-slate-900 to-slate-900 pointer-events-none"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-teal-400"}),s.jsx("span",{className:"text-[10px] font-black text-teal-400 tracking-[0.2em] uppercase",children:"Bill of Materials"})]}),s.jsxs("h3",{className:"text-white font-bold text-xl flex items-center gap-2",children:["   ",s.jsxs("span",{className:"text-slate-500 font-light text-base",children:["| ",t.product_name]})]})]}),s.jsx("button",{onClick:e,className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-slate-400 hover:bg-white/20 hover:text-white transition-all",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-6 bg-slate-50 space-y-6",children:[s.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-teal-50 rounded-full blur-3xl -z-10 translate-x-10 -translate-y-10"}),s.jsxs("h4",{className:"text-sm font-black text-slate-800 mb-3 flex items-center gap-1.5",children:[s.jsx("span",{className:"material-symbols-rounded text-teal-500 text-lg",children:"add_circle"})," "]}),s.jsxs("div",{className:"flex gap-3 items-end",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1 ml-1",children:" "}),s.jsxs("select",{className:"w-full h-11 px-3 rounded-xl bg-slate-50 border border-slate-200 text-sm font-bold text-slate-600 focus:outline-none focus:ring-2 focus:ring-teal-500/50",value:u,onChange:k=>h(k.target.value),children:[s.jsx("option",{value:"",children:" ..."}),_.map(k=>s.jsxs("option",{value:k.product_id,children:[k.product_name," (",k.specification||"-",") - : ",k.stock_quantity||0]},k.product_id))]})]}),s.jsxs("div",{className:"w-32",children:[s.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1 ml-1",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",step:"0.1",className:"w-full h-11 pl-3 pr-8 rounded-xl bg-slate-50 border border-slate-200 text-sm font-bold text-right text-slate-600 focus:outline-none focus:ring-2 focus:ring-teal-500/50",value:f,onChange:k=>p(k.target.value)}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs font-bold text-slate-400",children:""})]})]}),s.jsxs("button",{onClick:b,className:"h-11 px-5 rounded-xl bg-teal-600 text-white font-bold text-sm shadow-lg shadow-teal-200 hover:bg-teal-500 active:scale-95 transition-all flex items-center gap-1 shrink-0",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"add"}),""]})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-orange-50/50 rounded-xl border border-orange-100 text-orange-800 text-xs",children:[s.jsx("span",{className:"material-symbols-rounded text-orange-500 mt-0.5 shrink-0",children:"info"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:"  "}),s.jsxs("p",{className:"mt-1 opacity-80 leading-relaxed",children:[" (",t.product_name,")  ,     ",s.jsx("span",{className:"underline decoration-orange-400 decoration-2 underline-offset-2",children:"  "}),"."]})]})]}),s.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:s.jsxs("table",{className:"w-full text-xs text-left",children:[s.jsx("thead",{className:"bg-slate-50 border-b border-slate-100 text-slate-500 font-bold uppercase",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 w-[60%]",children:" ()"}),s.jsx("th",{className:"px-4 py-3 text-right w-[20%]",children:" "}),s.jsx("th",{className:"px-4 py-3 text-center w-[20%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:c?s.jsx("tr",{children:s.jsx("td",{colSpan:"3",className:"py-10 text-center text-slate-400",children:"Loading..."})}):o.length===0?s.jsx("tr",{children:s.jsxs("td",{colSpan:"3",className:"py-10 text-center text-slate-400 flex flex-col items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-200",children:"playlist_add"}),s.jsx("span",{children:"   ."})]})}):o.map(k=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("div",{className:"font-bold text-slate-700",children:k.product_name}),s.jsxs("div",{className:"text-[10px] text-slate-400",children:[k.specification," | : ",k.stock_quantity]})]}),s.jsxs("td",{className:"px-4 py-3 text-right font-bold text-slate-600",children:[k.ratio," ",s.jsx("span",{className:"text-[10px] font-normal text-slate-400",children:"EA"})]}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("button",{onClick:()=>w(k.material_id),className:"w-8 h-8 rounded-lg bg-slate-100 text-slate-400 hover:bg-red-50 hover:text-red-500 transition-all flex items-center justify-center mx-auto",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"delete"})})})]},k.material_id))})]})})]}),s.jsx("div",{className:"p-4 bg-white border-t border-slate-100 flex justify-end",children:s.jsx("button",{onClick:e,className:"px-6 py-2.5 rounded-xl bg-slate-100 text-slate-600 font-bold text-sm hover:bg-slate-200 transition-colors",children:""})})]})]})},dIe=()=>{const{showAlert:a,showConfirm:e}=Na(),{tab:t,setTab:r,products:n,searchQuery:i,setSearchQuery:o,logSearchQuery:l,setLogSearchQuery:c,hideAutoLogs:d,setHideAutoLogs:u,auxSubTab:h,setAuxSubTab:f,convertModal:p,setConvertModal:g,harvestModal:b,setHarvestModal:w,adjustModal:_,setAdjustModal:k,bomModal:T,setBomModal:D,loadData:I,getFreshnessInfo:O,filteredProducts:P,filteredLogs:V,openAdjustModal:G,handleAdjustStock:Q,openHarvestModal:$,handleHarvest:ae,openConvertModal:J,handleBatchConvert:U,openBomModal:F}=tIe(a,e);return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 relative overflow-hidden",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1 shrink-0",children:[s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Inventory Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["/  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Stock & Production"})]})]})}),s.jsx(aIe,{})]}),s.jsxs("div",{className:"flex-1 flex gap-5 px-6 lg:px-8 min-[2000px]:px-12 pb-6 lg:pb-8 min-[2000px]:pb-12 min-h-0",children:[s.jsxs("div",{className:"flex-1 flex flex-col bg-white rounded-[1.5rem] shadow-sm border border-slate-200 overflow-hidden relative",children:[s.jsx(rIe,{tab:t,setTab:r,openHarvestModal:$,openConvertModal:J,auxSubTab:h,setAuxSubTab:f,searchQuery:i,setSearchQuery:o}),s.jsx(nIe,{products:P,tab:t,getFreshnessInfo:O,openAdjustModal:G,openHarvestModal:$,openConvertModal:J,openBomModal:F})]}),s.jsx(iIe,{logs:V,hideAutoLogs:d,setHideAutoLogs:u,logSearchQuery:l,setLogSearchQuery:c,loadData:I})]}),s.jsx(sIe,{isOpen:_.open,onClose:()=>k(W=>({...W,open:!1})),product:_.product,val:_.val,setVal:W=>k(K=>({...K,val:W})),reason:_.reason,setReason:W=>k(K=>({...K,reason:W})),memo:_.memo,setMemo:W=>k(K=>({...K,memo:W})),handleAdjustStock:Q}),s.jsx(oIe,{isOpen:b.open,onClose:()=>w(W=>({...W,open:!1})),harvestModal:b,setHarvestModal:w,products:n,handleHarvest:ae}),s.jsx(lIe,{isOpen:p.open,onClose:()=>g(W=>({...W,open:!1})),convertModal:p,setConvertModal:g,products:n,handleBatchConvert:U}),s.jsx(cIe,{isOpen:T.open,onClose:()=>D(W=>({...W,open:!1})),product:T.product,allProducts:n})]})},uIe=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState([]),[n,i]=H.useState(null),[o,l]=H.useState([]),[c,d]=H.useState(""),[u,h]=H.useState(!1),[f,p]=H.useState(!1),[g,b]=H.useState([]),[w,_]=H.useState(""),[k,T]=H.useState(!1),[D,I]=H.useState({id:null,type:"",date:new Date().toISOString().split("T")[0],amount:"",desc:""});H.useEffect(()=>{O()},[]);const O=async()=>{try{const F=await fetch("/api/sales/ledger/debtors");if(F.ok){const W=await F.json();r(W||[])}}catch(F){console.error(F)}},P=async F=>{i(F),h(!0);try{const W=await fetch(`/api/sales/ledger?customer_id=${F.customer_id}`);if(W.ok){const K=await W.json();l(K||[])}else l([])}catch(W){console.error(W),l([])}finally{h(!1)}},V=async()=>{if(w)try{const F=await fetch(`/api/customer/search/name?query=${encodeURIComponent(w)}`);if(F.ok){const W=await F.json();b(W||[])}}catch(F){console.error(F)}},G=F=>{t.find(K=>K.customer_id===F.customer_id)||r(K=>[F,...K]),P(F),p(!1),_(""),b([])},Q=(F,W=null)=>{n&&(I({id:W?.ledger_id||null,type:W?.transaction_type||F,date:W?.transaction_date||new Date().toISOString().split("T")[0],amount:W?Math.abs(W.amount):"",desc:W?.description||(F===""?" ":F===""?"  ":" ")}),T(!0))},$=async()=>{const{id:F,type:W,date:K,amount:ee,desc:ne}=D,re=Number(String(ee).replace(/[^0-9-]/g,""));if(re===0)return a(""," .");if(n)try{F?(await fetch("/api/sales/ledger/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ledgerId:F,transactionDate:K,transactionType:W,amount:re,description:ne})}),await a("",".")):(await fetch("/api/sales/ledger/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:n.customer_id,transactionDate:K,transactionType:W,amount:re,description:ne})}),await a("",".")),T(!1),await O();const Z=await fetch(`/api/customer/get?customer_id=${n.customer_id}`);if(Z.ok){const ie=await Z.json();P(ie)}else P(n)}catch(Z){a(""," : "+Z)}},ae=async F=>{if(await e(" ",`   ?
    .`))try{await fetch("/api/sales/ledger/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ledgerId:F})}),await a("","."),P(n),O()}catch(W){a(""," : "+W)}},J=t.filter(F=>(F.customer_name||"").toLowerCase().includes(c.toLowerCase())||(F.mobile_number||"").includes(c)),U=o.length>0?o[0].running_balance:n?.current_balance||0;return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1 bg-[#f8fafc]",children:s.jsxs("div",{className:"flex justify-between items-end mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Sales Management System"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Receivables"})]})]}),s.jsx("div",{className:"flex gap-3",children:s.jsxs("button",{onClick:()=>p(!0),className:"group h-10 px-5 rounded-xl bg-white border border-slate-200 text-slate-600 font-bold hover:border-indigo-500 hover:text-indigo-600 transition-all flex items-center gap-2 shadow-sm text-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg group-hover:scale-110 transition-transform",children:"person_add"}),"   ()"]})})]})}),s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 flex gap-4 overflow-hidden flex-1 pb-6 lg:pb-8 min-[2000px]:pb-12 mt-1",children:[s.jsxs("div",{className:"w-[340px] flex flex-col bg-white rounded-[1.5rem] shadow-lg border border-slate-200/60 overflow-hidden",children:[s.jsxs("div",{className:"p-5 border-b border-slate-100 bg-slate-50/50",children:[s.jsx("h2",{className:"text-sm font-black text-slate-700 mb-2 uppercase tracking-wide",children:"Customer List"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-rounded absolute left-3 top-2.5 text-slate-400 text-lg",children:"search"}),s.jsx("input",{className:"w-full h-10 pl-10 pr-4 rounded-xl bg-white border border-slate-200 text-sm font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500 transition-all shadow-sm placeholder:font-medium",placeholder:" ...",value:c,onChange:F=>d(F.target.value)})]}),s.jsxs("div",{className:"flex justify-between items-center mt-3 text-[11px] font-black text-slate-400 uppercase",children:[s.jsxs("span",{children:[" (",J.length,")"]}),s.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded bg-indigo-50 text-indigo-600",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"check_circle"}),s.jsx("span",{children:" "})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-1",children:[J.map(F=>s.jsxs("div",{onClick:()=>P(F),className:`p-3 rounded-xl cursor-pointer transition-all border ${n?.customer_id===F.customer_id?"bg-indigo-600 border-indigo-500 shadow-md text-white transform scale-[1.02]":"bg-white border-transparent hover:bg-slate-50 hover:border-slate-100 text-slate-600"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:`font-black text-sm ${n?.customer_id===F.customer_id?"text-white":"text-slate-800"}`,children:F.customer_name}),s.jsx("span",{className:`font-mono text-sm font-black ${n?.customer_id===F.customer_id?"text-indigo-200":F.current_balance>0?"text-rose-500":F.current_balance<0?"text-emerald-500":"text-slate-300"}`,children:Ve(F.current_balance)})]}),s.jsx("div",{className:`text-[11px] font-bold ${n?.customer_id===F.customer_id?"text-indigo-200":"text-slate-400"}`,children:F.mobile_number||"-"})]},F.customer_id)),J.length===0&&s.jsx("div",{className:"p-8 text-center text-slate-400 text-xs font-bold",children:"  ."})]})]}),s.jsx("div",{className:"flex-1 flex flex-col bg-white rounded-[1.5rem] shadow-lg border border-slate-200/60 overflow-hidden relative",children:n?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/30",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-100 text-indigo-600 flex items-center justify-center shadow-inner",children:s.jsx("span",{className:"material-symbols-rounded text-2xl",children:"account_balance_wallet"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-black text-slate-800 flex items-center gap-2",children:[n.customer_name,s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-slate-100 text-slate-500 font-black border border-slate-200",children:n.customer_id})]}),s.jsx("div",{className:"text-sm text-slate-500 font-bold",children:n.mobile_number})]})]}),s.jsxs("div",{className:"text-right bg-white px-5 py-2 rounded-2xl border border-slate-100 shadow-sm",children:[s.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-wider mb-0.5",children:"  "}),s.jsxs("div",{className:`text-2xl font-black ${U>0?"text-rose-500":U<0?"text-emerald-500":"text-slate-700"}`,children:[Ve(U)," ",s.jsx("span",{className:"text-sm text-slate-400 font-bold",children:"KRW"})]})]})]}),s.jsxs("div",{className:"px-6 py-3 border-b border-slate-100 flex justify-end gap-2 bg-white sticky top-0 z-10",children:[s.jsxs("button",{onClick:()=>Q(""),className:"h-9 px-4 rounded-xl bg-white border border-slate-200 text-slate-500 font-black hover:bg-slate-50 hover:text-slate-700 hover:border-slate-300 transition-all flex items-center gap-1.5 text-xs shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"history"}),"  "]}),s.jsxs("button",{onClick:()=>Q(""),className:"h-9 px-4 rounded-xl bg-orange-50 border border-orange-100 text-orange-600 font-black hover:bg-orange-100 transition-all flex items-center gap-1.5 text-xs shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"tune"}),"  "]}),s.jsxs("button",{onClick:()=>Q(""),className:"h-9 px-5 rounded-xl bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-all flex items-center gap-1.5 text-xs shadow-md shadow-indigo-200",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"payments"}),"  "]})]}),s.jsx("div",{className:"flex-1 overflow-auto bg-slate-50/50 p-4",children:s.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 font-black text-xs uppercase border-b border-slate-200 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-center w-[12%] min-w-[100px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[8%] min-w-[60px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-left",children:""}),s.jsx("th",{className:"px-4 py-3 text-right w-[15%] min-w-[100px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-right w-[15%] min-w-[100px] bg-slate-50",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[8%] min-w-[80px]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:u?s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"p-20 text-center",children:s.jsx("span",{className:"material-symbols-rounded animate-spin text-3xl text-slate-300",children:"sync"})})}):o.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"p-20 text-center text-slate-400 font-bold italic",children:"  . ( 0)"})}):o.map(F=>{const W=["","","","",""].includes(F.transaction_type);let K="text-slate-600",ee="bg-slate-100";return F.transaction_type===""&&(K="text-blue-600",ee="bg-blue-50"),F.transaction_type===""&&(K="text-emerald-600",ee="bg-emerald-50"),["",""].includes(F.transaction_type)&&(K="text-rose-500",ee="bg-rose-50"),s.jsxs("tr",{className:"hover:bg-slate-50 group transition-colors",children:[s.jsx("td",{className:"px-4 py-3 text-center font-bold text-slate-500 text-xs",children:F.transaction_date}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded-md font-black text-[10px] ${K} ${ee} uppercase`,children:F.transaction_type})}),s.jsxs("td",{className:"px-4 py-3 font-bold text-slate-700 break-all",children:[F.description,F.reference_id&&s.jsxs("span",{className:"text-xs text-slate-400 font-medium ml-1",children:["(",F.reference_id,")"]})]}),s.jsx("td",{className:"px-4 py-3 text-right font-black text-xs font-mono text-slate-600",children:Ve(F.amount)}),s.jsx("td",{className:"px-4 py-3 text-right font-black text-xs font-mono text-indigo-900 bg-slate-50/50",children:Ve(F.running_balance)}),s.jsx("td",{className:"px-4 py-3 text-center",children:W&&s.jsxs("div",{className:"flex justify-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>Q(null,F),className:"w-7 h-7 rounded bg-white border border-slate-200 text-slate-400 hover:text-indigo-600 hover:border-indigo-200 transition-all flex items-center justify-center shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"edit"})}),s.jsx("button",{onClick:()=>ae(F.ledger_id),className:"w-7 h-7 rounded bg-white border border-slate-200 text-slate-400 hover:text-rose-600 hover:border-rose-200 transition-all flex items-center justify-center shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"delete"})})]})})]},F.ledger_id)})})]})})})]}):s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-300",children:[s.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-50 flex items-center justify-center mb-6 shadow-inner",children:s.jsx("span",{className:"material-symbols-rounded text-5xl opacity-50",children:"account_balance_wallet"})}),s.jsx("p",{className:"font-black text-lg text-slate-400",children:"   ."}),s.jsx("p",{className:"text-sm font-medium opacity-60 mt-2",children:"      ."})]})})]}),f&&s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 backdrop-blur-md bg-slate-900/40 animate-in fade-in duration-300",children:s.jsxs("div",{className:"relative w-full max-w-lg bg-white rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95 flex flex-col max-h-[70vh]",children:[s.jsxs("div",{className:"px-6 py-5 bg-slate-800 text-white flex justify-between items-center shrink-0",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-400",children:"person_add"}),"/ "]}),s.jsx("button",{onClick:()=>p(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50 flex gap-2",children:[s.jsx("input",{value:w,onChange:F=>_(F.target.value),onKeyDown:F=>F.key==="Enter"&&V(),className:"flex-1 h-11 px-4 rounded-xl border border-slate-300 font-bold text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:" ...",autoFocus:!0}),s.jsx("button",{onClick:V,className:"h-11 px-6 bg-indigo-600 text-white rounded-xl font-black shadow-lg shadow-indigo-200 hover:bg-indigo-500 transition-all text-sm",children:""})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:s.jsx("table",{className:"w-full text-left text-sm",children:s.jsxs("tbody",{className:"divide-y divide-slate-100",children:[g.map(F=>s.jsxs("tr",{className:"hover:bg-slate-50 group transition-colors",children:[s.jsx("td",{className:"px-4 py-3 font-black text-slate-800",children:F.customer_name}),s.jsx("td",{className:"px-4 py-3 text-slate-500 font-medium text-xs font-mono",children:F.mobile_number}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx("button",{onClick:()=>G(F),className:"px-4 py-1.5 rounded-lg bg-white border border-slate-200 text-indigo-600 font-black text-xs hover:bg-indigo-600 hover:text-white transition-all shadow-sm",children:""})})]},F.customer_id)),g.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"3",className:"p-10 text-center text-slate-400 font-bold italic",children:"  ."})})]})})})]})}),k&&s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 backdrop-blur-sm bg-slate-950/40 text-left",children:s.jsxs("div",{className:"relative w-full max-w-sm bg-white rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95",children:[s.jsxs("div",{className:`px-6 py-5 text-white flex justify-between items-center ${D.type===""?"bg-indigo-600":D.type===""?"bg-slate-700":"bg-orange-500"}`,children:[s.jsx("h3",{className:"text-lg font-black",children:D.id?`${D.type} `:`${D.type} `}),s.jsx("button",{onClick:()=>T(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-black text-slate-400 uppercase ml-1",children:""}),s.jsx("input",{type:"date",value:D.date,onChange:F=>I({...D,date:F.target.value}),className:"w-full h-11 px-4 rounded-xl bg-slate-50 border border-slate-200 font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-black text-slate-400 uppercase ml-1",children:""}),s.jsx("input",{value:Ve(D.amount),onChange:F=>{let W=F.target.value;D.type===""?(W=W.replace(/[^0-9-]/g,""),W.includes("-")&&W.indexOf("-")!==0&&(W=W.replace(/-/g,"")),(W.match(/-/g)||[]).length>1&&(W="-"+W.replace(/-/g,""))):W=W.replace(/[^0-9]/g,""),I({...D,amount:W})},className:"w-full h-11 px-4 rounded-xl bg-white border border-slate-300 text-right font-black text-xl text-indigo-600 focus:ring-2 focus:ring-indigo-500",placeholder:"0"}),s.jsx("div",{className:"text-[11px] text-right font-bold mt-1 text-slate-400",children:D.type===""?s.jsx("span",{className:"text-emerald-500",children:" ."}):s.jsx("span",{className:"text-rose-500",children:" ."})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-black text-slate-400 uppercase ml-1",children:" ()"}),s.jsx("input",{value:D.desc,onChange:F=>I({...D,desc:F.target.value}),className:"w-full h-11 px-4 rounded-xl bg-white border border-slate-200 font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500"})]}),s.jsx("div",{className:"pt-2 flex justify-end",children:s.jsx("button",{onClick:$,className:`h-11 px-8 rounded-xl text-white font-black shadow-lg transition-all text-sm ${D.type===""?"bg-indigo-600 hover:bg-indigo-500 shadow-indigo-200":D.type===""?"bg-slate-700 hover:bg-slate-600 shadow-slate-300":"bg-orange-500 hover:bg-orange-400 shadow-orange-200"}`,children:" "})})]})]})})]})},hIe=`
    @media print {
        @page { size: A4 landscape; margin: 0; }
        html, body { 
            background: white !important; 
            color: black !important;
            color-scheme: light !important;
            margin: 0 !important;
            padding: 0 !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
        #printable-personal-history {
            display: block !important;
            position: absolute !important;
            left: 0 !important;
            top: 0 !important;
            width: 100% !important;
            padding: 10mm !important;
            visibility: visible !important;
            background: white !important;
        }
        #printable-personal-history * {
            visibility: visible !important;
            border-color: black !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
    }
    .print-report-wrapper { 
        font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; 
        color: #000; 
        width: 100%;
    }
    .report-card {
        border: 2px solid #000 !important;
        padding: 30px;
        background: white !important;
    }
    .report-header h1 { 
        margin: 0; 
        font-size: 32px; 
        font-weight: 900; 
        letter-spacing: 0.3em; 
        border-bottom: 5px double #000 !important;
        display: inline-block;
        padding: 0 50px 10px 50px;
    }
    table { 
        width: 100%; 
        border-collapse: collapse !important; 
        font-size: 10px; 
        border: 2px solid #000 !important; 
        table-layout: fixed;
    }
    th, td { 
        border: 1px solid #000 !important; 
        padding: 6px 4px; 
        text-align: center; 
    }
    th { 
        background: #f0f0f0 !important; 
        font-weight: 900; 
        border-bottom: 2px solid #000 !important;
    }
    .bg-row { background: #fafafa !important; }
    .summary-table {
        width: 400px;
        border: 2px solid #000 !important;
    }
    .summary-table th, .summary-table td { border: 1px solid #000 !important; }
`,fIe=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState(""),[n,i]=H.useState("1year"),[o,l]=H.useState([]),[c,d]=H.useState(!1),[u,h]=H.useState(""),[f,p]=H.useState(!1),[g,b]=H.useState(""),[w,_]=H.useState(!1),[k,T]=H.useState(!1),[D,I]=H.useState(null),O=H.useRef(null),P=H.useRef(null),V=H.useMemo(()=>{let W=0,K=0,ee=0;return o.forEach(ne=>{ne.status!==""&&(W++,K+=ne.quantity,ee+=ne.total_amount)}),{count:W,qty:K,amt:ee}},[o]);H.useEffect(()=>()=>{P.current&&(P.current.dispose(),P.current=null)},[]),H.useEffect(()=>{w&&O.current&&setTimeout(J,100)},[w,D,o]);const G=async()=>{if(!t.trim()){a("","    .");return}d(!0),h("    ..."),p(!1);try{const W=await fetch(`/api/sales/search-all?query=${encodeURIComponent(t.trim())}&period=${n}`);if(!W.ok)throw new Error("Network response was not ok");const K=await W.json();l(K||[])}catch(W){console.error(W),l([]),a(""," : "+W)}finally{d(!1)}},Q=()=>{r(""),i("1year"),l([]),p(!1),b("")},$=W=>{W.key==="Enter"&&G()},ae=()=>{!o||o.length===0||(p(!0),b('<span class="material-symbols-rounded spin text-base animate-spin">sync</span>  ...'),setTimeout(()=>{try{const W=o.filter(de=>de.status!=="");if(W.length===0){b("    .");return}const K={};W.forEach(de=>{K[de.product_name]=(K[de.product_name]||0)+de.quantity});const ee=Object.entries(K).sort((de,fe)=>fe[1]-de[1])[0],ne=ee?ee[0]:"-",re=W.reduce((de,fe)=>de+fe.total_amount,0),Z=W.length>0?re/W.length:0;let ie="";W.length>=5?ie=` !  <b class="text-indigo-600">${ne}</b>  ,  <b class="text-indigo-600">${Ve(Z)}</b> .           .`:W.length>=2?ie=` . <b class="text-indigo-600">${ne}</b>    ''      ?`:ie="     .          .",b(ie)}catch{b("   .")}},800))},J=()=>{const W=O.current;if(!W)return;P.current&&P.current.dispose();const K=VY(W);P.current=K;let ee=[],ne=[],re=[];if(D){const de={};for(let fe=1;fe<=12;fe++)de[String(fe).padStart(2,"0")]={qty:0,amt:0};o.filter(fe=>fe.status!==""&&fe.order_date.startsWith(D)).forEach(fe=>{const he=fe.order_date.substring(5,7);de[he]&&(de[he].qty+=fe.quantity,de[he].amt+=fe.total_amount)}),ee=Object.keys(de).sort().map(fe=>`${fe}`),ne=Object.values(de).map(fe=>fe.qty),re=Object.values(de).map(fe=>fe.amt)}else{const de={};o.filter(fe=>fe.status!=="").forEach(fe=>{const he=fe.order_date.substring(0,4);de[he]||(de[he]={qty:0,amt:0}),de[he].qty+=fe.quantity,de[he].amt+=fe.total_amount}),ee=Object.keys(de).sort(),ne=ee.map(fe=>de[fe].qty),re=ee.map(fe=>de[fe].amt)}const Z={title:{text:D?`${D}  `:"   (   )",left:"center",textStyle:{fontSize:14,color:"#64748b"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["()","()"],bottom:0},grid:{left:"3%",right:"4%",bottom:"10%",top:"15%",containLabel:!0},xAxis:{type:"category",data:ee,axisPointer:{type:"shadow"}},yAxis:[{type:"value",name:"",axisLabel:{formatter:"{value}"}},{type:"value",name:"",axisLabel:{formatter:de=>(de/1e4).toLocaleString()+""}}],series:[{name:"()",type:"bar",data:ne,itemStyle:{color:D?"#60a5fa":"#fb7185",borderRadius:[4,4,0,0]},barWidth:"40%",emphasis:{itemStyle:{color:D?"#3b82f6":"#e11d48"}}},{name:"()",type:"line",yAxisIndex:1,data:re,itemStyle:{color:"#6366f1"},lineStyle:{width:3},symbolSize:8,smooth:!0}]};K.setOption(Z),D||K.on("click",de=>{de.componentType==="series"&&I(de.name)});const ie=()=>K.resize();return window.addEventListener("resize",ie),()=>window.removeEventListener("resize",ie)},U=()=>{const W=document.getElementById("printable-personal-content");if(!W)return;const K=`
            <style>
                ${hIe}
                @page { size: A4 landscape; margin: 10mm; }
                body { font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; margin: 0; padding: 10mm; }
                table { border-collapse: collapse !important; width: 100%; }
                th, td { border: 1px solid #000 !important; }
            </style>
            ${W.outerHTML}
        `;El(K)},F=async()=>{if(o.length===0){a("","  .");return}const W=[["No","","","","","","","","","","",""]];o.forEach((ee,ne)=>{const re=ee.customer_id&&ee.customer_id.length>=10&&ee.customer_id.substring(9,10)==="0"?"":"";W.push([ne+1,ee.status||"",re,ee.order_date,ee.customer_name||"",ee.customer_mobile||ee.shipping_mobile_number||"",ee.shipping_name||"",ee.product_name,ee.specification||"",ee.quantity,ee.total_amount,(ee.memo||"").replace(/\n/g," ")].map(Z=>`"${Z}"`))});const K="\uFEFF"+W.map(ee=>ee.join(",")).join(`
`);try{const ee=new Blob([K],{type:"text/csv;charset=utf-8;"}),ne=document.createElement("a"),re=URL.createObjectURL(ee);ne.setAttribute("href",re),ne.setAttribute("download",".csv"),ne.style.visibility="hidden",document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),a(""," .")}catch(ee){console.error(ee),a(""," : "+ee)}};return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 relative overflow-hidden print:bg-white print:h-auto print:overflow-visible print:block",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1 shrink-0 print:hidden",children:s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Sales Analysis & History"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Personal History"})]})]})})}),s.jsxs("div",{className:"hidden print:block w-full mb-8 text-center",children:[s.jsx("h1",{className:"text-3xl font-black text-black mb-4 pb-2 border-b-2 border-black",style:{fontFamily:'"Malgun Gothic", sans-serif'},children:"  "}),s.jsxs("div",{className:"flex justify-between items-end text-xs text-slate-600 mb-2",children:[s.jsxs("span",{children:[": ",s.jsx("span",{className:"font-bold",children:t})," (",n==="1year"?" 1":" ",")"]}),s.jsxs("span",{children:[": ",new Date().toLocaleString()]})]})]}),s.jsxs("div",{className:`flex-1 flex flex-col min-h-0 px-6 lg:px-8 min-[2000px]:px-12 pb-6 lg:pb-8 min-[2000px]:pb-12 mt-2 bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden print:shadow-none print:border-none print:m-0 print:rounded-none ${c?"opacity-80 pointer-events-none":""}`,children:[s.jsxs("div",{className:"shrink-0 p-4 border-b border-slate-100 flex gap-3 items-center bg-white rounded-t-2xl shadow-sm z-20 print:hidden justify-between",children:[s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx("div",{className:"relative",children:s.jsx("input",{type:"text",value:t,onChange:W=>r(W.target.value),onKeyDown:$,className:"pl-3 pr-4 h-[42px] w-[280px] bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 transition-all placeholder:text-slate-400",placeholder:"   ",autoFocus:!0})}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:n,onChange:W=>i(W.target.value),className:"pl-4 pr-10 h-[42px] w-[140px] bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 cursor-pointer appearance-none",children:[s.jsx("option",{value:"1year",children:" 1"}),s.jsx("option",{value:"all",children:" "})]}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",children:"expand_more"})]}),s.jsxs("button",{onClick:G,className:"h-[42px] px-6 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white font-bold text-sm shadow-md shadow-indigo-200 flex items-center gap-2 transition-all active:scale-95",children:[s.jsx("span",{className:"material-symbols-rounded",children:"search"})," "]}),s.jsxs("button",{onClick:Q,className:"h-[42px] px-5 rounded-xl bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 font-bold text-sm shadow-sm flex items-center gap-2 transition-all active:scale-95",children:[s.jsx("span",{className:"material-symbols-rounded",children:"refresh"})," "]})]}),o.length>0&&s.jsxs("button",{onClick:ae,className:"h-[42px] px-5 rounded-xl bg-sky-50 hover:bg-sky-100 text-sky-600 border border-sky-100 font-bold text-sm flex items-center gap-1.5 transition-all",children:[s.jsx("span",{className:"material-symbols-rounded",children:"auto_awesome"})," "]})]}),c&&s.jsxs("div",{className:"absolute inset-0 z-50 bg-white/60 backdrop-blur-[1px] flex flex-col items-center justify-center",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mb-3"}),s.jsx("div",{className:"text-sm font-bold text-slate-600",children:u})]}),f&&s.jsxs("div",{className:"shrink-0 p-5 bg-gradient-to-r from-sky-50 to-white border-b border-sky-100 relative overflow-hidden print:hidden animate-in slide-in-from-top-2 duration-300",children:[s.jsx("div",{className:"absolute top-[-10px] right-[-10px] opacity-5 pointer-events-none",children:s.jsx("span",{className:"material-symbols-rounded text-[120px]",children:"auto_awesome"})}),s.jsxs("div",{className:"flex items-start gap-3 relative z-10",children:[s.jsx("div",{className:"bg-sky-100 p-2.5 rounded-xl text-sky-600 shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded",children:"psychology_alt"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sky-700 font-bold text-sm mb-1.5 flex items-center gap-1.5",children:"Jenny AI  "}),s.jsx("div",{className:"text-sm text-slate-600 leading-relaxed",dangerouslySetInnerHTML:{__html:g}})]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto bg-white relative stylish-scrollbar print:overflow-visible",children:s.jsxs("table",{className:"w-full text-xs border-collapse table-fixed",children:[s.jsx("thead",{className:"sticky top-0 z-10 bg-white/95 backdrop-blur shadow-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[5%]",children:"No"}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[8%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[6%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[10%]",children:""}),s.jsx("th",{className:"py-3 text-left pl-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[12%]",children:" "}),s.jsx("th",{className:"py-3 text-left pl-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[10%]",children:""}),s.jsx("th",{className:"py-3 text-left pl-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[16%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[8%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[6%]",children:""}),s.jsx("th",{className:"py-3 text-right pr-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[10%]",children:""}),s.jsx("th",{className:"py-3 text-left pl-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[9%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:o.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"11",className:"py-20 text-center text-slate-400",children:t?"  .":"     []  ."})}):o.map((W,K)=>{const ee=W.status||"",ne=ee==="",re=W.customer_id&&W.customer_id.length>=10&&W.customer_id.substring(9,10)==="0"?"":"";let Z;const ie="px-1.5 py-0.5 rounded text-[10px] font-bold border";ne?Z=s.jsx("span",{className:`${ie} bg-red-50 text-red-700 border-red-200 line-through`,children:""}):ee===""?Z=s.jsx("span",{className:`${ie} bg-blue-50 text-blue-700 border-blue-200`,children:""}):Z=s.jsx("span",{className:`${ie} bg-emerald-50 text-emerald-700 border-emerald-200`,children:ee});const de=re===""?s.jsx("span",{className:"font-bold text-indigo-500",children:""}):s.jsx("span",{className:"font-bold text-amber-500",children:""});return s.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${ne?"text-slate-400":""}`,children:[s.jsx("td",{className:"px-3 py-1 text-center text-slate-500",children:K+1}),s.jsx("td",{className:"px-3 py-1 text-center",children:Z}),s.jsx("td",{className:"px-3 py-1 text-center text-xs",children:de}),s.jsx("td",{className:"px-3 py-1 text-center text-slate-600 font-mono text-[11px]",children:W.order_date}),s.jsx("td",{className:"px-3 py-1 text-left",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"font-bold text-slate-700",children:W.customer_name||"-"}),s.jsx("div",{className:"text-[11px] text-slate-500 font-mono -mt-0.5",children:W.customer_mobile||"-"})]})}),s.jsx("td",{className:"px-3 py-1 text-left",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"font-medium text-slate-600 truncate max-w-[80px]",title:W.shipping_name,children:W.shipping_name||"-"}),s.jsx("div",{className:"text-[11px] text-slate-400 font-mono -mt-0.5",children:W.shipping_mobile_number||"-"})]})}),s.jsx("td",{className:"px-3 py-1 font-medium text-slate-700 break-keep",children:W.product_name}),s.jsx("td",{className:"px-3 py-1 text-center text-slate-600",children:W.specification||"-"}),s.jsx("td",{className:"px-3 py-1 text-center font-bold text-slate-700",children:W.quantity.toLocaleString()}),s.jsx("td",{className:"px-3 py-1 text-right font-bold text-slate-800",children:Ve(W.total_amount)}),s.jsx("td",{className:"px-3 py-1 text-slate-400 text-[11px]",children:s.jsx("div",{className:"truncate max-w-[120px]",title:W.memo,children:W.memo||""})})]},K)})}),o.length>0&&s.jsx("tfoot",{className:"bg-slate-50 font-bold border-t border-slate-300 print:table-row-group",children:s.jsxs("tr",{children:[s.jsx("td",{colSpan:"8",className:"px-4 py-3 text-center text-slate-600",children:"  ()"}),s.jsx("td",{className:"px-3 py-3 text-center text-indigo-600 font-black",children:V.qty.toLocaleString()}),s.jsx("td",{className:"px-3 py-3 text-right text-indigo-600 font-black",children:Ve(V.amt)}),s.jsx("td",{})]})})]})}),s.jsxs("div",{className:"shrink-0 p-4 border-t border-slate-100 flex justify-between items-center bg-slate-50 print:hidden",children:[s.jsxs("div",{className:"flex gap-6 text-sm font-bold text-slate-700",children:[s.jsxs("div",{children:[" : ",s.jsx("span",{className:"text-indigo-600",children:o.length})," "]}),s.jsxs("div",{children:[" : ",s.jsx("span",{className:"text-indigo-600",children:V.qty})]}),s.jsxs("div",{children:[" : ",s.jsx("span",{className:"text-indigo-600",children:Ve(V.amt)})," "]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xs text-slate-400 mr-2",children:"*  300 "}),o.length>0&&s.jsxs("button",{onClick:()=>{_(!0),I(null)},className:"h-9 px-4 rounded-xl bg-pink-50 hover:bg-pink-100 text-pink-600 border border-pink-100 font-bold text-xs flex items-center gap-1.5 transition-all",children:[s.jsx("span",{className:"material-symbols-rounded",children:"bar_chart"}),"  "]}),s.jsxs("button",{onClick:()=>T(!0),className:"h-9 px-4 rounded-xl border border-slate-200 bg-white hover:bg-slate-50 text-slate-600 font-bold text-xs flex items-center gap-1.5 shadow-sm transition-all",children:[s.jsx("span",{className:"material-symbols-rounded",children:"print"}),"  "]}),s.jsxs("button",{onClick:F,className:"h-9 px-4 rounded-xl bg-emerald-500 hover:bg-emerald-600 text-white font-bold text-xs shadow-md shadow-emerald-200 flex items-center gap-1.5 transition-all active:scale-95",children:[s.jsx("span",{className:"material-symbols-rounded",children:"download"})," (CSV) "]})]})]})]}),k&&s.jsxs("div",{className:"fixed inset-0 z-[300] bg-slate-900/80 backdrop-blur-md flex items-center justify-center p-4",children:[s.jsxs("div",{className:"fixed top-8 right-8 flex flex-col gap-4 z-[310]",children:[s.jsx("button",{onClick:()=>T(!1),className:"w-14 h-14 bg-white text-slate-400 rounded-2xl shadow-2xl hover:text-rose-500 hover:scale-110 active:scale-95 transition-all flex items-center justify-center group",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-3xl group-hover:rotate-90 transition-transform duration-300",children:"close"})}),s.jsx("div",{className:"h-px bg-white/20 w-full"}),s.jsxs("button",{onClick:U,className:"h-14 px-8 rounded-2xl font-black text-sm bg-indigo-600 text-white shadow-2xl shadow-indigo-500/30 hover:bg-indigo-700 hover:-translate-y-1 active:translate-y-0 transition-all flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-xl",children:"print"})," "]})]}),s.jsx("div",{className:"w-full max-w-[297mm] h-[210mm] max-h-[90vh] bg-white rounded-[1rem] shadow-2xl overflow-y-auto overflow-x-hidden relative custom-scrollbar",children:s.jsx("div",{id:"printable-personal-content",className:"p-[10mm]",children:s.jsx("div",{style:{fontFamily:'"Malgun Gothic", sans-serif',color:"#000",width:"100%"},children:s.jsxs("div",{style:{border:"2px solid #000",padding:"30px",backgroundColor:"#fff"},children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[s.jsx("h1",{style:{margin:"0",fontSize:"32px",fontWeight:"900",letterSpacing:"0.3em",borderBottom:"5px double #000",display:"inline-block",padding:"0 50px 10px 50px"},children:"    "}),s.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"space-between",fontSize:"14px",fontWeight:"bold"},children:[s.jsxs("span",{children:[" : ",s.jsx("strong",{children:t})]}),s.jsxs("span",{children:[" : ",new Date().toLocaleString()]})]})]}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"2px solid #000",tableLayout:"fixed"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"35px",fontWeight:"900"},children:"No"}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"60px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"100px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",paddingLeft:"10px",fontWeight:"900"},children:" / "}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"40px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",paddingLeft:"10px",fontWeight:"900"},children:" "})]})}),s.jsx("tbody",{children:o.map((W,K)=>s.jsxs("tr",{style:{backgroundColor:K%2===1?"#fafafa":"#fff"},children:[s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:K+1}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:W.status||""}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:W.order_date.substring(0,10)}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:W.customer_name||"-"}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:Kn(W.customer_mobile||W.shipping_mobile_number||"")}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:W.shipping_name||"-"}),s.jsxs("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left"},children:[s.jsx("div",{style:{fontWeight:"900"},children:W.product_name}),s.jsx("div",{style:{fontSize:"8px",color:"#555"},children:W.specification||""})]}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:W.quantity.toLocaleString()}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"right",fontWeight:"900"},children:Ve(W.total_amount)}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",fontSize:"9px",color:"#666"},children:W.memo||""})]},K))})]}),s.jsx("div",{style:{marginTop:"30px",display:"flex",justifyContent:"flex-end"},children:s.jsx("table",{style:{width:"400px",border:"2px solid #000",borderCollapse:"collapse"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",width:"45%",fontSize:"11px"},children:"   (Total Orders)"}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"14px",fontWeight:"900"},children:[o.length," "]})]}),s.jsxs("tr",{children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",fontSize:"11px"},children:"   "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"14px",fontWeight:"900",color:"#d32f2f"},children:[" ",Ve(o.reduce((W,K)=>W+K.total_amount,0))]})]})]})})}),s.jsx("div",{style:{marginTop:"40px",textAlign:"center",fontSize:"12px",fontWeight:"bold"},children:"       ."}),s.jsx("div",{style:{marginTop:"50px",textAlign:"center",fontSize:"10px",color:"#999",borderTop:"1px solid #eee",paddingTop:"10px"},children:" Mycelium Smart Farm Integration System - All Rights Reserved."})]})})})})]})]})};Wi.register(...jb);const pIe=()=>{const{showAlert:a}=Na(),[e,t]=H.useState([]),[r,n]=H.useState(""),[i,o]=H.useState([]),[l,c]=H.useState([]),[d,u]=H.useState(!1),[h,f]=H.useState(""),[p,g]=H.useState(null),[b,w]=H.useState([]),[_,k]=H.useState(!1),[T,D]=H.useState(null),[I,O]=H.useState(null),P=H.useRef(null),V=H.useRef(null),G=H.useRef(null),Q=H.useRef(null);H.useEffect(()=>{const ne=new Date().getFullYear(),re=[];for(let Z=0;Z<10;Z++)re.push(ne-Z);return t(re),$(""),()=>{V.current&&V.current.destroy(),Q.current&&Q.current.destroy()}},[]);const $=async ne=>{u(!0),f(ne===""?"    ...":`${ne}    ...`),o([]),c([]);try{const Z=await Pa("get_product_sales_stats",ne===""?{}:{year:ne});if(o(Z||[]),U(Z||[]),ne!==""){const ie=await Pa("get_profit_margin_analysis",{year:parseInt(ne)});c(ie||[])}}catch(re){console.error(re),a("","  : "+re)}finally{u(!1)}},ae=async ne=>{g(ne),k(!0),w([]);try{const re=await Pa("get_product_10yr_sales_stats",{productName:ne});w(re||[]),F(re||[])}catch(re){console.error(re),a("","   ")}finally{k(!1)}},J=async(ne,re)=>{O(re);try{const Z=await Pa("get_product_monthly_analysis",{productName:ne,year:parseInt(re)});D(Z||[])}catch(Z){console.error(Z),a("","   ")}},U=ne=>{if(!P.current)return;V.current&&V.current.destroy();const re=[...ne].sort((Z,ie)=>ie.total_amount-Z.total_amount).slice(0,10);V.current=new Wi(P.current,{type:"bar",data:{labels:re.map(Z=>Z.product_name),datasets:[{label:"",data:re.map(Z=>Z.total_amount),backgroundColor:"rgba(99, 102, 241, 0.7)",hoverBackgroundColor:"rgba(99, 102, 241, 0.9)",borderColor:"rgba(99, 102, 241, 1)",borderWidth:1,borderRadius:4}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:10,right:40,top:10,bottom:10}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:Z=>`: ${Ve(Z.raw)}`}}},scales:{x:{beginAtZero:!0,grid:{color:"#f1f5f9"},ticks:{font:{size:10},callback:Z=>Z>=1e8?(Z/1e8).toFixed(1)+"":Z>=1e4?(Z/1e4).toLocaleString()+"":Z.toLocaleString()}},y:{grid:{display:!1},ticks:{font:{weight:"bold",size:11},autoSkip:!1}}}}})},F=ne=>{setTimeout(()=>{if(!G.current)return;Q.current&&Q.current.destroy();const re=[...ne].sort((Z,ie)=>Z.year-ie.year);Q.current=new Wi(G.current,{type:"line",data:{labels:re.map(Z=>`${Z.year}`),datasets:[{label:"",data:re.map(Z=>Z.total_amount),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:.3}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{right:30,top:10,bottom:10}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:Z=>`: ${Ve(Z.raw)}`}}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,ticks:{callback:Z=>Z>=1e8?(Z/1e8).toFixed(1)+"":Z>=1e4?(Z/1e4).toLocaleString()+"":Z.toLocaleString()}}}}})},100)},W=ne=>ne>=40?"text-emerald-600":ne<=10?"text-red-600":"text-slate-600",K=ne=>ne>=40?s.jsx("span",{className:"ml-2 px-1.5 py-0.5 rounded text-[10px] font-bold bg-emerald-100 text-emerald-700",children:"High"}):ne<=10?s.jsx("span",{className:"ml-2 px-1.5 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-700",children:"Low"}):null,ee=ne=>{const re=ne.reduce((de,fe)=>de+fe.record_count,0),Z=ne.reduce((de,fe)=>de+fe.total_quantity,0),ie=ne.reduce((de,fe)=>de+fe.total_amount,0);return{count:re,qty:Z,amt:ie}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-violet-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-violet-600 uppercase",children:"Sales Analysis"})]}),s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-black text-slate-700 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Product Sales"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"inventory_2"}),"     ."]})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-white border border-slate-200 rounded-lg px-3 py-1 shadow-sm",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Year"}),s.jsxs("select",{value:r,onChange:ne=>{n(ne.target.value),$(ne.target.value)},className:"bg-transparent text-sm font-bold text-slate-800 outline-none border-none cursor-pointer",children:[s.jsx("option",{value:"",children:" "}),e.map(ne=>s.jsxs("option",{value:ne,children:[ne,""]},ne))]})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 min-h-0 custom-scrollbar flex flex-col gap-6 relative",children:[d&&s.jsxs("div",{className:"absolute inset-0 z-50 bg-white/70 backdrop-blur-sm flex flex-col items-center justify-center",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl text-violet-500 animate-spin",children:"cyclone"}),s.jsx("div",{className:"mt-4 text-slate-600 font-bold",children:h})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm flex flex-col lg:flex-row min-h-[500px]",children:[s.jsxs("div",{className:"lg:w-[35%] p-6 border-b lg:border-b-0 lg:border-r border-slate-100 flex flex-col min-h-[400px] lg:min-h-0",children:[s.jsxs("h3",{className:"text-slate-700 font-bold mb-4 text-sm flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-violet-500"}),"   (Top 10)"]}),s.jsx("div",{className:"flex-1 relative min-h-0",children:s.jsx("canvas",{ref:P})})]}),s.jsxs("div",{className:"lg:w-2/3 flex flex-col min-h-0",children:[s.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[s.jsx("h3",{className:"font-bold text-slate-700 text-sm",children:"  "}),s.jsx("button",{className:"text-xs text-slate-500 hover:text-indigo-600 underline",onClick:()=>{if(i.length===0){a("","  .");return}const ne=`
                                    <style>
                                        @page { size: A4; margin: 20mm; }
                                        .report-print-wrapper { font-family: 'Pretendard', sans-serif; padding: 20px; color: #000; }
                                        .report-print-wrapper .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #000; padding-bottom: 15px; }
                                        .report-print-wrapper .header h1 { margin: 0; font-size: 24px; font-weight: 900; }
                                        .report-print-wrapper .header p { margin: 5px 0 0; font-weight: bold; font-size: 12px; }
                                        .report-print-wrapper table { width: 100%; border-collapse: collapse; font-size: 12px; }
                                        .report-print-wrapper th, .report-print-wrapper td { border: 1px solid #333; padding: 10px; text-align: center; }
                                        .report-print-wrapper th { background: #f0f0f0; font-weight: bold; }
                                        .report-print-wrapper .text-left { text-align: left; }
                                        .report-print-wrapper .text-right { text-align: right; }
                                    </style>
                                        <div class="report-print-wrapper">
                                            <div class="header">
                                                <h1>  </h1>
                                                <p> : ${r} | : ${new Date().toLocaleString()}</p>
                                            </div>
                                            <table>
                                                <thead>
                                                    <tr>
                                                        <th style="width: 40px;">No</th>
                                                        <th></th>
                                                        <th style="width: 100px;"></th>
                                                        <th style="width: 100px;"></th>
                                                        <th style="width: 150px;"></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    ${i.map((re,Z)=>`
                                                        <tr>
                                                            <td>${Z+1}</td>
                                                            <td class="text-left" style="font-weight:bold;">${re.product_name}</td>
                                                            <td class="text-right">${Ve(re.record_count)}</td>
                                                            <td class="text-right">${Ve(re.total_quantity)}</td>
                                                            <td class="text-right" style="font-weight:bold;">${Ve(re.total_amount)}</td>
                                                        </tr>
                                                    `).join("")}
                                                </tbody>
                                            </table>
                                            <div style="margin-top:20px; text-align:right; font-size:14px; font-weight:bold;">
                                                 : ${i.length} |  : ${Ve(ee(i).count)} |  : ${Ve(ee(i).amt)}
                                            </div>
                                        </div>
                                `;El(ne)},children:" "})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm text-left whitespace-nowrap",children:[s.jsx("thead",{className:"sticky top-0 bg-white z-10 shadow-sm text-xs uppercase text-slate-400 font-bold",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-3 px-4 w-[30%]",children:""}),s.jsx("th",{className:"py-3 px-4 text-right w-[20%]",children:""}),s.jsx("th",{className:"py-3 px-4 text-right w-[20%]",children:""}),s.jsx("th",{className:"py-3 px-4 text-right w-[30%]",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[i.map((ne,re)=>s.jsxs("tr",{onClick:()=>ae(ne.product_name),className:"hover:bg-violet-50 cursor-pointer transition-colors group",children:[s.jsx("td",{className:"py-3 px-4 font-bold text-slate-900 group-hover:text-violet-700",children:ne.product_name}),s.jsx("td",{className:"py-3 px-4 text-right text-black",children:Ve(ne.record_count)}),s.jsx("td",{className:"py-3 px-4 text-right text-black",children:Ve(ne.total_quantity)}),s.jsx("td",{className:"py-3 px-4 text-right font-bold text-slate-900",children:Ve(ne.total_amount)})]},re)),i.length===0&&!d&&s.jsx("tr",{children:s.jsx("td",{colSpan:"4",className:"p-8 text-center text-slate-400",children:" ."})})]})]})}),s.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-6 text-sm font-bold text-slate-700",children:[s.jsxs("div",{children:[" : ",s.jsx("span",{className:"text-indigo-600",children:i.length})]}),s.jsxs("div",{children:[" : ",s.jsx("span",{className:"text-indigo-600",children:Ve(ee(i).count)})]}),s.jsxs("div",{children:[" : ",s.jsx("span",{className:"text-indigo-600",children:Ve(ee(i).amt)})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[s.jsxs("h3",{className:"text-slate-700 font-bold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-emerald-500",children:"paid"}),"     ()"]}),r===""?s.jsxs("div",{className:"p-8 text-center bg-slate-50 rounded-xl border border-dashed border-slate-200",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-300 mb-2",children:"dvr"}),s.jsxs("p",{className:"text-slate-500 text-sm",children:["  ",s.jsx("b",{children:" "}),"   ."]})]}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"w-full text-sm text-left whitespace-nowrap",children:[s.jsx("thead",{className:"bg-emerald-50/50 text-xs uppercase text-emerald-800 font-bold border-b border-emerald-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-3 px-4",children:""}),s.jsx("th",{className:"py-3 px-4 text-right",children:""}),s.jsx("th",{className:"py-3 px-4 text-right",children:"()"}),s.jsx("th",{className:"py-3 px-4 text-right",children:""}),s.jsx("th",{className:"py-3 px-4 text-right",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:l.map((ne,re)=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"py-3 px-4 font-bold text-slate-900",children:ne.product_name}),s.jsx("td",{className:"py-3 px-4 text-right text-black",children:Ve(ne.total_revenue)}),s.jsx("td",{className:"py-3 px-4 text-right text-black",children:Ve(ne.total_cost)}),s.jsx("td",{className:"py-3 px-4 text-right font-bold text-slate-900",children:Ve(ne.net_profit)}),s.jsxs("td",{className:"py-3 px-4 text-right font-mono font-bold",children:[s.jsxs("span",{className:W(ne.margin_rate),children:[ne.margin_rate.toFixed(1),"%"]}),K(ne.margin_rate)]})]},re))})]}),s.jsx("p",{className:"mt-2 text-xs text-right text-slate-400",children:"*  [ ]   ."})]})]})]}),p&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-black text-slate-800",children:p}),s.jsx("p",{className:"text-sm text-slate-500",children:" 10   "})]}),s.jsx("button",{onClick:()=>g(null),className:"p-2 rounded-full hover:bg-slate-200 text-slate-400 hover:text-slate-600 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 min-h-0 custom-scrollbar relative",children:[_&&s.jsx("div",{className:"absolute inset-0 z-10 bg-white/80 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded animate-spin text-4xl text-emerald-500",children:"sync"})}),s.jsx("div",{className:"h-64 mb-6 relative",children:s.jsx("canvas",{ref:G})}),s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500 font-bold border-y border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-3 px-4",children:""}),s.jsx("th",{className:"py-3 px-4 text-right",children:""}),s.jsx("th",{className:"py-3 px-4 text-right",children:""}),s.jsx("th",{className:"py-3 px-4 text-right",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:b.map((ne,re)=>s.jsxs("tr",{onClick:()=>J(p,ne.year),className:"hover:bg-slate-50 cursor-pointer transition-colors",children:[s.jsxs("td",{className:"py-3 px-4 font-bold text-slate-900",children:[ne.year,""]}),s.jsx("td",{className:"py-3 px-4 text-right text-black",children:Ve(ne.record_count)}),s.jsx("td",{className:"py-3 px-4 text-right text-black",children:Ve(ne.total_quantity)}),s.jsx("td",{className:"py-3 px-4 text-right font-bold text-slate-900",children:Ve(ne.total_amount)})]},re))})]})]}),s.jsx("div",{className:"p-4 border-t border-slate-100 bg-slate-50 flex justify-end",children:s.jsx("button",{onClick:()=>g(null),className:"px-5 py-2 bg-white border border-slate-200 shadow-sm rounded-lg text-sm font-bold text-slate-600 hover:bg-slate-100",children:""})})]})}),T&&s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/20 backdrop-blur-[1px] animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg shadow-2xl overflow-hidden border border-slate-200",children:[s.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-violet-50",children:[s.jsxs("h4",{className:"font-bold text-violet-900",children:[I,"  "]}),s.jsx("button",{onClick:()=>D(null),className:"text-violet-400 hover:text-violet-700",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-white sticky top-0 border-b border-slate-200 text-xs font-bold text-slate-500",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-2 px-4",children:""}),s.jsx("th",{className:"py-2 px-4 text-right",children:""}),s.jsx("th",{className:"py-2 px-4 text-right",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[T.map((ne,re)=>s.jsxs("tr",{children:[s.jsxs("td",{className:"py-2 px-4 font-bold text-slate-900",children:[ne.month,""]}),s.jsx("td",{className:"py-2 px-4 text-right text-black",children:Ve(ne.total_quantity)}),s.jsx("td",{className:"py-2 px-4 text-right font-bold text-indigo-700",children:Ve(ne.total_amount)})]},re)),s.jsxs("tr",{className:"bg-slate-50 font-bold border-t border-slate-200",children:[s.jsx("td",{className:"py-2 px-4 text-slate-700",children:""}),s.jsx("td",{className:"py-2 px-4 text-right",children:Ve(T.reduce((ne,re)=>ne+re.total_quantity,0))}),s.jsx("td",{className:"py-2 px-4 text-right",children:Ve(T.reduce((ne,re)=>ne+re.total_amount,0))})]})]})]})})]})})]})},xIe=()=>{const a=Fn(),{showAlert:e,showConfirm:t}=Na(),{isAuthorized:r,checkAdmin:n,isVerifying:i}=Oc(),[o,l]=H.useState([]),[c,d]=H.useState(!1),[u,h]=H.useState({program_id:null,program_name:"",description:"",duration_minutes:60,price_per_person:0,max_participants:10,is_active:!0}),f=H.useRef(null),p=H.useCallback(async()=>{try{const I=await pt("get_experience_programs");l(I)}catch(I){console.error("Failed to load programs:",I)}},[]),g=H.useRef(!1);H.useEffect(()=>{if(g.current)return;g.current=!0,(async()=>await n()||a("/"))()},[]),H.useEffect(()=>{r&&p()},[r,p]);const b=I=>{const{id:O,value:P,type:V,checked:G}=I.target;h(Q=>({...Q,[O]:V==="checkbox"?G:P}))},w=I=>{const O=I.target.value.replace(/[^0-9]/g,"");h(P=>({...P,price_per_person:parseInt(O||0)}))},_=I=>{h({program_id:I.program_id,program_name:I.program_name,description:I.description||"",duration_minutes:I.duration_min||60,price_per_person:I.price_per_person||0,max_participants:I.max_capacity||10,is_active:I.is_active}),f.current?.focus()},k=()=>{h({program_id:null,program_name:"",description:"",duration_minutes:60,price_per_person:0,max_participants:10,is_active:!0})},T=async I=>{if(I.preventDefault(),!u.program_name){e("  .");return}d(!0);try{const O={program_name:u.program_name,description:u.description||null,duration_min:parseInt(u.duration_minutes||0),price_per_person:parseInt(u.price_per_person||0),max_capacity:parseInt(u.max_participants||0),is_active:u.is_active};u.program_id?(await pt("update_experience_program",{program_id:u.program_id,...O}),e(".")):(await pt("create_experience_program",O),e(".")),k(),p()}catch(O){e(" : "+O)}finally{d(!1)}},D=async I=>{if(await t(" ","  ?         ."))try{await pt("delete_experience_program",{program_id:I}),e("."),p()}catch(O){e(" : "+O)}};return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative text-left",children:[s.jsx("div",{id:"local-modal-root",className:"absolute inset-0 z-[9999] pointer-events-none"}),s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-sky-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-sky-600 uppercase",children:"Experience Configuration System"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Management"})]})]})})}),s.jsx("div",{className:"flex-1 overflow-hidden bg-slate-50 px-6 lg:px-8 py-4 flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-y-auto custom-gray-scrollbar p-1",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 items-start",children:[s.jsx("div",{className:"lg:col-span-5 space-y-6 sticky top-0",children:s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl border border-slate-200/50 overflow-hidden",children:[s.jsxs("div",{className:"px-8 py-6 bg-slate-50/50 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("h3",{className:"font-black text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-sky-500",children:"edit_note"}),u.program_id?"  ":"  "]}),u.program_id&&s.jsx("button",{onClick:k,className:"text-[10px] font-black text-indigo-600 bg-indigo-50 px-3 py-1.5 rounded-lg hover:bg-indigo-100 transition-all",children:"  "})]}),s.jsxs("form",{onSubmit:T,className:"p-8 space-y-5",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"text-[11px] font-black text-slate-500 uppercase ml-1 block",children:["  ",s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsx("input",{ref:f,id:"program_name",value:u.program_name,onChange:b,placeholder:":    ",required:!0,className:"w-full h-12 px-4 rounded-xl border border-slate-200 bg-slate-50/30 font-bold text-slate-800 focus:ring-4 focus:ring-sky-500/10 focus:border-sky-500 outline-none transition-all text-sm"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-500 uppercase ml-1 block",children:"  ()"}),s.jsx("input",{type:"number",id:"duration_minutes",value:u.duration_minutes,onChange:b,className:"w-full h-11 px-4 rounded-xl border border-slate-200 bg-white font-black text-right text-slate-800 focus:ring-4 focus:ring-sky-500/10 focus:border-sky-500 outline-none transition-all text-sm"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-500 uppercase ml-1 block",children:"  ()"}),s.jsx("input",{type:"number",id:"max_participants",value:u.max_participants,onChange:b,className:"w-full h-11 px-4 rounded-xl border border-slate-200 bg-white font-black text-right text-slate-800 focus:ring-4 focus:ring-sky-500/10 focus:border-sky-500 outline-none transition-all text-sm"})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-500 uppercase ml-1 block",children:"1  "}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 font-black text-slate-400 text-sm",children:""}),s.jsx("input",{type:"text",id:"price_per_person",value:new Intl.NumberFormat("ko-KR").format(u.price_per_person),onChange:w,className:"w-full h-12 pl-10 pr-4 rounded-xl border border-slate-200 bg-white font-black text-right text-indigo-600 focus:ring-4 focus:ring-sky-500/10 focus:border-sky-500 outline-none transition-all text-base shadow-inner"})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-500 uppercase ml-1 block",children:" "}),s.jsx("textarea",{id:"description",value:u.description,onChange:b,rows:"3",placeholder:"    ",className:"w-full p-4 rounded-2xl border border-slate-200 bg-white font-bold text-slate-700 focus:ring-4 focus:ring-sky-500/10 focus:border-sky-500 outline-none transition-all resize-none text-sm"})]}),s.jsx("div",{className:"flex items-center gap-3 pt-2",children:s.jsxs("label",{className:`flex-1 flex items-center justify-center gap-3 h-12 rounded-xl border transition-all cursor-pointer ${u.is_active?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-slate-50 border-slate-200 text-slate-400"}`,children:[s.jsx("input",{type:"checkbox",id:"is_active",checked:u.is_active,onChange:b,className:"w-5 h-5 rounded-md text-emerald-600 border-slate-300 focus:ring-0"}),s.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"   "})]})})]}),s.jsxs("div",{className:"pt-4 flex gap-3",children:[s.jsx("button",{type:"button",onClick:k,className:"h-12 flex-1 bg-white text-slate-500 font-black rounded-xl border border-slate-200 hover:bg-slate-50 transition-all text-xs",children:""}),s.jsxs("button",{type:"submit",disabled:c,className:"h-12 flex-[2] bg-sky-600 text-white font-black rounded-xl hover:bg-sky-500 shadow-xl shadow-sky-100 transition-all flex items-center justify-center gap-2 text-sm",children:[c?s.jsx("div",{className:"w-5 h-5 border-2 border-white/20 border-t-white rounded-full animate-spin"}):s.jsx("span",{className:"material-symbols-rounded",children:"save"}),u.program_id?"  ":" "]})]})]})]})}),s.jsx("div",{className:"lg:col-span-7 space-y-6 h-full",children:s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl border border-slate-200/50 overflow-hidden h-full flex flex-col",children:[s.jsx("div",{className:"px-8 py-6 border-b border-slate-100",children:s.jsxs("h3",{className:"font-black text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-sky-500",children:"list"}),"  "]})}),s.jsx("div",{className:"flex-1 overflow-auto custom-gray-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-white/95 backdrop-blur-md z-10 border-b border-slate-100",children:s.jsxs("tr",{className:"bg-slate-50/50",children:[s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right",children:" / "}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:o.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"px-6 py-24 text-center",children:s.jsx("p",{className:"text-slate-300 font-black italic text-sm",children:"  ."})})}):o.map((I,O)=>s.jsxs("tr",{className:"group hover:bg-slate-50/80 transition-all cursor-default",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsxs("span",{className:"text-[10px] font-black text-slate-400",children:["#",(O+1).toString().padStart(2,"0")]})}),s.jsxs("td",{className:"px-6 py-5",children:[s.jsx("div",{className:"font-black text-slate-800 text-sm mb-0.5",children:I.program_name}),s.jsx("div",{className:"text-[10px] font-bold text-slate-400 max-w-xs truncate",children:I.description||"-"})]}),s.jsxs("td",{className:"px-6 py-5 text-right",children:[s.jsxs("div",{className:"font-black text-indigo-700 text-sm",children:["\\",new Intl.NumberFormat("ko-KR").format(I.price_per_person)]}),s.jsxs("div",{className:"text-[10px] font-bold text-slate-400",children:[I.duration_min," / ",I.max_capacity,""]})]}),s.jsx("td",{className:"px-6 py-5 text-center",children:s.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-black border ${I.is_active?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-rose-50 text-rose-600 border-rose-100"}`,children:I.is_active?"":""})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-all",children:[s.jsx("button",{onClick:()=>_(I),className:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-sky-600 hover:bg-sky-50 rounded-lg transition-all",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"edit_square"})}),s.jsx("button",{onClick:()=>D(I.program_id),className:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-all",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"delete"})})]})})]},I.program_id))})]})})]})})]})})})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[i?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Sc,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:i?"  ...":"  ..."})]})})},mIe=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState([]),[n,i]=H.useState({program_id:"",reservation_date:new Date().toISOString().split("T")[0],reservation_time:"10:00",participant_count:1,total_amount:0,guest_name:"",guest_contact:"",status:"",payment_status:"",memo:"",customer_id:null}),[o,l]=H.useState(0),[c,d]=H.useState(!1),[u,h]=H.useState(!1),[f,p]=H.useState([]),[g,b]=H.useState(""),w=H.useCallback(async()=>{try{const O=await Pa("get_experience_programs");r(O.filter(P=>P.is_active))}catch(O){console.error("Failed to load programs:",O)}},[]);H.useEffect(()=>{w()},[w]),H.useEffect(()=>{const O=t.find(P=>P.program_id===parseInt(n.program_id));O?(l(O.price_per_person),i(P=>({...P,total_amount:O.price_per_person*P.participant_count}))):(l(0),i(P=>({...P,total_amount:0})))},[n.program_id,n.participant_count,t]);const _=O=>{const{id:P,value:V}=O.target;i(G=>({...G,[P]:V}))},k=async O=>{if(O?.preventDefault(),!!g.trim())try{let P=[];/[0-9]/.test(g)&&(P=await Pa("search_customers_by_mobile",{mobile:g})),P.length===0&&(P=await Pa("search_customers_by_name",{name:g})),p(P)}catch(P){a("  : "+P)}},T=O=>{i(P=>({...P,customer_id:O.customer_id,guest_name:O.customer_name,guest_contact:O.mobile_number||O.phone_number||""})),h(!1),b(""),p([])},D=()=>{i({program_id:"",reservation_date:new Date().toISOString().split("T")[0],reservation_time:"10:00",participant_count:1,total_amount:0,guest_name:"",guest_contact:"",status:"",payment_status:"",memo:"",customer_id:null})},I=async O=>{if(O.preventDefault(),!n.program_id){a(" .");return}d(!0);try{await Pa("create_experience_reservation",{program_id:parseInt(n.program_id),customer_id:n.customer_id,guest_name:n.guest_name,guest_contact:n.guest_contact,reservation_date:n.reservation_date,reservation_time:n.reservation_time,participant_count:parseInt(n.participant_count),total_amount:n.total_amount,status:n.status,payment_status:n.payment_status,memo:n.memo||null}),a(" ."),D()}catch(P){console.error("Reservation error:",P),a("  : "+P)}finally{d(!1)}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Experience Management System"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Reservation Entry"})]})]})})}),s.jsx("div",{className:"flex-1 overflow-hidden bg-slate-50 px-6 lg:px-8 py-4 flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-y-auto custom-gray-scrollbar p-1",children:s.jsx("div",{className:"w-full h-full",children:s.jsx("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/60 border border-slate-200/50 overflow-hidden",children:s.jsxs("form",{onSubmit:I,children:[s.jsxs("div",{className:"p-8 lg:p-10",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"space-y-5 bg-slate-50/50 p-6 rounded-2xl border border-slate-100",children:[s.jsxs("h3",{className:"text-sm font-black text-indigo-600 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"calendar_today"}),"   "]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:["  ",s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsxs("select",{id:"program_id",value:n.program_id,onChange:_,required:!0,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-bold focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-sm",children:[s.jsx("option",{value:"",children:" "}),t.map(O=>s.jsxs("option",{value:O.program_id,children:[O.program_name," (\\",new Intl.NumberFormat("ko-KR").format(O.price_per_person),")"]},O.program_id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:" "}),s.jsx("input",{type:"date",id:"reservation_date",value:n.reservation_date,onChange:_,required:!0,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-black focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:" "}),s.jsx("input",{type:"time",id:"reservation_time",value:n.reservation_time,onChange:_,required:!0,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-black focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-sm"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:" "}),s.jsx("input",{type:"number",id:"participant_count",value:n.participant_count,onChange:_,min:"1",required:!0,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-black focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-right text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[11px] font-black text-indigo-500 uppercase ml-1 mb-1",children:"  "}),s.jsxs("div",{className:"px-4 h-11 flex items-center justify-end bg-indigo-50 border border-indigo-100 rounded-xl text-right font-black text-indigo-700 text-base",children:["\\",new Intl.NumberFormat("ko-KR").format(n.total_amount)]})]})]})]})]})}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"space-y-5 bg-slate-50/50 p-6 rounded-2xl border border-slate-100",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-sm font-black text-indigo-600 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"person"})," "]}),s.jsxs("button",{type:"button",onClick:()=>h(!0),className:"h-7 px-3 rounded-lg bg-slate-900 text-white font-black hover:bg-indigo-600 transition-all flex items-center gap-1.5 text-[10px] shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"search"}),"  "]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:[" /  ",s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsx("input",{type:"text",id:"guest_name",value:n.guest_name,onChange:_,placeholder:" ",required:!0,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-bold focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-sm"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:[" ",s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsx("input",{type:"text",id:"guest_contact",value:n.guest_contact,onChange:_,placeholder:"010-0000-0000",required:!0,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-black focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-sm"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:" "}),s.jsxs("select",{id:"status",value:n.status,onChange:_,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-bold focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-xs",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:" "}),s.jsxs("select",{id:"payment_status",value:n.payment_status,onChange:_,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-bold focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-xs",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]})]})]})]})})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("label",{className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:" / "}),s.jsx("textarea",{id:"memo",value:n.memo,onChange:_,rows:"3",placeholder:"   .",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-bold focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all resize-none text-sm"})]})]}),s.jsxs("div",{className:"px-8 py-5 bg-slate-50 border-t border-slate-100 flex items-center justify-end gap-3 rounded-b-[2rem]",children:[s.jsx("button",{type:"button",onClick:D,className:"h-11 px-6 bg-white text-slate-600 font-black rounded-xl border border-slate-200 hover:bg-slate-50 transition-all shadow-sm text-xs",children:""}),s.jsxs("button",{type:"submit",disabled:c,className:"h-11 px-10 bg-indigo-600 text-white font-black rounded-xl hover:bg-indigo-500 shadow-xl shadow-indigo-100 transition-all flex items-center gap-2 disabled:opacity-50 text-sm",children:[c?s.jsx("div",{className:"w-5 h-5 border-2 border-white/20 border-t-white rounded-full animate-spin"}):s.jsx("span",{className:"material-symbols-rounded text-lg",children:"check_circle"}),"  "]})]})]})})})})}),u&&s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity",onClick:()=>h(!1)}),s.jsxs("div",{className:"relative bg-white w-full max-w-lg rounded-[2rem] shadow-2xl border border-white/20 overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[s.jsxs("h3",{className:"font-black text-lg text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"person_search"})," "]}),s.jsx("button",{onClick:()=>h(!1),className:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-600 hover:bg-slate-200 rounded-full transition-all",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("form",{onSubmit:k,className:"flex gap-2 mb-6",children:[s.jsx("div",{className:"relative flex-1 group",children:s.jsx("input",{type:"text",autoFocus:!0,placeholder:"     ",value:g,onChange:O=>b(O.target.value),className:"w-full px-4 h-12 bg-slate-50 border border-slate-200 rounded-xl font-black focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-sm"})}),s.jsx("button",{className:"h-12 px-6 bg-slate-900 text-white font-black rounded-xl hover:bg-indigo-600 transition-all shadow-lg shadow-slate-200 text-sm",children:""})]}),s.jsx("div",{className:"max-h-[350px] overflow-y-auto space-y-2 pr-1 custom-gray-scrollbar",children:f.length===0?s.jsx("div",{className:"text-center py-12 text-slate-300 font-bold italic text-sm",children:"  ."}):f.map(O=>s.jsxs("button",{onClick:()=>T(O),className:"w-full p-4 flex items-center justify-between hover:bg-indigo-50 border border-slate-50 hover:border-indigo-100 rounded-2xl transition-all text-left group",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-black text-slate-900 group-hover:text-indigo-700",children:O.customer_name}),s.jsx("div",{className:"text-[11px] font-black text-slate-400 mt-0.5",children:Kn(O.mobile_number||O.phone_number)})]}),s.jsx("span",{className:"material-symbols-rounded text-indigo-200 group-hover:text-indigo-500 group-hover:translate-x-1 transition-all",children:"chevron_right"})]},O.customer_id))})]})]})]})]})},gIe=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState([]),[n,i]=H.useState(!0),[o,l]=H.useState({startDate:new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],keyword:""}),[c,d]=H.useState([]),[u,h]=H.useState(null),f=H.useCallback(async()=>{try{const U=await Pa("get_experience_programs");d(U)}catch(U){console.error("Failed to load programs:",U)}},[]);H.useEffect(()=>{f()},[f]);const p=H.useCallback(async()=>{i(!0);try{const F=(await Pa("get_experience_reservations",{startDate:o.startDate||null,endDate:o.endDate||null})).filter(W=>(W.guest_name||"").includes(o.keyword)||(W.guest_contact||"").includes(o.keyword)||(W.program_name||"").includes(o.keyword));r(F),b([])}catch(U){console.error("Load error:",U),a("   .")}finally{i(!1)}},[o,a]),[g,b]=H.useState([]),w=U=>{U.target.checked?b(t.map(F=>F.reservation_id)):b([])},_=U=>{b(F=>F.includes(U)?F.filter(W=>W!==U):[...F,U])},k=async U=>{if(g.length===0)return;let F="",W="",K=!1,ee=!1;switch(U){case"status_confirmed":F=` ${g.length} [] ?`,W="";break;case"payment_paid":F=` ${g.length} [] ?`,K=!0;break;case"status_completed":F=` ${g.length} [] ?`,W="";break;case"status_canceled":F=` ${g.length} [] ?
(    [] )`,W="";break;case"delete":F=` ${g.length}  ?`,ee=!0;break;default:return}if(await e(" ",F))try{for(const ne of g)if(ee)await Pa("delete_experience_reservation",{reservation_id:ne});else if(K)await Pa("update_experience_payment_status",{reservation_id:ne,payment_status:""});else if(await Pa("update_experience_status",{reservation_id:ne,status:W,append_memo:null}),W===""){const re=t.find(Z=>Z.reservation_id===ne);re&&re.payment_status===""&&await Pa("update_experience_payment_status",{reservation_id:ne,payment_status:""})}a(" ","   ."),b([]),p()}catch(ne){a("  : "+ne)}},T=async(U,F)=>{if(!U)return;const W=t.find(K=>K.reservation_id===U);if(W){if(F===""){if(W.status===""){a(" ",`[${W.guest_name}]       .`);return}W.payment_status===""&&await e("   ",`[${W.guest_name}]    .
  [] ?`)&&await Pa("update_experience_payment_status",{reservation_id:U,payment_status:""})}if(F===""){if(W.payment_status!==""){a(" ",`[${W.guest_name}]        .
   .`);return}if(W.status!==""){a(" ",`[${W.guest_name}] ''  .
   .`);return}}if(!(F===""&&W.status===""&&!await e("","   ?")))try{await Pa("update_experience_status",{reservation_id:U,status:F,append_memo:null}),a("",`[${F}]  .`),p()}catch(K){a("","  : "+K)}}},D=async(U,F)=>{if(U)try{await Pa("update_experience_payment_status",{reservation_id:U,payment_status:F}),a("",`[${F}] .`),p()}catch(W){a("","  : "+W)}},I=async U=>{let F=[];if(U&&typeof U=="string")F=[U];else if(g.length>0)F=g;else return;if(await e(" ",` ${F.length}   ?`))try{for(const W of F)await Pa("delete_experience_reservation",{reservation_id:W});a(" ","."),b([]),p()}catch(W){a(""," : "+W)}},O=()=>{if(t.length===0){a("","  .");return}const U=["","","","","","","","","",""],F=t.map(ne=>[ne.reservation_date,ne.reservation_time,ne.program_name,ne.guest_name,ne.guest_contact,ne.participant_count,ne.total_amount,ne.status,ne.payment_status,(ne.memo||"").replace(/,/g," ")]),W="\uFEFF"+[U.join(","),...F.map(ne=>ne.join(","))].join(`
`),K=new Blob([W],{type:"text/csv;charset=utf-8;"}),ee=document.createElement("a");ee.href=URL.createObjectURL(K),ee.download=`_${new Date().toISOString().slice(0,10)}.csv`,ee.click()},P=()=>{if(t.length===0){a("","  .");return}`${o.startDate}${o.endDate}`;const U=`
            <style>
                @page { size: A4 landscape; margin: 15mm; }
                .report-print-wrapper { font-family: 'Malgun Gothic', sans-serif; padding: 20px; }
                .report-print-wrapper .header { text-align: center; margin-bottom: 30px; }
                .report-print-wrapper .header h1 { margin: 0; font-size: 24px; }
                .report-print-wrapper .header p { margin: 5px 0 0; color: #666; font-size: 12px; }
                .report-print-wrapper table { width: 100%; border-collapse: collapse; font-size: 11px; }
                .report-print-wrapper th, .report-print-wrapper td { border: 1px solid #ccc; padding: 6px; text-align: center; }
                .report-print-wrapper th { background: #f0f0f0; font-weight: bold; }
                .report-print-wrapper .text-left { text-align: left; }
                .report-print-wrapper .text-right { text-align: right; }
            </style>
            <div class="report-print-wrapper">
                <div class="header">
                    <h1>  </h1>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 12px; color: #333;">
                    <span style="font-weight: bold;"> : ${o.startDate} ~ ${o.endDate}</span>
                    <span style="color: #888;"> : ${new Date().toLocaleString()}</span>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th style="width: 40px;">No</th>
                            <th style="width: 80px;"></th>
                            <th style="width: 60px;"></th>
                            <th></th>
                            <th style="width: 80px;"></th>
                            <th style="width: 100px;"></th>
                            <th style="width: 50px;"></th>
                            <th style="width: 80px;"></th>
                            <th style="width: 60px;"></th>
                            <th style="width: 60px;"></th>
                        </tr>
                    </thead>
                    <tbody>
                        ${t.map((F,W)=>`
                            <tr>
                                <td>${W+1}</td>
                                <td>${F.reservation_date}</td>
                                <td>${F.reservation_time}</td>
                                <td class="text-left">${F.program_name}</td>
                                <td>${F.guest_name}</td>
                                <td>${F.guest_contact}</td>
                                <td>${F.participant_count}</td>
                                <td class="text-right">${J(F.total_amount)}</td>
                                <td>${F.status}</td>
                                <td>${F.payment_status}</td>
                            </tr>
                        `).join("")}
                    </tbody>
                </table>
            </div>
        `;El(U)};H.useEffect(()=>{p()},[p]);const V=U=>{const{id:F,value:W}=U.target;l(K=>({...K,[F]:W}))},G=async U=>{U.preventDefault();try{await Pa("update_experience_reservation",{reservation_id:u.reservation_id,program_id:parseInt(u.program_id),customer_id:u.customer_id,guest_name:u.guest_name,guest_contact:u.guest_contact,reservation_date:u.reservation_date,reservation_time:u.reservation_time.substring(0,5),participant_count:parseInt(u.participant_count),total_amount:parseInt(u.total_amount),status:u.status,payment_status:u.payment_status,memo:u.memo}),a("  ."),h(null),p()}catch(F){a(" : "+F)}},Q=U=>{const{id:F,value:W}=U.target;h(K=>{const ee={...K,[F]:W};if(F==="program_id"||F==="participant_count"){const ne=parseInt(F==="program_id"?W:K.program_id),re=parseInt(F==="participant_count"?W:K.participant_count),Z=c.find(ie=>ie.program_id===ne);Z&&(ee.total_amount=Z.price_per_person*(re||0),F==="program_id"&&(ee.program_name=Z.program_name))}return ee})},$=U=>{switch(U){case"":return"bg-sky-50 text-sky-600 border-sky-200";case"":return"bg-emerald-50 text-emerald-600 border-emerald-200";case"":return"bg-rose-50 text-rose-600 border-rose-200";default:return"bg-slate-50 text-slate-500 border-slate-200"}},ae=U=>{switch(U){case"":return"bg-indigo-50 text-indigo-600 border-indigo-200";case"":return"bg-amber-50 text-amber-600 border-amber-200";default:return"bg-slate-50 text-slate-500 border-slate-200"}},J=U=>new Intl.NumberFormat("ko-KR").format(U);return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:[s.jsxs("div",{className:"flex justify-between items-end mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-amber-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-amber-600 uppercase",children:"Experience Tracking System"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Inquiry"})]})]}),s.jsxs("div",{className:"flex gap-2 pb-1",children:[s.jsxs("button",{onClick:O,className:"h-10 px-5 bg-white text-slate-600 font-bold rounded-xl border border-slate-200 hover:border-indigo-500 hover:text-indigo-600 transition-all flex items-center gap-2 shadow-sm text-xs",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"download"})," CSV "]}),s.jsxs("button",{onClick:P,className:"h-10 px-5 bg-white text-slate-600 font-bold rounded-xl border border-slate-200 hover:border-indigo-500 hover:text-indigo-600 transition-all flex items-center gap-2 shadow-sm text-xs",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"print"}),"  "]}),s.jsxs("button",{onClick:p,className:"h-10 px-5 bg-slate-900 text-white font-black rounded-xl hover:bg-slate-800 transition-all flex items-center gap-2 shadow-lg shadow-slate-200 text-xs",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"})," "]})]})]}),s.jsx("div",{className:"w-full mt-4",children:s.jsx("div",{className:"bg-white p-4 lg:p-5 rounded-[1.5rem] shadow-sm border border-slate-200/60 transition-all hover:shadow-md w-full",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-end w-full",children:[s.jsxs("div",{className:"space-y-1.5 flex-shrink-0",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 block",children:"  "}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{type:"date",id:"startDate",value:o.startDate,onChange:V,className:"w-40 h-10 px-3 bg-slate-50 border border-slate-200 rounded-xl font-black text-xs text-slate-800 focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all"}),s.jsx("span",{className:"text-slate-300 font-black",children:"~"}),s.jsx("input",{type:"date",id:"endDate",value:o.endDate,onChange:V,className:"w-40 h-10 px-3 bg-slate-50 border border-slate-200 rounded-xl font-black text-xs text-slate-800 focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all"})]})]}),s.jsxs("div",{className:"flex-1 space-y-1.5 w-full flex gap-2 items-end",children:[s.jsxs("div",{className:"flex-1 max-w-md",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 block",children:" /  "}),s.jsx("div",{className:"relative group",children:s.jsx("input",{type:"text",id:"keyword",value:o.keyword,onChange:V,placeholder:"   ",className:"w-full h-10 px-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-xs focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all"})})]}),s.jsxs("button",{onClick:p,className:"h-10 px-6 bg-amber-600 text-white font-black rounded-xl hover:bg-amber-500 transition-all flex items-center justify-center gap-2 shadow-lg shadow-amber-100 text-xs whitespace-nowrap",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"manage_search"})," "]})]})]})})})]}),s.jsxs("div",{className:"flex-1 overflow-hidden bg-slate-50 px-6 lg:px-8 min-[2000px]:px-12 pt-2 pb-6 lg:pb-8 flex flex-col gap-3",children:[g.length>0&&s.jsxs("div",{className:"bg-slate-800 text-white p-3 rounded-xl flex items-center justify-between shadow-lg animate-in slide-in-from-top-2 duration-300",children:[s.jsxs("div",{className:"flex items-center gap-3 px-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-white/20 flex items-center justify-center text-xs font-black",children:g.length}),s.jsx("span",{className:"text-sm font-bold",children:"  ."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>{const U=t.find(F=>F.reservation_id===g[0]);U&&h(U)},disabled:g.length!==1||["",""].includes(t.find(U=>U.reservation_id===g[0])?.status),className:"px-3 py-1.5 bg-indigo-50/80 hover:bg-indigo-100 text-indigo-600 disabled:bg-slate-700 disabled:text-slate-500 disabled:cursor-not-allowed rounded-lg text-xs font-black transition-all flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"edit"}),"  "]}),s.jsx("div",{className:"w-px h-4 bg-white/20 mx-1"}),s.jsx("button",{onClick:()=>k("status_confirmed"),disabled:t.filter(U=>g.includes(U.reservation_id)).some(U=>U.status!==""),className:"px-3 py-1.5 bg-sky-500/80 hover:bg-sky-500 disabled:bg-slate-700 disabled:text-slate-500 disabled:cursor-not-allowed rounded-lg text-xs font-black transition-all",children:""}),s.jsx("button",{onClick:()=>k("payment_paid"),disabled:t.filter(U=>g.includes(U.reservation_id)).every(U=>U.payment_status==="")||t.filter(U=>g.includes(U.reservation_id)).some(U=>U.status===""),className:"px-3 py-1.5 bg-indigo-500/80 hover:bg-indigo-500 disabled:bg-slate-700 disabled:text-slate-500 disabled:cursor-not-allowed rounded-lg text-xs font-black transition-all",children:" "}),s.jsx("button",{onClick:()=>k("status_completed"),disabled:t.filter(U=>g.includes(U.reservation_id)).some(U=>U.status!==""||U.payment_status!==""),className:"px-3 py-1.5 bg-emerald-500/80 hover:bg-emerald-500 disabled:bg-slate-700 disabled:text-slate-500 disabled:cursor-not-allowed rounded-lg text-xs font-black transition-all",children:" "}),s.jsx("button",{onClick:()=>k("status_canceled"),disabled:t.filter(U=>g.includes(U.reservation_id)).some(U=>U.status==="")||t.filter(U=>g.includes(U.reservation_id)).every(U=>U.status===""),className:"px-3 py-1.5 bg-rose-500/80 hover:bg-rose-500 disabled:bg-slate-700 disabled:text-slate-500 disabled:cursor-not-allowed rounded-lg text-xs font-black transition-all",children:" "}),s.jsx("div",{className:"w-px h-4 bg-white/20 mx-1"}),s.jsx("button",{onClick:()=>k("delete"),className:"px-3 py-1.5 bg-slate-600 hover:bg-slate-500 rounded-lg text-xs font-black transition-all",children:" "})]})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-[1.5rem] shadow-xl border border-slate-200 overflow-hidden flex flex-col relative",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-amber-500 to-orange-500"}),s.jsx("div",{className:"overflow-auto flex-1 custom-gray-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-white/95 backdrop-blur-md z-10 border-b border-slate-100",children:s.jsxs("tr",{className:"bg-slate-50/50",children:[s.jsx("th",{className:"px-6 py-4 w-[50px] text-center",children:s.jsx("input",{type:"checkbox",onChange:w,checked:t.length>0&&g.length===t.length,className:"w-4 h-4 rounded border-slate-300 text-amber-600 focus:ring-amber-500 cursor-pointer"})}),s.jsx("th",{className:"px-2 py-4 w-[120px] text-[10px] font-black text-slate-400 uppercase tracking-widest whitespace-nowrap",children:" "}),s.jsx("th",{className:"px-6 py-4 w-auto text-[10px] font-black text-slate-400 uppercase tracking-widest text-left",children:""}),s.jsx("th",{className:"px-6 py-4 w-[15%] text-[10px] font-black text-slate-400 uppercase tracking-widest text-left",children:" / "}),s.jsx("th",{className:"px-6 py-4 w-[12%] text-[10px] font-black text-slate-400 uppercase tracking-widest text-right",children:" ()"}),s.jsx("th",{className:"px-6 py-4 w-[100px] text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:" "}),s.jsx("th",{className:"px-6 py-4 w-[100px] text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:" "})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:n?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"px-6 py-24 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-amber-500/20 border-t-amber-500 rounded-full animate-spin"}),s.jsx("p",{className:"text-slate-300 font-black italic text-sm",children:"  ..."})]})})}):t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"px-6 py-24 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-slate-200 text-5xl",children:"folder_off"}),s.jsx("p",{className:"text-slate-300 font-black italic text-sm",children:"   ."})]})})}):t.map(U=>s.jsxs("tr",{className:`group hover: bg - slate - 50 / 80 transition - all ${g.includes(U.reservation_id)?"bg-amber-50/30":""} `,children:[s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"checkbox",checked:g.includes(U.reservation_id),onChange:()=>_(U.reservation_id),className:"w-4 h-4 rounded border-slate-300 text-amber-600 focus:ring-amber-500 cursor-pointer"})}),s.jsx("td",{className:"px-2 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 font-black text-slate-800 text-sm whitespace-nowrap",children:[U.reservation_date,s.jsx("span",{className:"bg-slate-100 text-slate-500 font-bold px-1.5 py-0.5 rounded text-[10px]",children:U.reservation_time})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"font-black text-indigo-700 bg-indigo-50 px-2 py-1 rounded-lg text-xs border border-indigo-100/50",children:U.program_name})}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("div",{className:"font-black text-slate-800 text-sm",children:U.guest_name}),s.jsx("div",{className:"text-[11px] font-black text-slate-400 mt-0.5",children:Kn(U.guest_contact)})]}),s.jsxs("td",{className:"px-6 py-4 text-right",children:[s.jsx("div",{className:"text-sm font-black text-slate-800",children:J(U.total_amount)}),s.jsxs("div",{className:"text-[10px] font-bold text-slate-400",children:[U.participant_count,""]})]}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:`text-[9px] font-black px-2.5 py-1.5 rounded-full border shadow-sm inline-block min-w-[60px] text-center ${$(U.status)}`,children:U.status})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:`text-[9px] font-black px-2.5 py-1.5 rounded-full border shadow-sm inline-block min-w-[60px] text-center ${ae(U.payment_status)}`,children:U.payment_status})})]},U.reservation_id))})]})})]}),s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-5 px-2 overflow-x-auto",children:[s.jsx("span",{className:"text-sm font-black text-slate-400 mr-2 flex-shrink-0",children:"  :"}),s.jsxs("div",{className:"flex items-center gap-2 opacity-60 grayscale",children:[s.jsx("span",{className:"w-9 h-9 rounded-full bg-slate-200 text-slate-600 font-black flex items-center justify-center text-sm shadow-sm",children:"1"}),s.jsx("span",{className:"text-sm font-black text-slate-600",children:" ()"})]}),s.jsx("span",{className:"material-symbols-rounded text-slate-300",children:"arrow_forward"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-9 h-9 rounded-full bg-sky-100 text-sky-600 font-black flex items-center justify-center text-sm shadow-sm border border-sky-200",children:"2"}),s.jsx("span",{className:"text-sm font-black text-sky-700",children:" "})]}),s.jsx("span",{className:"material-symbols-rounded text-slate-300",children:"arrow_forward"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-9 h-9 rounded-full bg-indigo-100 text-indigo-600 font-black flex items-center justify-center text-sm shadow-sm border border-indigo-200",children:"3"}),s.jsx("span",{className:"text-sm font-black text-indigo-700",children:" "})]}),s.jsx("span",{className:"material-symbols-rounded text-slate-300",children:"arrow_forward"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-9 h-9 rounded-full bg-emerald-100 text-emerald-600 font-black flex items-center justify-center text-sm shadow-sm border border-emerald-200",children:"4"}),s.jsx("span",{className:"text-sm font-black text-emerald-700",children:" "})]}),s.jsxs("div",{className:"ml-auto flex items-center gap-2 bg-slate-100 border border-slate-200 text-slate-500 px-4 py-2 rounded-xl text-xs font-black shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-base text-amber-500",children:"lightbulb"}),s.jsxs("span",{children:[" ",s.jsx("span",{className:"text-slate-700",children:" "}),"  ",s.jsx("span",{className:"text-indigo-600",children:"  "})," ."]})]})]}),s.jsx("div",{className:"flex items-center bg-slate-100 p-6 rounded-[1.5rem] shadow-md border border-slate-300 w-full",children:s.jsxs("div",{className:"flex gap-10 px-4 w-full justify-around",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"  "}),s.jsxs("span",{className:"text-2xl font-black text-slate-700",children:[t.length," ",s.jsx("span",{className:"text-base text-slate-400 font-bold",children:""})]})]}),s.jsx("div",{className:"w-px h-12 bg-slate-200"}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"  "}),s.jsxs("span",{className:"text-2xl font-black text-indigo-600",children:[t.reduce((U,F)=>U+(F.participant_count||0),0)," ",s.jsx("span",{className:"text-base text-indigo-300 font-bold",children:""})]})]}),s.jsx("div",{className:"w-px h-12 bg-slate-200"}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsx("span",{className:"text-2xl font-black text-slate-700",children:J(t.reduce((U,F)=>U+(F.total_amount||0),0))})]})]})})]})]}),u&&s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>h(null)}),s.jsxs("div",{className:"relative bg-white w-full max-w-xl rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[s.jsxs("h3",{className:"font-black text-lg text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"edit_square"}),"  "]}),s.jsx("button",{onClick:()=>h(null),className:"w-8 h-8 flex items-center justify-center text-slate-400 hover:bg-slate-200 rounded-full transition-all",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"p-8",children:s.jsxs("form",{onSubmit:G,children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-bold text-slate-400 text-xs uppercase tracking-wider border-b border-slate-100 pb-2 mb-4",children:"  "}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsx("select",{id:"program_id",value:u.program_id,onChange:Q,className:"w-full h-10 px-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-sm outline-none focus:border-indigo-500",children:c.map(U=>s.jsxs("option",{value:U.program_id,children:[U.program_name," (",J(U.price_per_person),")"]},U.program_id))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsx("input",{type:"date",id:"reservation_date",value:u.reservation_date,onChange:Q,className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-xl font-bold text-sm outline-none focus:border-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsx("input",{type:"time",id:"reservation_time",value:u.reservation_time,onChange:Q,className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-xl font-bold text-sm outline-none focus:border-indigo-500"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsx("input",{type:"number",id:"participant_count",value:u.participant_count,onChange:Q,className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-xl font-bold text-sm text-right outline-none focus:border-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsx("input",{type:"text",value:J(u.total_amount),disabled:!0,className:"w-full h-10 px-3 bg-indigo-50 border border-indigo-100 rounded-xl font-black text-sm text-right text-indigo-700"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-bold text-slate-400 text-xs uppercase tracking-wider border-b border-slate-100 pb-2 mb-4",children:"   "}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsx("input",{type:"text",id:"guest_name",value:u.guest_name,onChange:Q,className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-xl font-bold text-sm outline-none focus:border-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:""}),s.jsx("input",{type:"text",id:"guest_contact",value:u.guest_contact,onChange:Q,className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-xl font-bold text-sm outline-none focus:border-indigo-500"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsxs("select",{id:"status",value:u.status,onChange:Q,className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-xl font-bold text-xs outline-none focus:border-indigo-500",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsxs("select",{id:"payment_status",value:u.payment_status,onChange:Q,className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-xl font-bold text-xs outline-none focus:border-indigo-500",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]})]})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" / "}),s.jsx("textarea",{id:"memo",rows:"3",value:u.memo||"",onChange:Q,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-xs outline-none focus:border-indigo-500 resize-none"})]}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-100 overflow-x-auto pb-2",children:[s.jsx("h4",{className:"font-bold text-slate-400 text-xs uppercase tracking-wider mb-3",children:"   (Quick Action)"}),s.jsxs("div",{className:"flex gap-2",children:[u.status!==""&&u.status!==""&&u.status!==""&&s.jsxs("button",{type:"button",onClick:()=>{T(u.reservation_id,""),h(null)},className:"h-10 px-4 bg-sky-50 text-sky-600 font-bold rounded-lg hover:bg-sky-100 transition-all text-xs whitespace-nowrap flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"check_circle"}),"  "]}),u.payment_status!==""&&u.status!==""&&s.jsxs("button",{type:"button",onClick:()=>{D(u.reservation_id,""),h(null)},className:"h-10 px-4 bg-indigo-50 text-indigo-600 font-bold rounded-lg hover:bg-indigo-100 transition-all text-xs whitespace-nowrap flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"credit_card"}),"   "]}),u.status!==""&&u.status!==""&&s.jsxs("button",{type:"button",onClick:()=>{T(u.reservation_id,""),h(null)},className:"h-10 px-4 bg-orange-50 text-orange-600 font-bold rounded-lg hover:bg-orange-100 transition-all text-xs whitespace-nowrap flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"cancel"}),"  "]}),s.jsxs("button",{type:"button",onClick:()=>{I(u.reservation_id),h(null)},className:"h-10 px-4 bg-rose-50 text-rose-600 font-bold rounded-lg hover:bg-rose-100 transition-all text-xs whitespace-nowrap flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"delete"}),"  "]}),u.status===""&&u.payment_status===""&&s.jsxs("button",{type:"button",onClick:()=>{T(u.reservation_id,""),h(null)},className:"h-10 px-4 bg-emerald-50 text-emerald-600 font-bold rounded-lg hover:bg-emerald-100 transition-all text-xs whitespace-nowrap flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"task_alt"}),"   "]})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end gap-3 pt-6 border-t border-slate-100",children:[s.jsx("button",{type:"button",onClick:()=>h(null),className:"px-6 py-3 bg-white text-slate-500 font-black rounded-xl border border-slate-200 hover:bg-slate-50 transition-all text-sm",children:""}),s.jsxs("button",{type:"submit",className:"px-10 py-3 bg-indigo-600 text-white font-black rounded-xl hover:bg-indigo-500 transition-all shadow-lg text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"save"}),"   ()"]})]})]})})]})]})]})};var t2={exports:{}},vIe=t2.exports,VV;function bIe(){return VV||(VV=1,(function(a,e){(function(t,r){a.exports=r(LH())})(vIe,(function(t){function r(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var n=r(t),i={name:"ko",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),ordinal:function(o){return o+""},formats:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY MMMM D",lll:"YYYY MMMM D A h:mm",llll:"YYYY MMMM D dddd A h:mm"},meridiem:function(o){return o<12?"":""},relativeTime:{future:"%s ",past:"%s ",s:" ",m:"1",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"}};return n.default.locale(i,null,!0),i}))})(t2)),t2.exports}bIe();ea.locale("ko");const yIe=()=>{const{showAlert:a,showConfirm:e}=Na(),[t,r]=H.useState(ea()),[n,i]=H.useState(ea()),[o,l]=H.useState([]),[c,d]=H.useState(!1),[u,h]=H.useState(!1),[f,p]=H.useState(null),[g,b]=H.useState({title:"",description:"",startTime:"",endTime:"",status:"Planned"}),w=H.useCallback(async()=>{d(!0);try{const U=t.startOf("month"),F=t.endOf("month"),W=U.startOf("week"),K=F.endOf("week"),ee=W.format("YYYY-MM-DDTHH:mm:ss"),ne=K.format("YYYY-MM-DDTHH:mm:ss"),re=await Pa("get_schedules",{startDate:ee,endDate:ne});l(re||[])}catch(U){console.error("Failed to fetch schedules:",U)}finally{d(!1)}},[t]);H.useEffect(()=>{w()},[w]);const _=()=>r(U=>U.subtract(1,"month")),k=()=>r(U=>U.add(1,"month")),T=()=>{const U=ea();r(U),i(U)},D=U=>{i(U)},I=(U=null)=>{if(U)p(U),b({title:U.title,description:U.description||"",startTime:ea(U.start_time).format("YYYY-MM-DDTHH:mm"),endTime:ea(U.end_time).format("YYYY-MM-DDTHH:mm"),status:U.status||"Planned"});else{p(null);const F=n.hour(ea().hour()).minute(ea().minute());b({title:"",description:"",startTime:F.format("YYYY-MM-DDTHH:mm"),endTime:F.add(1,"hour").format("YYYY-MM-DDTHH:mm"),status:"Planned"})}h(!0)},O=()=>{h(!1),p(null)},P=async U=>{if(U.preventDefault(),!g.title||!g.startTime||!g.endTime){a(" ","  .");return}try{f?await Pa("update_schedule",{schedule_id:f.schedule_id,title:g.title,description:g.description,start_time:ea(g.startTime).format("YYYY-MM-DDTHH:mm:ss"),end_time:ea(g.endTime).format("YYYY-MM-DDTHH:mm:ss"),status:g.status}):await Pa("create_schedule",{title:g.title,description:g.description,start_time:ea(g.startTime).format("YYYY-MM-DDTHH:mm:ss"),end_time:ea(g.endTime).format("YYYY-MM-DDTHH:mm:ss"),status:g.status}),O(),w()}catch(F){console.error("Save failed:",F),a(" "," : "+F)}},V=async U=>{if(await e(" ","   ?"))try{await Pa("delete_schedule",{schedule_id:U}),O(),w()}catch(F){a(" "," : "+F)}},G=H.useMemo(()=>{const F=t.startOf("month").startOf("week"),W=t.endOf("month").endOf("week"),K=[];let ee=F;for(;ee.isBefore(W)||ee.isSame(W,"day");)K.push(ee),ee=ee.add(1,"day");return K},[t]),Q=H.useMemo(()=>o.filter(U=>{const F=ea(U.start_time).startOf("day"),W=ea(U.end_time).endOf("day");return n.isSame(F,"day")||n.isAfter(F)&&n.isBefore(W)||n.isSame(W,"day")}).sort((U,F)=>ea(U.start_time).valueOf()-ea(F.start_time).valueOf()),[o,n]),$=H.useMemo(()=>o.filter(U=>ea(U.start_time).month()===t.month()).length,[o,t]),ae=U=>{switch(U?.toLowerCase()){case"planned":return"bg-sky-50 text-sky-600 border-sky-100";case"inprogress":return"bg-amber-50 text-amber-600 border-amber-100";case"completed":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"important":return"bg-rose-50 text-rose-600 border-rose-100";default:return"bg-slate-50 text-slate-600 border-slate-100"}},J=U=>{switch(U?.toLowerCase()){case"planned":return"bg-sky-500";case"inprogress":return"bg-amber-500";case"completed":return"bg-emerald-500";case"important":return"bg-rose-500";default:return"bg-slate-500"}};return s.jsxs("div",{className:"flex flex-col h-screen bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-4",children:s.jsx("div",{className:"flex justify-between items-end",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Farm Operation Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Schedule Management"})]})]})})}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-8 overflow-hidden",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-full",children:[s.jsxs("div",{className:"flex-[3] flex flex-col bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5",children:[s.jsxs("div",{className:"px-8 py-6 flex items-center justify-between border-b border-slate-100 bg-white/50 backdrop-blur-sm sticky top-0 z-10",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("h2",{className:"text-2xl font-black text-slate-800 tracking-tight",children:t.format("YYYY. MM")}),s.jsxs("div",{className:"flex items-center bg-slate-100 p-1 rounded-xl border border-slate-200 shadow-inner",children:[s.jsx("button",{onClick:_,className:"p-1.5 hover:bg-white hover:text-indigo-600 hover:shadow-sm rounded-lg transition-all",children:s.jsx(Lae,{size:18})}),s.jsx("button",{onClick:k,className:"p-1.5 hover:bg-white hover:text-indigo-600 hover:shadow-sm rounded-lg transition-all",children:s.jsx(s2,{size:18})}),s.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),s.jsx("button",{onClick:T,className:"px-3 py-1 font-bold text-xs text-slate-600 hover:text-indigo-600 transition-colors uppercase tracking-wider",children:"Today"})]})]}),s.jsx("div",{className:"hidden min-[1200px]:flex items-center gap-4",children:[{key:"planned",label:"",color:"bg-sky-500"},{key:"inprogress",label:"",color:"bg-amber-500"},{key:"completed",label:"",color:"bg-emerald-500"},{key:"important",label:"",color:"bg-rose-500"}].map(U=>s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${U.color}`}),s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tight",children:U.label})]},U.key))})]}),s.jsx("div",{className:"grid grid-cols-7 border-b border-slate-50 bg-slate-50/30 backdrop-blur-sm",children:["","","","","","",""].map((U,F)=>s.jsx("div",{className:`py-3 text-center text-[10px] font-black tracking-[0.2em] uppercase ${F===0?"text-rose-500":F===6?"text-indigo-500":"text-slate-400"}`,children:U},U))}),s.jsx("div",{className:"flex-1 grid grid-cols-7 grid-rows-5 overflow-y-auto",children:G.map((U,F)=>{const W=U.isSame(n,"day"),K=U.isSame(ea(),"day"),ee=U.month()!==t.month(),ne=o.filter(re=>{const Z=ea(re.start_time).startOf("day"),ie=ea(re.end_time).endOf("day");return U.isSame(Z,"day")||U.isAfter(Z)&&U.isBefore(ie)||U.isSame(ie,"day")}).sort((re,Z)=>ea(re.start_time).valueOf()-ea(Z.start_time).valueOf());return s.jsxs("div",{onClick:()=>D(U),className:`min-h-[100px] p-2 border-b border-r border-slate-50 group hover:bg-indigo-50/30 transition-all cursor-pointer relative
                                            ${ee?"bg-slate-50/50":""}
                                            ${W?"bg-indigo-50/50 ring-1 ring-inset ring-indigo-100":""}
                                            ${F%7===6?"border-r-0":""}
                                        `,children:[s.jsx("div",{className:"flex justify-between items-start mb-1.5",children:s.jsx("span",{className:`text-xs font-black w-6 h-6 flex items-center justify-center rounded-lg transition-transform group-hover:scale-110
                                                ${K?"bg-indigo-600 text-white shadow-lg shadow-indigo-200":W?"text-indigo-600":ee?"text-slate-300":U.day()===0?"text-rose-500":U.day()===6?"text-indigo-500":"text-slate-500"}
                                            `,children:U.date()})}),s.jsxs("div",{className:"space-y-1 overflow-hidden",children:[ne.slice(0,3).map(re=>s.jsx("div",{onClick:Z=>{Z.stopPropagation(),I(re)},className:`px-1.5 py-0.5 rounded text-[9px] font-black truncate border transition-transform hover:scale-[1.02]
                                                        ${ae(re.status)}
                                                    `,title:re.title,children:re.title},re.schedule_id)),ne.length>3&&s.jsxs("div",{className:"text-[9px] font-black text-slate-400 pl-1.5",children:["+ ",ne.length-3," "]})]})]},F)})})]}),s.jsxs("div",{className:"flex-1 flex flex-col gap-6 lg:max-w-md h-full overflow-hidden",children:[s.jsxs("div",{className:"flex flex-col bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-200 p-8 ring-1 ring-slate-900/5 flex-1 overflow-hidden",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-2",children:"Selected Date"}),s.jsx("div",{className:"text-sm font-black text-indigo-600 mb-1",children:n.format("YYYY M D")}),s.jsxs("h3",{className:"text-2xl font-black text-slate-800 tracking-tight",children:[n.format("dddd")," "]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-4 scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent",children:Q.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-300 bg-slate-50/50 rounded-2xl border border-dashed border-slate-200",children:[s.jsx(zH,{size:48,className:"mb-3 opacity-20"}),s.jsx("p",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:" "})]}):Q.map(U=>s.jsxs("div",{onClick:()=>I(U),className:"group relative bg-white border border-slate-100 hover:border-indigo-200 p-4 rounded-2xl hover:shadow-xl hover:shadow-indigo-500/10 transition-all cursor-pointer animate-in slide-in-from-right-4 duration-300",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"flex flex-col items-center justify-center py-2 px-3 bg-slate-50 group-hover:bg-indigo-50 rounded-xl transition-colors min-w-[64px]",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 group-hover:text-indigo-400 transition-colors",children:ea(U.start_time).format("HH:mm")}),s.jsx("div",{className:"w-px h-2 bg-slate-200 my-1"}),s.jsx("span",{className:"text-[10px] font-black text-slate-400 group-hover:text-indigo-400 transition-colors",children:ea(U.end_time).format("HH:mm")})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${J(U.status)}`}),s.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:U.status||"General"})]}),s.jsx("h4",{className:"text-sm font-black text-slate-700 truncate group-hover:text-indigo-600 transition-colors",children:U.title}),U.description&&s.jsx("p",{className:"text-[11px] font-medium text-slate-400 line-clamp-1 mt-1",children:U.description})]})]}),U.related_type==="EXPERIENCE"&&s.jsx("div",{className:"absolute top-3 right-3",children:s.jsx(bb,{size:14,className:"text-sky-400"})})]},U.schedule_id))}),s.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100",children:s.jsxs("button",{onClick:()=>I(),className:"w-full h-14 bg-indigo-600 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 hover:bg-indigo-500 shadow-lg shadow-indigo-200 transition-all active:scale-[0.98]",children:[s.jsx(So,{size:20}),"   "]})})]}),s.jsx("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-700 rounded-3xl p-8 text-white shadow-xl shadow-indigo-200/50",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-indigo-200 uppercase tracking-[0.2em] mb-1",children:"Monthly Analytics"}),s.jsxs("div",{className:"text-2xl font-black",children:[$,""]}),s.jsx("p",{className:"text-[11px] font-bold text-indigo-100/70 mt-1 italic",children:"    "})]}),s.jsx("div",{className:"w-12 h-12 bg-white/10 backdrop-blur-md rounded-2xl flex items-center justify-center border border-white/20",children:s.jsx(jc,{size:24,className:"text-white"})})]})})]})]})}),u&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:O}),s.jsxs("div",{className:"relative bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 ring-1 ring-slate-900/10",children:[s.jsxs("div",{className:"px-10 py-8 bg-slate-50/50 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-4 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest",children:f?"Edit Schedule":"New Schedule"})]}),s.jsx("h3",{className:"text-2xl font-black text-slate-800 tracking-tight",children:f?"  ":"  "})]}),s.jsx("button",{onClick:O,className:"w-10 h-10 rounded-2xl bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-100 hover:text-slate-600 transition-all shadow-sm",children:s.jsx(js,{size:20})})]}),s.jsxs("form",{onSubmit:P,className:"p-10 space-y-6",children:[f?.related_type==="EXPERIENCE"&&s.jsxs("div",{className:"flex gap-3 bg-sky-50 p-4 rounded-2xl border border-sky-100 border-l-4 border-l-sky-500 animate-in slide-in-from-top-2",children:[s.jsx("div",{className:"p-1 px-1.5",children:s.jsx($A,{size:18,className:"text-sky-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-black text-sky-800 mb-0.5",children:"    "}),s.jsxs("p",{className:"text-[11px] font-bold text-sky-600 leading-relaxed",children:["    .  ",s.jsx("br",{}),s.jsxs("span",{className:"font-black text-sky-700 underline underline-offset-2 cursor-pointer",onClick:()=>{O()},children:["[  ",">","  ]"]}),"  ."]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:"Title"}),s.jsxs("div",{className:"group relative",children:[s.jsx("input",{type:"text",value:g.title,onChange:U=>b({...g,title:U.target.value}),placeholder:"  ",disabled:f?.related_type==="EXPERIENCE",className:"w-full h-12 px-5 bg-white border border-slate-200 rounded-xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all disabled:bg-slate-50 disabled:text-slate-400",required:!0}),s.jsx("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 opacity-0 group-focus-within:opacity-100 transition-opacity",children:s.jsx(jc,{size:16,className:"text-indigo-400"})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:"Start At"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"datetime-local",value:g.startTime,onChange:U=>b({...g,startTime:U.target.value}),disabled:f?.related_type==="EXPERIENCE",className:"w-full h-12 px-5 bg-white border border-slate-200 rounded-xl font-bold text-xs focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all disabled:bg-slate-50 disabled:text-slate-400",required:!0}),s.jsx("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 text-slate-300 pointer-events-none",children:s.jsx(_v,{size:16})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:"End At"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"datetime-local",value:g.endTime,onChange:U=>b({...g,endTime:U.target.value}),disabled:f?.related_type==="EXPERIENCE",className:"w-full h-12 px-5 bg-white border border-slate-200 rounded-xl font-bold text-xs focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all disabled:bg-slate-50 disabled:text-slate-400",required:!0}),s.jsx("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 text-slate-300 pointer-events-none",children:s.jsx(_v,{size:16})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 ml-2",children:"Status / Color"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"Planned",label:"",color:"bg-sky-500"},{id:"InProgress",label:"",color:"bg-amber-500"},{id:"Completed",label:"",color:"bg-emerald-500"},{id:"Important",label:"",color:"bg-rose-500"}].map(U=>s.jsxs("label",{className:"cursor-pointer",children:[s.jsx("input",{type:"radio",name:"status",value:U.id,checked:g.status===U.id,onChange:F=>b({...g,status:F.target.value}),disabled:f?.related_type==="EXPERIENCE",className:"peer hidden"}),s.jsx("div",{className:`px-4 py-2.5 rounded-xl border-2 font-black text-[10px] uppercase tracking-wider transition-all
                                                ${g.status===U.id?"border-indigo-600 bg-indigo-50 text-indigo-700 shadow-md transform scale-105":"border-slate-100 bg-white text-slate-400 hover:border-slate-200"}
                                                peer-disabled:opacity-50 peer-disabled:cursor-not-allowed
                                            `,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${U.color}`}),U.label]})})]},U.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:"Description"}),s.jsx("textarea",{value:g.description,onChange:U=>b({...g,description:U.target.value}),placeholder:"   (,  )",disabled:f?.related_type==="EXPERIENCE",rows:3,className:"w-full p-5 bg-white border border-slate-200 rounded-2xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all resize-none disabled:bg-slate-50 disabled:text-slate-400"})]}),s.jsxs("div",{className:"pt-6 flex gap-3 border-t border-slate-100",children:[f&&f.related_type!=="EXPERIENCE"&&s.jsx("button",{type:"button",onClick:()=>V(f.schedule_id),className:"h-12 w-12 flex items-center justify-center bg-rose-50 text-rose-500 rounded-xl hover:bg-rose-100 transition-all border border-rose-100",children:s.jsx(al,{size:20})}),s.jsx("div",{className:"flex-1"}),s.jsx("button",{type:"button",onClick:O,className:"h-12 px-8 bg-slate-100 text-slate-600 rounded-xl font-black text-xs hover:bg-slate-200 transition-all",children:""}),f?.related_type!=="EXPERIENCE"&&s.jsxs("button",{type:"submit",className:"h-12 px-10 bg-indigo-600 text-white rounded-xl font-black text-xs hover:bg-indigo-500 shadow-lg shadow-indigo-200 transition-all flex items-center gap-2",children:[s.jsx(yi,{size:16})," ",f?"  ":"  "]})]})]})]})]})]})},wIe=()=>{const[a,e]=H.useState([]),[t,r]=H.useState(!1),{showConfirm:n,showAlert:i}=Na(),[o,l]=H.useState(!1),[c,d]=H.useState(null),[u,h]=H.useState({space_name:"",space_type:"cultivation",location_info:"",area_size:0,area_unit:"m2",is_active:!0,memo:""}),f=async()=>{r(!0);try{const w=await fetch("/api/production/spaces");if(w.ok){const _=await w.json();e(_)}}catch(w){console.error(w)}finally{r(!1)}};H.useEffect(()=>{f()},[]);const p=(w=null)=>{w?(d(w),h({space_id:w.space_id,space_name:w.space_name,space_type:w.space_type||"cultivation",location_info:w.location_info||"",area_size:w.area_size||0,area_unit:w.area_unit||"m2",is_active:w.is_active,memo:w.memo||""})):(d(null),h({space_name:"",space_type:"cultivation",location_info:"",area_size:0,area_unit:"m2",is_active:!0,memo:""})),l(!0)},g=async()=>{if(!u.space_name){i("","/  .");return}try{if(!(await fetch("/api/production/spaces/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,space_id:c?c.space_id:0,area_size:parseFloat(u.area_size)||0})})).ok)throw new Error("Failed to save space");l(!1),f(),i("","  .")}catch(w){i("",` : ${w}`)}},b=async w=>{if(await n(" ","  ?        ."))try{if(!(await fetch(`/api/production/spaces/delete/${w}`,{method:"POST"})).ok)throw new Error("Failed to delete space");f()}catch(k){i("",` : ${k}`)}};return s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-black text-slate-700",children:"   "}),s.jsx("p",{className:"text-xs font-bold text-slate-400 mt-1",children:", ,     ."})]}),s.jsxs("button",{onClick:()=>p(),className:"h-12 px-6 bg-slate-900 border-none rounded-2xl font-black text-sm text-white flex items-center gap-2 shadow-xl shadow-slate-200 transition-all active:scale-[0.95] hover:bg-slate-800",children:[s.jsx(So,{size:18}),"   "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.map(w=>s.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-100 shadow-xl shadow-slate-200/50 p-6 group transition-all hover:translate-y-[-4px]",children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:s.jsx(l2,{size:24})}),s.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>p(w),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg",children:s.jsx(z_,{size:16})}),s.jsx("button",{onClick:()=>b(w.space_id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:s.jsx(al,{size:16})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h4",{className:"text-lg font-black text-slate-700",children:w.space_name}),w.is_active?s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-teal-50 text-teal-600 text-[9px] font-black uppercase",children:"Active"}):s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-slate-100 text-slate-400 text-[9px] font-black uppercase",children:"Inactive"})]}),s.jsx("p",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest",children:w.space_type})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 font-bold",children:[s.jsx(B_,{size:12,className:"text-slate-300"}),s.jsx("span",{children:w.location_info||"  "})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 font-bold",children:[s.jsx(_re,{size:12,className:"text-slate-300"}),s.jsxs("span",{children:[w.area_size," ",w.area_unit]})]})]}),w.memo&&s.jsx("div",{className:"p-3 bg-slate-50 rounded-xl",children:s.jsx("p",{className:"text-[10px] text-slate-400 line-clamp-2 leading-relaxed",children:w.memo})})]})]},w.space_id)),a.length===0&&!t&&s.jsxs("div",{className:"col-span-full py-20 bg-white/50 rounded-[2rem] border-2 border-dashed border-slate-200 flex flex-col items-center justify-center",children:[s.jsx(l2,{size:48,className:"text-slate-200 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:"   ."}),s.jsx("button",{onClick:()=>p(),className:"mt-4 text-indigo-600 font-black text-sm hover:underline",children:"  "})]})]}),o&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity"}),s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl relative z-10 overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsx("div",{className:"p-8 border-b border-slate-50",children:s.jsx("h3",{className:"text-xl font-black text-slate-800",children:c?"  ":"  "})}),s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"/ "}),s.jsx("input",{type:"text",value:u.space_name,onChange:w=>h({...u,space_name:w.target.value}),placeholder:": 1 ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-100"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsxs("select",{value:u.space_type,onChange:w=>h({...u,space_type:w.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-100",children:[s.jsx("option",{value:"cultivation",children:"/"}),s.jsx("option",{value:"processing",children:"/"}),s.jsx("option",{value:"storage",children:"/"}),s.jsx("option",{value:"lab",children:"/"}),s.jsx("option",{value:"field",children:"/"})]})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>h({...u,is_active:!0}),className:`flex-1 h-12 rounded-2xl border-2 font-black text-xs transition-all ${u.is_active?"bg-indigo-50 border-indigo-500 text-indigo-600":"bg-slate-50 border-transparent text-slate-400"}`,children:" "}),s.jsx("button",{onClick:()=>h({...u,is_active:!1}),className:`flex-1 h-12 rounded-2xl border-2 font-black text-xs transition-all ${u.is_active?"bg-slate-50 border-transparent text-slate-400":"bg-red-50 border-red-500 text-red-600"}`,children:""})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"/"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:u.area_size,onChange:w=>h({...u,area_size:w.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-100"}),s.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-slate-400",children:u.area_unit})]})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsxs("select",{value:u.area_unit,onChange:w=>h({...u,area_unit:w.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-100",children:[s.jsx("option",{value:"m2",children:"m ()"}),s.jsx("option",{value:"pyeong",children:""}),s.jsx("option",{value:"shelf",children:" ()"}),s.jsx("option",{value:"ha",children:"ha ()"})]})]})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsx("input",{type:"text",value:u.location_info,onChange:w=>h({...u,location_info:w.target.value}),placeholder:"   ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-100"})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("textarea",{value:u.memo,onChange:w=>h({...u,memo:w.target.value}),className:"w-full h-24 p-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-100 resize-none"})]})]}),s.jsxs("div",{className:"p-8 bg-slate-50 flex gap-3",children:[s.jsx("button",{onClick:()=>l(!1),className:"flex-1 h-12 rounded-2xl font-black text-sm text-slate-400 hover:text-slate-600 transition-colors",children:""}),s.jsx("button",{onClick:g,className:"flex-1 h-12 bg-slate-900 rounded-2xl font-black text-sm text-white shadow-xl shadow-indigo-100 transition-all active:scale-[0.95] hover:bg-slate-800",children:c?" ":" "})]})]})]})]})},_Ie=()=>{const[a,e]=H.useState([]),[t,r]=H.useState([]),[n,i]=H.useState([]),[o,l]=H.useState(!1),{showAlert:c,showConfirm:d}=Na(),[u,h]=H.useState(!1),[f,p]=H.useState(null),[g,b]=H.useState(!1),[w,_]=H.useState(null),[k,T]=H.useState(!1),[D,I]=H.useState(null),[O,P]=H.useState({batch_id:0,batch_code:"",product_id:null,space_id:null,start_date:ea().format("YYYY-MM-DD"),expected_harvest_date:"",status:"growing",initial_quantity:0,unit:""}),V=async()=>{l(!0);try{const[F,W,K]=await Promise.all([fetch("/api/production/batches"),fetch("/api/production/spaces"),fetch("/api/product/list")]),ee=await F.json(),ne=await W.json(),re=await K.json();e(ee),r(ne),i(re)}catch(F){console.error(F)}finally{l(!1)}};H.useEffect(()=>{V()},[]);const G=()=>{const F=ea().format("YYMMDD"),W=Math.floor(Math.random()*999).toString().padStart(3,"0");P(K=>({...K,batch_code:`B-${F}-${W}`}))},Q=(F=null)=>{F?(p(F),P({...F})):(p(null),P({batch_id:0,batch_code:"",product_id:null,space_id:null,start_date:ea().format("YYYY-MM-DD"),expected_harvest_date:"",status:"growing",initial_quantity:0,unit:""}),setTimeout(()=>G(),0)),h(!0)},$=async()=>{if(!O.batch_code||!O.product_id){c("","    .");return}try{if(!(await fetch("/api/production/batches/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...O,product_id:parseInt(O.product_id),space_id:O.space_id?parseInt(O.space_id):null,initial_quantity:parseFloat(O.initial_quantity)||0})})).ok)throw new Error("Failed to save batch");h(!1),V(),c("","  .")}catch(F){c("",` : ${F}`)}},ae=F=>{const W=n.find(ne=>ne.product_id===F.product_id),K=t.find(ne=>ne.space_id===F.space_id),ee={title:W?.product_name||" ",code:F.batch_code,date:ea(F.start_date).format("YYYY.MM.DD"),location:K?.space_name||" ",qrValue:`BATCH|${F.batch_id}|${F.batch_code}|${W?.product_name||"NA"}|${K?.space_name||"NA"}`};_(ee),b(!0)},J=()=>{w&&(O_("batch",w),b(!1))},U=F=>{I(F),T(!0)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-black text-slate-700",children:"    "}),s.jsx("p",{className:"text-xs font-bold text-slate-400 mt-1",children:"   ()   ."})]}),s.jsxs("button",{onClick:()=>Q(),className:"h-12 px-6 bg-slate-900 border-none rounded-2xl font-black text-sm text-white flex items-center gap-2 shadow-xl shadow-slate-200 transition-all hover:bg-slate-800",children:[s.jsx(So,{size:18}),"    "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.map(F=>{const W=n.find(ee=>ee.product_id===F.product_id),K=t.find(ee=>ee.space_id===F.space_id);return s.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-100 shadow-xl shadow-slate-200/50 p-6 flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:"px-3 py-1 bg-indigo-50 text-indigo-600 rounded-lg text-[10px] font-black uppercase tracking-widest",children:F.batch_code}),s.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-0.5 rounded-full text-[10px] font-bold ${F.status==="growing"?"bg-teal-50 text-teal-600":"bg-slate-100 text-slate-500"}`,children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${F.status==="growing"?"bg-teal-500 animate-pulse":"bg-slate-400"}`}),F.status==="growing"?" ":""]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-lg font-black text-slate-700 mb-1",children:W?.product_name||"  "}),s.jsxs("p",{className:"text-xs font-bold text-slate-400 mb-6 flex items-center gap-1",children:[s.jsx(l2,{size:12})," ",K?.space_name||""]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 rounded-2xl mb-6",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1",children:""}),s.jsx("p",{className:"text-xs font-black text-slate-700",children:ea(F.start_date).format("YYYY.MM.DD")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1",children:""}),s.jsx("p",{className:"text-xs font-black text-slate-700",children:F.expected_harvest_date?ea(F.expected_harvest_date).format("MM.DD"):"-"})]}),s.jsxs("div",{className:"col-span-2 pt-2 border-t border-slate-200/50",children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1",children:" "}),s.jsxs("p",{className:"text-xs font-black text-slate-700",children:[F.initial_quantity," ",F.unit]})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>Q(F),className:"flex-1 h-10 bg-white border border-slate-100 rounded-xl text-slate-400 hover:text-indigo-600 font-bold text-[11px] transition-colors",children:[s.jsx(z_,{size:14,className:"inline mr-1"})," "]}),s.jsx("button",{onClick:()=>ae(F),className:"h-10 w-10 bg-white border border-slate-100 rounded-xl text-slate-400 hover:text-indigo-600 transition-colors flex items-center justify-center",title:"  ",children:s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"qr_code"})}),s.jsxs("button",{onClick:()=>U(F),className:"flex-1 h-10 bg-indigo-600 text-white rounded-xl font-black text-[11px] shadow-lg shadow-indigo-100 hover:bg-indigo-500 transition-all",children:[s.jsx(Dre,{size:14,className:"inline mr-1"}),"  "]})]})]},F.batch_id)}),a.length===0&&!o&&s.jsxs("div",{className:"col-span-full py-20 bg-white/50 rounded-[2rem] border-2 border-dashed border-slate-200 flex flex-col items-center justify-center",children:[s.jsx(P_,{size:48,className:"text-slate-200 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:"    ."})]})]}),g&&w&&s.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm"}),s.jsx("div",{className:"bg-white w-full max-w-sm rounded-[3rem] shadow-2xl relative z-10 overflow-hidden animate-in zoom-in-95 duration-200",children:s.jsxs("div",{className:"p-8 flex flex-col items-center",children:[s.jsx("div",{className:"w-20 h-20 bg-indigo-50 rounded-3xl flex items-center justify-center text-indigo-600 mb-6",children:s.jsx("span",{className:"material-symbols-rounded text-[40px]",children:"qr_code"})}),s.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:"   "}),s.jsxs("p",{className:"text-xs font-bold text-slate-400 mb-8 text-center px-6",children:["    ",s.jsx("br",{}),"(Tray) ?"]}),s.jsxs("div",{className:"w-full bg-slate-50 rounded-[2.5rem] p-8 border border-slate-100 mb-8 flex flex-row items-center gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"bg-white p-2 rounded-xl border-2 border-slate-900 leading-[0]",children:s.jsx(vb,{value:w.qrValue,size:90,level:"M"})}),s.jsx("div",{className:"text-[9px] font-black border border-slate-900 px-1.5 py-0.5 bg-white whitespace-nowrap",children:"   "})]}),s.jsxs("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[s.jsxs("div",{className:"border-t-2 border-slate-900 pt-2 pb-1 space-y-2",children:[s.jsxs("div",{className:"flex items-center text-[11px] leading-none",children:[s.jsx("span",{className:"font-black text-slate-900 w-12 shrink-0",children:":"}),s.jsx("span",{className:"font-black text-slate-900 truncate",children:w.title})]}),s.jsxs("div",{className:"flex items-center text-[11px] leading-none",children:[s.jsx("span",{className:"font-black text-slate-900 w-12 shrink-0",children:":"}),s.jsx("span",{className:"font-black text-slate-900 truncate",children:w.date})]}),s.jsxs("div",{className:"flex items-center text-[11px] leading-none",children:[s.jsx("span",{className:"font-black text-slate-900 w-12 shrink-0",children:":"}),s.jsx("span",{className:"font-black text-slate-900 truncate",children:w.location})]})]}),s.jsx("div",{className:"text-[11px] font-black text-slate-900 pt-2 border-t-2 border-slate-900 mt-1 truncate",children:w.code})]})]}),s.jsxs("div",{className:"flex gap-3 w-full",children:[s.jsx("button",{onClick:()=>b(!1),className:"flex-1 h-14 rounded-2xl font-black text-slate-400 hover:bg-slate-50 transition-colors",children:""}),s.jsxs("button",{onClick:J,className:"flex-[2] h-14 bg-slate-900 rounded-2xl font-black text-white shadow-xl shadow-slate-200 flex items-center justify-center gap-2 hover:bg-slate-800 transition-all active:scale-[0.98]",children:[s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"print"}),"  "]})]})]})})]}),s.jsx(NIe,{isOpen:k,batch:D,onClose:()=>T(!1),showAlert:c}),u&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity"}),s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl relative z-10 overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsx("div",{className:"p-8 border-b border-slate-50",children:s.jsx("h3",{className:"text-xl font-black text-slate-800",children:"  "})}),s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:O.batch_code,onChange:F=>P({...O,batch_code:F.target.value}),className:"flex-1 h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm ring-1 ring-slate-100"}),s.jsx("button",{onClick:G,className:"px-3 bg-slate-100 rounded-xl text-slate-500 hover:text-indigo-600",children:s.jsx(qH,{size:16})})]})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsxs("select",{value:O.status,onChange:F=>P({...O,status:F.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm ring-1 ring-slate-100",children:[s.jsx("option",{value:"growing",children:"  (Active)"}),s.jsx("option",{value:"completed",children:" (Done)"}),s.jsx("option",{value:"failed",children:" (Failed)"})]})]})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"   ()"}),s.jsxs("select",{value:O.product_id||"",onChange:F=>P({...O,product_id:F.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100",children:[s.jsx("option",{value:"",children:"  "}),n.filter(F=>F.item_type==="harvest_item"||F.item_type==="").map(F=>s.jsxs("option",{value:F.product_id,children:[F.product_name," ",F.specification?`(${F.specification})`:""]},F.product_id))]})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsxs("select",{value:O.space_id||"",onChange:F=>P({...O,space_id:F.target.value||null}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100",children:[s.jsx("option",{value:"",children:" "}),t.map(F=>s.jsx("option",{value:F.space_id,children:F.space_name},F.space_id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"date",value:O.start_date,onChange:F=>P({...O,start_date:F.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsx("input",{type:"date",value:O.expected_harvest_date,onChange:F=>P({...O,expected_harvest_date:F.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsx("input",{type:"number",value:O.initial_quantity,onChange:F=>P({...O,initial_quantity:F.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"text",value:O.unit,onChange:F=>P({...O,unit:F.target.value}),placeholder:", kg,  ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]})]})]}),s.jsxs("div",{className:"p-8 bg-slate-50 flex gap-3",children:[s.jsx("button",{onClick:()=>h(!1),className:"flex-1 h-12 rounded-2xl font-black text-sm text-slate-400",children:""}),s.jsx("button",{onClick:$,className:"flex-1 h-12 bg-slate-900 rounded-2xl font-black text-sm text-white shadow-xl hover:bg-slate-800",children:"  "})]})]})]})]})},NIe=({isOpen:a,batch:e,onClose:t,showAlert:r})=>{const[n,i]=H.useState({log_id:0,batch_id:null,space_id:null,work_type:"inspect",work_content:"",worker_name:localStorage.getItem("last_worker")||"",log_date:ea().format("YYYY-MM-DD"),env_data:{temp:"",humidity:"",co2:""},photos:[]});if(H.useEffect(()=>{a&&e&&i({log_id:0,batch_id:e.batch_id,space_id:e.space_id,work_type:"inspect",work_content:"",worker_name:localStorage.getItem("last_worker")||"",log_date:ea().format("YYYY-MM-DD"),env_data:{temp:"",humidity:"",co2:""},photos:[]})},[a,e]),!a)return null;const o=async()=>{if(!n.work_content||!n.worker_name){r("","   .");return}try{if(!(await fetch("/api/production/logs/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,batch_id:parseInt(n.batch_id),space_id:n.space_id?parseInt(n.space_id):null,input_materials:null})})).ok)throw new Error("Failed to save log");localStorage.setItem("last_worker",n.worker_name),t(),r("","  .")}catch(l){r("",` : ${l}`)}};return s.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md",onClick:t}),s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl relative z-10 overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"p-8 border-b border-slate-50 flex justify-between items-center bg-indigo-600 text-white",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-black",children:"   "}),s.jsx("p",{className:"text-[10px] font-bold opacity-80 uppercase tracking-widest mt-0.5",children:"Quick Batch Activity Log"})]}),s.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center",children:s.jsx(hh,{size:24})})]}),s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("input",{type:"text",value:n.worker_name,onChange:l=>i({...n,worker_name:l.target.value}),placeholder:" ",className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm ring-1 ring-slate-100 focus:ring-indigo-500/20 transition-all"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "}),s.jsx("input",{type:"date",value:n.log_date,onChange:l=>i({...n,log_date:l.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm ring-1 ring-slate-100"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{id:"inspect",label:"/",icon:Sv},{id:"water",label:"/",icon:h0},{id:"clean",label:"/",icon:fx}].map(l=>s.jsxs("button",{onClick:()=>i({...n,work_type:l.id}),className:`flex flex-col items-center p-3 rounded-2xl border-2 transition-all ${n.work_type===l.id?"bg-indigo-50 border-indigo-600 text-indigo-700":"bg-white border-slate-50 text-slate-400 hover:border-slate-100"}`,children:[s.jsx(l.icon,{size:18,className:"mb-1"}),s.jsx("span",{className:"text-[9px] font-black",children:l.label})]},l.id))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "}),s.jsx("textarea",{value:n.work_content,onChange:l=>i({...n,work_content:l.target.value}),placeholder:" ? (:     )",className:"w-full h-24 p-4 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100 resize-none focus:ring-indigo-500/20 transition-all"})]}),s.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[s.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yb,{size:14,className:"text-rose-400"}),s.jsx("input",{type:"number",step:"0.1",value:n.env_data.temp,onChange:l=>i({...n,env_data:{...n.env_data,temp:l.target.value}}),placeholder:"",className:"w-full h-8 bg-white border-none rounded-lg text-xs font-black shadow-sm"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(h0,{size:14,className:"text-blue-400"}),s.jsx("input",{type:"number",step:"0.1",value:n.env_data.humidity,onChange:l=>i({...n,env_data:{...n.env_data,humidity:l.target.value}}),placeholder:"",className:"w-full h-8 bg-white border-none rounded-lg text-xs font-black shadow-sm"})]})]}),s.jsx("button",{onClick:async()=>{try{const l={temperature:24.5,humidity:65,co2:450};i({...n,env_data:{...n.env_data,temp:l.temperature.toString(),humidity:l.humidity.toString(),co2:l.co2.toString()}})}catch(l){console.error(l)}},className:"p-2 bg-white text-indigo-600 rounded-xl hover:bg-indigo-50 shadow-sm border border-slate-100",children:s.jsx(fx,{size:18})})]})]}),s.jsxs("div",{className:"p-8 bg-slate-50 flex gap-3",children:[s.jsx("button",{onClick:t,className:"flex-1 h-12 rounded-2xl font-black text-sm text-slate-400",children:""}),s.jsx("button",{onClick:o,className:"flex-1 h-12 bg-indigo-600 rounded-2xl font-black text-sm text-white shadow-xl shadow-indigo-100 hover:bg-indigo-500 transition-all",children:"  "})]})]})]})},jIe=()=>{const[a,e]=H.useState([]),[t,r]=H.useState([]),[n,i]=H.useState([]),[o,l]=H.useState(!1),{showAlert:c,showConfirm:d}=Na(),[u,h]=H.useState(!1),[f,p]=H.useState(null),g=H.useRef(null),[b,w]=H.useState("photo"),[_,k]=H.useState({log_id:0,batch_id:null,space_id:null,log_date:ea().format("YYYY-MM-DD"),worker_name:"",work_type:"plant",work_content:"",input_materials:[],env_data:{temp:"",humidity:"",co2:""},photos:[]}),T=[{id:"plant",label:"/",icon:$H,color:"emerald"},{id:"water",label:"/",icon:ire,color:"blue"},{id:"fertilize",label:"/",icon:P_,color:"purple"},{id:"pesticide",label:"/",icon:ZH,color:"red"},{id:"harvest",label:"/",icon:FH,color:"teal"},{id:"process",label:"/",icon:wv,color:"indigo"},{id:"clean",label:"/",icon:h0,color:"indigo"},{id:"inspect",label:"/",icon:Sv,color:"amber"},{id:"education",label:"/",icon:hh,color:"slate"}],D=async()=>{l(!0);try{const[U,F,W]=await Promise.all([fetch("/api/production/logs?limit=100"),fetch("/api/production/spaces"),fetch("/api/production/batches")]),K=await U.json(),ee=await F.json(),ne=await W.json();e(K),r(ee),i(ne)}catch(U){console.error(U)}finally{l(!1)}};H.useEffect(()=>{D()},[]);const I=(U=null)=>{U?(p(U),k({...U,env_data:U.env_data||{temp:"",humidity:"",co2:""},input_materials:Array.isArray(U.input_materials)?U.input_materials:[],photos:Array.isArray(U.photos)?U.photos:[]})):(p(null),k({log_id:0,batch_id:null,space_id:null,log_date:ea().format("YYYY-MM-DD"),worker_name:localStorage.getItem("last_worker")||"",work_type:"plant",work_content:"",input_materials:[],env_data:{temp:"",humidity:"",co2:""},photos:[]})),h(!0)},O=(U="photo")=>{w(U),g.current.click()},P=async U=>{const F=U.target.files[0];if(!F)return;const W=new FormData;W.append("file",F);try{const K=await fetch("/api/production/media/upload",{method:"POST",body:W});if(K.ok){const ee=await K.json(),ne=[..._.photos||[]],re=ne.length+1;ne.push({id:Date.now(),type:b,path:ee,label:`${re})`,displayPath:`/api/production/media/${ee}`}),k({..._,photos:ne})}else throw new Error("Upload failed")}catch(K){console.error("File upload failed:",K),c("","  : "+K)}U.target.value=""},V=U=>{k(F=>({...F,photos:F.photos.filter(W=>W.id!==U)}))},G=()=>{const U=Array.isArray(_.input_materials)?_.input_materials:[];k({..._,input_materials:[...U,{id:Date.now(),name:"",quantity:"",unit:"kg",purpose:""}]})},Q=(U,F,W)=>{k({..._,input_materials:_.input_materials.map(K=>K.id===U?{...K,[F]:W}:K)})},$=U=>{k({..._,input_materials:_.input_materials.filter(F=>F.id!==U)})},ae=async()=>{if(!_.work_content||!_.worker_name){c("","    .");return}try{if(!(await fetch("/api/production/logs/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({..._,batch_id:_.batch_id?parseInt(_.batch_id):null,space_id:_.space_id?parseInt(_.space_id):null,input_materials:_.input_materials.length>0?_.input_materials:null})})).ok)throw new Error("Failed to save log");localStorage.setItem("last_worker",_.worker_name),h(!1),D(),c(""," .")}catch(U){c("",` : ${U}`)}},J=async U=>{if(await d("","   ?"))try{if(!(await fetch(`/api/production/logs/delete/${U}`,{method:"POST"})).ok)throw new Error("Failed to delete log");D(),c(""," .")}catch(W){c("",` : ${W}`)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-black text-slate-700",children:" (GAP/HACCP )"}),s.jsx("p",{className:"text-xs font-bold text-slate-400 mt-1",children:"         ."})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{onClick:()=>I(),className:"h-12 px-6 bg-indigo-600 border-none rounded-2xl font-black text-sm text-white flex items-center gap-2 shadow-xl shadow-indigo-100 transition-all active:scale-[0.95] hover:bg-indigo-500",children:[s.jsx(So,{size:18}),"   "]})})]}),s.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-slate-50 bg-slate-50/30 flex gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Sv,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300",size:16}),s.jsx("input",{type:"text",placeholder:"   ...",className:"w-full h-10 pl-12 pr-4 bg-white border-none rounded-xl text-sm font-bold shadow-sm ring-1 ring-slate-100 focus:ring-indigo-500/20 transition-all"})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50/50 border-b border-slate-100",children:[s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"/"}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"/"}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-right"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[a.map(U=>{const F=T.find(K=>K.id===U.work_type)||T[0],W=t.find(K=>K.space_id===U.space_id);return s.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"w-10 h-10 rounded-xl bg-slate-100 flex flex-col items-center justify-center shrink-0",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 leading-none",children:ea(U.log_date).format("MM")}),s.jsx("span",{className:"text-sm font-black text-slate-700 leading-none mt-0.5",children:ea(U.log_date).format("DD")})]}),s.jsx("div",{className:"px-2 py-1 rounded-lg bg-slate-100 text-slate-600 text-[10px] font-black uppercase",children:F.label})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs font-black text-slate-700",children:W?.space_name||"-"}),U.batch_id&&s.jsxs("p",{className:"text-[10px] text-indigo-500 font-bold",children:["BATCH-",U.batch_id]})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("p",{className:"text-xs font-bold text-slate-600 line-clamp-2 leading-relaxed max-w-sm",children:U.work_content})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-600",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-[10px] text-slate-500",children:U.worker_name?.[0]}),U.worker_name]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex gap-3 text-[10px] font-black text-slate-400",children:[U.env_data?.temp&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(yb,{size:12})," ",U.env_data.temp,"C"]}),U.env_data?.humidity&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(h0,{size:12})," ",U.env_data.humidity,"%"]})]})}),s.jsx("td",{className:"px-6 py-5 text-right",children:s.jsxs("div",{className:"flex gap-1 justify-end",children:[s.jsx("button",{onClick:()=>I(U),className:"p-2 text-slate-300 hover:text-indigo-600 transition-colors",children:s.jsx(z_,{size:16})}),s.jsx("button",{onClick:()=>J(U.log_id),className:"p-2 text-slate-300 hover:text-rose-600 transition-colors",children:s.jsx(al,{size:16})})]})})]},U.log_id)}),a.length===0&&!o&&s.jsx("tr",{children:s.jsxs("td",{colSpan:"6",className:"py-20 text-center",children:[s.jsx(hh,{size:48,className:"mx-auto text-slate-100 mb-3"}),s.jsx("p",{className:"text-slate-400 font-bold",children:"  ."})]})})]})]})})]}),u&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity"}),s.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-[2.5rem] shadow-2xl relative z-10 overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"p-8 border-b border-slate-50 flex justify-between items-center",children:[s.jsx("h3",{className:"text-xl font-black text-slate-800",children:f?" ":" "}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"   "}),s.jsx("p",{className:"text-xs font-bold text-teal-600",children:"GAP/HACCP  "})]})]}),s.jsxs("div",{className:"p-8 grid grid-cols-2 gap-6 overflow-y-auto max-h-[70vh] custom-scrollbar",children:[s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsx("input",{type:"date",value:_.log_date,onChange:U=>k({..._,log_date:U.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"text",value:_.worker_name,onChange:U=>k({..._,worker_name:U.target.value}),placeholder:" ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]}),s.jsxs("div",{className:"space-y-2 text-left col-span-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 mb-2",children:" "}),s.jsx("div",{className:"grid grid-cols-5 gap-2",children:T.map(U=>s.jsxs("button",{onClick:()=>k({..._,work_type:U.id}),className:`
                                                flex flex-col items-center justify-center p-3 rounded-2xl border-2 transition-all
                                                ${_.work_type===U.id?"bg-indigo-50 border-indigo-600 text-indigo-700":"bg-white border-slate-50 text-slate-400 hover:border-slate-100"}
                                            `,children:[s.jsx(U.icon,{size:20,className:"mb-2"}),s.jsx("span",{className:"text-[10px] font-black",children:U.label})]},U.id))})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsxs("select",{value:_.space_id||"",onChange:U=>k({..._,space_id:U.target.value||null}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100",children:[s.jsx("option",{value:"",children:" "}),t.map(U=>s.jsx("option",{value:U.space_id,children:U.space_name},U.space_id))]})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Batch Code ()"}),s.jsxs("select",{value:_.batch_id||"",onChange:U=>k({..._,batch_id:U.target.value||null}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100",children:[s.jsx("option",{value:"",children:" "}),n.map(U=>s.jsx("option",{value:U.batch_id,children:U.batch_code},U.batch_id))]})]}),s.jsxs("div",{className:"space-y-2 text-left col-span-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  "}),s.jsx("textarea",{value:_.work_content,onChange:U=>k({..._,work_content:U.target.value}),className:"w-full h-24 p-5 bg-slate-50 border-none rounded-[2rem] font-bold text-sm ring-1 ring-slate-100 resize-none"})]}),s.jsxs("div",{className:"col-span-2 space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" / "}),s.jsx("button",{type:"button",onClick:G,className:"text-[10px] font-black text-indigo-600 px-3 py-1 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-all",children:"+  "})]}),s.jsx("div",{className:"space-y-2",children:_.input_materials.map(U=>s.jsxs("div",{className:"flex gap-2 items-center bg-slate-50 p-2 rounded-2xl border border-slate-100",children:[s.jsx("input",{type:"text",placeholder:"",value:U.name,onChange:F=>Q(U.id,"name",F.target.value),className:"flex-2 h-9 px-3 bg-white border-none rounded-xl text-xs font-bold"}),s.jsx("input",{type:"text",placeholder:"",value:U.quantity,onChange:F=>Q(U.id,"quantity",F.target.value),className:"flex-1 h-9 px-3 bg-white border-none rounded-xl text-xs font-bold w-16"}),s.jsxs("select",{value:U.unit,onChange:F=>Q(U.id,"unit",F.target.value),className:"h-9 px-2 bg-white border-none rounded-xl text-xs font-bold shadow-sm",children:[s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"",children:""})]}),s.jsx("input",{type:"text",placeholder:"/",value:U.purpose,onChange:F=>Q(U.id,"purpose",F.target.value),className:"flex-2 h-9 px-3 bg-white border-none rounded-xl text-xs font-bold"}),s.jsx("button",{type:"button",onClick:()=>$(U.id),className:"p-2 text-rose-400 hover:bg-rose-50 rounded-lg",children:s.jsx(al,{size:14})})]},U.id))})]}),s.jsx("div",{className:"col-span-2 space-y-4",children:s.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-3xl border border-slate-100",children:[s.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase",children:"Temp (C)"}),s.jsx("input",{type:"number",step:"0.1",value:_.env_data.temp,onChange:U=>k({..._,env_data:{..._.env_data,temp:U.target.value}}),className:"w-full h-9 px-3 bg-white border-none rounded-xl text-xs font-black shadow-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase",children:"Humid (%)"}),s.jsx("input",{type:"number",step:"0.1",value:_.env_data.humidity,onChange:U=>k({..._,env_data:{..._.env_data,humidity:U.target.value}}),className:"w-full h-9 px-3 bg-white border-none rounded-xl text-xs font-black shadow-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase",children:"CO2 (ppm)"}),s.jsx("input",{type:"number",value:_.env_data.co2,onChange:U=>k({..._,env_data:{..._.env_data,co2:U.target.value}}),className:"w-full h-9 px-3 bg-white border-none rounded-xl text-xs font-black shadow-sm"})]})]}),s.jsxs("button",{type:"button",onClick:async()=>{try{const U={temperature:24.5,humidity:65,co2:450};k({..._,env_data:{temp:U.temperature.toString(),humidity:U.humidity.toString(),co2:U.co2.toString()}})}catch(U){console.error("Sensor fetch failed:",U)}},className:"ml-4 p-3 bg-emerald-50 text-emerald-600 rounded-2xl hover:bg-emerald-100 transition-all flex flex-col items-center gap-1 min-w-[80px]",children:[s.jsx(fx,{size:18}),s.jsxs("span",{className:"text-[9px] font-black",children:["",s.jsx("br",{}),""]})]})]})}),s.jsxs("div",{className:"col-span-2 space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" /"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>O("photo"),className:"flex-1 h-16 rounded-2xl border-2 border-dashed border-slate-200 text-slate-400 font-bold text-[10px] flex flex-col items-center justify-center gap-1 hover:bg-emerald-50 hover:border-emerald-200 hover:text-emerald-600 transition-all",children:[s.jsx(UC,{size:18}),"  "]}),s.jsxs("button",{type:"button",onClick:()=>O("receipt"),className:"flex-1 h-16 rounded-2xl border-2 border-dashed border-slate-200 text-slate-400 font-bold text-[10px] flex flex-col items-center justify-center gap-1 hover:bg-blue-50 hover:border-blue-200 hover:text-blue-600 transition-all",children:[s.jsx(YA,{size:18})," "]})]}),_.photos?.length>0&&s.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:_.photos.map(U=>s.jsxs("div",{className:"relative aspect-square rounded-xl border border-slate-100 bg-slate-50 overflow-hidden group",children:[s.jsx("img",{src:U.displayPath,alt:U.label,className:"w-full h-full object-cover"}),s.jsx("button",{onClick:()=>V(U.id),className:"absolute top-1 right-1 w-5 h-5 rounded-full bg-rose-500 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(js,{size:12})})]},U.id))})]})]}),s.jsxs("div",{className:"p-8 bg-slate-50 flex gap-3",children:[s.jsx("button",{onClick:()=>h(!1),className:"flex-1 h-12 rounded-2xl font-black text-sm text-slate-400 hover:bg-slate-100",children:""}),s.jsx("button",{onClick:ae,className:"flex-1 h-12 bg-indigo-600 rounded-2xl font-black text-sm text-white shadow-xl shadow-indigo-100 hover:bg-indigo-500",children:f?"  ":"  "})]})]})]}),s.jsx("input",{type:"file",ref:g,onChange:P,className:"hidden",accept:"image/*"})]})},SIe=()=>{const[a,e]=H.useState([]),[t,r]=H.useState([]),[n,i]=H.useState([]),[o,l]=H.useState(!1),{showAlert:c,showConfirm:d}=Na(),[u,h]=H.useState(!1),[f,p]=H.useState(null),[g,b]=H.useState(null),[w,_]=H.useState({harvest_id:0,batch_id:null,harvest_date:ea().format("YYYY-MM-DD"),quantity:0,defective_quantity:0,loss_quantity:0,unit:"kg",grade:"A",traceability_code:"",memo:"",package_count:0,weight_per_package:0,package_unit:""}),[k,T]=H.useState(!1),[D,I]=H.useState(!1),[O,P]=H.useState(null),[V,G]=H.useState(!1),[Q,$]=H.useState("live"),[ae,J]=H.useState({batch_id:"",weight:10,unit:"kg",grade:"A"}),[U,F]=H.useState(""),[W,K]=H.useState([]),ee=H.useRef(null);H.useEffect(()=>{if(w.package_count>0&&w.weight_per_package>0){const he=(w.package_count*w.weight_per_package).toFixed(2);_(ve=>({...ve,quantity:parseFloat(he)}))}},[w.package_count,w.weight_per_package]);const ne=async()=>{l(!0);try{const he="/api/production/harvest"+(window.location.search.includes("batchId")?window.location.search:""),[ve,Oe,Se]=await Promise.all([fetch(he),fetch("/api/production/batches"),fetch("/api/product/list")]),Ce=await ve.json(),we=await Oe.json(),xe=await Se.json();e(Ce),r(we),i(xe)}catch(he){console.error(he)}finally{l(!1)}};H.useEffect(()=>{ne();const he=()=>fetch("/api/auth/company").then(ve=>ve.json()).then(ve=>b(ve)).catch(ve=>console.error("[Harvest] Company fetch failed:",ve));return he(),window.addEventListener("company-info-changed",he),()=>window.removeEventListener("company-info-changed",he)},[]);const re=(he=null)=>{he?(p(he),_({...he,package_count:he.package_count||0,weight_per_package:he.weight_per_package||0,package_unit:he.package_unit||""}),T(!1)):(p(null),_({harvest_id:0,batch_id:null,harvest_date:ea().format("YYYY-MM-DD"),quantity:0,defective_quantity:0,loss_quantity:0,unit:"kg",grade:"A",traceability_code:"",memo:"",package_count:0,weight_per_package:0,package_unit:""}),T(!1)),h(!0)},Z=async()=>{if(!w.batch_id||!w.quantity){c("","  .");return}try{if(!(await fetch("/api/production/harvest/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({record:{...w,batch_id:parseInt(w.batch_id),quantity:parseFloat(w.quantity)||0,defective_quantity:parseFloat(w.defective_quantity)||0,loss_quantity:parseFloat(w.loss_quantity)||0,package_count:parseInt(w.package_count)||0,weight_per_package:parseFloat(w.weight_per_package)||0},completeBatch:k})})).ok)throw new Error("Failed to save record");h(!1),ne(),c("","     .")}catch(he){c("",` : ${he}`)}},ie=async he=>{if(await d(" ","   ?"))try{if(!(await fetch(`/api/production/harvest/delete/${he}`,{method:"POST"})).ok)throw new Error("Failed to delete record");ne()}catch(Oe){c("",` : ${Oe}`)}},de=he=>{const ve=t.find(we=>String(we.batch_id)===String(he.batch_id)),Oe=n.find(we=>String(we.product_id)===String(ve?.product_id)),Se=he.traceability_code||(ve?.batch_code?`B-${ve.batch_code}`:`H-${he.harvest_id}`),Ce={title:`${Oe?.product_name||""} ${he.grade}`,code:Se,date:ea(he.harvest_date).format("YYYY.MM.DD"),producer:g?.representative_name||"",qrValue:`HARVEST|${he.harvest_id}|${Se}|${Oe?.product_name||"NA"}|${he.grade}`};P(Ce),I(!0)},fe=()=>{console.log("[Harvest]  executePrint button clicked. Job Data:",O),O&&(O_("harvest",O),I(!1))};return H.useEffect(()=>{V&&Q==="live"&&ee.current&&ee.current.focus()},[V,Q]),H.useEffect(()=>{const he=()=>{V&&Q==="live"&&ee.current&&ee.current.focus()};return document.addEventListener("click",he),()=>document.removeEventListener("click",he)},[V,Q]),s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-black text-slate-700",children:"   "}),s.jsx("p",{className:"text-xs font-bold text-slate-400 mt-1",children:"     ."})]}),s.jsxs("button",{onClick:()=>re(),className:"h-12 px-6 bg-slate-900 border-none rounded-2xl font-black text-sm text-white flex items-center gap-2 shadow-xl shadow-slate-200 transition-all active:scale-[0.95] hover:bg-slate-800",children:[s.jsx(So,{size:18}),"   "]})]}),s.jsx("div",{className:"bg-white rounded-[2.5rem] border border-slate-100 shadow-xl shadow-slate-200/50 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50/50 border-b border-slate-100",children:[s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"()"}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"/"}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:"QR"}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[a.map(he=>{const ve=t.find(Oe=>Oe.batch_id===he.batch_id);return s.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-100 flex items-center justify-center text-slate-500",children:s.jsx(jc,{size:18})}),s.jsx("p",{className:"text-xs font-black text-slate-700",children:ea(he.harvest_date).format("YYYY-MM-DD")})]})}),s.jsx("td",{className:"px-6 py-5 font-bold text-xs text-indigo-600",children:ve?.batch_code||"-"}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(GH,{size:14,className:"text-slate-300"}),s.jsxs("p",{className:"text-xs font-black text-slate-700",children:[he.quantity," ",he.unit]})]}),he.package_count>0&&s.jsxs("p",{className:"text-[10px] text-slate-400 font-bold ml-5",children:["(",he.package_count,he.package_unit," x ",he.weight_per_package,"kg)"]})]})}),s.jsxs("td",{className:"px-6 py-5",children:[s.jsxs("div",{className:"flex items-center gap-2 text-rose-500 mb-1",children:[s.jsx("span",{className:"text-[10px] font-black bg-rose-50 px-1.5 py-0.5 rounded",children:""}),s.jsxs("p",{className:"text-[11px] font-bold",children:[he.defective_quantity||0,he.unit]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[s.jsx("span",{className:"text-[10px] font-black bg-slate-100 px-1.5 py-0.5 rounded",children:""}),s.jsxs("p",{className:"text-[11px] font-bold",children:[he.loss_quantity||0,he.unit]})]})]}),s.jsx("td",{className:"px-6 py-5 text-center",children:(()=>{const Oe=parseFloat(he.quantity)||0,Se=parseFloat(he.defective_quantity)||0,Ce=parseFloat(he.loss_quantity)||0,we=Oe+Se+Ce,xe=we>0?(Oe/we*100).toFixed(1):0;return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("span",{className:`text-[11px] font-black ${xe>90?"text-teal-600":xe>70?"text-indigo-600":"text-amber-600"}`,children:[xe,"%"]}),s.jsx("div",{className:"w-12 h-1.5 bg-slate-100 rounded-full mt-1 overflow-hidden",children:s.jsx("div",{className:`h-full transition-all duration-1000 ${xe>90?"bg-teal-500":xe>70?"bg-indigo-500":"bg-amber-500"}`,style:{width:`${xe}%`}})})]})})()}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("span",{className:`px-2 py-1 rounded-lg text-[10px] font-black ${he.grade==="A"?"bg-teal-50 text-teal-600":he.grade==="B"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-500"}`,children:[he.grade," "]})}),s.jsx("td",{className:"px-6 py-5 text-xs text-slate-500 font-bold",children:he.traceability_code||"-"}),s.jsx("td",{className:"px-6 py-5 text-center",children:s.jsx("button",{onClick:()=>de(he),className:"p-2 text-slate-500 hover:text-indigo-600 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"qr_code"})})}),s.jsx("td",{className:"px-6 py-5 text-right",children:s.jsx("button",{onClick:()=>ie(he.harvest_id),className:"p-2 text-slate-300 hover:text-red-500 transition-colors",children:s.jsx(al,{size:16})})})]},he.harvest_id)}),a.length===0&&!o&&s.jsx("tr",{children:s.jsxs("td",{colSpan:"6",className:"py-20 text-center",children:[s.jsx(wv,{size:48,className:"mx-auto text-slate-100 mb-3"}),s.jsx("p",{className:"text-slate-400 font-bold",children:"  ."})]})})]})]})})}),u&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity"}),s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl relative z-10 overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"px-8 py-5 border-b border-slate-50 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-lg font-black text-slate-800 flex items-center gap-2",children:[s.jsx(So,{size:18,className:"text-indigo-600"}),f?"  ":"   "]}),s.jsx("button",{onClick:()=>h(!1),className:"text-slate-300 hover:text-slate-500 transition-colors",children:s.jsx(al,{size:18})})]}),s.jsxs("div",{className:"px-8 py-6 space-y-4",children:[s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  "}),s.jsxs("select",{value:w.batch_id||"",onChange:he=>_({...w,batch_id:he.target.value}),className:"w-full h-11 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100 focus:ring-indigo-100 transition-all outline-none",children:[s.jsx("option",{value:"",children:" "}),t.map(he=>s.jsxs("option",{value:he.batch_id,children:["[",he.batch_code,"] ",n.find(ve=>ve.product_id===he.product_id)?.product_name||" "]},he.batch_id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"date",value:w.harvest_date,onChange:he=>_({...w,harvest_date:he.target.value}),className:"w-full h-11 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]}),s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsxs("select",{value:w.grade,onChange:he=>_({...w,grade:he.target.value}),className:"w-full h-11 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100",children:[s.jsx("option",{value:"A",children:"A ()"}),s.jsx("option",{value:"B",children:"B ()"}),s.jsx("option",{value:"C",children:"C ()"})]})]})]}),s.jsxs("div",{className:"p-4 bg-slate-50/50 rounded-[1.5rem] border border-slate-100 space-y-2.5",children:[s.jsxs("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[s.jsx(wv,{size:12}),"    ()"]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[8px] font-bold text-slate-400 ml-1",children:"( )"}),s.jsx("input",{type:"number",value:w.package_count,onChange:he=>_({...w,package_count:he.target.value}),className:"w-full h-9 px-4 bg-white border-none rounded-xl font-bold text-xs ring-1 ring-slate-100 text-right"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[8px] font-bold text-slate-400 ml-1",children:" "}),s.jsx("input",{type:"number",step:"0.01",value:w.weight_per_package,onChange:he=>_({...w,weight_per_package:he.target.value}),className:"w-full h-9 px-4 bg-white border-none rounded-xl font-bold text-xs ring-1 ring-slate-100 text-right"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[8px] font-bold text-slate-400 ml-1",children:""}),s.jsx("input",{type:"text",value:w.package_unit,onChange:he=>_({...w,package_unit:he.target.value}),className:"w-full h-9 px-4 bg-white border-none rounded-xl font-bold text-xs ring-1 ring-slate-100"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  ()"}),s.jsx("input",{type:"number",step:"0.1",value:w.quantity,onChange:he=>_({...w,quantity:he.target.value}),className:"w-full h-11 px-5 bg-slate-50 border-none rounded-2xl font-black text-sm ring-1 ring-indigo-100 text-indigo-600 text-right"})]}),s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsx("input",{type:"text",value:w.unit,onChange:he=>_({...w,unit:he.target.value}),className:"w-full h-11 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-rose-400 uppercase tracking-widest ml-1",children:"() "}),s.jsx("input",{type:"number",step:"0.1",value:w.defective_quantity,onChange:he=>_({...w,defective_quantity:he.target.value}),className:"w-full h-11 px-5 bg-rose-50/30 border-none rounded-2xl font-black text-sm ring-1 ring-rose-100 text-rose-600 text-right"})]}),s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"/ "}),s.jsx("input",{type:"number",step:"0.1",value:w.loss_quantity,onChange:he=>_({...w,loss_quantity:he.target.value}),className:"w-full h-11 px-5 bg-slate-50 border-none rounded-2xl font-black text-sm ring-1 ring-slate-200 text-slate-400 text-right"})]})]}),!f&&s.jsxs("div",{className:"p-4 bg-indigo-50/50 rounded-2xl border border-indigo-100 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-600 flex items-center justify-center text-white",children:s.jsx($ae,{size:16})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-indigo-900",children:"  "}),s.jsx("p",{className:"text-[9px] text-indigo-400 font-bold",children:"   ?"})]})]}),s.jsx("button",{onClick:()=>T(!k),className:`w-10 h-5 rounded-full transition-all relative ${k?"bg-indigo-600":"bg-slate-200"}`,children:s.jsx("div",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full transition-all ${k?"left-5.5":"left-0.5"}`})})]}),s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"/"}),s.jsx("textarea",{value:w.memo,onChange:he=>_({...w,memo:he.target.value}),className:"w-full h-20 p-4 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100 resize-none outline-none"})]})]}),s.jsxs("div",{className:"px-8 py-5 bg-slate-50 flex gap-3",children:[s.jsx("button",{onClick:()=>h(!1),className:"flex-1 h-12 rounded-2xl font-black text-sm text-slate-400",children:""}),s.jsx("button",{onClick:Z,className:"flex-[2] h-12 bg-slate-900 rounded-2xl font-black text-sm text-white shadow-xl hover:bg-slate-800 transition-all active:scale-[0.98]",children:"    "})]})]})]}),D&&O&&s.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm"}),s.jsx("div",{className:"bg-white w-full max-w-sm rounded-[3rem] shadow-2xl relative z-10 overflow-hidden animate-in zoom-in-95 duration-200",children:s.jsxs("div",{className:"p-8 flex flex-col items-center",children:[s.jsx("div",{className:"w-20 h-20 bg-indigo-50 rounded-3xl flex items-center justify-center text-indigo-600 mb-6",children:s.jsx(f0,{size:40})}),s.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:"QR  "}),s.jsxs("p",{className:"text-xs font-bold text-slate-400 mb-8 text-center px-6",children:["    ",s.jsx("br",{})," ?"]}),s.jsxs("div",{className:"w-full bg-slate-50 rounded-[2.5rem] p-8 border border-slate-100 mb-8 flex flex-row items-center gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"bg-white p-2 rounded-xl border-2 border-slate-900 leading-[0]",children:s.jsx(vb,{value:O.qrValue,size:90,level:"M"})}),s.jsx("div",{className:"text-[9px] font-black border border-slate-900 px-1.5 py-0.5 bg-white whitespace-nowrap",children:"GAP  "})]}),s.jsxs("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[s.jsxs("div",{className:"border-t-2 border-slate-900 pt-2 pb-1 space-y-2",children:[s.jsxs("div",{className:"flex items-center text-[11px] leading-none",children:[s.jsx("span",{className:"font-black text-slate-900 w-12 shrink-0",children:":"}),s.jsx("span",{className:"font-black text-slate-900 truncate",children:O.title})]}),s.jsxs("div",{className:"flex items-center text-[11px] leading-none",children:[s.jsx("span",{className:"font-black text-slate-900 w-12 shrink-0",children:":"}),s.jsx("span",{className:"font-black text-slate-900 truncate",children:O.date})]}),s.jsxs("div",{className:"flex items-center text-[11px] leading-none",children:[s.jsx("span",{className:"font-black text-slate-900 w-12 shrink-0",children:":"}),s.jsx("span",{className:"font-black text-slate-900 truncate",children:O.producer})]})]}),s.jsx("div",{className:"text-[11px] font-black text-slate-900 pt-2 border-t-2 border-slate-900 mt-1 truncate",children:O.code}),s.jsx("div",{className:"text-[7px] font-bold text-slate-400 text-right mt-1 opacity-60",children:"Smart Mycelium Logic v3"})]})]}),s.jsxs("div",{className:"flex gap-3 w-full",children:[s.jsx("button",{onClick:()=>I(!1),className:"flex-1 h-14 rounded-2xl font-black text-slate-400 hover:bg-slate-50 transition-colors",children:""}),s.jsxs("button",{onClick:fe,className:"flex-[2] h-14 bg-slate-900 rounded-2xl font-black text-white shadow-xl shadow-slate-200 flex items-center justify-center gap-2 hover:bg-slate-800 transition-all active:scale-[0.98]",children:[s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"print"}),"  "]})]})]})})]})]})},HV={plant:"/",water:"/",fertilize:"/",pesticide:"/",harvest:"/",process:"/",clean:"/",inspect:"/",education:"/"},kIe={all:"    ",chemical:"    ",sanitation:"    ",harvest:"    ",education:"     "},CIe={all:null,chemical:["pesticide","fertilize"],sanitation:["clean","inspect","water"],harvest:["harvest","process"],education:["education"]},AIe=({startDate:a,endDate:e,includeAttachments:t,includeApproval:r,reportType:n="all",onClose:i})=>{const[o,l]=H.useState([]),[c,d]=H.useState(null),[u,h]=H.useState(!0),[f,p]=H.useState(!1),[g,b]=H.useState({}),w=async()=>{h(!0);try{const D=new URLSearchParams;a&&D.append("startDate",a),e&&D.append("endDate",e);const[I,O]=await Promise.all([fetch(`/api/production/logs?${D.toString()}&limit=1000`),fetch("/api/auth/company")]),P=await I.json(),V=await O.json();let G=P;const Q=CIe[n];Q&&(G=P.filter(ae=>Q.includes(ae.work_type)));const $=[...G].reverse();if(l($),d(V),t){const ae=[];$.forEach(U=>{U.photos&&Array.isArray(U.photos)&&U.photos.forEach(F=>{F.path&&ae.push(F.path)})});const J={};ae.forEach(U=>{J[U]=`/api/production/media/${U}`}),b(J)}}catch(D){console.error(D)}finally{h(!1)}};H.useEffect(()=>{w()},[a,e]);const _=async()=>{window.print()},{tableLogs:k,attachmentPhotos:T}=H.useMemo(()=>{let D=1;const I=[];return{tableLogs:o.map(P=>{const V=[];return P.photos&&Array.isArray(P.photos)&&P.photos.forEach(G=>{V.push(D),I.push({...G,globalIdx:D,log_date:P.log_date,work_type:P.work_type,log_id:P.log_id}),D++}),{...P,photoIndices:V}}),attachmentPhotos:I}},[o]);return u?s.jsx("div",{className:"fixed inset-0 z-[200] bg-white flex items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin"}),s.jsx("p",{className:"text-sm font-black text-slate-400",children:"   ..."})]})}):s.jsxs("div",{className:"fixed inset-0 z-[200] bg-slate-900/60 backdrop-blur-md flex items-center justify-center p-4 print:p-0 print:bg-white print:block print:relative print:z-0",children:[f&&s.jsxs("div",{className:"fixed inset-0 z-[300] flex items-center justify-center animate-in fade-in duration-300",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm"}),s.jsxs("div",{className:"relative bg-white p-12 rounded-[3.5rem] shadow-[0_35px_60px_-15px_rgba(0,0,0,0.3)] flex flex-col items-center gap-8 border-2 border-indigo-50 animate-in zoom-in-95 duration-500",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-24 h-24 border-8 border-indigo-50 rounded-full"}),s.jsx("div",{className:"absolute top-0 left-0 w-24 h-24 border-8 border-indigo-600 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx(VH,{className:"text-indigo-600 animate-bounce",size:32})})]}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h3",{className:"text-2xl font-black text-slate-800 tracking-tight",children:"PDF   "}),s.jsxs("p",{className:"text-sm font-bold text-slate-400 max-w-[200px] leading-relaxed",children:["   ",s.jsx("br",{}),"   ."]})]})]})]}),s.jsxs("div",{className:"fixed top-8 right-8 flex flex-col gap-4 print:hidden z-[210]",children:[s.jsx("button",{onClick:i,className:"w-14 h-14 bg-white text-slate-400 rounded-2xl shadow-2xl hover:text-rose-500 hover:scale-110 active:scale-95 transition-all flex items-center justify-center group",title:"",children:s.jsx(js,{size:32,className:"group-hover:rotate-90 transition-transform duration-300"})}),s.jsx("div",{className:"h-px bg-white/20 w-full"}),s.jsxs("button",{onClick:_,className:"h-14 px-8 rounded-2xl font-black text-sm shadow-2xl transition-all flex items-center gap-3 bg-indigo-600 text-white shadow-indigo-500/30 hover:bg-indigo-700 hover:-translate-y-1 active:translate-y-0",children:[s.jsx(UH,{size:20}),"  / PDF "]})]}),s.jsx("div",{className:"w-full max-w-[210mm] max-h-[92vh] bg-white rounded-[3rem] shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)] overflow-y-auto custom-scrollbar print:max-h-none print:shadow-none print:rounded-none print:overflow-visible print:w-full relative",children:s.jsxs("div",{id:"printable-report",className:"p-[20mm] min-h-[297mm] bg-white text-slate-900 print:p-[10mm]",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("div",{className:"w-2 h-8 bg-indigo-600 rounded-full"}),s.jsx("h1",{className:"text-3xl font-black tracking-tighter text-slate-800",children:kIe[n]||"   "})]}),s.jsxs("p",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest pl-4",children:["GAP/HACCP Certification Records - ",n.toUpperCase()]}),s.jsx("div",{className:"pl-4",children:s.jsxs("span",{className:"inline-block px-3 py-1 bg-slate-100 rounded-lg text-xs font-black text-slate-500",children:[" : ",ea(a).format("YYYY MM DD")," ~ ",ea(e).format("YYYY MM DD")]})})]}),r&&s.jsxs("div",{className:"flex border-2 border-slate-200 rounded-xl overflow-hidden shrink-0",children:[s.jsx("div",{className:"w-8 bg-slate-50 border-r-2 border-slate-200 flex items-center justify-center py-2",children:s.jsx("p",{className:"text-[10px] font-black text-slate-400",style:{writingMode:"vertical-rl"},children:""})}),["","",""].map((D,I)=>s.jsxs("div",{className:`w-20 text-center ${I<2?"border-r-2 border-slate-200":""}`,children:[s.jsx("div",{className:"py-1 bg-slate-50 border-b-2 border-slate-200 text-[10px] font-black text-slate-500",children:D}),s.jsx("div",{className:"h-16"})]},D))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-px bg-slate-200 border-2 border-slate-200 rounded-2xl overflow-hidden mb-8 shadow-sm",children:[s.jsxs("div",{className:"bg-slate-50 p-4 flex",children:[s.jsx("span",{className:"w-24 text-[10px] font-black text-slate-400 uppercase tracking-wider shrink-0",children:"  "}),s.jsx("span",{className:"text-sm font-black text-slate-700",children:c?.company_name||"-"})]}),s.jsxs("div",{className:"bg-slate-50 p-4 flex",children:[s.jsx("span",{className:"w-24 text-[10px] font-black text-slate-400 uppercase tracking-wider shrink-0",children:"  "}),s.jsx("span",{className:"text-sm font-black text-slate-700",children:c?.representative_name||"-"})]}),s.jsxs("div",{className:"bg-white p-4 flex",children:[s.jsx("span",{className:"w-24 text-[10px] font-black text-slate-400 uppercase tracking-wider shrink-0",children:"GAP "}),s.jsx("span",{className:"text-sm font-black text-slate-700",children:c?.certification_info?.gap||"-"})]}),s.jsxs("div",{className:"bg-white p-4 flex",children:[s.jsx("span",{className:"w-24 text-[10px] font-black text-slate-400 uppercase tracking-wider shrink-0",children:"HACCP"}),s.jsx("span",{className:"text-sm font-black text-slate-700",children:c?.certification_info?.haccp||"-"})]})]}),s.jsx("div",{className:"border-2 border-slate-800 rounded-2xl overflow-hidden mb-12 shadow-md",children:s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-800 text-white",children:[s.jsx("th",{className:"p-3 text-[10px] font-black border-r border-slate-700 w-16 text-center",children:""}),s.jsx("th",{className:"p-3 text-[10px] font-black border-r border-slate-700 w-24 text-center",children:""}),s.jsx("th",{className:"p-3 text-[10px] font-black border-r border-slate-700 text-left",children:"  "}),s.jsx("th",{className:"p-3 text-[10px] font-black border-r border-slate-700 w-32 text-left",children:" "}),s.jsx("th",{className:"p-3 text-[10px] font-black border-r border-slate-700 w-20 text-center",children:""}),s.jsx("th",{className:"p-3 text-[10px] font-black w-20 text-center",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[k.map(D=>{const I=D.input_materials||[],O=D.env_data||{};return s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors break-inside-avoid",children:[s.jsx("td",{className:"p-3 text-xs font-black text-slate-500 border-r border-slate-100 text-center",children:ea(D.log_date).format("MM-DD")}),s.jsx("td",{className:"p-3 text-center border-r border-slate-100",children:s.jsx("span",{className:"px-2 py-1 bg-indigo-50 text-indigo-700 rounded-lg text-[10px] font-black",children:HV[D.work_type]||D.work_type})}),s.jsxs("td",{className:"p-3 text-xs font-medium text-slate-700 leading-relaxed border-r border-slate-100",children:[D.work_content,D.photoIndices.length>0&&s.jsxs("div",{className:"mt-1 text-[10px] font-black text-emerald-600",children:["( ",D.photoIndices.join(", "),")"]})]}),s.jsx("td",{className:"p-3 text-[10px] font-bold text-slate-500 border-r border-slate-100",children:I.length>0?s.jsx("div",{className:"space-y-1",children:I.map((P,V)=>s.jsxs("div",{className:"flex justify-between border-b border-dotted border-slate-200 last:border-none pb-0.5",children:[s.jsx("span",{children:P.name}),s.jsxs("span",{className:"text-slate-400",children:[P.quantity,P.unit]})]},V))}):"-"}),s.jsxs("td",{className:"p-3 text-[10px] font-black text-slate-400 border-r border-slate-100 text-center leading-tight",children:[O.temp&&s.jsxs("div",{children:[O.temp,"C"]}),O.humidity&&s.jsxs("div",{children:[O.humidity,"%"]}),O.co2&&s.jsxs("div",{children:[O.co2,"ppm"]}),O.light&&s.jsxs("div",{children:[O.light,"lx"]})]}),s.jsx("td",{className:"p-3 text-xs font-black text-slate-700 text-center",children:D.worker_name===""?c?.representative_name||"":D.worker_name})]},D.log_id)}),o.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"py-20 text-center text-slate-400 font-bold italic",children:"  ."})})]})]})}),t&&o.some(D=>D.photos?.length>0)&&s.jsxs("div",{className:"page-break mt-12",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-8 border-b-2 border-slate-100 pb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-emerald-50 text-emerald-600 rounded-xl flex items-center justify-center",children:s.jsx(yi,{size:24})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-black text-slate-800 tracking-tight",children:"  "}),s.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Visual Evidence Attachments"})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-8",children:T.map(D=>s.jsxs("div",{className:"bg-slate-50 rounded-2xl border-2 border-slate-100 p-4 break-inside-avoid shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"relative aspect-[4/3] rounded-xl overflow-hidden border border-slate-200 mb-4 bg-white",children:[s.jsx("img",{src:g[D.path]||"https://placehold.co/400x300?text=Image+Loading...",alt:D.label,className:"w-full h-full object-cover"}),s.jsxs("div",{className:"absolute top-3 left-3 px-2 py-1 bg-black/60 backdrop-blur-md text-white text-[9px] font-black rounded-lg",children:[" ",D.globalIdx]})]}),s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 mb-1",children:D.label||" "}),s.jsx("p",{className:"text-xs font-black text-slate-800",children:ea(D.log_date).format("YYYY MM DD")})]}),s.jsx("div",{className:"text-right",children:s.jsx("span",{className:"text-[10px] font-bold text-indigo-600 px-2 py-1 bg-indigo-50 rounded-md",children:HV[D.work_type]||D.work_type})})]})]},`${D.log_id}-${D.globalIdx}`))})]}),s.jsx("div",{className:"mt-20 pt-8 border-t border-slate-100 text-center",children:s.jsx("p",{className:"text-[10px] font-black text-slate-300 italic",children:"Generated by Mycelium Smart Farm Integration System v2.0"})})]})}),s.jsx("style",{children:`
                @media print {
                    @page { size: A4; margin: 0; }
                    html, body { 
                        background: white !important; 
                        color: black !important;
                        color-scheme: light !important;
                        height: auto !important;
                        overflow: visible !important;
                        margin: 0 !important;
                        padding: 0 !important;
                        -webkit-print-color-adjust: exact;
                        print-color-adjust: exact;
                    }
                    #root, nav, .tauri-drag-region { display: none !important; }
                    div:not(#printable-report):not(#printable-report *):not(style):not(script) {
                        display: none !important;
                    }
                    #printable-report {
                        display: block !important;
                        position: absolute !important;
                        left: 0 !important;
                        top: 0 !important;
                        width: 100% !important;
                        margin: 0 !important;
                        padding: 15mm !important;
                        visibility: visible !important;
                        background: white !important;
                    }
                    #printable-report * {
                        visibility: visible !important;
                    }
                    .page-break {
                        page-break-before: always;
                    }
                    .break-inside-avoid {
                        break-inside: avoid;
                    }
                }
                .custom-scrollbar::-webkit-scrollbar { width: 6px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
                `})]})},TIe=({initialTab:a="dashboard"})=>{const[e,t]=H.useState(a),{showAlert:r,showConfirm:n}=Na(),[i,o]=H.useState(!1),[l,c]=H.useState({activeBatches:0,todayLogs:0,harvestThisMonth:0,monthlyYield:0,pendingActions:0}),[d,u]=H.useState([]),[h,f]=H.useState([]),[p,g]=H.useState(!1),[b,w]=H.useState(!0),[_,k]=H.useState(!0),[T,D]=H.useState("all"),[I,O]=H.useState({start:ea().startOf("month").format("YYYY-MM-DD"),end:ea().endOf("month").format("YYYY-MM-DD")}),P=async()=>{try{const[Q,$,ae,J]=await Promise.all([fetch("/api/production/batches"),fetch("/api/production/logs?limit=100"),fetch("/api/production/harvest?limit=50"),fetch("/api/production/spaces")]),U=await Q.json(),F=await $.json(),W=await ae.json(),K=await J.json();f(K),u(F.slice(0,5));const ee=ea().format("YYYY-MM-DD"),ne=ea().format("YYYY-MM"),re=W.filter(he=>he.harvest_date.startsWith(ne)),Z=re.reduce((he,ve)=>he+(parseFloat(ve.quantity)||0),0),ie=re.reduce((he,ve)=>he+(parseFloat(ve.defective_quantity)||0),0),de=re.reduce((he,ve)=>he+(parseFloat(ve.loss_quantity)||0),0),fe=Z+ie+de;c({activeBatches:U.filter(he=>he.status==="active"||he.status==="growing").length,todayLogs:F.filter(he=>he.log_date===ee).length,harvestThisMonth:Z,monthlyYield:fe>0?(Z/fe*100).toFixed(1):100,pendingActions:U.filter(he=>he.status==="growing"&&ea(he.expected_harvest_date).isBefore(ea().add(2,"day"))).length})}catch(Q){console.error("Dashboard data load failed:",Q)}};H.useEffect(()=>{t(a)},[a]),H.useEffect(()=>{e==="dashboard"&&P()},[e]);const V=[{id:"dashboard",label:" ",icon:o2},{id:"spaces",label:"/ ",icon:l2},{id:"batches",label:"/ ",icon:P_},{id:"logs",label:"(GAP/HACCP)",icon:Vx},{id:"harvest",label:"   ",icon:wv}],G=()=>{switch(e){case"spaces":return s.jsx(wIe,{});case"batches":return s.jsx(_Ie,{});case"logs":return s.jsx(jIe,{});case"harvest":return s.jsx(SIe,{});default:return s.jsx(MIe,{stats:l,recentLogs:d,spaces:h})}};return s.jsxs("div",{className:"flex flex-col h-full bg-slate-50/50",children:[s.jsxs("div",{className:"bg-white border-b border-slate-200 px-8 pt-2 shadow-sm relative z-10",children:[s.jsx("div",{className:"flex justify-between items-baseline mb-1",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-7 h-7 rounded-lg bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-100",children:s.jsx(fx,{size:16})}),s.jsx("h1",{className:"text-lg font-black text-slate-800 tracking-tight",children:"GAP/HACCP "}),s.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest opacity-60",children:"Certification Management System"})]})}),s.jsxs("div",{className:"flex justify-end items-center gap-3 mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-slate-50 rounded-xl border border-slate-100",children:[s.jsx(jc,{size:12,className:"text-slate-400"}),s.jsx("input",{type:"date",value:I.start,onChange:Q=>O($=>({...$,start:Q.target.value})),className:"bg-transparent border-none text-[11px] font-black text-slate-600 focus:ring-0 p-0 w-36"}),s.jsx("span",{className:"text-slate-300 font-bold text-[10px]",children:"~"}),s.jsx("input",{type:"date",value:I.end,onChange:Q=>O($=>({...$,end:Q.target.value})),className:"bg-transparent border-none text-[11px] font-black text-slate-600 focus:ring-0 p-0 w-36"})]}),s.jsxs("div",{className:"flex items-center gap-3 ml-2",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",checked:b,onChange:Q=>w(Q.target.checked),className:"w-3 h-3 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),s.jsx("span",{className:"text-[10px] font-black text-slate-500 group-hover:text-indigo-600 transition-colors uppercase tracking-wider whitespace-nowrap",children:""})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",checked:_,onChange:Q=>k(Q.target.checked),className:"w-3 h-3 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),s.jsx("span",{className:"text-[10px] font-black text-slate-500 group-hover:text-indigo-600 transition-colors uppercase tracking-wider whitespace-nowrap",children:""})]})]}),s.jsx("div",{className:"h-5 w-px bg-slate-200 mx-1"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wider whitespace-nowrap",children:""}),s.jsxs("select",{value:T,onChange:Q=>D(Q.target.value),className:"bg-slate-50 border-slate-200 text-[11px] font-black text-slate-700 rounded-xl focus:ring-indigo-500 py-0.5 min-w-[130px]",children:[s.jsx("option",{value:"all",children:" "}),s.jsx("option",{value:"chemical",children:"   "}),s.jsx("option",{value:"sanitation",children:"  "}),s.jsx("option",{value:"harvest",children:"   "}),s.jsx("option",{value:"education",children:"  "})]})]}),s.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-1.5 rounded-xl font-black text-[11px] bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-100 transition-all flex items-center gap-2",children:[s.jsx(fd,{size:14}),"  "]})]}),s.jsx("div",{className:"flex gap-1",children:V.map(Q=>s.jsxs("button",{onClick:()=>t(Q.id),className:`
                                flex items-center gap-2 px-5 py-1.5 rounded-t-lg font-bold text-xs transition-all
                                ${e===Q.id?"bg-slate-50 text-indigo-600 border-t-2 border-indigo-600 -mb-[1px]":"text-slate-400 hover:bg-slate-50 hover:text-slate-600"}
                            `,children:[s.jsx(Q.icon,{size:14}),Q.label]},Q.id))})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:G()}),p&&s.jsx("div",{className:"fixed inset-0 z-[999999] bg-slate-900/60 backdrop-blur-sm flex flex-col items-center justify-center animate-in fade-in duration-300",children:s.jsxs("div",{className:"bg-white p-10 rounded-[3rem] shadow-2xl flex flex-col items-center gap-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-20 h-20 border-4 border-indigo-100 rounded-full"}),s.jsx("div",{className:"absolute top-0 left-0 w-20 h-20 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-xl font-black text-slate-800 mb-1",children:"  ..."}),s.jsxs("p",{className:"text-xs font-bold text-slate-400 px-4",children:["       .",s.jsx("br",{}),"  ."]})]})]})}),i&&s.jsx(AIe,{startDate:I.start,endDate:I.end,includeAttachments:b,includeApproval:_,reportType:T,onClose:()=>o(!1)})]})},MIe=({stats:a,recentLogs:e=[],spaces:t=[]})=>{const r={plant:{label:"/",color:"emerald"},water:{label:"/",color:"blue"},fertilize:{label:"/",color:"purple"},pesticide:{label:"/",color:"red"},harvest:{label:"/",color:"teal"},process:{label:"/",color:"indigo"},clean:{label:"/",color:"indigo"},inspect:{label:"/",color:"amber"},education:{label:"/",color:"slate"}};return s.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{label:" ",value:`${a.activeBatches}`,icon:P_,color:"blue"},{label:"  ",value:`${a.todayLogs}`,icon:hh,color:"indigo"},{label:" ",value:`${a.monthlyYield}% (${a.harvestThisMonth}kg)`,icon:wv,color:"teal"},{label:" ",value:`${a.pendingActions}`,icon:$A,color:"amber"}].map((n,i)=>s.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-100 flex items-center gap-5",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl bg-${n.color}-50 text-${n.color}-600 flex items-center justify-center`,children:s.jsx(n.icon,{size:28})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest mb-1",children:n.label}),s.jsx("p",{className:"text-2xl font-black text-slate-700",children:n.value})]})]},i))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 bg-white rounded-[2.5rem] shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden",children:[s.jsx("div",{className:"p-8 border-b border-slate-50 flex justify-between items-center",children:s.jsxs("h3",{className:"text-lg font-black text-slate-700 flex items-center gap-2",children:[s.jsx(Vx,{className:"text-indigo-500",size:20}),"   "]})}),s.jsxs("div",{className:"divide-y divide-slate-50",children:[e.map(n=>{const i=t.find(l=>l.space_id===n.space_id),o=r[n.work_type]||r.plant;return s.jsxs("div",{className:"p-6 flex items-start gap-4 hover:bg-slate-50/80 transition-colors",children:[s.jsxs("div",{className:"w-12 h-12 rounded-xl bg-slate-100 flex flex-col items-center justify-center shrink-0",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:ea(n.log_date).format("MMM")}),s.jsx("span",{className:"text-lg font-black text-slate-700 mt-[-4px]",children:ea(n.log_date).format("DD")})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("h4",{className:"font-bold text-slate-700 text-sm",children:o.label}),s.jsx("span",{className:"px-2 py-0.5 rounded-md bg-blue-50 text-blue-600 text-[10px] font-bold",children:i?.space_name||" "})]}),s.jsx("p",{className:"text-xs text-slate-500 line-clamp-1",children:n.work_content}),s.jsxs("div",{className:"flex items-center gap-3 mt-2 text-[10px] font-bold text-slate-400",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(XH,{size:10})," ",n.worker_name]}),n.env_data?.temp&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(yb,{size:10})," ",n.env_data.temp,"C"]}),n.env_data?.humidity&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(h0,{size:10})," ",n.env_data.humidity,"%"]})]})]})]},n.log_id)}),e.length===0&&s.jsx("div",{className:"p-20 text-center",children:s.jsx("p",{className:"text-slate-400 font-bold",children:"   ."})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-slate-900 rounded-[2.5rem] p-8 text-white shadow-2xl shadow-slate-900/30 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-32 h-32 bg-indigo-500/20 blur-3xl rounded-full"}),s.jsxs("h3",{className:"text-lg font-black mb-6 flex items-center gap-2",children:[s.jsx(jc,{size:20,className:"text-indigo-400"}),"   "]}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-1 h-12 rounded-full bg-teal-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-teal-400 uppercase tracking-widest",children:""}),s.jsx("p",{className:"font-bold text-sm",children:"GAP/HACCP  "})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-1 h-12 rounded-full bg-amber-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase tracking-widest",children:""}),s.jsxs("p",{className:"font-bold text-sm",children:["   ",a.todayLogs===0?"":""]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 shadow-xl shadow-slate-200/50 border border-slate-100",children:[s.jsxs("h3",{className:"text-lg font-black text-slate-700 mb-6 flex items-center gap-2",children:[s.jsx(fx,{size:20,className:"text-teal-500"}),"   (HACCP)"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 border border-slate-100",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-[11px] font-black text-slate-500",children:" "}),s.jsx("span",{className:"text-[11px] font-black text-teal-600",children:"  "})]}),s.jsx("div",{className:"w-full bg-slate-200 h-1.5 rounded-full overflow-hidden",children:s.jsx("div",{className:"bg-teal-500 h-full w-[100%]"})})]}),s.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 border border-slate-100",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-[11px] font-black text-slate-500",children:" "}),s.jsx("span",{className:"text-[11px] font-black text-indigo-600",children:""})]}),s.jsx("div",{className:"w-full bg-slate-200 h-1.5 rounded-full overflow-hidden",children:s.jsx("div",{className:"bg-indigo-500 h-full w-[100%]"})})]})]})]})]})]})]})},EIe=()=>{const[a,e]=H.useState("flowchart"),[t,r]=H.useState(""),n=[{id:"flowchart",label:" ",icon:s.jsx(zS,{size:18})},{id:"dashboard",label:"1. ",icon:s.jsx(o2,{size:18})},{id:"sales",label:"2.  ",icon:s.jsx(px,{size:18})},{id:"customer",label:"3.  ",icon:s.jsx(xx,{size:18})},{id:"inventory_prod",label:"4. //",icon:s.jsx(_v,{size:18})},{id:"finance",label:"5. / ",icon:s.jsx(V8,{size:18})},{id:"intel",label:"6.  ",icon:s.jsx(F8,{size:18})},{id:"exp",label:"7.  ",icon:s.jsx(KH,{size:18})},{id:"schedule",label:"8.   ",icon:s.jsx(jc,{size:18})},{id:"settings",label:"9.   ",icon:s.jsx(rx,{size:18})},{id:"rescue",label:"10.   ",icon:s.jsx(U8,{size:18})}],i=h=>{e(h);const f=document.getElementById(h);f&&f.scrollIntoView({behavior:"smooth",block:"start"})},o=({title:h,children:f})=>s.jsxs("div",{className:"my-10 relative group",children:[s.jsx("div",{className:"absolute inset-0 bg-amber-400/5 rounded-3xl blur-xl group-hover:bg-amber-400/10 transition-colors"}),s.jsx("div",{className:"relative bg-[#fdfaf1] border-l-4 border-amber-400 rounded-2xl p-8 shadow-sm border border-amber-100",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center shrink-0",children:s.jsx($8,{className:"text-amber-600 fill-amber-600",size:24})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-amber-900 font-black text-base mb-2",children:h||" "}),s.jsx("div",{className:"text-amber-800 text-[0.95rem] leading-relaxed font-medium space-y-2",children:f})]})]})})]}),l=({title:h,bg:f="bg-white",children:p})=>s.jsxs("div",{className:`${f} rounded-3xl border border-slate-200/60 p-6 shadow-sm hover:shadow-md transition-all duration-300 h-full`,children:[s.jsxs("h5",{className:"font-black text-slate-800 mb-3 flex items-center gap-2",children:[s.jsx(yi,{size:16,className:"text-indigo-500"}),h]}),s.jsx("div",{className:"text-slate-500 text-sm leading-relaxed font-medium",children:p})]}),c=({title:h,children:f,color:p="indigo"})=>{const g={indigo:"bg-indigo-50/50 border-indigo-100 text-indigo-900 ring-indigo-500/10",rose:"bg-rose-50/50 border-rose-100 text-rose-900 ring-rose-500/10",emerald:"bg-emerald-50/50 border-emerald-100 text-emerald-900 ring-emerald-500/10",amber:"bg-amber-50/50 border-amber-100 text-amber-900 ring-amber-500/10",violet:"bg-violet-50/50 border-violet-100 text-violet-900 ring-violet-500/10"};return s.jsxs("div",{className:`${g[p]} border rounded-2xl p-6 my-6 ring-1`,children:[h&&s.jsxs("div",{className:"font-black text-sm mb-3 flex items-center gap-2",children:[s.jsx(bb,{size:16}),h]}),s.jsx("div",{className:"text-[0.92rem] leading-[1.8] opacity-90 font-medium whitespace-pre-line",children:f})]})},d=({number:h,title:f,id:p,icon:g})=>s.jsx("div",{id:p,className:"scroll-mt-16 mb-12",children:s.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[s.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl shadow-lg shadow-indigo-200 flex items-center justify-center text-white",children:g}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-indigo-600 font-black text-xs uppercase tracking-widest block mb-1",children:["Chapter ",h]}),s.jsx("h2",{className:"text-2xl font-black text-slate-800 tracking-tighter",children:f})]})]})}),u=({number:h,title:f,children:p})=>s.jsxs("div",{className:"mb-16 last:mb-0",children:[s.jsxs("h3",{className:"text-lg font-black text-slate-800 mb-6 flex items-center gap-3",children:[s.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-slate-100 text-slate-500 text-xs font-black",children:h}),f]}),s.jsx("div",{className:"pl-11 space-y-6",children:p})]});return s.jsxs("div",{className:"flex h-full bg-[#f8fafc] overflow-hidden",children:[s.jsxs("div",{className:"w-80 border-r border-slate-200 bg-white flex flex-col shrink-0 shadow-[10px_0_30px_rgba(0,0,0,0.02)]",children:[s.jsxs("div",{className:"p-8 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-10",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-tr from-indigo-600 to-violet-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-200 ring-4 ring-indigo-50",children:s.jsx(zS,{size:24})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-black text-slate-800 tracking-tighter",children:"Mycelium Guide"}),s.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Master Platform v2.0"})]})]}),s.jsxs("div",{className:"relative mb-8",children:[s.jsx(Sv,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:18}),s.jsx("input",{type:"text",placeholder:"  ...",className:"w-full h-12 pl-12 pr-4 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-medium focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500/50 transition-all",value:t,onChange:h=>r(h.target.value)})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 space-y-1 custom-scrollbar pb-12",children:[n.map(h=>s.jsxs("button",{onClick:()=>i(h.id),className:`w-full flex items-center gap-4 px-5 py-4 rounded-2xl text-[0.88rem] font-black transition-all group ${a===h.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-200 scale-[1.02]":"text-slate-500 hover:bg-slate-50 hover:text-indigo-600"}`,children:[s.jsx("span",{className:`${a===h.id?"text-white":"text-slate-400 group-hover:text-indigo-500"}`,children:h.icon}),h.label,a===h.id&&s.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-white animate-pulse"})]},h.id)),s.jsxs("div",{className:"mt-10 pt-10 border-t border-slate-100 px-4",children:[s.jsx("div",{className:"text-[10px] font-black text-slate-300 uppercase tracking-[0.2em] mb-6",children:"Expert Support"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("button",{className:"flex items-center gap-3 text-sm font-black text-slate-500 hover:text-indigo-600 transition-colors w-full text-left",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 text-orange-500 flex items-center justify-center",children:s.jsx(jv,{size:16})})," 1:1  "]}),s.jsxs("button",{className:"flex items-center gap-3 text-sm font-black text-slate-500 hover:text-indigo-600 transition-colors w-full text-left",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 text-emerald-500 flex items-center justify-center",children:s.jsx($C,{size:16})}),"   "]})]})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-slate-50/30 relative",children:[s.jsx("div",{className:"absolute top-0 right-0 w-[1000px] h-[1000px] bg-indigo-400/5 rounded-full blur-[150px] pointer-events-none"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-[800px] h-[800px] bg-sky-400/5 rounded-full blur-[150px] pointer-events-none"}),s.jsxs("div",{className:"max-w-5xl mx-auto py-24 px-16 relative z-10",children:[s.jsxs("div",{className:"mb-24 text-center",children:[s.jsxs("div",{className:"inline-flex items-center gap-3 px-4 py-2 rounded-full bg-indigo-50 text-indigo-600 text-[11px] font-black uppercase tracking-[0.2em] mb-10 border border-indigo-100/50 shadow-sm",children:[s.jsxs("span",{className:"relative flex h-2.5 w-2.5",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-indigo-500"})]}),"Mycelium Enterprise Platform Guidance"]}),s.jsxs("h1",{className:"text-4xl font-black text-slate-900 tracking-tighter mb-8 leading-[1.05]",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["Mycelium   ,",s.jsx("br",{}),s.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-violet-600",children:" "})]}),s.jsx("p",{className:"text-xl text-slate-500 font-medium leading-relaxed max-w-3xl mx-auto",children:"Mycelium      AI      .     ."})]}),s.jsx("section",{id:"flowchart",className:"scroll-mt-24 mb-32",children:s.jsxs("div",{className:"bg-white rounded-[3.5rem] border border-slate-200/80 p-16 shadow-[0_30px_100px_rgba(0,0,0,0.04)] text-center relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-3 bg-gradient-to-r from-indigo-500 via-violet-500 to-sky-500"}),s.jsxs("div",{className:"topic-title mb-16 flex flex-col items-center",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center text-slate-800 mb-6 group-hover:rotate-12 transition-transform duration-500",children:s.jsx(zS,{size:32})}),s.jsx("h2",{className:"text-2xl font-black text-slate-800 tracking-tighter",children:"Mycelium   "}),s.jsx("p",{className:"text-slate-400 font-bold mt-2",children:"Smart Farm Integrated Workflow"})]}),s.jsxs("div",{className:"relative flex flex-col items-center gap-12 max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-center gap-8 w-full",children:s.jsxs("div",{className:"w-64 p-6 bg-emerald-50 rounded-2xl border-2 border-emerald-200 text-emerald-900 shadow-sm hover:translate-y-[-5px] transition-transform",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-black text-sm",children:"9.   "}),s.jsx("div",{className:"text-[11px] font-bold opacity-60 mt-1",children:"  /  /  "})]})}),s.jsx("div",{className:"text-slate-300",children:s.jsx(z8,{className:"rotate-45",size:40})}),s.jsxs("div",{className:"flex items-center justify-center gap-12 w-full",children:[s.jsxs("div",{className:"w-60 p-6 bg-sky-50 rounded-2xl border-2 border-sky-200 text-sky-900 shadow-sm hover:translate-y-[-5px] transition-transform",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-black text-sm",children:"3.   (CRM)"}),s.jsx("div",{className:"text-[11px] font-bold opacity-60 mt-1",children:"AI   /  "})]}),s.jsx("div",{className:"flex items-center text-slate-200",children:s.jsx(s2,{size:32})}),s.jsxs("div",{className:"w-80 p-8 bg-indigo-600 rounded-[2rem] border-4 border-indigo-100 text-white shadow-2xl shadow-indigo-200 hover:scale-[1.05] transition-all",children:[s.jsx("div",{className:"text-3xl mb-3",children:""}),s.jsx("div",{className:"font-black text-xl",children:"  CENTER"}),s.jsx("div",{className:"text-[12px] font-bold opacity-80 mt-2",children:"  /   "})]}),s.jsx("div",{className:"flex items-center text-slate-200",children:s.jsx(s2,{size:32})}),s.jsxs("div",{className:"w-60 p-6 bg-sky-50 rounded-2xl border-2 border-sky-200 text-sky-900 shadow-sm hover:translate-y-[-5px] transition-transform",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-black text-sm",children:"8.   "}),s.jsx("div",{className:"text-[11px] font-bold opacity-60 mt-1",children:" /   "})]})]}),s.jsx("div",{className:"text-slate-300",children:s.jsx(z8,{className:"rotate-45",size:40})}),s.jsxs("div",{className:"flex items-center justify-center gap-12 w-full",children:[s.jsxs("div",{className:"w-64 p-6 bg-rose-50 rounded-2xl border-2 border-rose-200 text-rose-900 shadow-sm hover:translate-y-[-5px] transition-transform",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-black text-sm",children:"6.  "}),s.jsx("div",{className:"text-[11px] font-bold opacity-60 mt-1",children:" / RFM /  "})]}),s.jsx("div",{className:"flex items-center text-slate-200 text-2xl",children:""}),s.jsxs("div",{className:"w-64 p-6 bg-rose-50 rounded-2xl border-2 border-rose-200 text-rose-900 shadow-sm hover:translate-y-[-5px] transition-transform",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-black text-sm",children:"1. "}),s.jsx("div",{className:"text-[11px] font-bold opacity-60 mt-1",children:"  / AI  "})]})]})]}),s.jsxs("p",{className:"mt-16 text-slate-400 font-bold text-sm",children:["*   ",s.jsx("span",{className:"text-indigo-600 font-black",children:" "}),"     ."]})]})}),s.jsx(d,{number:"01",title:" (Dashboard)",id:"dashboard",icon:s.jsx(o2,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:[s.jsx("p",{className:"text-slate-500 font-medium leading-[1.8] text-lg",children:"       . AI         ."}),s.jsx(u,{number:"1.1",title:" AI  & ",children:s.jsxs(c,{color:"indigo",children:[s.jsx("b",{children:"  :"}),"      , ,    AI .",s.jsx("b",{children:" :"}),"    ,  ( ,   )     ."]})}),s.jsx(u,{number:"1.2",title:" 11  ",children:s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsx(l,{title:" /",children:"      ."}),s.jsx(l,{title:"/ ",children:"           ."}),s.jsx(l,{title:" /",children:"         ."}),s.jsx(l,{title:"/ ",children:"         ."})]})}),s.jsxs(o,{title:"  ",children:["     ",s.jsx("b",{children:"[/ ]"}),"  .           40%  !"]})]}),s.jsx(d,{number:"02",title:"  (Sales Control)",id:"sales",icon:s.jsx(px,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:[s.jsx(u,{number:"2.1",title:"    ",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-slate-500 font-medium leading-relaxed",children:", , (),     ."}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(l,{title:" ",children:"/ .      [ ]."}),s.jsx(l,{title:"  ",children:"   .      ."}),s.jsx(l,{title:"  ",children:"/         ."}),s.jsx(l,{title:"() ",children:"          ."})]})]})}),s.jsx(u,{number:"2.2",title:"   ",children:s.jsxs(c,{color:"indigo",children:[s.jsx("b",{children:"  :"}),"      ,         .",s.jsx("b",{children:" //:"}),"       .   ' '      ."]})}),s.jsx(u,{number:"2.3",title:"  ",children:s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsx(l,{title:"  ",children:"      ."}),s.jsx(l,{title:"  ",children:"      ."})]})})]}),s.jsx(d,{number:"03",title:"  (CRM)",id:"customer",icon:s.jsx(xx,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:[s.jsxs(u,{number:"3.1",title:"   ",children:[s.jsx("p",{className:"text-slate-500 font-medium leading-relaxed",children:"   ,     ."}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsx(l,{title:" /",children:", ,    (,  ) ."}),s.jsx(l,{title:" (CRM)",children:"              ."}),s.jsx(l,{title:"  ",children:"              ."}),s.jsx(l,{title:"/ ",children:"VIP    ,        ."})]})]}),s.jsx(u,{number:"3.2",title:"   ",children:s.jsxs(c,{color:"rose",title:"  ",children:["         .",s.jsx("b",{children:" :"}),"         [ ]    ."]})})]}),s.jsx(d,{number:"04",title:"//",id:"inventory_prod",icon:s.jsx(_v,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:[s.jsx(u,{number:"4.1",title:"   ",children:s.jsxs(c,{color:"violet",children:[s.jsx("b",{children:"/ :"})," ()     .",s.jsx("b",{children:"BOM(Recipe) :"}),"    ' ' ,  1     1,  1     ."]})}),s.jsx(u,{number:"4.2",title:"GAP / HACCP ",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-slate-500 font-medium leading-relaxed",children:"          ."}),s.jsx(l,{title:"  (Traceability)",children:"      ,          ."}),s.jsx(l,{title:" ",children:"        PDF   ."})]})})]}),s.jsx(d,{number:"05",title:"/ ",id:"finance",icon:s.jsx(V8,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:[s.jsx(u,{number:"5.1",title:"  ",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(l,{title:" /",children:"  .  (/)      ."}),s.jsx(l,{title:"  ",children:", ,      ."}),s.jsx(l,{title:"/ ",children:"       ."}),s.jsx(l,{title:"/ ",children:"  /   .      ."})]})}),s.jsx(u,{number:"5.2",title:"  /   ",children:s.jsxs(c,{color:"amber",children:[s.jsx("b",{children:" :"})," () ()    .",s.jsx("b",{children:" :"}),"    [ ]           ."]})})]}),s.jsx(d,{number:"06",title:"  (AI)",id:"intel",icon:s.jsx(F8,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:[s.jsx("p",{className:"text-slate-500 font-medium mb-6",children:"  AI     ."}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsx(l,{title:"  ",children:"        ."}),s.jsx(l,{title:"AI   ",children:"    ' '    ."}),s.jsx(l,{title:" ",children:"             ."}),s.jsx(l,{title:"  ",children:"       ."})]})]}),s.jsx(d,{number:"07",title:" ",id:"exp",icon:s.jsx(jc,{size:28})}),s.jsx("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:s.jsx(u,{number:"7.1",title:"   ",children:s.jsxs(c,{color:"emerald",children:[s.jsx("b",{children:" :"}),"  ,  , (/) .",s.jsx("b",{children:" :"}),"           ."]})})}),s.jsx(d,{number:"08",title:"  ",id:"schedule",icon:s.jsx(rx,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:[s.jsx("p",{className:"text-slate-500 font-medium",children:", ,        ' '."}),s.jsx(l,{title:" ",children:"   [ ]       ."}),s.jsxs(o,{title:" ",children:["   ",s.jsx("b",{children:"[ ]"}),"  .           !"]})]}),s.jsx(d,{number:"09",title:"   (Setup)",id:"settings",icon:s.jsx(rx,{size:28})}),s.jsx("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:s.jsx(u,{number:"9.1",title:"  ",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(l,{title:" ",children:" (/)    ."}),s.jsx(l,{title:"  ",children:"     , ,  ."}),s.jsx(l,{title:"/ ",children:"  . , , , BOM       ."}),s.jsx(l,{title:"  ",children:"      PIN    URL ."})]})})}),s.jsx(d,{number:"10",title:"   ",id:"rescue",icon:s.jsx(U8,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm mb-32",children:[s.jsxs("div",{className:"p-8 border-b border-slate-100 flex items-start gap-4 bg-rose-50/30 rounded-t-[3rem]",children:[s.jsx($A,{className:"text-rose-500 shrink-0",size:24}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-black text-slate-800 mb-1",children:"    ?"}),s.jsx("p",{className:"text-sm font-bold text-slate-400",children:"     ."})]})]}),s.jsxs("div",{className:"p-12 space-y-8",children:[s.jsx(u,{number:"1",title:"   ",children:s.jsxs("p",{className:"text-sm font-medium text-slate-600 leading-relaxed",children:[" ",s.jsx("b",{children:"Ctrl + R"}),"  ",s.jsx("b",{children:"F5"}),"    .       ."]})}),s.jsx(u,{number:"2",title:"   !",children:s.jsx("p",{className:"text-sm font-medium text-slate-600 leading-relaxed",children:"[ >   ]      []     . Mycelium       ."})}),s.jsx(u,{number:"3",title:"     ",children:s.jsx("p",{className:"text-sm font-medium text-slate-600 leading-relaxed",children:"     .      ,     [ ]   .  'Day-0'     ."})})]})]}),s.jsxs("div",{className:"text-center pt-24 border-t border-slate-200",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-tr from-indigo-500 to-violet-500 rounded-3xl flex items-center justify-center text-white mx-auto mb-10 shadow-xl shadow-indigo-100 rotate-3",children:s.jsx($8,{size:32})}),s.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-4",children:"  ,    "}),s.jsx("p",{className:"text-slate-400 font-bold text-sm mb-20",children:" 2026 Mycelium Enterprise Platform - User Instruction System v2.0"}),s.jsx("div",{className:"flex justify-center gap-4",children:s.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"px-6 py-3 bg-slate-800 text-white rounded-2xl font-black text-sm hover:bg-slate-700 transition-colors shadow-lg",children:"  "})})]})]})]}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .custom-scrollbar::-webkit-scrollbar { width: 6px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }
            `}})]})},DIe=()=>{const[a,e]=H.useState(navigator.onLine),[t,r]=H.useState(0),[n,i]=H.useState(!1),[o,l]=H.useState(null);H.useEffect(()=>{const u=()=>e(!0),h=()=>e(!1);window.addEventListener("online",u),window.addEventListener("offline",h),c();const f=setInterval(()=>{c()},3e4);return()=>{window.removeEventListener("online",u),window.removeEventListener("offline",h),clearInterval(f)}},[]),H.useEffect(()=>{a&&d()},[a]);const c=async()=>{const u=await E8();r(u.length)},d=async()=>{const u=await E8();if(u.length===0||n)return;i(!0),console.log(`PWA Sync: Starting sync for ${u.length} items...`);let h=0;for(const f of u)try{await Zte(f.id);const p=await Pa(f.commandName,f.args);p&&p.success!==!1?(await Kte(f.id),h++):await D8(f.id)}catch(p){console.error(`PWA Sync: Failed to sync item ${f.id}`,p),await D8(f.id)}i(!1),c(),h>0&&(l("success"),setTimeout(()=>l(null),5e3))};return a?t>0||n||o?s.jsx("div",{className:"fixed bottom-4 left-4 z-[100] animate-in slide-in-from-bottom duration-300",children:s.jsxs("div",{className:"bg-white px-4 py-3 rounded-2xl shadow-2xl flex items-center gap-4 border border-slate-100 min-w-[200px]",children:[n?s.jsx(Ed,{size:20,className:"text-indigo-600 animate-spin"}):o==="success"?s.jsx(FH,{size:20,className:"text-emerald-500"}):s.jsx(kv,{size:20,className:"text-indigo-600"}),s.jsxs("div",{className:"flex flex-col flex-1",children:[s.jsx("span",{className:"text-xs font-black text-slate-800",children:n?"  ...":o==="success"?" ":`   (${t})`}),s.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:n?"  .":o==="success"?"  .":" ."})]}),!n&&t>0&&s.jsx("button",{onClick:d,className:"p-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors",children:s.jsx(Ed,{size:14})})]})}):null:s.jsx("div",{className:"fixed bottom-4 left-4 z-[100] animate-in slide-in-from-bottom duration-300",children:s.jsxs("div",{className:"bg-slate-900 text-white px-4 py-3 rounded-2xl shadow-2xl flex items-center gap-3 border border-slate-700",children:[s.jsx(Sne,{size:18,className:"text-orange-500"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-xs font-black tracking-tight",children:" "}),s.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"   ."})]})]})})},IIe=()=>{const[a,e]=H.useState(null),[t,r]=H.useState(!1);return H.useEffect(()=>{(async()=>{try{const o=await(await fetch("/api/system/check-update")).json();o.update_available&&(e(o),setTimeout(()=>r(!0),2e3))}catch(i){console.warn("Update check failed",i)}})()},[]),!a||!t?null:s.jsx("div",{className:"fixed top-6 left-1/2 -translate-x-1/2 z-[9999] w-[90%] max-w-md animate-in slide-in-from-top duration-700",children:s.jsxs("div",{className:"bg-white/80 backdrop-blur-2xl border border-indigo-100 rounded-[2rem] p-6 shadow-2xl shadow-indigo-500/20 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/5 blur-[40px] rounded-full -mr-16 -mt-16 group-hover:bg-indigo-500/10 transition-colors"}),s.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-all",children:s.jsx(js,{size:16})}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-2xl flex items-center justify-center shrink-0 shadow-lg shadow-indigo-200",children:s.jsx(Bre,{size:24,className:"text-white"})}),s.jsxs("div",{className:"flex-1 pr-6 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"text-lg font-black text-slate-800 tracking-tight",children:" "}),s.jsxs("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-600 text-[10px] font-black rounded-full border border-indigo-100",children:["v",a.latest_version]})]}),s.jsx("p",{className:"text-slate-500 text-xs font-bold leading-relaxed mb-4",children:"  AI       ."}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("a",{href:a.release_url,target:"_blank",rel:"noreferrer",className:"flex-1 h-10 bg-indigo-600 hover:bg-slate-800 text-white rounded-xl text-[11px] font-black flex items-center justify-center gap-2 shadow-lg shadow-indigo-100 transition-all hover:scale-[1.02] active:scale-[0.98]",children:[s.jsx(VH,{size:14}),"   "]}),s.jsxs("button",{onClick:()=>r(!1),className:"flex-1 h-10 bg-slate-50 hover:bg-slate-100 text-slate-600 rounded-xl text-[11px] font-black flex items-center justify-center gap-2 transition-all",children:["  ",s.jsx(WA,{size:14})]})]})]})]})]})})},RIe=()=>{const a=Fn(),e=Ic(),t=[{path:"/mobile-dashboard",label:"",icon:o2},{path:"/mobile-reception",label:"",icon:WH},{path:"/mobile-event-sales",label:"",icon:YH},{path:"/mobile-worklog",label:"",icon:hh},{path:"/mobile-harvest",label:"",icon:Uae}];return s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t border-slate-100 flex items-center justify-between h-[calc(4.5rem+env(safe-area-inset-bottom))] px-2 pb-[env(safe-area-inset-bottom)] z-50 shadow-[0_-4px_20px_0_rgba(0,0,0,0.03)]",children:t.map(r=>{const n=r.icon,i=e.pathname===r.path;return s.jsxs("button",{onClick:()=>a(r.path),className:`flex-1 flex flex-col items-center justify-center gap-1 transition-all active:scale-90 ${i?"text-indigo-600":"text-slate-400"}`,children:[s.jsx("div",{className:`p-1 rounded-xl transition-all ${i?"bg-indigo-50":""}`,children:s.jsx(n,{size:22,strokeWidth:i?2.5:2})}),s.jsx("span",{className:`text-[9.5px] font-black tracking-tighter whitespace-nowrap overflow-hidden text-ellipsis ${i?"text-indigo-600":"text-slate-400"}`,children:r.label})]},r.path)})})},LIe=()=>s.jsxs("div",{className:"flex flex-col h-full bg-slate-50 overflow-hidden relative",children:[s.jsx("div",{className:"flex-1 overflow-x-hidden overflow-y-auto pb-24 touch-pan-y",children:s.jsx("main",{className:"animate-in fade-in slide-in-from-bottom-2 duration-500",children:s.jsx(hx,{})})}),s.jsx(RIe,{})]}),OIe=()=>{if(window.__MYCELIUM_MOBILE__!==void 0)return window.__MYCELIUM_MOBILE__;if(!!window.__TAURI__)return!1;const e=window.location.pathname.toLowerCase().startsWith("/mobile-");return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||e},PIe=()=>sessionStorage.getItem("userRole")!=="admin"?s.jsx(Tg,{to:"/",replace:!0}):s.jsx(hx,{});function BIe(){const{showConfirm:a}=Na(),e=H.useMemo(()=>OIe(),[]),[t,r]=H.useState(null),[n,i]=H.useState(()=>sessionStorage.getItem("isLoggedIn")==="true"),[o,l]=H.useState(()=>sessionStorage.getItem("pin_verified")==="true"),[c,d]=H.useState(!1),[u,h]=H.useState(!0);H.useEffect(()=>{(async()=>{try{let b=localStorage.getItem("API_BASE_URL")||"";b.endsWith("/")&&(b=b.slice(0,-1));const _=await(await fetch(`${b}/api/auth/status`)).json();r(_==="Configured");const T=await(await fetch(`${b}/api/auth/check`)).json();d(T.mobile_auth_required),T.logged_in&&(i(!0),sessionStorage.setItem("isLoggedIn","true"),sessionStorage.getItem("pin_verified")==="true"&&l(!0),T.user&&(sessionStorage.setItem("userRole",T.user.role||"worker"),sessionStorage.setItem("username",T.user.username||"mobile_user")))}catch(b){console.error("App initialization failed",b),r(!1)}finally{h(!1);const b=document.getElementById("app-spinner");b&&(b.style.opacity="0",setTimeout(()=>b.remove(),400))}})()},[e]);const f=({isMobile:g})=>s.jsxs("div",{className:"flex flex-col h-full bg-slate-50 overflow-hidden",children:[!g&&s.jsx(dae,{}),s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsx(hx,{})})]}),p=H.useMemo(()=>Dte(lte(s.jsxs(ga,{element:s.jsx(f,{isMobile:e}),children:[s.jsx(ga,{path:"/",element:e?s.jsx(Tg,{to:"/mobile-dashboard",replace:!0}):s.jsx(Tg,{to:"/dashboard",replace:!0})}),s.jsx(ga,{path:"setup",element:s.jsx(O8,{})}),s.jsx(ga,{path:"login",element:s.jsx(P8,{})}),s.jsxs(ga,{element:e?s.jsx(LIe,{}):s.jsx(hx,{}),children:[s.jsx(ga,{path:"mobile-dashboard",element:s.jsx(hde,{})}),s.jsx(ga,{path:"mobile-reception",element:s.jsx(nue,{})}),s.jsx(ga,{path:"mobile-event-sales",element:s.jsx(rue,{})}),s.jsx(ga,{path:"mobile-worklog",element:s.jsx(tue,{})}),s.jsx(ga,{path:"mobile-harvest",element:s.jsx(aue,{})})]}),s.jsx(ga,{path:"dashboard",element:s.jsx(dde,{})}),s.jsx(ga,{path:"sales/reception",element:s.jsx($De,{})}),s.jsx(ga,{path:"sales/special",element:s.jsx(YDe,{})}),s.jsx(ga,{path:"sales",element:s.jsx(Tg,{to:"/sales/reception",replace:!0})}),s.jsx(ga,{path:"sales/online-sync",element:s.jsx(XDe,{})}),s.jsx(ga,{path:"sales/shipping",element:s.jsx(KDe,{})}),s.jsx(ga,{path:"sales/claims",element:s.jsx(QDe,{})}),s.jsx(ga,{path:"sales/daily-receipts",element:s.jsx(eIe,{})}),s.jsx(ga,{path:"sales/daily",element:s.jsx(fIe,{})}),s.jsx(ga,{path:"sales/stock",element:s.jsx(dIe,{})}),s.jsx(ga,{path:"customer/event-mgmt",element:s.jsx(oue,{})}),s.jsx(ga,{path:"customer/register",element:s.jsx(iue,{})}),s.jsx(ga,{path:"customer/edit",element:s.jsx(sue,{})}),s.jsx(ga,{path:"sales/ledger",element:s.jsx(uIe,{})}),s.jsx(ga,{path:"customer/batch",element:s.jsx(cue,{})}),s.jsx(ga,{path:"customer/consultation",element:s.jsx(lue,{})}),s.jsx(ga,{path:"customer/best",element:s.jsx(due,{})}),s.jsx(ga,{path:"customer/special-care",element:s.jsx(uue,{})}),s.jsx(ga,{path:"finance/purchase",element:s.jsx(fue,{})}),s.jsx(ga,{path:"finance/expense",element:s.jsx(pue,{})}),s.jsx(ga,{path:"finance/tax-report",element:s.jsx(xue,{})}),s.jsx(ga,{path:"finance/vendor",element:s.jsx(mue,{})}),s.jsx(ga,{path:"finance/analysis",element:s.jsx(vue,{})}),s.jsx(ga,{path:"intel/sales",element:s.jsx(yue,{})}),s.jsx(ga,{path:"intel/customer",element:s.jsx(Cue,{})}),s.jsx(ga,{path:"marketing/association",element:s.jsx(Ope,{})}),s.jsx(ga,{path:"marketing/orm",element:s.jsx(NDe,{})}),s.jsx(ga,{path:"intel/region-analysis",element:s.jsx(_De,{})}),s.jsx(ga,{path:"product/sales",element:s.jsx(pIe,{})}),s.jsx(ga,{path:"customer/sms",element:s.jsx(hue,{})}),s.jsx(ga,{path:"exp/reservation-entry",element:s.jsx(mIe,{})}),s.jsx(ga,{path:"exp/reservation-status",element:s.jsx(gIe,{})}),s.jsxs(ga,{element:s.jsx(PIe,{}),children:[s.jsx(ga,{path:"exp/program-mgmt",element:s.jsx(xIe,{})}),s.jsx(ga,{path:"settings/product-list",element:s.jsx(jDe,{})}),s.jsx(ga,{path:"settings/user-list",element:s.jsx(SDe,{})}),s.jsx(ga,{path:"settings/company-info",element:s.jsx(kDe,{})}),s.jsx(ga,{path:"settings/api-keys",element:s.jsx(CDe,{})}),s.jsx(ga,{path:"settings/template-mgmt",element:s.jsx(RDe,{})}),s.jsx(ga,{path:"settings/iot",element:s.jsx(ODe,{})}),s.jsx(ga,{path:"settings/db-backup-restore",element:s.jsx(TDe,{})}),s.jsx(ga,{path:"settings/mobile-sync",element:s.jsx(LDe,{})}),s.jsx(ga,{path:"settings/db-reset",element:s.jsx(DDe,{})})]}),s.jsx(ga,{path:"production",element:s.jsx(TIe,{initialTab:"dashboard"})}),s.jsx(ga,{path:"schedule",element:s.jsx(yIe,{})}),s.jsx(ga,{path:"manual",element:s.jsx(EIe,{})}),e&&s.jsx(ga,{path:"*",element:s.jsx(Tg,{to:"/mobile-dashboard",replace:!0})})]}))),[e]);return u||t===null?null:s.jsx("div",{id:"app-root",className:`fixed inset-0 overflow-hidden ${e?"bg-slate-50":"bg-slate-950"} font-sans`,children:t&&n&&(!e||!c||o)?s.jsx(Ute,{router:p}):t?e?s.jsx(Mne,{onLoginSuccess:()=>{l(!0),i(!0)}}):s.jsx(P8,{onLoginSuccess:()=>i(!0)}):s.jsx(O8,{onComplete:()=>r(!0)})})}function zIe(){return s.jsxs(Gte,{children:[s.jsx(BIe,{}),s.jsx(DIe,{}),s.jsx(IIe,{})]})}function FIe(a={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:n,onRegisteredSW:i,onRegisterError:o}=a;let l,c;const d=async(h=!0)=>{await c};async function u(){if("serviceWorker"in navigator){if(l=await rG(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{o?.(h)}),!l)return;l.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),l.addEventListener("installed",h=>{h.isUpdate||r?.()}),l.register({immediate:e}).then(h=>{i?i("/sw.js",h):n?.(h)}).catch(h=>{o?.(h)})}}return c=u(),d}FIe({immediate:!0});vJ.createRoot(document.getElementById("root")).render(s.jsx(H.StrictMode,{children:s.jsx(zIe,{})}));export{l4 as C,xh as H,pT as W,Zde as a};
